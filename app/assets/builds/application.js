(()=>{var _x=Object.create;var _h=Object.defineProperty;var Mx=Object.getOwnPropertyDescriptor;var Ox=Object.getOwnPropertyNames;var Lx=Object.getPrototypeOf,kx=Object.prototype.hasOwnProperty;var Gi=(s,e)=>()=>(s&&(e=s(s=0)),e);var We=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),vb=(s,e)=>{for(var t in e)_h(s,t,{get:e[t],enumerable:!0})},Dx=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Ox(e))!kx.call(s,n)&&n!==t&&_h(s,n,{get:()=>e[n],enumerable:!(i=Mx(e,n))||i.enumerable});return s};var Ve=(s,e,t)=>(t=s!=null?_x(Lx(s)):{},Dx(e||!s||!s.__esModule?_h(t,"default",{value:s,enumerable:!0}):t,s));var tn,Ec=Gi(()=>{tn={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0}});var Re,Gr=Gi(()=>{Ec();Re={log(...s){this.enabled&&(s.push(Date.now()),tn.logger.log("[ActionCable]",...s))}}});var Zo,Sc,Qo,Ac,fp=Gi(()=>{Gr();Zo=()=>new Date().getTime(),Sc=s=>(Zo()-s)/1e3,Qo=class{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=Zo(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),Re.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=Zo(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),Re.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordMessage(){this.pingedAt=Zo()}recordConnect(){this.reconnectAttempts=0,delete this.disconnectedAt,Re.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=Zo(),Re.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:e,reconnectionBackoffRate:t}=this.constructor,i=Math.pow(1+t,Math.min(this.reconnectAttempts,10)),r=(this.reconnectAttempts===0?1:t)*Math.random();return e*1e3*i*(1+r)}reconnectIfStale(){this.connectionIsStale()&&(Re.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${Sc(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?Re.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${Sc(this.disconnectedAt)} s`):(Re.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return Sc(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&Sc(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(Re.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};Qo.staleThreshold=6;Qo.reconnectionBackoffRate=.15;Ac=Qo});var ea,mp=Gi(()=>{ea={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]}});var ta,gp,VC,Jb,ia,Tc,vp=Gi(()=>{Ec();fp();mp();Gr();({message_types:ta,protocols:gp}=ea),VC=gp.slice(0,gp.length-1),Jb=[].indexOf,ia=class{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new Ac(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){if(this.isActive())return Re.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let e=[...gp,...this.consumer.subprotocols||[]];return Re.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${e}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new tn.WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(Re.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){Re.log("Failed to reopen WebSocket",e)}finally{Re.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return Jb.call(VC,this.getProtocol())>=0}isState(...e){return Jb.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in tn.WebSocket)if(tn.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){let t=this.events[e].bind(this);this.webSocket[`on${e}`]=t}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}};ia.reopenDelay=500;ia.prototype.events={message(s){if(!this.isProtocolSupported())return;let{identifier:e,message:t,reason:i,reconnect:n,type:r}=JSON.parse(s.data);switch(this.monitor.recordMessage(),r){case ta.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case ta.disconnect:return Re.log(`Disconnecting. Reason: ${i}`),this.close({allowReconnect:n});case ta.ping:return null;case ta.confirmation:return this.subscriptions.confirmSubscription(e),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(e,"connected",{reconnected:!0})):this.subscriptions.notify(e,"connected",{reconnected:!1});case ta.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",t)}},open(){if(Re.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return Re.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(s){if(Re.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){Re.log("WebSocket onerror event")}};Tc=ia});var qC,Fn,bp=Gi(()=>{qC=function(s,e){if(e!=null)for(let t in e){let i=e[t];s[t]=i}return s},Fn=class{constructor(e,t={},i){this.consumer=e,this.identifier=JSON.stringify(t),qC(this,i)}perform(e,t={}){return t.action=e,this.send(t)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}});var yp,xc,wp=Gi(()=>{Gr();yp=class{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(Re.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):Re.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){Re.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(t=>t!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{Re.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}},xc=yp});var In,Ep=Gi(()=>{bp();wp();Gr();In=class{constructor(e){this.consumer=e,this.guarantor=new xc(this),this.subscriptions=[]}create(e,t){let i=e,n=typeof i=="object"?i:{channel:i},r=new Fn(this.consumer,n,t);return this.add(r)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(t=>(this.forget(t),this.notify(t,"rejected"),t))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(t=>t!==e),e}findAll(e){return this.subscriptions.filter(t=>t.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...t){return this.subscriptions.map(i=>this.notify(i,e,...t))}notify(e,t,...i){let n;return typeof e=="string"?n=this.findAll(e):n=[e],n.map(r=>typeof r[t]=="function"?r[t](...i):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){Re.log(`Subscription confirmed ${e}`),this.findAll(e).map(t=>this.guarantor.forget(t))}sendCommand(e,t){let{identifier:i}=e;return this.consumer.send({command:t,identifier:i})}}});function Sp(s){if(typeof s=="function"&&(s=s()),s&&!/^wss?:/i.test(s)){let e=document.createElement("a");return e.href=s,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return s}var Yr,Zb=Gi(()=>{vp();Ep();Yr=class{constructor(e){this._url=e,this.subscriptions=new In(this),this.connection=new Tc(this),this.subprotocols=[]}get url(){return Sp(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(e){this.subprotocols=[...this.subprotocols,e]}}});var ey={};vb(ey,{Connection:()=>Tc,ConnectionMonitor:()=>Ac,Consumer:()=>Yr,INTERNAL:()=>ea,Subscription:()=>Fn,SubscriptionGuarantor:()=>xc,Subscriptions:()=>In,adapters:()=>tn,createConsumer:()=>WC,createWebSocketURL:()=>Sp,getConfig:()=>Qb,logger:()=>Re});function WC(s=Qb("url")||ea.default_mount_path){return new Yr(s)}function Qb(s){let e=document.head.querySelector(`meta[name='action-cable-${s}']`);if(e)return e.getAttribute("content")}var ty=Gi(()=>{vp();fp();Zb();mp();bp();Ep();wp();Ec();Gr()});var jy=We(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});function si(s){if(s==null)return window;if(s.toString()!=="[object Window]"){var e=s.ownerDocument;return e&&e.defaultView||window}return s}function Nn(s){var e=si(s).Element;return s instanceof e||s instanceof Element}function wi(s){var e=si(s).HTMLElement;return s instanceof e||s instanceof HTMLElement}function Kp(s){if(typeof ShadowRoot>"u")return!1;var e=si(s).ShadowRoot;return s instanceof e||s instanceof ShadowRoot}var Rn=Math.max,Ic=Math.min,Xr=Math.round;function Yp(){var s=navigator.userAgentData;return s!=null&&s.brands&&Array.isArray(s.brands)?s.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function _y(){return!/^((?!chrome|android).)*safari/i.test(Yp())}function Kr(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=s.getBoundingClientRect(),n=1,r=1;e&&wi(s)&&(n=s.offsetWidth>0&&Xr(i.width)/s.offsetWidth||1,r=s.offsetHeight>0&&Xr(i.height)/s.offsetHeight||1);var o=Nn(s)?si(s):window,a=o.visualViewport,l=!_y()&&t,c=(i.left+(l&&a?a.offsetLeft:0))/n,u=(i.top+(l&&a?a.offsetTop:0))/r,h=i.width/n,f=i.height/r;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c,x:c,y:u}}function Jp(s){var e=si(s),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function UP(s){return{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}}function jP(s){return s===si(s)||!wi(s)?Jp(s):UP(s)}function Xi(s){return s?(s.nodeName||"").toLowerCase():null}function sn(s){return((Nn(s)?s.ownerDocument:s.document)||window.document).documentElement}function Zp(s){return Kr(sn(s)).left+Jp(s).scrollLeft}function gs(s){return si(s).getComputedStyle(s)}function Qp(s){var e=gs(s),t=e.overflow,i=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+n+i)}function VP(s){var e=s.getBoundingClientRect(),t=Xr(e.width)/s.offsetWidth||1,i=Xr(e.height)/s.offsetHeight||1;return t!==1||i!==1}function qP(s,e,t){t===void 0&&(t=!1);var i=wi(e),n=wi(e)&&VP(e),r=sn(e),o=Kr(s,n,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((Xi(e)!=="body"||Qp(r))&&(a=jP(e)),wi(e)?(l=Kr(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=Zp(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function ef(s){var e=Kr(s),t=s.offsetWidth,i=s.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:s.offsetLeft,y:s.offsetTop,width:t,height:i}}function Rc(s){return Xi(s)==="html"?s:s.assignedSlot||s.parentNode||(Kp(s)?s.host:null)||sn(s)}function My(s){return["html","body","#document"].indexOf(Xi(s))>=0?s.ownerDocument.body:wi(s)&&Qp(s)?s:My(Rc(s))}function la(s,e){var t;e===void 0&&(e=[]);var i=My(s),n=i===((t=s.ownerDocument)==null?void 0:t.body),r=si(i),o=n?[r].concat(r.visualViewport||[],Qp(i)?i:[]):i,a=e.concat(o);return n?a:a.concat(la(Rc(o)))}function WP(s){return["table","td","th"].indexOf(Xi(s))>=0}function yy(s){return!wi(s)||gs(s).position==="fixed"?null:s.offsetParent}function GP(s){var e=/firefox/i.test(Yp()),t=/Trident/i.test(Yp());if(t&&wi(s)){var i=gs(s);if(i.position==="fixed")return null}var n=Rc(s);for(Kp(n)&&(n=n.host);wi(n)&&["html","body"].indexOf(Xi(n))<0;){var r=gs(n);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return n;n=n.parentNode}return null}function da(s){for(var e=si(s),t=yy(s);t&&WP(t)&&gs(t).position==="static";)t=yy(t);return t&&(Xi(t)==="html"||Xi(t)==="body"&&gs(t).position==="static")?e:t||GP(s)||e}var Wt="top",Ei="bottom",Si="right",Gt="left",tf="auto",ha=[Wt,Ei,Si,Gt],Jr="start",ua="end",YP="clippingParents",Oy="viewport",aa="popper",XP="reference",wy=ha.reduce(function(s,e){return s.concat([e+"-"+Jr,e+"-"+ua])},[]),Ly=[].concat(ha,[tf]).reduce(function(s,e){return s.concat([e,e+"-"+Jr,e+"-"+ua])},[]),KP="beforeRead",JP="read",ZP="afterRead",QP="beforeMain",e_="main",t_="afterMain",i_="beforeWrite",s_="write",n_="afterWrite",r_=[KP,JP,ZP,QP,e_,t_,i_,s_,n_];function o_(s){var e=new Map,t=new Set,i=[];s.forEach(function(r){e.set(r.name,r)});function n(r){t.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&n(l)}}),i.push(r)}return s.forEach(function(r){t.has(r.name)||n(r)}),i}function a_(s){var e=o_(s);return r_.reduce(function(t,i){return t.concat(e.filter(function(n){return n.phase===i}))},[])}function l_(s){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(s())})})),e}}function c_(s){var e=s.reduce(function(t,i){var n=t[i.name];return t[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}function u_(s,e){var t=si(s),i=sn(s),n=t.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(n){r=n.width,o=n.height;var c=_y();(c||!c&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:r,height:o,x:a+Zp(s),y:l}}function d_(s){var e,t=sn(s),i=Jp(s),n=(e=s.ownerDocument)==null?void 0:e.body,r=Rn(t.scrollWidth,t.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=Rn(t.scrollHeight,t.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-i.scrollLeft+Zp(s),l=-i.scrollTop;return gs(n||t).direction==="rtl"&&(a+=Rn(t.clientWidth,n?n.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function ky(s,e){var t=e.getRootNode&&e.getRootNode();if(s.contains(e))return!0;if(t&&Kp(t)){var i=e;do{if(i&&s.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Xp(s){return Object.assign({},s,{left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height})}function h_(s,e){var t=Kr(s,!1,e==="fixed");return t.top=t.top+s.clientTop,t.left=t.left+s.clientLeft,t.bottom=t.top+s.clientHeight,t.right=t.left+s.clientWidth,t.width=s.clientWidth,t.height=s.clientHeight,t.x=t.left,t.y=t.top,t}function Ey(s,e,t){return e===Oy?Xp(u_(s,t)):Nn(e)?h_(e,t):Xp(d_(sn(s)))}function p_(s){var e=la(Rc(s)),t=["absolute","fixed"].indexOf(gs(s).position)>=0,i=t&&wi(s)?da(s):s;return Nn(i)?e.filter(function(n){return Nn(n)&&ky(n,i)&&Xi(n)!=="body"}):[]}function f_(s,e,t,i){var n=e==="clippingParents"?p_(s):[].concat(e),r=[].concat(n,[t]),o=r[0],a=r.reduce(function(l,c){var u=Ey(s,c,i);return l.top=Rn(u.top,l.top),l.right=Ic(u.right,l.right),l.bottom=Ic(u.bottom,l.bottom),l.left=Rn(u.left,l.left),l},Ey(s,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Yi(s){return s.split("-")[0]}function Zr(s){return s.split("-")[1]}function sf(s){return["top","bottom"].indexOf(s)>=0?"x":"y"}function Dy(s){var e=s.reference,t=s.element,i=s.placement,n=i?Yi(i):null,r=i?Zr(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(n){case Wt:l={x:o,y:e.y-t.height};break;case Ei:l={x:o,y:e.y+e.height};break;case Si:l={x:e.x+e.width,y:a};break;case Gt:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=n?sf(n):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case Jr:l[c]=l[c]-(e[u]/2-t[u]/2);break;case ua:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function Fy(){return{top:0,right:0,bottom:0,left:0}}function Iy(s){return Object.assign({},Fy(),s)}function Ry(s,e){return e.reduce(function(t,i){return t[i]=s,t},{})}function Qr(s,e){e===void 0&&(e={});var t=e,i=t.placement,n=i===void 0?s.placement:i,r=t.strategy,o=r===void 0?s.strategy:r,a=t.boundary,l=a===void 0?YP:a,c=t.rootBoundary,u=c===void 0?Oy:c,h=t.elementContext,f=h===void 0?aa:h,p=t.altBoundary,v=p===void 0?!1:p,w=t.padding,S=w===void 0?0:w,A=Iy(typeof S!="number"?S:Ry(S,ha)),k=f===aa?XP:aa,D=s.rects.popper,R=s.elements[v?k:f],$=f_(Nn(R)?R:R.contextElement||sn(s.elements.popper),l,u,o),U=Kr(s.elements.reference),Z=Dy({reference:U,element:D,strategy:"absolute",placement:n}),K=Xp(Object.assign({},D,Z)),ue=f===aa?K:U,X={top:$.top-ue.top+A.top,bottom:ue.bottom-$.bottom+A.bottom,left:$.left-ue.left+A.left,right:ue.right-$.right+A.right},oe=s.modifiersData.offset;if(f===aa&&oe){var he=oe[n];Object.keys(X).forEach(function(se){var Q=[Si,Ei].indexOf(se)>=0?1:-1,H=[Wt,Ei].indexOf(se)>=0?"y":"x";X[se]+=he[H]*Q})}return X}var Sy={placement:"bottom",modifiers:[],strategy:"absolute"};function Ay(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function nf(s){s===void 0&&(s={});var e=s,t=e.defaultModifiers,i=t===void 0?[]:t,n=e.defaultOptions,r=n===void 0?Sy:n;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Sy,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],f=!1,p={state:u,setOptions:function(A){var k=typeof A=="function"?A(u.options):A;w(),u.options=Object.assign({},r,u.options,k),u.scrollParents={reference:Nn(a)?la(a):a.contextElement?la(a.contextElement):[],popper:la(l)};var D=a_(c_([].concat(i,u.options.modifiers)));return u.orderedModifiers=D.filter(function(R){return R.enabled}),v(),p.update()},forceUpdate:function(){if(!f){var A=u.elements,k=A.reference,D=A.popper;if(Ay(k,D)){u.rects={reference:qP(k,da(D),u.options.strategy==="fixed"),popper:ef(D)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(X){return u.modifiersData[X.name]=Object.assign({},X.data)});for(var R=0;R<u.orderedModifiers.length;R++){if(u.reset===!0){u.reset=!1,R=-1;continue}var $=u.orderedModifiers[R],U=$.fn,Z=$.options,K=Z===void 0?{}:Z,ue=$.name;typeof U=="function"&&(u=U({state:u,options:K,name:ue,instance:p})||u)}}}},update:l_(function(){return new Promise(function(S){p.forceUpdate(),S(u)})}),destroy:function(){w(),f=!0}};if(!Ay(a,l))return p;p.setOptions(c).then(function(S){!f&&c.onFirstUpdate&&c.onFirstUpdate(S)});function v(){u.orderedModifiers.forEach(function(S){var A=S.name,k=S.options,D=k===void 0?{}:k,R=S.effect;if(typeof R=="function"){var $=R({state:u,name:A,instance:p,options:D}),U=function(){};h.push($||U)}})}function w(){h.forEach(function(S){return S()}),h=[]}return p}}var Dc={passive:!0};function m_(s){var e=s.state,t=s.instance,i=s.options,n=i.scroll,r=n===void 0?!0:n,o=i.resize,a=o===void 0?!0:o,l=si(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",t.update,Dc)}),a&&l.addEventListener("resize",t.update,Dc),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",t.update,Dc)}),a&&l.removeEventListener("resize",t.update,Dc)}}var rf={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:m_,data:{}};function g_(s){var e=s.state,t=s.name;e.modifiersData[t]=Dy({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var of={name:"popperOffsets",enabled:!0,phase:"read",fn:g_,data:{}},v_={top:"auto",right:"auto",bottom:"auto",left:"auto"};function b_(s,e){var t=s.x,i=s.y,n=e.devicePixelRatio||1;return{x:Xr(t*n)/n||0,y:Xr(i*n)/n||0}}function Ty(s){var e,t=s.popper,i=s.popperRect,n=s.placement,r=s.variation,o=s.offsets,a=s.position,l=s.gpuAcceleration,c=s.adaptive,u=s.roundOffsets,h=s.isFixed,f=o.x,p=f===void 0?0:f,v=o.y,w=v===void 0?0:v,S=typeof u=="function"?u({x:p,y:w}):{x:p,y:w};p=S.x,w=S.y;var A=o.hasOwnProperty("x"),k=o.hasOwnProperty("y"),D=Gt,R=Wt,$=window;if(c){var U=da(t),Z="clientHeight",K="clientWidth";if(U===si(t)&&(U=sn(t),gs(U).position!=="static"&&a==="absolute"&&(Z="scrollHeight",K="scrollWidth")),U=U,n===Wt||(n===Gt||n===Si)&&r===ua){R=Ei;var ue=h&&U===$&&$.visualViewport?$.visualViewport.height:U[Z];w-=ue-i.height,w*=l?1:-1}if(n===Gt||(n===Wt||n===Ei)&&r===ua){D=Si;var X=h&&U===$&&$.visualViewport?$.visualViewport.width:U[K];p-=X-i.width,p*=l?1:-1}}var oe=Object.assign({position:a},c&&v_),he=u===!0?b_({x:p,y:w},si(t)):{x:p,y:w};if(p=he.x,w=he.y,l){var se;return Object.assign({},oe,(se={},se[R]=k?"0":"",se[D]=A?"0":"",se.transform=($.devicePixelRatio||1)<=1?"translate("+p+"px, "+w+"px)":"translate3d("+p+"px, "+w+"px, 0)",se))}return Object.assign({},oe,(e={},e[R]=k?w+"px":"",e[D]=A?p+"px":"",e.transform="",e))}function y_(s){var e=s.state,t=s.options,i=t.gpuAcceleration,n=i===void 0?!0:i,r=t.adaptive,o=r===void 0?!0:r,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:Yi(e.placement),variation:Zr(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Ty(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Ty(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var af={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:y_,data:{}};function w_(s){var e=s.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},r=e.elements[t];!wi(r)||!Xi(r)||(Object.assign(r.style,i),Object.keys(n).forEach(function(o){var a=n[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function E_(s){var e=s.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var n=e.elements[i],r=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!wi(n)||!Xi(n)||(Object.assign(n.style,a),Object.keys(r).forEach(function(l){n.removeAttribute(l)}))})}}var lf={name:"applyStyles",enabled:!0,phase:"write",fn:w_,effect:E_,requires:["computeStyles"]};function S_(s,e,t){var i=Yi(s),n=[Gt,Wt].indexOf(i)>=0?-1:1,r=typeof t=="function"?t(Object.assign({},e,{placement:s})):t,o=r[0],a=r[1];return o=o||0,a=(a||0)*n,[Gt,Si].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function A_(s){var e=s.state,t=s.options,i=s.name,n=t.offset,r=n===void 0?[0,0]:n,o=Ly.reduce(function(u,h){return u[h]=S_(h,e.rects,r),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}var Ny={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:A_},T_={left:"right",right:"left",bottom:"top",top:"bottom"};function Fc(s){return s.replace(/left|right|bottom|top/g,function(e){return T_[e]})}var x_={start:"end",end:"start"};function xy(s){return s.replace(/start|end/g,function(e){return x_[e]})}function C_(s,e){e===void 0&&(e={});var t=e,i=t.placement,n=t.boundary,r=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?Ly:l,u=Zr(i),h=u?a?wy:wy.filter(function(v){return Zr(v)===u}):ha,f=h.filter(function(v){return c.indexOf(v)>=0});f.length===0&&(f=h);var p=f.reduce(function(v,w){return v[w]=Qr(s,{placement:w,boundary:n,rootBoundary:r,padding:o})[Yi(w)],v},{});return Object.keys(p).sort(function(v,w){return p[v]-p[w]})}function P_(s){if(Yi(s)===tf)return[];var e=Fc(s);return[xy(s),e,xy(e)]}function __(s){var e=s.state,t=s.options,i=s.name;if(!e.modifiersData[i]._skip){for(var n=t.mainAxis,r=n===void 0?!0:n,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,h=t.rootBoundary,f=t.altBoundary,p=t.flipVariations,v=p===void 0?!0:p,w=t.allowedAutoPlacements,S=e.options.placement,A=Yi(S),k=A===S,D=l||(k||!v?[Fc(S)]:P_(S)),R=[S].concat(D).reduce(function(De,qe){return De.concat(Yi(qe)===tf?C_(e,{placement:qe,boundary:u,rootBoundary:h,padding:c,flipVariations:v,allowedAutoPlacements:w}):qe)},[]),$=e.rects.reference,U=e.rects.popper,Z=new Map,K=!0,ue=R[0],X=0;X<R.length;X++){var oe=R[X],he=Yi(oe),se=Zr(oe)===Jr,Q=[Wt,Ei].indexOf(he)>=0,H=Q?"width":"height",T=Qr(e,{placement:oe,boundary:u,rootBoundary:h,altBoundary:f,padding:c}),F=Q?se?Si:Gt:se?Ei:Wt;$[H]>U[H]&&(F=Fc(F));var _=Fc(F),J=[];if(r&&J.push(T[he]<=0),a&&J.push(T[F]<=0,T[_]<=0),J.every(function(De){return De})){ue=oe,K=!1;break}Z.set(oe,J)}if(K)for(var ie=v?3:1,le=function(qe){var _e=R.find(function(Qe){var Ge=Z.get(Qe);if(Ge)return Ge.slice(0,qe).every(function(G){return G})});if(_e)return ue=_e,"break"},ve=ie;ve>0;ve--){var Ae=le(ve);if(Ae==="break")break}e.placement!==ue&&(e.modifiersData[i]._skip=!0,e.placement=ue,e.reset=!0)}}var By={name:"flip",enabled:!0,phase:"main",fn:__,requiresIfExists:["offset"],data:{_skip:!1}};function M_(s){return s==="x"?"y":"x"}function ca(s,e,t){return Rn(s,Ic(e,t))}function O_(s,e,t){var i=ca(s,e,t);return i>t?t:i}function L_(s){var e=s.state,t=s.options,i=s.name,n=t.mainAxis,r=n===void 0?!0:n,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,h=t.padding,f=t.tether,p=f===void 0?!0:f,v=t.tetherOffset,w=v===void 0?0:v,S=Qr(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),A=Yi(e.placement),k=Zr(e.placement),D=!k,R=sf(A),$=M_(R),U=e.modifiersData.popperOffsets,Z=e.rects.reference,K=e.rects.popper,ue=typeof w=="function"?w(Object.assign({},e.rects,{placement:e.placement})):w,X=typeof ue=="number"?{mainAxis:ue,altAxis:ue}:Object.assign({mainAxis:0,altAxis:0},ue),oe=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,he={x:0,y:0};if(U){if(r){var se,Q=R==="y"?Wt:Gt,H=R==="y"?Ei:Si,T=R==="y"?"height":"width",F=U[R],_=F+S[Q],J=F-S[H],ie=p?-K[T]/2:0,le=k===Jr?Z[T]:K[T],ve=k===Jr?-K[T]:-Z[T],Ae=e.elements.arrow,De=p&&Ae?ef(Ae):{width:0,height:0},qe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Fy(),_e=qe[Q],Qe=qe[H],Ge=ca(0,Z[T],De[T]),G=D?Z[T]/2-ie-Ge-_e-X.mainAxis:le-Ge-_e-X.mainAxis,Te=D?-Z[T]/2+ie+Ge+Qe+X.mainAxis:ve+Ge+Qe+X.mainAxis,ee=e.elements.arrow&&da(e.elements.arrow),V=ee?R==="y"?ee.clientTop||0:ee.clientLeft||0:0,O=(se=oe?.[R])!=null?se:0,P=F+G-O-V,z=F+Te-O,I=ca(p?Ic(_,P):_,F,p?Rn(J,z):J);U[R]=I,he[R]=I-F}if(a){var je,fe=R==="x"?Wt:Gt,ft=R==="x"?Ei:Si,Dt=U[$],Us=$==="y"?"height":"width",rs=Dt+S[fe],gn=Dt-S[ft],vn=[Wt,Gt].indexOf(A)!==-1,Lr=(je=oe?.[$])!=null?je:0,kr=vn?rs:Dt-Z[Us]-K[Us]-Lr+X.altAxis,$i=vn?Dt+Z[Us]+K[Us]-Lr-X.altAxis:gn,bn=p&&vn?O_(kr,Dt,$i):ca(p?kr:rs,Dt,p?$i:gn);U[$]=bn,he[$]=bn-Dt}e.modifiersData[i]=he}}var zy={name:"preventOverflow",enabled:!0,phase:"main",fn:L_,requiresIfExists:["offset"]},k_=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Iy(typeof e!="number"?e:Ry(e,ha))};function D_(s){var e,t=s.state,i=s.name,n=s.options,r=t.elements.arrow,o=t.modifiersData.popperOffsets,a=Yi(t.placement),l=sf(a),c=[Gt,Si].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var h=k_(n.padding,t),f=ef(r),p=l==="y"?Wt:Gt,v=l==="y"?Ei:Si,w=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],S=o[l]-t.rects.reference[l],A=da(r),k=A?l==="y"?A.clientHeight||0:A.clientWidth||0:0,D=w/2-S/2,R=h[p],$=k-f[u]-h[v],U=k/2-f[u]/2+D,Z=ca(R,U,$),K=l;t.modifiersData[i]=(e={},e[K]=Z,e.centerOffset=Z-U,e)}}function F_(s){var e=s.state,t=s.options,i=t.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||ky(e.elements.popper,n)&&(e.elements.arrow=n))}var $y={name:"arrow",enabled:!0,phase:"main",fn:D_,effect:F_,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Cy(s,e,t){return t===void 0&&(t={x:0,y:0}),{top:s.top-e.height-t.y,right:s.right-e.width+t.x,bottom:s.bottom-e.height+t.y,left:s.left-e.width-t.x}}function Py(s){return[Wt,Si,Ei,Gt].some(function(e){return s[e]>=0})}function I_(s){var e=s.state,t=s.name,i=e.rects.reference,n=e.rects.popper,r=e.modifiersData.preventOverflow,o=Qr(e,{elementContext:"reference"}),a=Qr(e,{altBoundary:!0}),l=Cy(o,i),c=Cy(a,n,r),u=Py(l),h=Py(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}var Hy={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:I_},R_=[rf,of,af,lf],N_=nf({defaultModifiers:R_}),Uy=[rf,of,af,lf,Ny,By,zy,$y,Hy],B_=nf({defaultModifiers:Uy});_t.applyStyles=lf;_t.arrow=$y;_t.computeStyles=af;_t.createPopper=B_;_t.createPopperLite=N_;_t.defaultModifiers=Uy;_t.detectOverflow=Qr;_t.eventListeners=rf;_t.flip=By;_t.hide=Hy;_t.offset=Ny;_t.popperGenerator=nf;_t.popperOffsets=of;_t.preventOverflow=zy});var df=We((cf,uf)=>{(function(s,e){typeof cf=="object"&&typeof uf<"u"?uf.exports=e(jy()):typeof define=="function"&&define.amd?define(["@popperjs/core"],e):(s=typeof globalThis<"u"?globalThis:s||self,s.bootstrap=e(s.Popper))})(cf,function(s){"use strict";function e(C){let d=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(C){for(let b in C)if(b!=="default"){let M=Object.getOwnPropertyDescriptor(C,b);Object.defineProperty(d,b,M.get?M:{enumerable:!0,get:()=>C[b]})}}return d.default=C,Object.freeze(d)}let t=e(s),i=new Map,n={set(C,d,b){i.has(C)||i.set(C,new Map);let M=i.get(C);if(!M.has(d)&&M.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(M.keys())[0]}.`);return}M.set(d,b)},get(C,d){return i.has(C)&&i.get(C).get(d)||null},remove(C,d){if(!i.has(C))return;let b=i.get(C);b.delete(d),b.size===0&&i.delete(C)}},r=1e6,o=1e3,a="transitionend",l=C=>(C&&window.CSS&&window.CSS.escape&&(C=C.replace(/#([^\s"#']+)/g,(d,b)=>`#${CSS.escape(b)}`)),C),c=C=>C==null?`${C}`:Object.prototype.toString.call(C).match(/\s([a-z]+)/i)[1].toLowerCase(),u=C=>{do C+=Math.floor(Math.random()*r);while(document.getElementById(C));return C},h=C=>{if(!C)return 0;let{transitionDuration:d,transitionDelay:b}=window.getComputedStyle(C),M=Number.parseFloat(d),Y=Number.parseFloat(b);return!M&&!Y?0:(d=d.split(",")[0],b=b.split(",")[0],(Number.parseFloat(d)+Number.parseFloat(b))*o)},f=C=>{C.dispatchEvent(new Event(a))},p=C=>!C||typeof C!="object"?!1:(typeof C.jquery<"u"&&(C=C[0]),typeof C.nodeType<"u"),v=C=>p(C)?C.jquery?C[0]:C:typeof C=="string"&&C.length>0?document.querySelector(l(C)):null,w=C=>{if(!p(C)||C.getClientRects().length===0)return!1;let d=getComputedStyle(C).getPropertyValue("visibility")==="visible",b=C.closest("details:not([open])");if(!b)return d;if(b!==C){let M=C.closest("summary");if(M&&M.parentNode!==b||M===null)return!1}return d},S=C=>!C||C.nodeType!==Node.ELEMENT_NODE||C.classList.contains("disabled")?!0:typeof C.disabled<"u"?C.disabled:C.hasAttribute("disabled")&&C.getAttribute("disabled")!=="false",A=C=>{if(!document.documentElement.attachShadow)return null;if(typeof C.getRootNode=="function"){let d=C.getRootNode();return d instanceof ShadowRoot?d:null}return C instanceof ShadowRoot?C:C.parentNode?A(C.parentNode):null},k=()=>{},D=C=>{C.offsetHeight},R=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,$=[],U=C=>{document.readyState==="loading"?($.length||document.addEventListener("DOMContentLoaded",()=>{for(let d of $)d()}),$.push(C)):C()},Z=()=>document.documentElement.dir==="rtl",K=C=>{U(()=>{let d=R();if(d){let b=C.NAME,M=d.fn[b];d.fn[b]=C.jQueryInterface,d.fn[b].Constructor=C,d.fn[b].noConflict=()=>(d.fn[b]=M,C.jQueryInterface)}})},ue=(C,d=[],b=C)=>typeof C=="function"?C(...d):b,X=(C,d,b=!0)=>{if(!b){ue(C);return}let Y=h(d)+5,de=!1,ce=({target:Ee})=>{Ee===d&&(de=!0,d.removeEventListener(a,ce),ue(C))};d.addEventListener(a,ce),setTimeout(()=>{de||f(d)},Y)},oe=(C,d,b,M)=>{let Y=C.length,de=C.indexOf(d);return de===-1?!b&&M?C[Y-1]:C[0]:(de+=b?1:-1,M&&(de=(de+Y)%Y),C[Math.max(0,Math.min(de,Y-1))])},he=/[^.]*(?=\..*)\.|.*/,se=/\..*/,Q=/::\d+$/,H={},T=1,F={mouseenter:"mouseover",mouseleave:"mouseout"},_=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function J(C,d){return d&&`${d}::${T++}`||C.uidEvent||T++}function ie(C){let d=J(C);return C.uidEvent=d,H[d]=H[d]||{},H[d]}function le(C,d){return function b(M){return Te(M,{delegateTarget:C}),b.oneOff&&G.off(C,M.type,d),d.apply(C,[M])}}function ve(C,d,b){return function M(Y){let de=C.querySelectorAll(d);for(let{target:ce}=Y;ce&&ce!==this;ce=ce.parentNode)for(let Ee of de)if(Ee===ce)return Te(Y,{delegateTarget:ce}),M.oneOff&&G.off(C,Y.type,d,b),b.apply(ce,[Y])}}function Ae(C,d,b=null){return Object.values(C).find(M=>M.callable===d&&M.delegationSelector===b)}function De(C,d,b){let M=typeof d=="string",Y=M?b:d||b,de=Ge(C);return _.has(de)||(de=C),[M,Y,de]}function qe(C,d,b,M,Y){if(typeof d!="string"||!C)return;let[de,ce,Ee]=De(d,b,M);d in F&&(ce=(Px=>function(Br){if(!Br.relatedTarget||Br.relatedTarget!==Br.delegateTarget&&!Br.delegateTarget.contains(Br.relatedTarget))return Px.call(this,Br)})(ce));let qt=ie(C),vi=qt[Ee]||(qt[Ee]={}),gt=Ae(vi,ce,de?b:null);if(gt){gt.oneOff=gt.oneOff&&Y;return}let Wi=J(ce,d.replace(he,"")),ki=de?ve(C,b,ce):le(C,ce);ki.delegationSelector=de?b:null,ki.callable=ce,ki.oneOff=Y,ki.uidEvent=Wi,vi[Wi]=ki,C.addEventListener(Ee,ki,de)}function _e(C,d,b,M,Y){let de=Ae(d[b],M,Y);de&&(C.removeEventListener(b,de,!!Y),delete d[b][de.uidEvent])}function Qe(C,d,b,M){let Y=d[b]||{};for(let[de,ce]of Object.entries(Y))de.includes(M)&&_e(C,d,b,ce.callable,ce.delegationSelector)}function Ge(C){return C=C.replace(se,""),F[C]||C}let G={on(C,d,b,M){qe(C,d,b,M,!1)},one(C,d,b,M){qe(C,d,b,M,!0)},off(C,d,b,M){if(typeof d!="string"||!C)return;let[Y,de,ce]=De(d,b,M),Ee=ce!==d,qt=ie(C),vi=qt[ce]||{},gt=d.startsWith(".");if(typeof de<"u"){if(!Object.keys(vi).length)return;_e(C,qt,ce,de,Y?b:null);return}if(gt)for(let Wi of Object.keys(qt))Qe(C,qt,Wi,d.slice(1));for(let[Wi,ki]of Object.entries(vi)){let nc=Wi.replace(Q,"");(!Ee||d.includes(nc))&&_e(C,qt,ce,ki.callable,ki.delegationSelector)}},trigger(C,d,b){if(typeof d!="string"||!C)return null;let M=R(),Y=Ge(d),de=d!==Y,ce=null,Ee=!0,qt=!0,vi=!1;de&&M&&(ce=M.Event(d,b),M(C).trigger(ce),Ee=!ce.isPropagationStopped(),qt=!ce.isImmediatePropagationStopped(),vi=ce.isDefaultPrevented());let gt=Te(new Event(d,{bubbles:Ee,cancelable:!0}),b);return vi&&gt.preventDefault(),qt&&C.dispatchEvent(gt),gt.defaultPrevented&&ce&&ce.preventDefault(),gt}};function Te(C,d={}){for(let[b,M]of Object.entries(d))try{C[b]=M}catch{Object.defineProperty(C,b,{configurable:!0,get(){return M}})}return C}function ee(C){if(C==="true")return!0;if(C==="false")return!1;if(C===Number(C).toString())return Number(C);if(C===""||C==="null")return null;if(typeof C!="string")return C;try{return JSON.parse(decodeURIComponent(C))}catch{return C}}function V(C){return C.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`)}let O={setDataAttribute(C,d,b){C.setAttribute(`data-bs-${V(d)}`,b)},removeDataAttribute(C,d){C.removeAttribute(`data-bs-${V(d)}`)},getDataAttributes(C){if(!C)return{};let d={},b=Object.keys(C.dataset).filter(M=>M.startsWith("bs")&&!M.startsWith("bsConfig"));for(let M of b){let Y=M.replace(/^bs/,"");Y=Y.charAt(0).toLowerCase()+Y.slice(1,Y.length),d[Y]=ee(C.dataset[M])}return d},getDataAttribute(C,d){return ee(C.getAttribute(`data-bs-${V(d)}`))}};class P{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(d){return d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d}_mergeConfigObj(d,b){let M=p(b)?O.getDataAttribute(b,"config"):{};return{...this.constructor.Default,...typeof M=="object"?M:{},...p(b)?O.getDataAttributes(b):{},...typeof d=="object"?d:{}}}_typeCheckConfig(d,b=this.constructor.DefaultType){for(let[M,Y]of Object.entries(b)){let de=d[M],ce=p(de)?"element":c(de);if(!new RegExp(Y).test(ce))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${M}" provided type "${ce}" but expected type "${Y}".`)}}}let z="5.3.3";class I extends P{constructor(d,b){super(),d=v(d),d&&(this._element=d,this._config=this._getConfig(b),n.set(this._element,this.constructor.DATA_KEY,this))}dispose(){n.remove(this._element,this.constructor.DATA_KEY),G.off(this._element,this.constructor.EVENT_KEY);for(let d of Object.getOwnPropertyNames(this))this[d]=null}_queueCallback(d,b,M=!0){X(d,b,M)}_getConfig(d){return d=this._mergeConfigObj(d,this._element),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}static getInstance(d){return n.get(v(d),this.DATA_KEY)}static getOrCreateInstance(d,b={}){return this.getInstance(d)||new this(d,typeof b=="object"?b:null)}static get VERSION(){return z}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(d){return`${d}${this.EVENT_KEY}`}}let je=C=>{let d=C.getAttribute("data-bs-target");if(!d||d==="#"){let b=C.getAttribute("href");if(!b||!b.includes("#")&&!b.startsWith("."))return null;b.includes("#")&&!b.startsWith("#")&&(b=`#${b.split("#")[1]}`),d=b&&b!=="#"?b.trim():null}return d?d.split(",").map(b=>l(b)).join(","):null},fe={find(C,d=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(d,C))},findOne(C,d=document.documentElement){return Element.prototype.querySelector.call(d,C)},children(C,d){return[].concat(...C.children).filter(b=>b.matches(d))},parents(C,d){let b=[],M=C.parentNode.closest(d);for(;M;)b.push(M),M=M.parentNode.closest(d);return b},prev(C,d){let b=C.previousElementSibling;for(;b;){if(b.matches(d))return[b];b=b.previousElementSibling}return[]},next(C,d){let b=C.nextElementSibling;for(;b;){if(b.matches(d))return[b];b=b.nextElementSibling}return[]},focusableChildren(C){let d=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(b=>`${b}:not([tabindex^="-"])`).join(",");return this.find(d,C).filter(b=>!S(b)&&w(b))},getSelectorFromElement(C){let d=je(C);return d&&fe.findOne(d)?d:null},getElementFromSelector(C){let d=je(C);return d?fe.findOne(d):null},getMultipleElementsFromSelector(C){let d=je(C);return d?fe.find(d):[]}},ft=(C,d="hide")=>{let b=`click.dismiss${C.EVENT_KEY}`,M=C.NAME;G.on(document,b,`[data-bs-dismiss="${M}"]`,function(Y){if(["A","AREA"].includes(this.tagName)&&Y.preventDefault(),S(this))return;let de=fe.getElementFromSelector(this)||this.closest(`.${M}`);C.getOrCreateInstance(de)[d]()})},Dt="alert",rs=".bs.alert",gn=`close${rs}`,vn=`closed${rs}`,Lr="fade",kr="show";class $i extends I{static get NAME(){return Dt}close(){if(G.trigger(this._element,gn).defaultPrevented)return;this._element.classList.remove(kr);let b=this._element.classList.contains(Lr);this._queueCallback(()=>this._destroyElement(),this._element,b)}_destroyElement(){this._element.remove(),G.trigger(this._element,vn),this.dispose()}static jQueryInterface(d){return this.each(function(){let b=$i.getOrCreateInstance(this);if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d](this)}})}}ft($i,"close"),K($i);let bn="button",$l=".bs.button",Yd=".data-api",Xd="active",we='[data-bs-toggle="button"]',Hl=`click${$l}${Yd}`;class os extends I{static get NAME(){return bn}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Xd))}static jQueryInterface(d){return this.each(function(){let b=os.getOrCreateInstance(this);d==="toggle"&&b[d]()})}}G.on(document,Hl,we,C=>{C.preventDefault();let d=C.target.closest(we);os.getOrCreateInstance(d).toggle()}),K(os);let as="swipe",js=".bs.swipe",Vs=`touchstart${js}`,Ct=`touchmove${js}`,Kd=`touchend${js}`,Ul=`pointerdown${js}`,et=`pointerup${js}`,ze="touch",Jd="pen",qs="pointer-event",Zd=40,Hi={endCallback:null,leftCallback:null,rightCallback:null},Qd={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ye extends P{constructor(d,b){super(),this._element=d,!(!d||!Ye.isSupported())&&(this._config=this._getConfig(b),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Hi}static get DefaultType(){return Qd}static get NAME(){return as}dispose(){G.off(this._element,js)}_start(d){if(!this._supportPointerEvents){this._deltaX=d.touches[0].clientX;return}this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX)}_end(d){this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX-this._deltaX),this._handleSwipe(),ue(this._config.endCallback)}_move(d){this._deltaX=d.touches&&d.touches.length>1?0:d.touches[0].clientX-this._deltaX}_handleSwipe(){let d=Math.abs(this._deltaX);if(d<=Zd)return;let b=d/this._deltaX;this._deltaX=0,b&&ue(b>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(G.on(this._element,Ul,d=>this._start(d)),G.on(this._element,et,d=>this._end(d)),this._element.classList.add(qs)):(G.on(this._element,Vs,d=>this._start(d)),G.on(this._element,Ct,d=>this._move(d)),G.on(this._element,Kd,d=>this._end(d)))}_eventIsPointerPenTouch(d){return this._supportPointerEvents&&(d.pointerType===Jd||d.pointerType===ze)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}let pi="carousel",Ui=".bs.carousel",Dr=".data-api",$o="ArrowLeft",wn="ArrowRight",eh=500,Ws="next",ls="prev",mt="left",St="right",Gs=`slide${Ui}`,Fr=`slid${Ui}`,Ho=`keydown${Ui}`,th=`mouseenter${Ui}`,jl=`mouseleave${Ui}`,Vl=`dragstart${Ui}`,En=`load${Ui}${Dr}`,ih=`click${Ui}${Dr}`,Sn="carousel",Ir="active",ji="slide",sh="carousel-item-end",nh="carousel-item-start",ql="carousel-item-next",rh="carousel-item-prev",Wl=".active",Gl=".carousel-item",oh=Wl+Gl,ah=".carousel-item img",lh=".carousel-indicators",ch="[data-bs-slide], [data-bs-slide-to]",uh='[data-bs-ride="carousel"]',dh={[$o]:St,[wn]:mt},hh={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ph={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ys extends I{constructor(d,b){super(d,b),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=fe.findOne(lh,this._element),this._addEventListeners(),this._config.ride===Sn&&this.cycle()}static get Default(){return hh}static get DefaultType(){return ph}static get NAME(){return pi}next(){this._slide(Ws)}nextWhenVisible(){!document.hidden&&w(this._element)&&this.next()}prev(){this._slide(ls)}pause(){this._isSliding&&f(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){G.one(this._element,Fr,()=>this.cycle());return}this.cycle()}}to(d){let b=this._getItems();if(d>b.length-1||d<0)return;if(this._isSliding){G.one(this._element,Fr,()=>this.to(d));return}let M=this._getItemIndex(this._getActive());if(M===d)return;let Y=d>M?Ws:ls;this._slide(Y,b[d])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(d){return d.defaultInterval=d.interval,d}_addEventListeners(){this._config.keyboard&&G.on(this._element,Ho,d=>this._keydown(d)),this._config.pause==="hover"&&(G.on(this._element,th,()=>this.pause()),G.on(this._element,jl,()=>this._maybeEnableCycle())),this._config.touch&&Ye.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let M of fe.find(ah,this._element))G.on(M,Vl,Y=>Y.preventDefault());let b={leftCallback:()=>this._slide(this._directionToOrder(mt)),rightCallback:()=>this._slide(this._directionToOrder(St)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),eh+this._config.interval))}};this._swipeHelper=new Ye(this._element,b)}_keydown(d){if(/input|textarea/i.test(d.target.tagName))return;let b=dh[d.key];b&&(d.preventDefault(),this._slide(this._directionToOrder(b)))}_getItemIndex(d){return this._getItems().indexOf(d)}_setActiveIndicatorElement(d){if(!this._indicatorsElement)return;let b=fe.findOne(Wl,this._indicatorsElement);b.classList.remove(Ir),b.removeAttribute("aria-current");let M=fe.findOne(`[data-bs-slide-to="${d}"]`,this._indicatorsElement);M&&(M.classList.add(Ir),M.setAttribute("aria-current","true"))}_updateInterval(){let d=this._activeElement||this._getActive();if(!d)return;let b=Number.parseInt(d.getAttribute("data-bs-interval"),10);this._config.interval=b||this._config.defaultInterval}_slide(d,b=null){if(this._isSliding)return;let M=this._getActive(),Y=d===Ws,de=b||oe(this._getItems(),M,Y,this._config.wrap);if(de===M)return;let ce=this._getItemIndex(de),Ee=nc=>G.trigger(this._element,nc,{relatedTarget:de,direction:this._orderToDirection(d),from:this._getItemIndex(M),to:ce});if(Ee(Gs).defaultPrevented||!M||!de)return;let vi=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ce),this._activeElement=de;let gt=Y?nh:sh,Wi=Y?ql:rh;de.classList.add(Wi),D(de),M.classList.add(gt),de.classList.add(gt);let ki=()=>{de.classList.remove(gt,Wi),de.classList.add(Ir),M.classList.remove(Ir,Wi,gt),this._isSliding=!1,Ee(Fr)};this._queueCallback(ki,M,this._isAnimated()),vi&&this.cycle()}_isAnimated(){return this._element.classList.contains(ji)}_getActive(){return fe.findOne(oh,this._element)}_getItems(){return fe.find(Gl,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(d){return Z()?d===mt?ls:Ws:d===mt?Ws:ls}_orderToDirection(d){return Z()?d===ls?mt:St:d===ls?St:mt}static jQueryInterface(d){return this.each(function(){let b=Ys.getOrCreateInstance(this,d);if(typeof d=="number"){b.to(d);return}if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d]()}})}}G.on(document,ih,ch,function(C){let d=fe.getElementFromSelector(this);if(!d||!d.classList.contains(Sn))return;C.preventDefault();let b=Ys.getOrCreateInstance(d),M=this.getAttribute("data-bs-slide-to");if(M){b.to(M),b._maybeEnableCycle();return}if(O.getDataAttribute(this,"slide")==="next"){b.next(),b._maybeEnableCycle();return}b.prev(),b._maybeEnableCycle()}),G.on(window,En,()=>{let C=fe.find(uh);for(let d of C)Ys.getOrCreateInstance(d)}),K(Ys);let fh="collapse",x=".bs.collapse",g=".data-api",E=`show${x}`,y=`shown${x}`,B=`hide${x}`,L=`hidden${x}`,N=`click${x}${g}`,j="show",ne="collapse",te="collapsing",q="collapsed",W=`:scope .${ne} .${ne}`,re="collapse-horizontal",Ce="width",xe="height",$e=".collapse.show, .collapse.collapsing",Me='[data-bs-toggle="collapse"]',st={parent:null,toggle:!0},lt={parent:"(null|element)",toggle:"boolean"};class Be extends I{constructor(d,b){super(d,b),this._isTransitioning=!1,this._triggerArray=[];let M=fe.find(Me);for(let Y of M){let de=fe.getSelectorFromElement(Y),ce=fe.find(de).filter(Ee=>Ee===this._element);de!==null&&ce.length&&this._triggerArray.push(Y)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return st}static get DefaultType(){return lt}static get NAME(){return fh}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let d=[];if(this._config.parent&&(d=this._getFirstLevelChildren($e).filter(Ee=>Ee!==this._element).map(Ee=>Be.getOrCreateInstance(Ee,{toggle:!1}))),d.length&&d[0]._isTransitioning||G.trigger(this._element,E).defaultPrevented)return;for(let Ee of d)Ee.hide();let M=this._getDimension();this._element.classList.remove(ne),this._element.classList.add(te),this._element.style[M]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let Y=()=>{this._isTransitioning=!1,this._element.classList.remove(te),this._element.classList.add(ne,j),this._element.style[M]="",G.trigger(this._element,y)},ce=`scroll${M[0].toUpperCase()+M.slice(1)}`;this._queueCallback(Y,this._element,!0),this._element.style[M]=`${this._element[ce]}px`}hide(){if(this._isTransitioning||!this._isShown()||G.trigger(this._element,B).defaultPrevented)return;let b=this._getDimension();this._element.style[b]=`${this._element.getBoundingClientRect()[b]}px`,D(this._element),this._element.classList.add(te),this._element.classList.remove(ne,j);for(let Y of this._triggerArray){let de=fe.getElementFromSelector(Y);de&&!this._isShown(de)&&this._addAriaAndCollapsedClass([Y],!1)}this._isTransitioning=!0;let M=()=>{this._isTransitioning=!1,this._element.classList.remove(te),this._element.classList.add(ne),G.trigger(this._element,L)};this._element.style[b]="",this._queueCallback(M,this._element,!0)}_isShown(d=this._element){return d.classList.contains(j)}_configAfterMerge(d){return d.toggle=!!d.toggle,d.parent=v(d.parent),d}_getDimension(){return this._element.classList.contains(re)?Ce:xe}_initializeChildren(){if(!this._config.parent)return;let d=this._getFirstLevelChildren(Me);for(let b of d){let M=fe.getElementFromSelector(b);M&&this._addAriaAndCollapsedClass([b],this._isShown(M))}}_getFirstLevelChildren(d){let b=fe.find(W,this._config.parent);return fe.find(d,this._config.parent).filter(M=>!b.includes(M))}_addAriaAndCollapsedClass(d,b){if(d.length)for(let M of d)M.classList.toggle(q,!b),M.setAttribute("aria-expanded",b)}static jQueryInterface(d){let b={};return typeof d=="string"&&/show|hide/.test(d)&&(b.toggle=!1),this.each(function(){let M=Be.getOrCreateInstance(this,b);if(typeof d=="string"){if(typeof M[d]>"u")throw new TypeError(`No method named "${d}"`);M[d]()}})}}G.on(document,N,Me,function(C){(C.target.tagName==="A"||C.delegateTarget&&C.delegateTarget.tagName==="A")&&C.preventDefault();for(let d of fe.getMultipleElementsFromSelector(this))Be.getOrCreateInstance(d,{toggle:!1}).toggle()}),K(Be);let fi="dropdown",ae=".bs.dropdown",Oe=".data-api",nt="Escape",Ft="Tab",Oi="ArrowUp",Vi="ArrowDown",cs=2,qi=`hide${ae}`,mi=`hidden${ae}`,Pt=`show${ae}`,us=`shown${ae}`,An=`click${ae}${Oe}`,Rr=`keydown${ae}${Oe}`,Uo=`keyup${ae}${Oe}`,ds="show",Yl="dropup",Xl="dropend",Kl="dropstart",gh="dropup-center",vh="dropdown-center",Tn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',aA=`${Tn}.${ds}`,Jl=".dropdown-menu",lA=".navbar",cA=".navbar-nav",uA=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",dA=Z()?"top-end":"top-start",hA=Z()?"top-start":"top-end",pA=Z()?"bottom-end":"bottom-start",fA=Z()?"bottom-start":"bottom-end",mA=Z()?"left-start":"right-start",gA=Z()?"right-start":"left-start",vA="top",bA="bottom",yA={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},wA={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Li extends I{constructor(d,b){super(d,b),this._popper=null,this._parent=this._element.parentNode,this._menu=fe.next(this._element,Jl)[0]||fe.prev(this._element,Jl)[0]||fe.findOne(Jl,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return yA}static get DefaultType(){return wA}static get NAME(){return fi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(S(this._element)||this._isShown())return;let d={relatedTarget:this._element};if(!G.trigger(this._element,Pt,d).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(cA))for(let M of[].concat(...document.body.children))G.on(M,"mouseover",k);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ds),this._element.classList.add(ds),G.trigger(this._element,us,d)}}hide(){if(S(this._element)||!this._isShown())return;let d={relatedTarget:this._element};this._completeHide(d)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(d){if(!G.trigger(this._element,qi,d).defaultPrevented){if("ontouchstart"in document.documentElement)for(let M of[].concat(...document.body.children))G.off(M,"mouseover",k);this._popper&&this._popper.destroy(),this._menu.classList.remove(ds),this._element.classList.remove(ds),this._element.setAttribute("aria-expanded","false"),O.removeDataAttribute(this._menu,"popper"),G.trigger(this._element,mi,d)}}_getConfig(d){if(d=super._getConfig(d),typeof d.reference=="object"&&!p(d.reference)&&typeof d.reference.getBoundingClientRect!="function")throw new TypeError(`${fi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return d}_createPopper(){if(typeof t>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let d=this._element;this._config.reference==="parent"?d=this._parent:p(this._config.reference)?d=v(this._config.reference):typeof this._config.reference=="object"&&(d=this._config.reference);let b=this._getPopperConfig();this._popper=t.createPopper(d,this._menu,b)}_isShown(){return this._menu.classList.contains(ds)}_getPlacement(){let d=this._parent;if(d.classList.contains(Xl))return mA;if(d.classList.contains(Kl))return gA;if(d.classList.contains(gh))return vA;if(d.classList.contains(vh))return bA;let b=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return d.classList.contains(Yl)?b?hA:dA:b?fA:pA}_detectNavbar(){return this._element.closest(lA)!==null}_getOffset(){let{offset:d}=this._config;return typeof d=="string"?d.split(",").map(b=>Number.parseInt(b,10)):typeof d=="function"?b=>d(b,this._element):d}_getPopperConfig(){let d={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(O.setDataAttribute(this._menu,"popper","static"),d.modifiers=[{name:"applyStyles",enabled:!1}]),{...d,...ue(this._config.popperConfig,[d])}}_selectMenuItem({key:d,target:b}){let M=fe.find(uA,this._menu).filter(Y=>w(Y));M.length&&oe(M,b,d===Vi,!M.includes(b)).focus()}static jQueryInterface(d){return this.each(function(){let b=Li.getOrCreateInstance(this,d);if(typeof d=="string"){if(typeof b[d]>"u")throw new TypeError(`No method named "${d}"`);b[d]()}})}static clearMenus(d){if(d.button===cs||d.type==="keyup"&&d.key!==Ft)return;let b=fe.find(aA);for(let M of b){let Y=Li.getInstance(M);if(!Y||Y._config.autoClose===!1)continue;let de=d.composedPath(),ce=de.includes(Y._menu);if(de.includes(Y._element)||Y._config.autoClose==="inside"&&!ce||Y._config.autoClose==="outside"&&ce||Y._menu.contains(d.target)&&(d.type==="keyup"&&d.key===Ft||/input|select|option|textarea|form/i.test(d.target.tagName)))continue;let Ee={relatedTarget:Y._element};d.type==="click"&&(Ee.clickEvent=d),Y._completeHide(Ee)}}static dataApiKeydownHandler(d){let b=/input|textarea/i.test(d.target.tagName),M=d.key===nt,Y=[Oi,Vi].includes(d.key);if(!Y&&!M||b&&!M)return;d.preventDefault();let de=this.matches(Tn)?this:fe.prev(this,Tn)[0]||fe.next(this,Tn)[0]||fe.findOne(Tn,d.delegateTarget.parentNode),ce=Li.getOrCreateInstance(de);if(Y){d.stopPropagation(),ce.show(),ce._selectMenuItem(d);return}ce._isShown()&&(d.stopPropagation(),ce.hide(),de.focus())}}G.on(document,Rr,Tn,Li.dataApiKeydownHandler),G.on(document,Rr,Jl,Li.dataApiKeydownHandler),G.on(document,An,Li.clearMenus),G.on(document,Uo,Li.clearMenus),G.on(document,An,Tn,function(C){C.preventDefault(),Li.getOrCreateInstance(this).toggle()}),K(Li);let zv="backdrop",EA="fade",$v="show",Hv=`mousedown.bs.${zv}`,SA={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},AA={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Uv extends P{constructor(d){super(),this._config=this._getConfig(d),this._isAppended=!1,this._element=null}static get Default(){return SA}static get DefaultType(){return AA}static get NAME(){return zv}show(d){if(!this._config.isVisible){ue(d);return}this._append();let b=this._getElement();this._config.isAnimated&&D(b),b.classList.add($v),this._emulateAnimation(()=>{ue(d)})}hide(d){if(!this._config.isVisible){ue(d);return}this._getElement().classList.remove($v),this._emulateAnimation(()=>{this.dispose(),ue(d)})}dispose(){this._isAppended&&(G.off(this._element,Hv),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let d=document.createElement("div");d.className=this._config.className,this._config.isAnimated&&d.classList.add(EA),this._element=d}return this._element}_configAfterMerge(d){return d.rootElement=v(d.rootElement),d}_append(){if(this._isAppended)return;let d=this._getElement();this._config.rootElement.append(d),G.on(d,Hv,()=>{ue(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(d){X(d,this._getElement(),this._config.isAnimated)}}let TA="focustrap",Zl=".bs.focustrap",xA=`focusin${Zl}`,CA=`keydown.tab${Zl}`,PA="Tab",_A="forward",jv="backward",MA={autofocus:!0,trapElement:null},OA={autofocus:"boolean",trapElement:"element"};class Vv extends P{constructor(d){super(),this._config=this._getConfig(d),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return MA}static get DefaultType(){return OA}static get NAME(){return TA}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),G.off(document,Zl),G.on(document,xA,d=>this._handleFocusin(d)),G.on(document,CA,d=>this._handleKeydown(d)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,G.off(document,Zl))}_handleFocusin(d){let{trapElement:b}=this._config;if(d.target===document||d.target===b||b.contains(d.target))return;let M=fe.focusableChildren(b);M.length===0?b.focus():this._lastTabNavDirection===jv?M[M.length-1].focus():M[0].focus()}_handleKeydown(d){d.key===PA&&(this._lastTabNavDirection=d.shiftKey?jv:_A)}}let qv=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Wv=".sticky-top",Ql="padding-right",Gv="margin-right";class bh{constructor(){this._element=document.body}getWidth(){let d=document.documentElement.clientWidth;return Math.abs(window.innerWidth-d)}hide(){let d=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ql,b=>b+d),this._setElementAttributes(qv,Ql,b=>b+d),this._setElementAttributes(Wv,Gv,b=>b-d)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ql),this._resetElementAttributes(qv,Ql),this._resetElementAttributes(Wv,Gv)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(d,b,M){let Y=this.getWidth(),de=ce=>{if(ce!==this._element&&window.innerWidth>ce.clientWidth+Y)return;this._saveInitialAttribute(ce,b);let Ee=window.getComputedStyle(ce).getPropertyValue(b);ce.style.setProperty(b,`${M(Number.parseFloat(Ee))}px`)};this._applyManipulationCallback(d,de)}_saveInitialAttribute(d,b){let M=d.style.getPropertyValue(b);M&&O.setDataAttribute(d,b,M)}_resetElementAttributes(d,b){let M=Y=>{let de=O.getDataAttribute(Y,b);if(de===null){Y.style.removeProperty(b);return}O.removeDataAttribute(Y,b),Y.style.setProperty(b,de)};this._applyManipulationCallback(d,M)}_applyManipulationCallback(d,b){if(p(d)){b(d);return}for(let M of fe.find(d,this._element))b(M)}}let LA="modal",gi=".bs.modal",kA=".data-api",DA="Escape",FA=`hide${gi}`,IA=`hidePrevented${gi}`,Yv=`hidden${gi}`,Xv=`show${gi}`,RA=`shown${gi}`,NA=`resize${gi}`,BA=`click.dismiss${gi}`,zA=`mousedown.dismiss${gi}`,$A=`keydown.dismiss${gi}`,HA=`click${gi}${kA}`,Kv="modal-open",UA="fade",Jv="show",yh="modal-static",jA=".modal.show",VA=".modal-dialog",qA=".modal-body",WA='[data-bs-toggle="modal"]',GA={backdrop:!0,focus:!0,keyboard:!0},YA={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class xn extends I{constructor(d,b){super(d,b),this._dialog=fe.findOne(VA,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new bh,this._addEventListeners()}static get Default(){return GA}static get DefaultType(){return YA}static get NAME(){return LA}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||this._isTransitioning||G.trigger(this._element,Xv,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Kv),this._adjustDialog(),this._backdrop.show(()=>this._showElement(d)))}hide(){!this._isShown||this._isTransitioning||G.trigger(this._element,FA).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Jv),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){G.off(window,gi),G.off(this._dialog,gi),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Uv({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Vv({trapElement:this._element})}_showElement(d){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let b=fe.findOne(qA,this._dialog);b&&(b.scrollTop=0),D(this._element),this._element.classList.add(Jv);let M=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,G.trigger(this._element,RA,{relatedTarget:d})};this._queueCallback(M,this._dialog,this._isAnimated())}_addEventListeners(){G.on(this._element,$A,d=>{if(d.key===DA){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),G.on(window,NA,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),G.on(this._element,zA,d=>{G.one(this._element,BA,b=>{if(!(this._element!==d.target||this._element!==b.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Kv),this._resetAdjustments(),this._scrollBar.reset(),G.trigger(this._element,Yv)})}_isAnimated(){return this._element.classList.contains(UA)}_triggerBackdropTransition(){if(G.trigger(this._element,IA).defaultPrevented)return;let b=this._element.scrollHeight>document.documentElement.clientHeight,M=this._element.style.overflowY;M==="hidden"||this._element.classList.contains(yh)||(b||(this._element.style.overflowY="hidden"),this._element.classList.add(yh),this._queueCallback(()=>{this._element.classList.remove(yh),this._queueCallback(()=>{this._element.style.overflowY=M},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let d=this._element.scrollHeight>document.documentElement.clientHeight,b=this._scrollBar.getWidth(),M=b>0;if(M&&!d){let Y=Z()?"paddingLeft":"paddingRight";this._element.style[Y]=`${b}px`}if(!M&&d){let Y=Z()?"paddingRight":"paddingLeft";this._element.style[Y]=`${b}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(d,b){return this.each(function(){let M=xn.getOrCreateInstance(this,d);if(typeof d=="string"){if(typeof M[d]>"u")throw new TypeError(`No method named "${d}"`);M[d](b)}})}}G.on(document,HA,WA,function(C){let d=fe.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&C.preventDefault(),G.one(d,Xv,Y=>{Y.defaultPrevented||G.one(d,Yv,()=>{w(this)&&this.focus()})});let b=fe.findOne(jA);b&&xn.getInstance(b).hide(),xn.getOrCreateInstance(d).toggle(this)}),ft(xn),K(xn);let XA="offcanvas",hs=".bs.offcanvas",Zv=".data-api",KA=`load${hs}${Zv}`,JA="Escape",Qv="show",eb="showing",tb="hiding",ZA="offcanvas-backdrop",ib=".offcanvas.show",QA=`show${hs}`,eT=`shown${hs}`,tT=`hide${hs}`,sb=`hidePrevented${hs}`,nb=`hidden${hs}`,iT=`resize${hs}`,sT=`click${hs}${Zv}`,nT=`keydown.dismiss${hs}`,rT='[data-bs-toggle="offcanvas"]',oT={backdrop:!0,keyboard:!0,scroll:!1},aT={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ps extends I{constructor(d,b){super(d,b),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return oT}static get DefaultType(){return aT}static get NAME(){return XA}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){if(this._isShown||G.trigger(this._element,QA,{relatedTarget:d}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new bh().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(eb);let M=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Qv),this._element.classList.remove(eb),G.trigger(this._element,eT,{relatedTarget:d})};this._queueCallback(M,this._element,!0)}hide(){if(!this._isShown||G.trigger(this._element,tT).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(tb),this._backdrop.hide();let b=()=>{this._element.classList.remove(Qv,tb),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new bh().reset(),G.trigger(this._element,nb)};this._queueCallback(b,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let d=()=>{if(this._config.backdrop==="static"){G.trigger(this._element,sb);return}this.hide()},b=!!this._config.backdrop;return new Uv({className:ZA,isVisible:b,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:b?d:null})}_initializeFocusTrap(){return new Vv({trapElement:this._element})}_addEventListeners(){G.on(this._element,nT,d=>{if(d.key===JA){if(this._config.keyboard){this.hide();return}G.trigger(this._element,sb)}})}static jQueryInterface(d){return this.each(function(){let b=ps.getOrCreateInstance(this,d);if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d](this)}})}}G.on(document,sT,rT,function(C){let d=fe.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&C.preventDefault(),S(this))return;G.one(d,nb,()=>{w(this)&&this.focus()});let b=fe.findOne(ib);b&&b!==d&&ps.getInstance(b).hide(),ps.getOrCreateInstance(d).toggle(this)}),G.on(window,KA,()=>{for(let C of fe.find(ib))ps.getOrCreateInstance(C).show()}),G.on(window,iT,()=>{for(let C of fe.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(C).position!=="fixed"&&ps.getOrCreateInstance(C).hide()}),ft(ps),K(ps);let rb={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},lT=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),cT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,uT=(C,d)=>{let b=C.nodeName.toLowerCase();return d.includes(b)?lT.has(b)?!!cT.test(C.nodeValue):!0:d.filter(M=>M instanceof RegExp).some(M=>M.test(b))};function dT(C,d,b){if(!C.length)return C;if(b&&typeof b=="function")return b(C);let Y=new window.DOMParser().parseFromString(C,"text/html"),de=[].concat(...Y.body.querySelectorAll("*"));for(let ce of de){let Ee=ce.nodeName.toLowerCase();if(!Object.keys(d).includes(Ee)){ce.remove();continue}let qt=[].concat(...ce.attributes),vi=[].concat(d["*"]||[],d[Ee]||[]);for(let gt of qt)uT(gt,vi)||ce.removeAttribute(gt.nodeName)}return Y.body.innerHTML}let hT="TemplateFactory",pT={allowList:rb,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},fT={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},mT={entry:"(string|element|function|null)",selector:"(string|element)"};class gT extends P{constructor(d){super(),this._config=this._getConfig(d)}static get Default(){return pT}static get DefaultType(){return fT}static get NAME(){return hT}getContent(){return Object.values(this._config.content).map(d=>this._resolvePossibleFunction(d)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(d){return this._checkContent(d),this._config.content={...this._config.content,...d},this}toHtml(){let d=document.createElement("div");d.innerHTML=this._maybeSanitize(this._config.template);for(let[Y,de]of Object.entries(this._config.content))this._setContent(d,de,Y);let b=d.children[0],M=this._resolvePossibleFunction(this._config.extraClass);return M&&b.classList.add(...M.split(" ")),b}_typeCheckConfig(d){super._typeCheckConfig(d),this._checkContent(d.content)}_checkContent(d){for(let[b,M]of Object.entries(d))super._typeCheckConfig({selector:b,entry:M},mT)}_setContent(d,b,M){let Y=fe.findOne(M,d);if(Y){if(b=this._resolvePossibleFunction(b),!b){Y.remove();return}if(p(b)){this._putElementInTemplate(v(b),Y);return}if(this._config.html){Y.innerHTML=this._maybeSanitize(b);return}Y.textContent=b}}_maybeSanitize(d){return this._config.sanitize?dT(d,this._config.allowList,this._config.sanitizeFn):d}_resolvePossibleFunction(d){return ue(d,[this])}_putElementInTemplate(d,b){if(this._config.html){b.innerHTML="",b.append(d);return}b.textContent=d.textContent}}let vT="tooltip",bT=new Set(["sanitize","allowList","sanitizeFn"]),wh="fade",yT="modal",ec="show",wT=".tooltip-inner",ob=`.${yT}`,ab="hide.bs.modal",jo="hover",Eh="focus",ET="click",ST="manual",AT="hide",TT="hidden",xT="show",CT="shown",PT="inserted",_T="click",MT="focusin",OT="focusout",LT="mouseenter",kT="mouseleave",DT={AUTO:"auto",TOP:"top",RIGHT:Z()?"left":"right",BOTTOM:"bottom",LEFT:Z()?"right":"left"},FT={allowList:rb,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},IT={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Cn extends I{constructor(d,b){if(typeof t>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(d,b),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return FT}static get DefaultType(){return IT}static get NAME(){return vT}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),G.off(this._element.closest(ob),ab,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let d=G.trigger(this._element,this.constructor.eventName(xT)),M=(A(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(d.defaultPrevented||!M)return;this._disposePopper();let Y=this._getTipElement();this._element.setAttribute("aria-describedby",Y.getAttribute("id"));let{container:de}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(de.append(Y),G.trigger(this._element,this.constructor.eventName(PT))),this._popper=this._createPopper(Y),Y.classList.add(ec),"ontouchstart"in document.documentElement)for(let Ee of[].concat(...document.body.children))G.on(Ee,"mouseover",k);let ce=()=>{G.trigger(this._element,this.constructor.eventName(CT)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(ce,this.tip,this._isAnimated())}hide(){if(!this._isShown()||G.trigger(this._element,this.constructor.eventName(AT)).defaultPrevented)return;if(this._getTipElement().classList.remove(ec),"ontouchstart"in document.documentElement)for(let Y of[].concat(...document.body.children))G.off(Y,"mouseover",k);this._activeTrigger[ET]=!1,this._activeTrigger[Eh]=!1,this._activeTrigger[jo]=!1,this._isHovered=null;let M=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),G.trigger(this._element,this.constructor.eventName(TT)))};this._queueCallback(M,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(d){let b=this._getTemplateFactory(d).toHtml();if(!b)return null;b.classList.remove(wh,ec),b.classList.add(`bs-${this.constructor.NAME}-auto`);let M=u(this.constructor.NAME).toString();return b.setAttribute("id",M),this._isAnimated()&&b.classList.add(wh),b}setContent(d){this._newContent=d,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(d){return this._templateFactory?this._templateFactory.changeContent(d):this._templateFactory=new gT({...this._config,content:d,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[wT]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(d){return this.constructor.getOrCreateInstance(d.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(wh)}_isShown(){return this.tip&&this.tip.classList.contains(ec)}_createPopper(d){let b=ue(this._config.placement,[this,d,this._element]),M=DT[b.toUpperCase()];return t.createPopper(this._element,d,this._getPopperConfig(M))}_getOffset(){let{offset:d}=this._config;return typeof d=="string"?d.split(",").map(b=>Number.parseInt(b,10)):typeof d=="function"?b=>d(b,this._element):d}_resolvePossibleFunction(d){return ue(d,[this._element])}_getPopperConfig(d){let b={placement:d,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:M=>{this._getTipElement().setAttribute("data-popper-placement",M.state.placement)}}]};return{...b,...ue(this._config.popperConfig,[b])}}_setListeners(){let d=this._config.trigger.split(" ");for(let b of d)if(b==="click")G.on(this._element,this.constructor.eventName(_T),this._config.selector,M=>{this._initializeOnDelegatedTarget(M).toggle()});else if(b!==ST){let M=b===jo?this.constructor.eventName(LT):this.constructor.eventName(MT),Y=b===jo?this.constructor.eventName(kT):this.constructor.eventName(OT);G.on(this._element,M,this._config.selector,de=>{let ce=this._initializeOnDelegatedTarget(de);ce._activeTrigger[de.type==="focusin"?Eh:jo]=!0,ce._enter()}),G.on(this._element,Y,this._config.selector,de=>{let ce=this._initializeOnDelegatedTarget(de);ce._activeTrigger[de.type==="focusout"?Eh:jo]=ce._element.contains(de.relatedTarget),ce._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},G.on(this._element.closest(ob),ab,this._hideModalHandler)}_fixTitle(){let d=this._element.getAttribute("title");d&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",d),this._element.setAttribute("data-bs-original-title",d),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(d,b){clearTimeout(this._timeout),this._timeout=setTimeout(d,b)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(d){let b=O.getDataAttributes(this._element);for(let M of Object.keys(b))bT.has(M)&&delete b[M];return d={...b,...typeof d=="object"&&d?d:{}},d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d.container=d.container===!1?document.body:v(d.container),typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),typeof d.title=="number"&&(d.title=d.title.toString()),typeof d.content=="number"&&(d.content=d.content.toString()),d}_getDelegateConfig(){let d={};for(let[b,M]of Object.entries(this._config))this.constructor.Default[b]!==M&&(d[b]=M);return d.selector=!1,d.trigger="manual",d}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(d){return this.each(function(){let b=Cn.getOrCreateInstance(this,d);if(typeof d=="string"){if(typeof b[d]>"u")throw new TypeError(`No method named "${d}"`);b[d]()}})}}K(Cn);let RT="popover",NT=".popover-header",BT=".popover-body",zT={...Cn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},$T={...Cn.DefaultType,content:"(null|string|element|function)"};class tc extends Cn{static get Default(){return zT}static get DefaultType(){return $T}static get NAME(){return RT}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[NT]:this._getTitle(),[BT]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(d){return this.each(function(){let b=tc.getOrCreateInstance(this,d);if(typeof d=="string"){if(typeof b[d]>"u")throw new TypeError(`No method named "${d}"`);b[d]()}})}}K(tc);let HT="scrollspy",Sh=".bs.scrollspy",UT=".data-api",jT=`activate${Sh}`,lb=`click${Sh}`,VT=`load${Sh}${UT}`,qT="dropdown-item",Nr="active",WT='[data-bs-spy="scroll"]',Ah="[href]",GT=".nav, .list-group",cb=".nav-link",YT=`${cb}, .nav-item > ${cb}, .list-group-item`,XT=".dropdown",KT=".dropdown-toggle",JT={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ZT={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Vo extends I{constructor(d,b){super(d,b),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return JT}static get DefaultType(){return ZT}static get NAME(){return HT}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let d of this._observableSections.values())this._observer.observe(d)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(d){return d.target=v(d.target)||document.body,d.rootMargin=d.offset?`${d.offset}px 0px -30%`:d.rootMargin,typeof d.threshold=="string"&&(d.threshold=d.threshold.split(",").map(b=>Number.parseFloat(b))),d}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(G.off(this._config.target,lb),G.on(this._config.target,lb,Ah,d=>{let b=this._observableSections.get(d.target.hash);if(b){d.preventDefault();let M=this._rootElement||window,Y=b.offsetTop-this._element.offsetTop;if(M.scrollTo){M.scrollTo({top:Y,behavior:"smooth"});return}M.scrollTop=Y}}))}_getNewObserver(){let d={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(b=>this._observerCallback(b),d)}_observerCallback(d){let b=ce=>this._targetLinks.get(`#${ce.target.id}`),M=ce=>{this._previousScrollData.visibleEntryTop=ce.target.offsetTop,this._process(b(ce))},Y=(this._rootElement||document.documentElement).scrollTop,de=Y>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Y;for(let ce of d){if(!ce.isIntersecting){this._activeTarget=null,this._clearActiveClass(b(ce));continue}let Ee=ce.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(de&&Ee){if(M(ce),!Y)return;continue}!de&&!Ee&&M(ce)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let d=fe.find(Ah,this._config.target);for(let b of d){if(!b.hash||S(b))continue;let M=fe.findOne(decodeURI(b.hash),this._element);w(M)&&(this._targetLinks.set(decodeURI(b.hash),b),this._observableSections.set(b.hash,M))}}_process(d){this._activeTarget!==d&&(this._clearActiveClass(this._config.target),this._activeTarget=d,d.classList.add(Nr),this._activateParents(d),G.trigger(this._element,jT,{relatedTarget:d}))}_activateParents(d){if(d.classList.contains(qT)){fe.findOne(KT,d.closest(XT)).classList.add(Nr);return}for(let b of fe.parents(d,GT))for(let M of fe.prev(b,YT))M.classList.add(Nr)}_clearActiveClass(d){d.classList.remove(Nr);let b=fe.find(`${Ah}.${Nr}`,d);for(let M of b)M.classList.remove(Nr)}static jQueryInterface(d){return this.each(function(){let b=Vo.getOrCreateInstance(this,d);if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d]()}})}}G.on(window,VT,()=>{for(let C of fe.find(WT))Vo.getOrCreateInstance(C)}),K(Vo);let QT="tab",Pn=".bs.tab",ex=`hide${Pn}`,tx=`hidden${Pn}`,ix=`show${Pn}`,sx=`shown${Pn}`,nx=`click${Pn}`,rx=`keydown${Pn}`,ox=`load${Pn}`,ax="ArrowLeft",ub="ArrowRight",lx="ArrowUp",db="ArrowDown",Th="Home",hb="End",_n="active",pb="fade",xh="show",cx="dropdown",fb=".dropdown-toggle",ux=".dropdown-menu",Ch=`:not(${fb})`,dx='.list-group, .nav, [role="tablist"]',hx=".nav-item, .list-group-item",px=`.nav-link${Ch}, .list-group-item${Ch}, [role="tab"]${Ch}`,mb='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ph=`${px}, ${mb}`,fx=`.${_n}[data-bs-toggle="tab"], .${_n}[data-bs-toggle="pill"], .${_n}[data-bs-toggle="list"]`;class Mn extends I{constructor(d){super(d),this._parent=this._element.closest(dx),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),G.on(this._element,rx,b=>this._keydown(b)))}static get NAME(){return QT}show(){let d=this._element;if(this._elemIsActive(d))return;let b=this._getActiveElem(),M=b?G.trigger(b,ex,{relatedTarget:d}):null;G.trigger(d,ix,{relatedTarget:b}).defaultPrevented||M&&M.defaultPrevented||(this._deactivate(b,d),this._activate(d,b))}_activate(d,b){if(!d)return;d.classList.add(_n),this._activate(fe.getElementFromSelector(d));let M=()=>{if(d.getAttribute("role")!=="tab"){d.classList.add(xh);return}d.removeAttribute("tabindex"),d.setAttribute("aria-selected",!0),this._toggleDropDown(d,!0),G.trigger(d,sx,{relatedTarget:b})};this._queueCallback(M,d,d.classList.contains(pb))}_deactivate(d,b){if(!d)return;d.classList.remove(_n),d.blur(),this._deactivate(fe.getElementFromSelector(d));let M=()=>{if(d.getAttribute("role")!=="tab"){d.classList.remove(xh);return}d.setAttribute("aria-selected",!1),d.setAttribute("tabindex","-1"),this._toggleDropDown(d,!1),G.trigger(d,tx,{relatedTarget:b})};this._queueCallback(M,d,d.classList.contains(pb))}_keydown(d){if(![ax,ub,lx,db,Th,hb].includes(d.key))return;d.stopPropagation(),d.preventDefault();let b=this._getChildren().filter(Y=>!S(Y)),M;if([Th,hb].includes(d.key))M=b[d.key===Th?0:b.length-1];else{let Y=[ub,db].includes(d.key);M=oe(b,d.target,Y,!0)}M&&(M.focus({preventScroll:!0}),Mn.getOrCreateInstance(M).show())}_getChildren(){return fe.find(Ph,this._parent)}_getActiveElem(){return this._getChildren().find(d=>this._elemIsActive(d))||null}_setInitialAttributes(d,b){this._setAttributeIfNotExists(d,"role","tablist");for(let M of b)this._setInitialAttributesOnChild(M)}_setInitialAttributesOnChild(d){d=this._getInnerElement(d);let b=this._elemIsActive(d),M=this._getOuterElement(d);d.setAttribute("aria-selected",b),M!==d&&this._setAttributeIfNotExists(M,"role","presentation"),b||d.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(d,"role","tab"),this._setInitialAttributesOnTargetPanel(d)}_setInitialAttributesOnTargetPanel(d){let b=fe.getElementFromSelector(d);b&&(this._setAttributeIfNotExists(b,"role","tabpanel"),d.id&&this._setAttributeIfNotExists(b,"aria-labelledby",`${d.id}`))}_toggleDropDown(d,b){let M=this._getOuterElement(d);if(!M.classList.contains(cx))return;let Y=(de,ce)=>{let Ee=fe.findOne(de,M);Ee&&Ee.classList.toggle(ce,b)};Y(fb,_n),Y(ux,xh),M.setAttribute("aria-expanded",b)}_setAttributeIfNotExists(d,b,M){d.hasAttribute(b)||d.setAttribute(b,M)}_elemIsActive(d){return d.classList.contains(_n)}_getInnerElement(d){return d.matches(Ph)?d:fe.findOne(Ph,d)}_getOuterElement(d){return d.closest(hx)||d}static jQueryInterface(d){return this.each(function(){let b=Mn.getOrCreateInstance(this);if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d]()}})}}G.on(document,nx,mb,function(C){["A","AREA"].includes(this.tagName)&&C.preventDefault(),!S(this)&&Mn.getOrCreateInstance(this).show()}),G.on(window,ox,()=>{for(let C of fe.find(fx))Mn.getOrCreateInstance(C)}),K(Mn);let mx="toast",Xs=".bs.toast",gx=`mouseover${Xs}`,vx=`mouseout${Xs}`,bx=`focusin${Xs}`,yx=`focusout${Xs}`,wx=`hide${Xs}`,Ex=`hidden${Xs}`,Sx=`show${Xs}`,Ax=`shown${Xs}`,Tx="fade",gb="hide",ic="show",sc="showing",xx={animation:"boolean",autohide:"boolean",delay:"number"},Cx={animation:!0,autohide:!0,delay:5e3};class qo extends I{constructor(d,b){super(d,b),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Cx}static get DefaultType(){return xx}static get NAME(){return mx}show(){if(G.trigger(this._element,Sx).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Tx);let b=()=>{this._element.classList.remove(sc),G.trigger(this._element,Ax),this._maybeScheduleHide()};this._element.classList.remove(gb),D(this._element),this._element.classList.add(ic,sc),this._queueCallback(b,this._element,this._config.animation)}hide(){if(!this.isShown()||G.trigger(this._element,wx).defaultPrevented)return;let b=()=>{this._element.classList.add(gb),this._element.classList.remove(sc,ic),G.trigger(this._element,Ex)};this._element.classList.add(sc),this._queueCallback(b,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ic),super.dispose()}isShown(){return this._element.classList.contains(ic)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(d,b){switch(d.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=b;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=b;break}}if(b){this._clearTimeout();return}let M=d.relatedTarget;this._element===M||this._element.contains(M)||this._maybeScheduleHide()}_setListeners(){G.on(this._element,gx,d=>this._onInteraction(d,!0)),G.on(this._element,vx,d=>this._onInteraction(d,!1)),G.on(this._element,bx,d=>this._onInteraction(d,!0)),G.on(this._element,yx,d=>this._onInteraction(d,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(d){return this.each(function(){let b=qo.getOrCreateInstance(this,d);if(typeof d=="string"){if(typeof b[d]>"u")throw new TypeError(`No method named "${d}"`);b[d](this)}})}}return ft(qo),K(qo),{Alert:$i,Button:os,Carousel:Ys,Collapse:Be,Dropdown:Li,Modal:xn,Offcanvas:ps,Popover:tc,ScrollSpy:Vo,Tab:Mn,Toast:qo,Tooltip:Cn}})});var Z0=We((n5,J0)=>{J0.exports=function(){var e={},t=e._fns={};e.emit=function(o,a,l,c,u,h,f){var p=i(o);p.length&&n(o,p,[a,l,c,u,h,f])},e.on=function(o,a){t[o]||(t[o]=[]),t[o].push(a)},e.once=function(o,a){function l(){a.apply(this,arguments),e.off(o,l)}this.on(o,l)},e.off=function(o,a){var l=[];if(o&&a){var c=this._fns[o],u=0,h=c?c.length:0;for(u;u<h;u++)c[u]!==a&&l.push(c[u])}l.length?this._fns[o]=l:delete this._fns[o]};function i(r){var o=t[r]?t[r]:[],a=r.indexOf(":"),l=a===-1?[r]:[r.substring(0,a),r.substring(a+1)],c=Object.keys(t),u=0,h=c.length;for(u;u<h;u++){var f=c[u];if(f==="*"&&(o=o.concat(t[f])),l.length===2&&l[0]===f){o=o.concat(t[f]);break}}return o}function n(r,o,a){var l=0,c=o.length;for(l;l<c&&o[l];l++)o[l].event=r,o[l].apply(o[l],a)}return e}});var Eu=We((o5,Q0)=>{function vO(s){var e=typeof s;return s!=null&&(e=="object"||e=="function")}Q0.exports=vO});var tw=We((a5,ew)=>{var bO=typeof global=="object"&&global&&global.Object===Object&&global;ew.exports=bO});var Kf=We((l5,iw)=>{var yO=tw(),wO=typeof self=="object"&&self&&self.Object===Object&&self,EO=yO||wO||Function("return this")();iw.exports=EO});var nw=We((c5,sw)=>{var SO=Kf(),AO=function(){return SO.Date.now()};sw.exports=AO});var ow=We((u5,rw)=>{var TO=/\s/;function xO(s){for(var e=s.length;e--&&TO.test(s.charAt(e)););return e}rw.exports=xO});var lw=We((d5,aw)=>{var CO=ow(),PO=/^\s+/;function _O(s){return s&&s.slice(0,CO(s)+1).replace(PO,"")}aw.exports=_O});var Jf=We((h5,cw)=>{var MO=Kf(),OO=MO.Symbol;cw.exports=OO});var pw=We((p5,hw)=>{var uw=Jf(),dw=Object.prototype,LO=dw.hasOwnProperty,kO=dw.toString,xa=uw?uw.toStringTag:void 0;function DO(s){var e=LO.call(s,xa),t=s[xa];try{s[xa]=void 0;var i=!0}catch{}var n=kO.call(s);return i&&(e?s[xa]=t:delete s[xa]),n}hw.exports=DO});var mw=We((f5,fw)=>{var FO=Object.prototype,IO=FO.toString;function RO(s){return IO.call(s)}fw.exports=RO});var yw=We((m5,bw)=>{var gw=Jf(),NO=pw(),BO=mw(),zO="[object Null]",$O="[object Undefined]",vw=gw?gw.toStringTag:void 0;function HO(s){return s==null?s===void 0?$O:zO:vw&&vw in Object(s)?NO(s):BO(s)}bw.exports=HO});var Ew=We((g5,ww)=>{function UO(s){return s!=null&&typeof s=="object"}ww.exports=UO});var Aw=We((v5,Sw)=>{var jO=yw(),VO=Ew(),qO="[object Symbol]";function WO(s){return typeof s=="symbol"||VO(s)&&jO(s)==qO}Sw.exports=WO});var Pw=We((b5,Cw)=>{var GO=lw(),Tw=Eu(),YO=Aw(),xw=NaN,XO=/^[-+]0x[0-9a-f]+$/i,KO=/^0b[01]+$/i,JO=/^0o[0-7]+$/i,ZO=parseInt;function QO(s){if(typeof s=="number")return s;if(YO(s))return xw;if(Tw(s)){var e=typeof s.valueOf=="function"?s.valueOf():s;s=Tw(e)?e+"":e}if(typeof s!="string")return s===0?s:+s;s=GO(s);var t=KO.test(s);return t||JO.test(s)?ZO(s.slice(2),t?2:8):XO.test(s)?xw:+s}Cw.exports=QO});var Qf=We((y5,Mw)=>{var eL=Eu(),Zf=nw(),_w=Pw(),tL="Expected a function",iL=Math.max,sL=Math.min;function nL(s,e,t){var i,n,r,o,a,l,c=0,u=!1,h=!1,f=!0;if(typeof s!="function")throw new TypeError(tL);e=_w(e)||0,eL(t)&&(u=!!t.leading,h="maxWait"in t,r=h?iL(_w(t.maxWait)||0,e):r,f="trailing"in t?!!t.trailing:f);function p(U){var Z=i,K=n;return i=n=void 0,c=U,o=s.apply(K,Z),o}function v(U){return c=U,a=setTimeout(A,e),u?p(U):o}function w(U){var Z=U-l,K=U-c,ue=e-Z;return h?sL(ue,r-K):ue}function S(U){var Z=U-l,K=U-c;return l===void 0||Z>=e||Z<0||h&&K>=r}function A(){var U=Zf();if(S(U))return k(U);a=setTimeout(A,w(U))}function k(U){return a=void 0,f&&i?p(U):(i=n=void 0,o)}function D(){a!==void 0&&clearTimeout(a),c=0,i=l=n=a=void 0}function R(){return a===void 0?o:k(Zf())}function $(){var U=Zf(),Z=S(U);if(i=arguments,n=this,l=U,Z){if(a===void 0)return v(l);if(h)return clearTimeout(a),a=setTimeout(A,e),p(l)}return a===void 0&&(a=setTimeout(A,e)),o}return $.cancel=D,$.flush=R,$}Mw.exports=nL});var Lw=We((w5,Ow)=>{var rL=Qf(),oL=Eu(),aL="Expected a function";function lL(s,e,t){var i=!0,n=!0;if(typeof s!="function")throw new TypeError(aL);return oL(t)&&(i="leading"in t?!!t.leading:i,n="trailing"in t?!!t.trailing:n),rL(s,e,{leading:i,maxWait:e,trailing:n})}Ow.exports=lL});var xu=We((F5,Bw)=>{"use strict";Bw.exports=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);let t=e<0,i=Math.abs(e);if(t&&(i=-i),i===0)return"0 B";let n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.min(Math.floor(Math.log(i)/Math.log(1024)),n.length-1),o=Number(i/1024**r),a=n[r];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${a}`}});var Hw=We((I5,$w)=>{"use strict";function zw(s,e){this.text=s=s||"",this.hasWild=~s.indexOf("*"),this.separator=e,this.parts=s.split(e)}zw.prototype.match=function(s){var e=!0,t=this.parts,i,n=t.length,r;if(typeof s=="string"||s instanceof String)if(!this.hasWild&&this.text!=s)e=!1;else{for(r=(s||"").split(this.separator),i=0;e&&i<n;i++)t[i]!=="*"&&(i<r.length?e=t[i]===r[i]:e=!1);e=e&&r}else if(typeof s.splice=="function")for(e=[],i=s.length;i--;)this.match(s[i])&&(e[e.length]=s[i]);else if(typeof s=="object"){e={};for(var o in s)this.match(o)&&(e[o]=s[o])}return e};$w.exports=function(s,e,t){var i=new zw(s,t||/[\/\.]/);return typeof e<"u"?i.match(e):i}});var jw=We((R5,Uw)=>{var fL=Hw(),mL=/[\/\+\.]/;Uw.exports=function(s,e){function t(i){var n=fL(i,s,mL);return n&&n.length>=2}return e?t(e.split(";")[0]):t}});var Rt=We((f3,Iu)=>{(function(){"use strict";var s={}.hasOwnProperty;function e(){for(var n="",r=0;r<arguments.length;r++){var o=arguments[r];o&&(n=i(n,t(o)))}return n}function t(n){if(typeof n=="string"||typeof n=="number")return n;if(typeof n!="object")return"";if(Array.isArray(n))return e.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var r="";for(var o in n)s.call(n,o)&&n[o]&&(r=i(r,o));return r}function i(n,r){return r?n?n+" "+r:n+r:n}typeof Iu<"u"&&Iu.exports?(e.default=e,Iu.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var u1=We((l4,ng)=>{"use strict";var Hk=Object.prototype.hasOwnProperty,Bt="~";function tl(){}Object.create&&(tl.prototype=Object.create(null),new tl().__proto__||(Bt=!1));function Uk(s,e,t){this.fn=s,this.context=e,this.once=t||!1}function c1(s,e,t,i,n){if(typeof t!="function")throw new TypeError("The listener must be a function");var r=new Uk(t,i||s,n),o=Bt?Bt+e:e;return s._events[o]?s._events[o].fn?s._events[o]=[s._events[o],r]:s._events[o].push(r):(s._events[o]=r,s._eventsCount++),s}function Qu(s,e){--s._eventsCount===0?s._events=new tl:delete s._events[e]}function Lt(){this._events=new tl,this._eventsCount=0}Lt.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)Hk.call(t,i)&&e.push(Bt?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Lt.prototype.listeners=function(e){var t=Bt?Bt+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,o=new Array(r);n<r;n++)o[n]=i[n].fn;return o};Lt.prototype.listenerCount=function(e){var t=Bt?Bt+e:e,i=this._events[t];return i?i.fn?1:i.length:0};Lt.prototype.emit=function(e,t,i,n,r,o){var a=Bt?Bt+e:e;if(!this._events[a])return!1;var l=this._events[a],c=arguments.length,u,h;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,r),!0;case 6:return l.fn.call(l.context,t,i,n,r,o),!0}for(h=1,u=new Array(c-1);h<c;h++)u[h-1]=arguments[h];l.fn.apply(l.context,u)}else{var f=l.length,p;for(h=0;h<f;h++)switch(l[h].once&&this.removeListener(e,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,t);break;case 3:l[h].fn.call(l[h].context,t,i);break;case 4:l[h].fn.call(l[h].context,t,i,n);break;default:if(!u)for(p=1,u=new Array(c-1);p<c;p++)u[p-1]=arguments[p];l[h].fn.apply(l[h].context,u)}}return!0};Lt.prototype.on=function(e,t,i){return c1(this,e,t,i,!1)};Lt.prototype.once=function(e,t,i){return c1(this,e,t,i,!0)};Lt.prototype.removeListener=function(e,t,i,n){var r=Bt?Bt+e:e;if(!this._events[r])return this;if(!t)return Qu(this,r),this;var o=this._events[r];if(o.fn)o.fn===t&&(!n||o.once)&&(!i||o.context===i)&&Qu(this,r);else{for(var a=0,l=[],c=o.length;a<c;a++)(o[a].fn!==t||n&&!o[a].once||i&&o[a].context!==i)&&l.push(o[a]);l.length?this._events[r]=l.length===1?l[0]:l:Qu(this,r)}return this};Lt.prototype.removeAllListeners=function(e){var t;return e?(t=Bt?Bt+e:e,this._events[t]&&Qu(this,t)):(this._events=new tl,this._eventsCount=0),this};Lt.prototype.off=Lt.prototype.removeListener;Lt.prototype.addListener=Lt.prototype.on;Lt.prefixed=Bt;Lt.EventEmitter=Lt;typeof ng<"u"&&(ng.exports=Lt)});var X1=We((Ig,Rg)=>{(function(s,e){typeof Ig=="object"&&typeof Rg<"u"?Rg.exports=e():typeof define=="function"&&define.amd?define(e):(s=typeof globalThis<"u"?globalThis:s||self,s.Cropper=e())})(Ig,function(){"use strict";function s(x,g){var E=Object.keys(x);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(x);g&&(y=y.filter(function(B){return Object.getOwnPropertyDescriptor(x,B).enumerable})),E.push.apply(E,y)}return E}function e(x){for(var g=1;g<arguments.length;g++){var E=arguments[g]!=null?arguments[g]:{};g%2?s(Object(E),!0).forEach(function(y){l(x,y,E[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(E)):s(Object(E)).forEach(function(y){Object.defineProperty(x,y,Object.getOwnPropertyDescriptor(E,y))})}return x}function t(x,g){if(typeof x!="object"||!x)return x;var E=x[Symbol.toPrimitive];if(E!==void 0){var y=E.call(x,g||"default");if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(x)}function i(x){var g=t(x,"string");return typeof g=="symbol"?g:g+""}function n(x){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},n(x)}function r(x,g){if(!(x instanceof g))throw new TypeError("Cannot call a class as a function")}function o(x,g){for(var E=0;E<g.length;E++){var y=g[E];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(x,i(y.key),y)}}function a(x,g,E){return g&&o(x.prototype,g),E&&o(x,E),Object.defineProperty(x,"prototype",{writable:!1}),x}function l(x,g,E){return g=i(g),g in x?Object.defineProperty(x,g,{value:E,enumerable:!0,configurable:!0,writable:!0}):x[g]=E,x}function c(x){return u(x)||h(x)||f(x)||v()}function u(x){if(Array.isArray(x))return p(x)}function h(x){if(typeof Symbol<"u"&&x[Symbol.iterator]!=null||x["@@iterator"]!=null)return Array.from(x)}function f(x,g){if(x){if(typeof x=="string")return p(x,g);var E=Object.prototype.toString.call(x).slice(8,-1);if(E==="Object"&&x.constructor&&(E=x.constructor.name),E==="Map"||E==="Set")return Array.from(x);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return p(x,g)}}function p(x,g){(g==null||g>x.length)&&(g=x.length);for(var E=0,y=new Array(g);E<g;E++)y[E]=x[E];return y}function v(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w=typeof window<"u"&&typeof window.document<"u",S=w?window:{},A=w&&S.document.documentElement?"ontouchstart"in S.document.documentElement:!1,k=w?"PointerEvent"in S:!1,D="cropper",R="all",$="crop",U="move",Z="zoom",K="e",ue="w",X="s",oe="n",he="ne",se="nw",Q="se",H="sw",T="".concat(D,"-crop"),F="".concat(D,"-disabled"),_="".concat(D,"-hidden"),J="".concat(D,"-hide"),ie="".concat(D,"-invisible"),le="".concat(D,"-modal"),ve="".concat(D,"-move"),Ae="".concat(D,"Action"),De="".concat(D,"Preview"),qe="crop",_e="move",Qe="none",Ge="crop",G="cropend",Te="cropmove",ee="cropstart",V="dblclick",O=A?"touchstart":"mousedown",P=A?"touchmove":"mousemove",z=A?"touchend touchcancel":"mouseup",I=k?"pointerdown":O,je=k?"pointermove":P,fe=k?"pointerup pointercancel":z,ft="ready",Dt="resize",Us="wheel",rs="zoom",gn="image/jpeg",vn=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Lr=/^data:/,kr=/^data:image\/jpeg;base64,/,$i=/^img|canvas$/i,bn=200,Gd=100,$l={viewMode:0,dragMode:qe,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:bn,minContainerHeight:Gd,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Yd='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Xd=Number.isNaN||S.isNaN;function we(x){return typeof x=="number"&&!Xd(x)}var Hl=function(g){return g>0&&g<1/0};function os(x){return typeof x>"u"}function as(x){return n(x)==="object"&&x!==null}var js=Object.prototype.hasOwnProperty;function Vs(x){if(!as(x))return!1;try{var g=x.constructor,E=g.prototype;return g&&E&&js.call(E,"isPrototypeOf")}catch{return!1}}function Ct(x){return typeof x=="function"}var Kd=Array.prototype.slice;function Ul(x){return Array.from?Array.from(x):Kd.call(x)}function et(x,g){return x&&Ct(g)&&(Array.isArray(x)||we(x.length)?Ul(x).forEach(function(E,y){g.call(x,E,y,x)}):as(x)&&Object.keys(x).forEach(function(E){g.call(x,x[E],E,x)})),x}var ze=Object.assign||function(g){for(var E=arguments.length,y=new Array(E>1?E-1:0),B=1;B<E;B++)y[B-1]=arguments[B];return as(g)&&y.length>0&&y.forEach(function(L){as(L)&&Object.keys(L).forEach(function(N){g[N]=L[N]})}),g},Jd=/\.\d*(?:0|9){12}\d*$/;function qs(x){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Jd.test(x)?Math.round(x*g)/g:x}var Zd=/^width|height|left|top|marginLeft|marginTop$/;function Hi(x,g){var E=x.style;et(g,function(y,B){Zd.test(B)&&we(y)&&(y="".concat(y,"px")),E[B]=y})}function Qd(x,g){return x.classList?x.classList.contains(g):x.className.indexOf(g)>-1}function Ye(x,g){if(g){if(we(x.length)){et(x,function(y){Ye(y,g)});return}if(x.classList){x.classList.add(g);return}var E=x.className.trim();E?E.indexOf(g)<0&&(x.className="".concat(E," ").concat(g)):x.className=g}}function pi(x,g){if(g){if(we(x.length)){et(x,function(E){pi(E,g)});return}if(x.classList){x.classList.remove(g);return}x.className.indexOf(g)>=0&&(x.className=x.className.replace(g,""))}}function yn(x,g,E){if(g){if(we(x.length)){et(x,function(y){yn(y,g,E)});return}E?Ye(x,g):pi(x,g)}}var Ui=/([a-z\d])([A-Z])/g;function Dr(x){return x.replace(Ui,"$1-$2").toLowerCase()}function $o(x,g){return as(x[g])?x[g]:x.dataset?x.dataset[g]:x.getAttribute("data-".concat(Dr(g)))}function wn(x,g,E){as(E)?x[g]=E:x.dataset?x.dataset[g]=E:x.setAttribute("data-".concat(Dr(g)),E)}function eh(x,g){if(as(x[g]))try{delete x[g]}catch{x[g]=void 0}else if(x.dataset)try{delete x.dataset[g]}catch{x.dataset[g]=void 0}else x.removeAttribute("data-".concat(Dr(g)))}var Ws=/\s\s*/,ls=function(){var x=!1;if(w){var g=!1,E=function(){},y=Object.defineProperty({},"once",{get:function(){return x=!0,g},set:function(L){g=L}});S.addEventListener("test",E,y),S.removeEventListener("test",E,y)}return x}();function mt(x,g,E){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},B=E;g.trim().split(Ws).forEach(function(L){if(!ls){var N=x.listeners;N&&N[L]&&N[L][E]&&(B=N[L][E],delete N[L][E],Object.keys(N[L]).length===0&&delete N[L],Object.keys(N).length===0&&delete x.listeners)}x.removeEventListener(L,B,y)})}function St(x,g,E){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},B=E;g.trim().split(Ws).forEach(function(L){if(y.once&&!ls){var N=x.listeners,j=N===void 0?{}:N;B=function(){delete j[L][E],x.removeEventListener(L,B,y);for(var te=arguments.length,q=new Array(te),W=0;W<te;W++)q[W]=arguments[W];E.apply(x,q)},j[L]||(j[L]={}),j[L][E]&&x.removeEventListener(L,j[L][E],y),j[L][E]=B,x.listeners=j}x.addEventListener(L,B,y)})}function Gs(x,g,E){var y;return Ct(Event)&&Ct(CustomEvent)?y=new CustomEvent(g,{detail:E,bubbles:!0,cancelable:!0}):(y=document.createEvent("CustomEvent"),y.initCustomEvent(g,!0,!0,E)),x.dispatchEvent(y)}function Fr(x){var g=x.getBoundingClientRect();return{left:g.left+(window.pageXOffset-document.documentElement.clientLeft),top:g.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ho=S.location,th=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function jl(x){var g=x.match(th);return g!==null&&(g[1]!==Ho.protocol||g[2]!==Ho.hostname||g[3]!==Ho.port)}function Vl(x){var g="timestamp=".concat(new Date().getTime());return x+(x.indexOf("?")===-1?"?":"&")+g}function En(x){var g=x.rotate,E=x.scaleX,y=x.scaleY,B=x.translateX,L=x.translateY,N=[];we(B)&&B!==0&&N.push("translateX(".concat(B,"px)")),we(L)&&L!==0&&N.push("translateY(".concat(L,"px)")),we(g)&&g!==0&&N.push("rotate(".concat(g,"deg)")),we(E)&&E!==1&&N.push("scaleX(".concat(E,")")),we(y)&&y!==1&&N.push("scaleY(".concat(y,")"));var j=N.length?N.join(" "):"none";return{WebkitTransform:j,msTransform:j,transform:j}}function ih(x){var g=e({},x),E=0;return et(x,function(y,B){delete g[B],et(g,function(L){var N=Math.abs(y.startX-L.startX),j=Math.abs(y.startY-L.startY),ne=Math.abs(y.endX-L.endX),te=Math.abs(y.endY-L.endY),q=Math.sqrt(N*N+j*j),W=Math.sqrt(ne*ne+te*te),re=(W-q)/q;Math.abs(re)>Math.abs(E)&&(E=re)})}),E}function Sn(x,g){var E=x.pageX,y=x.pageY,B={endX:E,endY:y};return g?B:e({startX:E,startY:y},B)}function Ir(x){var g=0,E=0,y=0;return et(x,function(B){var L=B.startX,N=B.startY;g+=L,E+=N,y+=1}),g/=y,E/=y,{pageX:g,pageY:E}}function ji(x){var g=x.aspectRatio,E=x.height,y=x.width,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",L=Hl(y),N=Hl(E);if(L&&N){var j=E*g;B==="contain"&&j>y||B==="cover"&&j<y?E=y/g:y=E*g}else L?E=y/g:N&&(y=E*g);return{width:y,height:E}}function sh(x){var g=x.width,E=x.height,y=x.degree;if(y=Math.abs(y)%180,y===90)return{width:E,height:g};var B=y%90*Math.PI/180,L=Math.sin(B),N=Math.cos(B),j=g*N+E*L,ne=g*L+E*N;return y>90?{width:ne,height:j}:{width:j,height:ne}}function nh(x,g,E,y){var B=g.aspectRatio,L=g.naturalWidth,N=g.naturalHeight,j=g.rotate,ne=j===void 0?0:j,te=g.scaleX,q=te===void 0?1:te,W=g.scaleY,re=W===void 0?1:W,Ce=E.aspectRatio,xe=E.naturalWidth,$e=E.naturalHeight,Me=y.fillColor,st=Me===void 0?"transparent":Me,lt=y.imageSmoothingEnabled,Be=lt===void 0?!0:lt,fi=y.imageSmoothingQuality,Vt=fi===void 0?"low":fi,ae=y.maxWidth,Oe=ae===void 0?1/0:ae,nt=y.maxHeight,Ft=nt===void 0?1/0:nt,Oi=y.minWidth,Vi=Oi===void 0?0:Oi,cs=y.minHeight,qi=cs===void 0?0:cs,mi=document.createElement("canvas"),Pt=mi.getContext("2d"),us=ji({aspectRatio:Ce,width:Oe,height:Ft}),An=ji({aspectRatio:Ce,width:Vi,height:qi},"cover"),Rr=Math.min(us.width,Math.max(An.width,xe)),Uo=Math.min(us.height,Math.max(An.height,$e)),ds=ji({aspectRatio:B,width:Oe,height:Ft}),Yl=ji({aspectRatio:B,width:Vi,height:qi},"cover"),Xl=Math.min(ds.width,Math.max(Yl.width,L)),Kl=Math.min(ds.height,Math.max(Yl.height,N)),gh=[-Xl/2,-Kl/2,Xl,Kl];return mi.width=qs(Rr),mi.height=qs(Uo),Pt.fillStyle=st,Pt.fillRect(0,0,Rr,Uo),Pt.save(),Pt.translate(Rr/2,Uo/2),Pt.rotate(ne*Math.PI/180),Pt.scale(q,re),Pt.imageSmoothingEnabled=Be,Pt.imageSmoothingQuality=Vt,Pt.drawImage.apply(Pt,[x].concat(c(gh.map(function(vh){return Math.floor(qs(vh))})))),Pt.restore(),mi}var ql=String.fromCharCode;function rh(x,g,E){var y="";E+=g;for(var B=g;B<E;B+=1)y+=ql(x.getUint8(B));return y}var Wl=/^data:.*,/;function Gl(x){var g=x.replace(Wl,""),E=atob(g),y=new ArrayBuffer(E.length),B=new Uint8Array(y);return et(B,function(L,N){B[N]=E.charCodeAt(N)}),y}function oh(x,g){for(var E=[],y=8192,B=new Uint8Array(x);B.length>0;)E.push(ql.apply(null,Ul(B.subarray(0,y)))),B=B.subarray(y);return"data:".concat(g,";base64,").concat(btoa(E.join("")))}function ah(x){var g=new DataView(x),E;try{var y,B,L;if(g.getUint8(0)===255&&g.getUint8(1)===216)for(var N=g.byteLength,j=2;j+1<N;){if(g.getUint8(j)===255&&g.getUint8(j+1)===225){B=j;break}j+=1}if(B){var ne=B+4,te=B+10;if(rh(g,ne,4)==="Exif"){var q=g.getUint16(te);if(y=q===18761,(y||q===19789)&&g.getUint16(te+2,y)===42){var W=g.getUint32(te+4,y);W>=8&&(L=te+W)}}}if(L){var re=g.getUint16(L,y),Ce,xe;for(xe=0;xe<re;xe+=1)if(Ce=L+xe*12+2,g.getUint16(Ce,y)===274){Ce+=8,E=g.getUint16(Ce,y),g.setUint16(Ce,1,y);break}}}catch{E=1}return E}function lh(x){var g=0,E=1,y=1;switch(x){case 2:E=-1;break;case 3:g=-180;break;case 4:y=-1;break;case 5:g=90,y=-1;break;case 6:g=90;break;case 7:g=90,E=-1;break;case 8:g=-90;break}return{rotate:g,scaleX:E,scaleY:y}}var ch={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var g=this.element,E=this.options,y=this.container,B=this.cropper,L=Number(E.minContainerWidth),N=Number(E.minContainerHeight);Ye(B,_),pi(g,_);var j={width:Math.max(y.offsetWidth,L>=0?L:bn),height:Math.max(y.offsetHeight,N>=0?N:Gd)};this.containerData=j,Hi(B,{width:j.width,height:j.height}),Ye(g,_),pi(B,_)},initCanvas:function(){var g=this.containerData,E=this.imageData,y=this.options.viewMode,B=Math.abs(E.rotate)%180===90,L=B?E.naturalHeight:E.naturalWidth,N=B?E.naturalWidth:E.naturalHeight,j=L/N,ne=g.width,te=g.height;g.height*j>g.width?y===3?ne=g.height*j:te=g.width/j:y===3?te=g.width/j:ne=g.height*j;var q={aspectRatio:j,naturalWidth:L,naturalHeight:N,width:ne,height:te};this.canvasData=q,this.limited=y===1||y===2,this.limitCanvas(!0,!0),q.width=Math.min(Math.max(q.width,q.minWidth),q.maxWidth),q.height=Math.min(Math.max(q.height,q.minHeight),q.maxHeight),q.left=(g.width-q.width)/2,q.top=(g.height-q.height)/2,q.oldLeft=q.left,q.oldTop=q.top,this.initialCanvasData=ze({},q)},limitCanvas:function(g,E){var y=this.options,B=this.containerData,L=this.canvasData,N=this.cropBoxData,j=y.viewMode,ne=L.aspectRatio,te=this.cropped&&N;if(g){var q=Number(y.minCanvasWidth)||0,W=Number(y.minCanvasHeight)||0;j>1?(q=Math.max(q,B.width),W=Math.max(W,B.height),j===3&&(W*ne>q?q=W*ne:W=q/ne)):j>0&&(q?q=Math.max(q,te?N.width:0):W?W=Math.max(W,te?N.height:0):te&&(q=N.width,W=N.height,W*ne>q?q=W*ne:W=q/ne));var re=ji({aspectRatio:ne,width:q,height:W});q=re.width,W=re.height,L.minWidth=q,L.minHeight=W,L.maxWidth=1/0,L.maxHeight=1/0}if(E)if(j>(te?0:1)){var Ce=B.width-L.width,xe=B.height-L.height;L.minLeft=Math.min(0,Ce),L.minTop=Math.min(0,xe),L.maxLeft=Math.max(0,Ce),L.maxTop=Math.max(0,xe),te&&this.limited&&(L.minLeft=Math.min(N.left,N.left+(N.width-L.width)),L.minTop=Math.min(N.top,N.top+(N.height-L.height)),L.maxLeft=N.left,L.maxTop=N.top,j===2&&(L.width>=B.width&&(L.minLeft=Math.min(0,Ce),L.maxLeft=Math.max(0,Ce)),L.height>=B.height&&(L.minTop=Math.min(0,xe),L.maxTop=Math.max(0,xe))))}else L.minLeft=-L.width,L.minTop=-L.height,L.maxLeft=B.width,L.maxTop=B.height},renderCanvas:function(g,E){var y=this.canvasData,B=this.imageData;if(E){var L=sh({width:B.naturalWidth*Math.abs(B.scaleX||1),height:B.naturalHeight*Math.abs(B.scaleY||1),degree:B.rotate||0}),N=L.width,j=L.height,ne=y.width*(N/y.naturalWidth),te=y.height*(j/y.naturalHeight);y.left-=(ne-y.width)/2,y.top-=(te-y.height)/2,y.width=ne,y.height=te,y.aspectRatio=N/j,y.naturalWidth=N,y.naturalHeight=j,this.limitCanvas(!0,!1)}(y.width>y.maxWidth||y.width<y.minWidth)&&(y.left=y.oldLeft),(y.height>y.maxHeight||y.height<y.minHeight)&&(y.top=y.oldTop),y.width=Math.min(Math.max(y.width,y.minWidth),y.maxWidth),y.height=Math.min(Math.max(y.height,y.minHeight),y.maxHeight),this.limitCanvas(!1,!0),y.left=Math.min(Math.max(y.left,y.minLeft),y.maxLeft),y.top=Math.min(Math.max(y.top,y.minTop),y.maxTop),y.oldLeft=y.left,y.oldTop=y.top,Hi(this.canvas,ze({width:y.width,height:y.height},En({translateX:y.left,translateY:y.top}))),this.renderImage(g),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(g){var E=this.canvasData,y=this.imageData,B=y.naturalWidth*(E.width/E.naturalWidth),L=y.naturalHeight*(E.height/E.naturalHeight);ze(y,{width:B,height:L,left:(E.width-B)/2,top:(E.height-L)/2}),Hi(this.image,ze({width:y.width,height:y.height},En(ze({translateX:y.left,translateY:y.top},y)))),g&&this.output()},initCropBox:function(){var g=this.options,E=this.canvasData,y=g.aspectRatio||g.initialAspectRatio,B=Number(g.autoCropArea)||.8,L={width:E.width,height:E.height};y&&(E.height*y>E.width?L.height=L.width/y:L.width=L.height*y),this.cropBoxData=L,this.limitCropBox(!0,!0),L.width=Math.min(Math.max(L.width,L.minWidth),L.maxWidth),L.height=Math.min(Math.max(L.height,L.minHeight),L.maxHeight),L.width=Math.max(L.minWidth,L.width*B),L.height=Math.max(L.minHeight,L.height*B),L.left=E.left+(E.width-L.width)/2,L.top=E.top+(E.height-L.height)/2,L.oldLeft=L.left,L.oldTop=L.top,this.initialCropBoxData=ze({},L)},limitCropBox:function(g,E){var y=this.options,B=this.containerData,L=this.canvasData,N=this.cropBoxData,j=this.limited,ne=y.aspectRatio;if(g){var te=Number(y.minCropBoxWidth)||0,q=Number(y.minCropBoxHeight)||0,W=j?Math.min(B.width,L.width,L.width+L.left,B.width-L.left):B.width,re=j?Math.min(B.height,L.height,L.height+L.top,B.height-L.top):B.height;te=Math.min(te,B.width),q=Math.min(q,B.height),ne&&(te&&q?q*ne>te?q=te/ne:te=q*ne:te?q=te/ne:q&&(te=q*ne),re*ne>W?re=W/ne:W=re*ne),N.minWidth=Math.min(te,W),N.minHeight=Math.min(q,re),N.maxWidth=W,N.maxHeight=re}E&&(j?(N.minLeft=Math.max(0,L.left),N.minTop=Math.max(0,L.top),N.maxLeft=Math.min(B.width,L.left+L.width)-N.width,N.maxTop=Math.min(B.height,L.top+L.height)-N.height):(N.minLeft=0,N.minTop=0,N.maxLeft=B.width-N.width,N.maxTop=B.height-N.height))},renderCropBox:function(){var g=this.options,E=this.containerData,y=this.cropBoxData;(y.width>y.maxWidth||y.width<y.minWidth)&&(y.left=y.oldLeft),(y.height>y.maxHeight||y.height<y.minHeight)&&(y.top=y.oldTop),y.width=Math.min(Math.max(y.width,y.minWidth),y.maxWidth),y.height=Math.min(Math.max(y.height,y.minHeight),y.maxHeight),this.limitCropBox(!1,!0),y.left=Math.min(Math.max(y.left,y.minLeft),y.maxLeft),y.top=Math.min(Math.max(y.top,y.minTop),y.maxTop),y.oldLeft=y.left,y.oldTop=y.top,g.movable&&g.cropBoxMovable&&wn(this.face,Ae,y.width>=E.width&&y.height>=E.height?U:R),Hi(this.cropBox,ze({width:y.width,height:y.height},En({translateX:y.left,translateY:y.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Gs(this.element,Ge,this.getData())}},uh={initPreview:function(){var g=this.element,E=this.crossOrigin,y=this.options.preview,B=E?this.crossOriginUrl:this.url,L=g.alt||"The image to preview",N=document.createElement("img");if(E&&(N.crossOrigin=E),N.src=B,N.alt=L,this.viewBox.appendChild(N),this.viewBoxImage=N,!!y){var j=y;typeof y=="string"?j=g.ownerDocument.querySelectorAll(y):y.querySelector&&(j=[y]),this.previews=j,et(j,function(ne){var te=document.createElement("img");wn(ne,De,{width:ne.offsetWidth,height:ne.offsetHeight,html:ne.innerHTML}),E&&(te.crossOrigin=E),te.src=B,te.alt=L,te.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',ne.innerHTML="",ne.appendChild(te)})}},resetPreview:function(){et(this.previews,function(g){var E=$o(g,De);Hi(g,{width:E.width,height:E.height}),g.innerHTML=E.html,eh(g,De)})},preview:function(){var g=this.imageData,E=this.canvasData,y=this.cropBoxData,B=y.width,L=y.height,N=g.width,j=g.height,ne=y.left-E.left-g.left,te=y.top-E.top-g.top;!this.cropped||this.disabled||(Hi(this.viewBoxImage,ze({width:N,height:j},En(ze({translateX:-ne,translateY:-te},g)))),et(this.previews,function(q){var W=$o(q,De),re=W.width,Ce=W.height,xe=re,$e=Ce,Me=1;B&&(Me=re/B,$e=L*Me),L&&$e>Ce&&(Me=Ce/L,xe=B*Me,$e=Ce),Hi(q,{width:xe,height:$e}),Hi(q.getElementsByTagName("img")[0],ze({width:N*Me,height:j*Me},En(ze({translateX:-ne*Me,translateY:-te*Me},g))))}))}},dh={bind:function(){var g=this.element,E=this.options,y=this.cropper;Ct(E.cropstart)&&St(g,ee,E.cropstart),Ct(E.cropmove)&&St(g,Te,E.cropmove),Ct(E.cropend)&&St(g,G,E.cropend),Ct(E.crop)&&St(g,Ge,E.crop),Ct(E.zoom)&&St(g,rs,E.zoom),St(y,I,this.onCropStart=this.cropStart.bind(this)),E.zoomable&&E.zoomOnWheel&&St(y,Us,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),E.toggleDragModeOnDblclick&&St(y,V,this.onDblclick=this.dblclick.bind(this)),St(g.ownerDocument,je,this.onCropMove=this.cropMove.bind(this)),St(g.ownerDocument,fe,this.onCropEnd=this.cropEnd.bind(this)),E.responsive&&St(window,Dt,this.onResize=this.resize.bind(this))},unbind:function(){var g=this.element,E=this.options,y=this.cropper;Ct(E.cropstart)&&mt(g,ee,E.cropstart),Ct(E.cropmove)&&mt(g,Te,E.cropmove),Ct(E.cropend)&&mt(g,G,E.cropend),Ct(E.crop)&&mt(g,Ge,E.crop),Ct(E.zoom)&&mt(g,rs,E.zoom),mt(y,I,this.onCropStart),E.zoomable&&E.zoomOnWheel&&mt(y,Us,this.onWheel,{passive:!1,capture:!0}),E.toggleDragModeOnDblclick&&mt(y,V,this.onDblclick),mt(g.ownerDocument,je,this.onCropMove),mt(g.ownerDocument,fe,this.onCropEnd),E.responsive&&mt(window,Dt,this.onResize)}},hh={resize:function(){if(!this.disabled){var g=this.options,E=this.container,y=this.containerData,B=E.offsetWidth/y.width,L=E.offsetHeight/y.height,N=Math.abs(B-1)>Math.abs(L-1)?B:L;if(N!==1){var j,ne;g.restore&&(j=this.getCanvasData(),ne=this.getCropBoxData()),this.render(),g.restore&&(this.setCanvasData(et(j,function(te,q){j[q]=te*N})),this.setCropBoxData(et(ne,function(te,q){ne[q]=te*N})))}}},dblclick:function(){this.disabled||this.options.dragMode===Qe||this.setDragMode(Qd(this.dragBox,T)?_e:qe)},wheel:function(g){var E=this,y=Number(this.options.wheelZoomRatio)||.1,B=1;this.disabled||(g.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){E.wheeling=!1},50),g.deltaY?B=g.deltaY>0?1:-1:g.wheelDelta?B=-g.wheelDelta/120:g.detail&&(B=g.detail>0?1:-1),this.zoom(-B*y,g)))},cropStart:function(g){var E=g.buttons,y=g.button;if(!(this.disabled||(g.type==="mousedown"||g.type==="pointerdown"&&g.pointerType==="mouse")&&(we(E)&&E!==1||we(y)&&y!==0||g.ctrlKey))){var B=this.options,L=this.pointers,N;g.changedTouches?et(g.changedTouches,function(j){L[j.identifier]=Sn(j)}):L[g.pointerId||0]=Sn(g),Object.keys(L).length>1&&B.zoomable&&B.zoomOnTouch?N=Z:N=$o(g.target,Ae),vn.test(N)&&Gs(this.element,ee,{originalEvent:g,action:N})!==!1&&(g.preventDefault(),this.action=N,this.cropping=!1,N===$&&(this.cropping=!0,Ye(this.dragBox,le)))}},cropMove:function(g){var E=this.action;if(!(this.disabled||!E)){var y=this.pointers;g.preventDefault(),Gs(this.element,Te,{originalEvent:g,action:E})!==!1&&(g.changedTouches?et(g.changedTouches,function(B){ze(y[B.identifier]||{},Sn(B,!0))}):ze(y[g.pointerId||0]||{},Sn(g,!0)),this.change(g))}},cropEnd:function(g){if(!this.disabled){var E=this.action,y=this.pointers;g.changedTouches?et(g.changedTouches,function(B){delete y[B.identifier]}):delete y[g.pointerId||0],E&&(g.preventDefault(),Object.keys(y).length||(this.action=""),this.cropping&&(this.cropping=!1,yn(this.dragBox,le,this.cropped&&this.options.modal)),Gs(this.element,G,{originalEvent:g,action:E}))}}},ph={change:function(g){var E=this.options,y=this.canvasData,B=this.containerData,L=this.cropBoxData,N=this.pointers,j=this.action,ne=E.aspectRatio,te=L.left,q=L.top,W=L.width,re=L.height,Ce=te+W,xe=q+re,$e=0,Me=0,st=B.width,lt=B.height,Be=!0,fi;!ne&&g.shiftKey&&(ne=W&&re?W/re:1),this.limited&&($e=L.minLeft,Me=L.minTop,st=$e+Math.min(B.width,y.width,y.left+y.width),lt=Me+Math.min(B.height,y.height,y.top+y.height));var Vt=N[Object.keys(N)[0]],ae={x:Vt.endX-Vt.startX,y:Vt.endY-Vt.startY},Oe=function(Ft){switch(Ft){case K:Ce+ae.x>st&&(ae.x=st-Ce);break;case ue:te+ae.x<$e&&(ae.x=$e-te);break;case oe:q+ae.y<Me&&(ae.y=Me-q);break;case X:xe+ae.y>lt&&(ae.y=lt-xe);break}};switch(j){case R:te+=ae.x,q+=ae.y;break;case K:if(ae.x>=0&&(Ce>=st||ne&&(q<=Me||xe>=lt))){Be=!1;break}Oe(K),W+=ae.x,W<0&&(j=ue,W=-W,te-=W),ne&&(re=W/ne,q+=(L.height-re)/2);break;case oe:if(ae.y<=0&&(q<=Me||ne&&(te<=$e||Ce>=st))){Be=!1;break}Oe(oe),re-=ae.y,q+=ae.y,re<0&&(j=X,re=-re,q-=re),ne&&(W=re*ne,te+=(L.width-W)/2);break;case ue:if(ae.x<=0&&(te<=$e||ne&&(q<=Me||xe>=lt))){Be=!1;break}Oe(ue),W-=ae.x,te+=ae.x,W<0&&(j=K,W=-W,te-=W),ne&&(re=W/ne,q+=(L.height-re)/2);break;case X:if(ae.y>=0&&(xe>=lt||ne&&(te<=$e||Ce>=st))){Be=!1;break}Oe(X),re+=ae.y,re<0&&(j=oe,re=-re,q-=re),ne&&(W=re*ne,te+=(L.width-W)/2);break;case he:if(ne){if(ae.y<=0&&(q<=Me||Ce>=st)){Be=!1;break}Oe(oe),re-=ae.y,q+=ae.y,W=re*ne}else Oe(oe),Oe(K),ae.x>=0?Ce<st?W+=ae.x:ae.y<=0&&q<=Me&&(Be=!1):W+=ae.x,ae.y<=0?q>Me&&(re-=ae.y,q+=ae.y):(re-=ae.y,q+=ae.y);W<0&&re<0?(j=H,re=-re,W=-W,q-=re,te-=W):W<0?(j=se,W=-W,te-=W):re<0&&(j=Q,re=-re,q-=re);break;case se:if(ne){if(ae.y<=0&&(q<=Me||te<=$e)){Be=!1;break}Oe(oe),re-=ae.y,q+=ae.y,W=re*ne,te+=L.width-W}else Oe(oe),Oe(ue),ae.x<=0?te>$e?(W-=ae.x,te+=ae.x):ae.y<=0&&q<=Me&&(Be=!1):(W-=ae.x,te+=ae.x),ae.y<=0?q>Me&&(re-=ae.y,q+=ae.y):(re-=ae.y,q+=ae.y);W<0&&re<0?(j=Q,re=-re,W=-W,q-=re,te-=W):W<0?(j=he,W=-W,te-=W):re<0&&(j=H,re=-re,q-=re);break;case H:if(ne){if(ae.x<=0&&(te<=$e||xe>=lt)){Be=!1;break}Oe(ue),W-=ae.x,te+=ae.x,re=W/ne}else Oe(X),Oe(ue),ae.x<=0?te>$e?(W-=ae.x,te+=ae.x):ae.y>=0&&xe>=lt&&(Be=!1):(W-=ae.x,te+=ae.x),ae.y>=0?xe<lt&&(re+=ae.y):re+=ae.y;W<0&&re<0?(j=he,re=-re,W=-W,q-=re,te-=W):W<0?(j=Q,W=-W,te-=W):re<0&&(j=se,re=-re,q-=re);break;case Q:if(ne){if(ae.x>=0&&(Ce>=st||xe>=lt)){Be=!1;break}Oe(K),W+=ae.x,re=W/ne}else Oe(X),Oe(K),ae.x>=0?Ce<st?W+=ae.x:ae.y>=0&&xe>=lt&&(Be=!1):W+=ae.x,ae.y>=0?xe<lt&&(re+=ae.y):re+=ae.y;W<0&&re<0?(j=se,re=-re,W=-W,q-=re,te-=W):W<0?(j=H,W=-W,te-=W):re<0&&(j=he,re=-re,q-=re);break;case U:this.move(ae.x,ae.y),Be=!1;break;case Z:this.zoom(ih(N),g),Be=!1;break;case $:if(!ae.x||!ae.y){Be=!1;break}fi=Fr(this.cropper),te=Vt.startX-fi.left,q=Vt.startY-fi.top,W=L.minWidth,re=L.minHeight,ae.x>0?j=ae.y>0?Q:he:ae.x<0&&(te-=W,j=ae.y>0?H:se),ae.y<0&&(q-=re),this.cropped||(pi(this.cropBox,_),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}Be&&(L.width=W,L.height=re,L.left=te,L.top=q,this.action=j,this.renderCropBox()),et(N,function(nt){nt.startX=nt.endX,nt.startY=nt.endY})}},Ys={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Ye(this.dragBox,le),pi(this.cropBox,_),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=ze({},this.initialImageData),this.canvasData=ze({},this.initialCanvasData),this.cropBoxData=ze({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(ze(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),pi(this.dragBox,le),Ye(this.cropBox,_)),this},replace:function(g){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&g&&(this.isImg&&(this.element.src=g),E?(this.url=g,this.image.src=g,this.ready&&(this.viewBoxImage.src=g,et(this.previews,function(y){y.getElementsByTagName("img")[0].src=g}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(g))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,pi(this.cropper,F)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Ye(this.cropper,F)),this},destroy:function(){var g=this.element;return g[D]?(g[D]=void 0,this.isImg&&this.replaced&&(g.src=this.originalUrl),this.uncreate(),this):this},move:function(g){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,y=this.canvasData,B=y.left,L=y.top;return this.moveTo(os(g)?g:B+Number(g),os(E)?E:L+Number(E))},moveTo:function(g){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,y=this.canvasData,B=!1;return g=Number(g),E=Number(E),this.ready&&!this.disabled&&this.options.movable&&(we(g)&&(y.left=g,B=!0),we(E)&&(y.top=E,B=!0),B&&this.renderCanvas(!0)),this},zoom:function(g,E){var y=this.canvasData;return g=Number(g),g<0?g=1/(1-g):g=1+g,this.zoomTo(y.width*g/y.naturalWidth,null,E)},zoomTo:function(g,E,y){var B=this.options,L=this.canvasData,N=L.width,j=L.height,ne=L.naturalWidth,te=L.naturalHeight;if(g=Number(g),g>=0&&this.ready&&!this.disabled&&B.zoomable){var q=ne*g,W=te*g;if(Gs(this.element,rs,{ratio:g,oldRatio:N/ne,originalEvent:y})===!1)return this;if(y){var re=this.pointers,Ce=Fr(this.cropper),xe=re&&Object.keys(re).length?Ir(re):{pageX:y.pageX,pageY:y.pageY};L.left-=(q-N)*((xe.pageX-Ce.left-L.left)/N),L.top-=(W-j)*((xe.pageY-Ce.top-L.top)/j)}else Vs(E)&&we(E.x)&&we(E.y)?(L.left-=(q-N)*((E.x-L.left)/N),L.top-=(W-j)*((E.y-L.top)/j)):(L.left-=(q-N)/2,L.top-=(W-j)/2);L.width=q,L.height=W,this.renderCanvas(!0)}return this},rotate:function(g){return this.rotateTo((this.imageData.rotate||0)+Number(g))},rotateTo:function(g){return g=Number(g),we(g)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=g%360,this.renderCanvas(!0,!0)),this},scaleX:function(g){var E=this.imageData.scaleY;return this.scale(g,we(E)?E:1)},scaleY:function(g){var E=this.imageData.scaleX;return this.scale(we(E)?E:1,g)},scale:function(g){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g,y=this.imageData,B=!1;return g=Number(g),E=Number(E),this.ready&&!this.disabled&&this.options.scalable&&(we(g)&&(y.scaleX=g,B=!0),we(E)&&(y.scaleY=E,B=!0),B&&this.renderCanvas(!0,!0)),this},getData:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,E=this.options,y=this.imageData,B=this.canvasData,L=this.cropBoxData,N;if(this.ready&&this.cropped){N={x:L.left-B.left,y:L.top-B.top,width:L.width,height:L.height};var j=y.width/y.naturalWidth;if(et(N,function(q,W){N[W]=q/j}),g){var ne=Math.round(N.y+N.height),te=Math.round(N.x+N.width);N.x=Math.round(N.x),N.y=Math.round(N.y),N.width=te-N.x,N.height=ne-N.y}}else N={x:0,y:0,width:0,height:0};return E.rotatable&&(N.rotate=y.rotate||0),E.scalable&&(N.scaleX=y.scaleX||1,N.scaleY=y.scaleY||1),N},setData:function(g){var E=this.options,y=this.imageData,B=this.canvasData,L={};if(this.ready&&!this.disabled&&Vs(g)){var N=!1;E.rotatable&&we(g.rotate)&&g.rotate!==y.rotate&&(y.rotate=g.rotate,N=!0),E.scalable&&(we(g.scaleX)&&g.scaleX!==y.scaleX&&(y.scaleX=g.scaleX,N=!0),we(g.scaleY)&&g.scaleY!==y.scaleY&&(y.scaleY=g.scaleY,N=!0)),N&&this.renderCanvas(!0,!0);var j=y.width/y.naturalWidth;we(g.x)&&(L.left=g.x*j+B.left),we(g.y)&&(L.top=g.y*j+B.top),we(g.width)&&(L.width=g.width*j),we(g.height)&&(L.height=g.height*j),this.setCropBoxData(L)}return this},getContainerData:function(){return this.ready?ze({},this.containerData):{}},getImageData:function(){return this.sized?ze({},this.imageData):{}},getCanvasData:function(){var g=this.canvasData,E={};return this.ready&&et(["left","top","width","height","naturalWidth","naturalHeight"],function(y){E[y]=g[y]}),E},setCanvasData:function(g){var E=this.canvasData,y=E.aspectRatio;return this.ready&&!this.disabled&&Vs(g)&&(we(g.left)&&(E.left=g.left),we(g.top)&&(E.top=g.top),we(g.width)?(E.width=g.width,E.height=g.width/y):we(g.height)&&(E.height=g.height,E.width=g.height*y),this.renderCanvas(!0)),this},getCropBoxData:function(){var g=this.cropBoxData,E;return this.ready&&this.cropped&&(E={left:g.left,top:g.top,width:g.width,height:g.height}),E||{}},setCropBoxData:function(g){var E=this.cropBoxData,y=this.options.aspectRatio,B,L;return this.ready&&this.cropped&&!this.disabled&&Vs(g)&&(we(g.left)&&(E.left=g.left),we(g.top)&&(E.top=g.top),we(g.width)&&g.width!==E.width&&(B=!0,E.width=g.width),we(g.height)&&g.height!==E.height&&(L=!0,E.height=g.height),y&&(B?E.height=E.width/y:L&&(E.width=E.height*y)),this.renderCropBox()),this},getCroppedCanvas:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var E=this.canvasData,y=nh(this.image,this.imageData,E,g);if(!this.cropped)return y;var B=this.getData(g.rounded),L=B.x,N=B.y,j=B.width,ne=B.height,te=y.width/Math.floor(E.naturalWidth);te!==1&&(L*=te,N*=te,j*=te,ne*=te);var q=j/ne,W=ji({aspectRatio:q,width:g.maxWidth||1/0,height:g.maxHeight||1/0}),re=ji({aspectRatio:q,width:g.minWidth||0,height:g.minHeight||0},"cover"),Ce=ji({aspectRatio:q,width:g.width||(te!==1?y.width:j),height:g.height||(te!==1?y.height:ne)}),xe=Ce.width,$e=Ce.height;xe=Math.min(W.width,Math.max(re.width,xe)),$e=Math.min(W.height,Math.max(re.height,$e));var Me=document.createElement("canvas"),st=Me.getContext("2d");Me.width=qs(xe),Me.height=qs($e),st.fillStyle=g.fillColor||"transparent",st.fillRect(0,0,xe,$e);var lt=g.imageSmoothingEnabled,Be=lt===void 0?!0:lt,fi=g.imageSmoothingQuality;st.imageSmoothingEnabled=Be,fi&&(st.imageSmoothingQuality=fi);var Vt=y.width,ae=y.height,Oe=L,nt=N,Ft,Oi,Vi,cs,qi,mi;Oe<=-j||Oe>Vt?(Oe=0,Ft=0,Vi=0,qi=0):Oe<=0?(Vi=-Oe,Oe=0,Ft=Math.min(Vt,j+Oe),qi=Ft):Oe<=Vt&&(Vi=0,Ft=Math.min(j,Vt-Oe),qi=Ft),Ft<=0||nt<=-ne||nt>ae?(nt=0,Oi=0,cs=0,mi=0):nt<=0?(cs=-nt,nt=0,Oi=Math.min(ae,ne+nt),mi=Oi):nt<=ae&&(cs=0,Oi=Math.min(ne,ae-nt),mi=Oi);var Pt=[Oe,nt,Ft,Oi];if(qi>0&&mi>0){var us=xe/j;Pt.push(Vi*us,cs*us,qi*us,mi*us)}return st.drawImage.apply(st,[y].concat(c(Pt.map(function(An){return Math.floor(qs(An))})))),Me},setAspectRatio:function(g){var E=this.options;return!this.disabled&&!os(g)&&(E.aspectRatio=Math.max(0,g)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(g){var E=this.options,y=this.dragBox,B=this.face;if(this.ready&&!this.disabled){var L=g===qe,N=E.movable&&g===_e;g=L||N?g:Qe,E.dragMode=g,wn(y,Ae,g),yn(y,T,L),yn(y,ve,N),E.cropBoxMovable||(wn(B,Ae,g),yn(B,T,L),yn(B,ve,N))}return this}},fh=S.Cropper,mh=function(){function x(g){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r(this,x),!g||!$i.test(g.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=g,this.options=ze({},$l,Vs(E)&&E),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return a(x,[{key:"init",value:function(){var E=this.element,y=E.tagName.toLowerCase(),B;if(!E[D]){if(E[D]=this,y==="img"){if(this.isImg=!0,B=E.getAttribute("src")||"",this.originalUrl=B,!B)return;B=E.src}else y==="canvas"&&window.HTMLCanvasElement&&(B=E.toDataURL());this.load(B)}}},{key:"load",value:function(E){var y=this;if(E){this.url=E,this.imageData={};var B=this.element,L=this.options;if(!L.rotatable&&!L.scalable&&(L.checkOrientation=!1),!L.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Lr.test(E)){kr.test(E)?this.read(Gl(E)):this.clone();return}var N=new XMLHttpRequest,j=this.clone.bind(this);this.reloading=!0,this.xhr=N,N.onabort=j,N.onerror=j,N.ontimeout=j,N.onprogress=function(){N.getResponseHeader("content-type")!==gn&&N.abort()},N.onload=function(){y.read(N.response)},N.onloadend=function(){y.reloading=!1,y.xhr=null},L.checkCrossOrigin&&jl(E)&&B.crossOrigin&&(E=Vl(E)),N.open("GET",E,!0),N.responseType="arraybuffer",N.withCredentials=B.crossOrigin==="use-credentials",N.send()}}},{key:"read",value:function(E){var y=this.options,B=this.imageData,L=ah(E),N=0,j=1,ne=1;if(L>1){this.url=oh(E,gn);var te=lh(L);N=te.rotate,j=te.scaleX,ne=te.scaleY}y.rotatable&&(B.rotate=N),y.scalable&&(B.scaleX=j,B.scaleY=ne),this.clone()}},{key:"clone",value:function(){var E=this.element,y=this.url,B=E.crossOrigin,L=y;this.options.checkCrossOrigin&&jl(y)&&(B||(B="anonymous"),L=Vl(y)),this.crossOrigin=B,this.crossOriginUrl=L;var N=document.createElement("img");B&&(N.crossOrigin=B),N.src=L||y,N.alt=E.alt||"The image to crop",this.image=N,N.onload=this.start.bind(this),N.onerror=this.stop.bind(this),Ye(N,J),E.parentNode.insertBefore(N,E.nextSibling)}},{key:"start",value:function(){var E=this,y=this.image;y.onload=null,y.onerror=null,this.sizing=!0;var B=S.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(S.navigator.userAgent),L=function(te,q){ze(E.imageData,{naturalWidth:te,naturalHeight:q,aspectRatio:te/q}),E.initialImageData=ze({},E.imageData),E.sizing=!1,E.sized=!0,E.build()};if(y.naturalWidth&&!B){L(y.naturalWidth,y.naturalHeight);return}var N=document.createElement("img"),j=document.body||document.documentElement;this.sizingImage=N,N.onload=function(){L(N.width,N.height),B||j.removeChild(N)},N.src=y.src,B||(N.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",j.appendChild(N))}},{key:"stop",value:function(){var E=this.image;E.onload=null,E.onerror=null,E.parentNode.removeChild(E),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var E=this.element,y=this.options,B=this.image,L=E.parentNode,N=document.createElement("div");N.innerHTML=Yd;var j=N.querySelector(".".concat(D,"-container")),ne=j.querySelector(".".concat(D,"-canvas")),te=j.querySelector(".".concat(D,"-drag-box")),q=j.querySelector(".".concat(D,"-crop-box")),W=q.querySelector(".".concat(D,"-face"));this.container=L,this.cropper=j,this.canvas=ne,this.dragBox=te,this.cropBox=q,this.viewBox=j.querySelector(".".concat(D,"-view-box")),this.face=W,ne.appendChild(B),Ye(E,_),L.insertBefore(j,E.nextSibling),pi(B,J),this.initPreview(),this.bind(),y.initialAspectRatio=Math.max(0,y.initialAspectRatio)||NaN,y.aspectRatio=Math.max(0,y.aspectRatio)||NaN,y.viewMode=Math.max(0,Math.min(3,Math.round(y.viewMode)))||0,Ye(q,_),y.guides||Ye(q.getElementsByClassName("".concat(D,"-dashed")),_),y.center||Ye(q.getElementsByClassName("".concat(D,"-center")),_),y.background&&Ye(j,"".concat(D,"-bg")),y.highlight||Ye(W,ie),y.cropBoxMovable&&(Ye(W,ve),wn(W,Ae,R)),y.cropBoxResizable||(Ye(q.getElementsByClassName("".concat(D,"-line")),_),Ye(q.getElementsByClassName("".concat(D,"-point")),_)),this.render(),this.ready=!0,this.setDragMode(y.dragMode),y.autoCrop&&this.crop(),this.setData(y.data),Ct(y.ready)&&St(E,ft,y.ready,{once:!0}),Gs(E,ft)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var E=this.cropper.parentNode;E&&E.removeChild(this.cropper),pi(this.element,_)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=fh,x}},{key:"setDefaults",value:function(E){ze($l,Vs(E)&&E)}}])}();return ze(mh.prototype,ch,uh,dh,hh,ph,Ys),mh})});var pp={};vb(pp,{FetchEnctype:()=>Js,FetchMethod:()=>ii,FetchRequest:()=>Qs,FetchResponse:()=>jr,FrameElement:()=>yi,FrameLoadingStyle:()=>Ln,FrameRenderer:()=>qr,PageRenderer:()=>Wr,PageSnapshot:()=>bi,StreamActions:()=>hp,StreamElement:()=>vc,StreamSourceElement:()=>bc,cache:()=>Ub,clearCache:()=>Gb,config:()=>pt,connectStreamSource:()=>Ko,disconnectStreamSource:()=>Jo,fetch:()=>cp,fetchEnctypeFromString:()=>Nb,fetchMethodFromString:()=>yc,isSafe:()=>wc,navigator:()=>jb,registerAdapter:()=>Vb,renderStreamMessage:()=>Wb,session:()=>tt,setConfirmMethod:()=>Xb,setFormMode:()=>Kb,setProgressBarDelay:()=>Yb,start:()=>dp,visit:()=>qb});(function(s){if(typeof s.requestSubmit=="function")return;s.requestSubmit=function(i){i?(e(i,this),i.click()):(i=document.createElement("input"),i.type="submit",i.hidden=!0,this.appendChild(i),i.click(),this.removeChild(i))};function e(i,n){i instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),i.type=="submit"||t(TypeError,"The specified element is not a submit button"),i.form==n||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}function t(i,n,r){throw new i("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+n+".",r)}})(HTMLFormElement.prototype);var xb=new WeakMap;function Fx(s){let e=s instanceof Element?s:s instanceof Node?s.parentElement:null,t=e?e.closest("input, button"):null;return t?.type=="submit"?t:null}function Ix(s){let e=Fx(s.target);e&&e.form&&xb.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let s=window.Event.prototype;if("SubmitEvent"in window){let e=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in e))s=e;else return}addEventListener("click",Ix,!0),Object.defineProperty(s,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return xb.get(this.target)}})})();var Ln={eager:"eager",lazy:"lazy"},yi=class s extends HTMLElement{static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return["disabled","loading","src"]}constructor(){super(),this.delegate=new s.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="src"?this.delegate.sourceURLChanged():e=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(e){e?this.setAttribute("refresh",e):this.removeAttribute("refresh")}get shouldReloadWithMorph(){return this.src&&this.refresh==="morph"}get loading(){return Rx(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};function Rx(s){switch(s.toLowerCase()){case"lazy":return Ln.lazy;default:return Ln.eager}}var Nx={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set([".7z",".aac",".apk",".avi",".bmp",".bz2",".css",".csv",".deb",".dmg",".doc",".docx",".exe",".gif",".gz",".heic",".heif",".ico",".iso",".jpeg",".jpg",".js",".json",".m4a",".mkv",".mov",".mp3",".mp4",".mpeg",".mpg",".msi",".ogg",".ogv",".pdf",".pkg",".png",".ppt",".pptx",".rar",".rtf",".svg",".tar",".tif",".tiff",".txt",".wav",".webm",".webp",".wma",".wmv",".xls",".xlsx",".xml",".zip"])};function Go(s){if(s.getAttribute("data-turbo-eval")=="false")return s;{let e=document.createElement("script"),t=Lb();return t&&(e.nonce=t),e.textContent=s.textContent,e.async=!1,Bx(e,s),e}}function Bx(s,e){for(let{name:t,value:i}of e.attributes)s.setAttribute(t,i)}function zx(s){let e=document.createElement("template");return e.innerHTML=s,e.content}function Xe(s,{target:e,cancelable:t,detail:i}={}){let n=new CustomEvent(s,{cancelable:t,bubbles:!0,composed:!0,detail:i});return e&&e.isConnected?e.dispatchEvent(n):document.documentElement.dispatchEvent(n),n}function bb(s){s.preventDefault(),s.stopImmediatePropagation()}function Wo(){return document.visibilityState==="hidden"?Pb():Cb()}function Cb(){return new Promise(s=>requestAnimationFrame(()=>s()))}function Pb(){return new Promise(s=>setTimeout(()=>s(),0))}function $x(){return Promise.resolve()}function _b(s=""){return new DOMParser().parseFromString(s,"text/html")}function Mb(s,...e){let t=Hx(s,e).replace(/^\n/,"").split(`
`),i=t[0].match(/^\s+/),n=i?i[0].length:0;return t.map(r=>r.slice(n)).join(`
`)}function Hx(s,e){return s.reduce((t,i,n)=>{let r=e[n]==null?"":e[n];return t+i+r},"")}function Zs(){return Array.from({length:36}).map((s,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function ac(s,...e){for(let t of e.map(i=>i?.getAttribute(s)))if(typeof t=="string")return t;return null}function Ux(s,...e){return e.some(t=>t&&t.hasAttribute(s))}function lc(...s){for(let e of s)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function cc(...s){for(let e of s)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function jx(s,e=2e3){return new Promise(t=>{let i=()=>{s.removeEventListener("error",i),s.removeEventListener("load",i),t()};s.addEventListener("load",i,{once:!0}),s.addEventListener("error",i,{once:!0}),setTimeout(t,e)})}function Ob(s){switch(s){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function Vx(s){return s=="advance"||s=="replace"||s=="restore"}function kn(...s){let e=ac("data-turbo-action",...s);return Vx(e)?e:null}function op(s){return document.querySelector(`meta[name="${s}"]`)}function uc(s){let e=op(s);return e&&e.content}function Lb(){let s=op("csp-nonce");if(s){let{nonce:e,content:t}=s;return e==""?t:e}}function qx(s,e){let t=op(s);return t||(t=document.createElement("meta"),t.setAttribute("name",s),document.head.appendChild(t)),t.setAttribute("content",e),t}function Hr(s,e){if(s instanceof Element)return s.closest(e)||Hr(s.assignedSlot||s.getRootNode()?.host,e)}function ap(s){return!!s&&s.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof s.focus=="function"}function kb(s){return Array.from(s.querySelectorAll("[autofocus]")).find(ap)}async function Wx(s,e){let t=e();s(),await Cb();let i=e();return[t,i]}function Db(s){if(s==="_blank")return!1;if(s){for(let e of document.getElementsByName(s))if(e instanceof HTMLIFrameElement)return!1;return!0}else return!0}function Fb(s){return Hr(s,"a[href]:not([target^=_]):not([download])")}function Ib(s){return vt(s.getAttribute("href")||"")}function Gx(s,e){let t=null;return(...i)=>{let n=()=>s.apply(this,i);clearTimeout(t),t=setTimeout(n,e)}}var Yx={"aria-disabled":{beforeSubmit:s=>{s.setAttribute("aria-disabled","true"),s.addEventListener("click",bb)},afterSubmit:s=>{s.removeAttribute("aria-disabled"),s.removeEventListener("click",bb)}},disabled:{beforeSubmit:s=>s.disabled=!0,afterSubmit:s=>s.disabled=!1}},Mh=class{#e=null;constructor(e){Object.assign(this,e)}get submitter(){return this.#e}set submitter(e){this.#e=Yx[e]||e}},Xx=new Mh({mode:"on",submitter:"disabled"}),pt={drive:Nx,forms:Xx};function vt(s){return new URL(s.toString(),document.baseURI)}function Dn(s){let e;if(s.hash)return s.hash.slice(1);if(e=s.href.match(/#(.*)$/))return e[1]}function lp(s,e){let t=e?.getAttribute("formaction")||s.getAttribute("action")||s.action;return vt(t)}function Kx(s){return(eC(s).match(/\.[^.]*$/)||[])[0]||""}function Jx(s,e){let t=tC(e);return s.href===vt(t).href||s.href.startsWith(t)}function Ks(s,e){return Jx(s,e)&&!pt.drive.unvisitableExtensions.has(Kx(s))}function Oh(s){let e=Dn(s);return e!=null?s.href.slice(0,-(e.length+1)):s.href}function rc(s){return Oh(s)}function Zx(s,e){return vt(s).href==vt(e).href}function Qx(s){return s.pathname.split("/").slice(1)}function eC(s){return Qx(s).slice(-1)[0]}function tC(s){return iC(s.origin+s.pathname)}function iC(s){return s.endsWith("/")?s:s+"/"}var jr=class{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return vt(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}},Lh=class extends Set{constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){let i=this.values().next().value;this.delete(i)}super.add(e)}},Rb=new Lh(20),sC=window.fetch;function cp(s,e={}){let t=new Headers(e.headers||{}),i=Zs();return Rb.add(i),t.append("X-Turbo-Request-Id",i),sC(s,{...e,headers:t})}function yc(s){switch(s.toLowerCase()){case"get":return ii.get;case"post":return ii.post;case"put":return ii.put;case"patch":return ii.patch;case"delete":return ii.delete}}var ii={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function Nb(s){switch(s.toLowerCase()){case Js.multipart:return Js.multipart;case Js.plain:return Js.plain;default:return Js.urlEncoded}}var Js={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},Qs=class{abortController=new AbortController;#e=e=>{};constructor(e,t,i,n=new URLSearchParams,r=null,o=Js.urlEncoded){let[a,l]=yb(vt(i),t,n,o);this.delegate=e,this.url=a,this.target=r,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:t.toUpperCase(),headers:{...this.defaultHeaders},body:l,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=o}get method(){return this.fetchOptions.method}set method(e){let t=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,i=yc(e)||ii.get;this.url.search="";let[n,r]=yb(this.url,i,t,this.enctype);this.url=n,this.fetchOptions.body=r,this.fetchOptions.method=i.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this);let t=await this.#t(e);try{this.delegate.requestStarted(this),t.detail.fetchRequest?this.response=t.detail.fetchRequest.response:this.response=cp(this.url.href,e);let i=await this.response;return await this.receive(i)}catch(i){if(i.name!=="AbortError")throw this.#i(i)&&this.delegate.requestErrored(this,i),i}finally{this.delegate.requestFinished(this)}}async receive(e){let t=new jr(e);return Xe("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return wc(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}async#t(e){let t=new Promise(n=>this.#e=n),i=Xe("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.#e},target:this.target});return this.url=i.detail.url,i.defaultPrevented&&await t,i}#i(e){return!Xe("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}};function wc(s){return yc(s)==ii.get}function yb(s,e,t,i){let n=Array.from(t).length>0?new URLSearchParams(Bb(t)):s.searchParams;return wc(e)?[nC(s,n),null]:i==Js.urlEncoded?[s,n]:[s,t]}function Bb(s){let e=[];for(let[t,i]of s)i instanceof File||e.push([t,i]);return e}function nC(s,e){let t=new URLSearchParams(Bb(e));return s.search=t.toString(),s}var kh=class{started=!1;constructor(e,t){this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}intersect=e=>{e.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}},en=class{static contentType="text/vnd.turbo-stream.html";static wrap(e){return typeof e=="string"?new this(zx(e)):e}constructor(e){this.fragment=rC(e)}};function rC(s){for(let e of s.querySelectorAll("turbo-stream")){let t=document.importNode(e,!0);for(let i of t.templateElement.content.querySelectorAll("script"))i.replaceWith(Go(i));e.replaceWith(t)}return s}var oC=100,Dh=class{#e=null;#t=null;get(e){if(this.#t&&this.#t.url===e&&this.#t.expire>Date.now())return this.#t.request}setLater(e,t,i){this.clear(),this.#e=setTimeout(()=>{t.perform(),this.set(e,t,i),this.#e=null},oC)}set(e,t,i){this.#t={url:e,request:t,expire:new Date(new Date().getTime()+i)}}clear(){this.#e&&clearTimeout(this.#e),this.#t=null}},aC=10*1e3,$r=new Dh,zr={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},dc=class s{state=zr.initialized;static confirmMethod(e){return Promise.resolve(confirm(e))}constructor(e,t,i,n=!1){let r=pC(t,i),o=hC(dC(t,i),r),a=lC(t,i),l=fC(t,i);this.delegate=e,this.formElement=t,this.submitter=i,this.fetchRequest=new Qs(this,r,o,a,t,l),this.mustRedirect=n}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=vt(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:e,requesting:t}=zr,i=ac("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof i=="string"&&!await(typeof pt.forms.confirm=="function"?pt.forms.confirm:s.confirmMethod)(i,this.formElement,this.submitter))&&this.state==e)return this.state=t,this.fetchRequest.perform()}stop(){let{stopping:e,stopped:t}=zr;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let t=cC(uc("csrf-param"))||uc("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(en.contentType)}requestStarted(e){this.state=zr.waiting,this.submitter&&pt.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),lc(this.formElement),Xe("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){$r.clear(),this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError){this.delegate.formSubmissionFailedWithResponse(this,t);return}if($r.clear(),this.requestMustRedirect(e)&&uC(t)){let i=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,i)}else this.state=zr.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){this.state=zr.stopped,this.submitter&&pt.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),cc(this.formElement),Xe("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||Ux("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function lC(s,e){let t=new FormData(s),i=e?.getAttribute("name"),n=e?.getAttribute("value");return i&&t.append(i,n||""),t}function cC(s){if(s!=null){let t=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(s));if(t){let i=t.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}function uC(s){return s.statusCode==200&&!s.redirected}function dC(s,e){let t=typeof s.action=="string"?s.action:null;return e?.hasAttribute("formaction")?e.getAttribute("formaction")||"":s.getAttribute("action")||t||""}function hC(s,e){let t=vt(s);return wc(e)&&(t.search=""),t}function pC(s,e){let t=e?.getAttribute("formmethod")||s.getAttribute("method")||"";return yc(t.toLowerCase())||ii.get}function fC(s,e){return Nb(e?.getAttribute("formenctype")||s.enctype)}var Vr=class{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return kb(this.element)}get permanentElements(){return $b(this.element)}getPermanentElementById(e){return zb(this.element,e)}getPermanentElementMapForSnapshot(e){let t={};for(let i of this.permanentElements){let{id:n}=i,r=e.getPermanentElementById(n);r&&(t[n]=[i,r])}return t}};function zb(s,e){return s.querySelector(`#${e}[data-turbo-permanent]`)}function $b(s){return s.querySelectorAll("[id][data-turbo-permanent]")}var Yo=class{started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)};submitBubbled=e=>{if(!e.defaultPrevented){let t=e.target instanceof HTMLFormElement?e.target:void 0,i=e.submitter||void 0;t&&mC(t,i)&&gC(t,i)&&this.delegate.willSubmitForm(t,i)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(t,i))}}};function mC(s,e){return(e?.getAttribute("formmethod")||s.getAttribute("method"))!="dialog"}function gC(s,e){let t=e?.getAttribute("formtarget")||s.getAttribute("target");return Db(t)}var hc=class{#e=e=>{};#t=e=>{};constructor(e,t){this.delegate=e,this.element=t}scrollToAnchor(e){let t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(Dn(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){let{isPreview:t,shouldRender:i,willRender:n,newSnapshot:r}=e,o=n;if(i)try{this.renderPromise=new Promise(u=>this.#e=u),this.renderer=e,await this.prepareToRenderSnapshot(e);let a=new Promise(u=>this.#t=u),l={resume:this.#t,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(r,l)||await a,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(r,t,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.#e(void 0),delete this.renderPromise}else o&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}},Fh=class extends hc{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Vr(this.element)}},pc=class{constructor(e,t){this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickBubbled=e=>{this.clickEventIsSignificant(e)?this.clickEvent=e:delete this.clickEvent};linkClicked=e=>{this.clickEvent&&this.clickEventIsSignificant(e)&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent};willVisit=e=>{delete this.clickEvent};clickEventIsSignificant(e){let t=e.composed?e.target?.parentElement:e.target,i=Fb(t)||t;return i instanceof Element&&i.closest("turbo-frame, html")==this.element}},fc=class{started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)};clickBubbled=e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){let t=e.composedPath&&e.composedPath()[0]||e.target,i=Fb(t);if(i&&Db(i.target)){let n=Ib(i);this.delegate.willFollowLinkToLocation(i,n,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(i,n))}}};clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}},mc=class{constructor(e,t){this.delegate=e,this.linkInterceptor=new fc(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,t){return!1}prefetchAndCacheRequestToLocation(e,t){}willFollowLinkToLocation(e,t,i){return this.delegate.willSubmitFormLinkToLocation(e,t,i)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,t){let i=document.createElement("form"),n="hidden";for(let[h,f]of t.searchParams)i.append(Object.assign(document.createElement("input"),{type:n,name:h,value:f}));let r=Object.assign(t,{search:""});i.setAttribute("data-turbo","true"),i.setAttribute("action",r.href),i.setAttribute("hidden","");let o=e.getAttribute("data-turbo-method");o&&i.setAttribute("method",o);let a=e.getAttribute("data-turbo-frame");a&&i.setAttribute("data-turbo-frame",a);let l=kn(e);l&&i.setAttribute("data-turbo-action",l);let c=e.getAttribute("data-turbo-confirm");c&&i.setAttribute("data-turbo-confirm",c),e.hasAttribute("data-turbo-stream")&&i.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,i),document.body.appendChild(i),i.addEventListener("turbo:submit-end",()=>i.remove(),{once:!0}),requestAnimationFrame(()=>i.requestSubmit())}},gc=class{static async preservingPermanentElements(e,t,i){let n=new this(e,t);n.enter(),await i(),n.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(let e in this.permanentElementMap){let[t,i]=this.permanentElementMap[e];this.delegate.enteringBardo(t,i),this.replaceNewPermanentElementWithPlaceholder(i)}}leave(){for(let e in this.permanentElementMap){let[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){let t=vC(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){let t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){this.getPlaceholderById(e.id)?.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function vC(s){let e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",s.id),e}var Xo=class{#e=null;static renderElement(e,t){}constructor(e,t,i,n=!0){this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=i,this.willRender=n,this.renderElement=this.constructor.renderElement,this.promise=new Promise((r,o)=>this.resolvingFunctions={resolve:r,reject:o})}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await gc.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){let e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}}enteringBardo(e){this.#e||e.contains(this.currentSnapshot.activeElement)&&(this.#e=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.#e)&&this.#e instanceof HTMLElement&&(this.#e.focus(),this.#e=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}},qr=class extends Xo{static renderElement(e,t){let i=document.createRange();i.selectNodeContents(e),i.deleteContents();let n=t,r=n.ownerDocument?.createRange();r&&(r.selectNodeContents(n),e.appendChild(r.extractContents()))}constructor(e,t,i,n,r,o=!0){super(t,i,n,r,o),this.delegate=e}get shouldRender(){return!0}async render(){await Wo(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await Wo(),this.focusFirstAutofocusableElement(),await Wo(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,t=bC(this.currentElement.getAttribute("data-autoscroll-block"),"end"),i=yC(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:i}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let t=Go(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function bC(s,e){return s=="end"||s=="start"||s=="center"||s=="nearest"?s:e}function yC(s,e){return s=="auto"||s=="smooth"?s:e}var wC=function(){let s=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:f,afterNodeAdded:f,beforeNodeMorphed:f,afterNodeMorphed:f,beforeNodeRemoved:f,afterNodeRemoved:f,beforeAttributeUpdated:f},head:{style:"merge",shouldPreserve:function(T){return T.getAttribute("im-preserve")==="true"},shouldReAppend:function(T){return T.getAttribute("im-re-append")==="true"},shouldRemove:f,afterHeadMorphed:f}};function t(T,F,_={}){T instanceof Document&&(T=T.documentElement),typeof F=="string"&&(F=R(F));let J=$(F),ie=v(T,J,_);return i(T,J,ie)}function i(T,F,_){if(_.head.block){let J=T.querySelector("head"),ie=F.querySelector("head");if(J&&ie){let le=h(ie,J,_);Promise.all(le).then(function(){i(T,F,Object.assign(_,{head:{block:!1,ignore:!0}}))});return}}if(_.morphStyle==="innerHTML")return o(F,T,_),T.children;if(_.morphStyle==="outerHTML"||_.morphStyle==null){let J=Z(F,T,_),ie=J?.previousSibling,le=J?.nextSibling,ve=r(T,J,_);return J?U(ie,ve,le):[]}else throw"Do not understand how to morph style "+_.morphStyle}function n(T,F){return F.ignoreActiveValue&&T===document.activeElement&&T!==document.body}function r(T,F,_){if(!(_.ignoreActive&&T===document.activeElement))return F==null?_.callbacks.beforeNodeRemoved(T)===!1?T:(T.remove(),_.callbacks.afterNodeRemoved(T),null):S(T,F)?(_.callbacks.beforeNodeMorphed(T,F)===!1||(T instanceof HTMLHeadElement&&_.head.ignore||(T instanceof HTMLHeadElement&&_.head.style!=="morph"?h(F,T,_):(l(F,T,_),n(T,_)||o(F,T,_))),_.callbacks.afterNodeMorphed(T,F)),T):_.callbacks.beforeNodeRemoved(T)===!1||_.callbacks.beforeNodeAdded(F)===!1?T:(T.parentElement.replaceChild(F,T),_.callbacks.afterNodeAdded(F),_.callbacks.afterNodeRemoved(T),F)}function o(T,F,_){let J=T.firstChild,ie=F.firstChild,le;for(;J;){if(le=J,J=le.nextSibling,ie==null){if(_.callbacks.beforeNodeAdded(le)===!1)return;F.appendChild(le),_.callbacks.afterNodeAdded(le),he(_,le);continue}if(w(le,ie,_)){r(ie,le,_),ie=ie.nextSibling,he(_,le);continue}let ve=k(T,F,le,ie,_);if(ve){ie=A(ie,ve,_),r(ve,le,_),he(_,le);continue}let Ae=D(T,F,le,ie,_);if(Ae){ie=A(ie,Ae,_),r(Ae,le,_),he(_,le);continue}if(_.callbacks.beforeNodeAdded(le)===!1)return;F.insertBefore(le,ie),_.callbacks.afterNodeAdded(le),he(_,le)}for(;ie!==null;){let ve=ie;ie=ie.nextSibling,ue(ve,_)}}function a(T,F,_,J){return T==="value"&&J.ignoreActiveValue&&F===document.activeElement?!0:J.callbacks.beforeAttributeUpdated(T,F,_)===!1}function l(T,F,_){let J=T.nodeType;if(J===1){let ie=T.attributes,le=F.attributes;for(let ve of ie)a(ve.name,F,"update",_)||F.getAttribute(ve.name)!==ve.value&&F.setAttribute(ve.name,ve.value);for(let ve=le.length-1;0<=ve;ve--){let Ae=le[ve];a(Ae.name,F,"remove",_)||T.hasAttribute(Ae.name)||F.removeAttribute(Ae.name)}}(J===8||J===3)&&F.nodeValue!==T.nodeValue&&(F.nodeValue=T.nodeValue),n(F,_)||u(T,F,_)}function c(T,F,_,J){if(T[_]!==F[_]){let ie=a(_,F,"update",J);ie||(F[_]=T[_]),T[_]?ie||F.setAttribute(_,T[_]):a(_,F,"remove",J)||F.removeAttribute(_)}}function u(T,F,_){if(T instanceof HTMLInputElement&&F instanceof HTMLInputElement&&T.type!=="file"){let J=T.value,ie=F.value;c(T,F,"checked",_),c(T,F,"disabled",_),T.hasAttribute("value")?J!==ie&&(a("value",F,"update",_)||(F.setAttribute("value",J),F.value=J)):a("value",F,"remove",_)||(F.value="",F.removeAttribute("value"))}else if(T instanceof HTMLOptionElement)c(T,F,"selected",_);else if(T instanceof HTMLTextAreaElement&&F instanceof HTMLTextAreaElement){let J=T.value,ie=F.value;if(a("value",F,"update",_))return;J!==ie&&(F.value=J),F.firstChild&&F.firstChild.nodeValue!==J&&(F.firstChild.nodeValue=J)}}function h(T,F,_){let J=[],ie=[],le=[],ve=[],Ae=_.head.style,De=new Map;for(let _e of T.children)De.set(_e.outerHTML,_e);for(let _e of F.children){let Qe=De.has(_e.outerHTML),Ge=_.head.shouldReAppend(_e),G=_.head.shouldPreserve(_e);Qe||G?Ge?ie.push(_e):(De.delete(_e.outerHTML),le.push(_e)):Ae==="append"?Ge&&(ie.push(_e),ve.push(_e)):_.head.shouldRemove(_e)!==!1&&ie.push(_e)}ve.push(...De.values());let qe=[];for(let _e of ve){let Qe=document.createRange().createContextualFragment(_e.outerHTML).firstChild;if(_.callbacks.beforeNodeAdded(Qe)!==!1){if(Qe.href||Qe.src){let Ge=null,G=new Promise(function(Te){Ge=Te});Qe.addEventListener("load",function(){Ge()}),qe.push(G)}F.appendChild(Qe),_.callbacks.afterNodeAdded(Qe),J.push(Qe)}}for(let _e of ie)_.callbacks.beforeNodeRemoved(_e)!==!1&&(F.removeChild(_e),_.callbacks.afterNodeRemoved(_e));return _.head.afterHeadMorphed(F,{added:J,kept:le,removed:ie}),qe}function f(){}function p(T){let F={};return Object.assign(F,e),Object.assign(F,T),F.callbacks={},Object.assign(F.callbacks,e.callbacks),Object.assign(F.callbacks,T.callbacks),F.head={},Object.assign(F.head,e.head),Object.assign(F.head,T.head),F}function v(T,F,_){return _=p(_),{target:T,newContent:F,config:_,morphStyle:_.morphStyle,ignoreActive:_.ignoreActive,ignoreActiveValue:_.ignoreActiveValue,idMap:H(T,F),deadIds:new Set,callbacks:_.callbacks,head:_.head}}function w(T,F,_){return T==null||F==null?!1:T.nodeType===F.nodeType&&T.tagName===F.tagName?T.id!==""&&T.id===F.id?!0:se(_,T,F)>0:!1}function S(T,F){return T==null||F==null?!1:T.nodeType===F.nodeType&&T.tagName===F.tagName}function A(T,F,_){for(;T!==F;){let J=T;T=T.nextSibling,ue(J,_)}return he(_,F),F.nextSibling}function k(T,F,_,J,ie){let le=se(ie,_,F),ve=null;if(le>0){let Ae=J,De=0;for(;Ae!=null;){if(w(_,Ae,ie))return Ae;if(De+=se(ie,Ae,T),De>le)return null;Ae=Ae.nextSibling}}return ve}function D(T,F,_,J,ie){let le=J,ve=_.nextSibling,Ae=0;for(;le!=null;){if(se(ie,le,T)>0)return null;if(S(_,le))return le;if(S(ve,le)&&(Ae++,ve=ve.nextSibling,Ae>=2))return null;le=le.nextSibling}return le}function R(T){let F=new DOMParser,_=T.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(_.match(/<\/html>/)||_.match(/<\/head>/)||_.match(/<\/body>/)){let J=F.parseFromString(T,"text/html");if(_.match(/<\/html>/))return J.generatedByIdiomorph=!0,J;{let ie=J.firstChild;return ie?(ie.generatedByIdiomorph=!0,ie):null}}else{let ie=F.parseFromString("<body><template>"+T+"</template></body>","text/html").body.querySelector("template").content;return ie.generatedByIdiomorph=!0,ie}}function $(T){if(T==null)return document.createElement("div");if(T.generatedByIdiomorph)return T;if(T instanceof Node){let F=document.createElement("div");return F.append(T),F}else{let F=document.createElement("div");for(let _ of[...T])F.append(_);return F}}function U(T,F,_){let J=[],ie=[];for(;T!=null;)J.push(T),T=T.previousSibling;for(;J.length>0;){let le=J.pop();ie.push(le),F.parentElement.insertBefore(le,F)}for(ie.push(F);_!=null;)J.push(_),ie.push(_),_=_.nextSibling;for(;J.length>0;)F.parentElement.insertBefore(J.pop(),F.nextSibling);return ie}function Z(T,F,_){let J;J=T.firstChild;let ie=J,le=0;for(;J;){let ve=K(J,F,_);ve>le&&(ie=J,le=ve),J=J.nextSibling}return ie}function K(T,F,_){return S(T,F)?.5+se(_,T,F):0}function ue(T,F){he(F,T),F.callbacks.beforeNodeRemoved(T)!==!1&&(T.remove(),F.callbacks.afterNodeRemoved(T))}function X(T,F){return!T.deadIds.has(F)}function oe(T,F,_){return(T.idMap.get(_)||s).has(F)}function he(T,F){let _=T.idMap.get(F)||s;for(let J of _)T.deadIds.add(J)}function se(T,F,_){let J=T.idMap.get(F)||s,ie=0;for(let le of J)X(T,le)&&oe(T,le,_)&&++ie;return ie}function Q(T,F){let _=T.parentElement,J=T.querySelectorAll("[id]");for(let ie of J){let le=ie;for(;le!==_&&le!=null;){let ve=F.get(le);ve==null&&(ve=new Set,F.set(le,ve)),ve.add(ie.id),le=le.parentElement}}}function H(T,F){let _=new Map;return Q(T,_),Q(F,_),_}return{morph:t,defaults:e}}();function up(s,e,{callbacks:t,...i}={}){wC.morph(s,e,{...i,callbacks:new Ih(t)})}function Hb(s,e){up(s,e.children,{morphStyle:"innerHTML"})}var Ih=class{#e;constructor({beforeNodeMorphed:e}={}){this.#e=e||(()=>!0)}beforeNodeAdded=e=>!(e.id&&e.hasAttribute("data-turbo-permanent")&&document.getElementById(e.id));beforeNodeMorphed=(e,t)=>{if(e instanceof Element)return!e.hasAttribute("data-turbo-permanent")&&this.#e(e,t)?!Xe("turbo:before-morph-element",{cancelable:!0,target:e,detail:{currentElement:e,newElement:t}}).defaultPrevented:!1};beforeAttributeUpdated=(e,t,i)=>!Xe("turbo:before-morph-attribute",{cancelable:!0,target:t,detail:{attributeName:e,mutationType:i}}).defaultPrevented;beforeNodeRemoved=e=>this.beforeNodeMorphed(e);afterNodeMorphed=(e,t)=>{e instanceof Element&&Xe("turbo:morph-element",{target:e,detail:{currentElement:e,newElement:t}})}},Rh=class extends qr{static renderElement(e,t){Xe("turbo:before-frame-morph",{target:e,detail:{currentElement:e,newElement:t}}),Hb(e,t)}async preservingPermanentElements(e){return await e()}},Nh=class s{static animationDuration=300;static get defaultCSS(){return Mb`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${s.animationDuration}ms ease-out,
          opacity ${s.animationDuration/2}ms ${s.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,s.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,s.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let e=document.createElement("style");e.type="text/css",e.textContent=s.defaultCSS;let t=Lb();return t&&(e.nonce=t),e}createProgressElement(){let e=document.createElement("div");return e.className="turbo-progress-bar",e}},Bh=class extends Vr{detailsByOuterHTML=this.children.filter(e=>!TC(e)).map(e=>PC(e)).reduce((e,t)=>{let{outerHTML:i}=t,n=i in e?e[i]:{type:EC(t),tracked:SC(t),elements:[]};return{...e,[i]:{...n,elements:[...n.elements,t]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,t){return Object.keys(this.detailsByOuterHTML).filter(i=>!(i in t.detailsByOuterHTML)).map(i=>this.detailsByOuterHTML[i]).filter(({type:i})=>i==e).map(({elements:[i]})=>i)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,t)=>{let{type:i,tracked:n,elements:r}=this.detailsByOuterHTML[t];return i==null&&!n?[...e,...r]:r.length>1?[...e,...r.slice(1)]:e},[])}getMetaValue(e){let t=this.findMetaElementByName(e);return t?t.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((t,i)=>{let{elements:[n]}=this.detailsByOuterHTML[i];return CC(n,e)?n:t},void 0|void 0)}};function EC(s){if(AC(s))return"script";if(xC(s))return"stylesheet"}function SC(s){return s.getAttribute("data-turbo-track")=="reload"}function AC(s){return s.localName=="script"}function TC(s){return s.localName=="noscript"}function xC(s){let e=s.localName;return e=="style"||e=="link"&&s.getAttribute("rel")=="stylesheet"}function CC(s,e){return s.localName=="meta"&&s.getAttribute("name")==e}function PC(s){return s.hasAttribute("nonce")&&s.setAttribute("nonce",""),s}var bi=class s extends Vr{static fromHTMLString(e=""){return this.fromDocument(_b(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:t,head:i}){return new this(e,t,new Bh(i))}constructor(e,t,i){super(t),this.documentElement=e,this.headSnapshot=i}clone(){let e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),i=e.querySelectorAll("select");for(let[n,r]of t.entries()){let o=i[n];for(let a of o.selectedOptions)a.selected=!1;for(let a of r.selectedOptions)o.options[a.index].selected=!0}for(let n of e.querySelectorAll('input[type="password"]'))n.value="";return new s(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){let e=this.getSetting("root")??"/";return vt(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},zh=class{#e=!1;#t=Promise.resolve();renderChange(e,t){return e&&this.viewTransitionsAvailable&&!this.#e?(this.#e=!0,this.#t=this.#t.then(async()=>{await document.startViewTransition(t).finished})):this.#t=this.#t.then(t),this.#t}get viewTransitionsAvailable(){return document.startViewTransition}},_C={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},oc={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},fs={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},Ur={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},MC={advance:"forward",restore:"back",replace:"none"},$h=class{identifier=Zs();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=fs.initialized;viewTransitioner=new zh;constructor(e,t,i,n={}){this.delegate=e,this.location=t,this.restorationIdentifier=i||Zs();let{action:r,historyChanged:o,referrer:a,snapshot:l,snapshotHTML:c,response:u,visitCachedSnapshot:h,willRender:f,updateHistory:p,shouldCacheSnapshot:v,acceptsStreamResponse:w,direction:S}={..._C,...n};this.action=r,this.historyChanged=o,this.referrer=a,this.snapshot=l,this.snapshotHTML=c,this.response=u,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=h,this.willRender=f,this.updateHistory=p,this.scrolled=!f,this.shouldCacheSnapshot=v,this.acceptsStreamResponse=w,this.direction=S||MC[r]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==fs.initialized&&(this.recordTimingMetric(oc.visitStart),this.state=fs.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==fs.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=fs.canceled)}complete(){this.state==fs.started&&(this.recordTimingMetric(oc.visitEnd),this.adapter.visitCompleted(this),this.state=fs.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==fs.started&&(this.state=fs.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let e=this.location.href===this.referrer?.href?"replace":this.action,t=Ob(e);this.history.update(t,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Qs(this,ii.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(oc.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:t}=e;wb(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(oc.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:t}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,wb(e)&&t!=null){let i=bi.fromHTMLString(t);await this.renderPageSnapshot(i,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(bi.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!Dn(this.location)||e.hasAnchor(Dn(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return bi.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let t=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,t),this.adapter.visitRendered(this),t||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(en.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){let i=await t.responseHTML,{redirected:n,statusCode:r}=t;i==null?this.recordResponse({statusCode:Ur.contentTypeMismatch,redirected:n}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:r,responseHTML:i,redirected:n}))}async requestFailedWithResponse(e,t){let i=await t.responseHTML,{redirected:n,statusCode:r}=t;i==null?this.recordResponse({statusCode:Ur.contentTypeMismatch,redirected:n}):this.recordResponse({statusCode:r,responseHTML:i,redirected:n})}requestErrored(e,t){this.recordResponse({statusCode:Ur.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=Dn(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),await new Promise(t=>{this.frame=document.visibilityState==="hidden"?setTimeout(()=>t(),0):requestAnimationFrame(()=>t())}),await e(),delete this.frame}async renderPageSnapshot(e,t){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,t,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function wb(s){return s>=200&&s<300}var Hh=class{progressBar=new Nh;constructor(e){this.session=e}visitProposedToLocation(e,t){Ks(e,this.navigator.rootLocation)?this.navigator.startVisit(e,t?.restorationIdentifier||Zs(),t):window.location.href=e.toString()}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case Ur.networkFailure:case Ur.timeoutFailure:case Ur.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}showProgressBar=()=>{this.progressBar.show()};reload(e){Xe("turbo:reload",{detail:e}),window.location.href=this.location?.toString()||window.location.href}get navigator(){return this.session.navigator}},Uh=class{selector="[data-turbo-temporary]";deprecatedSelector="[data-turbo-cache=false]";started=!1;start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}removeTemporaryElements=e=>{for(let t of this.temporaryElements)t.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}},jh=class{constructor(e,t){this.session=e,this.element=t,this.linkInterceptor=new pc(this,t),this.formSubmitObserver=new Yo(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,i){return this.#t(e)}linkClickIntercepted(e,t,i){let n=this.#i(e);n&&n.delegate.linkClickIntercepted(e,t,i)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&this.#e(e,t)&&this.#t(e,t)}formSubmitted(e,t){let i=this.#i(e,t);i&&i.delegate.formSubmitted(e,t)}#e(e,t){let i=lp(e,t),n=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),r=vt(n?.content??"/");return this.#t(e,t)&&Ks(i,r)}#t(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){let n=this.#i(e,t);return n?n!=e.closest("turbo-frame"):!1}else return!1}#i(e,t){let i=t?.getAttribute("data-turbo-frame")||e.getAttribute("data-turbo-frame");if(i&&i!="_top"){let n=this.element.querySelector(`#${i}:not([disabled])`);if(n instanceof yi)return n}}},Vh=class{location;restorationIdentifier=Zs();restorationData={};started=!1;pageLoaded=!1;currentIndex=0;constructor(e){this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,i=Zs()){e===history.pushState&&++this.currentIndex;let n={turbo:{restorationIdentifier:i,restorationIndex:this.currentIndex}};e.call(history,n,"",t.href),this.location=t,this.restorationIdentifier=i}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:t}=this,i=this.restorationData[t];this.restorationData[t]={...i,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}onPopState=e=>{if(this.shouldHandlePopState()){let{turbo:t}=e.state||{};if(t){this.location=new URL(window.location.href);let{restorationIdentifier:i,restorationIndex:n}=t;this.restorationIdentifier=i;let r=n>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,i,r),this.currentIndex=n}}};onPageLoad=async e=>{await $x(),this.pageLoaded=!0};shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},qh=class{started=!1;#e=null;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",this.#t,{once:!0}):this.#t())}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",this.#i,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",this.#l,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",this.#a,!0),this.started=!1)}#t=()=>{this.eventTarget.addEventListener("mouseenter",this.#i,{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",this.#l,{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",this.#a,!0),this.started=!0};#i=e=>{if(uc("turbo-prefetch")==="false")return;let t=e.target;if(t.matches&&t.matches("a[href]:not([target^=_]):not([download])")&&this.#u(t)){let n=t,r=Ib(n);if(this.delegate.canPrefetchRequestToLocation(n,r)){this.#e=n;let o=new Qs(this,ii.get,r,new URLSearchParams,t);$r.setLater(r.toString(),o,this.#s)}}};#l=e=>{e.target===this.#e&&this.#o()};#o=()=>{$r.clear(),this.#e=null};#a=e=>{if(e.target.tagName!=="FORM"&&e.detail.fetchOptions.method==="GET"){let t=$r.get(e.detail.url.toString());t&&(e.detail.fetchRequest=t),$r.clear()}};prepareRequest(e){let t=e.target;e.headers["X-Sec-Purpose"]="prefetch";let i=t.closest("turbo-frame"),n=t.getAttribute("data-turbo-frame")||i?.getAttribute("target")||i?.id;n&&n!=="_top"&&(e.headers["Turbo-Frame"]=n)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}get#s(){return Number(uc("turbo-prefetch-cache-time"))||aC}#u(e){return!(!e.getAttribute("href")||OC(e)||LC(e)||kC(e)||DC(e)||IC(e))}},OC=s=>s.origin!==document.location.origin||!["http:","https:"].includes(s.protocol)||s.hasAttribute("target"),LC=s=>s.pathname+s.search===document.location.pathname+document.location.search||s.href.startsWith("#"),kC=s=>{if(s.getAttribute("data-turbo-prefetch")==="false"||s.getAttribute("data-turbo")==="false")return!0;let e=Hr(s,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},DC=s=>{let e=s.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||FC(s)||s.hasAttribute("data-turbo-confirm")||s.hasAttribute("data-turbo-stream"))},FC=s=>s.hasAttribute("data-remote")||s.hasAttribute("data-behavior")||s.hasAttribute("data-confirm")||s.hasAttribute("data-method"),IC=s=>Xe("turbo:before-prefetch",{target:s,cancelable:!0}).defaultPrevented,Wh=class{constructor(e){this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&this.delegate.visitProposedToLocation(e,t)}startVisit(e,t,i={}){this.stop(),this.currentVisit=new $h(this,vt(e),t,{referrer:this.location,...i}),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new dc(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){let i=await t.responseHTML;if(i){let n=e.isSafe;n||this.view.clearSnapshotCache();let{statusCode:r,redirected:o}=t,l={action:this.#e(e,t),shouldCacheSnapshot:n,response:{statusCode:r,responseHTML:i,redirected:o}};this.proposeVisit(t.location,l)}}}async formSubmissionFailedWithResponse(e,t){let i=await t.responseHTML;if(i){let n=bi.fromHTMLString(i);t.serverError?await this.view.renderError(n,this.currentVisit):await this.view.renderPage(n,!1,!0,this.currentVisit),n.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e),delete this.currentVisit}locationWithActionIsSamePage(e,t){let i=Dn(e),n=Dn(this.view.lastRenderedLocation),r=t==="restore"&&typeof i>"u";return t!=="replace"&&Oh(e)===Oh(this.view.lastRenderedLocation)&&(r||i!=null&&i!==n)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#e(e,t){let{submitter:i,formElement:n}=e;return kn(i,n)||this.#t(t)}#t(e){return e.redirected&&e.location.href===this.location?.href?"replace":"advance"}},On={initial:0,loading:1,interactive:2,complete:3},Gh=class{stage=On.initial;started=!1;constructor(e){this.delegate=e}start(){this.started||(this.stage==On.initial&&(this.stage=On.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}interpretReadyState=()=>{let{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()};pageIsInteractive(){this.stage==On.loading&&(this.stage=On.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==On.interactive&&(this.stage=On.complete,this.delegate.pageLoaded())}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}},Yh=class{started=!1;constructor(e){this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(e){this.delegate.scrollPositionChanged(e)}},Xh=class{render({fragment:e}){gc.preservingPermanentElements(this,RC(e),()=>{NC(e,()=>{BC(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function RC(s){let e=$b(document.documentElement),t={};for(let i of e){let{id:n}=i;for(let r of s.querySelectorAll("turbo-stream")){let o=zb(r.templateElement.content,n);o&&(t[n]=[i,o])}}return t}async function NC(s,e){let t=`turbo-stream-autofocus-${Zs()}`,i=s.querySelectorAll("turbo-stream"),n=zC(i),r=null;if(n&&(n.id?r=n.id:r=t,n.id=r),e(),await Wo(),(document.activeElement==null||document.activeElement==document.body)&&r){let a=document.getElementById(r);ap(a)&&a.focus(),a&&a.id==t&&a.removeAttribute("id")}}async function BC(s){let[e,t]=await Wx(s,()=>document.activeElement),i=e&&e.id;if(i){let n=document.getElementById(i);ap(n)&&n!=t&&n.focus()}}function zC(s){for(let e of s){let t=kb(e.templateElement.content);if(t)return t}return null}var Kh=class{sources=new Set;#e=!1;constructor(e){this.delegate=e}start(){this.#e||(this.#e=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.#e&&(this.#e=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}inspectFetchResponse=e=>{let t=$C(e);t&&HC(t)&&(e.preventDefault(),this.receiveMessageResponse(t))};receiveMessageEvent=e=>{this.#e&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)};async receiveMessageResponse(e){let t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(en.wrap(e))}};function $C(s){let e=s.detail?.fetchResponse;if(e instanceof jr)return e}function HC(s){return(s.contentType??"").startsWith(en.contentType)}var Jh=class extends Xo{static renderElement(e,t){let{documentElement:i,body:n}=document;i.replaceChild(t,n)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let t=e.parentNode;if(t){let i=Go(e);t.replaceChild(i,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},Wr=class extends Xo{static renderElement(e,t){document.body&&t instanceof HTMLBodyElement?document.body.replaceWith(t):document.documentElement.appendChild(t)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){this.#e(),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#e(){let{documentElement:e}=this.currentSnapshot,{lang:t}=this.newSnapshot;t?e.setAttribute("lang",t):e.removeAttribute("lang")}async mergeHead(){let e=this.mergeProvisionalElements(),t=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await t,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let t of this.newHeadStylesheetElements)e.push(jx(t)),document.head.appendChild(t);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(Go(e))}removeUnusedDynamicStylesheetElements(){for(let e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let t of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(t,e)||document.head.removeChild(t);for(let t of e)document.head.appendChild(t)}isCurrentElementInElementList(e,t){for(let[i,n]of t.entries()){if(e.tagName=="TITLE"){if(n.tagName!="TITLE")continue;if(e.innerHTML==n.innerHTML)return t.splice(i,1),!0}if(n.isEqualNode(e))return t.splice(i,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let t=Go(e);e.replaceWith(t)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},Zh=class extends Wr{static renderElement(e,t){up(e,t,{callbacks:{beforeNodeMorphed:i=>!Eb(i)}});for(let i of e.querySelectorAll("turbo-frame"))Eb(i)&&i.reload();Xe("turbo:morph",{detail:{currentElement:e,newElement:t}})}async preservingPermanentElements(e){return await e()}get renderMethod(){return"morph"}get shouldAutofocus(){return!1}};function Eb(s){return s instanceof yi&&s.src&&s.refresh==="morph"&&!s.closest("[data-turbo-permanent]")}var Qh=class{keys=[];snapshots={};constructor(e){this.size=e}has(e){return rc(e)in this.snapshots}get(e){if(this.has(e)){let t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[rc(e)]}write(e,t){this.snapshots[rc(e)]=t}touch(e){let t=rc(e),i=this.keys.indexOf(t);i>-1&&this.keys.splice(i,1),this.keys.unshift(t),this.trim()}trim(){for(let e of this.keys.splice(this.size))delete this.snapshots[e]}},ep=class extends hc{snapshotCache=new Qh(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,t=!1,i=!0,n){let o=this.isPageRefresh(n)&&this.snapshot.shouldMorphPage?Zh:Wr,a=new o(this.snapshot,e,t,i);return a.shouldRender?n?.changeHistory():this.forceReloaded=!0,this.render(a)}renderError(e,t){t?.changeHistory();let i=new Jh(this.snapshot,e,!1);return this.render(i)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:t}=this;await Pb();let i=e.clone();return this.snapshotCache.put(t,i),i}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action==="replace"}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return bi.fromElement(this.element)}},tp=class{selector="a[data-turbo-preload]";constructor(e,t){this.delegate=e,this.snapshotCache=t}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this.#e):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",this.#e)}preloadOnLoadLinksForView(e){for(let t of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(t)&&this.preloadURL(t)}async preloadURL(e){let t=new URL(e.href);if(this.snapshotCache.has(t))return;await new Qs(this,ii.get,t,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,t){try{let i=await t.responseHTML,n=bi.fromHTMLString(i);this.snapshotCache.put(e.url,n)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}#e=()=>{this.preloadOnLoadLinksForView(document.body)}},ip=class{constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.#e("")}exemptPageFromCache(){this.#e("no-cache")}exemptPageFromPreview(){this.#e("no-preview")}#e(e){qx("turbo-cache-control",e)}},sp=class{navigator=new Wh(this);history=new Vh(this);view=new ep(this,document.documentElement);adapter=new Hh(this);pageObserver=new Gh(this);cacheObserver=new Uh;linkPrefetchObserver=new qh(this,document);linkClickObserver=new fc(this,window);formSubmitObserver=new Yo(this,document);scrollObserver=new Yh(this);streamObserver=new Kh(this);formLinkClickObserver=new mc(this,document.documentElement);frameRedirector=new jh(this,document.documentElement);streamMessageRenderer=new Xh;cache=new ip(this);enabled=!0;started=!1;#e=150;constructor(e){this.recentRequests=e,this.preloader=new tp(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){let i=t.frame?document.getElementById(t.frame):null;if(i instanceof yi){let n=t.action||kn(i);i.delegate.proposeVisitIfNavigatedWithAction(i,n),i.src=e.toString()}else this.navigator.proposeVisit(vt(e),t)}refresh(e,t){!(t&&this.recentRequests.has(t))&&!this.navigator.currentVisit&&this.visit(e,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(en.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=e}set progressBarDelay(e){pt.drive.progressBarDelay=e}get progressBarDelay(){return pt.drive.progressBarDelay}set drive(e){pt.drive.enabled=e}get drive(){return pt.drive.enabled}set formMode(e){pt.forms.mode=e}get formMode(){return pt.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#e}set pageRefreshDebouncePeriod(e){this.refresh=Gx(this.debouncedRefresh.bind(this),e),this.#e=e}shouldPreloadLink(e){let t=e.hasAttribute("data-turbo-method"),i=e.hasAttribute("data-turbo-stream"),n=e.getAttribute("data-turbo-frame"),r=n=="_top"?null:document.getElementById(n)||Hr(e,"turbo-frame:not([disabled])");if(t||i||r instanceof yi)return!1;{let o=new URL(e.href);return this.elementIsNavigatable(e)&&Ks(o,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,t,i){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0,direction:i}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&Ks(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,t){return this.elementIsNavigatable(e)&&Ks(t,this.snapshot.rootLocation)}willFollowLinkToLocation(e,t,i){return this.elementIsNavigatable(e)&&Ks(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,i)}followedLinkToLocation(e,t){let i=this.getActionForLink(e),n=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:i,acceptsStreamResponse:n})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){Sb(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||(lc(document.documentElement),this.view.markVisitDirection(e.direction)),Sb(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),cc(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){let i=lp(e,t);return this.submissionIsNavigatable(e,t)&&Ks(vt(i),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){this.navigator.currentVisit?.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){let i=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:n,detail:{render:r}}=i;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!n}viewRenderedSnapshot(e,t,i){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(i)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,i){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,i).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,i){return Xe("turbo:click",{target:e,detail:{url:t.href,originalEvent:i},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return Xe("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return Xe("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return Xe("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return Xe("turbo:before-render",{detail:{newBody:e,...t},cancelable:!0})}notifyApplicationAfterRender(e){return Xe("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return Xe("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return Xe("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return Xe("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(pt.forms.mode=="off")return!1;{let i=t?this.elementIsNavigatable(t):!0;return pt.forms.mode=="optin"?i&&e.closest('[data-turbo="true"]')!=null:i&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let t=Hr(e,"[data-turbo]"),i=Hr(e,"turbo-frame");return pt.drive.enabled||i?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return kn(e)||"advance"}get snapshot(){return this.view.snapshot}};function Sb(s){Object.defineProperties(s,UC)}var UC={absoluteURL:{get(){return this.toString()}}},tt=new sp(Rb),{cache:Ub,navigator:jb}=tt;function dp(){tt.start()}function Vb(s){tt.registerAdapter(s)}function qb(s,e){tt.visit(s,e)}function Ko(s){tt.connectStreamSource(s)}function Jo(s){tt.disconnectStreamSource(s)}function Wb(s){tt.renderStreamMessage(s)}function Gb(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),tt.clearCache()}function Yb(s){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),pt.drive.progressBarDelay=s}function Xb(s){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),pt.forms.confirm=s}function Kb(s){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),pt.forms.mode=s}var jC=Object.freeze({__proto__:null,navigator:jb,session:tt,cache:Ub,PageRenderer:Wr,PageSnapshot:bi,FrameRenderer:qr,fetch:cp,config:pt,start:dp,registerAdapter:Vb,visit:qb,connectStreamSource:Ko,disconnectStreamSource:Jo,renderStreamMessage:Wb,clearCache:Gb,setProgressBarDelay:Yb,setConfirmMethod:Xb,setFormMode:Kb}),np=class extends Error{},rp=class{fetchResponseLoaded=e=>Promise.resolve();#e=null;#t=()=>{};#i=!1;#l=!1;#o=new Set;#a=!1;action=null;constructor(e){this.element=e,this.view=new Fh(this,this.element),this.appearanceObserver=new kh(this,this.element),this.formLinkClickObserver=new mc(this,this.element),this.linkInterceptor=new pc(this,this.element),this.restorationIdentifier=Zs(),this.formSubmitObserver=new Yo(this,this.element)}connect(){this.#i||(this.#i=!0,this.loadingStyle==Ln.lazy?this.appearanceObserver.start():this.#s(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.#i&&(this.#i=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==Ln.eager&&this.#s()}sourceURLChanged(){this.#w("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Ln.eager||this.#l)&&this.#s())}sourceURLReloaded(){let{refresh:e,src:t}=this.element;return this.#a=t&&e==="morph",this.element.removeAttribute("complete"),this.element.src=null,this.element.src=t,this.element.loaded}loadingStyleChanged(){this.loadingStyle==Ln.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.#s())}async#s(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.#n(vt(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#l=!0)}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let t=await e.responseHTML;if(t){let i=_b(t);bi.fromDocument(i).isVisitable?await this.#u(e,i):await this.#r(e)}}finally{this.#a=!1,this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,kn(e)),this.#s()}willSubmitFormLinkToLocation(e){return this.#p(e)}submittedFormLinkToLocation(e,t,i){let n=this.#d(e);n&&i.setAttribute("data-turbo-frame",n.id)}shouldInterceptLinkClick(e,t,i){return this.#p(e)}linkClickIntercepted(e,t){this.#m(e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&this.#p(e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new dc(this,e,t);let{fetchRequest:i}=this.formSubmission;this.prepareRequest(i),this.formSubmission.start()}prepareRequest(e){e.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&e.acceptResponseType(en.contentType)}requestStarted(e){lc(this.element)}requestPreventedHandlingResponse(e,t){this.#t()}async requestSucceededWithResponse(e,t){await this.loadResponse(t),this.#t()}async requestFailedWithResponse(e,t){await this.loadResponse(t),this.#t()}requestErrored(e,t){console.error(t),this.#t()}requestFinished(e){cc(this.element)}formSubmissionStarted({formElement:e}){lc(e,this.#d(e))}formSubmissionSucceededWithResponse(e,t){let i=this.#d(e.formElement,e.submitter);i.delegate.proposeVisitIfNavigatedWithAction(i,kn(e.submitter,e.formElement,i)),i.delegate.loadResponse(t),e.isSafe||tt.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),tt.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){cc(e,this.#d(e))}allowsImmediateRender({element:e},t){let i=Xe("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...t},cancelable:!0}),{defaultPrevented:n,detail:{render:r}}=i;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!n}viewRenderedSnapshot(e,t,i){}preloadOnLoadLinksForView(e){tt.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}visitCachedSnapshot=({element:e})=>{let t=e.querySelector("#"+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement};async#u(e,t){let i=await this.extractForeignFrameElement(t.body),n=this.#a?Rh:qr;if(i){let r=new Vr(i),o=new n(this,this.view.snapshot,r,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(o),this.complete=!0,tt.frameRendered(e,this.element),tt.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else this.#h(e)&&this.#c(e)}async#n(e){let t=new Qs(this,ii.get,e,new URLSearchParams,this.element);return this.#e?.cancel(),this.#e=t,new Promise(i=>{this.#t=()=>{this.#t=()=>{},this.#e=null,i()},t.perform()})}#m(e,t,i){let n=this.#d(e,i);n.delegate.proposeVisitIfNavigatedWithAction(n,kn(i,e,n)),this.#b(e,()=>{n.src=t})}proposeVisitIfNavigatedWithAction(e,t=null){if(this.action=t,this.action){let i=bi.fromElement(e).clone(),{visitCachedSnapshot:n}=e.delegate;e.delegate.fetchResponseLoaded=async r=>{if(e.src){let{statusCode:o,redirected:a}=r,l=await r.responseHTML,u={response:{statusCode:o,redirected:a,responseHTML:l},visitCachedSnapshot:n,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:i};this.action&&(u.action=this.action),tt.visit(e.src,u)}}}}changeHistory(){if(this.action){let e=Ob(this.action);tt.history.update(e,vt(this.element.src||""),this.restorationIdentifier)}}async#r(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#v(e.response)}#h(e){this.element.setAttribute("complete","");let t=e.response,i=async(r,o)=>{r instanceof Response?this.#v(r):tt.visit(r,o)};return!Xe("turbo:frame-missing",{target:this.element,detail:{response:t,visit:i},cancelable:!0}).defaultPrevented}#c(e){this.view.missing(),this.#g(e)}#g(e){let t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new np(t)}async#v(e){let t=new jr(e),i=await t.responseHTML,{location:n,redirected:r,statusCode:o}=t;return tt.visit(n,{response:{redirected:r,statusCode:o,responseHTML:i}})}#d(e,t){let i=ac("data-turbo-frame",t,e)||this.element.getAttribute("target");return Ab(i)??this.element}async extractForeignFrameElement(e){let t,i=CSS.escape(this.id);try{if(t=Tb(e.querySelector(`turbo-frame#${i}`),this.sourceURL),t)return t;if(t=Tb(e.querySelector(`turbo-frame[src][recurse~=${i}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(n){return console.error(n),new yi}return null}#y(e,t){let i=lp(e,t);return Ks(vt(i),this.rootLocation)}#p(e,t){let i=ac("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.#y(e,t)||!this.enabled||i=="_top")return!1;if(i){let n=Ab(i);if(n)return!n.disabled}return!(!tt.elementIsNavigatable(e)||t&&!tt.elementIsNavigatable(t))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.#f("src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#t()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&this.#i}get rootLocation(){let t=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return vt(t)}#w(e){return this.#o.has(e)}#f(e,t){this.#o.add(e),t(),this.#o.delete(e)}#b(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement}};function Ab(s){if(s!=null){let e=document.getElementById(s);if(e instanceof yi)return e}}function Tb(s,e){if(s){let t=s.getAttribute("src");if(t!=null&&e!=null&&Zx(t,e))throw new Error(`Matching <turbo-frame id="${s.id}"> element has a source URL which references itself`);if(s.ownerDocument!==document&&(s=document.importNode(s,!0)),s instanceof yi)return s.connectedCallback(),s.disconnectedCallback(),s}}var hp={after(){this.targetElements.forEach(s=>s.parentElement?.insertBefore(this.templateContent,s.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.append(this.templateContent))},before(){this.targetElements.forEach(s=>s.parentElement?.insertBefore(this.templateContent,s))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.prepend(this.templateContent))},remove(){this.targetElements.forEach(s=>s.remove())},replace(){let s=this.getAttribute("method");this.targetElements.forEach(e=>{s==="morph"?up(e,this.templateContent):e.replaceWith(this.templateContent)})},update(){let s=this.getAttribute("method");this.targetElements.forEach(e=>{s==="morph"?Hb(e,this.templateContent):(e.innerHTML="",e.append(this.templateContent))})},refresh(){tt.refresh(this.baseURI,this.requestId)}},vc=class s extends HTMLElement{static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{let e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await Wo(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){let e=this.targetElements.flatMap(i=>[...i.children]).filter(i=>!!i.id),t=[...this.templateContent?.children||[]].filter(i=>!!i.id).map(i=>i.id);return e.filter(i=>t.includes(i.id))}get performAction(){if(this.action){let e=hp[this.action];if(e)return e;this.#e("unknown action")}this.#e("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.#e("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#e("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}#e(e){throw new Error(`${this.description}: ${e}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:s.renderElement}})}get targetElementsById(){let e=this.ownerDocument?.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){let e=this.ownerDocument?.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}},bc=class extends HTMLElement{streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Ko(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),Jo(this.streamSource))}get src(){return this.getAttribute("src")||""}};yi.delegateConstructor=rp;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",yi);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",vc);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",bc);(()=>{let s=document.currentScript;if(s&&!s.hasAttribute("data-turbo-suppress-warning"))for(s=s.parentElement;s;){if(s==document.body)return console.warn(Mb`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,s.outerHTML);s=s.parentElement}})();window.Turbo={...jC,StreamActions:hp};dp();var sy;async function GC(){return sy||iy(YC().then(iy))}function iy(s){return sy=s}async function YC(){let{createConsumer:s}=await Promise.resolve().then(()=>(ty(),ey));return s()}async function ny(s,e){let{subscriptions:t}=await GC();return t.create(s,e)}function sa(s){return!s||typeof s!="object"||s instanceof Date||s instanceof RegExp?s:Array.isArray(s)?s.map(sa):Object.keys(s).reduce(function(e,t){var i=t[0].toLowerCase()+t.slice(1).replace(/([A-Z]+)/g,function(n,r){return"_"+r.toLowerCase()});return e[i]=sa(s[t]),e},{})}var Ap=class extends HTMLElement{static observedAttributes=["channel","signed-stream-name"];async connectedCallback(){Ko(this),this.subscription=await ny(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){Jo(this),this.subscription&&this.subscription.unsubscribe(),this.subscriptionDisconnected()}attributeChangedCallback(){this.subscription&&(this.disconnectedCallback(),this.connectedCallback())}dispatchMessageEvent(e){let t=new MessageEvent("message",{data:e});return this.dispatchEvent(t)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){let e=this.getAttribute("channel"),t=this.getAttribute("signed-stream-name");return{channel:e,signed_stream_name:t,...sa({...this.dataset})}}};customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",Ap);function ry(s){if(s.target instanceof HTMLFormElement){let{target:e,detail:{fetchOptions:t}}=s;e.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:i}}})=>{let n=ZC(t.body)?t.body:new URLSearchParams,r=KC(i,n,e);/get/i.test(r)||(/post/i.test(r)?n.delete("_method"):n.set("_method",r),t.method="post")},{once:!0})}}function KC(s,e,t){let i=JC(s),n=e.get("_method"),r=t.getAttribute("method")||"get";return typeof i=="string"?i:typeof n=="string"?n:r}function JC(s){return s instanceof HTMLButtonElement||s instanceof HTMLInputElement?s.name==="_method"?s.value:s.hasAttribute("formmethod")?s.formMethod:null:null}function ZC(s){return s instanceof FormData||s instanceof URLSearchParams}window.Turbo=pp;addEventListener("turbo:before-fetch-request",ry);var Tp=class{constructor(e,t,i){this.eventTarget=e,this.eventName=t,this.eventOptions=i,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let t=QC(e);for(let i of this.bindings){if(t.immediatePropagationStopped)break;i.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{let i=e.index,n=t.index;return i<n?-1:i>n?1:0})}};function QC(s){if("immediatePropagationStopped"in s)return s;{let{stopImmediatePropagation:e}=s;return Object.assign(s,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}var xp=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,i={}){this.application.handleError(e,`Error ${t}`,i)}clearEventListenersForBinding(e){let t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){let{eventTarget:t,eventName:i,eventOptions:n}=e,r=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(i,n);r.delete(o),r.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){let{eventTarget:t,eventName:i,eventOptions:n}=e;return this.fetchEventListener(t,i,n)}fetchEventListener(e,t,i){let n=this.fetchEventListenerMapForEventTarget(e),r=this.cacheKey(t,i),o=n.get(r);return o||(o=this.createEventListener(e,t,i),n.set(r,o)),o}createEventListener(e,t,i){let n=new Tp(e,t,i);return this.started&&n.connect(),n}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){let i=[e];return Object.keys(t).sort().forEach(n=>{i.push(`${t[n]?"":"!"}${n}`)}),i.join(":")}},eP={stop({event:s,value:e}){return e&&s.stopPropagation(),!0},prevent({event:s,value:e}){return e&&s.preventDefault(),!0},self({event:s,value:e,element:t}){return e?t===s.target:!0}},tP=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function iP(s){let t=s.trim().match(tP)||[],i=t[2],n=t[3];return n&&!["keydown","keyup","keypress"].includes(i)&&(i+=`.${n}`,n=""),{eventTarget:sP(t[4]),eventName:i,eventOptions:t[7]?nP(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||n}}function sP(s){if(s=="window")return window;if(s=="document")return document}function nP(s){return s.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function rP(s){if(s==window)return"window";if(s==document)return"document"}function Gp(s){return s.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function Cp(s){return Gp(s.replace(/--/g,"-").replace(/__/g,"_"))}function ra(s){return s.charAt(0).toUpperCase()+s.slice(1)}function my(s){return s.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function oP(s){return s.match(/[^\s]+/g)||[]}function oy(s){return s!=null}function Pp(s,e){return Object.prototype.hasOwnProperty.call(s,e)}var ay=["meta","ctrl","alt","shift"],_p=class{constructor(e,t,i,n){this.element=e,this.index=t,this.eventTarget=i.eventTarget||e,this.eventName=i.eventName||aP(e)||Cc("missing event name"),this.eventOptions=i.eventOptions||{},this.identifier=i.identifier||Cc("missing identifier"),this.methodName=i.methodName||Cc("missing method name"),this.keyFilter=i.keyFilter||"",this.schema=n}static forToken(e,t){return new this(e.element,e.index,iP(e.content),t)}toString(){let e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;let t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;let i=t.filter(n=>!ay.includes(n))[0];return i?(Pp(this.keyMappings,i)||Cc(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[i].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;let t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){let e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:i,value:n}of Array.from(this.element.attributes)){let r=i.match(t),o=r&&r[1];o&&(e[Gp(o)]=lP(n))}return e}get eventTargetName(){return rP(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){let[i,n,r,o]=ay.map(a=>t.includes(a));return e.metaKey!==i||e.ctrlKey!==n||e.altKey!==r||e.shiftKey!==o}},ly={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:s=>s.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function aP(s){let e=s.tagName.toLowerCase();if(e in ly)return ly[e](s)}function Cc(s){throw new Error(s)}function lP(s){try{return JSON.parse(s)}catch{return s}}var Mp=class{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){let t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){let{element:t}=this.action,{actionDescriptorFilters:i}=this.context.application,{controller:n}=this.context,r=!0;for(let[o,a]of Object.entries(this.eventOptions))if(o in i){let l=i[o];r=r&&l({name:o,value:a,event:e,element:t,controller:n})}else continue;return r}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){let{target:t,currentTarget:i}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:i,action:this.methodName})}catch(n){let{identifier:r,controller:o,element:a,index:l}=this,c={identifier:r,controller:o,element:a,index:l,event:e};this.context.handleError(n,`invoking action "${this.action}"`,c)}}willBeInvokedByEvent(e){let t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},Pc=class{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(let t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(let t of Array.from(e)){let i=this.elementFromNode(t);i&&this.processTree(i,this.removeElement)}}processAddedNodes(e){for(let t of Array.from(e)){let i=this.elementFromNode(t);i&&this.elementIsActive(i)&&this.processTree(i,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(let i of this.matchElementsInTree(e))t.call(this,i)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},_c=class{constructor(e,t,i){this.attributeName=t,this.delegate=i,this.elementObserver=new Pc(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(this.selector));return t.concat(i)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}};function cP(s,e,t){gy(s,e).add(t)}function uP(s,e,t){gy(s,e).delete(t),dP(s,e)}function gy(s,e){let t=s.get(e);return t||(t=new Set,s.set(e,t)),t}function dP(s,e){let t=s.get(e);t!=null&&t.size==0&&s.delete(e)}var ms=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t.concat(Array.from(i)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t+i.size,0)}add(e,t){cP(this.valuesByKey,e,t)}delete(e,t){uP(this.valuesByKey,e,t)}has(e,t){let i=this.valuesByKey.get(e);return i!=null&&i.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(i=>i.has(e))}getValuesForKey(e){let t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,i])=>i.has(e)).map(([t,i])=>t)}};var Op=class{constructor(e,t,i,n){this._selector=t,this.details=n,this.elementObserver=new Pc(e,this),this.delegate=i,this.matchesByElement=new ms}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){let{selector:t}=this;if(t){let i=e.matches(t);return this.delegate.selectorMatchElement?i&&this.delegate.selectorMatchElement(e,this.details):i}else return!1}matchElementsInTree(e){let{selector:t}=this;if(t){let i=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(t)).filter(r=>this.matchElement(r));return i.concat(n)}else return[]}elementMatched(e){let{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){let t=this.matchesByElement.getKeysForValue(e);for(let i of t)this.selectorUnmatched(e,i)}elementAttributeChanged(e,t){let{selector:i}=this;if(i){let n=this.matchElement(e),r=this.matchesByElement.has(i,e);n&&!r?this.selectorMatched(e,i):!n&&r&&this.selectorUnmatched(e,i)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}},Lp=class{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){let t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){let i=this.delegate.getStringMapKeyForAttribute(e);if(i!=null){this.stringMap.has(e)||this.stringMapKeyAdded(i,e);let n=this.element.getAttribute(e);if(this.stringMap.get(e)!=n&&this.stringMapValueChanged(n,i,t),n==null){let r=this.stringMap.get(e);this.stringMap.delete(e),r&&this.stringMapKeyRemoved(i,e,r)}else this.stringMap.set(e,n)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,i){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,i)}stringMapKeyRemoved(e,t,i){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,i)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},Mc=class{constructor(e,t,i){this.attributeObserver=new _c(e,t,this),this.delegate=i,this.tokensByElement=new ms}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[t,i]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(i)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let t=this.tokensByElement.getValuesForKey(e),i=this.readTokensForElement(e),n=pP(t,i).findIndex(([r,o])=>!fP(r,o));return n==-1?[[],[]]:[t.slice(n),i.slice(n)]}readTokensForElement(e){let t=this.attributeName,i=e.getAttribute(t)||"";return hP(i,e,t)}};function hP(s,e,t){return s.trim().split(/\s+/).filter(i=>i.length).map((i,n)=>({element:e,attributeName:t,content:i,index:n}))}function pP(s,e){let t=Math.max(s.length,e.length);return Array.from({length:t},(i,n)=>[s[n],e[n]])}function fP(s,e){return s&&e&&s.index==e.index&&s.content==e.content}var Oc=class{constructor(e,t,i){this.tokenListObserver=new Mc(e,t,this),this.delegate=i,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).set(e,i),this.delegate.elementMatchedValue(t,i))}tokenUnmatched(e){let{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,i))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}},kp=class{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Oc(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let t=new Mp(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){let t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){let t=_p.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}},Dp=class{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new Lp(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){let i=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,i.writer(this.receiver[e]),i.writer(i.defaultValue))}stringMapValueChanged(e,t,i){let n=this.valueDescriptorNameMap[t];e!==null&&(i===null&&(i=n.writer(n.defaultValue)),this.invokeChangedCallback(t,e,i))}stringMapKeyRemoved(e,t,i){let n=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,n.writer(this.receiver[e]),i):this.invokeChangedCallback(e,n.writer(n.defaultValue),i)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:t,defaultValue:i,writer:n}of this.valueDescriptors)i!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,n(i),void 0)}invokeChangedCallback(e,t,i){let n=`${e}Changed`,r=this.receiver[n];if(typeof r=="function"){let o=this.valueDescriptorNameMap[e];try{let a=o.reader(t),l=i;i&&(l=o.reader(i)),r.call(this.receiver,a,l)}catch(a){throw a instanceof TypeError&&(a.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${a.message}`),a}}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{let i=this.valueDescriptorMap[t];e[i.name]=i}),e}hasValue(e){let t=this.valueDescriptorNameMap[e],i=`has${ra(t.name)}`;return this.receiver[i]}},Fp=class{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new ms}start(){this.tokenListObserver||(this.tokenListObserver=new Mc(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var i;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var i;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function oa(s,e){let t=vy(s);return Array.from(t.reduce((i,n)=>(gP(n,e).forEach(r=>i.add(r)),i),new Set))}function mP(s,e){return vy(s).reduce((i,n)=>(i.push(...vP(n,e)),i),[])}function vy(s){let e=[];for(;s;)e.push(s),s=Object.getPrototypeOf(s);return e.reverse()}function gP(s,e){let t=s[e];return Array.isArray(t)?t:[]}function vP(s,e){let t=s[e];return t?Object.keys(t).map(i=>[i,t[i]]):[]}var Ip=class{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new ms,this.outletElementsByName=new ms,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:i}){let n=this.getOutlet(e,i);n&&this.connectOutlet(n,e,i)}selectorUnmatched(e,t,{outletName:i}){let n=this.getOutletFromMap(e,i);n&&this.disconnectOutlet(n,e,i)}selectorMatchElement(e,{outletName:t}){let i=this.selector(t),n=this.hasOutlet(e,t),r=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return i?n&&r&&e.matches(i):!1}elementMatchedAttribute(e,t){let i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}elementAttributeValueChanged(e,t){let i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}elementUnmatchedAttribute(e,t){let i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}connectOutlet(e,t,i){var n;this.outletElementsByName.has(i,t)||(this.outletsByName.add(i,e),this.outletElementsByName.add(i,t),(n=this.selectorObserverMap.get(i))===null||n===void 0||n.pause(()=>this.delegate.outletConnected(e,t,i)))}disconnectOutlet(e,t,i){var n;this.outletElementsByName.has(i,t)&&(this.outletsByName.delete(i,e),this.outletElementsByName.delete(i,t),(n=this.selectorObserverMap.get(i))===null||n===void 0||n.pause(()=>this.delegate.outletDisconnected(e,t,i)))}disconnectAllOutlets(){for(let e of this.outletElementsByName.keys)for(let t of this.outletElementsByName.getValuesForKey(e))for(let i of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(i,t,e)}updateSelectorObserverForOutlet(e){let t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){let t=this.selector(e),i=new Op(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,i),i.start()}setupAttributeObserverForOutlet(e){let t=this.attributeNameForOutletName(e),i=new _c(this.scope.element,t,this);this.attributeObserverMap.set(e,i),i.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){let e=new ms;return this.router.modules.forEach(t=>{let i=t.definition.controllerConstructor;oa(i,"outlets").forEach(r=>e.add(r,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(i=>i.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},Rp=class{constructor(e,t){this.logDebugActivity=(i,n={})=>{let{identifier:r,controller:o,element:a}=this;n=Object.assign({identifier:r,controller:o,element:a},n),this.application.logDebugActivity(this.identifier,i,n)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new kp(this,this.dispatcher),this.valueObserver=new Dp(this,this.controller),this.targetObserver=new Fp(this,this),this.outletObserver=new Ip(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(i){this.handleError(i,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,i={}){let{identifier:n,controller:r,element:o}=this;i=Object.assign({identifier:n,controller:r,element:o},i),this.application.handleError(e,`Error ${t}`,i)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,i){this.invokeControllerMethod(`${Cp(i)}OutletConnected`,e,t)}outletDisconnected(e,t,i){this.invokeControllerMethod(`${Cp(i)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){let i=this.controller;typeof i[e]=="function"&&i[e](...t)}};function bP(s){return yP(s,wP(s))}function yP(s,e){let t=TP(s),i=EP(s.prototype,e);return Object.defineProperties(t.prototype,i),t}function wP(s){return oa(s,"blessings").reduce((t,i)=>{let n=i(s);for(let r in n){let o=t[r]||{};t[r]=Object.assign(o,n[r])}return t},{})}function EP(s,e){return AP(e).reduce((t,i)=>{let n=SP(s,e,i);return n&&Object.assign(t,{[i]:n}),t},{})}function SP(s,e,t){let i=Object.getOwnPropertyDescriptor(s,t);if(!(i&&"value"in i)){let r=Object.getOwnPropertyDescriptor(e,t).value;return i&&(r.get=i.get||r.get,r.set=i.set||r.set),r}}var AP=typeof Object.getOwnPropertySymbols=="function"?s=>[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)]:Object.getOwnPropertyNames,TP=(()=>{function s(t){function i(){return Reflect.construct(t,arguments,new.target)}return i.prototype=Object.create(t.prototype,{constructor:{value:i}}),Reflect.setPrototypeOf(i,t),i}function e(){let i=s(function(){this.a.call(this)});return i.prototype.a=function(){},new i}try{return e(),s}catch{return i=>class extends i{}}})();function xP(s){return{identifier:s.identifier,controllerConstructor:bP(s.controllerConstructor)}}var Np=class{constructor(e,t){this.application=e,this.definition=xP(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){let t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new Rp(this,e),this.contextsByScope.set(e,t)),t}},Bp=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){let t=this.data.get(this.getDataKey(e))||"";return oP(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},zp=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){let i=this.getAttributeNameForKey(e);return this.element.setAttribute(i,t),this.get(e)}has(e){let t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){let t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${my(e)}`}},$p=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,i){let n=this.warnedKeysByObject.get(e);n||(n=new Set,this.warnedKeysByObject.set(e,n)),n.has(t)||(n.add(t),this.logger.warn(i,e))}};function Hp(s,e){return`[${s}~="${e}"]`}var Up=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findTarget(i)||this.findLegacyTarget(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllTargets(i),...this.findAllLegacyTargets(i)],[])}findTarget(e){let t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){let t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){let t=this.schema.targetAttributeForScope(this.identifier);return Hp(t,e)}findLegacyTarget(e){let t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){let t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(i=>this.deprecate(i,e))}getLegacySelectorForTargetName(e){let t=`${this.identifier}.${e}`;return Hp(this.schema.targetAttribute,t)}deprecate(e,t){if(e){let{identifier:i}=this,n=this.schema.targetAttribute,r=this.schema.targetAttributeForScope(i);this.guide.warn(e,`target:${t}`,`Please replace ${n}="${i}.${t}" with ${r}="${t}". The ${n} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},jp=class{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findOutlet(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllOutlets(i)],[])}getSelectorForOutletName(e){let t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){let t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){let t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(n=>this.matchesElement(n,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(n=>this.matchesElement(n,e,t))}matchesElement(e,t,i){let n=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&n.split(" ").includes(i)}},Vp=class s{constructor(e,t,i,n){this.targets=new Up(this),this.classes=new Bp(this),this.data=new zp(this),this.containsElement=r=>r.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=i,this.guide=new $p(n),this.outlets=new jp(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return Hp(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new s(this.schema,document.documentElement,this.identifier,this.guide.logger)}},qp=class{constructor(e,t,i){this.element=e,this.schema=t,this.delegate=i,this.valueListObserver=new Oc(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:t,content:i}=e;return this.parseValueForElementAndIdentifier(t,i)}parseValueForElementAndIdentifier(e,t){let i=this.fetchScopesByIdentifierForElement(e),n=i.get(t);return n||(n=this.delegate.createScopeForElementAndIdentifier(e,t),i.set(t,n)),n}elementMatchedValue(e,t){let i=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,i),i==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){let i=this.scopeReferenceCounts.get(t);i&&(this.scopeReferenceCounts.set(t,i-1),i==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}},Wp=class{constructor(e){this.application=e,this.scopeObserver=new qp(this.element,this.schema,this),this.scopesByIdentifier=new ms,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let t=new Np(this.application,e);this.connectModule(t);let i=e.controllerConstructor.afterLoad;i&&i.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){let t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){let i=this.modulesByIdentifier.get(t);if(i)return i.contexts.find(n=>n.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){let i=this.scopeObserver.parseValueForElementAndIdentifier(e,t);i?this.scopeObserver.elementMatchedValue(i.element,i):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,i){this.application.handleError(e,t,i)}createScopeForElementAndIdentifier(e,t){return new Vp(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.connectContextForScope(i))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.disconnectContextForScope(i))}},CP={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:s=>`data-${s}-target`,outletAttributeForScope:(s,e)=>`data-${s}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},cy("abcdefghijklmnopqrstuvwxyz".split("").map(s=>[s,s]))),cy("0123456789".split("").map(s=>[s,s])))};function cy(s){return s.reduce((e,[t,i])=>Object.assign(Object.assign({},e),{[t]:i}),{})}var Lc=class{constructor(e=document.documentElement,t=CP){this.logger=console,this.debug=!1,this.logDebugActivity=(i,n,r={})=>{this.debug&&this.logFormattedMessage(i,n,r)},this.element=e,this.schema=t,this.dispatcher=new xp(this),this.router=new Wp(this),this.actionDescriptorFilters=Object.assign({},eP)}static start(e,t){let i=new this(e,t);return i.start(),i}async start(){await PP(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(n=>{n.controllerConstructor.shouldLoad&&this.router.loadDefinition(n)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(n=>this.router.unloadIdentifier(n))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){let i=this.router.getContextForElementAndIdentifier(e,t);return i?i.controller:null}handleError(e,t,i){var n;this.logger.error(`%s

%o

%o`,t,e,i),(n=window.onerror)===null||n===void 0||n.call(window,t,"",0,0,e)}logFormattedMessage(e,t,i={}){i=Object.assign({application:this},i),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},i)),this.logger.groupEnd()}};function PP(){return new Promise(s=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>s()):s()})}function _P(s){return oa(s,"classes").reduce((t,i)=>Object.assign(t,MP(i)),{})}function MP(s){return{[`${s}Class`]:{get(){let{classes:e}=this;if(e.has(s))return e.get(s);{let t=e.getAttributeName(s);throw new Error(`Missing attribute "${t}"`)}}},[`${s}Classes`]:{get(){return this.classes.getAll(s)}},[`has${ra(s)}Class`]:{get(){return this.classes.has(s)}}}}function OP(s){return oa(s,"outlets").reduce((t,i)=>Object.assign(t,LP(i)),{})}function uy(s,e,t){return s.application.getControllerForElementAndIdentifier(e,t)}function dy(s,e,t){let i=uy(s,e,t);if(i||(s.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),i=uy(s,e,t),i))return i}function LP(s){let e=Cp(s);return{[`${e}Outlet`]:{get(){let t=this.outlets.find(s),i=this.outlets.getSelectorForOutletName(s);if(t){let n=dy(this,t,s);if(n)return n;throw new Error(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${e}Outlets`]:{get(){let t=this.outlets.findAll(s);return t.length>0?t.map(i=>{let n=dy(this,i,s);if(n)return n;console.warn(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`,i)}).filter(i=>i):[]}},[`${e}OutletElement`]:{get(){let t=this.outlets.find(s),i=this.outlets.getSelectorForOutletName(s);if(t)return t;throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(s)}},[`has${ra(e)}Outlet`]:{get(){return this.outlets.has(s)}}}}function kP(s){return oa(s,"targets").reduce((t,i)=>Object.assign(t,DP(i)),{})}function DP(s){return{[`${s}Target`]:{get(){let e=this.targets.find(s);if(e)return e;throw new Error(`Missing target element "${s}" for "${this.identifier}" controller`)}},[`${s}Targets`]:{get(){return this.targets.findAll(s)}},[`has${ra(s)}Target`]:{get(){return this.targets.has(s)}}}}function FP(s){let e=mP(s,"values"),t={valueDescriptorMap:{get(){return e.reduce((i,n)=>{let r=by(n,this.identifier),o=this.data.getAttributeNameForKey(r.key);return Object.assign(i,{[o]:r})},{})}}};return e.reduce((i,n)=>Object.assign(i,IP(n)),t)}function IP(s,e){let t=by(s,e),{key:i,name:n,reader:r,writer:o}=t;return{[n]:{get(){let a=this.data.get(i);return a!==null?r(a):t.defaultValue},set(a){a===void 0?this.data.delete(i):this.data.set(i,o(a))}},[`has${ra(n)}`]:{get(){return this.data.has(i)||t.hasCustomDefaultValue}}}}function by([s,e],t){return zP({controller:t,token:s,typeDefinition:e})}function kc(s){switch(s){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function na(s){switch(typeof s){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(s))return"array";if(Object.prototype.toString.call(s)==="[object Object]")return"object"}function RP(s){let{controller:e,token:t,typeObject:i}=s,n=oy(i.type),r=oy(i.default),o=n&&r,a=n&&!r,l=!n&&r,c=kc(i.type),u=na(s.typeObject.default);if(a)return c;if(l)return u;if(c!==u){let h=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${h}" must match the defined type "${c}". The provided default value of "${i.default}" is of type "${u}".`)}if(o)return c}function NP(s){let{controller:e,token:t,typeDefinition:i}=s,r=RP({controller:e,token:t,typeObject:i}),o=na(i),a=kc(i),l=r||o||a;if(l)return l;let c=e?`${e}.${i}`:t;throw new Error(`Unknown value type "${c}" for "${t}" value`)}function BP(s){let e=kc(s);if(e)return hy[e];let t=Pp(s,"default"),i=Pp(s,"type"),n=s;if(t)return n.default;if(i){let{type:r}=n,o=kc(r);if(o)return hy[o]}return s}function zP(s){let{token:e,typeDefinition:t}=s,i=`${my(e)}-value`,n=NP(s);return{type:n,key:i,name:Gp(i),get defaultValue(){return BP(t)},get hasCustomDefaultValue(){return na(t)!==void 0},reader:$P[n],writer:py[n]||py.default}}var hy={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},$P={array(s){let e=JSON.parse(s);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${s}" of type "${na(e)}"`);return e},boolean(s){return!(s=="0"||String(s).toLowerCase()=="false")},number(s){return Number(s.replace(/_/g,""))},object(s){let e=JSON.parse(s);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${s}" of type "${na(e)}"`);return e},string(s){return s}},py={default:HP,array:fy,object:fy};function fy(s){return JSON.stringify(s)}function HP(s){return`${s}`}var Pe=class{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:i={},prefix:n=this.identifier,bubbles:r=!0,cancelable:o=!0}={}){let a=n?`${n}:${e}`:e,l=new CustomEvent(a,{detail:i,bubbles:r,cancelable:o});return t.dispatchEvent(l),l}};Pe.blessings=[_P,kP,FP,OP];Pe.targets=[];Pe.outlets=[];Pe.values={};var bt=Lc.start();bt.debug=!1;window.Stimulus=bt;var Vy=Ve(df()),Nc=class extends Pe{connect(){}call(s){let e=this.element.getAttribute("data-confirm");confirm(e)||s.preventDefault()}newCall(s){let e=document.getElementById("mainModal"),t=e.querySelector("#mainModalCompleteBtn"),i=new Vy.Modal(e),n=this.element.getAttribute("data-confirm");if(s.target.hasAttribute("data-confirmed"))return console.log(s.target),s.target.removeAttribute("data-confirmed");s.preventDefault(),e.querySelector(".modal-body").textContent=n;let r=n.toLowerCase().includes("\u0443\u0434\u0430\u043B");t.textContent=r?"\u0423\u0434\u0430\u043B\u0438\u0442\u044C":"\u041E\u041A",e.querySelector("#mainModalTitle").textContent="\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435!",t.classList.remove("btn-primary"),t.classList.add("btn-danger"),i.show(),t.addEventListener("click",()=>{i.hide(),s.target.setAttribute("data-confirmed","true"),s.target.click(),setTimeout(()=>{s.target.removeAttribute("data-confirmed")},0)})}};var Bc=class extends Pe{call(s){this.element.insertAdjacentHTML("afterbegin",'<div id="loader" class="loader"></div>'),setTimeout(()=>{this.element.querySelector("#loader").remove()},1e3)}};var zc=class extends Pe{connect(){this.startTimer()}startTimer(){this.timer=setInterval(()=>{this.fadeOutAndRemove()},7e3)}fadeOutAndRemove(){this.element.classList.add("fade-out"),setTimeout(()=>{this.element.remove()},1e3)}close(){clearInterval(this.timer),this.fadeOutAndRemove()}};var $c=class extends Pe{clearForm(s){s.detail.success&&this.element.reset()}};var pe=(s,e=1e4)=>(s=parseFloat(s+"")||0,Math.round((s+Number.EPSILON)*e)/e),_f=function(s){if(!(s&&s instanceof Element&&s.offsetParent))return!1;let e=s.scrollHeight>s.clientHeight,t=window.getComputedStyle(s).overflowY,i=t.indexOf("hidden")!==-1,n=t.indexOf("visible")!==-1;return e&&!i&&!n},Qc=function(s,e=void 0){return!(!s||s===document.body||e&&s===e)&&(_f(s)?s:Qc(s.parentElement,e))},Ji=function(s){var e=new DOMParser().parseFromString(s,"text/html").body;if(e.childElementCount>1){for(var t=document.createElement("div");e.firstChild;)t.appendChild(e.firstChild);return t}return e.firstChild},kf=s=>`${s||""}`.split(" ").filter(e=>!!e),Zi=(s,e,t)=>{s&&kf(e).forEach(i=>{s.classList.toggle(i,t||!1)})},rn=class{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}},eo={passive:!1},Mf=class{constructor(e,{start:t=()=>!0,move:i=()=>{},end:n=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=t,this.moveCallback=i,this.endCallback=n;for(let r of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[r]=this[r].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,eo),this.element.addEventListener("touchstart",this.onTouchStart,eo),this.element.addEventListener("touchmove",this.onMove,eo),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(!e.buttons||e.button!==0)return;let t=new rn(e);this.currentPointers.some(i=>i.id===t.id)||this.triggerPointerStart(t,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(e){for(let t of Array.from(e.changedTouches||[]))this.triggerPointerStart(new rn(t),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){let t=this.currentPointers.slice(),i="changedTouches"in e?Array.from(e.changedTouches||[]).map(r=>new rn(r)):[new rn(e)],n=[];for(let r of i){let o=this.currentPointers.findIndex(a=>a.id===r.id);o<0||(n.push(r),this.currentPointers[o]=r)}n.length&&this.moveCallback(e,this.currentPointers.slice(),t)}onPointerEnd(e){e.buttons>0&&e.button!==0||(this.triggerPointerEnd(e,new rn(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(let t of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new rn(t))}triggerPointerStart(e,t){return!!this.startCallback(t,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,t){let i=this.currentPointers.findIndex(n=>n.id===t.id);i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(e,t,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){let e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,eo),this.element.removeEventListener("touchstart",this.onTouchStart,eo),this.element.removeEventListener("touchmove",this.onMove,eo),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}};function qy(s,e){return e?Math.sqrt(Math.pow(e.clientX-s.clientX,2)+Math.pow(e.clientY-s.clientY,2)):0}function Wy(s,e){return e?{clientX:(s.clientX+e.clientX)/2,clientY:(s.clientY+e.clientY)/2}:s}var Of=s=>typeof s=="object"&&s!==null&&s.constructor===Object&&Object.prototype.toString.call(s)==="[object Object]",Xt=(s,...e)=>{let t=e.length;for(let i=0;i<t;i++){let n=e[i]||{};Object.entries(n).forEach(([r,o])=>{let a=Array.isArray(o)?[]:{};s[r]||Object.assign(s,{[r]:a}),Of(o)?Object.assign(s[r],Xt(a,o)):Array.isArray(o)?Object.assign(s,{[r]:[...o]}):Object.assign(s,{[r]:o})})}return s},hf=function(s,e){return s.split(".").reduce((t,i)=>typeof t=="object"?t[i]:void 0,e)},oo=class{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(let t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}setOptions(e){this.options=e?Xt({},this.constructor.defaults,e):{};for(let[t,i]of Object.entries(this.option("on")||{}))this.on(t,i)}option(e,...t){let i=hf(e,this.options);return i&&typeof i=="function"&&(i=i.call(this,this,...t)),i}optionFor(e,t,i,...n){let r=hf(t,e);var o;typeof(o=r)!="string"||isNaN(o)||isNaN(parseFloat(o))||(r=parseFloat(r)),r==="true"&&(r=!0),r==="false"&&(r=!1),r&&typeof r=="function"&&(r=r.call(this,this,e,...n));let a=hf(t,this.options);return a&&typeof a=="function"?r=a.call(this,this,e,...n,r):r===void 0&&(r=a),r===void 0?i:r}cn(e){let t=this.options.classes;return t&&t[e]||""}localize(e,t=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(i,n,r)=>{let o="";return r?o=this.option(`${n[0]+n.toLowerCase().substring(1)}.l10n.${r}`):n&&(o=this.option(`l10n.${n}`)),o||(o=i),o});for(let i=0;i<t.length;i++)e=e.split(t[i][0]).join(t[i][1]);return e=e.replace(/\{\{(.*?)\}\}/g,(i,n)=>n)}on(e,t){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),this.events||(this.events=new Map),i.forEach(n=>{let r=this.events.get(n);r||(this.events.set(n,[]),r=[]),r.includes(t)||r.push(t),this.events.set(n,r)})}off(e,t){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),i.forEach(n=>{let r=this.events.get(n);if(Array.isArray(r)){let o=r.indexOf(t);o>-1&&r.splice(o,1)}})}emit(e,...t){[...this.events.get(e)||[]].forEach(i=>i(this,...t)),e!=="*"&&this.emit("*",e,...t)}};Object.defineProperty(oo,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(oo,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});var va=class extends oo{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){let t=new Map;for(let[i,n]of Object.entries(e)){let r=this.option(i),o=this.plugins[i];o||r===!1?o&&r===!1&&(o.detach(),delete this.plugins[i]):t.set(i,new n(this,r||{}))}for(let[i,n]of t)this.plugins[i]=n,n.attach()}detachPlugins(e){e=e||Object.keys(this.plugins);for(let t of e){let i=this.plugins[t];i&&i.detach(),delete this.plugins[t]}return this.emit("detachPlugins"),this}},Fe;(function(s){s[s.Init=0]="Init",s[s.Error=1]="Error",s[s.Ready=2]="Ready",s[s.Panning=3]="Panning",s[s.Mousemove=4]="Mousemove",s[s.Destroy=5]="Destroy"})(Fe||(Fe={}));var vs=["a","b","c","d","e","f"],w0={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},z_={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:w0},Gy='<circle cx="25" cy="25" r="20"></circle>',Df='<div class="f-spinner"><svg viewBox="0 0 50 50">'+Gy+Gy+"</svg></div>",Yt=s=>s&&s!==null&&s instanceof Element&&"nodeType"in s,ke=(s,e)=>{s&&kf(e).forEach(t=>{s.classList.remove(t)})},ge=(s,e)=>{s&&kf(e).forEach(t=>{s.classList.add(t)})},Hc={a:1,b:0,c:0,d:1,e:0,f:0},$_=1e5,Uc=1e4,Ai="mousemove",Yy="drag",Xy="content",Ti="auto",pf=null,ff=null,jn=class s extends va{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return ff===null&&(ff=window.matchMedia("(hover: none)").matches),ff}get isMobile(){return pf===null&&(pf=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),pf}get panMode(){return this.options.panMode!==Ai||this.isTouchDevice?Yy:Ai}get panOnlyZoomed(){let e=this.options.panOnlyZoomed;return e===Ti?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){let{a:e,b:t}=this.current;return Math.sqrt(e*e+t*t)||1}get targetScale(){let{a:e,b:t}=this.target;return Math.sqrt(e*e+t*t)||1}get minScale(){return this.option("minScale")||1}get fullScale(){let{contentRect:e}=this;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){let{containerRect:e,contentRect:t}=this,i=Math.max(e.height/t.fitHeight,e.width/t.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){let e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(let e of vs){let t=e=="e"||e==="f"?1e-4:1e-5;if(Math.abs(this.target[e]-this.current[e])>t)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,t={},i={}){var n;if(super(t),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Fe.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Hc)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Hc)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},s.Plugins),i)),this.emit("attachPlugins"),this.emit("init");let r=this.content;if(r.addEventListener("load",this.onLoad),r.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){e.classList.add(this.cn("isLoading"));let o=Ji(Df);!e.contains(r)||r.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(o):this.spinner=((n=r.parentElement)===null||n===void 0?void 0:n.insertBefore(o,r))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){let{container:e}=this,t=this.cn(Xy),i=this.option(Xy)||e.querySelector(`.${t}`);if(i||(i=e.querySelector("img,picture")||e.firstElementChild,i&&ge(i,t)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){let{spinner:e,container:t,state:i}=this;e&&(e.remove(),this.spinner=null),this.option("spinner")&&t.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===Fe.Init?this.enable():this.updateMetrics()}onError(){this.state!==Fe.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=Fe.Error,this.emit("error"))}getNextScale(e){let{fullScale:t,targetScale:i,coverScale:n,maxScale:r,minScale:o}=this,a=o;switch(e){case"toggleMax":a=i-o<.5*(r-o)?r:o;break;case"toggleCover":a=i-o<.5*(n-o)?n:o;break;case"toggleZoom":a=i-o<.5*(t-o)?t:o;break;case"iterateZoom":let l=[1,t,r].sort((u,h)=>u-h),c=l.findIndex(u=>u>i+1e-5);a=l[c]||1}return a}attachObserver(){var e;let t=()=>{let{container:i,containerRect:n}=this;return Math.abs(n.width-i.getBoundingClientRect().width)>.1||Math.abs(n.height-i.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(t()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{t()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(e=this.resizeObserver)===null||e===void 0||e.observe(this.container)}detachObserver(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}attachEvents(){let{container:e}=this;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new Mf(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(Ai,this.onMouseMove)}detachEvents(){var e;let{container:t}=this;t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("wheel",this.onWheel,{passive:!1}),(e=this.pointerTracker)===null||e===void 0||e.stop(),this.pointerTracker=null,document.removeEventListener(Ai,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();let e=this.friction,t=this.option("maxVelocity");for(let i of vs)e?(this.velocity[i]*=1-e,t&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],t),-1*t)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(let e of vs)e==="e"&&this.isBouncingX||e==="f"&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,t=0){let{current:i}=this,n=i.e+e,r=i.f+t,o=this.getBounds(),{x:a,y:l}=o,c=a.min,u=a.max,h=l.min,f=l.max,p=0,v=0;return c!==1/0&&n<c?p=c-n:u!==1/0&&n>u&&(p=u-n),h!==1/0&&r<h?v=h-r:f!==1/0&&r>f&&(v=f-r),Math.abs(p)<1e-4&&(p=0),Math.abs(v)<1e-4&&(v=0),Object.assign(Object.assign({},o),{xDiff:p,yDiff:v,inBounds:!p&&!v})}clampTargetBounds(){let{target:e}=this,{x:t,y:i}=this.getBounds();t.min!==1/0&&(e.e=Math.max(e.e,t.min)),t.max!==1/0&&(e.e=Math.min(e.e,t.max)),i.min!==1/0&&(e.f=Math.max(e.f,i.min)),i.max!==1/0&&(e.f=Math.min(e.f,i.max))}calculateContentDim(e=this.current){let{content:t,contentRect:i}=this,{fitWidth:n,fitHeight:r,fullWidth:o,fullHeight:a}=i,l=o,c=a;if(this.option("zoom")||this.angle!==0){let u=!(t instanceof HTMLImageElement)&&(window.getComputedStyle(t).maxWidth==="none"||window.getComputedStyle(t).maxHeight==="none"),h=u?o:n,f=u?a:r,p=this.getMatrix(e),v=new DOMPoint(0,0).matrixTransform(p),w=new DOMPoint(0+h,0).matrixTransform(p),S=new DOMPoint(0+h,0+f).matrixTransform(p),A=new DOMPoint(0,0+f).matrixTransform(p),k=Math.abs(S.x-v.x),D=Math.abs(S.y-v.y),R=Math.abs(A.x-w.x),$=Math.abs(A.y-w.y);l=Math.max(k,R),c=Math.max(D,$)}return{contentWidth:l,contentHeight:c}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===Ai||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);let{target:e}=this,{x:t,y:i,xDiff:n,yDiff:r}=this.checkBounds(),o=this.option("maxVelocity"),a=this.velocity.e,l=this.velocity.f;n!==0?(this.isBouncingX=!0,n*a<=0?a+=.14*n:(a=.14*n,t.min!==1/0&&(this.target.e=Math.max(e.e,t.min)),t.max!==1/0&&(this.target.e=Math.min(e.e,t.max))),o&&(a=Math.max(Math.min(a,o),-1*o))):this.isBouncingX=!1,r!==0?(this.isBouncingY=!0,r*l<=0?l+=.14*r:(l=.14*r,i.min!==1/0&&(this.target.f=Math.max(e.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(e.f,i.max))),o&&(l=Math.max(Math.min(l,o),-1*o))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=a),this.isBouncingY&&(this.velocity.f=l)}enable(){let{content:e}=this,t=new DOMMatrixReadOnly(window.getComputedStyle(e).transform);for(let i of vs)this.current[i]=this.target[i]=t[i];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=Fe.Ready,this.emit("ready")}onClick(e){var t;e.type==="click"&&e.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((t=this.pointerTracker)===null||t===void 0||t.clear(),this.trackingPoints=[],this.startDecelAnim());let i=e.target;if(!i||e.defaultPrevented)return;if(i.hasAttribute("disabled"))return e.preventDefault(),void e.stopPropagation();if((()=>{let p=window.getSelection();return p&&p.type==="Range"})()&&!i.closest("button"))return;let n=i.closest("[data-panzoom-action]"),r=i.closest("[data-panzoom-change]"),o=n||r,a=o&&Yt(o)?o.dataset:null;if(a){let p=a.panzoomChange,v=a.panzoomAction;if((p||v)&&e.preventDefault(),p){let w={};try{w=JSON.parse(p)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(w)}if(v)return void(this[v]&&this[v]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return e.preventDefault(),void e.stopPropagation();if(i.closest("[data-fancybox]"))return;let l=this.content.getBoundingClientRect(),c=this.dragStart;if(c.time&&!this.canZoomOut()&&(Math.abs(l.x-c.x)>2||Math.abs(l.y-c.y)>2))return;this.dragStart.time=0;let u=p=>{this.option("zoom",e)&&p&&typeof p=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(p)&&typeof this[p]=="function"&&(e.preventDefault(),this[p]({event:e}))},h=this.option("click",e),f=this.option("dblClick",e);f?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",e),!e.defaultPrevented&&h&&u(h)):(this.emit("dblClick",e),e.defaultPrevented||u(f)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",e),!e.defaultPrevented&&h&&u(h))}addTrackingPoint(e){let t=this.trackingPoints.filter(i=>i.time>Date.now()-100);t.push(e),this.trackingPoints=t}onPointerDown(e,t,i){var n;if(this.option("touch",e)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];let r=this.content.getBoundingClientRect();if(this.dragStart={x:r.x,y:r.y,top:r.top,left:r.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===Ai&&this.targetScale>1)return e.preventDefault(),e.stopPropagation(),!1;let o=e.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(o.nodeName)||o.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(n=window.getSelection())===null||n===void 0||n.removeAllRanges()}if(e.type==="mousedown")["A","BUTTON"].includes(o.nodeName)||e.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(t),this.emit("touchStart",e)),!0}onPointerMove(e,t,i){if(this.option("touch",e)===!1||!this.isDragging||t.length<2&&this.panOnlyZoomed&&pe(this.targetScale)<=pe(this.minScale)||(this.emit("touchMove",e),e.defaultPrevented))return;this.addTrackingPoint(t[0]);let{content:n}=this,r=Wy(i[0],i[1]),o=Wy(t[0],t[1]),a=0,l=0;if(t.length>1){let D=n.getBoundingClientRect();a=r.clientX-D.left-.5*D.width,l=r.clientY-D.top-.5*D.height}let c=qy(i[0],i[1]),u=qy(t[0],t[1]),h=c?u/c:1,f=o.clientX-r.clientX,p=o.clientY-r.clientY;this.dragOffset.x+=f,this.dragOffset.y+=p,this.dragOffset.time=Date.now()-this.dragStart.time;let v=pe(this.targetScale)===pe(this.minScale)&&this.option("lockAxis");if(v&&!this.lockedAxis)if(v==="xy"||v==="y"||e.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();let D=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=D>45&&D<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,f=0,p=0}else this.lockedAxis=v;if(Qc(e.target,this.content)&&(v="x",this.dragOffset.y=0),v&&v!=="xy"&&this.lockedAxis!==v&&pe(this.targetScale)===pe(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));let w=this.checkBounds(f,p);this.option("rubberband")?(this.isInfinite!=="x"&&(w.xDiff>0&&f<0||w.xDiff<0&&f>0)&&(f*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*w.xDiff))),this.isInfinite!=="y"&&(w.yDiff>0&&p<0||w.yDiff<0&&p>0)&&(p*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*w.yDiff)))):(w.xDiff&&(f=0),w.yDiff&&(p=0));let S=this.targetScale,A=this.minScale,k=this.maxScale;S<.5*A&&(h=Math.max(h,A)),S>1.5*k&&(h=Math.min(h,k)),this.lockedAxis==="y"&&pe(S)===pe(A)&&(f=0),this.lockedAxis==="x"&&pe(S)===pe(A)&&(p=0),this.applyChange({originX:a,originY:l,panX:f,panY:p,scale:h,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(e,t,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(t),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),Qc(e.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==Fe.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;let t=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(let D of vs)this.velocity[D]=0;this.target.e=this.current.e,this.target.f=this.current.f,ke(this.container,"is-scaling"),ke(this.container,"is-animating"),this.isTicking=!1;let{trackingPoints:i}=this,n=i[0],r=i[i.length-1],o=0,a=0,l=0;r&&n&&(o=r.clientX-n.clientX,a=r.clientY-n.clientY,l=r.time-n.time);let c=((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1;c!==1&&(o*=c,a*=c);let u=0,h=0,f=0,p=0,v=this.option("decelFriction"),w=this.targetScale;if(l>0){f=Math.abs(o)>3?o/(l/30):0,p=Math.abs(a)>3?a/(l/30):0;let D=this.option("maxVelocity");D&&(f=Math.max(Math.min(f,D),-1*D),p=Math.max(Math.min(p,D),-1*D))}f&&(u=f/(1/(1-v)-1)),p&&(h=p/(1/(1-v)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&pe(w)===this.minScale)&&(u=f=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&pe(w)===this.minScale)&&(h=p=0);let S=this.dragOffset.x,A=this.dragOffset.y,k=this.option("dragMinThreshold")||0;Math.abs(S)<k&&Math.abs(A)<k&&(u=h=0,f=p=0),(this.option("zoom")&&(w<this.minScale-1e-5||w>this.maxScale+1e-5)||t&&!u&&!h)&&(v=.35),this.applyChange({panX:u,panY:h,friction:v}),this.emit("decel",f,p,S,A)}onWheel(e){var t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(r,o){return Math.abs(o)>Math.abs(r)?o:r});let i=Math.max(-1,Math.min(1,t));if(this.emit("wheel",e,i),this.panMode===Ai||e.defaultPrevented)return;let n=this.option("wheel");n==="pan"?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):n==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(e)}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){e.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");let{current:e,target:t,content:i,contentRect:n}=this,r=Object.assign({},Hc);for(let S of vs){let A=S=="e"||S==="f"?Uc:$_;r[S]=pe(e[S],A),Math.abs(t[S]-e[S])<(S=="e"||S==="f"?.51:.001)&&(e[S]=t[S])}let{a:o,b:a,c:l,d:c,e:u,f:h}=r,f=`matrix(${o}, ${a}, ${l}, ${c}, ${u}, ${h})`,p=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;if(this.option("transformParent")&&(p=p.parentElement||p),p.style.transform===f)return;p.style.transform=f;let{contentWidth:v,contentHeight:w}=this.calculateContentDim();n.width=v,n.height=w,this.emit("afterTransform")}updateMetrics(e=!1){var t;if(!this||this.state===Fe.Destroy||this.isContentLoading)return;let i=Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1),{container:n,content:r}=this,o=r instanceof HTMLImageElement,a=n.getBoundingClientRect(),l=getComputedStyle(this.container),c=a.width*i,u=a.height*i,h=parseFloat(l.paddingTop)+parseFloat(l.paddingBottom),f=c-(parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),p=u-h;this.containerRect={width:c,height:u,innerWidth:f,innerHeight:p};let v=parseFloat(r.dataset.width||"")||(se=>{let Q=0;return Q=se instanceof HTMLImageElement?se.naturalWidth:se instanceof SVGElement?se.width.baseVal.value:Math.max(se.offsetWidth,se.scrollWidth),Q||0})(r),w=parseFloat(r.dataset.height||"")||(se=>{let Q=0;return Q=se instanceof HTMLImageElement?se.naturalHeight:se instanceof SVGElement?se.height.baseVal.value:Math.max(se.offsetHeight,se.scrollHeight),Q||0})(r),S=this.option("width",v)||Ti,A=this.option("height",w)||Ti,k=S===Ti,D=A===Ti;typeof S!="number"&&(S=v),typeof A!="number"&&(A=w),k&&(S=v*(A/w)),D&&(A=w/(v/S));let R=r.parentElement instanceof HTMLPictureElement?r.parentElement:r;this.option("transformParent")&&(R=R.parentElement||R);let $=R.getAttribute("style")||"";R.style.setProperty("transform","none","important"),o&&(R.style.width="",R.style.height=""),R.offsetHeight;let U=r.getBoundingClientRect(),Z=U.width*i,K=U.height*i,ue=Z,X=K;Z=Math.min(Z,S),K=Math.min(K,A),o?{width:Z,height:K}=((se,Q,H,T)=>{let F=H/se,_=T/Q,J=Math.min(F,_);return{width:se*=J,height:Q*=J}})(S,A,Z,K):(Z=Math.min(Z,S),K=Math.min(K,A));let oe=.5*(X-K),he=.5*(ue-Z);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:U.top-a.top+oe,bottom:a.bottom-U.bottom+oe,left:U.left-a.left+he,right:a.right-U.right+he,fitWidth:Z,fitHeight:K,width:Z,height:K,fullWidth:S,fullHeight:A}),R.style.cssText=$,o&&(R.style.width=`${Z}px`,R.style.height=`${K}px`),this.setTransform(),e!==!0&&this.emit("refresh"),this.ignoreBounds||(pe(this.targetScale)<pe(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===Fe.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){let{contentWidth:e,contentHeight:t}=this.calculateContentDim(this.target),{targetScale:i,lockedAxis:n}=this,{fitWidth:r,fitHeight:o}=this.contentRect,a=0,l=0,c=0,u=0,h=this.option("infinite");if(h===!0||n&&h===n)a=-1/0,c=1/0,l=-1/0,u=1/0;else{let{containerRect:f,contentRect:p}=this,v=pe(r*i,Uc),w=pe(o*i,Uc),{innerWidth:S,innerHeight:A}=f;if(f.width===v&&(S=f.width),f.width===w&&(A=f.height),e>S){c=.5*(e-S),a=-1*c;let k=.5*(p.right-p.left);a+=k,c+=k}if(r>S&&e<S&&(a-=.5*(r-S),c-=.5*(r-S)),t>A){u=.5*(t-A),l=-1*u;let k=.5*(p.bottom-p.top);l+=k,u+=k}o>A&&t<A&&(a-=.5*(o-A),c-=.5*(o-A))}return{x:{min:a,max:c},y:{min:l,max:u}}}getBounds(){let e=this.option("bounds");return e!==Ti?e:this.calculateBounds()}updateControls(){let e=this,t=e.container,{panMode:i,contentRect:n,targetScale:r,minScale:o}=e,a=o,l=e.option("click")||!1;l&&(a=e.getNextScale(l));let c=e.canZoomIn(),u=e.canZoomOut(),h=i===Yy&&!!this.option("touch"),f=u&&h;if(h&&(pe(r)<pe(o)&&!this.panOnlyZoomed&&(f=!0),(pe(n.width,1)>pe(n.fitWidth,1)||pe(n.height,1)>pe(n.fitHeight,1))&&(f=!0)),pe(n.width*r,1)<pe(n.fitWidth,1)&&(f=!1),i===Ai&&(f=!1),Zi(t,this.cn("isDraggable"),f),!this.option("zoom"))return;let p=c&&pe(a)>pe(r),v=!p&&!f&&u&&pe(a)<pe(r);Zi(t,this.cn("canZoomIn"),p),Zi(t,this.cn("canZoomOut"),v);for(let w of t.querySelectorAll("[data-panzoom-action]")){let S=!1,A=!1;switch(w.dataset.panzoomAction){case"zoomIn":c?S=!0:A=!0;break;case"zoomOut":u?S=!0:A=!0;break;case"toggleZoom":case"iterateZoom":c||u?S=!0:A=!0;let k=w.querySelector("g");k&&(k.style.display=c?"":"none")}S?(w.removeAttribute("disabled"),w.removeAttribute("tabindex")):A&&(w.setAttribute("disabled",""),w.setAttribute("tabindex","-1"))}}panTo({x:e=this.target.e,y:t=this.target.f,scale:i=this.targetScale,friction:n=this.option("friction"),angle:r=0,originX:o=0,originY:a=0,flipX:l=!1,flipY:c=!1,ignoreBounds:u=!1}){this.state!==Fe.Destroy&&this.applyChange({panX:e-this.target.e,panY:t-this.target.f,scale:i/this.targetScale,angle:r,originX:o,originY:a,friction:n,flipX:l,flipY:c,ignoreBounds:u})}applyChange({panX:e=0,panY:t=0,scale:i=1,angle:n=0,originX:r=-this.current.e,originY:o=-this.current.f,friction:a=this.option("friction"),flipX:l=!1,flipY:c=!1,ignoreBounds:u=!1,bounce:h=this.option("bounce")}){let f=this.state;if(f===Fe.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=a||0,this.ignoreBounds=u;let{current:p}=this,v=p.e,w=p.f,S=this.getMatrix(this.target),A=new DOMMatrix().translate(v,w).translate(r,o).translate(e,t);if(this.option("zoom")){if(!u){let k=this.targetScale,D=this.minScale,R=this.maxScale;k*i<D&&(i=D/k),k*i>R&&(i=R/k)}A=A.scale(i)}A=A.translate(-r,-o).translate(-v,-w).multiply(S),n&&(A=A.rotate(n)),l&&(A=A.scale(-1,1)),c&&(A=A.scale(1,-1));for(let k of vs)k!=="e"&&k!=="f"&&(A[k]>this.minScale+1e-5||A[k]<this.minScale-1e-5)?this.target[k]=A[k]:this.target[k]=pe(A[k],Uc);(this.targetScale<this.scale||Math.abs(i-1)>.1||this.panMode===Ai||h===!1)&&!u&&this.clampTargetBounds(),f===Fe.Init?this.animate():this.isResting||(this.state=Fe.Panning,this.requestTick())}stop(e=!1){if(this.state===Fe.Init||this.state===Fe.Destroy)return;let t=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(let i of vs)this.velocity[i]=0,e==="current"?this.current[i]=this.target[i]:e==="target"&&(this.target[i]=this.current[i]);this.setTransform(),ke(this.container,"is-scaling"),ke(this.container,"is-animating"),this.isTicking=!1,this.state=Fe.Ready,t&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),ge(this.container,"is-animating"),this.isScaling&&ge(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(e,t=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==Ai||!e||pe(this.targetScale)<=pe(this.minScale))return;this.emit("mouseMove",e);let{container:i,containerRect:n,contentRect:r}=this,o=n.width,a=n.height,l=i.getBoundingClientRect(),c=(e.clientX||0)-l.left,u=(e.clientY||0)-l.top,{contentWidth:h,contentHeight:f}=this.calculateContentDim(this.target),p=this.option("mouseMoveFactor");p>1&&(h!==o&&(h*=p),f!==a&&(f*=p));let v=.5*(h-o)-c/o*100/100*(h-o);v+=.5*(r.right-r.left);let w=.5*(f-a)-u/a*100/100*(f-a);w+=.5*(r.bottom-r.top),this.applyChange({panX:v-this.target.e,panY:w-this.target.f,friction:t})}zoomWithWheel(e){if(this.state===Fe.Destroy||this.state===Fe.Init)return;let t=Date.now();if(t-this.pwt<45)return void e.preventDefault();this.pwt=t;var i=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(c,u){return Math.abs(u)>Math.abs(c)?u:c});let n=Math.max(-1,Math.min(1,i)),{targetScale:r,maxScale:o,minScale:a}=this,l=r*(100+45*n)/100;pe(l)<pe(a)&&pe(r)<=pe(a)?(this.cwd+=Math.abs(n),l=a):pe(l)>pe(o)&&pe(r)>=pe(o)?(this.cwd+=Math.abs(n),l=o):(this.cwd=0,l=Math.max(Math.min(l,o),a)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),pe(l)!==pe(r)&&this.zoomTo(l,{event:e}))}canZoomIn(){return this.option("zoom")&&(pe(this.contentRect.width,1)<pe(this.contentRect.fitWidth,1)||pe(this.targetScale)<pe(this.maxScale))}canZoomOut(){return this.option("zoom")&&pe(this.targetScale)>pe(this.minScale)}zoomIn(e=1.25,t){this.zoomTo(this.targetScale*e,t)}zoomOut(e=.8,t){this.zoomTo(this.targetScale*e,t)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.getNextScale("toggleZoom"),e)}toggleMax(e){this.zoomTo(this.getNextScale("toggleMax"),e)}toggleCover(e){this.zoomTo(this.getNextScale("toggleCover"),e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(e=1,{friction:t=Ti,originX:i=Ti,originY:n=Ti,event:r}={}){if(this.isContentLoading||this.state===Fe.Destroy)return;let{targetScale:o,fullScale:a,maxScale:l,coverScale:c}=this;if(this.stop(),this.panMode===Ai&&(r=this.pmme||r),r||i===Ti||n===Ti){let h=this.content.getBoundingClientRect(),f=this.container.getBoundingClientRect(),p=r?r.clientX:f.left+.5*f.width,v=r?r.clientY:f.top+.5*f.height;i=p-h.left-.5*h.width,n=v-h.top-.5*h.height}let u=1;typeof e=="number"?u=e:e==="full"?u=a:e==="cover"?u=c:e==="max"?u=l:e==="fit"?u=1:e==="next"&&(u=this.getNextScale("iterateZoom")),u=u/o||1,t=t===Ti?u>1?.15:.25:t,this.applyChange({scale:u,originX:i,originY:n,friction:t}),r&&this.panMode===Ai&&this.panWithMouse(r,t)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");let{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.height-(t.top+.5*t.fitHeight)-i.f,scale:e.width/t.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");let{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.innerHeight-(t.top+.5*t.fitHeight)-i.f,scale:e.height/t.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){let{container:e}=this,t=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");e.classList.toggle(t);let n=e.classList.contains(t);n?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(n?"enterFS":"exitFS")}getMatrix(e=this.current){let{a:t,b:i,c:n,d:r,e:o,f:a}=e;return new DOMMatrix([t,i,n,r,o,a])}reset(e){if(this.state!==Fe.Init&&this.state!==Fe.Destroy){this.stop("current");for(let t of vs)this.target[t]=Hc[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=e===void 0?this.option("friction"):e,this.state=Fe.Panning,this.requestTick())}}destroy(){this.stop(),this.state=Fe.Destroy,this.detachEvents(),this.detachObserver();let{container:e,content:t}=this,i=this.option("classes")||{};for(let n of Object.values(i))e.classList.remove(n+"");t&&(t.removeEventListener("load",this.onLoad),t.removeEventListener("error",this.onError)),this.detachPlugins()}};Object.defineProperty(jn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:z_}),Object.defineProperty(jn,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});var Ky=function(s,e){let t=!0;return(...i)=>{t&&(t=!1,s(...i),setTimeout(()=>{t=!0},e))}},Jy=(s,e)=>{let t=[];return s.childNodes.forEach(i=>{i.nodeType!==Node.ELEMENT_NODE||e&&!i.matches(e)||t.push(i)}),t},H_={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}},ct;(function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Destroy=2]="Destroy"})(ct||(ct={}));var mf=s=>{if(typeof s=="string"||s instanceof HTMLElement)s={html:s};else{let e=s.thumb;e!==void 0&&(typeof e=="string"&&(s.thumbSrc=e),e instanceof HTMLImageElement&&(s.thumbEl=e,s.thumbElSrc=e.src,s.thumbSrc=e.src),delete s.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},s)},U_=(s={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},s),ni=class extends oo{constructor(e,t){super(t),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}},j_={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2},eu=class extends ni{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list;if(!e){e=document.createElement("ul"),ge(e,this.cn("list")),e.setAttribute("role","tablist");let t=this.instance.container;t.appendChild(e),ge(t,this.cn("hasDots")),this.list=e}return e}refresh(){var e;let t=this.instance.pages.length,i=Math.min(2,this.option("minCount")),n=Math.max(2e3,this.option("maxCount")),r=this.option("dynamicFrom");if(t<i||t>n)return void this.cleanup();let o=typeof r=="number"&&t>5&&t>=r,a=!this.list||this.isDynamic!==o||this.list.children.length!==t;a&&this.cleanup();let l=this.build();if(Zi(l,this.cn("isDynamic"),!!o),a)for(let h=0;h<t;h++)l.append(this.createItem(h));let c,u=0;for(let h of[...l.children]){let f=u===this.instance.page;f&&(c=h),Zi(h,this.cn("isCurrent"),f),(e=h.children[0])===null||e===void 0||e.setAttribute("aria-selected",f?"true":"false");for(let p of["isBeforePrev","isPrev","isNext","isAfterNext"])ke(h,this.cn(p));u++}if(c=c||l.firstChild,o&&c){let h=c.previousElementSibling,f=h&&h.previousElementSibling;ge(h,this.cn("isPrev")),ge(f,this.cn("isBeforePrev"));let p=c.nextElementSibling,v=p&&p.nextElementSibling;ge(p,this.cn("isNext")),ge(v,this.cn("isAfterNext"))}this.isDynamic=o}createItem(e=0){var t;let i=document.createElement("li");i.setAttribute("role","presentation");let n=Ji(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return i.appendChild(n),(t=i.children[0])===null||t===void 0||t.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,ke(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(eu,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:j_});var jc="disabled",Vc="next",Zy="prev",tu=class extends ni{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){let e=this.instance,t=e.pages.length,i=e.page;if(t<2)return void this.cleanup();this.build();let n=this.prev,r=this.next;n&&r&&(n.removeAttribute(jc),r.removeAttribute(jc),e.isInfinite||(i<=0&&n.setAttribute(jc,""),i>=t-1&&r.setAttribute(jc,"")))}addBtn(e){var t;let i=this.instance,n=document.createElement("button");n.setAttribute("tabindex","0"),n.setAttribute("title",i.localize(`{{${e.toUpperCase()}}}`)),ge(n,this.cn("button")+" "+this.cn(e===Vc?"isNext":"isPrev"));let r=i.isRTL?e===Vc?Zy:Vc:e;var o;return n.innerHTML=i.localize(this.option(`${r}Tpl`)),n.dataset[`carousel${o=e,o?o.match("^[a-z]")?o.charAt(0).toUpperCase()+o.substring(1):o:""}`]="true",(t=this.container)===null||t===void 0||t.appendChild(n),n}build(){let e=this.instance.container,t=this.cn("container"),{container:i,prev:n,next:r}=this;i||(i=e.querySelector("."+t),this.isDom=!!i),i||(i=document.createElement("div"),ge(i,t),e.appendChild(i)),this.container=i,r||(r=i.querySelector("[data-carousel-next]")),r||(r=this.addBtn(Vc)),this.next=r,n||(n=i.querySelector("[data-carousel-prev]")),n||(n=this.addBtn(Zy)),this.prev=n}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(tu,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});var iu=class extends ni{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){let{nav:e,target:t}=this;e&&t&&(e.options.initialSlide=t.options.initialPage,e.state===ct.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),t.state===ct.Ready?this.onTargetReady(t):t.on("ready",this.onTargetReady))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,t,i){this.onNavTouch(e,e.panzoom,i)}onNavTouch(e,t,i){var n,r;if(Math.abs(t.dragOffset.x)>3||Math.abs(t.dragOffset.y)>3)return;let o=i.target,{nav:a,target:l}=this;if(!a||!l||!o)return;let c=o.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!c)return;let u=parseInt(c.dataset.index||"",10)||0,h=l.getPageForSlide(u),f=a.getPageForSlide(u);a.slideTo(f),l.slideTo(h,{friction:((r=(n=this.nav)===null||n===void 0?void 0:n.plugins)===null||r===void 0?void 0:r.Sync.option("friction"))||0}),this.markSelectedSlide(u)}onNavCreateSlide(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}onTargetChange(){var e,t;let{target:i,nav:n}=this;if(!i||!n||n.state!==ct.Ready||i.state!==ct.Ready)return;let r=(t=(e=i.pages[i.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index,o=n.getPageForSlide(r);this.markSelectedSlide(r),n.slideTo(o,n.prevPage===null&&i.prevPage===null?{friction:0}:void 0)}markSelectedSlide(e){let t=this.nav;t&&t.state===ct.Ready&&(this.selectedIndex=e,[...t.slides].map(i=>{i.el&&i.el.classList[i.index===e?"add":"remove"]("is-nav-selected")}))}attach(){let e=this,t=e.options.target,i=e.options.nav;t?e.addAsNavFor(t):i&&e.addAsTargetFor(i)}detach(){let e=this,t=e.nav,i=e.target;t&&(t.off("ready",e.onNavReady),t.off("createSlide",e.onNavCreateSlide),t.off("Panzoom.click",e.onNavClick),t.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,i&&(i.off("ready",e.onTargetReady),i.off("refresh",e.onTargetChange),i.off("change",e.onTargetChange)),e.target=null}};Object.defineProperty(iu,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});var V_={Navigation:tu,Dots:eu,Sync:iu},qc="animationend",Qy="isSelected",Wc="slide",ro=class s extends va{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===ct.Ready}get isInfinite(){let e=!1,{contentDim:t,viewportDim:i,pages:n,slides:r}=this,o=r[0];return n.length>=2&&o&&t+o.dim>=i&&(e=this.option("infinite")),e}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(e,t={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ct.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof e=="string"&&(e=document.querySelector(e)),!e||!Yt(e))throw new Error("No Element found");this.container=e,this.slideNext=Ky(this.slideNext.bind(this),150),this.slidePrev=Ky(this.slidePrev.bind(this),150),this.userOptions=t,this.userPlugins=i,queueMicrotask(()=>{this.processOptions()})}processOptions(){var e,t;let i=Xt({},s.defaults,this.userOptions),n="",r=i.breakpoints;if(r&&Of(r))for(let[o,a]of Object.entries(r))window.matchMedia(o).matches&&Of(a)&&(n+=o,Xt(i,a));n===this.bp&&this.state!==ct.Init||(this.bp=n,this.state===ct.Ready&&(i.initialSlide=((t=(e=this.pages[this.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index)||0),this.state!==ct.Init&&this.destroy(),super.setOptions(i),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=ct.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},s.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=ct.Ready,this.emit("ready")}initLayout(){let{container:e}=this,t=this.option("classes");ge(e,this.cn("container")),Zi(e,t.isLTR,!this.isRTL),Zi(e,t.isRTL,this.isRTL),Zi(e,t.isVertical,!this.isHorizontal),Zi(e,t.isHorizontal,this.isHorizontal);let i=this.option("viewport")||e.querySelector(`.${t.viewport}`);i||(i=document.createElement("div"),ge(i,t.viewport),i.append(...Jy(e,`.${t.slide}`)),e.prepend(i)),i.addEventListener("scroll",this.onScroll);let n=this.option("track")||e.querySelector(`.${t.track}`);n||(n=document.createElement("div"),ge(n,t.track),n.append(...Array.from(i.childNodes))),n.setAttribute("aria-live","polite"),i.contains(n)||i.prepend(n),this.viewport=i,this.track=n,this.emit("initLayout")}initSlides(){let{track:e}=this;if(!e)return;let t=[...this.slides],i=[];[...Jy(e,`.${this.cn(Wc)}`)].forEach(n=>{if(Yt(n)){let r=mf({el:n,isDom:!0,index:this.slides.length});i.push(r)}});for(let n of[...this.option("slides",[])||[],...t])i.push(mf(n));this.slides=i;for(let n=0;n<this.slides.length;n++)this.slides[n].index=n;for(let n of i)this.emit("beforeInitSlide",n,n.index),this.emit("initSlide",n,n.index);this.emit("initSlides")}setInitialPage(){let e=this.option("initialSlide");this.page=typeof e=="number"?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){let{track:e,pages:t,isHorizontal:i}=this;if(!e||!t.length)return;let n=this.page;t[n]||(this.page=n=0);let r=(t[n].pos||0)*(this.isRTL&&i?1:-1),o=i?`${r}px`:"0",a=i?"0":`${r}px`;e.style.transform=`translate3d(${o}, ${a}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);let e=this.option("Panzoom")||{};this.panzoom=new jn(this.viewport,Xt({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:t=>!(this.pages.length<2&&!t.options.infinite),bounds:()=>this.getBounds(),maxVelocity:t=>Math.abs(t.target[this.axis]-t.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",(t,i,...n)=>{this.emit(`Panzoom.${i}`,t,...n)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){let e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let e=[],{contentDim:t,viewportDim:i}=this,n=this.option("slidesPerPage");n=(n==="auto"||t<=i)&&this.option("fill")!==!1?1/0:parseFloat(n+"");let r=0,o=0,a=0;for(let l of this.slides)(!e.length||o+l.dim-i>.05||a>=n)&&(e.push(U_()),r=e.length-1,o=0,a=0),e[r].slides.push(l),o+=l.dim+l.gap,a++;return e}processPages(){let e=this.pages,{contentDim:t,viewportDim:i,isInfinite:n}=this,r=this.option("center"),o=this.option("fill"),a=o&&r&&t>i&&!n;if(e.forEach((u,h)=>{var f;u.index=h,u.pos=((f=u.slides[0])===null||f===void 0?void 0:f.pos)||0,u.dim=0;for(let[p,v]of u.slides.entries())u.dim+=v.dim,p<u.slides.length-1&&(u.dim+=v.gap);a&&u.pos+.5*u.dim<.5*i?u.pos=0:a&&u.pos+.5*u.dim>=t-.5*i?u.pos=t-i:r&&(u.pos+=-.5*(i-u.dim))}),e.forEach(u=>{o&&!n&&t>i&&(u.pos=Math.max(u.pos,0),u.pos=Math.min(u.pos,t-i)),u.pos=pe(u.pos,1e3),u.dim=pe(u.dim,1e3),Math.abs(u.pos)<=.1&&(u.pos=0)}),n)return e;let l=[],c;return e.forEach(u=>{let h=Object.assign({},u);c&&h.pos===c.pos?(c.dim+=h.dim,c.slides=[...c.slides,...h.slides]):(h.index=l.length,c=h,l.push(h))}),l}getPageFromIndex(e=0){let t=this.pages.length,i;return e=parseInt((e||0).toString())||0,i=this.isInfinite?(e%t+t)%t:Math.max(Math.min(e,t-1),0),i}getSlideMetrics(e){var t,i;let n=this.isHorizontal?"width":"height",r=0,o=0,a=e.el,l=!(!a||a.parentNode);if(a?r=parseFloat(a.dataset[n]||"")||0:(a=document.createElement("div"),a.style.visibility="hidden",(this.track||document.body).prepend(a)),ge(a,this.cn(Wc)+" "+e.class+" "+e.customClass),r)a.style[n]=`${r}px`,a.style[n==="width"?"height":"width"]="";else{l&&(this.track||document.body).prepend(a),r=a.getBoundingClientRect()[n]*Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1);let u=a[this.isHorizontal?"offsetWidth":"offsetHeight"];u-1>r&&(r=u)}let c=getComputedStyle(a);return c.boxSizing==="content-box"&&(this.isHorizontal?(r+=parseFloat(c.paddingLeft)||0,r+=parseFloat(c.paddingRight)||0):(r+=parseFloat(c.paddingTop)||0,r+=parseFloat(c.paddingBottom)||0)),o=parseFloat(c[this.isHorizontal?"marginRight":"marginBottom"])||0,l?(i=a.parentElement)===null||i===void 0||i.removeChild(a):e.el||a.remove(),{dim:pe(r,1e3),gap:pe(o,1e3)}}getBounds(){let{isInfinite:e,isRTL:t,isHorizontal:i,pages:n}=this,r={min:0,max:0};if(e)r={min:-1/0,max:1/0};else if(n.length){let o=n[0].pos,a=n[n.length-1].pos;r=t&&i?{min:o,max:a}:{min:-1*a,max:-1*o}}return{x:i?r:{min:0,max:0},y:i?{min:0,max:0}:r}}repositionSlides(){let e,{isHorizontal:t,isRTL:i,isInfinite:n,viewport:r,viewportDim:o,contentDim:a,page:l,pages:c,slides:u,panzoom:h}=this,f=0,p=0,v=0,w=0;h?w=-1*h.current[this.axis]:c[l]&&(w=c[l].pos||0),e=t?i?"right":"left":"top",i&&t&&(w*=-1);for(let D of u){let R=D.el;R?(e==="top"?(R.style.right="",R.style.left=""):R.style.top="",D.index!==f?R.style[e]=p===0?"":`${pe(p,1e3)}px`:R.style[e]="",v+=D.dim+D.gap,f++):p+=D.dim+D.gap}if(n&&v&&r){let D=getComputedStyle(r),R="padding",$=t?"Right":"Bottom",U=parseFloat(D[R+(t?"Left":"Top")]);w-=U,o+=U,o+=parseFloat(D[R+$]);for(let Z of u)Z.el&&(pe(Z.pos)<pe(o)&&pe(Z.pos+Z.dim+Z.gap)<pe(w)&&pe(w)>pe(a-o)&&(Z.el.style[e]=`${pe(p+v,1e3)}px`),pe(Z.pos+Z.gap)>=pe(a-o)&&pe(Z.pos)>pe(w+o)&&pe(w)<pe(o)&&(Z.el.style[e]=`-${pe(v,1e3)}px`))}let S,A,k=[...this.inTransition];if(k.length>1&&(S=c[k[0]],A=c[k[1]]),S&&A){let D=0;for(let R of u)R.el?this.inTransition.has(R.index)&&S.slides.indexOf(R)<0&&(R.el.style[e]=`${pe(D+(S.pos-A.pos),1e3)}px`):D+=R.dim+R.gap}}createSlideEl(e){let{track:t,slides:i}=this;if(!t||!e||e.el&&e.el.parentNode)return;let n=e.el||document.createElement("div");ge(n,this.cn(Wc)),ge(n,e.class),ge(n,e.customClass);let r=e.html;r&&(r instanceof HTMLElement?n.appendChild(r):n.innerHTML=e.html+"");let o=[];i.forEach((u,h)=>{u.el&&o.push(h)});let a=e.index,l=null;o.length&&(l=i[o.reduce((u,h)=>Math.abs(h-a)<Math.abs(u-a)?h:u)]);let c=l&&l.el&&l.el.parentNode?l.index<e.index?l.el.nextSibling:l.el:null;t.insertBefore(n,t.contains(c)?c:null),e.el=n,this.emit("createSlide",e)}removeSlideEl(e,t=!1){let i=e?.el;if(!i||!i.parentNode)return;let n=this.cn(Qy);if(i.classList.contains(n)&&(ke(i,n),this.emit("unselectSlide",e)),e.isDom&&!t)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",e);let r=new CustomEvent(qc);i.dispatchEvent(r),e.el&&(e.el.remove(),e.el=null)}transitionTo(e=0,t=this.option("transition")){var i,n,r,o;if(!t)return!1;let a=this.page,{pages:l,panzoom:c}=this;e=parseInt((e||0).toString())||0;let u=this.getPageFromIndex(e);if(!c||!l[u]||l.length<2||Math.abs((((n=(i=l[a])===null||i===void 0?void 0:i.slides[0])===null||n===void 0?void 0:n.dim)||0)-this.viewportDim)>1)return!1;let h=e>a?1:-1;this.isInfinite&&(a===0&&e===l.length-1&&(h=-1),a===l.length-1&&e===0&&(h=1));let f=l[u].pos*(this.isRTL?1:-1);if(a===u&&Math.abs(f-c.target[this.axis])<1)return!1;this.clearTransitions();let p=c.isResting;ge(this.container,this.cn("inTransition"));let v=((r=l[a])===null||r===void 0?void 0:r.slides[0])||null,w=((o=l[u])===null||o===void 0?void 0:o.slides[0])||null;this.inTransition.add(w.index),this.createSlideEl(w);let S=v.el,A=w.el;p||t===Wc||(t="fadeFast",S=null);let k=this.isRTL?"next":"prev",D=this.isRTL?"prev":"next";return S&&(this.inTransition.add(v.index),v.transition=t,S.addEventListener(qc,this.onAnimationEnd),S.classList.add(`f-${t}Out`,`to-${h>0?D:k}`)),A&&(w.transition=t,A.addEventListener(qc,this.onAnimationEnd),A.classList.add(`f-${t}In`,`from-${h>0?k:D}`)),c.current[this.axis]=f,c.target[this.axis]=f,c.requestTick(),this.onChange(u),!0}manageSlideVisiblity(){let e=new Set,t=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(let n of this.slides)i.has(n)?e.add(n):t.add(n);for(let n of this.inTransition)e.add(this.slides[n]);for(let n of e)this.createSlideEl(n),this.lazyLoadSlide(n);for(let n of t)e.has(n)||this.removeSlideEl(n);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;let e="aria-hidden",t=this.cn(Qy);if(t)for(let i of this.slides){let n=i.el;n&&(n.dataset.index=`${i.index}`,n.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?n.removeAttribute(e):n.setAttribute(e,"true"):this.pages[this.page].slides.includes(i)?(n.classList.contains(t)||(ge(n,t),this.emit("selectSlide",i)),n.removeAttribute(e)):(n.classList.contains(t)&&(ke(n,t),this.emit("unselectSlide",i)),n.setAttribute(e,"true")))}}flipInfiniteTrack(){let{axis:e,isHorizontal:t,isInfinite:i,isRTL:n,viewportDim:r,contentDim:o}=this,a=this.panzoom;if(!a||!i)return;let l=a.current[e],c=a.target[e]-l,u=0,h=.5*r;n&&t?(l<-h&&(u=-1,l+=o),l>o-h&&(u=1,l-=o)):(l>h&&(u=1,l-=o),l<-o+h&&(u=-1,l+=o)),u&&(a.current[e]=l,a.target[e]=l+c)}lazyLoadImg(e,t){let i=this,n="f-fadeIn",r="is-preloading",o=!1,a=null,l=()=>{o||(o=!0,a&&(a.remove(),a=null),ke(t,r),t.complete&&(ge(t,n),setTimeout(()=>{ke(t,n)},350)),this.option("adaptiveHeight")&&e.el&&this.pages[this.page].slides.indexOf(e)>-1&&(i.updateMetrics(),i.setViewportHeight()),this.emit("load",e))};ge(t,r),t.src=t.dataset.lazySrcset||t.dataset.lazySrc||"",delete t.dataset.lazySrc,delete t.dataset.lazySrcset,t.addEventListener("error",()=>{l()}),t.addEventListener("load",()=>{l()}),setTimeout(()=>{let c=t.parentNode;c&&e.el&&(t.complete?l():o||(a=Ji(Df),c.insertBefore(a,t)))},300)}lazyLoadSlide(e){let t=e&&e.el;if(!t)return;let i=new Set,n=Array.from(t.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));t.dataset.lazySrc&&n.push(t),n.map(r=>{r instanceof HTMLImageElement?i.add(r):r instanceof HTMLElement&&r.dataset.lazySrc&&(r.style.backgroundImage=`url('${r.dataset.lazySrc}')`,delete r.dataset.lazySrc)});for(let r of i)this.lazyLoadImg(e,r)}onAnimationEnd(e){var t;let i=e.target,n=i?parseInt(i.dataset.index||"",10)||0:-1,r=this.slides[n],o=e.animationName;if(!i||!r||!o)return;let a=!!this.inTransition.has(n)&&r.transition;a&&o.substring(0,a.length+2)===`f-${a}`&&this.inTransition.delete(n),this.inTransition.size||this.clearTransitions(),n===this.page&&(!((t=this.panzoom)===null||t===void 0)&&t.isResting)&&this.emit("settle")}onDecel(e,t=0,i=0,n=0,r=0){if(this.option("dragFree"))return void this.setPageFromPosition();let{isRTL:o,isHorizontal:a,axis:l,pages:c}=this,u=c.length,h=Math.abs(Math.atan2(i,t)/(Math.PI/180)),f=0;if(f=h>45&&h<135?a?0:i:a?t:0,!u)return;let p=this.page,v=o&&a?1:-1,w=e.current[l]*v,{pageIndex:S}=this.getPageFromPosition(w);Math.abs(f)>5?(c[p].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(p=S),p=o&&a?f<0?p-1:p+1:f<0?p+1:p-1):p=n===0&&r===0?p:S,this.slideTo(p,{transition:!1,friction:e.option("decelFriction")})}onClick(e){let t=e.target,i=t&&Yt(t)?t.dataset:null,n,r;i&&(i.carouselPage!==void 0?(r="slideTo",n=i.carouselPage):i.carouselNext!==void 0?r="slideNext":i.carouselPrev!==void 0&&(r="slidePrev")),r?(e.preventDefault(),e.stopPropagation(),t&&!t.hasAttribute("disabled")&&this[r](n)):this.emit("click",e)}onSlideTo(e){let t=e.detail||0;this.slideTo(this.getPageForSlide(t),{friction:0})}onChange(e,t=0){let i=this.page;this.prevPage=i,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==i&&(this.markSelectedSlides(),this.emit("change",e,i,t))}onRefresh(){let e=this.contentDim,t=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===t||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var e;(e=this.viewport)===null||e===void 0||e.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,t=null){this.destroy(),this.state=ct.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=t||this.userPlugins,this.processOptions()}slideTo(e=0,{friction:t=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===ct.Destroy)return;e=parseInt((e||0).toString())||0;let n=this.getPageFromIndex(e),{axis:r,isHorizontal:o,isRTL:a,pages:l,panzoom:c}=this,u=l.length,h=a&&o?1:-1;if(!c||!u)return;if(this.page!==n){let p=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",p,e),p.defaultPrevented)return}if(this.transitionTo(e,i))return;let f=l[n].pos;if(this.isInfinite){let p=this.contentDim,v=c.target[r]*h;u===2?f+=p*Math.floor(parseFloat(e+"")/2):f=[f,f-p,f+p].reduce(function(w,S){return Math.abs(S-v)<Math.abs(w-v)?S:w})}f*=h,Math.abs(c.target[r]-f)<1||(c.panTo({x:o?f:0,y:o?0:f,friction:t}),this.onChange(n))}slideToClosest(e){if(this.panzoom){let{pageIndex:t}=this.getPageFromPosition();this.slideTo(t,e)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),ke(this.container,this.cn("inTransition"));let e=["to-prev","to-next","from-prev","from-next"];for(let t of this.slides){let i=t.el;if(i){i.removeEventListener(qc,this.onAnimationEnd),i.classList.remove(...e);let n=t.transition;n&&i.classList.remove(`f-${n}Out`,`f-${n}In`)}}this.manageSlideVisiblity()}addSlide(e,t){var i,n,r,o;let a=this.panzoom,l=((i=this.pages[this.page])===null||i===void 0?void 0:i.pos)||0,c=((n=this.pages[this.page])===null||n===void 0?void 0:n.dim)||0,u=this.contentDim<this.viewportDim,h=Array.isArray(t)?t:[t],f=[];for(let p of h)f.push(mf(p));this.slides.splice(e,0,...f);for(let p=0;p<this.slides.length;p++)this.slides[p].index=p;for(let p of f)this.emit("beforeInitSlide",p,p.index);if(this.page>=e&&(this.page+=f.length),this.updateMetrics(),a){let p=((r=this.pages[this.page])===null||r===void 0?void 0:r.pos)||0,v=((o=this.pages[this.page])===null||o===void 0?void 0:o.dim)||0,w=this.pages.length||1,S=this.isRTL?c-v:v-c,A=this.isRTL?l-p:p-l;u&&w===1?(e<=this.page&&(a.current[this.axis]-=S,a.target[this.axis]-=S),a.panTo({[this.isHorizontal?"x":"y"]:-1*p})):A&&e<=this.page&&(a.target[this.axis]-=A,a.current[this.axis]-=A,a.requestTick())}for(let p of f)this.emit("initSlide",p,p.index)}prependSlide(e){this.addSlide(0,e)}appendSlide(e){this.addSlide(this.slides.length,e)}removeSlide(e){let t=this.slides.length;e=(e%t+t)%t;let i=this.slides[e];if(i){this.removeSlideEl(i,!0),this.slides.splice(e,1);for(let n=0;n<this.slides.length;n++)this.slides[n].index=n;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",i)}}updateMetrics(){let{panzoom:e,viewport:t,track:i,slides:n,isHorizontal:r,isInfinite:o}=this;if(!i)return;let a=r?"width":"height",l=r?"offsetWidth":"offsetHeight";if(t){let h=Math.max(t[l],pe(t.getBoundingClientRect()[a],1e3)),f=getComputedStyle(t),p="padding",v=r?"Right":"Bottom";h-=parseFloat(f[p+(r?"Left":"Top")])+parseFloat(f[p+v]),this.viewportDim=h}let c,u=0;for(let[h,f]of n.entries()){let p=0,v=0;!f.el&&c?(p=c.dim,v=c.gap):({dim:p,gap:v}=this.getSlideMetrics(f),c=f),p=pe(p,1e3),v=pe(v,1e3),f.dim=p,f.gap=v,f.pos=u,u+=p,(o||h<n.length-1)&&(u+=v)}u=pe(u,1e3),this.contentDim=u,e&&(e.contentRect[a]=u,e.contentRect[r?"fullWidth":"fullHeight"]=u),this.pages=this.createPages(),this.pages=this.processPages(),this.state===ct.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,t=!1,i=!1){e===void 0&&(e=this.page);let n=this,r=n.panzoom,o=n.contentDim,a=n.pages[e]||0;if(!a||!r)return e>this.page?-1:1;let l=-1*r.current.e,c=pe((l-a.pos)/(1*a.dim),1e3),u=c,h=c;this.isInfinite&&i!==!0&&(u=pe((l-a.pos+o)/(1*a.dim),1e3),h=pe((l-a.pos-o)/(1*a.dim),1e3));let f=[c,u,h].reduce(function(p,v){return Math.abs(v)<Math.abs(p)?v:p});return t?f:f>1?1:f<-1?-1:f}setViewportHeight(){let{page:e,pages:t,viewport:i,isHorizontal:n}=this;if(!i||!t[e])return;let r=0;n&&this.track&&(this.track.style.height="auto",t[e].slides.forEach(o=>{o.el&&(r=Math.max(r,o.el.offsetHeight))})),i.style.height=r?`${r}px`:""}getPageForSlide(e){for(let t of this.pages)for(let i of t.slides)if(i.index===e)return t.index;return-1}getVisibleSlides(e=0){var t;let i=new Set,{panzoom:n,contentDim:r,viewportDim:o,pages:a,page:l}=this;if(o){r=r+((t=this.slides[this.slides.length-1])===null||t===void 0?void 0:t.gap)||0;let c=0;c=n&&n.state!==Fe.Init&&n.state!==Fe.Destroy?-1*n.current[this.axis]:a[l]&&a[l].pos||0,this.isInfinite&&(c-=Math.floor(c/r)*r),this.isRTL&&this.isHorizontal&&(c*=-1);let u=c-o*e,h=c+o*(e+1),f=this.isInfinite?[-1,0,1]:[0];for(let p of this.slides)for(let v of f){let w=p.pos+v*r,S=w+p.dim+p.gap;w<h&&S>u&&i.add(p)}}return i}getPageFromPosition(e){let{viewportDim:t,contentDim:i,slides:n,pages:r,panzoom:o}=this,a=r.length,l=n.length,c=n[0],u=n[l-1],h=this.option("center"),f=0,p=0,v=0,w=e===void 0?-1*(o?.target[this.axis]||0):e;h&&(w+=.5*t),this.isInfinite?(w<c.pos-.5*u.gap&&(w-=i,v=-1),w>u.pos+u.dim+.5*u.gap&&(w-=i,v=1)):w=Math.max(c.pos||0,Math.min(w,u.pos));let S=u,A=n.find(k=>{let D=k.pos-.5*S.gap,R=k.pos+k.dim+.5*k.gap;return S=k,w>=D&&w<R});return A||(A=u),p=this.getPageForSlide(A.index),f=p+v*a,{page:f,pageIndex:p}}setPageFromPosition(){let{pageIndex:e}=this.getPageFromPosition();this.onChange(e)}destroy(){if([ct.Destroy].includes(this.state))return;this.state=ct.Destroy;let{container:e,viewport:t,track:i,slides:n,panzoom:r}=this,o=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),r&&(r.destroy(),this.panzoom=null),n&&n.forEach(l=>{this.removeSlideEl(l)}),this.detachPlugins(),t&&(t.removeEventListener("scroll",this.onScroll),t.offsetParent&&i&&i.offsetParent&&t.replaceWith(...i.childNodes));for(let[l,c]of Object.entries(o))l!=="container"&&c&&e.classList.remove(c);this.track=null,this.viewport=null,this.page=0,this.slides=[];let a=this.events.get("ready");this.events=new Map,a&&this.events.set("ready",a)}};Object.defineProperty(ro,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:jn}),Object.defineProperty(ro,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:H_}),Object.defineProperty(ro,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:V_});var E0=function(s){if(!Yt(s))return 0;let e=window.scrollY,t=window.innerHeight,i=e+t,n=s.getBoundingClientRect(),r=n.y+e,o=n.height,a=r+o;if(e>a||i<r)return 0;if(e<r&&i>a||r<e&&a>i)return 100;let l=o;r<e&&(l-=e-r),a>i&&(l-=a-i);let c=l/t*100;return Math.round(c)},ga=!(typeof window>"u"||!window.document||!window.document.createElement),gf,vf=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),e0=s=>{if(s&&ga){gf===void 0&&document.createElement("div").focus({get preventScroll(){return gf=!0,!1}});try{if(gf)s.focus({preventScroll:!0});else{let e=window.scrollY||document.body.scrollTop,t=window.scrollX||document.body.scrollLeft;s.focus(),document.body.scrollTo({top:e,left:t,behavior:"auto"})}}catch{}}},S0=()=>{let s=document,e,t="",i="",n="";return s.fullscreenEnabled?(t="requestFullscreen",i="exitFullscreen",n="fullscreenElement"):s.webkitFullscreenEnabled&&(t="webkitRequestFullscreen",i="webkitExitFullscreen",n="webkitFullscreenElement"),t&&(e={request:function(r=s.documentElement){return t==="webkitRequestFullscreen"?r[t](Element.ALLOW_KEYBOARD_INPUT):r[t]()},exit:function(){return s[n]&&s[i]()},isFullscreen:function(){return s[n]}}),e},Lf={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},w0),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},trapFocus:!0,wheel:"zoom"},yt,Mt;(function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Closing=2]="Closing",s[s.CustomClosing=3]="CustomClosing",s[s.Destroy=4]="Destroy"})(yt||(yt={})),function(s){s[s.Loading=0]="Loading",s[s.Opening=1]="Opening",s[s.Ready=2]="Ready",s[s.Closing=3]="Closing"}(Mt||(Mt={}));var t0="",ma=!1,Gc=!1,Hn=null,A0=()=>{let s="",e="",t=Pi.getInstance();if(t){let i=t.carousel,n=t.getSlide();if(i&&n){let r=n.slug||void 0,o=n.triggerEl||void 0;e=r||t.option("slug")||"",!e&&o&&o.dataset&&(e=o.dataset.fancybox||""),e&&e!=="true"&&(s="#"+e+(!r&&i.slides.length>1?"-"+(n.index+1):""))}}return{hash:s,slug:e,index:1}},su=()=>{let s=new URL(document.URL).hash,e=s.slice(1).split("-"),t=e[e.length-1],i=t&&/^\+?\d+$/.test(t)&&parseInt(e.pop()||"1",10)||1;return{hash:s,slug:e.join("-"),index:i}},T0=()=>{let{slug:s,index:e}=su();if(!s)return;let t=document.querySelector(`[data-slug="${s}"]`);if(t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),Pi.getInstance())return;let i=document.querySelectorAll(`[data-fancybox="${s}"]`);i.length&&(t=i[e-1],t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},x0=()=>{if(Pi.defaults.Hash===!1)return;let s=Pi.getInstance();if(s?.options.Hash===!1)return;let{slug:e,index:t}=su(),{slug:i}=A0();s&&(e===i?s.jumpTo(t-1):(ma=!0,s.close())),T0()},C0=()=>{Hn&&clearTimeout(Hn),queueMicrotask(()=>{x0()})},i0=()=>{window.addEventListener("hashchange",C0,!1),setTimeout(()=>{x0()},500)};ga&&(/complete|interactive|loaded/.test(document.readyState)?i0():document.addEventListener("DOMContentLoaded",i0));var Yc="is-zooming-in",nu=class extends ni{onCreateSlide(e,t,i){let n=this.instance.optionFor(i,"src")||"";i.el&&i.type==="image"&&typeof n=="string"&&this.setImage(i,n)}onRemoveSlide(e,t,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(e,t,i,n){ke(this.instance.container,Yc);for(let r of t.slides){let o=r.panzoom;o&&r.index!==i&&o.reset(.35)}}onClose(){var e;let t=this.instance,i=t.container,n=t.getSlide();if(!i||!i.parentElement||!n)return;let{el:r,contentEl:o,panzoom:a,thumbElSrc:l}=n;if(!r||!l||!o||!a||a.isContentLoading||a.state===Fe.Init||a.state===Fe.Destroy)return;a.updateMetrics();let c=this.getZoomInfo(n);if(!c)return;this.instance.state=yt.CustomClosing,i.classList.remove(Yc),i.classList.add("is-zooming-out"),o.style.backgroundImage=`url('${l}')`;let u=i.getBoundingClientRect();(((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1)===1&&Object.assign(i.style,{position:"absolute",top:`${i.offsetTop+window.scrollY}px`,left:`${i.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${u.width}px`,height:`${u.height}px`,overflow:"hidden"});let{x:h,y:f,scale:p,opacity:v}=c;if(v){let w=((S,A,k,D)=>{let R=A-S,$=D-k;return U=>k+((U-S)/R*$||0)})(a.scale,p,1,0);a.on("afterTransform",()=>{o.style.opacity=w(a.scale)+""})}a.on("endAnimation",()=>{t.destroy()}),a.target.a=p,a.target.b=0,a.target.c=0,a.target.d=p,a.panTo({x:h,y:f,scale:p,friction:v?.2:.33,ignoreBounds:!0}),a.isResting&&t.destroy()}setImage(e,t){let i=this.instance;e.src=t,this.process(e,t).then(n=>{let{contentEl:r,imageEl:o,thumbElSrc:a,el:l}=e;if(i.isClosing()||!r||!o)return;r.offsetHeight;let c=!!i.isOpeningSlide(e)&&this.getZoomInfo(e);if(this.option("protected")&&l){l.addEventListener("contextmenu",f=>{f.preventDefault()});let h=document.createElement("div");ge(h,"fancybox-protected"),r.appendChild(h)}if(a&&c){let h=n.contentRect,f=Math.max(h.fullWidth,h.fullHeight),p=null;!c.opacity&&f>1200&&(p=document.createElement("img"),ge(p,"fancybox-ghost"),p.src=a,r.appendChild(p));let v=()=>{p&&(ge(p,"f-fadeFastOut"),setTimeout(()=>{p&&(p.remove(),p=null)},200))};(u=a,new Promise((w,S)=>{let A=new Image;A.onload=w,A.onerror=S,A.src=u})).then(()=>{i.hideLoading(e),e.state=Mt.Opening,this.instance.emit("reveal",e),this.zoomIn(e).then(()=>{v(),this.instance.done(e)},()=>{}),p&&setTimeout(()=>{v()},f>2500?800:200)},()=>{i.hideLoading(e),i.revealContent(e)})}else{let h=this.optionFor(e,"initialSize"),f=this.optionFor(e,"zoom"),p={event:i.prevMouseMoveEvent||i.options.event,friction:f?.12:0},v=i.optionFor(e,"showClass")||void 0,w=!0;i.isOpeningSlide(e)&&(h==="full"?n.zoomToFull(p):h==="cover"?n.zoomToCover(p):h==="max"?n.zoomToMax(p):w=!1,n.stop("current")),w&&v&&(v=n.isDragging?"f-fadeIn":""),i.hideLoading(e),i.revealContent(e,v)}var u},()=>{i.setError(e,"{{IMAGE_ERROR}}")})}process(e,t){return new Promise((i,n)=>{var r;let o=this.instance,a=e.el;o.clearContent(e),o.showLoading(e);let l=this.optionFor(e,"content");if(typeof l=="string"&&(l=Ji(l)),!l||!Yt(l)){if(l=document.createElement("img"),l instanceof HTMLImageElement){let c="",u=e.caption;c=typeof u=="string"&&u?u.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${e.index+1} of ${((r=o.carousel)===null||r===void 0?void 0:r.pages.length)||1}`,l.src=t||"",l.alt=c,l.draggable=!1,e.srcset&&l.setAttribute("srcset",e.srcset),this.instance.isOpeningSlide(e)&&(l.fetchPriority="high")}e.sizes&&l.setAttribute("sizes",e.sizes)}ge(l,"fancybox-image"),e.imageEl=l,o.setContent(e,l,!1),e.panzoom=new jn(a,Xt({transformParent:!0},this.option("Panzoom")||{},{content:l,width:(c,u)=>o.optionFor(e,"width","auto",u)||"auto",height:(c,u)=>o.optionFor(e,"height","auto",u)||"auto",wheel:()=>{let c=o.option("wheel");return(c==="zoom"||c=="pan")&&c},click:(c,u)=>{var h,f;if(o.isCompact||o.isClosing()||e.index!==((h=o.getSlide())===null||h===void 0?void 0:h.index))return!1;if(u){let v=u.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(v.nodeName))return!1}let p=!u||u.target&&((f=e.contentEl)===null||f===void 0?void 0:f.contains(u.target));return o.option(p?"contentClick":"backdropClick")||!1},dblClick:()=>o.isCompact?"toggleZoom":o.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:c=>{i(c)},error:()=>{n()},destroy:()=>{n()}}}))})}zoomIn(e){return new Promise((t,i)=>{let n=this.instance,r=n.container,{panzoom:o,contentEl:a,el:l}=e;o&&o.updateMetrics();let c=this.getZoomInfo(e);if(!(c&&l&&a&&o&&r))return void i();let{x:u,y:h,scale:f,opacity:p}=c,v=()=>{e.state!==Mt.Closing&&(p&&(a.style.opacity=Math.max(Math.min(1,1-(1-o.scale)/(1-f)),0)+""),o.scale>=1&&o.scale>o.targetScale-.1&&t(o))},w=k=>{(k.scale<.99||k.scale>1.01)&&!k.isDragging||(ke(r,Yc),a.style.opacity="",k.off("endAnimation",w),k.off("touchStart",w),k.off("afterTransform",v),t(k))};o.on("endAnimation",w),o.on("touchStart",w),o.on("afterTransform",v),o.on(["error","destroy"],()=>{i()}),o.panTo({x:u,y:h,scale:f,friction:0,ignoreBounds:!0}),o.stop("current");let S={event:o.panMode==="mousemove"?n.prevMouseMoveEvent||n.options.event:void 0},A=this.optionFor(e,"initialSize");ge(r,Yc),n.hideLoading(e),A==="full"?o.zoomToFull(S):A==="cover"?o.zoomToCover(S):A==="max"?o.zoomToMax(S):o.reset(.172)})}getZoomInfo(e){let{el:t,imageEl:i,thumbEl:n,panzoom:r}=e,o=this.instance,a=o.container;if(!t||!i||!n||!r||E0(n)<3||!this.optionFor(e,"zoom")||!a||o.state===yt.Destroy||getComputedStyle(a).getPropertyValue("--f-images-zoom")==="0")return!1;let l=window.visualViewport||null;if((l?l.scale:1)!==1)return!1;let{top:c,left:u,width:h,height:f}=n.getBoundingClientRect(),{top:p,left:v,fitWidth:w,fitHeight:S}=r.contentRect;if(!(h&&f&&w&&S))return!1;let A=r.container.getBoundingClientRect();v+=A.left,p+=A.top;let k=-1*(v+.5*w-(u+.5*h)),D=-1*(p+.5*S-(c+.5*f)),R=h/w,$=this.option("zoomOpacity")||!1;return $==="auto"&&($=Math.abs(h/f-w/S)>.1),{x:k,y:D,scale:R,opacity:$}}attach(){let e=this,t=e.instance;t.on("Carousel.change",e.onChange),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("close",e.onClose)}detach(){let e=this,t=e.instance;t.off("Carousel.change",e.onChange),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("close",e.onClose)}};Object.defineProperty(nu,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;var bf="html",s0="image",yf="map",bs="youtube",Bn="vimeo",pa="html5video",n0=(s,e={})=>{let t=new URL(s),i=new URLSearchParams(t.search),n=new URLSearchParams;for(let[a,l]of[...i,...Object.entries(e)]){let c=l+"";if(a==="t"){let u=c.match(/((\d*)m)?(\d*)s?/);u&&n.set("start",60*parseInt(u[2]||"0")+parseInt(u[3]||"0")+"")}else n.set(a,c)}let r=n+"",o=s.match(/#t=((.*)?\d+s)/);return o&&(r+=`#t=${o[1]}`),r},q_={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},W_=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"],ru=class extends ni{onBeforeInitSlide(e,t,i){this.processType(i)}onCreateSlide(e,t,i){this.setContent(i)}onClearContent(e,t){t.xhr&&(t.xhr.abort(),t.xhr=null);let i=t.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",t.iframeEl=null);let n=t.contentEl,r=t.placeholderEl;if(t.type==="inline"&&n&&r)n.classList.remove("fancybox__content"),getComputedStyle(n).getPropertyValue("display")!=="none"&&(n.style.display="none"),setTimeout(()=>{r&&(n&&r.parentNode&&r.parentNode.insertBefore(n,r),r.remove())},0),t.contentEl=void 0,t.placeholderEl=void 0;else for(;t.el&&t.el.firstChild;)t.el.removeChild(t.el.firstChild)}onSelectSlide(e,t,i){i.state===Mt.Ready&&this.playVideo()}onUnselectSlide(e,t,i){var n,r;if(i.type===pa){try{(r=(n=i.el)===null||n===void 0?void 0:n.querySelector("video"))===null||r===void 0||r.pause()}catch{}return}let o;i.type===Bn?o={method:"pause",value:"true"}:i.type===bs&&(o={event:"command",func:"pauseVideo"}),o&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(o),"*"),i.poller&&clearTimeout(i.poller)}onDone(e,t){e.isCurrentSlide(t)&&!e.isClosing()&&this.playVideo()}onRefresh(e,t){t.slides.forEach(i=>{i.el&&(this.resizeIframe(i),this.setAspectRatio(i))})}onMessage(e){try{let t=JSON.parse(e.data);if(e.origin==="https://player.vimeo.com"){if(t.event==="ready")for(let i of Array.from(document.getElementsByClassName("fancybox__iframe")))i instanceof HTMLIFrameElement&&i.contentWindow===e.source&&(i.dataset.ready="true")}else if(e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&t.event==="onReady"){let i=document.getElementById(t.id);i&&(i.dataset.ready="true")}}catch{}}loadAjaxContent(e){let t=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);let i=this.instance,n=new XMLHttpRequest;i.showLoading(e),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i.state===yt.Ready&&(i.hideLoading(e),n.status===200?i.setContent(e,n.responseText):i.setError(e,n.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};let r=e.ajax||null;n.open(r?"POST":"GET",t+""),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(r),e.xhr=n}setInlineContent(e){let t=null;if(Yt(e.src))t=e.src;else if(typeof e.src=="string"){let i=e.src.split("#",2).pop();t=i?document.getElementById(i):null}if(t){if(e.type==="clone"||t.closest(".fancybox__slide")){t=t.cloneNode(!0);let i=t.dataset.animationName;i&&(t.classList.remove(i),delete t.dataset.animationName);let n=t.getAttribute("id");n=n?`${n}--clone`:`clone-${this.instance.id}-${e.index}`,t.setAttribute("id",n)}else if(t.parentNode){let i=document.createElement("div");i.classList.add("fancybox-placeholder"),t.parentNode.insertBefore(i,t),e.placeholderEl=i}this.instance.setContent(e,t)}else this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(e){let{src:t,el:i}=e;if(!t||typeof t!="string"||!i)return;i.classList.add("is-loading");let n=this.instance,r=document.createElement("iframe");r.className="fancybox__iframe",r.setAttribute("id",`fancybox__iframe_${n.id}_${e.index}`);for(let[a,l]of Object.entries(this.optionFor(e,"iframeAttr")||{}))r.setAttribute(a,l);r.onerror=()=>{n.setError(e,"{{IFRAME_ERROR}}")},e.iframeEl=r;let o=this.optionFor(e,"preload");if(e.type!=="iframe"||o===!1)return r.setAttribute("src",e.src+""),n.setContent(e,r,!1),this.resizeIframe(e),void n.revealContent(e);n.showLoading(e),r.onload=()=>{if(!r.src.length)return;let a=r.dataset.ready!=="true";r.dataset.ready="true",this.resizeIframe(e),a?n.revealContent(e):n.hideLoading(e)},r.setAttribute("src",t),n.setContent(e,r,!1)}resizeIframe(e){let{type:t,iframeEl:i}=e;if(t===bs||t===Bn)return;let n=i?.parentElement;if(!i||!n)return;let r=e.autoSize;r===void 0&&(r=this.optionFor(e,"autoSize"));let o=e.width||0,a=e.height||0;o&&a&&(r=!1);let l=n&&n.style;if(e.preload!==!1&&r!==!1&&l)try{let c=window.getComputedStyle(n),u=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight),h=parseFloat(c.paddingTop)+parseFloat(c.paddingBottom),f=i.contentWindow;if(f){let p=f.document,v=p.getElementsByTagName(bf)[0],w=p.body;l.width="",w.style.overflow="hidden",o=o||v.scrollWidth+u,l.width=`${o}px`,w.style.overflow="",l.flex="0 0 auto",l.height=`${w.scrollHeight}px`,a=v.scrollHeight+h}}catch{}if(o||a){let c={flex:"0 1 auto",width:"",height:""};o&&o!=="auto"&&(c.width=`${o}px`),a&&a!=="auto"&&(c.height=`${a}px`),Object.assign(l,c)}}playVideo(){let e=this.instance.getSlide();if(!e)return;let{el:t}=e;if(!t||!t.offsetParent||!this.optionFor(e,"videoAutoplay"))return;if(e.type===pa)try{let n=t.querySelector("video");if(n){let r=n.play();r!==void 0&&r.then(()=>{}).catch(o=>{n.muted=!0,n.play()})}}catch{}if(e.type!==bs&&e.type!==Bn)return;let i=()=>{if(e.iframeEl&&e.iframeEl.contentWindow){let n;if(e.iframeEl.dataset.ready==="true")return n=e.type===bs?{event:"command",func:"playVideo"}:{method:"play",value:"true"},n&&e.iframeEl.contentWindow.postMessage(JSON.stringify(n),"*"),void(e.poller=void 0);e.type===bs&&(n={event:"listening",id:e.iframeEl.getAttribute("id")},e.iframeEl.contentWindow.postMessage(JSON.stringify(n),"*"))}e.poller=setTimeout(i,250)};i()}processType(e){if(e.html)return e.type=bf,e.src=e.html,void(e.html="");let t=this.instance.optionFor(e,"src","");if(!t||typeof t!="string")return;let i=e.type,n=null;if(n=t.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){let r=this.optionFor(e,bs),{nocookie:o}=r,a=function(h,f){var p={};for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&f.indexOf(v)<0&&(p[v]=h[v]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var w=0;for(v=Object.getOwnPropertySymbols(h);w<v.length;w++)f.indexOf(v[w])<0&&Object.prototype.propertyIsEnumerable.call(h,v[w])&&(p[v[w]]=h[v[w]])}return p}(r,["nocookie"]),l=`www.youtube${o?"-nocookie":""}.com`,c=n0(t,a),u=encodeURIComponent(n[2]);e.videoId=u,e.src=`https://${l}/embed/${u}?${c}`,e.thumbSrc=e.thumbSrc||`https://i.ytimg.com/vi/${u}/mqdefault.jpg`,i=bs}else if(n=t.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){let r=n0(t,this.optionFor(e,Bn)),o=encodeURIComponent(n[1]),a=n[4]||"";e.videoId=o,e.src=`https://player.vimeo.com/video/${o}?${a?`h=${a}${r?"&":""}`:""}${r}`,i=Bn}if(!i&&e.triggerEl){let r=e.triggerEl.dataset.type;W_.includes(r)&&(i=r)}i||typeof t=="string"&&(t.charAt(0)==="#"?i="inline":(n=t.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i=pa,e.videoFormat=e.videoFormat||"video/"+(n[1]==="ogv"?"ogg":n[1])):t.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i=s0:t.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`https://maps.google.${n[1]}/?ll=${(n[2]?n[2]+"&z="+Math.floor(parseFloat(n[3]))+(n[4]?n[4].replace(/^\//,"&"):""):n[4]+"").replace(/\?/,"&")}&output=${n[4]&&n[4].indexOf("layer=c")>0?"svembed":"embed"}`,i=yf):(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`https://maps.google.${n[1]}/maps?q=${n[2].replace("query=","q=").replace("api=1","")}&output=embed`,i=yf),i=i||this.instance.option("defaultType"),e.type=i,i===s0&&(e.thumbSrc=e.thumbSrc||e.src)}setContent(e){let t=this.instance.optionFor(e,"src")||"";if(e&&e.type&&t){switch(e.type){case bf:this.instance.setContent(e,t);break;case pa:let i=this.option("videoTpl");i&&this.instance.setContent(e,i.replace(/\{\{src\}\}/gi,t+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case yf:case bs:case Bn:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(e){let t=e.contentEl;if(!(e.el&&t&&e.type&&[bs,Bn,pa].includes(e.type)))return;let i,n=e.width||"auto",r=e.height||"auto";if(n==="auto"||r==="auto"){i=this.optionFor(e,"videoRatio");let c=(i+"").match(/(\d+)\s*\/\s?(\d+)/);i=c&&c.length>2?parseFloat(c[1])/parseFloat(c[2]):parseFloat(i+"")}else n&&r&&(i=n/r);if(!i)return;t.style.aspectRatio="",t.style.width="",t.style.height="",t.offsetHeight;let o=t.getBoundingClientRect(),a=o.width||1,l=o.height||1;t.style.aspectRatio=i+"",i<a/l?(r=r==="auto"?l:Math.min(l,r),t.style.width="auto",t.style.height=`${r}px`):(n=n==="auto"?a:Math.min(a,n),t.style.width=`${n}px`,t.style.height="auto")}attach(){let e=this,t=e.instance;t.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.selectSlide",e.onSelectSlide),t.on("Carousel.unselectSlide",e.onUnselectSlide),t.on("Carousel.Panzoom.refresh",e.onRefresh),t.on("done",e.onDone),t.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}detach(){let e=this,t=e.instance;t.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.selectSlide",e.onSelectSlide),t.off("Carousel.unselectSlide",e.onUnselectSlide),t.off("Carousel.Panzoom.refresh",e.onRefresh),t.off("done",e.onDone),t.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}};Object.defineProperty(ru,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:q_});var Xc="play",Kc="pause",fa="ready",ou=class extends ni{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:fa}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==fa}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,!((e=this.instance.panzoom)===null||e===void 0)&&e.isResting&&this.resume()}onTimerEnd(){let e=this.instance;this.state==="play"&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var e;if(!this.option("showProgress"))return null;this.removeProgressBar();let t=this.instance,i=((e=t.pages[t.page])===null||e===void 0?void 0:e.slides)||[],n=this.option("progressParentEl");if(n||(n=(i.length===1?i[0].el:null)||t.viewport),!n)return null;let r=document.createElement("div");return ge(r,"f-progress"),n.prepend(r),this.progressBar=r,r.offsetHeight,r}set(){let e=this,t=e.instance;if(t.pages.length<2||e.timer)return;let i=e.option("timeout");e.state=Xc,ge(t.container,"has-autoplay");let n=e.createProgressBar();n&&(n.style.transitionDuration=`${i}ms`,n.style.transform="scaleX(1)"),e.timer=setTimeout(()=>{e.timer=null,e.inHover||e.onTimerEnd()},i),e.emit("set")}clear(){let e=this;e.timer&&(clearTimeout(e.timer),e.timer=null),e.removeProgressBar()}start(){let e=this;if(e.set(),e.state!==fa){if(e.option("pauseOnHover")){let t=e.instance.container;t.addEventListener("mouseenter",e.onMouseEnter,!1),t.addEventListener("mouseleave",e.onMouseLeave,!1)}document.addEventListener("visibilitychange",e.onVisibilityChange,!1),e.emit("start")}}stop(){let e=this,t=e.state,i=e.instance.container;e.clear(),e.state=fa,i.removeEventListener("mouseenter",e.onMouseEnter,!1),i.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),ke(i,"has-autoplay"),t!==fa&&e.emit("stop")}pause(){let e=this;e.state===Xc&&(e.state=Kc,e.clear(),e.emit(Kc))}resume(){let e=this,t=e.instance;if(t.isInfinite||t.page!==t.pages.length-1)if(e.state!==Xc){if(e.state===Kc&&!e.inHover){let i=new Event("resume",{bubbles:!0,cancelable:!0});e.emit("resume",i),i.defaultPrevented||e.set()}}else e.set();else e.stop()}toggle(){this.state===Xc||this.state===Kc?this.stop():this.start()}attach(){let e=this,t=e.instance;t.on("ready",e.onReady),t.on("Panzoom.startAnimation",e.onChange),t.on("Panzoom.endAnimation",e.onSettle),t.on("Panzoom.touchMove",e.onChange)}detach(){let e=this,t=e.instance;t.off("ready",e.onReady),t.off("Panzoom.startAnimation",e.onChange),t.off("Panzoom.endAnimation",e.onSettle),t.off("Panzoom.touchMove",e.onChange),e.stop()}};Object.defineProperty(ou,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});var au=class extends ni{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(e){let t=e.carousel;if(!t)return;let i=e.container;i&&(t.options.Autoplay=Xt({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{e.emit("startSlideshow")},set:n=>{var r;i.classList.add("has-slideshow"),((r=e.getSlide())===null||r===void 0?void 0:r.state)!==Mt.Ready&&n.pause()},stop:()=>{i.classList.remove("has-slideshow"),e.isCompact||e.endIdle(),e.emit("endSlideshow")},resume:(n,r)=>{var o,a,l;!r||!r.cancelable||((o=e.getSlide())===null||o===void 0?void 0:o.state)===Mt.Ready&&(!((l=(a=e.carousel)===null||a===void 0?void 0:a.panzoom)===null||l===void 0)&&l.isResting)||r.preventDefault()}}}),t.attachPlugins({Autoplay:ou}),this.ref=t.plugins.Autoplay)}onReady(e){let t=e.carousel,i=this.ref;i&&t&&this.option("playOnStart")&&(t.isInfinite||t.page<t.pages.length-1)&&i.start()}onDone(e,t){let i=this.ref,n=e.carousel;if(!i||!n)return;let r=t.panzoom;r&&r.on("startAnimation",()=>{e.isCurrentSlide(t)&&i.stop()}),e.isCurrentSlide(t)&&i.resume()}onKeydown(e,t){var i;let n=this.ref;n&&t===this.option("key")&&((i=document.activeElement)===null||i===void 0?void 0:i.nodeName)!=="BUTTON"&&n.toggle()}attach(){let e=this,t=e.instance;t.on("Carousel.init",e.onPrepare),t.on("Carousel.ready",e.onReady),t.on("done",e.onDone),t.on("keydown",e.onKeydown)}detach(){let e=this,t=e.instance;t.off("Carousel.init",e.onPrepare),t.off("Carousel.ready",e.onReady),t.off("done",e.onDone),t.off("keydown",e.onKeydown)}};Object.defineProperty(au,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:s=>{var e;return((e=s.instance.container)===null||e===void 0?void 0:e.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||s.instance.container},timeout:3e3}});var P0={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"},ys;(function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Hidden=2]="Hidden"})(ys||(ys={}));var r0="isResting",Jc="thumbWidth",to="thumbHeight",Ki="thumbClipWidth",_0=class extends ni{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ys.Init})}get isModern(){return this.type==="modern"}onInitSlide(s,e){let t=e.el?e.el.dataset:void 0;t&&(e.thumbSrc=t.thumbSrc||e.thumbSrc||"",e[Ki]=parseFloat(t[Ki]||"")||e[Ki]||0,e[to]=parseFloat(t.thumbHeight||"")||e[to]||0),this.addSlide(e)}onInitSlides(){this.build()}onChange(){var s;if(!this.isModern)return;let e=this.container,t=this.instance,i=t.panzoom,n=this.carousel,r=n?n.panzoom:null,o=t.page;if(i&&n&&r){if(i.isDragging){ke(e,this.cn(r0));let a=((s=n.pages[o])===null||s===void 0?void 0:s.pos)||0;a+=t.getProgress(o)*(this[Ki]+this.thumbGap);let l=r.getBounds();-1*a>l.x.min&&-1*a<l.x.max&&r.panTo({x:-1*a,friction:.12})}else Zi(e,this.cn(r0),i.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(let s of this.instance.slides||[])this.resizeModernSlide(s);this.shiftModern()}isDisabled(){let s=this.option("minCount")||0;if(s){let t=this.instance,i=0;for(let n of t.slides||[])n.thumbSrc&&i++;if(i<s)return!0}let e=this.option("type");return["modern","classic"].indexOf(e)<0}getThumb(s){let e=this.option("thumbTpl")||"";return{html:this.instance.localize(e,[["%i",s.index],["%d",s.index+1],["%s",s.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(s){let e=this.carousel;e&&e.addSlide(s.index,this.getThumb(s))}getSlides(){let s=[];for(let e of this.instance.slides||[])s.push(this.getThumb(e));return s}resizeModernSlide(s){this.isModern&&(s[Jc]=s[Ki]&&s[to]?Math.round(this[to]*(s[Ki]/s[to])):this[Jc])}updateProps(){let s=this.container;if(!s)return;let e=t=>parseFloat(getComputedStyle(s).getPropertyValue("--f-thumb-"+t))||0;this.thumbGap=e("gap"),this.thumbExtraGap=e("extra-gap"),this[Jc]=e("width")||40,this[Ki]=e("clip-width")||40,this[to]=e("height")||40}build(){let s=this;if(s.state!==ys.Init)return;if(s.isDisabled())return void s.emit("disabled");let e=s.instance,t=e.container,i=s.getSlides(),n=s.option("type");s.type=n;let r=s.option("parentEl"),o=s.cn("container"),a=s.cn("track"),l=r?.querySelector("."+o);l||(l=document.createElement("div"),ge(l,o),r?r.appendChild(l):t.after(l)),ge(l,`is-${n}`),ge(t,s.cn("hasThumbs")),s.container=l,s.updateProps();let c=l.querySelector("."+a);c||(c=document.createElement("div"),ge(c,s.cn("track")),l.appendChild(c)),s.track=c;let u=Xt({},{track:c,infinite:!1,center:!0,fill:n==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},s.option("Carousel")||{},{Sync:{target:e},slides:i}),h=new e.constructor(l,u);h.on("createSlide",(f,p)=>{s.setProps(p.index),s.emit("createSlide",p,p.el)}),h.on("ready",()=>{s.shiftModern(),s.emit("ready")}),h.on("refresh",()=>{s.shiftModern()}),h.on("Panzoom.click",(f,p,v)=>{s.onClick(v)}),s.carousel=h,s.state=ys.Ready}onClick(s){s.preventDefault(),s.stopPropagation();let e=this.instance,{pages:t,page:i}=e,n=w=>{if(w){let S=w.closest("[data-carousel-index]");if(S)return[parseInt(S.dataset.carouselIndex||"",10)||0,S]}return[-1,void 0]},r=(w,S)=>{let A=document.elementFromPoint(w,S);return A?n(A):[-1,void 0]},[o,a]=n(s.target);if(o>-1)return;let l=this[Ki],c=s.clientX,u=s.clientY,[h,f]=r(c-l,u),[p,v]=r(c+l,u);f&&v?(o=Math.abs(c-f.getBoundingClientRect().right)<Math.abs(c-v.getBoundingClientRect().left)?h:p,o===i&&(o=o===h?p:h)):f?o=h:v&&(o=p),o>-1&&t[o]&&e.slideTo(o)}getShift(s){var e;let t=this,{instance:i}=t,n=t.carousel;if(!i||!n)return 0;let r=t[Jc],o=t[Ki],a=t.thumbGap,l=t.thumbExtraGap;if(!(!((e=n.slides[s])===null||e===void 0)&&e.el))return 0;let c=.5*(r-o),u=i.pages.length-1,h=i.getProgress(0),f=i.getProgress(u),p=i.getProgress(s,!1,!0),v=0,w=c+l+a,S=h<0&&h>-1,A=f>0&&f<1;return s===0?(v=w*Math.abs(h),A&&h===1&&(v-=w*Math.abs(f))):s===u?(v=w*Math.abs(f)*-1,S&&f===-1&&(v+=w*Math.abs(h))):S||A?(v=-1*w,v+=w*Math.abs(h),v+=w*(1-Math.abs(f))):v=w*p,v}setProps(s){var e;let t=this;if(!t.isModern)return;let{instance:i}=t,n=t.carousel;if(i&&n){let r=(e=n.slides[s])===null||e===void 0?void 0:e.el;if(r&&r.childNodes.length){let o=pe(1-Math.abs(i.getProgress(s))),a=pe(t.getShift(s));r.style.setProperty("--progress",o?o+"":""),r.style.setProperty("--shift",a+"")}}}shiftModern(){let s=this;if(!s.isModern)return;let{instance:e,track:t}=s,i=e.panzoom,n=s.carousel;if(!(e&&t&&i&&n)||i.state===Fe.Init||i.state===Fe.Destroy)return;for(let o of e.slides)s.setProps(o.index);let r=(s[Ki]+s.thumbGap)*(n.slides.length||0);t.style.setProperty("--width",r+"")}cleanup(){let s=this;s.carousel&&s.carousel.destroy(),s.carousel=null,s.container&&s.container.remove(),s.container=null,s.track&&s.track.remove(),s.track=null,s.state=ys.Init,ke(s.instance.container,s.cn("hasThumbs"))}attach(){let s=this,e=s.instance;e.on("initSlide",s.onInitSlide),e.state===ct.Init?e.on("initSlides",s.onInitSlides):s.onInitSlides(),e.on(["change","Panzoom.afterTransform"],s.onChange),e.on("Panzoom.refresh",s.onRefresh)}detach(){let s=this,e=s.instance;e.off("initSlide",s.onInitSlide),e.off("initSlides",s.onInitSlides),e.off(["change","Panzoom.afterTransform"],s.onChange),e.off("Panzoom.refresh",s.onRefresh),s.cleanup()}};Object.defineProperty(_0,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:P0});var G_=Object.assign(Object.assign({},P0),{key:"t",showOnStart:!0,parentEl:null}),o0="is-masked",a0="aria-hidden",lu=class extends ni{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){let e=this.ref;return e&&!e.isDisabled()}get isHidden(){return this.hidden}onClick(e,t){t.stopPropagation()}onCreateSlide(e,t){var i,n,r;let o=((r=(n=(i=this.instance)===null||i===void 0?void 0:i.carousel)===null||n===void 0?void 0:n.slides[t.index])===null||r===void 0?void 0:r.type)||"",a=t.el;if(a&&o){let l=`for-${o}`;["video","youtube","vimeo","html5video"].includes(o)&&(l+=" for-video"),ge(a,l)}}onInit(){var e;let t=this,i=t.instance,n=i.carousel;if(t.ref||!n)return;let r=t.option("parentEl")||i.footer||i.container;if(!r)return;let o=Xt({},t.options,{parentEl:r,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:i.option("Carousel.friction")||0}},on:{ready:a=>{let l=a.container;l&&this.hidden&&(t.refresh(),l.style.transition="none",t.hide(),l.offsetHeight,queueMicrotask(()=>{l.style.transition="",t.show()}))}}});o.Carousel=o.Carousel||{},o.Carousel.on=Xt(((e=t.options.Carousel)===null||e===void 0?void 0:e.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),n.options.Thumbs=o,n.attachPlugins({Thumbs:_0}),t.ref=n.plugins.Thumbs,t.option("showOnStart")||(t.ref.state=ys.Hidden,t.hidden=!0)}onResize(){var e;let t=(e=this.ref)===null||e===void 0?void 0:e.container;t&&(t.style.maxHeight="")}onKeydown(e,t){let i=this.option("key");i&&i===t&&this.toggle()}toggle(){let e=this.ref;if(e&&!e.isDisabled())return e.state===ys.Hidden?(e.state=ys.Init,void e.build()):void(this.hidden?this.show():this.hide())}show(){let e=this.ref;if(!e||e.isDisabled())return;let t=e.container;t&&(this.refresh(),t.offsetHeight,t.removeAttribute(a0),t.classList.remove(o0),this.hidden=!1)}hide(){let e=this.ref,t=e&&e.container;t&&(this.refresh(),t.offsetHeight,t.classList.add(o0),t.setAttribute(a0,"true")),this.hidden=!0}refresh(){let e=this.ref;if(!e||!e.state)return;let t=e.container,i=t?.firstChild||null;t&&i&&i.childNodes.length&&(t.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){let e=this,t=e.instance;t.state===yt.Init?t.on("Carousel.init",e.onInit):e.onInit(),t.on("resize",e.onResize),t.on("keydown",e.onKeydown)}detach(){var e;let t=this,i=t.instance;i.off("Carousel.init",t.onInit),i.off("resize",t.onResize),i.off("keydown",t.onKeydown),(e=i.carousel)===null||e===void 0||e.detachPlugins(["Thumbs"]),t.ref=null}};Object.defineProperty(lu,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:G_});var wf={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}},Un;(function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Disabled=2]="Disabled"})(Un||(Un={}));var Y_={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},X_={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},l0="has-toolbar",Ef="fancybox__toolbar",cu=class extends ni{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Un.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var t;if(!e.carousel)return;let i=this.option("display"),n=this.option("absolute"),r=this.option("enabled");if(r==="auto"){let c=this.instance.carousel,u=0;if(c)for(let h of c.slides)(h.panzoom||h.type==="image")&&u++;u||(r=!1)}r||(i=void 0);let o=0,a={left:[],middle:[],right:[]};if(i)for(let c of["left","middle","right"])for(let u of i[c]){let h=this.createEl(u);h&&((t=a[c])===null||t===void 0||t.push(h),o++)}let l=null;if(o&&(l=this.createContainer()),l){for(let[c,u]of Object.entries(a)){let h=document.createElement("div");ge(h,Ef+"__column is-"+c);for(let f of u)h.appendChild(f);n!=="auto"||c!=="middle"||u.length||(n=!0),l.appendChild(h)}n===!0&&ge(l,"is-absolute"),this.state=Un.Ready,this.onRefresh()}else this.state=Un.Disabled}onClick(e){var t,i;let n=this.instance,r=n.getSlide(),o=r?.panzoom,a=e.target,l=a&&Yt(a)?a.dataset:null;if(!l)return;if(l.fancyboxToggleThumbs!==void 0)return e.preventDefault(),e.stopPropagation(),void((t=n.plugins.Thumbs)===null||t===void 0||t.toggle());if(l.fancyboxToggleFullscreen!==void 0)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(l.fancyboxToggleSlideshow!==void 0){e.preventDefault(),e.stopPropagation();let h=(i=n.carousel)===null||i===void 0?void 0:i.plugins.Autoplay,f=h.isActive;return o&&o.panMode==="mousemove"&&!f&&o.reset(),void(f?h.stop():h.start())}let c=l.panzoomAction,u=l.panzoomChange;if((u||c)&&(e.preventDefault(),e.stopPropagation()),u){let h={};try{h=JSON.parse(u)}catch{}o&&o.applyChange(h)}else c&&o&&o[c]&&o[c]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;let e=this.container;if(!e)return;let t=this.instance.getSlide();if(!t||t.state!==Mt.Ready)return;let i=t&&!t.error&&t.panzoom;for(let o of e.querySelectorAll("[data-panzoom-action]"))i?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));let n=i&&i.canZoomIn(),r=i&&i.canZoomOut();for(let o of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))n?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));for(let o of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))r?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));for(let o of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){r||n?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));let a=o.querySelector("g");a&&(a.style.display=n?"":"none")}}onDone(e,t){var i;(i=t.panzoom)===null||i===void 0||i.on("afterTransform",()=>{this.instance.isCurrentSlide(t)&&this.onRefresh()}),this.instance.isCurrentSlide(t)&&this.onRefresh()}createContainer(){let e=this.instance.container;if(!e)return null;let t=this.option("parentEl")||e,i=t.querySelector("."+Ef);return i||(i=document.createElement("div"),ge(i,Ef),t.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&ge(e,l0),this.container=i,i}createEl(e){let t=this.instance,i=t.carousel;if(!i||e==="toggleFS"||e==="fullscreen"&&!S0())return null;let n=null,r=i.slides.length||0,o=0,a=0;for(let c of i.slides)(c.panzoom||c.type==="image")&&o++,(c.type==="image"||c.downloadSrc)&&a++;if(r<2&&["infobar","prev","next"].includes(e))return n;if(wf[e]!==void 0&&!o||e==="download"&&!a)return null;if(e==="thumbs"){let c=t.plugins.Thumbs;if(!c||!c.isEnabled)return null}if(e==="slideshow"&&(!i.plugins.Autoplay||r<2))return null;if(wf[e]!==void 0){let c=wf[e];n=document.createElement("button"),n.setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),ge(n,"f-button"),c.action&&(n.dataset.panzoomAction=c.action),c.change&&(n.dataset.panzoomChange=JSON.stringify(c.change)),n.appendChild(Ji(this.instance.localize(c.icon)))}else{let c=(this.option("items")||[])[e];c&&(n=Ji(this.instance.localize(c.tpl)),typeof c.click=="function"&&n.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),typeof c.click=="function"&&c.click.call(this,this,u)}))}let l=n?.querySelector("svg");if(l)for(let[c,u]of Object.entries(X_))l.getAttribute(c)||l.setAttribute(c,String(u));return n}removeContainer(){let e=this.container;e&&e.remove(),this.container=null,this.state=Un.Disabled;let t=this.instance.container;t&&ke(t,l0)}attach(){let e=this,t=e.instance;t.on("Carousel.initSlides",e.onReady),t.on("done",e.onDone),t.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}detach(){let e=this,t=e.instance;t.off("Carousel.initSlides",e.onReady),t.off("done",e.onDone),t.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}};Object.defineProperty(cu,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Y_});var K_={Hash:class extends ni{onReady(){ma=!1}onChange(s){Hn&&clearTimeout(Hn);let{hash:e}=A0(),{hash:t}=su(),i=s.isOpeningSlide(s.getSlide());i&&(t0=t===e?"":t),e&&e!==t&&(Hn=setTimeout(()=>{try{if(s.state===yt.Ready){let n="replaceState";i&&!Gc&&(n="pushState",Gc=!0),window.history[n]({},document.title,window.location.pathname+window.location.search+e)}}catch{}},300))}onClose(s){if(Hn&&clearTimeout(Hn),!ma&&Gc)return Gc=!1,ma=!1,void window.history.back();if(!ma)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(t0||""))}catch{}}attach(){let s=this.instance;s.on("ready",this.onReady),s.on(["Carousel.ready","Carousel.change"],this.onChange),s.on("close",this.onClose)}detach(){let s=this.instance;s.off("ready",this.onReady),s.off(["Carousel.ready","Carousel.change"],this.onChange),s.off("close",this.onClose)}static parseURL(){return su()}static startFromUrl(){T0()}static destroy(){window.removeEventListener("hashchange",C0,!1)}},Html:ru,Images:nu,Slideshow:au,Thumbs:lu,Toolbar:cu},c0="with-fancybox",Sf="hide-scrollbar",u0="--fancybox-scrollbar-compensate",d0="--fancybox-body-margin",Af="aria-hidden",Tf="is-using-tab",xf="is-animated",h0="is-compact",p0="is-loading",Cf="is-opening",Zc="has-caption",io="disabled",zn="tabindex",f0="download",Pf="href",so="src",nn=s=>typeof s=="string",m0=function(){var s=window.getSelection();return!!s&&s.type==="Range"},xi,Ci=null,$n=null,g0=0,v0=0,b0=0,y0=0,no=new Map,J_=0,Pi=class s extends va{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],t={},i={}){super(t),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:yt.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),xi||(xi=S0()),this.id=t.id||++J_,no.set(this.id,this),this.userSlides=e,this.userPlugins=i,queueMicrotask(()=>{this.init()})}init(){if(this.state===yt.Destroy)return;this.state=yt.Init,this.attachPlugins(Object.assign(Object.assign({},s.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!ga)return;let t=document,i=t.body,n=t.documentElement;if(i.classList.contains(Sf))return;let r=window.innerWidth-n.getBoundingClientRect().width,o=parseFloat(window.getComputedStyle(i).marginRight);r<0&&(r=0),n.style.setProperty(u0,`${r}px`),o&&i.style.setProperty(d0,`${o}px`),i.classList.add(Sf)})(),this.initLayout(),this.scale();let e=()=>{this.initCarousel(this.userSlides),this.state=yt.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(Af,"false")},16)};this.option("Fullscreen.autoStart")&&xi&&!xi.isFullscreen()?xi.request().then(()=>{this.startedFs=!0,e()}).catch(()=>e()):e()}initLayout(){var e,t;let i=this.option("parentEl")||document.body,n=Ji(this.localize(this.option("tpl.main")||""));if(n){if(n.setAttribute("id",`fancybox-${this.id}`),n.setAttribute("aria-label",this.localize("{{MODAL}}")),n.classList.toggle(h0,this.isCompact),ge(n,this.option("mainClass")||""),ge(n,Cf),this.container=n,this.footer=n.querySelector(".fancybox__footer"),i.appendChild(n),ge(document.documentElement,c0),Ci&&$n||(Ci=document.createElement("span"),ge(Ci,"fancybox-focus-guard"),Ci.setAttribute(zn,"0"),Ci.setAttribute(Af,"true"),Ci.setAttribute("aria-label","Focus guard"),$n=Ci.cloneNode(),(e=n.parentElement)===null||e===void 0||e.insertBefore(Ci,n),(t=n.parentElement)===null||t===void 0||t.append($n)),n.addEventListener("mousedown",r=>{g0=r.pageX,v0=r.pageY,ke(n,Tf)}),this.option("closeExisting"))for(let r of no.values())r.id!==this.id&&r.close();else this.option("animated")&&(ge(n,xf),setTimeout(()=>{this.isClosing()||ke(n,xf)},350));this.emit("initLayout")}}initCarousel(e){let t=this.container;if(!t)return;let i=t.querySelector(".fancybox__carousel");if(!i)return;let n=this.carousel=new ro(i,Xt({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));n.on("*",(r,o,...a)=>{this.emit(`Carousel.${o}`,r,...a)}),n.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(r,o,a)=>{this.clearContent(a),a.state=void 0}),n.on("Panzoom.touchStart",()=>{var r,o;this.isCompact||this.endIdle(),!((r=document.activeElement)===null||r===void 0)&&r.closest(".f-thumbs")&&((o=this.container)===null||o===void 0||o.focus())}),n.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(n.on("Panzoom.afterTransform",(r,o)=>{let a=this.getSlide();if(a&&_f(a.el))return;let l=this.container;if(l){let c=Math.abs(o.current.f),u=c<1?"":Math.max(.5,Math.min(1,1-c/o.contentRect.fitHeight*1.5));l.style.setProperty("--fancybox-ts",u?"0s":""),l.style.setProperty("--fancybox-opacity",u+"")}}),n.on("Panzoom.touchEnd",(r,o,a)=>{var l;let c=this.getSlide();if(c&&_f(c.el)||o.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((l=document.activeElement)===null||l===void 0?void 0:l.nodeName)!==-1)return;let u=Math.abs(o.dragOffset.y);o.lockedAxis==="y"&&(u>=200||u>=50&&o.dragOffset.time<300)&&(a&&a.cancelable&&a.preventDefault(),this.close(a,"f-throwOut"+(o.current.f<0?"Up":"Down")))})),n.on("change",r=>{var o;let a=(o=this.getSlide())===null||o===void 0?void 0:o.triggerEl;if(a){let l=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:r.page});a.dispatchEvent(l)}}),n.on(["refresh","change"],r=>{let o=this.container;if(!o)return;for(let c of o.querySelectorAll("[data-fancybox-current-index]"))c.innerHTML=r.page+1;for(let c of o.querySelectorAll("[data-fancybox-count]"))c.innerHTML=r.pages.length;if(!r.isInfinite){for(let c of o.querySelectorAll("[data-fancybox-next]"))r.page<r.pages.length-1?(c.removeAttribute(io),c.removeAttribute(zn)):(c.setAttribute(io,""),c.setAttribute(zn,"-1"));for(let c of o.querySelectorAll("[data-fancybox-prev]"))r.page>0?(c.removeAttribute(io),c.removeAttribute(zn)):(c.setAttribute(io,""),c.setAttribute(zn,"-1"))}let a=this.getSlide();if(!a)return;let l=a.downloadSrc||"";l||a.type!=="image"||a.error||!nn(a[so])||(l=a[so]);for(let c of o.querySelectorAll("[data-fancybox-download]")){let u=a.downloadFilename;l?(c.removeAttribute(io),c.removeAttribute(zn),c.setAttribute(Pf,l),c.setAttribute(f0,u||l),c.setAttribute("target","_blank")):(c.setAttribute(io,""),c.setAttribute(zn,"-1"),c.removeAttribute(Pf),c.removeAttribute(f0))}}),this.emit("initCarousel")}attachEvents(){let e=this,t=e.container;if(!t)return;t.addEventListener("click",e.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize);let i=window.visualViewport;i&&(i.addEventListener("scroll",e.onResize),i.addEventListener("resize",e.onResize))}detachEvents(){let e=this,t=e.container;if(!t)return;document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize);let i=window.visualViewport;i&&(i.removeEventListener("resize",e.onResize),i.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0)}scale(){let e=this.container;if(!e)return;let t=window.visualViewport,i=Math.max(1,t?.scale||1),n="",r="",o="";if(t&&i>1){let a=`${t.offsetLeft}px`,l=`${t.offsetTop}px`;n=t.width*i+"px",r=t.height*i+"px",o=`translate3d(${a}, ${l}, 0) scale(${1/i})`}e.style.transform=o,e.style.width=n,e.style.height=r}onClick(e){var t;let{container:i,isCompact:n}=this;if(!i||this.isClosing())return;!n&&this.option("idle")&&this.resetIdle();let r=e.composedPath()[0];if(r.closest(".fancybox-spinner")||r.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(r.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(r.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if(e.type==="click"&&e.detail===0||Math.abs(e.pageX-g0)>30||Math.abs(e.pageY-v0)>30)return;let o=document.activeElement;if(m0()&&o&&i.contains(o))return;if(n&&((t=this.getSlide())===null||t===void 0?void 0:t.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",e),e.defaultPrevented)return;let a=!1;if(r.closest(".fancybox__content")){if(o){if(o.closest("[contenteditable]"))return;r.matches(vf)||o.blur()}if(m0())return;a=this.option("contentClick")}else r.closest(".fancybox__carousel")&&!r.matches(vf)&&(a=this.option("backdropClick"));a==="close"?(e.preventDefault(),this.close(e)):a==="next"?(e.preventDefault(),this.next()):a==="prev"&&(e.preventDefault(),this.prev())}onWheel(e){let t=e.target,i=this.option("wheel",e);t.closest(".fancybox__thumbs")&&(i="slide");let n=i==="slide",r=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(l,c){return Math.abs(c)>Math.abs(l)?c:l}),o=Math.max(-1,Math.min(1,r)),a=Date.now();this.pwt&&a-this.pwt<300?n&&e.preventDefault():(this.pwt=a,this.emit("wheel",e,o),e.defaultPrevented||(i==="close"?(e.preventDefault(),this.close(e)):i==="slide"&&(Qc(t)||(e.preventDefault(),this[o>0?"prev":"next"]()))))}onScroll(){window.scrollTo(b0,y0)}onKeydown(e){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();let t=e.key,i=this.option("keyboard");if(!i)return;let n=e.composedPath()[0],r=document.activeElement&&document.activeElement.classList,o=r&&r.contains("f-button")||n.dataset.carouselPage||n.dataset.carouselIndex;if(t!=="Escape"&&!o&&Yt(n)&&(n.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(n.nodeName)!==-1)||(e.key==="Tab"?ge(this.container,Tf):ke(this.container,Tf),e.ctrlKey||e.altKey||e.shiftKey))return;this.emit("keydown",t,e);let a=i[t];a&&typeof this[a]=="function"&&(e.preventDefault(),this[a]())}onResize(){let e=this.container;if(!e)return;let t=this.isCompact;e.classList.toggle(h0,t),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(e){let t=this.optionFor(e,"closeButton")||!1;if(t==="auto"){let n=this.plugins.Toolbar;if(n&&n.state===Un.Ready)return}if(!t||!e.contentEl||e.closeBtnEl)return;let i=this.option("tpl.closeButton");if(i){let n=Ji(this.localize(i));e.closeBtnEl=e.contentEl.appendChild(n),e.el&&ge(e.el,"has-close-btn")}}manageCaption(e=void 0){var t,i;let n="fancybox__caption",r=this.container;if(!r)return;ke(r,Zc);let o=this.isCompact||this.option("commonCaption"),a=!o;if(this.caption&&this.stop(this.caption),a&&this.caption&&(this.caption.remove(),this.caption=null),o&&!this.caption)for(let h of((t=this.carousel)===null||t===void 0?void 0:t.slides)||[])h.captionEl&&(h.captionEl.remove(),h.captionEl=void 0,ke(h.el,Zc),(i=h.el)===null||i===void 0||i.removeAttribute("aria-labelledby"));if(e||(e=this.getSlide()),!e||o&&!this.isCurrentSlide(e))return;let l=e.el,c=this.optionFor(e,"caption","");if(!c)return void(o&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let u=null;if(a){if(u=e.captionEl||null,l&&!u){let h=n+`_${this.id}_${e.index}`;u=document.createElement("div"),ge(u,n),u.setAttribute("id",h),e.captionEl=l.appendChild(u),ge(l,Zc),l.setAttribute("aria-labelledby",h)}}else u=this.caption,u||(u=r.querySelector("."+n)),!u&&(u=document.createElement("div"),u.dataset.fancyboxCaption="",ge(u,n),(this.footer||r).prepend(u)),ge(r,Zc),this.caption=u;u&&(u.innerHTML="",nn(c)||typeof c=="number"?u.innerHTML=c+"":c instanceof HTMLElement&&u.appendChild(c))}checkFocus(e){this.focus(e)}focus(e){var t;if(this.ignoreFocusChange)return;let i=document.activeElement||null,n=e?.target||null,r=this.container,o=(t=this.carousel)===null||t===void 0?void 0:t.viewport;if(!r||!o||!e&&i&&r.contains(i))return;let a=this.getSlide(),l=a&&a.state===Mt.Ready?a.el:null;if(!l||l.contains(i)||r===i)return;e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;let c=Array.from(r.querySelectorAll(vf)),u=[],h=null;for(let p of c){let v=!p.offsetParent||!!p.closest('[aria-hidden="true"]'),w=l&&l.contains(p),S=!o.contains(p);if(p===r||(w||S)&&!v){u.push(p);let A=p.dataset.origTabindex;A!==void 0&&A&&(p.tabIndex=parseFloat(A)),p.removeAttribute("data-orig-tabindex"),!p.hasAttribute("autoFocus")&&h||(h=p)}else{let A=p.dataset.origTabindex===void 0?p.getAttribute("tabindex")||"":p.dataset.origTabindex;A&&(p.dataset.origTabindex=A),p.tabIndex=-1}}let f=null;e?(!n||u.indexOf(n)<0)&&(f=h||r,u.length&&(i===$n?f=u[0]:this.lastFocus!==r&&i!==Ci||(f=u[u.length-1]))):f=a&&a.type==="image"?r:h||r,f&&e0(f),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){let e=this.carousel;e&&e.pages.length>1&&e.slideNext()}prev(){let e=this.carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return((e=s.getInstance())===null||e===void 0?void 0:e.id)==this.id}animate(e=null,t="",i){if(!e||!t)return void(i&&i());this.stop(e);let n=r=>{r.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",n),delete e.dataset.animationName,i&&i(),ke(e,t))};e.dataset.animationName=t,e.addEventListener("animationend",n),ge(e,t)}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(e,t="",i=!0){if(this.isClosing())return;let n=e.el;if(!n)return;let r=null;if(Yt(t)?r=t:(r=Ji(t+""),Yt(r)||(r=document.createElement("div"),r.innerHTML=t+"")),["img","picture","iframe","video","audio"].includes(r.nodeName.toLowerCase())){let o=document.createElement("div");o.appendChild(r),r=o}Yt(r)&&e.filter&&!e.error&&(r=r.querySelector(e.filter)),r&&Yt(r)?(ge(r,"fancybox__content"),e.id&&r.setAttribute("id",e.id),n.classList.add(`has-${e.error?"error":e.type||"unknown"}`),n.prepend(r),r.style.display==="none"&&(r.style.display=""),getComputedStyle(r).getPropertyValue("display")==="none"&&(r.style.display=e.display||this.option("defaultDisplay")||"flex"),e.contentEl=r,i&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}")}revealContent(e,t){let i=e.el,n=e.contentEl;i&&n&&(this.emit("reveal",e),this.hideLoading(e),e.state=Mt.Opening,(t=this.isOpeningSlide(e)?t===void 0?this.optionFor(e,"showClass"):t:"f-fadeIn")?this.animate(n,t,()=>{this.done(e)}):this.done(e))}done(e){this.isClosing()||(e.state=Mt.Ready,this.emit("done",e),ge(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask(()=>{var t;(t=e.panzoom)===null||t===void 0||t.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(e)&&(ke(this.container,Cf),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(e){let t=this.getSlide();return!(!e||!t)&&t.index===e.index}isOpeningSlide(e){var t,i;return((t=this.carousel)===null||t===void 0?void 0:t.prevPage)===null&&e&&e.index===((i=this.getSlide())===null||i===void 0?void 0:i.index)}showLoading(e){e.state=Mt.Loading;let t=e.el;t&&(ge(t,p0),this.emit("loading",e),e.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!e.spinnerEl&&e.state===Mt.Loading){let i=Ji(Df);ge(i,"fancybox-spinner"),e.spinnerEl=i,t.prepend(i),this.animate(i,"f-fadeIn")}},250))}hideLoading(e){let t=e.el;if(!t)return;let i=e.spinnerEl;this.isClosing()?i?.remove():(ke(t,p0),i&&this.animate(i,"f-fadeOut",()=>{i.remove()}),e.state===Mt.Loading&&(this.emit("loaded",e),e.state=Mt.Ready))}setError(e,t){if(this.isClosing())return;let i=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",i,e),i.defaultPrevented)return;e.error=t,this.hideLoading(e),this.clearContent(e);let n=document.createElement("div");n.classList.add("fancybox-error"),n.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,n)}clearContent(e){if(e.state===void 0)return;this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0);let t=e.el;t&&(ke(t,"has-error"),ke(t,"has-unknown"),ke(t,`has-${e.type||"unknown"}`)),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0}getSlide(){var e;let t=this.carousel;return((e=t?.pages[t?.page])===null||e===void 0?void 0:e.slides[0])||void 0}close(e,t){if(this.isClosing())return;let i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,e),i.defaultPrevented)return;e&&e.cancelable&&(e.preventDefault(),e.stopPropagation());let n=()=>{this.proceedClose(e,t)};this.startedFs&&xi&&xi.isFullscreen()?Promise.resolve(xi.exit()).then(()=>n()):n()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){let t=()=>{this.clearIdle(),this.idle=!0,ge(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(e)t();else{let i=this.option("idle");i&&(this.idleTimer=setTimeout(t,i))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,ke(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){xi&&(xi.isFullscreen()?xi.exit():xi.request().then(()=>{this.startedFs=!0}))}isClosing(){return[yt.Closing,yt.CustomClosing,yt.Destroy].includes(this.state)}proceedClose(e,t){var i,n;this.state=yt.Closing,this.clearIdle(),this.detachEvents();let r=this.container,o=this.carousel,a=this.getSlide(),l=a&&this.option("placeFocusBack")?a.triggerEl||this.option("triggerEl"):null;if(l&&(E0(l)?e0(l):l.focus()),r&&(ke(r,Cf),ge(r,"is-closing"),r.setAttribute(Af,"true"),this.option("animated")&&ge(r,xf),r.style.pointerEvents="none"),o){o.clearTransitions(),(i=o.panzoom)===null||i===void 0||i.destroy(),(n=o.plugins.Navigation)===null||n===void 0||n.detach();for(let c of o.slides){c.state=Mt.Closing,this.hideLoading(c);let u=c.contentEl;u&&this.stop(u);let h=c?.panzoom;h&&(h.stop(),h.detachEvents(),h.detachObserver()),this.isCurrentSlide(c)||o.emit("removeSlide",c)}}b0=window.scrollX,y0=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",e),this.state!==yt.CustomClosing?(t===void 0&&a&&(t=this.optionFor(a,"hideClass")),t&&a?(this.animate(a.contentEl,t,()=>{o&&o.emit("removeSlide",a)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var e;if(this.state===yt.Destroy)return;window.removeEventListener("scroll",this.onScroll),this.state=yt.Destroy,(e=this.carousel)===null||e===void 0||e.destroy();let t=this.container;t&&t.remove(),no.delete(this.id);let i=s.getInstance();i?i.focus():(Ci&&(Ci.remove(),Ci=null),$n&&($n.remove(),$n=null),ke(document.documentElement,c0),(()=>{if(!ga)return;let n=document,r=n.body;r.classList.remove(Sf),r.style.setProperty(d0,""),n.documentElement.style.setProperty(u0,"")})(),this.emit("destroy"))}static bind(e,t,i){if(!ga)return;let n,r="",o={};if(e===void 0?n=document.body:nn(e)?(n=document.body,r=e,typeof t=="object"&&(o=t||{})):(n=e,nn(t)&&(r=t),typeof i=="object"&&(o=i||{})),!n||!Yt(n))return;r=r||"[data-fancybox]";let a=s.openers.get(n)||new Map;a.set(r,o),s.openers.set(n,a),a.size===1&&n.addEventListener("click",s.fromEvent)}static unbind(e,t){let i,n="";if(nn(e)?(i=document.body,n=e):(i=e,nn(t)&&(n=t)),!i)return;let r=s.openers.get(i);r&&n&&r.delete(n),n&&r||(s.openers.delete(i),i.removeEventListener("click",s.fromEvent))}static destroy(){let e;for(;e=s.getInstance();)e.destroy();for(let t of s.openers.keys())t.removeEventListener("click",s.fromEvent);s.openers=new Map}static fromEvent(e){if(e.defaultPrevented||e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e.composedPath()[0],i=t.closest("[data-fancybox-trigger]");if(i){let v=i.dataset.fancyboxTrigger||"",w=document.querySelectorAll(`[data-fancybox="${v}"]`),S=parseInt(i.dataset.fancyboxIndex||"",10)||0;t=w[S]||t}if(!(t&&t instanceof Element))return;let n,r,o,a;if([...s.openers].reverse().find(([v,w])=>!(!v.contains(t)||![...w].reverse().find(([S,A])=>{let k=t.closest(S);return!!k&&(n=v,r=S,o=k,a=A,!0)}))),!n||!r||!o)return;a=a||{},e.preventDefault(),t=o;let l=[],c=Xt({},Lf,a);c.event=e,c.triggerEl=t,c.delegate=i;let u=c.groupAll,h=c.groupAttr,f=h&&t?t.getAttribute(`${h}`):"";if((!t||f||u)&&(l=[].slice.call(n.querySelectorAll(r))),t&&!u&&(l=f?l.filter(v=>v.getAttribute(`${h}`)===f):[t]),!l.length)return;let p=s.getInstance();return p&&p.options.triggerEl&&l.indexOf(p.options.triggerEl)>-1?void 0:(t&&(c.startIndex=l.indexOf(t)),s.fromNodes(l,c))}static fromSelector(e,t,i){let n=null,r="",o={};if(nn(e)?(n=document.body,r=e,typeof t=="object"&&(o=t||{})):e instanceof HTMLElement&&nn(t)&&(n=e,r=t,typeof i=="object"&&(o=i||{})),!n||!r)return!1;let a=s.openers.get(n);return!!a&&(o=Xt({},a.get(r)||{},o),!!o&&s.fromNodes(Array.from(n.querySelectorAll(r)),o))}static fromNodes(e,t){t=Xt({},Lf,t||{});let i=[];for(let n of e){let r=n.dataset||{},o=r[so]||n.getAttribute(Pf)||n.getAttribute("currentSrc")||n.getAttribute(so)||void 0,a,l=t.delegate,c;l&&i.length===t.startIndex&&(a=l instanceof HTMLImageElement?l:l.querySelector("img:not([aria-hidden])")),a||(a=n instanceof HTMLImageElement?n:n.querySelector("img:not([aria-hidden])")),a&&(c=a.currentSrc||a[so]||void 0,!c&&a.dataset&&(c=a.dataset.lazySrc||a.dataset[so]||void 0));let u={src:o,triggerEl:n,thumbEl:a,thumbElSrc:c,thumbSrc:c};for(let h in r){let f=r[h]+"";f=f!=="false"&&(f==="true"||f),u[h]=f}i.push(u)}return new s(i,t)}static getInstance(e){return e?no.get(e):Array.from(no.values()).reverse().find(t=>!t.isClosing()&&t)||null}static getSlide(){var e;return((e=s.getInstance())===null||e===void 0?void 0:e.getSlide())||null}static show(e=[],t={}){return new s(e,t)}static next(){let e=s.getInstance();e&&e.next()}static prev(){let e=s.getInstance();e&&e.prev()}static close(e=!0,...t){if(e)for(let i of no.values())i.close(...t);else{let i=s.getInstance();i&&i.close(...t)}}};Object.defineProperty(Pi,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(Pi,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Lf}),Object.defineProperty(Pi,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:K_}),Object.defineProperty(Pi,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});var uu=class extends Pe{connect(){Pi.bind("[data-fancybox]")}};var Z_=(()=>{let s=new ResizeObserver(o=>o.forEach(a=>a.target.querySelectorAll(".pagy-rjs").forEach(l=>l.pagyRender()))),e=(o,[a,l,c,u])=>{let h=o.parentElement??o,f=Object.keys(l).map(w=>parseInt(w)).sort((w,S)=>S-w),p=-1,v=(w,S,A)=>w.replace(/__pagy_page__/g,S).replace(/__pagy_label__/g,A);(o.pagyRender=function(){let w=f.find(D=>D<h.clientWidth)||0;if(w===p)return;let S=a.before,A=l[w.toString()],k=c?.[w.toString()]??A.map(D=>D.toString());A.forEach((D,R)=>{let $=k[R],U;typeof D=="number"?U=v(a.a,D.toString(),$):D==="gap"?U=a.gap:U=v(a.current,D,$),S+=typeof u=="string"&&D==1?r(U,u):U}),S+=a.after,o.innerHTML="",o.insertAdjacentHTML("afterbegin",S),p=w})(),o.classList.contains("pagy-rjs")&&s.observe(h)},t=(o,[a,l])=>n(o,c=>[c,a.replace(/__pagy_page__/,c)],l),i=(o,[a,l,c])=>{n(o,u=>{let h=Math.max(Math.ceil(a/parseInt(u)),1).toString(),f=l.replace(/__pagy_page__/,h).replace(/__pagy_items__/,u);return[h,f]},c)},n=(o,a,l)=>{let c=o.querySelector("input"),u=o.querySelector("a"),h=c.value,f=function(){if(c.value===h)return;let[p,v,w]=[c.min,c.value,c.max].map(k=>parseInt(k)||0);if(v<p||v>w){c.value=h,c.select();return}let[S,A]=a(c.value);typeof l=="string"&&S==="1"&&(A=r(A,l)),u.href=A,u.click()};["change","focus"].forEach(p=>c.addEventListener(p,()=>c.select())),c.addEventListener("focusout",f),c.addEventListener("keypress",p=>{p.key==="Enter"&&f()})},r=(o,a)=>o.replace(new RegExp(`[?&]${a}=1\\b(?!&)|\\b${a}=1&`),"");return{version:"8.6.3",init(o){let l=(o instanceof Element?o:document).querySelectorAll("[data-pagy]");for(let c of l)try{let u=Uint8Array.from(atob(c.getAttribute("data-pagy")),p=>p.charCodeAt(0)),[h,...f]=JSON.parse(new TextDecoder().decode(u));h==="nav"?e(c,f):h==="combo"?t(c,f):h==="selector"?i(c,f):console.warn(`Skipped Pagy.init() for: %o
Unknown keyword '%s'`,c,h)}catch(u){console.warn(`Skipped Pagy.init() for: %o
%s`,c,u)}}}})(),M0=Z_;var du=class extends Pe{connect(){M0.init(this.element)}};var hu=class extends Pe{static targets=["map","addresses"];connect(){ymaps.ready(()=>{this.initMap(),this.processAddresses()})}initMap(){this.myMap=new ymaps.Map(this.mapTarget,{center:[55.753994,37.622093],zoom:10,controls:["zoomControl","fullscreenControl"]})}processAddresses(){this.addressesTarget.querySelectorAll("span").forEach(e=>{let t=e.textContent.trim();this.addCityToMap(t)})}addCityToMap(s){if(!this.myMap)return console.error("\u041A\u0430\u0440\u0442\u0430 \u0435\u0449\u0435 \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u0430");ymaps.geocode(s,{results:1}).then(e=>{let t=e.geoObjects.get(0),i=t.geometry.getCoordinates(),n=t.properties.get("boundedBy");t.options.set("preset","islands#darkBlueDotIconWithCaption"),t.properties.set("iconCaption",t.getAddressLine()),this.myMap.geoObjects.add(t),this.myMap.setBounds(this.myMap.geoObjects.getBounds(),{checkZoomRange:!0})})}};function O0(s){return s!==null&&typeof s=="object"&&"constructor"in s&&s.constructor===Object}function Ff(s,e){s===void 0&&(s={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof s[t]>"u"?s[t]=e[t]:O0(e[t])&&O0(s[t])&&Object.keys(e[t]).length>0&&Ff(s[t],e[t])})}var L0={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function wt(){let s=typeof document<"u"?document:{};return Ff(s,L0),s}var Q_={document:L0,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(s){return typeof setTimeout>"u"?(s(),null):setTimeout(s,0)},cancelAnimationFrame(s){typeof setTimeout>"u"||clearTimeout(s)}};function ut(){let s=typeof window<"u"?window:{};return Ff(s,Q_),s}function k0(s){return s===void 0&&(s=""),s.trim().split(" ").filter(e=>!!e.trim())}function D0(s){let e=s;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Vn(s,e){return e===void 0&&(e=0),setTimeout(s,e)}function qn(){return Date.now()}function eM(s){let e=ut(),t;return e.getComputedStyle&&(t=e.getComputedStyle(s,null)),!t&&s.currentStyle&&(t=s.currentStyle),t||(t=s.style),t}function If(s,e){e===void 0&&(e="x");let t=ut(),i,n,r,o=eM(s);return t.WebKitCSSMatrix?(n=o.transform||o.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(a=>a.replace(",",".")).join(", ")),r=new t.WebKitCSSMatrix(n==="none"?"":n)):(r=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=r.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?n=r.m41:i.length===16?n=parseFloat(i[12]):n=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?n=r.m42:i.length===16?n=parseFloat(i[13]):n=parseFloat(i[5])),n||0}function ba(s){return typeof s=="object"&&s!==null&&s.constructor&&Object.prototype.toString.call(s).slice(8,-1)==="Object"}function tM(s){return typeof window<"u"&&typeof window.HTMLElement<"u"?s instanceof HTMLElement:s&&(s.nodeType===1||s.nodeType===11)}function Kt(){let s=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){let i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!tM(i)){let n=Object.keys(Object(i)).filter(r=>e.indexOf(r)<0);for(let r=0,o=n.length;r<o;r+=1){let a=n[r],l=Object.getOwnPropertyDescriptor(i,a);l!==void 0&&l.enumerable&&(ba(s[a])&&ba(i[a])?i[a].__swiper__?s[a]=i[a]:Kt(s[a],i[a]):!ba(s[a])&&ba(i[a])?(s[a]={},i[a].__swiper__?s[a]=i[a]:Kt(s[a],i[a])):s[a]=i[a])}}}return s}function ao(s,e,t){s.style.setProperty(e,t)}function Rf(s){let{swiper:e,targetPosition:t,side:i}=s,n=ut(),r=-e.translate,o=null,a,l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(e.cssModeFrameID);let c=t>r?"next":"prev",u=(f,p)=>c==="next"&&f>=p||c==="prev"&&f<=p,h=()=>{a=new Date().getTime(),o===null&&(o=a);let f=Math.max(Math.min((a-o)/l,1),0),p=.5-Math.cos(f*Math.PI)/2,v=r+p*(t-r);if(u(v,t)&&(v=t),e.wrapperEl.scrollTo({[i]:v}),u(v,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:v})}),n.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=n.requestAnimationFrame(h)};h()}function At(s,e){e===void 0&&(e="");let t=[...s.children];return s instanceof HTMLSlotElement&&t.push(...s.assignedElements()),e?t.filter(i=>i.matches(e)):t}function F0(s,e){let t=e.contains(s);return!t&&e instanceof HTMLSlotElement?[...e.assignedElements()].includes(s):t}function ya(s){try{console.warn(s);return}catch{}}function Di(s,e){e===void 0&&(e=[]);let t=document.createElement(s);return t.classList.add(...Array.isArray(e)?e:k0(e)),t}function I0(s,e){let t=[];for(;s.previousElementSibling;){let i=s.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),s=i}return t}function R0(s,e){let t=[];for(;s.nextElementSibling;){let i=s.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),s=i}return t}function ws(s,e){return ut().getComputedStyle(s,null).getPropertyValue(e)}function wa(s){let e=s,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function Ea(s,e){let t=[],i=s.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function pu(s,e,t){let i=ut();return t?s[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(s,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(s,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):s.offsetWidth}function ri(s){return(Array.isArray(s)?s:[s]).filter(e=>!!e)}var Nf;function iM(){let s=ut(),e=wt();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in s||s.DocumentTouch&&e instanceof s.DocumentTouch)}}function U0(){return Nf||(Nf=iM()),Nf}var Bf;function sM(s){let{userAgent:e}=s===void 0?{}:s,t=U0(),i=ut(),n=i.navigator.platform,r=e||i.navigator.userAgent,o={ios:!1,android:!1},a=i.screen.width,l=i.screen.height,c=r.match(/(Android);?[\s\/]+([\d.]+)?/),u=r.match(/(iPad).*OS\s([\d_]+)/),h=r.match(/(iPod)(.*OS\s([\d_]+))?/),f=!u&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=n==="Win32",v=n==="MacIntel",w=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&v&&t.touch&&w.indexOf(`${a}x${l}`)>=0&&(u=r.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),v=!1),c&&!p&&(o.os="android",o.android=!0),(u||f||h)&&(o.os="ios",o.ios=!0),o}function j0(s){return s===void 0&&(s={}),Bf||(Bf=sM(s)),Bf}var zf;function nM(){let s=ut(),e=j0(),t=!1;function i(){let a=s.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(i()){let a=String(s.navigator.userAgent);if(a.includes("Version/")){let[l,c]=a.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));t=l<16||l===16&&c<2}}let n=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(s.navigator.userAgent),r=i(),o=r||n&&e.ios;return{isSafari:t||r,needPerspectiveFix:t,need3dFix:o,isWebView:n}}function rM(){return zf||(zf=nM()),zf}function oM(s){let{swiper:e,on:t,emit:i}=s,n=ut(),r=null,o=null,a=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(r=new ResizeObserver(h=>{o=n.requestAnimationFrame(()=>{let{width:f,height:p}=e,v=f,w=p;h.forEach(S=>{let{contentBoxSize:A,contentRect:k,target:D}=S;D&&D!==e.el||(v=k?k.width:(A[0]||A).inlineSize,w=k?k.height:(A[0]||A).blockSize)}),(v!==f||w!==p)&&a()})}),r.observe(e.el))},c=()=>{o&&n.cancelAnimationFrame(o),r&&r.unobserve&&e.el&&(r.unobserve(e.el),r=null)},u=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof n.ResizeObserver<"u"){l();return}n.addEventListener("resize",a),n.addEventListener("orientationchange",u)}),t("destroy",()=>{c(),n.removeEventListener("resize",a),n.removeEventListener("orientationchange",u)})}function aM(s){let{swiper:e,extendParams:t,on:i,emit:n}=s,r=[],o=ut(),a=function(u,h){h===void 0&&(h={});let f=o.MutationObserver||o.WebkitMutationObserver,p=new f(v=>{if(e.__preventObserver__)return;if(v.length===1){n("observerUpdate",v[0]);return}let w=function(){n("observerUpdate",v[0])};o.requestAnimationFrame?o.requestAnimationFrame(w):o.setTimeout(w,0)});p.observe(u,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:e.isElement||(typeof h.childList>"u"?!0:h).childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),r.push(p)},l=()=>{if(e.params.observer){if(e.params.observeParents){let u=Ea(e.hostEl);for(let h=0;h<u.length;h+=1)a(u[h])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},c=()=>{r.forEach(u=>{u.disconnect()}),r.splice(0,r.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var lM={on(s,e,t){let i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;let n=t?"unshift":"push";return s.split(" ").forEach(r=>{i.eventsListeners[r]||(i.eventsListeners[r]=[]),i.eventsListeners[r][n](e)}),i},once(s,e,t){let i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function n(){i.off(s,n),n.__emitterProxy&&delete n.__emitterProxy;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];e.apply(i,o)}return n.__emitterProxy=e,i.on(s,n,t)},onAny(s,e){let t=this;if(!t.eventsListeners||t.destroyed||typeof s!="function")return t;let i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(s)<0&&t.eventsAnyListeners[i](s),t},offAny(s){let e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;let t=e.eventsAnyListeners.indexOf(s);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(s,e){let t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||s.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((n,r)=>{(n===e||n.__emitterProxy&&n.__emitterProxy===e)&&t.eventsListeners[i].splice(r,1)})}),t},emit(){let s=this;if(!s.eventsListeners||s.destroyed||!s.eventsListeners)return s;let e,t,i;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return typeof r[0]=="string"||Array.isArray(r[0])?(e=r[0],t=r.slice(1,r.length),i=s):(e=r[0].events,t=r[0].data,i=r[0].context||s),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{s.eventsAnyListeners&&s.eventsAnyListeners.length&&s.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...t])}),s.eventsListeners&&s.eventsListeners[l]&&s.eventsListeners[l].forEach(c=>{c.apply(i,t)})}),s}};function cM(){let s=this,e,t,i=s.el;typeof s.params.width<"u"&&s.params.width!==null?e=s.params.width:e=i.clientWidth,typeof s.params.height<"u"&&s.params.height!==null?t=s.params.height:t=i.clientHeight,!(e===0&&s.isHorizontal()||t===0&&s.isVertical())&&(e=e-parseInt(ws(i,"padding-left")||0,10)-parseInt(ws(i,"padding-right")||0,10),t=t-parseInt(ws(i,"padding-top")||0,10)-parseInt(ws(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(s,{width:e,height:t,size:s.isHorizontal()?e:t}))}function uM(){let s=this;function e(X,oe){return parseFloat(X.getPropertyValue(s.getDirectionLabel(oe))||0)}let t=s.params,{wrapperEl:i,slidesEl:n,size:r,rtlTranslate:o,wrongRTL:a}=s,l=s.virtual&&t.virtual.enabled,c=l?s.virtual.slides.length:s.slides.length,u=At(n,`.${s.params.slideClass}, swiper-slide`),h=l?s.virtual.slides.length:u.length,f=[],p=[],v=[],w=t.slidesOffsetBefore;typeof w=="function"&&(w=t.slidesOffsetBefore.call(s));let S=t.slidesOffsetAfter;typeof S=="function"&&(S=t.slidesOffsetAfter.call(s));let A=s.snapGrid.length,k=s.slidesGrid.length,D=t.spaceBetween,R=-w,$=0,U=0;if(typeof r>"u")return;typeof D=="string"&&D.indexOf("%")>=0?D=parseFloat(D.replace("%",""))/100*r:typeof D=="string"&&(D=parseFloat(D)),s.virtualSize=-D,u.forEach(X=>{o?X.style.marginLeft="":X.style.marginRight="",X.style.marginBottom="",X.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(ao(i,"--swiper-centered-offset-before",""),ao(i,"--swiper-centered-offset-after",""));let Z=t.grid&&t.grid.rows>1&&s.grid;Z?s.grid.initSlides(u):s.grid&&s.grid.unsetSlides();let K,ue=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(X=>typeof t.breakpoints[X].slidesPerView<"u").length>0;for(let X=0;X<h;X+=1){K=0;let oe;if(u[X]&&(oe=u[X]),Z&&s.grid.updateSlide(X,oe,u),!(u[X]&&ws(oe,"display")==="none")){if(t.slidesPerView==="auto"){ue&&(u[X].style[s.getDirectionLabel("width")]="");let he=getComputedStyle(oe),se=oe.style.transform,Q=oe.style.webkitTransform;if(se&&(oe.style.transform="none"),Q&&(oe.style.webkitTransform="none"),t.roundLengths)K=s.isHorizontal()?pu(oe,"width",!0):pu(oe,"height",!0);else{let H=e(he,"width"),T=e(he,"padding-left"),F=e(he,"padding-right"),_=e(he,"margin-left"),J=e(he,"margin-right"),ie=he.getPropertyValue("box-sizing");if(ie&&ie==="border-box")K=H+_+J;else{let{clientWidth:le,offsetWidth:ve}=oe;K=H+T+F+_+J+(ve-le)}}se&&(oe.style.transform=se),Q&&(oe.style.webkitTransform=Q),t.roundLengths&&(K=Math.floor(K))}else K=(r-(t.slidesPerView-1)*D)/t.slidesPerView,t.roundLengths&&(K=Math.floor(K)),u[X]&&(u[X].style[s.getDirectionLabel("width")]=`${K}px`);u[X]&&(u[X].swiperSlideSize=K),v.push(K),t.centeredSlides?(R=R+K/2+$/2+D,$===0&&X!==0&&(R=R-r/2-D),X===0&&(R=R-r/2-D),Math.abs(R)<1/1e3&&(R=0),t.roundLengths&&(R=Math.floor(R)),U%t.slidesPerGroup===0&&f.push(R),p.push(R)):(t.roundLengths&&(R=Math.floor(R)),(U-Math.min(s.params.slidesPerGroupSkip,U))%s.params.slidesPerGroup===0&&f.push(R),p.push(R),R=R+K+D),s.virtualSize+=K+D,$=K,U+=1}}if(s.virtualSize=Math.max(s.virtualSize,r)+S,o&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${s.virtualSize+D}px`),t.setWrapperSize&&(i.style[s.getDirectionLabel("width")]=`${s.virtualSize+D}px`),Z&&s.grid.updateWrapperSize(K,f),!t.centeredSlides){let X=[];for(let oe=0;oe<f.length;oe+=1){let he=f[oe];t.roundLengths&&(he=Math.floor(he)),f[oe]<=s.virtualSize-r&&X.push(he)}f=X,Math.floor(s.virtualSize-r)-Math.floor(f[f.length-1])>1&&f.push(s.virtualSize-r)}if(l&&t.loop){let X=v[0]+D;if(t.slidesPerGroup>1){let oe=Math.ceil((s.virtual.slidesBefore+s.virtual.slidesAfter)/t.slidesPerGroup),he=X*t.slidesPerGroup;for(let se=0;se<oe;se+=1)f.push(f[f.length-1]+he)}for(let oe=0;oe<s.virtual.slidesBefore+s.virtual.slidesAfter;oe+=1)t.slidesPerGroup===1&&f.push(f[f.length-1]+X),p.push(p[p.length-1]+X),s.virtualSize+=X}if(f.length===0&&(f=[0]),D!==0){let X=s.isHorizontal()&&o?"marginLeft":s.getDirectionLabel("marginRight");u.filter((oe,he)=>!t.cssMode||t.loop?!0:he!==u.length-1).forEach(oe=>{oe.style[X]=`${D}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let X=0;v.forEach(he=>{X+=he+(D||0)}),X-=D;let oe=X>r?X-r:0;f=f.map(he=>he<=0?-w:he>oe?oe+S:he)}if(t.centerInsufficientSlides){let X=0;v.forEach(he=>{X+=he+(D||0)}),X-=D;let oe=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(X+oe<r){let he=(r-X-oe)/2;f.forEach((se,Q)=>{f[Q]=se-he}),p.forEach((se,Q)=>{p[Q]=se+he})}}if(Object.assign(s,{slides:u,snapGrid:f,slidesGrid:p,slidesSizesGrid:v}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){ao(i,"--swiper-centered-offset-before",`${-f[0]}px`),ao(i,"--swiper-centered-offset-after",`${s.size/2-v[v.length-1]/2}px`);let X=-s.snapGrid[0],oe=-s.slidesGrid[0];s.snapGrid=s.snapGrid.map(he=>he+X),s.slidesGrid=s.slidesGrid.map(he=>he+oe)}if(h!==c&&s.emit("slidesLengthChange"),f.length!==A&&(s.params.watchOverflow&&s.checkOverflow(),s.emit("snapGridLengthChange")),p.length!==k&&s.emit("slidesGridLengthChange"),t.watchSlidesProgress&&s.updateSlidesOffset(),s.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){let X=`${t.containerModifierClass}backface-hidden`,oe=s.el.classList.contains(X);h<=t.maxBackfaceHiddenSlides?oe||s.el.classList.add(X):oe&&s.el.classList.remove(X)}}function dM(s){let e=this,t=[],i=e.virtual&&e.params.virtual.enabled,n=0,r;typeof s=="number"?e.setTransition(s):s===!0&&e.setTransition(e.params.speed);let o=a=>i?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(r=0;r<Math.ceil(e.params.slidesPerView);r+=1){let a=e.activeIndex+r;if(a>e.slides.length&&!i)break;t.push(o(a))}else t.push(o(e.activeIndex));for(r=0;r<t.length;r+=1)if(typeof t[r]<"u"){let a=t[r].offsetHeight;n=a>n?a:n}(n||n===0)&&(e.wrapperEl.style.height=`${n}px`)}function hM(){let s=this,e=s.slides,t=s.isElement?s.isHorizontal()?s.wrapperEl.offsetLeft:s.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(s.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-s.cssOverflowAdjustment()}var N0=(s,e,t)=>{e&&!s.classList.contains(t)?s.classList.add(t):!e&&s.classList.contains(t)&&s.classList.remove(t)};function pM(s){s===void 0&&(s=this&&this.translate||0);let e=this,t=e.params,{slides:i,rtlTranslate:n,snapGrid:r}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-s;n&&(o=s),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<i.length;l+=1){let c=i[l],u=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=i[0].swiperSlideOffset);let h=(o+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),f=(o-r[0]+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),p=-(o-u),v=p+e.slidesSizesGrid[l],w=p>=0&&p<=e.size-e.slidesSizesGrid[l],S=p>=0&&p<e.size-1||v>1&&v<=e.size||p<=0&&v>=e.size;S&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l)),N0(c,S,t.slideVisibleClass),N0(c,w,t.slideFullyVisibleClass),c.progress=n?-h:h,c.originalProgress=n?-f:f}}function fM(s){let e=this;if(typeof s>"u"){let u=e.rtlTranslate?-1:1;s=e&&e.translate&&e.translate*u||0}let t=e.params,i=e.maxTranslate()-e.minTranslate(),{progress:n,isBeginning:r,isEnd:o,progressLoop:a}=e,l=r,c=o;if(i===0)n=0,r=!0,o=!0;else{n=(s-e.minTranslate())/i;let u=Math.abs(s-e.minTranslate())<1,h=Math.abs(s-e.maxTranslate())<1;r=u||n<=0,o=h||n>=1,u&&(n=0),h&&(n=1)}if(t.loop){let u=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[u],p=e.slidesGrid[h],v=e.slidesGrid[e.slidesGrid.length-1],w=Math.abs(s);w>=f?a=(w-f)/v:a=(w+v-p)/v,a>1&&(a-=1)}Object.assign(e,{progress:n,progressLoop:a,isBeginning:r,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(s),r&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!r||c&&!o)&&e.emit("fromEdge"),e.emit("progress",n)}var $f=(s,e,t)=>{e&&!s.classList.contains(t)?s.classList.add(t):!e&&s.classList.contains(t)&&s.classList.remove(t)};function mM(){let s=this,{slides:e,params:t,slidesEl:i,activeIndex:n}=s,r=s.virtual&&t.virtual.enabled,o=s.grid&&t.grid&&t.grid.rows>1,a=h=>At(i,`.${t.slideClass}${h}, swiper-slide${h}`)[0],l,c,u;if(r)if(t.loop){let h=n-s.virtual.slidesBefore;h<0&&(h=s.virtual.slides.length+h),h>=s.virtual.slides.length&&(h-=s.virtual.slides.length),l=a(`[data-swiper-slide-index="${h}"]`)}else l=a(`[data-swiper-slide-index="${n}"]`);else o?(l=e.filter(h=>h.column===n)[0],u=e.filter(h=>h.column===n+1)[0],c=e.filter(h=>h.column===n-1)[0]):l=e[n];l&&(o||(u=R0(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!u&&(u=e[0]),c=I0(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(h=>{$f(h,h===l,t.slideActiveClass),$f(h,h===u,t.slideNextClass),$f(h,h===c,t.slidePrevClass)}),s.emitSlidesClasses()}var fu=(s,e)=>{if(!s||s.destroyed||!s.params)return;let t=()=>s.isElement?"swiper-slide":`.${s.params.slideClass}`,i=e.closest(t());if(i){let n=i.querySelector(`.${s.params.lazyPreloaderClass}`);!n&&s.isElement&&(i.shadowRoot?n=i.shadowRoot.querySelector(`.${s.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(n=i.shadowRoot.querySelector(`.${s.params.lazyPreloaderClass}`),n&&n.remove())})),n&&n.remove()}},Hf=(s,e)=>{if(!s.slides[e])return;let t=s.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Vf=s=>{if(!s||s.destroyed||!s.params)return;let e=s.params.lazyPreloadPrevNext,t=s.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);let i=s.params.slidesPerView==="auto"?s.slidesPerViewDynamic():Math.ceil(s.params.slidesPerView),n=s.activeIndex;if(s.params.grid&&s.params.grid.rows>1){let o=n,a=[o-e];a.push(...Array.from({length:e}).map((l,c)=>o+i+c)),s.slides.forEach((l,c)=>{a.includes(l.column)&&Hf(s,c)});return}let r=n+i-1;if(s.params.rewind||s.params.loop)for(let o=n-e;o<=r+e;o+=1){let a=(o%t+t)%t;(a<n||a>r)&&Hf(s,a)}else for(let o=Math.max(n-e,0);o<=Math.min(r+e,t-1);o+=1)o!==n&&(o>r||o<n)&&Hf(s,o)};function gM(s){let{slidesGrid:e,params:t}=s,i=s.rtlTranslate?s.translate:-s.translate,n;for(let r=0;r<e.length;r+=1)typeof e[r+1]<"u"?i>=e[r]&&i<e[r+1]-(e[r+1]-e[r])/2?n=r:i>=e[r]&&i<e[r+1]&&(n=r+1):i>=e[r]&&(n=r);return t.normalizeSlideIndex&&(n<0||typeof n>"u")&&(n=0),n}function vM(s){let e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:n,activeIndex:r,realIndex:o,snapIndex:a}=e,l=s,c,u=p=>{let v=p-e.virtual.slidesBefore;return v<0&&(v=e.virtual.slides.length+v),v>=e.virtual.slides.length&&(v-=e.virtual.slides.length),v};if(typeof l>"u"&&(l=gM(e)),i.indexOf(t)>=0)c=i.indexOf(t);else{let p=Math.min(n.slidesPerGroupSkip,l);c=p+Math.floor((l-p)/n.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===r&&!e.params.loop){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===r&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=u(l);return}let h=e.grid&&n.grid&&n.grid.rows>1,f;if(e.virtual&&n.virtual.enabled&&n.loop)f=u(l);else if(h){let p=e.slides.filter(w=>w.column===l)[0],v=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(v)&&(v=Math.max(e.slides.indexOf(p),0)),f=Math.floor(v/n.grid.rows)}else if(e.slides[l]){let p=e.slides[l].getAttribute("data-swiper-slide-index");p?f=parseInt(p,10):f=l}else f=l;Object.assign(e,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:f,previousIndex:r,activeIndex:l}),e.initialized&&Vf(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function bM(s,e){let t=this,i=t.params,n=s.closest(`.${i.slideClass}, swiper-slide`);!n&&t.isElement&&e&&e.length>1&&e.includes(s)&&[...e.slice(e.indexOf(s)+1,e.length)].forEach(a=>{!n&&a.matches&&a.matches(`.${i.slideClass}, swiper-slide`)&&(n=a)});let r=!1,o;if(n){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===n){r=!0,o=a;break}}if(n&&r)t.clickedSlide=n,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(n.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var yM={updateSize:cM,updateSlides:uM,updateAutoHeight:dM,updateSlidesOffset:hM,updateSlidesProgress:pM,updateProgress:fM,updateSlidesClasses:mM,updateActiveIndex:vM,updateClickedSlide:bM};function wM(s){s===void 0&&(s=this.isHorizontal()?"x":"y");let e=this,{params:t,rtlTranslate:i,translate:n,wrapperEl:r}=e;if(t.virtualTranslate)return i?-n:n;if(t.cssMode)return n;let o=If(r,s);return o+=e.cssOverflowAdjustment(),i&&(o=-o),o||0}function EM(s,e){let t=this,{rtlTranslate:i,params:n,wrapperEl:r,progress:o}=t,a=0,l=0,c=0;t.isHorizontal()?a=i?-s:s:l=s,n.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,n.cssMode?r[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:n.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),r.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let u,h=t.maxTranslate()-t.minTranslate();h===0?u=0:u=(s-t.minTranslate())/h,u!==o&&t.updateProgress(s),t.emit("setTranslate",t.translate,e)}function SM(){return-this.snapGrid[0]}function AM(){return-this.snapGrid[this.snapGrid.length-1]}function TM(s,e,t,i,n){s===void 0&&(s=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);let r=this,{params:o,wrapperEl:a}=r;if(r.animating&&o.preventInteractionOnTransition)return!1;let l=r.minTranslate(),c=r.maxTranslate(),u;if(i&&s>l?u=l:i&&s<c?u=c:u=s,r.updateProgress(u),o.cssMode){let h=r.isHorizontal();if(e===0)a[h?"scrollLeft":"scrollTop"]=-u;else{if(!r.support.smoothScroll)return Rf({swiper:r,targetPosition:-u,side:h?"left":"top"}),!0;a.scrollTo({[h?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(r.setTransition(0),r.setTranslate(u),t&&(r.emit("beforeTransitionStart",e,n),r.emit("transitionEnd"))):(r.setTransition(e),r.setTranslate(u),t&&(r.emit("beforeTransitionStart",e,n),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(f){!r||r.destroyed||f.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,r.animating=!1,t&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}var xM={getTranslate:wM,setTranslate:EM,minTranslate:SM,maxTranslate:AM,translateTo:TM};function CM(s,e){let t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${s}ms`,t.wrapperEl.style.transitionDelay=s===0?"0ms":""),t.emit("setTransition",s,e)}function V0(s){let{swiper:e,runCallbacks:t,direction:i,step:n}=s,{activeIndex:r,previousIndex:o}=e,a=i;if(a||(r>o?a="next":r<o?a="prev":a="reset"),e.emit(`transition${n}`),t&&r!==o){if(a==="reset"){e.emit(`slideResetTransition${n}`);return}e.emit(`slideChangeTransition${n}`),a==="next"?e.emit(`slideNextTransition${n}`):e.emit(`slidePrevTransition${n}`)}}function PM(s,e){s===void 0&&(s=!0);let t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),V0({swiper:t,runCallbacks:s,direction:e,step:"Start"}))}function _M(s,e){s===void 0&&(s=!0);let t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),V0({swiper:t,runCallbacks:s,direction:e,step:"End"}))}var MM={setTransition:CM,transitionStart:PM,transitionEnd:_M};function OM(s,e,t,i,n){s===void 0&&(s=0),t===void 0&&(t=!0),typeof s=="string"&&(s=parseInt(s,10));let r=this,o=s;o<0&&(o=0);let{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:h,rtlTranslate:f,wrapperEl:p,enabled:v}=r;if(!v&&!i&&!n||r.destroyed||r.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=r.params.speed);let w=Math.min(r.params.slidesPerGroupSkip,o),S=w+Math.floor((o-w)/r.params.slidesPerGroup);S>=l.length&&(S=l.length-1);let A=-l[S];if(a.normalizeSlideIndex)for(let $=0;$<c.length;$+=1){let U=-Math.floor(A*100),Z=Math.floor(c[$]*100),K=Math.floor(c[$+1]*100);typeof c[$+1]<"u"?U>=Z&&U<K-(K-Z)/2?o=$:U>=Z&&U<K&&(o=$+1):U>=Z&&(o=$)}if(r.initialized&&o!==h&&(!r.allowSlideNext&&(f?A>r.translate&&A>r.minTranslate():A<r.translate&&A<r.minTranslate())||!r.allowSlidePrev&&A>r.translate&&A>r.maxTranslate()&&(h||0)!==o))return!1;o!==(u||0)&&t&&r.emit("beforeSlideChangeStart"),r.updateProgress(A);let k;o>h?k="next":o<h?k="prev":k="reset";let D=r.virtual&&r.params.virtual.enabled;if(!(D&&n)&&(f&&-A===r.translate||!f&&A===r.translate))return r.updateActiveIndex(o),a.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),a.effect!=="slide"&&r.setTranslate(A),k!=="reset"&&(r.transitionStart(t,k),r.transitionEnd(t,k)),!1;if(a.cssMode){let $=r.isHorizontal(),U=f?A:-A;if(e===0)D&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),D&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[$?"scrollLeft":"scrollTop"]=U})):p[$?"scrollLeft":"scrollTop"]=U,D&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1});else{if(!r.support.smoothScroll)return Rf({swiper:r,targetPosition:U,side:$?"left":"top"}),!0;p.scrollTo({[$?"left":"top"]:U,behavior:"smooth"})}return!0}return r.setTransition(e),r.setTranslate(A),r.updateActiveIndex(o),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,i),r.transitionStart(t,k),e===0?r.transitionEnd(t,k):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(U){!r||r.destroyed||U.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(t,k))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0}function LM(s,e,t,i){s===void 0&&(s=0),t===void 0&&(t=!0),typeof s=="string"&&(s=parseInt(s,10));let n=this;if(n.destroyed)return;typeof e>"u"&&(e=n.params.speed);let r=n.grid&&n.params.grid&&n.params.grid.rows>1,o=s;if(n.params.loop)if(n.virtual&&n.params.virtual.enabled)o=o+n.virtual.slidesBefore;else{let a;if(r){let f=o*n.params.grid.rows;a=n.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===f)[0].column}else a=n.getSlideIndexByData(o);let l=r?Math.ceil(n.slides.length/n.params.grid.rows):n.slides.length,{centeredSlides:c}=n.params,u=n.params.slidesPerView;u==="auto"?u=n.slidesPerViewDynamic():(u=Math.ceil(parseFloat(n.params.slidesPerView,10)),c&&u%2===0&&(u=u+1));let h=l-a<u;if(c&&(h=h||a<Math.ceil(u/2)),i&&c&&n.params.slidesPerView!=="auto"&&!r&&(h=!1),h){let f=c?a<n.activeIndex?"prev":"next":a-n.activeIndex-1<n.params.slidesPerView?"next":"prev";n.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?a+1:a-l+1,slideRealIndex:f==="next"?n.realIndex:void 0})}if(r){let f=o*n.params.grid.rows;o=n.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===f)[0].column}else o=n.getSlideIndexByData(o)}return requestAnimationFrame(()=>{n.slideTo(o,e,t,i)}),n}function kM(s,e,t){e===void 0&&(e=!0);let i=this,{enabled:n,params:r,animating:o}=i;if(!n||i.destroyed)return i;typeof s>"u"&&(s=i.params.speed);let a=r.slidesPerGroup;r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(a=Math.max(i.slidesPerViewDynamic("current",!0),1));let l=i.activeIndex<r.slidesPerGroupSkip?1:a,c=i.virtual&&r.virtual.enabled;if(r.loop){if(o&&!c&&r.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,s,e,t)}),!0}return r.rewind&&i.isEnd?i.slideTo(0,s,e,t):i.slideTo(i.activeIndex+l,s,e,t)}function DM(s,e,t){e===void 0&&(e=!0);let i=this,{params:n,snapGrid:r,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=i;if(!l||i.destroyed)return i;typeof s>"u"&&(s=i.params.speed);let u=i.virtual&&n.virtual.enabled;if(n.loop){if(c&&!u&&n.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}let h=a?i.translate:-i.translate;function f(A){return A<0?-Math.floor(Math.abs(A)):Math.floor(A)}let p=f(h),v=r.map(A=>f(A)),w=r[v.indexOf(p)-1];if(typeof w>"u"&&n.cssMode){let A;r.forEach((k,D)=>{p>=k&&(A=D)}),typeof A<"u"&&(w=r[A>0?A-1:A])}let S=0;if(typeof w<"u"&&(S=o.indexOf(w),S<0&&(S=i.activeIndex-1),n.slidesPerView==="auto"&&n.slidesPerGroup===1&&n.slidesPerGroupAuto&&(S=S-i.slidesPerViewDynamic("previous",!0)+1,S=Math.max(S,0))),n.rewind&&i.isBeginning){let A=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(A,s,e,t)}else if(n.loop&&i.activeIndex===0&&n.cssMode)return requestAnimationFrame(()=>{i.slideTo(S,s,e,t)}),!0;return i.slideTo(S,s,e,t)}function FM(s,e,t){e===void 0&&(e=!0);let i=this;if(!i.destroyed)return typeof s>"u"&&(s=i.params.speed),i.slideTo(i.activeIndex,s,e,t)}function IM(s,e,t,i){e===void 0&&(e=!0),i===void 0&&(i=.5);let n=this;if(n.destroyed)return;typeof s>"u"&&(s=n.params.speed);let r=n.activeIndex,o=Math.min(n.params.slidesPerGroupSkip,r),a=o+Math.floor((r-o)/n.params.slidesPerGroup),l=n.rtlTranslate?n.translate:-n.translate;if(l>=n.snapGrid[a]){let c=n.snapGrid[a],u=n.snapGrid[a+1];l-c>(u-c)*i&&(r+=n.params.slidesPerGroup)}else{let c=n.snapGrid[a-1],u=n.snapGrid[a];l-c<=(u-c)*i&&(r-=n.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,n.slidesGrid.length-1),n.slideTo(r,s,e,t)}function RM(){let s=this;if(s.destroyed)return;let{params:e,slidesEl:t}=s,i=e.slidesPerView==="auto"?s.slidesPerViewDynamic():e.slidesPerView,n=s.clickedIndex,r,o=s.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(s.animating)return;r=parseInt(s.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?n<s.loopedSlides-i/2||n>s.slides.length-s.loopedSlides+i/2?(s.loopFix(),n=s.getSlideIndex(At(t,`${o}[data-swiper-slide-index="${r}"]`)[0]),Vn(()=>{s.slideTo(n)})):s.slideTo(n):n>s.slides.length-i?(s.loopFix(),n=s.getSlideIndex(At(t,`${o}[data-swiper-slide-index="${r}"]`)[0]),Vn(()=>{s.slideTo(n)})):s.slideTo(n)}else s.slideTo(n)}var NM={slideTo:OM,slideToLoop:LM,slideNext:kM,slidePrev:DM,slideReset:FM,slideToClosest:IM,slideToClickedSlide:RM};function BM(s){let e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;let n=()=>{At(i,`.${t.slideClass}, swiper-slide`).forEach((h,f)=>{h.setAttribute("data-swiper-slide-index",f)})},r=e.grid&&t.grid&&t.grid.rows>1,o=t.slidesPerGroup*(r?t.grid.rows:1),a=e.slides.length%o!==0,l=r&&e.slides.length%t.grid.rows!==0,c=u=>{for(let h=0;h<u;h+=1){let f=e.isElement?Di("swiper-slide",[t.slideBlankClass]):Di("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(f)}};if(a){if(t.loopAddBlankSlides){let u=o-e.slides.length%o;c(u),e.recalcSlides(),e.updateSlides()}else ya("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");n()}else if(l){if(t.loopAddBlankSlides){let u=t.grid.rows-e.slides.length%t.grid.rows;c(u),e.recalcSlides(),e.updateSlides()}else ya("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");n()}else n();e.loopFix({slideRealIndex:s,direction:t.centeredSlides?void 0:"next"})}function zM(s){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:n,activeSlideIndex:r,byController:o,byMousewheel:a}=s===void 0?{}:s,l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");let{slides:c,allowSlidePrev:u,allowSlideNext:h,slidesEl:f,params:p}=l,{centeredSlides:v}=p;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&p.virtual.enabled){t&&(!p.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):p.centeredSlides&&l.snapIndex<p.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=u,l.allowSlideNext=h,l.emit("loopFix");return}let w=p.slidesPerView;w==="auto"?w=l.slidesPerViewDynamic():(w=Math.ceil(parseFloat(p.slidesPerView,10)),v&&w%2===0&&(w=w+1));let S=p.slidesPerGroupAuto?w:p.slidesPerGroup,A=S;A%S!==0&&(A+=S-A%S),A+=p.loopAdditionalSlides,l.loopedSlides=A;let k=l.grid&&p.grid&&p.grid.rows>1;c.length<w+A?ya("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):k&&p.grid.fill==="row"&&ya("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");let D=[],R=[],$=l.activeIndex;typeof r>"u"?r=l.getSlideIndex(c.filter(se=>se.classList.contains(p.slideActiveClass))[0]):$=r;let U=i==="next"||!i,Z=i==="prev"||!i,K=0,ue=0,X=k?Math.ceil(c.length/p.grid.rows):c.length,he=(k?c[r].column:r)+(v&&typeof n>"u"?-w/2+.5:0);if(he<A){K=Math.max(A-he,S);for(let se=0;se<A-he;se+=1){let Q=se-Math.floor(se/X)*X;if(k){let H=X-Q-1;for(let T=c.length-1;T>=0;T-=1)c[T].column===H&&D.push(T)}else D.push(X-Q-1)}}else if(he+w>X-A){ue=Math.max(he-(X-A*2),S);for(let se=0;se<ue;se+=1){let Q=se-Math.floor(se/X)*X;k?c.forEach((H,T)=>{H.column===Q&&R.push(T)}):R.push(Q)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),Z&&D.forEach(se=>{c[se].swiperLoopMoveDOM=!0,f.prepend(c[se]),c[se].swiperLoopMoveDOM=!1}),U&&R.forEach(se=>{c[se].swiperLoopMoveDOM=!0,f.append(c[se]),c[se].swiperLoopMoveDOM=!1}),l.recalcSlides(),p.slidesPerView==="auto"?l.updateSlides():k&&(D.length>0&&Z||R.length>0&&U)&&l.slides.forEach((se,Q)=>{l.grid.updateSlide(Q,se,l.slides)}),p.watchSlidesProgress&&l.updateSlidesOffset(),t){if(D.length>0&&Z){if(typeof e>"u"){let se=l.slidesGrid[$],H=l.slidesGrid[$+K]-se;a?l.setTranslate(l.translate-H):(l.slideTo($+Math.ceil(K),0,!1,!0),n&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-H,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-H))}else if(n){let se=k?D.length/p.grid.rows:D.length;l.slideTo(l.activeIndex+se,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(R.length>0&&U)if(typeof e>"u"){let se=l.slidesGrid[$],H=l.slidesGrid[$-ue]-se;a?l.setTranslate(l.translate-H):(l.slideTo($-ue,0,!1,!0),n&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-H,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-H))}else{let se=k?R.length/p.grid.rows:R.length;l.slideTo(l.activeIndex-se,0,!1,!0)}}if(l.allowSlidePrev=u,l.allowSlideNext=h,l.controller&&l.controller.control&&!o){let se={slideRealIndex:e,direction:i,setTranslate:n,activeSlideIndex:r,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(Q=>{!Q.destroyed&&Q.params.loop&&Q.loopFix({...se,slideTo:Q.params.slidesPerView===p.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...se,slideTo:l.controller.control.params.slidesPerView===p.slidesPerView?t:!1})}l.emit("loopFix")}function $M(){let s=this,{params:e,slidesEl:t}=s;if(!e.loop||s.virtual&&s.params.virtual.enabled)return;s.recalcSlides();let i=[];s.slides.forEach(n=>{let r=typeof n.swiperSlideIndex>"u"?n.getAttribute("data-swiper-slide-index")*1:n.swiperSlideIndex;i[r]=n}),s.slides.forEach(n=>{n.removeAttribute("data-swiper-slide-index")}),i.forEach(n=>{t.append(n)}),s.recalcSlides(),s.slideTo(s.realIndex,0)}var HM={loopCreate:BM,loopFix:zM,loopDestroy:$M};function UM(s){let e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;let t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=s?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function jM(){let s=this;s.params.watchOverflow&&s.isLocked||s.params.cssMode||(s.isElement&&(s.__preventObserver__=!0),s[s.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",s.isElement&&requestAnimationFrame(()=>{s.__preventObserver__=!1}))}var VM={setGrabCursor:UM,unsetGrabCursor:jM};function qM(s,e){e===void 0&&(e=this);function t(i){if(!i||i===wt()||i===ut())return null;i.assignedSlot&&(i=i.assignedSlot);let n=i.closest(s);return!n&&!i.getRootNode?null:n||t(i.getRootNode().host)}return t(e)}function B0(s,e,t){let i=ut(),{params:n}=s,r=n.edgeSwipeDetection,o=n.edgeSwipeThreshold;return r&&(t<=o||t>=i.innerWidth-o)?r==="prevent"?(e.preventDefault(),!0):!1:!0}function WM(s){let e=this,t=wt(),i=s;i.originalEvent&&(i=i.originalEvent);let n=e.touchEventsData;if(i.type==="pointerdown"){if(n.pointerId!==null&&n.pointerId!==i.pointerId)return;n.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(n.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){B0(e,i,i.targetTouches[0].pageX);return}let{params:r,touches:o,enabled:a}=e;if(!a||!r.simulateTouch&&i.pointerType==="mouse"||e.animating&&r.preventInteractionOnTransition)return;!e.animating&&r.cssMode&&r.loop&&e.loopFix();let l=i.target;if(r.touchEventsTarget==="wrapper"&&!F0(l,e.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||n.isTouched&&n.isMoved)return;let c=!!r.noSwipingClass&&r.noSwipingClass!=="",u=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&u&&(l=u[0]);let h=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,f=!!(i.target&&i.target.shadowRoot);if(r.noSwiping&&(f?qM(h,l):l.closest(h))){e.allowClick=!0;return}if(r.swipeHandler&&!l.closest(r.swipeHandler))return;o.currentX=i.pageX,o.currentY=i.pageY;let p=o.currentX,v=o.currentY;if(!B0(e,i,p))return;Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=v,n.touchStartTime=qn(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(n.allowThresholdMove=!1);let w=!0;l.matches(n.focusableElements)&&(w=!1,l.nodeName==="SELECT"&&(n.isTouched=!1)),t.activeElement&&t.activeElement.matches(n.focusableElements)&&t.activeElement!==l&&(i.pointerType==="mouse"||i.pointerType!=="mouse"&&!l.matches(n.focusableElements))&&t.activeElement.blur();let S=w&&e.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||S)&&!l.isContentEditable&&i.preventDefault(),r.freeMode&&r.freeMode.enabled&&e.freeMode&&e.animating&&!r.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function GM(s){let e=wt(),t=this,i=t.touchEventsData,{params:n,touches:r,rtlTranslate:o,enabled:a}=t;if(!a||!n.simulateTouch&&s.pointerType==="mouse")return;let l=s;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].filter(U=>U.identifier===i.touchId)[0],!c||c.identifier!==i.touchId)return}else c=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}let u=c.pageX,h=c.pageY;if(l.preventedByNestedSwiper){r.startX=u,r.startY=h;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(r,{startX:u,startY:h,currentX:u,currentY:h}),i.touchStartTime=qn());return}if(n.touchReleaseOnEdges&&!n.loop){if(t.isVertical()){if(h<r.startY&&t.translate<=t.maxTranslate()||h>r.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(u<r.startX&&t.translate<=t.maxTranslate()||u>r.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&e.activeElement.matches(i.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",l),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=u,r.currentY=h;let f=r.currentX-r.startX,p=r.currentY-r.startY;if(t.params.threshold&&Math.sqrt(f**2+p**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let U;t.isHorizontal()&&r.currentY===r.startY||t.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:f*f+p*p>=25&&(U=Math.atan2(Math.abs(p),Math.abs(f))*180/Math.PI,i.isScrolling=t.isHorizontal()?U>n.touchAngle:90-U>n.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(r.currentX!==r.startX||r.currentY!==r.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!n.cssMode&&l.cancelable&&l.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&l.stopPropagation();let v=t.isHorizontal()?f:p,w=t.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;n.oneWayMovement&&(v=Math.abs(v)*(o?1:-1),w=Math.abs(w)*(o?1:-1)),r.diff=v,v*=n.touchRatio,o&&(v=-v,w=-w);let S=t.touchesDirection;t.swipeDirection=v>0?"prev":"next",t.touchesDirection=w>0?"prev":"next";let A=t.params.loop&&!n.cssMode,k=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(A&&k&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){let U=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(U)}i.allowMomentumBounce=!1,n.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let D;if(new Date().getTime(),i.isMoved&&i.allowThresholdMove&&S!==t.touchesDirection&&A&&k&&Math.abs(v)>=1){Object.assign(r,{startX:u,startY:h,currentX:u,currentY:h,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=v+i.startTranslate;let R=!0,$=n.resistanceRatio;if(n.touchReleaseOnEdges&&($=0),v>0?(A&&k&&!D&&i.allowThresholdMove&&i.currentTranslate>(n.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(n.slidesPerView!=="auto"&&t.slides.length-n.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(R=!1,n.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+v)**$))):v<0&&(A&&k&&!D&&i.allowThresholdMove&&i.currentTranslate<(n.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(n.slidesPerView!=="auto"&&t.slides.length-n.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(n.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(n.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(R=!1,n.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-v)**$))),R&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),n.threshold>0)if(Math.abs(v)>n.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,r.diff=t.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY;return}}else{i.currentTranslate=i.startTranslate;return}!n.followFinger||n.cssMode||((n.freeMode&&n.freeMode.enabled&&t.freeMode||n.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),n.freeMode&&n.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function YM(s){let e=this,t=e.touchEventsData,i=s;i.originalEvent&&(i=i.originalEvent);let n;if(i.type==="touchend"||i.type==="touchcancel"){if(n=[...i.changedTouches].filter($=>$.identifier===t.touchId)[0],!n||n.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;n=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;let{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:u}=e;if(!u||!o.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);let h=qn(),f=h-t.touchStartTime;if(e.allowClick){let $=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide($&&$[0]||i.target,$),e.emit("tap click",i),f<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=qn(),Vn(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let p;if(o.followFinger?p=l?e.translate:-e.translate:p=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:p});return}let v=p>=-e.maxTranslate()&&!e.params.loop,w=0,S=e.slidesSizesGrid[0];for(let $=0;$<c.length;$+=$<o.slidesPerGroupSkip?1:o.slidesPerGroup){let U=$<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof c[$+U]<"u"?(v||p>=c[$]&&p<c[$+U])&&(w=$,S=c[$+U]-c[$]):(v||p>=c[$])&&(w=$,S=c[c.length-1]-c[c.length-2])}let A=null,k=null;o.rewind&&(e.isBeginning?k=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(A=0));let D=(p-c[w])/S,R=w<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(f>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(D>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?A:w+R):e.slideTo(w)),e.swipeDirection==="prev"&&(D>1-o.longSwipesRatio?e.slideTo(w+R):k!==null&&D<0&&Math.abs(D)>o.longSwipesRatio?e.slideTo(k):e.slideTo(w))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(w+R):e.slideTo(w):(e.swipeDirection==="next"&&e.slideTo(A!==null?A:w+R),e.swipeDirection==="prev"&&e.slideTo(k!==null?k:w))}}function z0(){let s=this,{params:e,el:t}=s;if(t&&t.offsetWidth===0)return;e.breakpoints&&s.setBreakpoint();let{allowSlideNext:i,allowSlidePrev:n,snapGrid:r}=s,o=s.virtual&&s.params.virtual.enabled;s.allowSlideNext=!0,s.allowSlidePrev=!0,s.updateSize(),s.updateSlides(),s.updateSlidesClasses();let a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&s.isEnd&&!s.isBeginning&&!s.params.centeredSlides&&!a?s.slideTo(s.slides.length-1,0,!1,!0):s.params.loop&&!o?s.slideToLoop(s.realIndex,0,!1,!0):s.slideTo(s.activeIndex,0,!1,!0),s.autoplay&&s.autoplay.running&&s.autoplay.paused&&(clearTimeout(s.autoplay.resizeTimeout),s.autoplay.resizeTimeout=setTimeout(()=>{s.autoplay&&s.autoplay.running&&s.autoplay.paused&&s.autoplay.resume()},500)),s.allowSlidePrev=n,s.allowSlideNext=i,s.params.watchOverflow&&r!==s.snapGrid&&s.checkOverflow()}function XM(s){let e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&s.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(s.stopPropagation(),s.stopImmediatePropagation())))}function KM(){let s=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=s;if(!i)return;s.previousTranslate=s.translate,s.isHorizontal()?s.translate=-e.scrollLeft:s.translate=-e.scrollTop,s.translate===0&&(s.translate=0),s.updateActiveIndex(),s.updateSlidesClasses();let n,r=s.maxTranslate()-s.minTranslate();r===0?n=0:n=(s.translate-s.minTranslate())/r,n!==s.progress&&s.updateProgress(t?-s.translate:s.translate),s.emit("setTranslate",s.translate,!1)}function JM(s){let e=this;fu(e,s.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function ZM(){let s=this;s.documentTouchHandlerProceeded||(s.documentTouchHandlerProceeded=!0,s.params.touchReleaseOnEdges&&(s.el.style.touchAction="auto"))}var q0=(s,e)=>{let t=wt(),{params:i,el:n,wrapperEl:r,device:o}=s,a=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;!n||typeof n=="string"||(t[l]("touchstart",s.onDocumentTouchStart,{passive:!1,capture:a}),n[l]("touchstart",s.onTouchStart,{passive:!1}),n[l]("pointerdown",s.onTouchStart,{passive:!1}),t[l]("touchmove",s.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",s.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",s.onTouchEnd,{passive:!0}),t[l]("pointerup",s.onTouchEnd,{passive:!0}),t[l]("pointercancel",s.onTouchEnd,{passive:!0}),t[l]("touchcancel",s.onTouchEnd,{passive:!0}),t[l]("pointerout",s.onTouchEnd,{passive:!0}),t[l]("pointerleave",s.onTouchEnd,{passive:!0}),t[l]("contextmenu",s.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&n[l]("click",s.onClick,!0),i.cssMode&&r[l]("scroll",s.onScroll),i.updateOnWindowResize?s[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",z0,!0):s[c]("observerUpdate",z0,!0),n[l]("load",s.onLoad,{capture:!0}))};function QM(){let s=this,{params:e}=s;s.onTouchStart=WM.bind(s),s.onTouchMove=GM.bind(s),s.onTouchEnd=YM.bind(s),s.onDocumentTouchStart=ZM.bind(s),e.cssMode&&(s.onScroll=KM.bind(s)),s.onClick=XM.bind(s),s.onLoad=JM.bind(s),q0(s,"on")}function eO(){q0(this,"off")}var tO={attachEvents:QM,detachEvents:eO},$0=(s,e)=>s.grid&&e.grid&&e.grid.rows>1;function iO(){let s=this,{realIndex:e,initialized:t,params:i,el:n}=s,r=i.breakpoints;if(!r||r&&Object.keys(r).length===0)return;let o=s.getBreakpoint(r,s.params.breakpointsBase,s.el);if(!o||s.currentBreakpoint===o)return;let l=(o in r?r[o]:void 0)||s.originalParams,c=$0(s,i),u=$0(s,l),h=s.params.grabCursor,f=l.grabCursor,p=i.enabled;c&&!u?(n.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),s.emitContainerClasses()):!c&&u&&(n.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&n.classList.add(`${i.containerModifierClass}grid-column`),s.emitContainerClasses()),h&&!f?s.unsetGrabCursor():!h&&f&&s.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(D=>{if(typeof l[D]>"u")return;let R=i[D]&&i[D].enabled,$=l[D]&&l[D].enabled;R&&!$&&s[D].disable(),!R&&$&&s[D].enable()});let v=l.direction&&l.direction!==i.direction,w=i.loop&&(l.slidesPerView!==i.slidesPerView||v),S=i.loop;v&&t&&s.changeDirection(),Kt(s.params,l);let A=s.params.enabled,k=s.params.loop;Object.assign(s,{allowTouchMove:s.params.allowTouchMove,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev}),p&&!A?s.disable():!p&&A&&s.enable(),s.currentBreakpoint=o,s.emit("_beforeBreakpoint",l),t&&(w?(s.loopDestroy(),s.loopCreate(e),s.updateSlides()):!S&&k?(s.loopCreate(e),s.updateSlides()):S&&!k&&s.loopDestroy()),s.emit("breakpoint",l)}function sO(s,e,t){if(e===void 0&&(e="window"),!s||e==="container"&&!t)return;let i=!1,n=ut(),r=e==="window"?n.innerHeight:t.clientHeight,o=Object.keys(s).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){let l=parseFloat(a.substr(1));return{value:r*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){let{point:l,value:c}=o[a];e==="window"?n.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=t.clientWidth&&(i=l)}return i||"max"}var nO={setBreakpoint:iO,getBreakpoint:sO};function rO(s,e){let t=[];return s.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(n=>{i[n]&&t.push(e+n)}):typeof i=="string"&&t.push(e+i)}),t}function oO(){let s=this,{classNames:e,params:t,rtl:i,el:n,device:r}=s,o=rO(["initialized",t.direction,{"free-mode":s.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:r.android},{ios:r.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),n.classList.add(...e),s.emitContainerClasses()}function aO(){let s=this,{el:e,classNames:t}=s;!e||typeof e=="string"||(e.classList.remove(...t),s.emitContainerClasses())}var lO={addClasses:oO,removeClasses:aO};function cO(){let s=this,{isLocked:e,params:t}=s,{slidesOffsetBefore:i}=t;if(i){let n=s.slides.length-1,r=s.slidesGrid[n]+s.slidesSizesGrid[n]+i*2;s.isLocked=s.size>r}else s.isLocked=s.snapGrid.length===1;t.allowSlideNext===!0&&(s.allowSlideNext=!s.isLocked),t.allowSlidePrev===!0&&(s.allowSlidePrev=!s.isLocked),e&&e!==s.isLocked&&(s.isEnd=!1),e!==s.isLocked&&s.emit(s.isLocked?"lock":"unlock")}var uO={checkOverflow:cO},H0={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function dO(s,e){return function(i){i===void 0&&(i={});let n=Object.keys(i)[0],r=i[n];if(typeof r!="object"||r===null){Kt(e,i);return}if(s[n]===!0&&(s[n]={enabled:!0}),n==="navigation"&&s[n]&&s[n].enabled&&!s[n].prevEl&&!s[n].nextEl&&(s[n].auto=!0),["pagination","scrollbar"].indexOf(n)>=0&&s[n]&&s[n].enabled&&!s[n].el&&(s[n].auto=!0),!(n in s&&"enabled"in r)){Kt(e,i);return}typeof s[n]=="object"&&!("enabled"in s[n])&&(s[n].enabled=!0),s[n]||(s[n]={enabled:!1}),Kt(e,i)}}var Uf={eventsEmitter:lM,update:yM,translate:xM,transition:MM,slide:NM,loop:HM,grabCursor:VM,events:tO,breakpoints:nO,checkOverflow:uO,classes:lO},jf={},on=class s{constructor(){let e,t;for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];n.length===1&&n[0].constructor&&Object.prototype.toString.call(n[0]).slice(8,-1)==="Object"?t=n[0]:[e,t]=n,t||(t={}),t=Kt({},t),e&&!t.el&&(t.el=e);let o=wt();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){let u=[];return o.querySelectorAll(t.el).forEach(h=>{let f=Kt({},t,{el:h});u.push(new s(f))}),u}let a=this;a.__swiper__=!0,a.support=U0(),a.device=j0({userAgent:t.userAgent}),a.browser=rM(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);let l={};a.modules.forEach(u=>{u({params:t,swiper:a,extendParams:dO(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});let c=Kt({},H0,l);return a.params=Kt({},c,jf,t),a.originalParams=Kt({},a.params),a.passedParams=Kt({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(u=>{a.on(u,a.params.on[u])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){let{slidesEl:t,params:i}=this,n=At(t,`.${i.slideClass}, swiper-slide`),r=wa(n[0]);return wa(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){let e=this,{slidesEl:t,params:i}=e;e.slides=At(t,`.${i.slideClass}, swiper-slide`)}enable(){let e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){let e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){let i=this;e=Math.min(Math.max(e,0),1);let n=i.minTranslate(),o=(i.maxTranslate()-n)*e+n;i.translateTo(o,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){let e=this;if(!e.params._emitClasses||!e.el)return;let t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){let t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){let e=this;if(!e.params._emitClasses||!e.el)return;let t=[];e.slides.forEach(i=>{let n=e.getSlideClasses(i);t.push({slideEl:i,classNames:n}),e.emit("_slideClass",i,n)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);let i=this,{params:n,slides:r,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=i,u=1;if(typeof n.slidesPerView=="number")return n.slidesPerView;if(n.centeredSlides){let h=r[c]?Math.ceil(r[c].swiperSlideSize):0,f;for(let p=c+1;p<r.length;p+=1)r[p]&&!f&&(h+=Math.ceil(r[p].swiperSlideSize),u+=1,h>l&&(f=!0));for(let p=c-1;p>=0;p-=1)r[p]&&!f&&(h+=r[p].swiperSlideSize,u+=1,h>l&&(f=!0))}else if(e==="current")for(let h=c+1;h<r.length;h+=1)(t?o[h]+a[h]-o[c]<l:o[h]-o[c]<l)&&(u+=1);else for(let h=c-1;h>=0;h-=1)o[c]-o[h]<l&&(u+=1);return u}update(){let e=this;if(!e||e.destroyed)return;let{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&fu(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function n(){let o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)n(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){let o=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(o.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||n()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);let i=this,n=i.params.direction;return e||(e=n==="horizontal"?"vertical":"horizontal"),e===n||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${n}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(r=>{e==="vertical"?r.style.width="":r.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){let t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){let t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);let n=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`,o=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(n()):At(i,n())[0];return!o&&t.params.createElements&&(o=Di("div",t.params.wrapperClass),i.append(o),At(i,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:i,wrapperEl:o,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:o,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||ws(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||ws(i,"direction")==="rtl"),wrongRTL:ws(o,"display")==="-webkit-box"}),!0}init(e){let t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();let n=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&n.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach(r=>{r.complete?fu(t,r):r.addEventListener("load",o=>{fu(t,o.target)})}),Vf(t),t.initialized=!0,Vf(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);let i=this,{params:n,el:r,wrapperEl:o,slides:a}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),n.loop&&i.loopDestroy(),t&&(i.removeClasses(),r&&typeof r!="string"&&r.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),D0(i)),i.destroyed=!0),null}static extendDefaults(e){Kt(jf,e)}static get extendedDefaults(){return jf}static get defaults(){return H0}static installModule(e){s.prototype.__modules__||(s.prototype.__modules__=[]);let t=s.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>s.installModule(t)),s):(s.installModule(e),s)}};Object.keys(Uf).forEach(s=>{Object.keys(Uf[s]).forEach(e=>{on.prototype[e]=Uf[s][e]})});on.use([oM,aM]);function mu(s,e,t,i){return s.params.createElements&&Object.keys(i).forEach(n=>{if(!t[n]&&t.auto===!0){let r=At(s.el,`.${i[n]}`)[0];r||(r=Di("div",i[n]),r.className=i[n],s.el.append(r)),t[n]=r,e[n]=r}}),t}function qf(s){let{swiper:e,extendParams:t,on:i,emit:n}=s;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function r(v){let w;return v&&typeof v=="string"&&e.isElement&&(w=e.el.querySelector(v)||e.hostEl.querySelector(v),w)?w:(v&&(typeof v=="string"&&(w=[...document.querySelectorAll(v)]),e.params.uniqueNavElements&&typeof v=="string"&&w&&w.length>1&&e.el.querySelectorAll(v).length===1?w=e.el.querySelector(v):w&&w.length===1&&(w=w[0])),v&&!w?v:w)}function o(v,w){let S=e.params.navigation;v=ri(v),v.forEach(A=>{A&&(A.classList[w?"add":"remove"](...S.disabledClass.split(" ")),A.tagName==="BUTTON"&&(A.disabled=w),e.params.watchOverflow&&e.enabled&&A.classList[e.isLocked?"add":"remove"](S.lockClass))})}function a(){let{nextEl:v,prevEl:w}=e.navigation;if(e.params.loop){o(w,!1),o(v,!1);return}o(w,e.isBeginning&&!e.params.rewind),o(v,e.isEnd&&!e.params.rewind)}function l(v){v.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),n("navigationPrev"))}function c(v){v.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),n("navigationNext"))}function u(){let v=e.params.navigation;if(e.params.navigation=mu(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(v.nextEl||v.prevEl))return;let w=r(v.nextEl),S=r(v.prevEl);Object.assign(e.navigation,{nextEl:w,prevEl:S}),w=ri(w),S=ri(S);let A=(k,D)=>{k&&k.addEventListener("click",D==="next"?c:l),!e.enabled&&k&&k.classList.add(...v.lockClass.split(" "))};w.forEach(k=>A(k,"next")),S.forEach(k=>A(k,"prev"))}function h(){let{nextEl:v,prevEl:w}=e.navigation;v=ri(v),w=ri(w);let S=(A,k)=>{A.removeEventListener("click",k==="next"?c:l),A.classList.remove(...e.params.navigation.disabledClass.split(" "))};v.forEach(A=>S(A,"next")),w.forEach(A=>S(A,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?p():(u(),a())}),i("toEdge fromEdge lock unlock",()=>{a()}),i("destroy",()=>{h()}),i("enable disable",()=>{let{nextEl:v,prevEl:w}=e.navigation;if(v=ri(v),w=ri(w),e.enabled){a();return}[...v,...w].filter(S=>!!S).forEach(S=>S.classList.add(e.params.navigation.lockClass))}),i("click",(v,w)=>{let{nextEl:S,prevEl:A}=e.navigation;S=ri(S),A=ri(A);let k=w.target,D=A.includes(k)||S.includes(k);if(e.isElement&&!D){let R=w.path||w.composedPath&&w.composedPath();R&&(D=R.find($=>S.includes($)||A.includes($)))}if(e.params.navigation.hideOnClick&&!D){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===k||e.pagination.el.contains(k)))return;let R;S.length?R=S[0].classList.contains(e.params.navigation.hiddenClass):A.length&&(R=A[0].classList.contains(e.params.navigation.hiddenClass)),n(R===!0?"navigationShow":"navigationHide"),[...S,...A].filter($=>!!$).forEach($=>$.classList.toggle(e.params.navigation.hiddenClass))}});let f=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),u(),a()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(e.navigation,{enable:f,disable:p,update:a,init:u,destroy:h})}function Wf(s){let{swiper:e,extendParams:t,on:i,emit:n,params:r}=s;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,a,l=r&&r.autoplay?r.autoplay.delay:3e3,c=r&&r.autoplay?r.autoplay.delay:3e3,u,h=new Date().getTime(),f,p,v,w,S,A,k;function D(_){!e||e.destroyed||!e.wrapperEl||_.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",D),!(k||_.detail&&_.detail.bySwiperTouchMove)&&X())}let R=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?f=!0:f&&(c=u,f=!1);let _=e.autoplay.paused?u:h+c-new Date().getTime();e.autoplay.timeLeft=_,n("autoplayTimeLeft",_,_/l),a=requestAnimationFrame(()=>{R()})},$=()=>{let _;return e.virtual&&e.params.virtual.enabled?_=e.slides.filter(ie=>ie.classList.contains("swiper-slide-active"))[0]:_=e.slides[e.activeIndex],_?parseInt(_.getAttribute("data-swiper-autoplay"),10):void 0},U=_=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(a),R();let J=typeof _>"u"?e.params.autoplay.delay:_;l=e.params.autoplay.delay,c=e.params.autoplay.delay;let ie=$();!Number.isNaN(ie)&&ie>0&&typeof _>"u"&&(J=ie,l=ie,c=ie),u=J;let le=e.params.speed,ve=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(le,!0,!0),n("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,le,!0,!0),n("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(le,!0,!0),n("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,le,!0,!0),n("autoplay")),e.params.cssMode&&(h=new Date().getTime(),requestAnimationFrame(()=>{U()})))};return J>0?(clearTimeout(o),o=setTimeout(()=>{ve()},J)):requestAnimationFrame(()=>{ve()}),J},Z=()=>{h=new Date().getTime(),e.autoplay.running=!0,U(),n("autoplayStart")},K=()=>{e.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(a),n("autoplayStop")},ue=(_,J)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(o),_||(A=!0);let ie=()=>{n("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",D):X()};if(e.autoplay.paused=!0,J){S&&(u=e.params.autoplay.delay),S=!1,ie();return}u=(u||e.params.autoplay.delay)-(new Date().getTime()-h),!(e.isEnd&&u<0&&!e.params.loop)&&(u<0&&(u=0),ie())},X=()=>{e.isEnd&&u<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(h=new Date().getTime(),A?(A=!1,U(u)):U(),e.autoplay.paused=!1,n("autoplayResume"))},oe=()=>{if(e.destroyed||!e.autoplay.running)return;let _=wt();_.visibilityState==="hidden"&&(A=!0,ue(!0)),_.visibilityState==="visible"&&X()},he=_=>{_.pointerType==="mouse"&&(A=!0,k=!0,!(e.animating||e.autoplay.paused)&&ue(!0))},se=_=>{_.pointerType==="mouse"&&(k=!1,e.autoplay.paused&&X())},Q=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",he),e.el.addEventListener("pointerleave",se))},H=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",he),e.el.removeEventListener("pointerleave",se))},T=()=>{wt().addEventListener("visibilitychange",oe)},F=()=>{wt().removeEventListener("visibilitychange",oe)};i("init",()=>{e.params.autoplay.enabled&&(Q(),T(),Z())}),i("destroy",()=>{H(),F(),e.autoplay.running&&K()}),i("_freeModeStaticRelease",()=>{(v||A)&&X()}),i("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?K():ue(!0,!0)}),i("beforeTransitionStart",(_,J,ie)=>{e.destroyed||!e.autoplay.running||(ie||!e.params.autoplay.disableOnInteraction?ue(!0,!0):K())}),i("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){K();return}p=!0,v=!1,A=!1,w=setTimeout(()=>{A=!0,v=!0,ue(!0)},200)}}),i("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!p)){if(clearTimeout(w),clearTimeout(o),e.params.autoplay.disableOnInteraction){v=!1,p=!1;return}v&&e.params.cssMode&&X(),v=!1,p=!1}}),i("slideChange",()=>{e.destroyed||!e.autoplay.running||(S=!0)}),Object.assign(e.autoplay,{start:Z,stop:K,pause:ue,resume:X})}var vu=class extends Pe{connect(){this.swiper=new on(".games_swiper",{modules:[qf,Wf],slidesPerView:12,spaceBetween:5,breakpoints:{320:{slidesPerView:3,spaceBetween:3},480:{slidesPerView:4,spaceBetween:5},768:{slidesPerView:6,spaceBetween:5},992:{slidesPerView:8,spaceBetween:5},1200:{slidesPerView:10,spaceBetween:5},1440:{slidesPerView:12,spaceBetween:5}},loop:!0,autoplay:{delay:5e3},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}};var bu=class extends Pe{static targets=["message","button"];connect(){this.checkTextLength(),window.addEventListener("resize",this.checkTextLength.bind(this))}disconnect(){window.removeEventListener("resize",this.checkTextLength.bind(this))}call(){this.element.classList.toggle("open")}checkTextLength(){let s=this.messageTarget.textContent.length,e=window.innerWidth;s<=200&&e>768?this.buttonTarget.style.display="none":this.buttonTarget.style.display=""}};var yu=class extends Pe{call(){this.element.classList.toggle("collapse-bar")}};function wu(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var hO=0;function K0(s){return"__private_"+hO+++"_"+s}function pO(s,e,t){let i=[];return s.forEach(n=>typeof n!="string"?i.push(n):e[Symbol.split](n).forEach((r,o,a)=>{r!==""&&i.push(r),o<a.length-1&&i.push(t)})),i}function X0(s,e){let t=/\$/g,i="$$$$",n=[s];if(e==null)return n;for(let r of Object.keys(e))if(r!=="_"){let o=e[r];typeof o=="string"&&(o=t[Symbol.replace](o,i)),n=pO(n,new RegExp(`%\\{${r}\\}`,"g"),o)}return n}var fO=s=>{throw new Error(`missing string: ${s}`)},Aa=K0("onMissingKey"),Ta=K0("apply"),Wn=class{constructor(e,t){let{onMissingKey:i=fO}=t===void 0?{}:t;Object.defineProperty(this,Ta,{value:mO}),Object.defineProperty(this,Aa,{writable:!0,value:void 0}),this.locale={strings:{},pluralize(n){return n===1?0:1}},Array.isArray(e)?e.forEach(wu(this,Ta)[Ta],this):wu(this,Ta)[Ta](e),wu(this,Aa)[Aa]=i}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let i=this.locale.strings[e];if(i==null&&(wu(this,Aa)[Aa](e),i=e),typeof i=="object"){if(t&&typeof t.smart_count<"u"){let r=this.locale.pluralize(t.smart_count);return X0(i[r],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof i!="string")throw new Error("string was not a string");return X0(i,t)}};function mO(s){if(!(s!=null&&s.strings))return;let e=this.locale;Object.assign(this.locale,{strings:{...e.strings,...s.strings},pluralize:s.pluralize||e.pluralize})}var Gw=Ve(Z0(),1);var gO="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var an=(s=21)=>{let e="",t=s;for(;t--;)e+=gO[Math.random()*64|0];return e};var Yw=Ve(Lw(),1);function Su(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var cL=0;function kw(s){return"__private_"+cL+++"_"+s}var uL={version:"4.1.1"},Gn=kw("callbacks"),em=kw("publish"),Au=class{constructor(){Object.defineProperty(this,em,{value:dL}),this.state={},Object.defineProperty(this,Gn,{writable:!0,value:new Set})}getState(){return this.state}setState(e){let t={...this.state},i={...this.state,...e};this.state=i,Su(this,em)[em](t,i,e)}subscribe(e){return Su(this,Gn)[Gn].add(e),()=>{Su(this,Gn)[Gn].delete(e)}}};function dL(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];Su(this,Gn)[Gn].forEach(i=>{i(...e)})}Au.VERSION=uL.version;var Dw=Au;function Yn(s){let e=s.lastIndexOf(".");return e===-1||e===s.length-1?{name:s,extension:void 0}:{name:s.slice(0,e),extension:s.slice(e+1)}}var tm={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function Ca(s){var e;if(s.type)return s.type;let t=s.name?(e=Yn(s.name).extension)==null?void 0:e.toLowerCase():null;return t&&t in tm?tm[t]:"application/octet-stream"}function hL(s){return s.charCodeAt(0).toString(32)}function Fw(s){let e="";return s.replace(/[^A-Z0-9]/gi,t=>(e+=`-${hL(t)}`,"/"))+e}function Iw(s,e){let t=e||"uppy";return typeof s.name=="string"&&(t+=`-${Fw(s.name.toLowerCase())}`),s.type!==void 0&&(t+=`-${s.type}`),s.meta&&typeof s.meta.relativePath=="string"&&(t+=`-${Fw(s.meta.relativePath.toLowerCase())}`),s.data.size!==void 0&&(t+=`-${s.data.size}`),s.data.lastModified!==void 0&&(t+=`-${s.data.lastModified}`),t}function pL(s){return!s.isRemote||!s.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(s.remote.provider)}function Tu(s,e){if(pL(s))return s.id;let t=Ca(s);return Iw({...s,type:t},e)}function im(s){if(s==null&&typeof navigator<"u"&&(s=navigator.userAgent),!s)return!0;let e=/Edge\/(\d+\.\d+)/.exec(s);if(!e)return!0;let i=e[1].split(".",2),n=parseInt(i[0],10),r=parseInt(i[1],10);return n<15||n===15&&r<15063||n>18||n===18&&r>=18218}function sm(s,e){return e.name?e.name:s.split("/")[0]==="image"?`${s.split("/")[0]}.${s.split("/")[1]}`:"noname"}function nm(s){return s<10?`0${s}`:s.toString()}function co(){let s=new Date,e=nm(s.getHours()),t=nm(s.getMinutes()),i=nm(s.getSeconds());return`${e}:${t}:${i}`}var Rw={debug:()=>{},warn:()=>{},error:function(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return console.error(`[Uppy] [${co()}]`,...e)}},Nw={debug:function(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return console.debug(`[Uppy] [${co()}]`,...e)},warn:function(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return console.warn(`[Uppy] [${co()}]`,...e)},error:function(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return console.error(`[Uppy] [${co()}]`,...e)}};var Pa=Ve(xu(),1),Vw=Ve(jw(),1),qw={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},Jt=class extends Error{constructor(e,t){var i;super(e),this.isRestriction=!0,this.isUserFacing=(i=t?.isUserFacing)!=null?i:!0,t!=null&&t.file&&(this.file=t.file)}},Cu=class{constructor(e,t){this.getI18n=t,this.getOpts=()=>{var i;let n=e();if(((i=n.restrictions)==null?void 0:i.allowedFileTypes)!=null&&!Array.isArray(n.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return n}}validateAggregateRestrictions(e,t){let{maxTotalFileSize:i,maxNumberOfFiles:n}=this.getOpts().restrictions;if(n&&e.filter(o=>!o.isGhost).length+t.length>n)throw new Jt(`${this.getI18n()("youCanOnlyUploadX",{smart_count:n})}`);if(i){let r=[...e,...t].reduce((o,a)=>{var l;return o+((l=a.size)!=null?l:0)},0);if(r>i)throw new Jt(this.getI18n()("aggregateExceedsSize",{sizeAllowed:(0,Pa.default)(i),size:(0,Pa.default)(r)}))}}validateSingleFile(e){let{maxFileSize:t,minFileSize:i,allowedFileTypes:n}=this.getOpts().restrictions;if(n&&!n.some(a=>a.includes("/")?e.type?(0,Vw.default)(e.type.replace(/;.*?$/,""),a):!1:a[0]==="."&&e.extension?e.extension.toLowerCase()===a.slice(1).toLowerCase():!1)){let a=n.join(", ");throw new Jt(this.getI18n()("youCanOnlyUploadFileTypes",{types:a}),{file:e})}if(t&&e.size!=null&&e.size>t){var r;throw new Jt(this.getI18n()("exceedsSize",{size:(0,Pa.default)(t),file:(r=e.name)!=null?r:this.getI18n()("unnamed")}),{file:e})}if(i&&e.size!=null&&e.size<i)throw new Jt(this.getI18n()("inferiorSize",{size:(0,Pa.default)(i)}),{file:e})}validate(e,t){t.forEach(i=>{this.validateSingleFile(i)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){let{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new Jt(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){var t;let i=new Jt(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:(t=e.name)!=null?t:this.getI18n()("unnamed")})),{requiredMetaFields:n}=this.getOpts().restrictions,r=[];for(let o of n)(!Object.hasOwn(e.meta,o)||e.meta[o]==="")&&r.push(o);return{missingFields:r,error:i}}};var Ww={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed"}};function me(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var gL=0;function rt(s){return"__private_"+gL+++"_"+s}var vL={version:"4.2.3"},Pu={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},Tt=rt("plugins"),It=rt("restricter"),_a=rt("storeUnsubscribe"),Es=rt("emitter"),Xn=rt("preProcessors"),Kn=rt("uploaders"),Ts=rt("postProcessors"),oi=rt("informAndEmit"),Da=rt("checkRequiredMetaFieldsOnFile"),rm=rt("checkRequiredMetaFields"),Ma=rt("assertNewUploadAllowed"),lm=rt("transformFile"),Oa=rt("startIfAutoProceed"),La=rt("checkAndUpdateFileState"),om=rt("addListeners"),Fi=rt("updateOnlineStatus"),ka=rt("requestClientById"),Ss=rt("createUpload"),am=rt("getUpload"),Jn=rt("removeUpload"),As=rt("runUpload"),_u=class s{constructor(e){Object.defineProperty(this,As,{value:ML}),Object.defineProperty(this,Jn,{value:_L}),Object.defineProperty(this,am,{value:PL}),Object.defineProperty(this,Ss,{value:CL}),Object.defineProperty(this,om,{value:xL}),Object.defineProperty(this,La,{value:TL}),Object.defineProperty(this,Oa,{value:AL}),Object.defineProperty(this,lm,{value:SL}),Object.defineProperty(this,Ma,{value:EL}),Object.defineProperty(this,rm,{value:wL}),Object.defineProperty(this,Da,{value:yL}),Object.defineProperty(this,oi,{value:bL}),Object.defineProperty(this,Tt,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,It,{writable:!0,value:void 0}),Object.defineProperty(this,_a,{writable:!0,value:void 0}),Object.defineProperty(this,Es,{writable:!0,value:(0,Gw.default)()}),Object.defineProperty(this,Xn,{writable:!0,value:new Set}),Object.defineProperty(this,Kn,{writable:!0,value:new Set}),Object.defineProperty(this,Ts,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,this.calculateProgress=(0,Yw.default)((n,r)=>{let o=this.getFile(n?.id);if(n==null||!o){this.log(`Not setting progress for a file that has been removed: ${n?.id}`);return}if(o.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${n.id}`);return}let a=Number.isFinite(r.bytesTotal)&&r.bytesTotal>0;this.setFileState(n.id,{progress:{...o.progress,bytesUploaded:r.bytesUploaded,bytesTotal:r.bytesTotal,percentage:a?Math.round(r.bytesUploaded/r.bytesTotal*100):0}}),this.calculateTotalProgress()},500,{leading:!0,trailing:!0}),Object.defineProperty(this,Fi,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,ka,{writable:!0,value:new Map}),this.defaultLocale=Ww;let t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:qw,meta:{},onBeforeFileAdded:(n,r)=>!Object.hasOwn(r,n.id),onBeforeUpload:n=>n,store:new Dw,logger:Rw,infoTimeout:5e3},i={...t,...e};this.opts={...i,restrictions:{...t.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=Nw),this.log(`Using Core v${s.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...Pu,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:im(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),me(this,It)[It]=new Cu(()=>this.opts,()=>this.i18n),me(this,_a)[_a]=this.store.subscribe((n,r,o)=>{this.emit("state-update",n,r,o),this.updateAll(r)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),me(this,om)[om]()}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];me(this,Es)[Es].emit(e,...i)}on(e,t){return me(this,Es)[Es].on(e,t),this}once(e,t){return me(this,Es)[Es].once(e,t),this}off(e,t){return me(this,Es)[Es].off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){let t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(i=>{let[n,r]=i;return[n,{...t[n],...r}]}))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can\u2019t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){let e=i=>this.log(`Missing i18n string: ${i}`,"error"),t=new Wn([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e?.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){let e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},i=Object.create(null);Object.keys(t).forEach(n=>{i[n]={...t[n],progress:{...t[n].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:i,...Pu})}clear(){let{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...Pu,files:{}})}addPreProcessor(e){me(this,Xn)[Xn].add(e)}removePreProcessor(e){return me(this,Xn)[Xn].delete(e)}addPostProcessor(e){me(this,Ts)[Ts].add(e)}removePostProcessor(e){return me(this,Ts)[Ts].delete(e)}addUploader(e){me(this,Kn)[Kn].add(e)}removeUploader(e){return me(this,Kn)[Kn].delete(e)}setMeta(e){let t={...this.getState().meta,...e},i={...this.getState().files};Object.keys(i).forEach(n=>{i[n]={...i[n],meta:{...i[n].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:i})}setFileMeta(e,t){let i={...this.getState().files};if(!i[e]){this.log("Was trying to set metadata for a file that has been removed: ",e);return}let n={...i[e].meta,...t};i[e]={...i[e],meta:n},this.setState({files:i})}getFile(e){return this.getState().files[e]}getFiles(){let{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){let{files:e,totalProgress:t,error:i}=this.getState(),n=Object.values(e),r=[],o=[],a=[],l=[],c=[],u=[],h=[],f=[],p=[];for(let v of n){let{progress:w}=v;!w.uploadComplete&&w.uploadStarted&&(r.push(v),v.isPaused||f.push(v)),w.uploadStarted||o.push(v),(w.uploadStarted||w.preprocess||w.postprocess)&&a.push(v),w.uploadStarted&&l.push(v),v.isPaused&&c.push(v),w.uploadComplete&&u.push(v),v.error&&h.push(v),(w.preprocess||w.postprocess)&&p.push(v)}return{newFiles:o,startedFiles:a,uploadStartedFiles:l,pausedFiles:c,completeFiles:u,erroredFiles:h,inProgressFiles:r,inProgressNotPausedFiles:f,processingFiles:p,isUploadStarted:l.length>0,isAllComplete:t===100&&u.length===n.length&&p.length===0,isAllErrored:!!i&&h.length===n.length,isAllPaused:r.length!==0&&c.length===r.length,isUploadInProgress:r.length>0,isSomeGhost:n.some(v=>v.isGhost)}}validateSingleFile(e){try{me(this,It)[It].validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){let t=this.getFiles();try{me(this,It)[It].validateAggregateRestrictions(t,e)}catch(i){return i.message}return null}checkIfFileAlreadyExists(e){let{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}addFile(e){me(this,Ma)[Ma](e);let{nextFilesState:t,validFilesToAdd:i,errors:n}=me(this,La)[La]([e]),r=n.filter(a=>a.isRestriction);if(me(this,oi)[oi](r),n.length>0)throw n[0];this.setState({files:t});let[o]=i;return this.emit("file-added",o),this.emit("files-added",i),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),me(this,Oa)[Oa](),o.id}addFiles(e){me(this,Ma)[Ma]();let{nextFilesState:t,validFilesToAdd:i,errors:n}=me(this,La)[La](e),r=n.filter(a=>a.isRestriction);me(this,oi)[oi](r);let o=n.filter(a=>!a.isRestriction);if(o.length>0){let a=`Multiple errors occurred while adding files:
`;if(o.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,a);{let l=new Error(a);throw l.errors=o,l}}this.setState({files:t}),i.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.values(i).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),i.length>0&&me(this,Oa)[Oa]()}removeFiles(e){let{files:t,currentUploads:i}=this.getState(),n={...t},r={...i},o=Object.create(null);e.forEach(u=>{t[u]&&(o[u]=t[u],delete n[u])});function a(u){return o[u]===void 0}Object.keys(r).forEach(u=>{let h=i[u].fileIDs.filter(a);if(h.length===0){delete r[u];return}let{capabilities:f}=this.getState();if(h.length!==i[u].fileIDs.length&&!f.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");r[u]={...i[u],fileIDs:h}});let l={currentUploads:r,files:n};Object.keys(n).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),this.calculateTotalProgress();let c=Object.keys(o);c.forEach(u=>{this.emit("file-removed",o[u])}),c.length>5?this.log(`Removed ${c.length} files`):this.log(`Removed files: ${c.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;let t=this.getFile(e),n=!(t.isPaused||!1);return this.setFileState(e,{isPaused:n}),this.emit("upload-pause",t,n),n}pauseAll(){let e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let n={...e[i],isPaused:!0};e[i]=n}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){let e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let n={...e[i],isPaused:!1,error:null};e[i]=n}),this.setState({files:e}),this.emit("resume-all")}retryAll(){let e={...this.getState().files},t=Object.keys(e).filter(n=>e[n].error);if(t.forEach(n=>{let r={...e[n],isPaused:!1,error:null};e[n]=r}),this.setState({files:e,error:null}),this.emit("retry-all",Object.values(e)),t.length===0)return Promise.resolve({successful:[],failed:[]});let i=me(this,Ss)[Ss](t,{forceAllowNewUpload:!0});return me(this,As)[As](i)}cancelAll(){this.emit("cancel-all");let{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(Pu)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));let t=me(this,Ss)[Ss]([e],{forceAllowNewUpload:!0});return me(this,As)[As](t)}logout(){this.iteratePlugins(e=>{var t;(t=e.provider)==null||t.logout==null||t.logout()})}calculateTotalProgress(){let t=this.getFiles().filter(c=>c.progress.uploadStarted||c.progress.preprocess||c.progress.postprocess);if(t.length===0){this.emit("progress",0),this.setState({totalProgress:0});return}let i=t.filter(c=>c.progress.bytesTotal!=null),n=t.filter(c=>c.progress.bytesTotal==null);if(i.length===0){let c=t.length*100,u=n.reduce((f,p)=>f+p.progress.percentage,0),h=Math.round(u/c*100);this.setState({totalProgress:h});return}let r=i.reduce((c,u)=>{var h;return c+((h=u.progress.bytesTotal)!=null?h:0)},0),o=r/i.length;r+=o*n.length;let a=0;i.forEach(c=>{a+=c.progress.bytesUploaded}),n.forEach(c=>{a+=o*(c.progress.percentage||0)/100});let l=r===0?0:Math.round(a/r*100);l>100&&(l=100),this.setState({totalProgress:l}),this.emit("progress",l)}updateOnlineStatus(){var e;((e=window.navigator.onLine)!=null?e:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e){if(typeof e!="function"){let l=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(l)}for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let r=new e(this,...i),o=r.id;if(!o)throw new Error("Your plugin must have an id");if(!r.type)throw new Error("Your plugin must have a type");let a=this.getPlugin(o);if(a){let l=`Already found a plugin named '${a.id}'. Tried to use: '${o}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(l)}return e.VERSION&&this.log(`Using ${o} v${e.VERSION}`),r.type in me(this,Tt)[Tt]?me(this,Tt)[Tt][r.type].push(r):me(this,Tt)[Tt][r.type]=[r],r.install(),this.emit("plugin-added",r),this}getPlugin(e){for(let t of Object.values(me(this,Tt)[Tt])){let i=t.find(n=>n.id===e);if(i!=null)return i}}[Symbol.for("uppy test: getPlugins")](e){return me(this,Tt)[Tt][e]}iteratePlugins(e){Object.values(me(this,Tt)[Tt]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();let t=me(this,Tt)[Tt][e.type],i=t.findIndex(o=>o.id===e.id);i!==-1&&t.splice(i,1);let r={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(r)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),me(this,_a)[_a](),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",me(this,Fi)[Fi]),window.removeEventListener("offline",me(this,Fi)[Fi]))}hideInfo(){let{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t,i){t===void 0&&(t="info"),i===void 0&&(i=3e3);let n=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:n?e.message:e,details:n?e.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(e,t){let{logger:i}=this.opts;switch(t){case"error":i.error(e);break;case"warning":i.warn(e);break;default:i.debug(e);break}}registerRequestClient(e,t){me(this,ka)[ka].set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);let t=me(this,ka)[ka].get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?me(this,As)[As](e):(me(this,Jn)[Jn](e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](){return me(this,Ss)[Ss](...arguments)}addResultData(e,t){if(!me(this,am)[am](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}let{currentUploads:i}=this.getState(),n={...i[e],result:{...i[e].result,...t}};this.setState({currentUploads:{...i,[e]:n}})}upload(){var e;(e=me(this,Tt)[Tt].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState(),i=this.opts.onBeforeUpload(t);return i===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(i&&typeof i=="object"&&(t=i,this.setState({files:t})),Promise.resolve().then(()=>me(this,It)[It].validateMinNumberOfFiles(t)).catch(n=>{throw me(this,oi)[oi]([n]),n}).then(()=>{if(!me(this,rm)[rm](t))throw new Jt(this.i18n("missingRequiredMetaField"))}).catch(n=>{throw n}).then(()=>{let{currentUploads:n}=this.getState(),r=Object.values(n).flatMap(l=>l.fileIDs),o=[];Object.keys(t).forEach(l=>{let c=this.getFile(l);!c.progress.uploadStarted&&r.indexOf(l)===-1&&o.push(c.id)});let a=me(this,Ss)[Ss](o);return me(this,As)[As](a)}).catch(n=>{throw this.emit("error",n),this.log(n,"error"),n}))}};function bL(s){for(let r of s)r.isRestriction?this.emit("restriction-failed",r.file,r):this.emit("error",r,r.file),this.log(r,"warning");let e=s.filter(r=>r.isUserFacing),t=4,i=e.slice(0,t),n=e.slice(t);i.forEach(r=>{let{message:o,details:a=""}=r;this.info({message:o,details:a},"error",this.opts.infoTimeout)}),n.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:n.length})})}function yL(s){let{missingFields:e,error:t}=me(this,It)[It].getMissingRequiredMetaFields(s);return e.length>0?(this.setFileState(s.id,{missingRequiredMetaFields:e}),this.log(t.message),this.emit("restriction-failed",s,t),!1):!0}function wL(s){let e=!0;for(let t of Object.values(s))me(this,Da)[Da](t)||(e=!1);return e}function EL(s){let{allowNewUpload:e}=this.getState();if(e===!1){let t=new Jt(this.i18n("noMoreFilesAllowed"),{file:s});throw me(this,oi)[oi]([t]),t}}function SL(s){let e=s instanceof File?{name:s.name,type:s.type,size:s.size,data:s}:s,t=Ca(e),i=sm(t,e),n=Yn(i).extension,r=Tu(e,this.getID()),o=e.meta||{};o.name=i,o.type=t;let a=Number.isFinite(e.data.size)?e.data.size:null;return{source:e.source||"",id:r,name:i,extension:n||"",meta:{...this.getState().meta,...o},type:t,data:e.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:a,uploadComplete:!1,uploadStarted:null},size:a,isGhost:!1,isRemote:e.isRemote||!1,remote:e.remote,preview:e.preview}}function AL(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(s=>{s.isRestriction||this.log(s.stack||s.message||s)})},4))}function TL(s){let{files:e}=this.getState(),t={...e},i=[],n=[];for(let a of s)try{var r;let l=me(this,lm)[lm](a),c=(r=e[l.id])==null?void 0:r.isGhost;c&&(l={...e[l.id],isGhost:!1,data:a.data},this.log(`Replaced the blob in the restored ghost file: ${l.name}, ${l.id}`));let u=this.opts.onBeforeFileAdded(l,t);if(!u&&this.checkIfFileAlreadyExists(l.id)){var o;throw new Jt(this.i18n("noDuplicates",{fileName:(o=l.name)!=null?o:this.i18n("unnamed")}),{file:a})}if(u===!1&&!c)throw new Jt("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:a});typeof u=="object"&&u!==null&&(l=u),me(this,It)[It].validateSingleFile(l),t[l.id]=l,i.push(l)}catch(l){n.push(l)}try{me(this,It)[It].validateAggregateRestrictions(Object.values(e),i)}catch(a){return n.push(a),{nextFilesState:e,validFilesToAdd:[],errors:n}}return{nextFilesState:t,validFilesToAdd:i,errors:n}}function xL(){let s=(i,n,r)=>{let o=i.message||"Unknown error";i.details&&(o+=` ${i.details}`),this.setState({error:o}),n!=null&&n.id in this.getState().files&&this.setFileState(n.id,{error:o,response:r})};this.on("error",s),this.on("upload-error",(i,n,r)=>{if(s(n,i,r),typeof n=="object"&&n.message){var o;this.log(n.message,"error");let a=new Error(this.i18n("failedToUpload",{file:(o=i?.name)!=null?o:""}));a.isUserFacing=!0,a.details=n.message,n.details&&(a.details+=` ${n.details}`),me(this,oi)[oi]([a])}else me(this,oi)[oi]([n])});let e=null;this.on("upload-stalled",(i,n)=>{let{message:r}=i,o=n.map(a=>a.meta.name).join(", ");e||(this.info({message:r,details:o},"warning",this.opts.infoTimeout),e=setTimeout(()=>{e=null},this.opts.infoTimeout)),this.log(`${r} ${o}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});let t=i=>{let n=i.filter(o=>{let a=o!=null&&this.getFile(o.id);return a||this.log(`Not setting progress for a file that has been removed: ${o?.id}`),a}),r=Object.fromEntries(n.map(o=>[o.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:o.size}}]));this.patchFilesState(r)};this.on("upload-start",t),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let r=this.getFile(i.id).progress;this.setFileState(i.id,{progress:{...r,postprocess:me(this,Ts)[Ts].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:r.bytesTotal},response:n,uploadURL:n.uploadURL,isPaused:!1}),i.size==null&&this.setFileState(i.id,{size:n.bytesUploaded||r.bytesTotal}),this.calculateTotalProgress()}),this.on("preprocess-progress",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getFile(i.id).progress,preprocess:n}})}),this.on("preprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let n={...this.getState().files};n[i.id]={...n[i.id],progress:{...n[i.id].progress}},delete n[i.id].progress.preprocess,this.setState({files:n})}),this.on("postprocess-progress",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getState().files[i.id].progress,postprocess:n}})}),this.on("postprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let n={...this.getState().files};n[i.id]={...n[i.id],progress:{...n[i.id].progress}},delete n[i.id].progress.postprocess,this.setState({files:n})}),this.on("restored",()=>{this.calculateTotalProgress()}),this.on("dashboard:file-edit-complete",i=>{i&&me(this,Da)[Da](i)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",me(this,Fi)[Fi]),window.addEventListener("offline",me(this,Fi)[Fi]),setTimeout(me(this,Fi)[Fi],3e3))}function CL(s,e){e===void 0&&(e={});let{forceAllowNewUpload:t=!1}=e,{allowNewUpload:i,currentUploads:n}=this.getState();if(!i&&!t)throw new Error("Cannot create a new upload: already uploading.");let r=an();return this.emit("upload",r,this.getFilesByIds(s)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...n,[r]:{fileIDs:s,step:0,result:{}}}}),r}function PL(s){let{currentUploads:e}=this.getState();return e[s]}function _L(s){let e={...this.getState().currentUploads};delete e[s],this.setState({currentUploads:e})}async function ML(s){let e=()=>{let{currentUploads:r}=this.getState();return r[s]},t=e(),i=[...me(this,Xn)[Xn],...me(this,Kn)[Kn],...me(this,Ts)[Ts]];try{for(let r=t.step||0;r<i.length&&t;r++){let o=i[r];this.setState({currentUploads:{...this.getState().currentUploads,[s]:{...t,step:r}}});let{fileIDs:a}=t;await o(a,s),t=e()}}catch(r){throw me(this,Jn)[Jn](s),r}if(t){t.fileIDs.forEach(l=>{let c=this.getFile(l);c&&c.progress.postprocess&&this.emit("postprocess-complete",c)});let r=t.fileIDs.map(l=>this.getFile(l)),o=r.filter(l=>!l.error),a=r.filter(l=>l.error);this.addResultData(s,{successful:o,failed:a,uploadID:s}),t=e()}let n;return t&&(n=t.result,this.emit("complete",n),me(this,Jn)[Jn](s)),n==null&&this.log(`Not setting result for an upload that has been removed: ${s}`),n}_u.VERSION=vL.version;var cm=_u;var Ra,He,Qw,OL,Zn,Xw,eE,um,pm,dm,hm,LL,Ia={},tE=[],kL=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Lu=Array.isArray;function xs(s,e){for(var t in e)s[t]=e[t];return s}function iE(s){s&&s.parentNode&&s.parentNode.removeChild(s)}function m(s,e,t){var i,n,r,o={};for(r in e)r=="key"?i=e[r]:r=="ref"?n=e[r]:o[r]=e[r];if(arguments.length>2&&(o.children=arguments.length>3?Ra.call(arguments,2):t),typeof s=="function"&&s.defaultProps!=null)for(r in s.defaultProps)o[r]===void 0&&(o[r]=s.defaultProps[r]);return Fa(s,o,i,n,null)}function Fa(s,e,t,i,n){var r={type:s,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:n??++Qw,__i:-1,__u:0};return n==null&&He.vnode!=null&&He.vnode(r),r}function sE(){return{current:null}}function Zt(s){return s.children}function Ot(s,e){this.props=s,this.context=e}function uo(s,e){if(e==null)return s.__?uo(s.__,s.__i+1):null;for(var t;e<s.__k.length;e++)if((t=s.__k[e])!=null&&t.__e!=null)return t.__e;return typeof s.type=="function"?uo(s):null}function nE(s){var e,t;if((s=s.__)!=null&&s.__c!=null){for(s.__e=s.__c.base=null,e=0;e<s.__k.length;e++)if((t=s.__k[e])!=null&&t.__e!=null){s.__e=s.__c.base=t.__e;break}return nE(s)}}function Kw(s){(!s.__d&&(s.__d=!0)&&Zn.push(s)&&!Ou.__r++||Xw!==He.debounceRendering)&&((Xw=He.debounceRendering)||eE)(Ou)}function Ou(){var s,e,t,i,n,r,o,a;for(Zn.sort(um);s=Zn.shift();)s.__d&&(e=Zn.length,i=void 0,r=(n=(t=s).__v).__e,o=[],a=[],t.__P&&((i=xs({},n)).__v=n.__v+1,He.vnode&&He.vnode(i),fm(t.__P,i,n,t.__n,t.__P.namespaceURI,32&n.__u?[r]:null,o,r??uo(n),!!(32&n.__u),a),i.__v=n.__v,i.__.__k[i.__i]=i,aE(o,i,a),i.__e!=r&&nE(i)),Zn.length>e&&Zn.sort(um));Ou.__r=0}function rE(s,e,t,i,n,r,o,a,l,c,u){var h,f,p,v,w,S=i&&i.__k||tE,A=e.length;for(t.__d=l,DL(t,e,S),l=t.__d,h=0;h<A;h++)(p=t.__k[h])!=null&&(f=p.__i===-1?Ia:S[p.__i]||Ia,p.__i=h,fm(s,p,f,n,r,o,a,l,c,u),v=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&mm(f.ref,null,p),u.push(p.ref,p.__c||v,p)),w==null&&v!=null&&(w=v),65536&p.__u||f.__k===p.__k?l=oE(p,l,s):typeof p.type=="function"&&p.__d!==void 0?l=p.__d:v&&(l=v.nextSibling),p.__d=void 0,p.__u&=-196609);t.__d=l,t.__e=w}function DL(s,e,t){var i,n,r,o,a,l=e.length,c=t.length,u=c,h=0;for(s.__k=[],i=0;i<l;i++)(n=e[i])!=null&&typeof n!="boolean"&&typeof n!="function"?(o=i+h,(n=s.__k[i]=typeof n=="string"||typeof n=="number"||typeof n=="bigint"||n.constructor==String?Fa(null,n,null,null,null):Lu(n)?Fa(Zt,{children:n},null,null,null):n.constructor===void 0&&n.__b>0?Fa(n.type,n.props,n.key,n.ref?n.ref:null,n.__v):n).__=s,n.__b=s.__b+1,r=null,(a=n.__i=FL(n,t,o,u))!==-1&&(u--,(r=t[a])&&(r.__u|=131072)),r==null||r.__v===null?(a==-1&&h--,typeof n.type!="function"&&(n.__u|=65536)):a!==o&&(a==o-1?h--:a==o+1?h++:(a>o?h--:h++,n.__u|=65536))):n=s.__k[i]=null;if(u)for(i=0;i<c;i++)(r=t[i])!=null&&!(131072&r.__u)&&(r.__e==s.__d&&(s.__d=uo(r)),lE(r,r))}function oE(s,e,t){var i,n;if(typeof s.type=="function"){for(i=s.__k,n=0;i&&n<i.length;n++)i[n]&&(i[n].__=s,e=oE(i[n],e,t));return e}s.__e!=e&&(e&&s.type&&!t.contains(e)&&(e=uo(s)),t.insertBefore(s.__e,e||null),e=s.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Qi(s,e){return e=e||[],s==null||typeof s=="boolean"||(Lu(s)?s.some(function(t){Qi(t,e)}):e.push(s)),e}function FL(s,e,t,i){var n=s.key,r=s.type,o=t-1,a=t+1,l=e[t];if(l===null||l&&n==l.key&&r===l.type&&!(131072&l.__u))return t;if((typeof r!="function"||r===Zt||n)&&i>(l!=null&&!(131072&l.__u)?1:0))for(;o>=0||a<e.length;){if(o>=0){if((l=e[o])&&!(131072&l.__u)&&n==l.key&&r===l.type)return o;o--}if(a<e.length){if((l=e[a])&&!(131072&l.__u)&&n==l.key&&r===l.type)return a;a++}}return-1}function Jw(s,e,t){e[0]==="-"?s.setProperty(e,t??""):s[e]=t==null?"":typeof t!="number"||kL.test(e)?t:t+"px"}function Mu(s,e,t,i,n){var r;e:if(e==="style")if(typeof t=="string")s.style.cssText=t;else{if(typeof i=="string"&&(s.style.cssText=i=""),i)for(e in i)t&&e in t||Jw(s.style,e,"");if(t)for(e in t)i&&t[e]===i[e]||Jw(s.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")r=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in s||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),s.l||(s.l={}),s.l[e+r]=t,t?i?t.u=i.u:(t.u=pm,s.addEventListener(e,r?hm:dm,r)):s.removeEventListener(e,r?hm:dm,r);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in s)try{s[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!=="-"?s.removeAttribute(e):s.setAttribute(e,e=="popover"&&t==1?"":t))}}function Zw(s){return function(e){if(this.l){var t=this.l[e.type+s];if(e.t==null)e.t=pm++;else if(e.t<t.u)return;return He.event&&(e=He.event(e)),"handleEvent"in t?t.handleEvent(e):t(e)}}}function fm(s,e,t,i,n,r,o,a,l,c){var u,h,f,p,v,w,S,A,k,D,R,$,U,Z,K,ue,X=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(l=!!(32&t.__u),r=[a=e.__e=t.__e]),(u=He.__b)&&u(e);e:if(typeof X=="function")try{if(A=e.props,k="prototype"in X&&X.prototype.render,D=(u=X.contextType)&&i[u.__c],R=u?D?D.props.value:u.__:i,t.__c?S=(h=e.__c=t.__c).__=h.__E:(k?e.__c=h=new X(A,R):(e.__c=h=new Ot(A,R),h.constructor=X,h.render=RL),D&&D.sub(h),h.props=A,h.state||(h.state={}),h.context=R,h.__n=i,f=h.__d=!0,h.__h=[],h._sb=[]),k&&h.__s==null&&(h.__s=h.state),k&&X.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=xs({},h.__s)),xs(h.__s,X.getDerivedStateFromProps(A,h.__s))),p=h.props,v=h.state,h.__v=e,f)k&&X.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),k&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(k&&X.getDerivedStateFromProps==null&&A!==p&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(A,R),!h.__e&&(h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(A,h.__s,R)===!1||e.__v===t.__v)){for(e.__v!==t.__v&&(h.props=A,h.state=h.__s,h.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(oe){oe&&(oe.__=e)}),$=0;$<h._sb.length;$++)h.__h.push(h._sb[$]);h._sb=[],h.__h.length&&o.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(A,h.__s,R),k&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(p,v,w)})}if(h.context=R,h.props=A,h.__P=s,h.__e=!1,U=He.__r,Z=0,k){for(h.state=h.__s,h.__d=!1,U&&U(e),u=h.render(h.props,h.state,h.context),K=0;K<h._sb.length;K++)h.__h.push(h._sb[K]);h._sb=[]}else do h.__d=!1,U&&U(e),u=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++Z<25);h.state=h.__s,h.getChildContext!=null&&(i=xs(xs({},i),h.getChildContext())),k&&!f&&h.getSnapshotBeforeUpdate!=null&&(w=h.getSnapshotBeforeUpdate(p,v)),rE(s,Lu(ue=u!=null&&u.type===Zt&&u.key==null?u.props.children:u)?ue:[ue],e,t,i,n,r,o,a,l,c),h.base=e.__e,e.__u&=-161,h.__h.length&&o.push(h),S&&(h.__E=h.__=null)}catch(oe){if(e.__v=null,l||r!=null){for(e.__u|=l?160:128;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;r[r.indexOf(a)]=null,e.__e=a}else e.__e=t.__e,e.__k=t.__k;He.__e(oe,e,t)}else r==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=IL(t.__e,e,t,i,n,r,o,l,c);(u=He.diffed)&&u(e)}function aE(s,e,t){e.__d=void 0;for(var i=0;i<t.length;i++)mm(t[i],t[++i],t[++i]);He.__c&&He.__c(e,s),s.some(function(n){try{s=n.__h,n.__h=[],s.some(function(r){r.call(n)})}catch(r){He.__e(r,n.__v)}})}function IL(s,e,t,i,n,r,o,a,l){var c,u,h,f,p,v,w,S=t.props,A=e.props,k=e.type;if(k==="svg"?n="http://www.w3.org/2000/svg":k==="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),r!=null){for(c=0;c<r.length;c++)if((p=r[c])&&"setAttribute"in p==!!k&&(k?p.localName===k:p.nodeType===3)){s=p,r[c]=null;break}}if(s==null){if(k===null)return document.createTextNode(A);s=document.createElementNS(n,k,A.is&&A),a&&(He.__m&&He.__m(e,r),a=!1),r=null}if(k===null)S===A||a&&s.data===A||(s.data=A);else{if(r=r&&Ra.call(s.childNodes),S=t.props||Ia,!a&&r!=null)for(S={},c=0;c<s.attributes.length;c++)S[(p=s.attributes[c]).name]=p.value;for(c in S)if(p=S[c],c!="children"){if(c=="dangerouslySetInnerHTML")h=p;else if(!(c in A)){if(c=="value"&&"defaultValue"in A||c=="checked"&&"defaultChecked"in A)continue;Mu(s,c,null,p,n)}}for(c in A)p=A[c],c=="children"?f=p:c=="dangerouslySetInnerHTML"?u=p:c=="value"?v=p:c=="checked"?w=p:a&&typeof p!="function"||S[c]===p||Mu(s,c,p,S[c],n);if(u)a||h&&(u.__html===h.__html||u.__html===s.innerHTML)||(s.innerHTML=u.__html),e.__k=[];else if(h&&(s.innerHTML=""),rE(s,Lu(f)?f:[f],e,t,i,k==="foreignObject"?"http://www.w3.org/1999/xhtml":n,r,o,r?r[0]:t.__k&&uo(t,0),a,l),r!=null)for(c=r.length;c--;)iE(r[c]);a||(c="value",k==="progress"&&v==null?s.removeAttribute("value"):v!==void 0&&(v!==s[c]||k==="progress"&&!v||k==="option"&&v!==S[c])&&Mu(s,c,v,S[c],n),c="checked",w!==void 0&&w!==s[c]&&Mu(s,c,w,S[c],n))}return s}function mm(s,e,t){try{if(typeof s=="function"){var i=typeof s.__u=="function";i&&s.__u(),i&&e==null||(s.__u=s(e))}else s.current=e}catch(n){He.__e(n,t)}}function lE(s,e,t){var i,n;if(He.unmount&&He.unmount(s),(i=s.ref)&&(i.current&&i.current!==s.__e||mm(i,null,e)),(i=s.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){He.__e(r,e)}i.base=i.__P=null}if(i=s.__k)for(n=0;n<i.length;n++)i[n]&&lE(i[n],e,t||typeof s.type!="function");t||iE(s.__e),s.__c=s.__=s.__e=s.__d=void 0}function RL(s,e,t){return this.constructor(s,t)}function gm(s,e,t){var i,n,r,o;He.__&&He.__(s,e),n=(i=typeof t=="function")?null:t&&t.__k||e.__k,r=[],o=[],fm(e,s=(!i&&t||e).__k=m(Zt,null,[s]),n||Ia,Ia,e.namespaceURI,!i&&t?[t]:n?null:e.firstChild?Ra.call(e.childNodes):null,r,!i&&t?t:n?n.__e:e.firstChild,i,o),aE(r,s,o)}function ku(s,e,t){var i,n,r,o,a=xs({},s.props);for(r in s.type&&s.type.defaultProps&&(o=s.type.defaultProps),e)r=="key"?i=e[r]:r=="ref"?n=e[r]:a[r]=e[r]===void 0&&o!==void 0?o[r]:e[r];return arguments.length>2&&(a.children=arguments.length>3?Ra.call(arguments,2):t),Fa(s.type,a,i||s.key,n||s.ref,null)}Ra=tE.slice,He={__e:function(s,e,t,i){for(var n,r,o;e=e.__;)if((n=e.__c)&&!n.__)try{if((r=n.constructor)&&r.getDerivedStateFromError!=null&&(n.setState(r.getDerivedStateFromError(s)),o=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(s,i||{}),o=n.__d),o)return n.__E=n}catch(a){s=a}throw s}},Qw=0,OL=function(s){return s!=null&&s.constructor==null},Ot.prototype.setState=function(s,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=xs({},this.state),typeof s=="function"&&(s=s(xs({},t),this.props)),s&&xs(t,s),s!=null&&this.__v&&(e&&this._sb.push(e),Kw(this))},Ot.prototype.forceUpdate=function(s){this.__v&&(this.__e=!0,s&&this.__h.push(s),Kw(this))},Ot.prototype.render=Zt,Zn=[],eE=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,um=function(s,e){return s.__v.__b-e.__v.__b},Ou.__r=0,pm=0,dm=Zw(!1),hm=Zw(!0),LL=0;function Na(s){return typeof s!="object"||s===null||!("nodeType"in s)?!1:s.nodeType===Node.ELEMENT_NODE}function NL(s,e){return e===void 0&&(e=document),typeof s=="string"?e.querySelector(s):Na(s)?s:null}var cE=NL;function BL(s){for(var e;s&&!s.dir;)s=s.parentNode;return(e=s)==null?void 0:e.dir}var Du=BL;var Qn=class{constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){let{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){let{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){let e=new Wn([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}};function uE(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var zL=0;function $L(s){return"__private_"+zL+++"_"+s}function HL(s){let e=null,t;return function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return t=n,e||(e=Promise.resolve().then(()=>(e=null,s(...t)))),e}}var Ba=$L("updateUI"),vm=class s extends Qn{constructor(){super(...arguments),Object.defineProperty(this,Ba,{writable:!0,value:void 0})}getTargetPlugin(e){let t;if(typeof e?.addTarget=="function")t=e,t instanceof s||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:t,UIPlugin:s}}));else if(typeof e=="function"){let i=e;this.uppy.iteratePlugins(n=>{n instanceof i&&(t=n)})}return t}mount(e,t){let i=t.id,n=cE(e);if(n){this.isTargetDOMEl=!0;let a=document.createElement("div");return a.classList.add("uppy-Root"),uE(this,Ba)[Ba]=HL(l=>{this.uppy.getPlugin(this.id)&&(gm(this.render(l,a),a),this.afterUpdate())}),this.uppy.log(`Installing ${i} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(n.innerHTML=""),gm(this.render(this.uppy.getState(),a),a),this.el=a,n.appendChild(a),a.dir=this.opts.direction||Du(a)||"ltr",this.onMount(),this.el}let r=this.getTargetPlugin(e);if(r)return this.uppy.log(`Installing ${i} to ${r.id}`),this.parent=r,this.el=r.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${i}`);let o=`Invalid target option given to ${i}.`;throw typeof e=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(e,t){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){if(this.el!=null){var t,i;(t=(i=uE(this,Ba))[Ba])==null||t.call(i,e)}}unmount(){if(this.isTargetDOMEl){var e;(e=this.el)==null||e.remove()}this.onUnmount()}onMount(){}onUnmount(){}},Ii=vm;function Fu(s,e,t,i){return t===0||s===e?s:i===0?e:s+(e-s)*2**(-i/t)}var ai={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};var Tm=Ve(Rt(),1);function za(s){let e=[],t="indeterminate",i;for(let{progress:r}of Object.values(s)){let{preprocess:o,postprocess:a}=r;i==null&&(o||a)&&({mode:t,message:i}=o||a),o?.mode==="determinate"&&e.push(o.value),a?.mode==="determinate"&&e.push(a.value)}let n=e.reduce((r,o)=>r+o/e.length,0);return{mode:t,message:i,value:n}}var Em=Ve(Rt(),1),wm=Ve(xu(),1);function bm(s){let e=Math.floor(s/3600)%24,t=Math.floor(s/60)%60,i=Math.floor(s%60);return{hours:e,minutes:t,seconds:i}}function ym(s){let e=bm(s),t=e.hours===0?"":`${e.hours}h`,i=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,n=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${t}${i}${n}`}var UL="\xB7",dE=()=>` ${UL} `;function hE(s){let{newFiles:e,isUploadStarted:t,recoveredState:i,i18n:n,uploadState:r,isSomeGhost:o,startUpload:a}=s,l=(0,Em.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":r===ai.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),c=e&&t&&!i?n("uploadXNewFiles",{smart_count:e}):n("uploadXFiles",{smart_count:e});return m("button",{type:"button",className:l,"aria-label":n("uploadXFiles",{smart_count:e}),onClick:a,disabled:o,"data-uppy-super-focusable":!0},c)}function pE(s){let{i18n:e,uppy:t}=s;return m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry"},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},m("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),e("retry"))}function fE(s){let{i18n:e,uppy:t}=s;return m("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},m("g",{fill:"none",fillRule:"evenodd"},m("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),m("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function mE(s){let{isAllPaused:e,i18n:t,isAllComplete:i,resumableUploads:n,uppy:r}=s,o=t(e?"resume":"pause");function a(){if(!i){if(!n){r.cancelAll();return}if(e){r.resumeAll();return}r.pauseAll()}}return m("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:a,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},m("g",{fill:"none",fillRule:"evenodd"},m("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),m("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function gE(s){let{i18n:e,doneButtonHandler:t}=s;return m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0},e("done"))}function vE(){return m("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},m("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function bE(s){let{progress:e}=s,{value:t,mode:i,message:n}=e;return m("div",{className:"uppy-StatusBar-content"},m(vE,null),i==="determinate"?`${Math.round(t*100)}% \xB7 `:"",n)}function jL(s){let{numUploads:e,complete:t,totalUploadedSize:i,totalSize:n,totalETA:r,i18n:o}=s,a=e>1;return m("div",{className:"uppy-StatusBar-statusSecondary"},a&&o("filesUploadedOfTotal",{complete:t,smart_count:e}),m("span",{className:"uppy-StatusBar-additionalInfo"},a&&dE(),o("dataUploadedOfTotal",{complete:(0,wm.default)(i),total:(0,wm.default)(n)}),dE(),o("xTimeLeft",{time:ym(r)})))}function yE(s){let{i18n:e,complete:t,numUploads:i}=s;return m("div",{className:"uppy-StatusBar-statusSecondary"},e("filesUploadedOfTotal",{complete:t,smart_count:i}))}function VL(s){let{i18n:e,newFiles:t,startUpload:i}=s,n=(0,Em.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return m("div",{className:"uppy-StatusBar-statusSecondary"},m("div",{className:"uppy-StatusBar-statusSecondaryHint"},e("xMoreFilesAdded",{smart_count:t})),m("button",{type:"button",className:n,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:i},e("upload")))}function wE(s){let{i18n:e,supportsUploadProgress:t,totalProgress:i,showProgressDetails:n,isUploadStarted:r,isAllComplete:o,isAllPaused:a,newFiles:l,numUploads:c,complete:u,totalUploadedSize:h,totalSize:f,totalETA:p,startUpload:v}=s,w=l&&r;if(!r||o)return null;let S=e(a?"paused":"uploading");function A(){return!a&&!w&&n?t?m(jL,{numUploads:c,complete:u,totalUploadedSize:h,totalSize:f,totalETA:p,i18n:e}):m(yE,{i18n:e,complete:u,numUploads:c}):null}return m("div",{className:"uppy-StatusBar-content","aria-label":S,title:S},a?null:m(vE,null),m("div",{className:"uppy-StatusBar-status"},m("div",{className:"uppy-StatusBar-statusPrimary"},t?`${S}: ${i}%`:S),A(),w?m(VL,{i18n:e,newFiles:l,startUpload:v}):null))}function EE(s){let{i18n:e}=s;return m("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete")},m("div",{className:"uppy-StatusBar-status"},m("div",{className:"uppy-StatusBar-statusPrimary"},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},m("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),e("complete"))))}function SE(s){let{error:e,i18n:t,complete:i,numUploads:n}=s;function r(){let o=`${t("uploadFailed")} 

 ${e}`;alert(o)}return m("div",{className:"uppy-StatusBar-content",title:t("uploadFailed")},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},m("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),m("div",{className:"uppy-StatusBar-status"},m("div",{className:"uppy-StatusBar-statusPrimary"},t("uploadFailed"),m("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:r,type:"button"},"?")),m(yE,{i18n:t,complete:i,numUploads:n})))}var{STATE_ERROR:AE,STATE_WAITING:qL,STATE_PREPROCESSING:Sm,STATE_UPLOADING:Ru,STATE_POSTPROCESSING:Am,STATE_COMPLETE:Nu}=ai;function xm(s){let{newFiles:e,allowNewUpload:t,isUploadInProgress:i,isAllPaused:n,resumableUploads:r,error:o,hideUploadButton:a=void 0,hidePauseResumeButton:l=!1,hideCancelButton:c=!1,hideRetryButton:u=!1,recoveredState:h,uploadState:f,totalProgress:p,files:v,supportsUploadProgress:w,hideAfterFinish:S=!1,isSomeGhost:A,doneButtonHandler:k=void 0,isUploadStarted:D,i18n:R,startUpload:$,uppy:U,isAllComplete:Z,showProgressDetails:K=void 0,numUploads:ue,complete:X,totalSize:oe,totalETA:he,totalUploadedSize:se}=s;function Q(){switch(f){case Am:case Sm:{let G=za(v);return G.mode==="determinate"?G.value*100:p}case AE:return null;case Ru:return w?p:null;default:return p}}function H(){switch(f){case Am:case Sm:{let{mode:G}=za(v);return G==="indeterminate"}case Ru:return!w;default:return!1}}let T=Q(),F=T??100,_=!o&&e&&(!i&&!n||h)&&t&&!a,J=!c&&f!==qL&&f!==Nu,ie=r&&!l&&f===Ru,le=o&&!Z&&!u,ve=k&&f===Nu,Ae=(0,Tm.default)("uppy-StatusBar-progress",{"is-indeterminate":H()}),De=(0,Tm.default)("uppy-StatusBar",`is-${f}`,{"has-ghosts":A}),qe=(()=>{switch(f){case Sm:case Am:return m(bE,{progress:za(v)});case Nu:return m(EE,{i18n:R});case AE:return m(SE,{error:o,i18n:R,numUploads:ue,complete:X});case Ru:return m(wE,{i18n:R,supportsUploadProgress:w,totalProgress:p,showProgressDetails:K,isUploadStarted:D,isAllComplete:Z,isAllPaused:n,newFiles:e,numUploads:ue,complete:X,totalUploadedSize:se,totalSize:oe,totalETA:he,startUpload:$});default:return null}})();return m("div",{className:De,"aria-hidden":!(_||le||ie||J||ve)&&!qe||f===Nu&&S},m("div",{className:Ae,style:{width:`${F}%`},role:"progressbar","aria-label":`${F}%`,"aria-valuetext":`${F}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":T}),qe,m("div",{className:"uppy-StatusBar-actions"},_?m(hE,{newFiles:e,isUploadStarted:D,recoveredState:h,i18n:R,isSomeGhost:A,startUpload:$,uploadState:f}):null,le?m(pE,{i18n:R,uppy:U}):null,ie?m(mE,{isAllPaused:n,i18n:R,isAllComplete:Z,resumableUploads:r,uppy:U}):null,J?m(fE,{i18n:R,uppy:U}):null,ve?m(gE,{i18n:R,doneButtonHandler:k}):null))}var TE={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function Ke(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var WL=0;function ho(s){return"__private_"+WL+++"_"+s}var GL={version:"4.0.4"},YL=2e3,XL=2e3;function KL(s,e,t,i){if(s)return ai.STATE_ERROR;if(e)return ai.STATE_COMPLETE;if(t)return ai.STATE_WAITING;let n=ai.STATE_WAITING,r=Object.keys(i);for(let o=0;o<r.length;o++){let{progress:a}=i[r[o]];if(a.uploadStarted&&!a.uploadComplete)return ai.STATE_UPLOADING;a.preprocess&&(n=ai.STATE_PREPROCESSING),a.postprocess&&n!==ai.STATE_PREPROCESSING&&(n=ai.STATE_POSTPROCESSING)}return n}var JL={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null},_i=ho("lastUpdateTime"),Ri=ho("previousUploadedBytes"),Cs=ho("previousSpeed"),li=ho("previousETA"),Cm=ho("computeSmoothETA"),$a=ho("onUploadStart"),er=class extends Ii{constructor(e,t){super(e,{...JL,...t}),Object.defineProperty(this,Cm,{value:ZL}),Object.defineProperty(this,_i,{writable:!0,value:void 0}),Object.defineProperty(this,Ri,{writable:!0,value:void 0}),Object.defineProperty(this,Cs,{writable:!0,value:void 0}),Object.defineProperty(this,li,{writable:!0,value:void 0}),this.startUpload=()=>this.uppy.upload().catch(()=>{}),Object.defineProperty(this,$a,{writable:!0,value:()=>{let{recoveredState:i}=this.uppy.getState();if(Ke(this,Cs)[Cs]=null,Ke(this,li)[li]=null,i){Ke(this,Ri)[Ri]=Object.values(i.files).reduce((n,r)=>{let{progress:o}=r;return n+o.bytesUploaded},0),this.uppy.emit("restore-confirmed");return}Ke(this,_i)[_i]=performance.now(),Ke(this,Ri)[Ri]=0}}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=TE,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(e){let{capabilities:t,files:i,allowNewUpload:n,totalProgress:r,error:o,recoveredState:a}=e,{newFiles:l,startedFiles:c,completeFiles:u,isUploadStarted:h,isAllComplete:f,isAllPaused:p,isUploadInProgress:v,isSomeGhost:w}=this.uppy.getObjectOfFilesPerState(),S=a?Object.values(i):l,A=!!t.resumableUploads,k=t.uploadProgress!==!1,D=0,R=0;c.forEach(U=>{D+=U.progress.bytesTotal||0,R+=U.progress.bytesUploaded||0});let $=Ke(this,Cm)[Cm]({uploaded:R,total:D,remaining:D-R});return xm({error:o,uploadState:KL(o,f,a,e.files||{}),allowNewUpload:n,totalProgress:r,totalSize:D,totalUploadedSize:R,isAllComplete:!1,isAllPaused:p,isUploadStarted:h,isUploadInProgress:v,isSomeGhost:w,recoveredState:a,complete:u.length,newFiles:S.length,numUploads:c.length,totalETA:$,files:i,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:A,supportsUploadProgress:k,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){let e=this.el;Du(e)||(e.dir="ltr")}install(){let{target:e}=this.opts;e&&this.mount(e,this),this.uppy.on("upload",Ke(this,$a)[$a]),Ke(this,_i)[_i]=performance.now(),Ke(this,Ri)[Ri]=this.uppy.getFiles().reduce((t,i)=>t+i.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",Ke(this,$a)[$a])}};function ZL(s){var e,t;if(s.total===0||s.remaining===0)return 0;(t=(e=Ke(this,_i))[_i])!=null||(e[_i]=performance.now());let i=performance.now()-Ke(this,_i)[_i];if(i===0){var n;return Math.round(((n=Ke(this,li)[li])!=null?n:0)/100)/10}let r=s.uploaded-Ke(this,Ri)[Ri];if(Ke(this,Ri)[Ri]=s.uploaded,r<=0){var o;return Math.round(((o=Ke(this,li)[li])!=null?o:0)/100)/10}let a=r/i,l=Ke(this,Cs)[Cs]==null?a:Fu(a,Ke(this,Cs)[Cs],YL,i);Ke(this,Cs)[Cs]=l;let c=s.remaining/l,u=Math.max(Ke(this,li)[li]-i,0),h=Ke(this,li)[li]==null?c:Fu(c,u,XL,i);return Ke(this,li)[li]=h,Ke(this,_i)[_i]=performance.now(),Math.round(h/100)/10}er.VERSION=GL.version;var xE=300,Ha=class extends Ot{constructor(){super(...arguments),this.ref=sE()}componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,xE)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,xE)}render(){let{children:e}=this.props;return m("div",{className:"uppy-Informer-animated",ref:this.ref},e)}};function QL(s,e){return Object.assign(s,e)}function ek(s,e){var t;return(t=s?.key)!=null?t:e}function tk(s,e){let t=s._ptgLinkedRefs||(s._ptgLinkedRefs={});return t[e]||(t[e]=i=>{s.refs[e]=i})}function Ua(s){let e={};for(let t=0;t<s.length;t++)if(s[t]!=null){let i=ek(s[t],t.toString(36));e[i]=s[t]}return e}function ik(s,e){s=s||{},e=e||{};let t=o=>e.hasOwnProperty(o)?e[o]:s[o],i={},n=[];for(let o in s)e.hasOwnProperty(o)?n.length&&(i[o]=n,n=[]):n.push(o);let r={};for(let o in e){if(i.hasOwnProperty(o))for(let a=0;a<i[o].length;a++){let l=i[o][a];r[i[o][a]]=t(l)}r[o]=t(o)}for(let o=0;o<n.length;o++)r[n[o]]=t(n[o]);return r}var sk=s=>s,Bu=class extends Ot{constructor(e,t){super(e,t),this.refs={},this.state={children:Ua(Qi(Qi(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){let e=this.state.children;for(let t in e)e[t]&&this.performAppear(t)}componentWillReceiveProps(e){let t=Ua(Qi(e.children)||[]),i=this.state.children;this.setState(r=>({children:ik(r.children,t)}));let n;for(n in t)if(t.hasOwnProperty(n)){let r=i&&i.hasOwnProperty(n);t[n]&&r&&this.currentlyTransitioningKeys[n]?(this.keysToEnter.push(n),this.keysToAbortLeave.push(n)):t[n]&&!r&&!this.currentlyTransitioningKeys[n]&&this.keysToEnter.push(n)}for(n in i)if(i.hasOwnProperty(n)){let r=t&&t.hasOwnProperty(n);i[n]&&!r&&!this.currentlyTransitioningKeys[n]&&this.keysToLeave.push(n)}}componentDidUpdate(){let{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);let{keysToLeave:t}=this;this.keysToLeave=[],t.forEach(this.performLeave)}_finishAbort(e){let t=this.keysToAbortLeave.indexOf(e);t!==-1&&this.keysToAbortLeave.splice(t,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;let t=this.refs[e];t!=null&&t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){let t=this.refs[e];t!=null&&t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);let i=Ua(Qi(this.props.children)||[]);(!i||!i.hasOwnProperty(e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;let t=this.refs[e];t!=null&&t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){let t=this.refs[e];t!=null&&t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);let i=Ua(Qi(this.props.children)||[]);(!i||!i.hasOwnProperty(e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;let i=this.refs[e];i!=null&&i.componentWillLeave?i.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;let i=this.refs[e];i!=null&&i.componentDidLeave&&i.componentDidLeave(),delete this.currentlyTransitioningKeys[e];let n=Ua(Qi(this.props.children)||[]);if(n&&n.hasOwnProperty(e))this.performEnter(e);else{let r=QL({},this.state.children);delete r[e],this.setState({children:r})}}render(e,t){let{childFactory:i,transitionLeave:n,transitionName:r,transitionAppear:o,transitionEnter:a,transitionLeaveTimeout:l,transitionEnterTimeout:c,transitionAppearTimeout:u,component:h,...f}=e,{children:p}=t,v=Object.entries(p).map(w=>{let[S,A]=w;if(!A)return;let k=tk(this,S);return ku(i(A),{ref:k,key:S})}).filter(Boolean);return m(h,f,v)}};Bu.defaultProps={component:"span",childFactory:sk};var CE=Bu;var nk={version:"4.1.1"},tr=class extends Ii{constructor(e,t){super(e,t),this.render=i=>m("div",{className:"uppy uppy-Informer"},m(CE,null,i.info.map(n=>m(Ha,{key:n.message},m("p",{role:"alert"},n.message," ",n.details&&m("span",{"aria-label":n.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${n.message} 

 ${n.details}`)},"?")))))),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){let{target:e}=this.opts;e&&this.mount(e,this)}};tr.VERSION=nk.version;var rk=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function ok(s,e,t){var i,n;let r=rk.exec(s),o=(i=(n=e.mimeType)!=null?n:r?.[1])!=null?i:"plain/text",a;if(r?.[2]!=null){let l=atob(decodeURIComponent(r[3])),c=new Uint8Array(l.length);for(let u=0;u<l.length;u++)c[u]=l.charCodeAt(u);a=[c]}else r?.[3]!=null&&(a=[decodeURIComponent(r[3])]);return t?new File(a,e.name||"",{type:o}):new Blob(a,{type:o})}var PE=ok;function zu(s){return s.startsWith("blob:")}function $u(s){return s?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(s):!1}function Ie(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}var RE=typeof self<"u"?self:global,Wa=typeof navigator<"u",ak=Wa&&typeof HTMLImageElement>"u",_E=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),NE=RE.Buffer,BE=!!NE,lk=s=>s!==void 0;function zE(s){return s===void 0||(s instanceof Map?s.size===0:Object.values(s).filter(lk).length===0)}function Et(s){let e=new Error(s);throw delete e.stack,e}function ME(s){let e=function(t){let i=0;return t.ifd0.enabled&&(i+=1024),t.exif.enabled&&(i+=2048),t.makerNote&&(i+=2048),t.userComment&&(i+=1024),t.gps.enabled&&(i+=512),t.interop.enabled&&(i+=100),t.ifd1.enabled&&(i+=1024),i+2048}(s);return s.jfif.enabled&&(e+=50),s.xmp.enabled&&(e+=2e4),s.iptc.enabled&&(e+=14e3),s.icc.enabled&&(e+=6e3),e}var Pm=s=>String.fromCharCode.apply(null,s),OE=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0,sr=class s{static from(e,t){return e instanceof this&&e.le===t?e:new s(e,void 0,void 0,t)}constructor(e,t=0,i,n){if(typeof n=="boolean"&&(this.le=n),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){i===void 0&&(i=e.byteLength-t);let r=new DataView(e,t,i);this._swapDataView(r)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof s){i===void 0&&(i=e.byteLength-t),(t+=e.byteOffset)+i>e.byteOffset+e.byteLength&&Et("Creating view outside of available memory in ArrayBuffer");let r=new DataView(e.buffer,t,i);this._swapDataView(r)}else if(typeof e=="number"){let r=new DataView(new ArrayBuffer(e));this._swapDataView(r)}else Et("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,i=s){return e instanceof DataView||e instanceof s?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Et("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new i(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new s(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return n=this.getUint8Array(e,t),OE?OE.decode(n):BE?Buffer.from(n).toString("utf8"):decodeURIComponent(escape(Pm(n)));var n}getLatin1String(e=0,t=this.byteLength){let i=this.getUint8Array(e,t);return Pm(i)}getUnicodeString(e=0,t=this.byteLength){let i=[];for(let n=0;n<t&&e+n<this.byteLength;n+=2)i.push(this.getUint16(e+n));return Pm(i)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,i){switch(t){case 1:return this.getUint8(e,i);case 2:return this.getUint16(e,i);case 4:return this.getUint32(e,i);case 8:return this.getUint64&&this.getUint64(e,i)}}getUint(e,t,i){switch(t){case 8:return this.getUint8(e,i);case 16:return this.getUint16(e,i);case 32:return this.getUint32(e,i);case 64:return this.getUint64&&this.getUint64(e,i)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}};function Mm(s,e){Et(`${s} '${e}' was not loaded, try using full build of exifr.`)}var Ga=class extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||Mm(this.kind,e),t&&(e in t||function(i,n){Et(`Unknown ${i} '${n}'.`)}(this.kind,e),t[e].enabled||Mm(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}},qu=new Ga("file parser"),ci=new Ga("segment parser"),Ka=new Ga("file reader"),ck=RE.fetch;function LE(s,e){return(t=s).startsWith("data:")||t.length>1e4?Lm(s,e,"base64"):_E&&s.includes("://")?Om(s,e,"url",Hu):_E?Lm(s,e,"fs"):Wa?Om(s,e,"url",Hu):void Et("Invalid input argument");var t}async function Om(s,e,t,i){return Ka.has(t)?Lm(s,e,t):i?async function(n,r){let o=await r(n);return new sr(o)}(s,i):void Et(`Parser ${t} is not loaded`)}async function Lm(s,e,t){let i=new(Ka.get(t))(s,e);return await i.read(),i}var Hu=s=>ck(s).then(e=>e.arrayBuffer()),Ya=s=>new Promise((e,t)=>{let i=new FileReader;i.onloadend=()=>e(i.result||new ArrayBuffer),i.onerror=t,i.readAsArrayBuffer(s)}),km=class extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}};function $E(s,e,t){let i=new km;for(let[n,r]of t)i.set(n,r);if(Array.isArray(e))for(let n of e)s.set(n,i);else s.set(e,i);return i}function HE(s,e,t){let i,n=s.get(e);for(i of t)n.set(i[0],i[1])}var Ja=new Map,Nm=new Map,Bm=new Map,po=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Wu=["jfif","xmp","icc","iptc","ihdr"],Xa=["tiff",...Wu],dt=["ifd0","ifd1","exif","gps","interop"],fo=[...Xa,...dt],mo=["makerNote","userComment"],Gu=["translateKeys","translateValues","reviveValues","multiSegment"],go=[...Gu,"sanitize","mergeOutput","silentErrors"],Uu=class{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}},ir=class extends Uu{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,i,n){if(super(),Ie(this,"enabled",!1),Ie(this,"skip",new Set),Ie(this,"pick",new Set),Ie(this,"deps",new Set),Ie(this,"translateKeys",!1),Ie(this,"translateValues",!1),Ie(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=dt.includes(e),this.canBeFiltered&&(this.dict=Ja.get(e)),i!==void 0)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(typeof i=="object"){if(this.enabled=!0,this.parse=i.parse!==!1,this.canBeFiltered){let{pick:r,skip:o}=i;r&&r.length>0&&this.translateTagSet(r,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(i)}else i===!0||i===!1?this.parse=this.enabled=i:Et(`Invalid options argument: ${i}`)}applyInheritables(e){let t,i;for(t of Gu)i=e[t],i!==void 0&&(this[t]=i)}translateTagSet(e,t){if(this.dict){let i,n,{tagKeys:r,tagValues:o}=this.dict;for(i of e)typeof i=="string"?(n=o.indexOf(i),n===-1&&(n=r.indexOf(Number(i))),n!==-1&&t.add(Number(r[n]))):t.add(i)}else for(let i of e)t.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ju(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ju(this.pick,this.deps)}},Nt={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},kE=new Map,nr=class extends Uu{static useCached(e){let t=kE.get(e);return t!==void 0||(t=new this(e),kE.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Et(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Wa?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of po)this[e]=Nt[e];for(e of go)this[e]=Nt[e];for(e of mo)this[e]=Nt[e];for(e of fo)this[e]=new ir(e,Nt[e],void 0,this)}setupFromTrue(){let e;for(e of po)this[e]=Nt[e];for(e of go)this[e]=Nt[e];for(e of mo)this[e]=!0;for(e of fo)this[e]=new ir(e,!0,void 0,this)}setupFromArray(e){let t;for(t of po)this[t]=Nt[t];for(t of go)this[t]=Nt[t];for(t of mo)this[t]=Nt[t];for(t of fo)this[t]=new ir(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,dt)}setupFromObject(e){let t;for(t of(dt.ifd0=dt.ifd0||dt.image,dt.ifd1=dt.ifd1||dt.thumbnail,Object.assign(this,e),po))this[t]=_m(e[t],Nt[t]);for(t of go)this[t]=_m(e[t],Nt[t]);for(t of mo)this[t]=_m(e[t],Nt[t]);for(t of Xa)this[t]=new ir(t,Nt[t],e[t],this);for(t of dt)this[t]=new ir(t,Nt[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,dt,fo),e.tiff===!0?this.batchEnableWithBool(dt,!0):e.tiff===!1?this.batchEnableWithUserValue(dt,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,dt):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,dt)}batchEnableWithBool(e,t){for(let i of e)this[i].enabled=t}batchEnableWithUserValue(e,t){for(let i of e){let n=t[i];this[i].enabled=n!==!1&&n!==void 0}}setupGlobalFilters(e,t,i,n=i){if(e&&e.length){for(let o of n)this[o].enabled=!1;let r=DE(e,i);for(let[o,a]of r)ju(this[o].pick,a),this[o].enabled=!0}else if(t&&t.length){let r=DE(t,i);for(let[o,a]of r)ju(this[o].skip,a)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:i,iptc:n,icc:r}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),i.enabled||e.skip.add(700),n.enabled||e.skip.add(33723),r.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:i,interop:n}=this;n.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=dt.some(r=>this[r].enabled===!0)||this.makerNote||this.userComment;for(let r of dt)this[r].finalizeFilters()}get onlyTiff(){return!Wu.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Xa)this[e].enabled&&!ci.has(e)&&Mm("segment parser",e)}};function DE(s,e){let t,i,n,r,o=[];for(n of e){for(r of(t=Ja.get(n),i=[],t))(s.includes(r[0])||s.includes(r[1]))&&i.push(r[0]);i.length&&o.push([n,i])}return o}function _m(s,e){return s!==void 0?s:e!==void 0?e:void 0}function ju(s,e){for(let t of e)s.add(t)}Ie(nr,"default",Nt);var vo=class{constructor(e){Ie(this,"parsers",{}),Ie(this,"output",{}),Ie(this,"errors",[]),Ie(this,"pushToErrors",t=>this.errors.push(t)),this.options=nr.useCached(e)}async read(e){this.file=await function(t,i){return typeof t=="string"?LE(t,i):Wa&&!ak&&t instanceof HTMLImageElement?LE(t.src,i):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new sr(t):Wa&&t instanceof Blob?Om(t,i,"blob",Ya):void Et("Invalid input argument")}(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[i,n]of qu)if(n.canHandle(e,t))return this.fileParser=new n(this.options,this.file,this.parsers),e[i]=!0;this.file.close&&this.file.close(),Et("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),zE(i=e)?void 0:i;var i}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map(async i=>{let n=await i.parse();i.assignToOutput(e,n)});this.options.silentErrors&&(t=t.map(i=>i.catch(this.pushToErrors))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,i=ci.get("tiff",e);var n;if(t.tiff?n={start:0,type:"tiff"}:t.jpeg&&(n=await this.fileParser.getOrFindSegment("tiff")),n===void 0)return;let r=await this.fileParser.ensureSegmentChunk(n),o=this.parsers.tiff=new i(r,e,t),a=await o.extractThumbnail();return t.close&&t.close(),a}};async function UE(s,e){let t=new vo(e);return await t.read(s),t.parse()}var uk=Object.freeze({__proto__:null,parse:UE,Exifr:vo,fileParsers:qu,segmentParsers:ci,fileReaders:Ka,tagKeys:Ja,tagValues:Nm,tagRevivers:Bm,createDictionary:$E,extendDictionary:HE,fetchUrlAsArrayBuffer:Hu,readBlobAsArrayBuffer:Ya,chunkedProps:po,otherSegments:Wu,segments:Xa,tiffBlocks:dt,segmentsAndBlocks:fo,tiffExtractables:mo,inheritables:Gu,allFormatters:go,Options:nr}),ln=class{static findPosition(e,t){let i=e.getUint16(t+2)+2,n=typeof this.headerLength=="function"?this.headerLength(e,t,i):this.headerLength,r=t+n,o=i-n;return{offset:t,length:i,headerLength:n,start:r,size:o,end:r+o}}static parse(e,t={}){return new this(e,new nr({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof sr?e:new sr(e)}constructor(e,t={},i){Ie(this,"errors",[]),Ie(this,"raw",new Map),Ie(this,"handleError",n=>{if(!this.options.silentErrors)throw n;this.errors.push(n.message)}),this.chunk=this.normalizeInput(e),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let i=Bm.get(t),n=Nm.get(t),r=Ja.get(t),o=this.options[t],a=o.reviveValues&&!!i,l=o.translateValues&&!!n,c=o.translateKeys&&!!r,u={};for(let[h,f]of e)a&&i.has(h)?f=i.get(h)(f):l&&n.has(h)&&(f=this.translateValue(f,n.get(h))),c&&r.has(h)&&(h=r.get(h)||h),u[h]=f;return u}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,i){if(this.globalOptions.mergeOutput)return Object.assign(e,i);e[t]?Object.assign(e[t],i):e[t]=i}};Ie(ln,"headerLength",4),Ie(ln,"type",void 0),Ie(ln,"multiSegment",!1),Ie(ln,"canHandle",()=>!1);function dk(s){return s===192||s===194||s===196||s===219||s===221||s===218||s===254}function hk(s){return s>=224&&s<=239}function pk(s,e,t){for(let[i,n]of ci)if(n.canHandle(s,e,t))return i}var Vu=class extends class{constructor(e,t,i){Ie(this,"errors",[]),Ie(this,"ensureSegmentChunk",async n=>{let r=n.start,o=n.size||65536;if(this.file.chunked)if(this.file.available(r,o))n.chunk=this.file.subarray(r,o);else try{n.chunk=await this.file.readChunk(r,o)}catch(a){Et(`Couldn't read segment: ${JSON.stringify(n)}. ${a.message}`)}else this.file.byteLength>r+o?n.chunk=this.file.subarray(r,o):n.size===void 0?n.chunk=this.file.subarray(r):Et("Segment unreachable: "+JSON.stringify(n));return n.chunk}),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=i}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let i=new(ci.get(e))(t,this.options,this.file);return this.parsers[e]=i}createParsers(e){for(let t of e){let{type:i,chunk:n}=t,r=this.options[i];if(r&&r.enabled){let o=this.parsers[i];o&&o.append||o||this.createParser(i,n)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...e){super(...e),Ie(this,"appSegments",[]),Ie(this,"jpegSegments",[]),Ie(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(ci.keyList())):(e=e===void 0?ci.keyList().filter(t=>this.options[t].enabled):e.filter(t=>this.options[t].enabled&&ci.has(t)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:i,findAll:n,wanted:r,remaining:o}=this;if(!n&&this.file.chunked&&(n=Array.from(r).some(a=>{let l=ci.get(a),c=this.options[a];return l.multiSegment&&c.multiSegment}),n&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,i.byteLength),!this.options.onlyTiff&&i.chunked){let a=!1;for(;o.size>0&&!a&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=i,c=this.appSegments.some(u=>!this.file.available(u.offset||u.start,u.length||u.size));if(a=e>l&&!c?!await i.readNextChunk(e):!await i.readNextChunk(l),(e=this.findAppSegmentsInRange(e,i.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let i,n,r,o,a,l,{file:c,findAll:u,wanted:h,remaining:f,options:p}=this;for(;e<t;e++)if(c.getUint8(e)===255){if(i=c.getUint8(e+1),hk(i)){if(n=c.getUint16(e+2),r=pk(c,e,n),r&&h.has(r)&&(o=ci.get(r),a=o.findPosition(c,e),l=p[r],a.type=r,this.appSegments.push(a),!u&&(o.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||f.delete(r)):f.delete(r),f.size===0)))break;p.recordUnknownSegments&&(a=ln.findPosition(c,e),a.marker=i,this.unknownSegments.push(a)),e+=n+1}else if(dk(i)){if(n=c.getUint16(e+2),i===218&&p.stopAfterSos!==!1)return;p.recordJpegSegments&&this.jpegSegments.push({offset:e,length:n,marker:i}),e+=n+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(t=>t.multiSegment))return;let e=function(t,i){let n,r,o,a=new Map;for(let l=0;l<t.length;l++)n=t[l],r=n[i],a.has(r)?o=a.get(r):a.set(r,o=[]),o.push(n);return Array.from(a)}(this.appSegments,"type");this.mergedAppSegments=e.map(([t,i])=>{let n=ci.get(t,this.options);return n.handleMultiSegments?{type:t,chunk:n.handleMultiSegments(i)}:i[0]})}getSegment(e){return this.appSegments.find(t=>t.type===e)}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}};Ie(Vu,"type","jpeg"),qu.set("jpeg",Vu);var fk=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],Dm=class extends ln{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,i=new Map){let{pick:n,skip:r}=this.options[t];n=new Set(n);let o=n.size>0,a=r.size===0,l=this.chunk.getUint16(e);e+=2;for(let c=0;c<l;c++){let u=this.chunk.getUint16(e);if(o){if(n.has(u)&&(i.set(u,this.parseTag(e,u,t)),n.delete(u),n.size===0))break}else!a&&r.has(u)||i.set(u,this.parseTag(e,u,t));e+=12}return i}parseTag(e,t,i){let{chunk:n}=this,r=n.getUint16(e+2),o=n.getUint32(e+4),a=fk[r];if(a*o<=4?e+=8:e=n.getUint32(e+8),(r<1||r>13)&&Et(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${r}, offset ${e}`),e>n.byteLength&&Et(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${r}, offset ${e} is outside of chunk size ${n.byteLength}`),r===1)return n.getUint8Array(e,o);if(r===2)return(l=function(c){for(;c.endsWith("\0");)c=c.slice(0,-1);return c}(l=n.getString(e,o)).trim())===""?void 0:l;var l;if(r===7)return n.getUint8Array(e,o);if(o===1)return this.parseTagValue(r,e);{let c=new(function(h){switch(h){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(r))(o),u=a;for(let h=0;h<o;h++)c[h]=this.parseTagValue(r,e),e+=u;return c}}parseTagValue(e,t){let{chunk:i}=this;switch(e){case 1:return i.getUint8(t);case 3:return i.getUint16(t);case 4:return i.getUint32(t);case 5:return i.getUint32(t)/i.getUint32(t+4);case 6:return i.getInt8(t);case 8:return i.getInt16(t);case 9:return i.getInt32(t);case 10:return i.getInt32(t)/i.getInt32(t+4);case 11:return i.getFloat(t);case 12:return i.getDouble(t);case 13:return i.getUint32(t);default:Et(`Invalid tiff type ${e}`)}}},qa=class extends Dm{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let i=new Map;return this[t]=i,this.parseTags(e,t,i),i}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Et("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Et(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,ME(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,ME(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let i=e.get(t);i&&i.length===1&&e.set(t,i[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",FE(...e.get(2),e.get(1))),e.set("longitude",FE(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,i,n={};for(t of dt)if(e=this[t],!zE(e))if(i=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(n,i)}else n[t]=i;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[i,n]of Object.entries(t))this.assignObjectToOutput(e,i,n)}};function FE(s,e,t,i){var n=s+e/60+t/3600;return i!=="S"&&i!=="W"||(n*=-1),n}Ie(qa,"type","tiff"),Ie(qa,"headerLength",10),ci.set("tiff",qa);var Z3=Object.freeze({__proto__:null,default:uk,Exifr:vo,fileParsers:qu,segmentParsers:ci,fileReaders:Ka,tagKeys:Ja,tagValues:Nm,tagRevivers:Bm,createDictionary:$E,extendDictionary:HE,fetchUrlAsArrayBuffer:Hu,readBlobAsArrayBuffer:Ya,chunkedProps:po,otherSegments:Wu,segments:Xa,tiffBlocks:dt,segmentsAndBlocks:fo,tiffExtractables:mo,inheritables:Gu,allFormatters:go,Options:nr,parse:UE}),zm={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},Q3=Object.assign({},zm,{firstChunkSize:4e4,gps:[1,2,3,4]});var ez=Object.assign({},zm,{tiff:!1,ifd1:!0,mergeOutput:!1});var mk=Object.assign({},zm,{firstChunkSize:4e4,ifd0:[274]});async function gk(s){let e=new vo(mk);await e.read(s);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}var vk=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}}),ja=!0,Va=!0;if(typeof navigator=="object"){let s=navigator.userAgent;if(s.includes("iPad")||s.includes("iPhone")){let e=s.match(/OS (\d+)_(\d+)/);if(e){let[,t,i]=e;ja=Number(t)+.1*Number(i)<13.4,Va=!1}}else if(s.includes("OS X 10")){let[,e]=s.match(/OS X 10[_.](\d+)/);ja=Va=Number(e)<15}if(s.includes("Chrome/")){let[,e]=s.match(/Chrome\/(\d+)/);ja=Va=Number(e)<81}else if(s.includes("Firefox/")){let[,e]=s.match(/Firefox\/(\d+)/);ja=Va=Number(e)<77}}async function jE(s){let e=await gk(s);return Object.assign({canvas:ja,css:Va},vk[e])}var Fm=class extends sr{constructor(...e){super(...e),Ie(this,"ranges",new Im),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,i){if(e===0&&this.byteLength===0&&i){let n=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(n)}else{let n=e+t;if(n>this.byteLength){let{dataView:r}=this._extend(n);this._swapDataView(r)}}}_extend(e){let t;t=BE?NE.allocUnsafe(e):new Uint8Array(e);let i=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:i}}subarray(e,t,i=!1){return t=t||this._lengthToEnd(e),i&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,i=!1){i&&this._tryExtend(t,e.byteLength,e);let n=super.set(e,t);return this.ranges.add(t,n.byteLength),n}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}},Im=class{constructor(){Ie(this,"list",[])}get length(){return this.list.length}add(e,t,i=0){let n=e+t,r=this.list.filter(o=>IE(e,o.offset,n)||IE(e,o.end,n));if(r.length>0){e=Math.min(e,...r.map(a=>a.offset)),n=Math.max(n,...r.map(a=>a.end)),t=n-e;let o=r.shift();o.offset=e,o.length=t,o.end=n,this.list=this.list.filter(a=>!r.includes(a))}else this.list.push({offset:e,length:t,end:n})}available(e,t){let i=e+t;return this.list.some(n=>n.offset<=e&&i<=n.end)}};function IE(s,e,t){return s<=e&&e<=t}var Rm=class extends Fm{constructor(e,t){super(0),Ie(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,i=await this.readChunk(e,t);return!!i&&i.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}};Ka.set("blob",class extends Rm{async readWhole(){this.chunked=!1;let s=await Ya(this.input);this._swapArrayBuffer(s)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(s,e){let t=e?s+e:void 0,i=this.input.slice(s,t),n=await Ya(i);return this.set(n,s,!0)}});var VE={strings:{generatingThumbnails:"Generating thumbnails..."}};var bk={version:"4.0.1"};function yk(s,e,t){try{s.getContext("2d").getImageData(0,0,1,1)}catch(i){if(i.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return s.toBlob?new Promise(i=>{s.toBlob(i,e,t)}).then(i=>{if(i===null)throw new Error("cannot read image, probably an svg with external resources");return i}):Promise.resolve().then(()=>PE(s.toDataURL(e,t),{})).then(i=>{if(i===null)throw new Error("could not extract blob, probably an old browser");return i})}function wk(s,e){let t=s.width,i=s.height;(e.deg===90||e.deg===270)&&(t=s.height,i=s.width);let n=document.createElement("canvas");n.width=t,n.height=i;let r=n.getContext("2d");return r.translate(t/2,i/2),e.canvas&&(r.rotate(e.rad),r.scale(e.scaleX,e.scaleY)),r.drawImage(s,-s.width/2,-s.height/2,s.width,s.height),n}function Ek(s){let e=s.width/s.height,t=5e6,i=4096,n=Math.floor(Math.sqrt(t*e)),r=Math.floor(t/Math.sqrt(t*e));if(n>i&&(n=i,r=Math.round(n/e)),r>i&&(r=i,n=Math.round(e*r)),s.width>n){let o=document.createElement("canvas");return o.width=n,o.height=r,o.getContext("2d").drawImage(s,0,0,n,r),o}return s}var Sk={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1},bo=class extends Ii{constructor(e,t){if(super(e,{...Sk,...t}),this.onFileAdded=i=>{!i.preview&&i.data&&$u(i.type)&&!i.isRemote&&this.addToQueue(i.id)},this.onCancelRequest=i=>{let n=this.queue.indexOf(i.id);n!==-1&&this.queue.splice(n,1)},this.onFileRemoved=i=>{let n=this.queue.indexOf(i.id);n!==-1&&this.queue.splice(n,1),i.preview&&zu(i.preview)&&URL.revokeObjectURL(i.preview)},this.onRestored=()=>{this.uppy.getFiles().filter(n=>n.isRestored).forEach(n=>{(!n.preview||zu(n.preview))&&this.addToQueue(n.id)})},this.onAllFilesRemoved=()=>{this.queue=[]},this.waitUntilAllProcessed=i=>{i.forEach(r=>{let o=this.uppy.getFile(r);this.uppy.emit("preprocess-progress",o,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});let n=()=>{i.forEach(r=>{let o=this.uppy.getFile(r);this.uppy.emit("preprocess-complete",o)})};return new Promise(r=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{n(),r()}):(n(),r())})},this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=VE,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,t,i){let n=URL.createObjectURL(e.data),r=new Promise((a,l)=>{let c=new Image;c.src=n,c.addEventListener("load",()=>{URL.revokeObjectURL(n),a(c)}),c.addEventListener("error",u=>{URL.revokeObjectURL(n),l(u.error||new Error("Could not create thumbnail"))})}),o=jE(e.data).catch(()=>1);return Promise.all([r,o]).then(a=>{let[l,c]=a,u=this.getProportionalDimensions(l,t,i,c.deg),h=wk(l,c),f=this.resizeImage(h,u.width,u.height);return yk(f,this.thumbnailType,80)}).then(a=>URL.createObjectURL(a))}getProportionalDimensions(e,t,i,n){let r=e.width/e.height;return(n===90||n===270)&&(r=e.height/e.width),t!=null?{width:t,height:Math.round(t/r)}:i!=null?{width:Math.round(i*r),height:i}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/r)}}resizeImage(e,t,i){let n=Ek(e),r=Math.ceil(Math.log2(n.width/t));r<1&&(r=1);let o=t*2**(r-1),a=i*2**(r-1),l=2;for(;r--;){let c=document.createElement("canvas");c.width=o,c.height=a,c.getContext("2d").drawImage(n,0,0,o,a),n=c,o=Math.round(o/l),a=Math.round(a/l)}return n}setPreviewURL(e,t){this.uppy.setFileState(e,{preview:t})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){let e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return $u(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(t=>{this.setPreviewURL(e.id,t),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),t)}).catch(t=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(t,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),t)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}};bo.VERSION=bk.version;function Ak(s){if(typeof s=="string"){let e=document.querySelectorAll(s);return e.length===0?null:Array.from(e)}return typeof s=="object"&&Na(s)?[s]:null}var $m=Ak;var cn=Array.from;function Yu(s,e,t,i){let{onSuccess:n}=i;s.readEntries(r=>{let o=[...e,...r];r.length?queueMicrotask(()=>{Yu(s,o,t,{onSuccess:n})}):n(o)},r=>{t(r),n(e)})}function qE(s,e){return s==null?s:{kind:s.isFile?"file":s.isDirectory?"directory":void 0,name:s.name,getFile(){return new Promise((t,i)=>s.file(t,i))},async*values(){let t=s.createReader();yield*await new Promise(n=>{Yu(t,[],e,{onSuccess:r=>n(r.map(o=>qE(o,e)))})})},isSameEntry:void 0}}function WE(s,e,t){try{return t===void 0&&(t=void 0),async function*(){let i=()=>`${e}/${s.name}`;if(s.kind==="file"){let n=await s.getFile();n!=null?(n.relativePath=e?i():null,yield n):t!=null&&(yield t)}else if(s.kind==="directory")for await(let n of s.values())yield*WE(n,e?i():s.name);else t!=null&&(yield t)}()}catch(i){return Promise.reject(i)}}async function*Hm(s,e){let t=await Promise.all(Array.from(s.items,async i=>{var n;let r,o=()=>typeof i.getAsEntry=="function"?i.getAsEntry():i.webkitGetAsEntry();return(n=r)!=null||(r=qE(o(),e)),{fileSystemHandle:r,lastResortFile:i.getAsFile()}}));for(let{lastResortFile:i,fileSystemHandle:n}of t)if(n!=null)try{yield*WE(n,"",i)}catch(r){i!=null?yield i:e(r)}else i!=null&&(yield i)}function Um(s){let e=cn(s.files);return Promise.resolve(e)}async function jm(s,e){var t;let i=(t=e?.logDropError)!=null?t:Function.prototype;try{let n=[];for await(let r of Hm(s,i))n.push(r);return n}catch{return Um(s)}}var S1=Ve(Rt(),1);function Za(s){return{...s,type:s.mimeType,extension:s.name?Yn(s.name).extension:null}}var Qa,ot,Vm,GE,el=0,t1=[],ht=He,YE=ht.__b,XE=ht.__r,KE=ht.diffed,JE=ht.__c,ZE=ht.unmount,QE=ht.__;function Wm(s,e){ht.__h&&ht.__h(ot,s,el||e),el=0;var t=ot.__H||(ot.__H={__:[],__h:[]});return s>=t.__.length&&t.__.push({}),t.__[s]}function es(s){return el=1,Tk(s1,s)}function Tk(s,e,t){var i=Wm(Qa++,2);if(i.t=s,!i.__c&&(i.__=[t?t(e):s1(void 0,e),function(a){var l=i.__N?i.__N[0]:i.__[0],c=i.t(l,a);l!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=ot,!ot.u)){var n=function(a,l,c){if(!i.__c.__H)return!0;var u=i.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!r||r.call(this,a,l,c);var h=i.__c.props!==a;return u.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(h=!0)}}),r&&r.call(this,a,l,c)||h};ot.u=!0;var r=ot.shouldComponentUpdate,o=ot.componentWillUpdate;ot.componentWillUpdate=function(a,l,c){if(this.__e){var u=r;r=void 0,n(a,l,c),r=u}o&&o.call(this,a,l,c)},ot.shouldComponentUpdate=n}return i.__N||i.__}function Ps(s,e){var t=Wm(Qa++,3);!ht.__s&&i1(t.__H,e)&&(t.__=s,t.i=e,ot.__H.__h.push(t))}function yo(s){return el=5,rr(function(){return{current:s}},[])}function rr(s,e){var t=Wm(Qa++,7);return i1(t.__H,e)&&(t.__=s(),t.__H=e,t.__h=s),t.__}function wo(s,e){return el=8,rr(function(){return s},e)}function xk(){for(var s;s=t1.shift();)if(s.__P&&s.__H)try{s.__H.__h.forEach(Xu),s.__H.__h.forEach(qm),s.__H.__h=[]}catch(e){s.__H.__h=[],ht.__e(e,s.__v)}}ht.__b=function(s){ot=null,YE&&YE(s)},ht.__=function(s,e){s&&e.__k&&e.__k.__m&&(s.__m=e.__k.__m),QE&&QE(s,e)},ht.__r=function(s){XE&&XE(s),Qa=0;var e=(ot=s.__c).__H;e&&(Vm===ot?(e.__h=[],ot.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.i=t.__N=void 0})):(e.__h.forEach(Xu),e.__h.forEach(qm),e.__h=[],Qa=0)),Vm=ot},ht.diffed=function(s){KE&&KE(s);var e=s.__c;e&&e.__H&&(e.__H.__h.length&&(t1.push(e)!==1&&GE===ht.requestAnimationFrame||((GE=ht.requestAnimationFrame)||Ck)(xk)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.i=void 0})),Vm=ot=null},ht.__c=function(s,e){e.some(function(t){try{t.__h.forEach(Xu),t.__h=t.__h.filter(function(i){return!i.__||qm(i)})}catch(i){e.some(function(n){n.__h&&(n.__h=[])}),e=[],ht.__e(i,t.__v)}}),JE&&JE(s,e)},ht.unmount=function(s){ZE&&ZE(s);var e,t=s.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{Xu(i)}catch(n){e=n}}),t.__H=void 0,e&&ht.__e(e,t.__v))};var e1=typeof requestAnimationFrame=="function";function Ck(s){var e,t=function(){clearTimeout(i),e1&&cancelAnimationFrame(e),setTimeout(s)},i=setTimeout(t,100);e1&&(e=requestAnimationFrame(t))}function Xu(s){var e=ot,t=s.__c;typeof t=="function"&&(s.__c=void 0,t()),ot=e}function qm(s){var e=ot;s.__c=s.__(),ot=e}function i1(s,e){return!s||s.length!==e.length||e.some(function(t,i){return t!==s[i]})}function s1(s,e){return typeof e=="function"?e(s):e}function Pk(){return m("svg",{width:"26",height:"26",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg"},m("g",{fill:"none","fill-rule":"evenodd"},m("circle",{fill:"#FFF",cx:"13",cy:"13",r:"13"}),m("path",{d:"M21.64 13.205c0-.639-.057-1.252-.164-1.841H13v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4","fill-rule":"nonzero"}),m("path",{d:"M13 22c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H4.957v2.332A8.997 8.997 0 0013 22z",fill:"#34A853","fill-rule":"nonzero"}),m("path",{d:"M7.964 14.71A5.41 5.41 0 017.682 13c0-.593.102-1.17.282-1.71V8.958H4.957A8.996 8.996 0 004 13c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05","fill-rule":"nonzero"}),m("path",{d:"M13 7.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C17.463 4.891 15.426 4 13 4a8.997 8.997 0 00-8.043 4.958l3.007 2.332C8.672 9.163 10.656 7.58 13 7.58z",fill:"#EA4335","fill-rule":"nonzero"}),m("path",{d:"M4 4h18v18H4z"})))}function _k(s){let{pluginName:e,i18n:t,onAuth:i}=s,n=e==="Google Drive",r=wo(o=>{o.preventDefault(),i()},[i]);return m("form",{onSubmit:r},n?m("button",{type:"submit",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn uppy-Provider-btn-google","data-uppy-super-focusable":!0},m(Pk,null),t("signInWithGoogle")):m("button",{type:"submit",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn","data-uppy-super-focusable":!0},t("authenticateWith",{pluginName:e})))}var Mk=s=>{let{pluginName:e,i18n:t,onAuth:i}=s;return m(_k,{pluginName:e,i18n:t,onAuth:i})};function Gm(s){let{loading:e,pluginName:t,pluginIcon:i,i18n:n,handleAuth:r,renderForm:o=Mk}=s;return m("div",{className:"uppy-Provider-auth"},m("div",{className:"uppy-Provider-authIcon"},i()),m("div",{className:"uppy-Provider-authTitle"},n("authenticateWithTitle",{pluginName:t})),m("div",{className:"uppy-Provider-authForm"},o({pluginName:t,i18n:n,loading:e,onAuth:r})))}var n1=Ve(Rt(),1);function Ym(s){let{i18n:e,logout:t,username:i}=s;return m(Zt,null,i&&m("span",{className:"uppy-ProviderBrowser-user",key:"username"},i),m("button",{type:"button",onClick:t,className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowser-userLogout",key:"logout"},e("logOut")))}function Xm(s){let{openFolder:e,title:t,breadcrumbsIcon:i,breadcrumbs:n,i18n:r}=s;return m("div",{className:"uppy-Provider-breadcrumbs"},m("div",{className:"uppy-Provider-breadcrumbsIcon"},i),n.map((o,a)=>{var l;return m(Zt,null,m("button",{key:o.id,type:"button",className:"uppy-u-reset uppy-c-btn",onClick:()=>e(o.id)},o.type==="root"?t:(l=o.data.name)!=null?l:r("unnamed")),n.length===a+1?"":" / ")}))}function Km(s){return m("div",{className:"uppy-ProviderBrowser-header"},m("div",{className:(0,n1.default)("uppy-ProviderBrowser-headerBar",!s.showBreadcrumbs&&"uppy-ProviderBrowser-headerBar--simple")},s.showBreadcrumbs&&m(Xm,{openFolder:s.openFolder,breadcrumbs:s.breadcrumbs,breadcrumbsIcon:s.pluginIcon&&s.pluginIcon(),title:s.title,i18n:s.i18n}),m(Ym,{logout:s.logout,username:s.username,i18n:s.i18n})))}function Jm(){return Jm=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},Jm.apply(null,arguments)}var Ok={position:"relative",width:"100%",minHeight:"100%"},Lk={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"},Zm=class extends Ot{constructor(e){super(e),this.handleScroll=()=>{this.setState({offset:this.base.scrollTop})},this.handleResize=()=>{this.resize()},this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){let{height:e}=this.state;e!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render(e){let{data:t,rowHeight:i,renderRow:n,overscanCount:r=10,...o}=e,{offset:a,height:l}=this.state,c=Math.floor(a/i),u=Math.floor(l/i);r&&(c=Math.max(0,c-c%r),u+=r);let h=c+u+4,f=t.slice(c,h),p={...Ok,height:t.length*i},v={...Lk,top:c*i};return m("div",Jm({onScroll:this.handleScroll},o),m("div",{role:"presentation",style:p},m("div",{role:"presentation",style:v},f.map(n))))}},Ku=Zm;var r1=Ve(Rt(),1);function kk(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:11,height:14.5,viewBox:"0 0 44 58"},m("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}))}function Dk(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",style:{minWidth:16,marginRight:3},viewBox:"0 0 276.157 276.157"},m("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"}))}function Fk(){return m("svg",{"aria-hidden":"true",focusable:"false",style:{width:16,marginRight:4},viewBox:"0 0 58 58"},m("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),m("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}))}function Eo(s){let{itemIconString:e,alt:t=void 0}=s;if(e===null)return null;switch(e){case"file":return m(kk,null);case"folder":return m(Dk,null);case"video":return m(Fk,null);default:return m("img",{src:e,alt:t,referrerPolicy:"no-referrer",loading:"lazy",width:16,height:16})}}function Ik(s){var e,t;let{file:i,toggleCheckbox:n,className:r,isDisabled:o,restrictionError:a,showTitles:l,children:c=null,i18n:u}=s;return m("li",{className:r,title:o&&a?a:void 0},m("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox uppy-ProviderBrowserItem-checkbox--grid",onChange:n,name:"listitem",id:i.id,checked:i.status==="checked",disabled:o,"data-uppy-super-focusable":!0}),m("label",{htmlFor:i.id,"aria-label":(e=i.data.name)!=null?e:u("unnamed"),className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},m(Eo,{itemIconString:i.data.thumbnail||i.data.icon}),l&&((t=i.data.name)!=null?t:u("unnamed")),c))}var Qm=Ik;function eg(s){var e,t,i;let{file:n,openFolder:r,className:o,isDisabled:a,restrictionError:l,toggleCheckbox:c,showTitles:u,i18n:h}=s;return m("li",{className:o,title:n.status!=="checked"&&l?l:void 0},m("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox",onChange:c,name:"listitem",id:n.id,checked:n.status==="checked","aria-label":n.data.isFolder?h("allFilesFromFolderNamed",{name:(e=n.data.name)!=null?e:h("unnamed")}):null,disabled:a,"data-uppy-super-focusable":!0}),n.data.isFolder?m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner",onClick:()=>r(n.id),"aria-label":h("openFolderNamed",{name:(t=n.data.name)!=null?t:h("unnamed")})},m("div",{className:"uppy-ProviderBrowserItem-iconWrap"},m(Eo,{itemIconString:n.data.icon})),u&&n.data.name?m("span",null,n.data.name):h("unnamed")):m("label",{htmlFor:n.id,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},m("div",{className:"uppy-ProviderBrowserItem-iconWrap"},m(Eo,{itemIconString:n.data.icon})),u&&((i=n.data.name)!=null?i:h("unnamed"))))}function tg(s){let{viewType:e,toggleCheckbox:t,showTitles:i,i18n:n,openFolder:r,file:o}=s,a=o.type==="folder"?null:o.restrictionError,l=!!a&&o.status!=="checked",c={file:o,openFolder:r,toggleCheckbox:t,i18n:n,viewType:e,showTitles:i,className:(0,r1.default)("uppy-ProviderBrowserItem",{"uppy-ProviderBrowserItem--disabled":l},{"uppy-ProviderBrowserItem--noPreview":o.data.icon==="video"},{"uppy-ProviderBrowserItem--is-checked":o.status==="checked"},{"uppy-ProviderBrowserItem--is-partial":o.status==="partial"}),isDisabled:l,restrictionError:a};switch(e){case"grid":return m(Qm,c);case"list":return m(eg,c);case"unsplash":return m(Qm,c,m("a",{href:`${o.data.author.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",className:"uppy-ProviderBrowserItem-author",tabIndex:-1},o.data.author.name));default:throw new Error(`There is no such type ${e}`)}}function Rk(s){let{displayedPartialTree:e,viewType:t,toggleCheckbox:i,handleScroll:n,showTitles:r,i18n:o,isLoading:a,openFolder:l,noResultsLabel:c,virtualList:u}=s,[h,f]=es(!1);if(Ps(()=>{let v=S=>{S.key==="Shift"&&f(!1)},w=S=>{S.key==="Shift"&&f(!0)};return document.addEventListener("keyup",v),document.addEventListener("keydown",w),()=>{document.removeEventListener("keyup",v),document.removeEventListener("keydown",w)}},[]),a)return m("div",{className:"uppy-Provider-loading"},typeof a=="string"?a:o("loading"));if(e.length===0)return m("div",{className:"uppy-Provider-empty"},c);let p=v=>m(tg,{viewType:t,toggleCheckbox:w=>{var S;w.stopPropagation(),w.preventDefault(),(S=document.getSelection())==null||S.removeAllRanges(),i(v,h)},showTitles:r,i18n:o,openFolder:l,file:v});return u?m("div",{className:"uppy-ProviderBrowser-body"},m("ul",{className:"uppy-ProviderBrowser-list"},m(Ku,{data:e,renderRow:p,rowHeight:31}))):m("div",{className:"uppy-ProviderBrowser-body"},m("ul",{className:"uppy-ProviderBrowser-list",onScroll:n,role:"listbox",tabIndex:-1},e.map(p)))}var Ju=Rk;var Nk=(s,e,t,i,n)=>{let r=e.filter(p=>p.isFolder===!0),o=e.filter(p=>p.isFolder===!1),a=t.type==="folder"&&t.status==="checked",l=r.map(p=>({type:"folder",id:p.requestPath,cached:!1,nextPagePath:null,status:a?"checked":"unchecked",parentId:t.id,data:p})),c=o.map(p=>{let v=n(p);return{type:"file",id:p.requestPath,restrictionError:v,status:a&&!v?"checked":"unchecked",parentId:t.id,data:p}}),u={...t,cached:!0,nextPagePath:i};return[...s.map(p=>p.id===u.id?u:p),...l,...c]},o1=Nk;var Bk=(s,e,t,i,n)=>{let r=s.find(v=>v.id===e),o=t.filter(v=>v.isFolder===!0),a=t.filter(v=>v.isFolder===!1),l={...r,nextPagePath:i},c=s.map(v=>v.id===l.id?l:v),u=l.type==="folder"&&l.status==="checked",h=o.map(v=>({type:"folder",id:v.requestPath,cached:!1,nextPagePath:null,status:u?"checked":"unchecked",parentId:l.id,data:v})),f=a.map(v=>{let w=n(v);return{type:"file",id:v.requestPath,restrictionError:w,status:u&&!w?"checked":"unchecked",parentId:l.id,data:v}});return[...c,...h,...f]},a1=Bk;var zk=s=>s.map(e=>({...e})),Zu=zk;var ig=(s,e,t)=>{s.filter(n=>n.type!=="root"&&n.parentId===e).forEach(n=>{n.status=t&&!(n.type==="file"&&n.restrictionError)?"checked":"unchecked",ig(s,n.id,t)})},sg=(s,e)=>{let t=s.find(o=>o.id===e);if(t.type==="root")return;let i=s.filter(o=>o.type!=="root"&&o.parentId===t.id&&!(o.type==="file"&&o.restrictionError)),n=i.every(o=>o.status==="checked"),r=i.every(o=>o.status==="unchecked");n?t.status="checked":r?t.status="unchecked":t.status="partial",sg(s,t.parentId)},$k=(s,e)=>{let t=Zu(s);if(e.length>=2){let i=t.filter(n=>n.type!=="root"&&e.includes(n.id));i.forEach(n=>{n.type==="file"?n.status=n.restrictionError?"unchecked":"checked":n.status="checked"}),i.forEach(n=>{ig(t,n.id,!0)}),sg(t,i[0].parentId)}else{let i=t.find(n=>n.id===e[0]);i.status=i.status==="checked"?"unchecked":"checked",ig(t,i.id,i.status==="checked"),sg(t,i.parentId)}return t},l1=$k;var rg=Ve(u1(),1);var il=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},og=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},d1=s=>globalThis.DOMException===void 0?new og(s):new DOMException(s),h1=s=>{let e=s.reason===void 0?d1("This operation was aborted."):s.reason;return e instanceof Error?e:d1(e)};function ag(s,e){let{milliseconds:t,fallback:i,message:n,customTimers:r={setTimeout,clearTimeout}}=e,o,l=new Promise((c,u)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(e.signal){let{signal:f}=e;f.aborted&&u(h1(f));let p=()=>{u(h1(f))};f.addEventListener("abort",p,{once:!0}),s.finally(()=>{f.removeEventListener("abort",p)})}if(t===Number.POSITIVE_INFINITY){s.then(c,u);return}let h=new il;o=r.setTimeout.call(void 0,()=>{if(i){try{c(i())}catch(f){u(f)}return}typeof s.cancel=="function"&&s.cancel(),n===!1?c():n instanceof Error?u(n):(h.message=n??`Promise timed out after ${t} milliseconds`,u(h))},t),(async()=>{try{c(await s)}catch(f){u(f)}})()}).finally(()=>{l.clear()});return l.clear=()=>{r.clearTimeout.call(void 0,o),o=void 0},l}function lg(s,e,t){let i=0,n=s.length;for(;n>0;){let r=Math.trunc(n/2),o=i+r;t(s[o],e)<=0?(i=++o,n-=r+1):n=r}return i}var sl=class{#e=[];enqueue(e,t){t={priority:0,...t};let i={priority:t.priority,run:e};if(this.size&&this.#e[this.size-1].priority>=t.priority){this.#e.push(i);return}let n=lg(this.#e,i,(r,o)=>o.priority-r.priority);this.#e.splice(n,0,i)}dequeue(){return this.#e.shift()?.run}filter(e){return this.#e.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this.#e.length}};var nl=class extends rg.default{#e;#t;#i=0;#l;#o;#a=0;#s;#u;#n;#m;#r=0;#h;#c;#g;timeout;constructor(e){if(super(),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:sl,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#e=e.carryoverConcurrencyCount,this.#t=e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,this.#l=e.intervalCap,this.#o=e.interval,this.#n=new e.queueClass,this.#m=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#g=e.throwOnTimeout===!0,this.#c=e.autoStart===!1}get#v(){return this.#t||this.#i<this.#l}get#d(){return this.#r<this.#h}#y(){this.#r--,this.#f(),this.emit("next")}#p(){this.#A(),this.#b(),this.#u=void 0}get#w(){let e=Date.now();if(this.#s===void 0){let t=this.#a-e;if(t<0)this.#i=this.#e?this.#r:0;else return this.#u===void 0&&(this.#u=setTimeout(()=>{this.#p()},t)),!0}return!1}#f(){if(this.#n.size===0)return this.#s&&clearInterval(this.#s),this.#s=void 0,this.emit("empty"),this.#r===0&&this.emit("idle"),!1;if(!this.#c){let e=!this.#w;if(this.#v&&this.#d){let t=this.#n.dequeue();return t?(this.emit("active"),t(),e&&this.#b(),!0):!1}}return!1}#b(){this.#t||this.#s!==void 0||(this.#s=setInterval(()=>{this.#A()},this.#o),this.#a=Date.now()+this.#o)}#A(){this.#i===0&&this.#r===0&&this.#s&&(clearInterval(this.#s),this.#s=void 0),this.#i=this.#e?this.#r:0,this.#E()}#E(){for(;this.#f(););}get concurrency(){return this.#h}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#h=e,this.#E()}async#T(e){return new Promise((t,i)=>{e.addEventListener("abort",()=>{i(e.reason)},{once:!0})})}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:this.#g,...t},new Promise((i,n)=>{this.#n.enqueue(async()=>{this.#r++,this.#i++;try{t.signal?.throwIfAborted();let r=e({signal:t.signal});t.timeout&&(r=ag(Promise.resolve(r),{milliseconds:t.timeout})),t.signal&&(r=Promise.race([r,this.#T(t.signal)]));let o=await r;i(o),this.emit("completed",o)}catch(r){if(r instanceof il&&!t.throwOnTimeout){i();return}n(r),this.emit("error",r)}finally{this.#y()}},t),this.emit("add"),this.#f()})}async addAll(e,t){return Promise.all(e.map(async i=>this.add(i,t)))}start(){return this.#c?(this.#c=!1,this.#E(),this):this}pause(){this.#c=!0}clear(){this.#n=new this.#m}async onEmpty(){this.#n.size!==0&&await this.#S("empty")}async onSizeLessThan(e){this.#n.size<e||await this.#S("next",()=>this.#n.size<e)}async onIdle(){this.#r===0&&this.#n.size===0||await this.#S("idle")}async#S(e,t){return new Promise(i=>{let n=()=>{t&&!t()||(this.off(e,n),i())};this.on(e,n)})}get size(){return this.#n.size}sizeBy(e){return this.#n.filter(e).length}get pending(){return this.#r}get isPaused(){return this.#c}};var p1=async(s,e,t,i,n)=>{let r=[],o=t.cached?t.nextPagePath:t.id;for(;o;){let h=await i(o);r=r.concat(h.items),o=h.nextPagePath}let a=r.filter(h=>h.isFolder===!0),l=r.filter(h=>h.isFolder===!1),c=a.map(h=>({type:"folder",id:h.requestPath,cached:!1,nextPagePath:null,status:"checked",parentId:t.id,data:h})),u=l.map(h=>{let f=n(h);return{type:"file",id:h.requestPath,restrictionError:f,status:f?"unchecked":"checked",parentId:t.id,data:h}});t.cached=!0,t.nextPagePath=null,e.push(...u,...c),c.forEach(async h=>{s.add(()=>p1(s,e,h,i,n))})},jk=async(s,e,t,i)=>{let n=new nl({concurrency:6}),r=Zu(s);return r.filter(a=>a.type==="folder"&&a.status==="checked"&&(a.cached===!1||a.nextPagePath)).forEach(a=>{n.add(()=>p1(n,r,a,e,t))}),n.on("completed",()=>{let a=r.filter(l=>l.type==="file"&&l.status==="checked").length;i(a)}),await n.onIdle(),r},f1=jk;var or={afterOpenFolder:o1,afterScrollFolder:a1,afterToggleCheckbox:l1,afterFill:f1};var Vk=s=>{let{scrollHeight:e,scrollTop:t,offsetHeight:i}=s.target;return e-(t+i)<50},ed=Vk;var qk=s=>e=>{if(!e.isAuthError){if(e.name==="AbortError"){s.log("Aborting request","warning");return}s.log(e,"error"),e.name==="UserFacingApiError"&&s.info({message:s.i18n("companionError"),details:s.i18n(e.message)},"warning",5e3)}},_s=qk;var Wk=(s,e,t,i)=>{let n=e.findIndex(r=>r.id===i);if(n!==-1&&t){let r=e.findIndex(a=>a.id===s);return e.slice(Math.min(n,r),Math.max(n,r)+1).map(a=>a.id)}return[s]},td=Wk;function Gk(s){let{searchString:e,setSearchString:t,submitSearchString:i,wrapperClassName:n,inputClassName:r,inputLabel:o,clearSearchLabel:a="",showButton:l=!1,buttonLabel:c="",buttonCSSClassName:u=""}=s,h=v=>{t(v.target.value)},f=wo(v=>{v.preventDefault(),i()},[i]),[p]=es(()=>{let v=document.createElement("form");return v.setAttribute("tabindex","-1"),v.id=an(),v});return Ps(()=>(document.body.appendChild(p),p.addEventListener("submit",f),()=>{p.removeEventListener("submit",f),document.body.removeChild(p)}),[p,f]),m("section",{className:n},m("input",{className:`uppy-u-reset ${r}`,type:"search","aria-label":o,placeholder:o,value:e,onInput:h,form:p.id,"data-uppy-super-focusable":!0}),!l&&m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-ProviderBrowser-searchFilterIcon",width:"12",height:"12",viewBox:"0 0 12 12"},m("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})),!l&&e&&m("button",{className:"uppy-u-reset uppy-ProviderBrowser-searchFilterReset",type:"button","aria-label":a,title:a,onClick:()=>t("")},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",viewBox:"0 0 19 19"},m("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))),l&&m("button",{className:`uppy-u-reset uppy-c-btn uppy-c-btn-primary ${u}`,type:"submit",form:p.id},c))}var rl=Gk;var g1=Ve(Rt(),1);var Yk=s=>s.filter(t=>t.type==="file"&&t.status==="checked"?!0:t.type==="folder"&&t.status==="checked"?!s.some(n=>n.type!=="root"&&n.parentId===t.id):!1).length,m1=Yk;function ol(s){let{cancelSelection:e,donePicking:t,i18n:i,partialTree:n,validateAggregateRestrictions:r}=s,o=rr(()=>r(n),[n,r]),a=rr(()=>m1(n),[n]);return a===0?null:m("div",{className:"uppy-ProviderBrowser-footer"},m("div",{className:"uppy-ProviderBrowser-footer-buttons"},m("button",{className:(0,g1.default)("uppy-u-reset uppy-c-btn uppy-c-btn-primary",{"uppy-c-btn--disabled":o}),disabled:!!o,onClick:t,type:"button"},i("selectX",{smart_count:a})),m("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link",onClick:e,type:"button"},i("cancel"))),o&&m("div",{className:"uppy-ProviderBrowser-footer-error"},o))}var Xk=(s,e,t)=>{var i,n;return{id:s.id,source:e.id,name:s.name||s.id,type:s.mimeType,isRemote:!0,data:s,preview:s.thumbnail||void 0,meta:{authorName:(i=s.author)==null?void 0:i.name,authorUrl:(n=s.author)==null?void 0:n.url,relativePath:s.relDirPath||null,absolutePath:s.absDirPath},body:{fileId:s.id},remote:{companionUrl:e.opts.companionUrl,url:`${t.fileUrl(s.requestPath)}`,body:{fileId:s.id},providerName:t.name,provider:t.provider,requestClientId:t.provider}}},v1=Xk;var Kk=(s,e,t)=>{let i=s.map(o=>v1(o,e,t)),n=[],r=[];i.forEach(o=>{e.uppy.checkIfFileAlreadyExists(Tu(o,e.uppy.getID()))?r.push(o):n.push(o)}),n.length>0&&e.uppy.info(e.uppy.i18n("addedNumFiles",{numFiles:n.length})),r.length>0&&e.uppy.info(`Not adding ${r.length} files because they already exist`),e.uppy.addFiles(n)},id=Kk;var b1=(s,e,t)=>{let i=e===null?"null":e;if(t[i])return t[i];let n=s.find(o=>o.id===e);if(n.type==="root")return[];let r=[...b1(s,n.parentId,t),n];return t[i]=r,r},Jk=s=>{let e=Object.create(null);return s.filter(n=>n.type==="file"&&n.status==="checked").map(n=>{let r=b1(s,n.id,e),o=r.findIndex(u=>u.type==="folder"&&u.status==="checked"),a=r.slice(o),l=`/${r.map(u=>u.data.name).join("/")}`,c=a.length===1?void 0:a.map(u=>u.data.name).join("/");return{...n.data,absDirPath:l,relDirPath:c}})},sd=Jk;var Zk=(s,e)=>{let t=s.find(n=>n.id===e),i=[];for(;i=[t,...i],t.type!=="root";){let n=t.parentId;t=s.find(r=>r.id===n)}return i},y1=Zk;function un(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var Qk=0;function E1(s){return"__private_"+Qk+++"_"+s}var eD={version:"4.0.2"};function al(){return m("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},m("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}var w1=s=>({authenticated:void 0,partialTree:[{type:"root",id:s,cached:!1,nextPagePath:null}],currentFolderId:s,searchString:"",didFirstRender:!1,username:null,loading:!1}),ar=E1("abortController"),Ni=E1("withAbort"),So=class{constructor(e,t){Object.defineProperty(this,Ni,{value:tD}),this.isHandlingScroll=!1,this.lastCheckbox=null,Object.defineProperty(this,ar,{writable:!0,value:void 0}),this.validateSingleFile=n=>{let r=Za(n);return this.plugin.uppy.validateSingleFile(r)},this.getDisplayedPartialTree=()=>{let{partialTree:n,currentFolderId:r,searchString:o}=this.plugin.getPluginState(),a=n.filter(c=>c.type!=="root"&&c.parentId===r);return o===""?a:a.filter(c=>{var u;return((u=c.data.name)!=null?u:this.plugin.uppy.i18n("unnamed")).toLowerCase().indexOf(o.toLowerCase())!==-1})},this.validateAggregateRestrictions=n=>{let o=n.filter(a=>a.type==="file"&&a.status==="checked").map(a=>a.data);return this.plugin.uppy.validateAggregateRestrictions(o)},this.plugin=e,this.provider=t.provider;let i={viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0,loadAllFiles:!1,virtualList:!1};this.opts={...i,...t},this.openFolder=this.openFolder.bind(this),this.logout=this.logout.bind(this),this.handleAuth=this.handleAuth.bind(this),this.handleScroll=this.handleScroll.bind(this),this.resetPluginState=this.resetPluginState.bind(this),this.donePicking=this.donePicking.bind(this),this.render=this.render.bind(this),this.cancelSelection=this.cancelSelection.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.resetPluginState(),this.plugin.uppy.on("dashboard:close-panel",this.resetPluginState),this.plugin.uppy.registerRequestClient(this.provider.provider,this.provider)}resetPluginState(){this.plugin.setPluginState(w1(this.plugin.rootFolderId))}tearDown(){}setLoading(e){this.plugin.setPluginState({loading:e})}cancelSelection(){let{partialTree:e}=this.plugin.getPluginState(),t=e.map(i=>i.type==="root"?i:{...i,status:"unchecked"});this.plugin.setPluginState({partialTree:t})}async openFolder(e){this.lastCheckbox=null;let{partialTree:t}=this.plugin.getPluginState(),i=t.find(n=>n.id===e);if(i.cached){this.plugin.setPluginState({currentFolderId:e,searchString:""});return}this.setLoading(!0),await un(this,Ni)[Ni](async n=>{let r=e,o=[];do{let{username:l,nextPagePath:c,items:u}=await this.provider.list(r,{signal:n});this.plugin.setPluginState({username:l}),r=c,o=o.concat(u),this.setLoading(this.plugin.uppy.i18n("loadedXFiles",{numFiles:o.length}))}while(this.opts.loadAllFiles&&r);let a=or.afterOpenFolder(t,o,i,r,this.validateSingleFile);this.plugin.setPluginState({partialTree:a,currentFolderId:e,searchString:""})}).catch(_s(this.plugin.uppy)),this.setLoading(!1)}async logout(){await un(this,Ni)[Ni](async e=>{let t=await this.provider.logout({signal:e});if(t.ok){if(!t.revoked){let i=this.plugin.uppy.i18n("companionUnauthorizeHint",{provider:this.plugin.title,url:t.manual_revoke_url});this.plugin.uppy.info(i,"info",7e3)}this.plugin.setPluginState({...w1(this.plugin.rootFolderId),authenticated:!1})}}).catch(_s(this.plugin.uppy))}async handleAuth(e){await un(this,Ni)[Ni](async t=>{this.setLoading(!0),await this.provider.login({authFormData:e,signal:t}),this.plugin.setPluginState({authenticated:!0}),await Promise.all([this.provider.fetchPreAuthToken(),this.openFolder(this.plugin.rootFolderId)])}).catch(_s(this.plugin.uppy)),this.setLoading(!1)}async handleScroll(e){let{partialTree:t,currentFolderId:i}=this.plugin.getPluginState(),n=t.find(r=>r.id===i);ed(e)&&!this.isHandlingScroll&&n.nextPagePath&&(this.isHandlingScroll=!0,await un(this,Ni)[Ni](async r=>{let{nextPagePath:o,items:a}=await this.provider.list(n.nextPagePath,{signal:r}),l=or.afterScrollFolder(t,i,a,o,this.validateSingleFile);this.plugin.setPluginState({partialTree:l})}).catch(_s(this.plugin.uppy)),this.isHandlingScroll=!1)}async donePicking(){let{partialTree:e}=this.plugin.getPluginState();this.setLoading(!0),await un(this,Ni)[Ni](async t=>{let i=await or.afterFill(e,o=>this.provider.list(o,{signal:t}),this.validateSingleFile,o=>{this.setLoading(this.plugin.uppy.i18n("addedNumFiles",{numFiles:o}))});if(this.validateAggregateRestrictions(i)){this.plugin.setPluginState({partialTree:i});return}let r=sd(i);id(r,this.plugin,this.provider),this.resetPluginState()}).catch(_s(this.plugin.uppy)),this.setLoading(!1)}toggleCheckbox(e,t){let{partialTree:i}=this.plugin.getPluginState(),n=td(e.id,this.getDisplayedPartialTree(),t,this.lastCheckbox),r=or.afterToggleCheckbox(i,n);this.plugin.setPluginState({partialTree:r}),this.lastCheckbox=e.id}render(e,t){t===void 0&&(t={});let{didFirstRender:i}=this.plugin.getPluginState(),{i18n:n}=this.plugin.uppy;i||(this.plugin.setPluginState({didFirstRender:!0}),this.provider.fetchPreAuthToken(),this.openFolder(this.plugin.rootFolderId));let r={...this.opts,...t},{authenticated:o,loading:a}=this.plugin.getPluginState(),l=this.plugin.icon||al;if(o===!1)return m(Gm,{pluginName:this.plugin.title,pluginIcon:l,handleAuth:this.handleAuth,i18n:this.plugin.uppy.i18nArray,renderForm:r.renderAuthForm,loading:a});let{partialTree:c,currentFolderId:u,username:h,searchString:f}=this.plugin.getPluginState(),p=y1(c,u);return m("div",{className:(0,S1.default)("uppy-ProviderBrowser",`uppy-ProviderBrowser-viewType--${r.viewType}`)},m(Km,{showBreadcrumbs:r.showBreadcrumbs,openFolder:this.openFolder,breadcrumbs:p,pluginIcon:l,title:this.plugin.title,logout:this.logout,username:h,i18n:n}),r.showFilter&&m(rl,{searchString:f,setSearchString:v=>{this.plugin.setPluginState({searchString:v})},submitSearchString:()=>{},inputLabel:n("filter"),clearSearchLabel:n("resetFilter"),wrapperClassName:"uppy-ProviderBrowser-searchFilter",inputClassName:"uppy-ProviderBrowser-searchFilterInput"}),m(Ju,{toggleCheckbox:this.toggleCheckbox,displayedPartialTree:this.getDisplayedPartialTree(),openFolder:this.openFolder,virtualList:r.virtualList,noResultsLabel:n("noFilesFound"),handleScroll:this.handleScroll,viewType:r.viewType,showTitles:r.showTitles,i18n:this.plugin.uppy.i18n,isLoading:a}),m(ol,{partialTree:c,donePicking:this.donePicking,cancelSelection:this.cancelSelection,i18n:n,validateAggregateRestrictions:this.validateAggregateRestrictions}))}};async function tD(s){var e;(e=un(this,ar)[ar])==null||e.abort();let t=new AbortController;un(this,ar)[ar]=t;let i=()=>{t.abort()};try{this.plugin.uppy.on("dashboard:close-panel",i),this.plugin.uppy.on("cancel-all",i),await s(t.signal)}finally{this.plugin.uppy.off("dashboard:close-panel",i),this.plugin.uppy.off("cancel-all",i),un(this,ar)[ar]=void 0}}So.VERSION=eD.version;var A1=Ve(Rt(),1);var iD={version:"4.0.2"},sD={loading:!1,searchString:"",partialTree:[{type:"root",id:null,cached:!1,nextPagePath:null}],currentFolderId:null,isInputMode:!0},Ao=class{constructor(e,t){this.isHandlingScroll=!1,this.lastCheckbox=null,this.validateSingleFile=n=>{let r=Za(n);return this.plugin.uppy.validateSingleFile(r)},this.getDisplayedPartialTree=()=>{let{partialTree:n}=this.plugin.getPluginState();return n.filter(r=>r.type!=="root")},this.setSearchString=n=>{this.plugin.setPluginState({searchString:n}),n===""&&this.plugin.setPluginState({partialTree:[]})},this.validateAggregateRestrictions=n=>{let o=n.filter(a=>a.type==="file"&&a.status==="checked").map(a=>a.data);return this.plugin.uppy.validateAggregateRestrictions(o)},this.plugin=e,this.provider=t.provider;let i={viewType:"grid",showTitles:!0,showFilter:!0};this.opts={...i,...t},this.setSearchString=this.setSearchString.bind(this),this.search=this.search.bind(this),this.resetPluginState=this.resetPluginState.bind(this),this.handleScroll=this.handleScroll.bind(this),this.donePicking=this.donePicking.bind(this),this.cancelSelection=this.cancelSelection.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.render=this.render.bind(this),this.resetPluginState(),this.plugin.uppy.on("dashboard:close-panel",this.resetPluginState),this.plugin.uppy.registerRequestClient(this.provider.provider,this.provider)}tearDown(){}setLoading(e){this.plugin.setPluginState({loading:e})}resetPluginState(){this.plugin.setPluginState(sD)}cancelSelection(){let{partialTree:e}=this.plugin.getPluginState(),t=e.map(i=>i.type==="root"?i:{...i,status:"unchecked"});this.plugin.setPluginState({partialTree:t})}async search(){let{searchString:e}=this.plugin.getPluginState();if(e!==""){this.setLoading(!0);try{let t=await this.provider.search(e),i=[{type:"root",id:null,cached:!1,nextPagePath:t.nextPageQuery},...t.items.map(n=>({type:"file",id:n.requestPath,status:"unchecked",parentId:null,data:n}))];this.plugin.setPluginState({partialTree:i,isInputMode:!1})}catch(t){_s(this.plugin.uppy)(t)}this.setLoading(!1)}}async handleScroll(e){let{partialTree:t,searchString:i}=this.plugin.getPluginState(),n=t.find(r=>r.type==="root");if(ed(e)&&!this.isHandlingScroll&&n.nextPagePath){this.isHandlingScroll=!0;try{let r=await this.provider.search(i,n.nextPagePath),o={...n,nextPagePath:r.nextPageQuery},a=t.filter(c=>c.type!=="root"),l=[o,...a,...r.items.map(c=>({type:"file",id:c.requestPath,status:"unchecked",parentId:null,data:c}))];this.plugin.setPluginState({partialTree:l})}catch(r){_s(this.plugin.uppy)(r)}this.isHandlingScroll=!1}}async donePicking(){let{partialTree:e}=this.plugin.getPluginState(),t=sd(e);id(t,this.plugin,this.provider),this.resetPluginState()}toggleCheckbox(e,t){let{partialTree:i}=this.plugin.getPluginState(),n=td(e.id,this.getDisplayedPartialTree(),t,this.lastCheckbox),r=or.afterToggleCheckbox(i,n);this.plugin.setPluginState({partialTree:r}),this.lastCheckbox=e.id}render(e,t){t===void 0&&(t={});let{isInputMode:i,searchString:n,loading:r,partialTree:o}=this.plugin.getPluginState(),{i18n:a}=this.plugin.uppy,l={...this.opts,...t};return i?m(rl,{searchString:n,setSearchString:this.setSearchString,submitSearchString:this.search,inputLabel:a("enterTextToSearch"),buttonLabel:a("searchImages"),wrapperClassName:"uppy-SearchProvider",inputClassName:"uppy-c-textInput uppy-SearchProvider-input",showButton:!0,buttonCSSClassName:"uppy-SearchProvider-searchButton"}):m("div",{className:(0,A1.default)("uppy-ProviderBrowser",`uppy-ProviderBrowser-viewType--${l.viewType}`)},l.showFilter&&m(rl,{searchString:n,setSearchString:this.setSearchString,submitSearchString:this.search,inputLabel:a("search"),clearSearchLabel:a("resetSearch"),wrapperClassName:"uppy-ProviderBrowser-searchFilter",inputClassName:"uppy-ProviderBrowser-searchFilterInput"}),m(Ju,{toggleCheckbox:this.toggleCheckbox,displayedPartialTree:this.getDisplayedPartialTree(),handleScroll:this.handleScroll,openFolder:async()=>{},noResultsLabel:a("noSearchResults"),viewType:l.viewType,showTitles:l.showTitles,isLoading:r,i18n:a,virtualList:!1}),m(ol,{partialTree:o,donePicking:this.donePicking,cancelSelection:this.cancelSelection,i18n:a,validateAggregateRestrictions:this.validateAggregateRestrictions}))}};Ao.VERSION=iD.version;var T1=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function nD(s,e){return!!(s===e||T1(s)&&T1(e))}function rD(s,e){if(s.length!==e.length)return!1;for(var t=0;t<s.length;t++)if(!nD(s[t],e[t]))return!1;return!0}function cg(s,e){e===void 0&&(e=rD);var t=null;function i(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t&&t.lastThis===this&&e(n,t.lastArgs))return t.lastResult;var o=s.apply(this,n);return t={lastResult:o,lastArgs:n,lastThis:this},o}return i.clear=function(){t=null},i}var nd=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function ll(s,e){if(e){let t=s.querySelector(`[data-uppy-paneltype="${e}"]`);if(t)return t}return s}function x1(s,e){let t=e[0];t&&(t.focus(),s.preventDefault())}function oD(s,e){let t=e[e.length-1];t&&(t.focus(),s.preventDefault())}function aD(s){return s.contains(document.activeElement)}function ug(s,e,t){let i=ll(t,e),n=cn(i.querySelectorAll(nd)),r=n.indexOf(document.activeElement);aD(i)?s.shiftKey&&r===0?oD(s,n):!s.shiftKey&&r===n.length-1&&x1(s,n):x1(s,n)}function C1(s,e,t){e===null||ug(s,e,t)}var P1=Ve(Qf(),1);function dg(){let s=!1;return(0,P1.default)((t,i)=>{let n=ll(t,i),r=n.contains(document.activeElement);if(r&&s)return;let o=n.querySelector("[data-uppy-super-focusable]");if(!(r&&!o))if(o)o.focus({preventScroll:!0}),s=!0;else{let a=n.querySelector(nd);a?.focus({preventScroll:!0}),s=!1}},260)}var q1=Ve(Rt(),1);function hg(){let s=document.body;return!(!("draggable"in s)||!("ondragstart"in s&&"ondrop"in s)||!("FormData"in window)||!("FileReader"in window))}var L1=Ve(Rt(),1);function _1(s,e){if(s===e)return!0;if(!s||!e)return!1;let t=Object.keys(s),i=Object.keys(e),n=t.length;if(i.length!==n)return!1;for(let r=0;r<n;r++){let o=t[r];if(s[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}function cD(){return m("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},m("g",{fill:"#686DE0",fillRule:"evenodd"},m("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),m("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),m("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))}function uD(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},m("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))}function dD(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},m("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))}function hD(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},m("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))}function pD(){return m("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},m("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}function fD(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},m("g",{fill:"#A7AFB7",fillRule:"nonzero"},m("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),m("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))}function mD(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},m("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))}function lr(s){let e={color:"#838999",icon:fD()};if(!s)return e;let t=s.split("/")[0],i=s.split("/")[1];return t==="text"?{color:"#5a5e69",icon:mD()}:t==="image"?{color:"#686de0",icon:cD()}:t==="audio"?{color:"#068dbb",icon:uD()}:t==="video"?{color:"#19af67",icon:dD()}:t==="application"&&i==="pdf"?{color:"#e25149",icon:hD()}:t==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(i)!==-1?{color:"#00C469",icon:pD()}:e}function cl(s){let{file:e}=s;if(e.preview)return m("img",{className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});let{color:t,icon:i}=lr(e.type);return m("div",{className:"uppy-Dashboard-Item-previewIconWrap"},m("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:t}},i),m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},m("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}var gD=(s,e)=>(typeof e=="function"?e():e).filter(n=>n.id===s)[0].name;function ul(s){let{file:e,toggleFileCard:t,i18n:i,metaFields:n}=s,{missingRequiredMetaFields:r}=e;if(!(r!=null&&r.length))return null;let o=r.map(a=>gD(a,n)).join(", ");return m("div",{className:"uppy-Dashboard-Item-errorMessage"},i("missingRequiredMetaFields",{smart_count:r.length,fields:o})," ",m("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>t(!0,e.id)},i("editFile")))}function pg(s){let{file:e,i18n:t,toggleFileCard:i,metaFields:n,showLinkToFileUploadResult:r}=s,a=e.preview?"rgba(255, 255, 255, 0.5)":lr(e.type).color;return m("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:a}},r&&e.uploadURL&&m("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name},m("span",{hidden:!0},e.meta.name)),m(cl,{file:e}),m(ul,{file:e,i18n:t,toggleFileCard:i,metaFields:n}))}function vD(s){if(!s.isUploaded){if(s.error&&!s.hideRetryButton){s.uppy.retryUpload(s.file.id);return}s.resumableUploads&&!s.hidePauseResumeButton?s.uppy.pauseResume(s.file.id):s.individualCancellation&&!s.hideCancelButton&&s.uppy.removeFile(s.file.id)}}function M1(s){return s.isUploaded?s.i18n("uploadComplete"):s.error?s.i18n("retryUpload"):s.resumableUploads?s.file.isPaused?s.i18n("resumeUpload"):s.i18n("pauseUpload"):s.individualCancellation?s.i18n("cancelUpload"):""}function fg(s){return m("div",{className:"uppy-Dashboard-Item-progress"},m("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":M1(s),title:M1(s),onClick:()=>vD(s)},s.children))}function rd(s){let{children:e}=s;return m("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},e)}function mg(s){let{progress:e}=s,t=2*Math.PI*15;return m("g",null,m("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),m("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":t,"stroke-dashoffset":t-t/100*e}))}function gg(s){return!s.file.progress.uploadStarted||s.file.progress.percentage===void 0?null:s.isUploaded?m("div",{className:"uppy-Dashboard-Item-progress"},m("div",{className:"uppy-Dashboard-Item-progressIndicator"},m(rd,null,m("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),m("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})))):s.recoveredState?null:s.error&&!s.hideRetryButton?m(fg,s,m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},m("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),m("path",{d:"M7.9 3H10v2H7.9z"}),m("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),m("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):s.resumableUploads&&!s.hidePauseResumeButton?m(fg,s,m(rd,null,m(mg,{progress:s.file.progress.percentage}),s.file.isPaused?m("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):m("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},m("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),m("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):!s.resumableUploads&&s.individualCancellation&&!s.hideCancelButton?m(fg,s,m(rd,null,m(mg,{progress:s.file.progress.percentage}),m("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):m("div",{className:"uppy-Dashboard-Item-progress"},m("div",{className:"uppy-Dashboard-Item-progressIndicator"},m(rd,null,m(mg,{progress:s.file.progress.percentage}))))}var O1=Ve(xu(),1);var vg="...";function od(s,e){if(e===0)return"";if(s.length<=e)return s;if(e<=vg.length+1)return`${s.slice(0,e-1)}\u2026`;let t=e-vg.length,i=Math.ceil(t/2),n=Math.floor(t/2);return s.slice(0,i)+vg+s.slice(-n)}var bD=s=>{let{author:e,name:t}=s.file.meta;function i(){return s.isSingleFile&&s.containerHeight>=350?90:s.containerWidth<=352?35:s.containerWidth<=576?60:e?20:30}return m("div",{className:"uppy-Dashboard-Item-name",title:t},od(t,i()))},yD=s=>{var e;let{author:t}=s.file.meta,i=(e=s.file.remote)==null?void 0:e.providerName,n="\xB7";return t?m("div",{className:"uppy-Dashboard-Item-author"},m("a",{href:`${t.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer"},od(t.name,13)),i?m(Fragment,null,` ${n} `,i,` ${n} `):null):null},wD=s=>s.file.size&&m("div",{className:"uppy-Dashboard-Item-statusSize"},(0,O1.default)(s.file.size)),ED=s=>s.file.isGhost&&m("span",null," \u2022 ",m("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>s.toggleAddFilesPanel(!0)},s.i18n("reSelect"))),SD=s=>{let{file:e,onClick:t}=s;return e.error?m("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:t,type:"button"},"?"):null};function bg(s){let{file:e,i18n:t,toggleFileCard:i,metaFields:n,toggleAddFilesPanel:r,isSingleFile:o,containerHeight:a,containerWidth:l}=s;return m("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source},m("div",{className:"uppy-Dashboard-Item-fileName"},bD({file:e,isSingleFile:o,containerHeight:a,containerWidth:l}),m(SD,{file:e,onClick:()=>alert(e.error)})),m("div",{className:"uppy-Dashboard-Item-status"},yD({file:e}),wD({file:e}),ED({file:e,toggleAddFilesPanel:r,i18n:t})),m(ul,{file:e,i18n:t,toggleFileCard:i,metaFields:n}))}function yg(s,e){return e===void 0&&(e="Copy the URL below"),new Promise(t=>{let i=document.createElement("textarea");i.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),i.value=s,document.body.appendChild(i),i.select();let n=()=>{document.body.removeChild(i),window.prompt(e,s),t()};try{return document.execCommand("copy")?(document.body.removeChild(i),t()):n()}catch{return document.body.removeChild(i),n()}})}function AD(s){let{file:e,uploadInProgressOrComplete:t,metaFields:i,canEditFile:n,i18n:r,onClick:o}=s;return!t&&i&&i.length>0||!t&&n(e)?m("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":r("editFileWithFilename",{file:e.meta.name}),title:r("editFileWithFilename",{file:e.meta.name}),onClick:()=>o()},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},m("g",{fillRule:"evenodd"},m("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),m("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),m("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function TD(s){let{i18n:e,onClick:t,file:i}=s;return m("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:i.meta.name}),title:e("removeFile",{file:i.meta.name}),onClick:()=>t()},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},m("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),m("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}function xD(s){let{file:e,uppy:t,i18n:i}=s,n=r=>{yg(e.uploadURL,i("copyLinkToClipboardFallback")).then(()=>{t.log("Link copied to clipboard."),t.info(i("copyLinkToClipboardSuccess"),"info",3e3)}).catch(t.log).then(()=>r.target.focus({preventScroll:!0}))};return m("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":i("copyLink"),title:i("copyLink"),onClick:r=>n(r)},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},m("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function wg(s){let{uppy:e,file:t,uploadInProgressOrComplete:i,canEditFile:n,metaFields:r,showLinkToFileUploadResult:o,showRemoveButton:a,i18n:l,toggleFileCard:c,openFileEditor:u}=s;return m("div",{className:"uppy-Dashboard-Item-actionWrapper"},m(AD,{i18n:l,file:t,uploadInProgressOrComplete:i,canEditFile:n,metaFields:r,onClick:()=>{r&&r.length>0?c(!0,t.id):u(t)}}),o&&t.uploadURL?m(xD,{file:t,uppy:e,i18n:l}):null,a?m(TD,{i18n:l,file:t,onClick:()=>e.removeFile(t.id)}):null)}var dl=class extends Ot{componentDidMount(){let{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!_1(this.props,e)}componentDidUpdate(){let{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){let{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){let{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,i=!!e.progress.uploadComplete&&!t&&!e.error,n=!!e.progress.uploadStarted||!!t,r=e.progress.uploadStarted&&!e.progress.uploadComplete||t,o=e.error||!1,{isGhost:a}=e,l=(this.props.individualCancellation||!r)&&!i;i&&this.props.showRemoveButtonAfterComplete&&(l=!0);let c=(0,L1.default)({"uppy-Dashboard-Item":!0,"is-inprogress":r&&!this.props.recoveredState,"is-processing":t,"is-complete":i,"is-error":!!o,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":a});return m("div",{className:c,id:`uppy_${e.id}`,role:this.props.role},m("div",{className:"uppy-Dashboard-Item-preview"},m(pg,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),m(gg,{uppy:this.props.uppy,file:e,error:o,isUploaded:i,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),m("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},m(bg,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),m(wg,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:l,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:n,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}};function CD(s,e){let t=[],i=[];return s.forEach(n=>{i.length<e?i.push(n):(t.push(i),i=[n])}),i.length&&t.push(i),t}function Eg(s){let{id:e,i18n:t,uppy:i,files:n,resumableUploads:r,hideRetryButton:o,hidePauseResumeButton:a,hideCancelButton:l,showLinkToFileUploadResult:c,showRemoveButtonAfterComplete:u,metaFields:h,isSingleFile:f,toggleFileCard:p,handleRequestThumbnail:v,handleCancelThumbnail:w,recoveredState:S,individualCancellation:A,itemsPerRow:k,openFileEditor:D,canEditFile:R,toggleAddFilesPanel:$,containerWidth:U,containerHeight:Z}=s,K=k===1?71:200,ue=rr(()=>{let oe=(se,Q)=>Number(n[Q].isGhost)-Number(n[se].isGhost),he=Object.keys(n);return S&&he.sort(oe),CD(he,k)},[n,k,S]),X=oe=>m("div",{class:"uppy-Dashboard-filesInner",role:"presentation",key:oe[0]},oe.map(he=>m(dl,{key:he,uppy:i,id:e,i18n:t,resumableUploads:r,individualCancellation:A,hideRetryButton:o,hidePauseResumeButton:a,hideCancelButton:l,showLinkToFileUploadResult:c,showRemoveButtonAfterComplete:u,metaFields:h,recoveredState:S,isSingleFile:f,containerWidth:U,containerHeight:Z,toggleFileCard:p,handleRequestThumbnail:v,handleCancelThumbnail:w,role:"listitem",openFileEditor:D,canEditFile:R,toggleAddFilesPanel:$,file:n[he]})));return f?m("div",{class:"uppy-Dashboard-files"},X(ue[0])):m(Ku,{class:"uppy-Dashboard-files",role:"list",data:ue,renderRow:X,rowHeight:K})}var Sg=class extends Ot{constructor(){super(...arguments),this.fileInput=null,this.folderInput=null,this.mobilePhotoFileInput=null,this.mobileVideoFileInput=null,this.triggerFileInputClick=()=>{var e;(e=this.fileInput)==null||e.click()},this.triggerFolderInputClick=()=>{var e;(e=this.folderInput)==null||e.click()},this.triggerVideoCameraInputClick=()=>{var e;(e=this.mobileVideoFileInput)==null||e.click()},this.triggerPhotoCameraInputClick=()=>{var e;(e=this.mobilePhotoFileInput)==null||e.click()},this.onFileInputChange=e=>{this.props.handleInputChange(e),e.currentTarget.value=""},this.renderHiddenInput=(e,t)=>{var i;return m("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:(i=this.props.allowedFileTypes)==null?void 0:i.join(", "),ref:t})},this.renderHiddenCameraInput=(e,t,i)=>{let r={photo:"image/*",video:"video/*"}[e];return m("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:t,accept:r,ref:i})},this.renderMyDeviceAcquirer=()=>m("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick},m("div",{className:"uppy-DashboardTab-inner"},m("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},m("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"}))),m("div",{className:"uppy-DashboardTab-name"},this.props.i18n("myDevice")))),this.renderPhotoCamera=()=>m("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera"},m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick},m("div",{className:"uppy-DashboardTab-inner"},m("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},m("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"}))),m("div",{className:"uppy-DashboardTab-name"},this.props.i18n("takePictureBtn")))),this.renderVideoCamera=()=>m("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera"},m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick},m("div",{className:"uppy-DashboardTab-inner"},m("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32"},m("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "}))),m("div",{className:"uppy-DashboardTab-name"},this.props.i18n("recordVideoBtn")))),this.renderBrowseButton=(e,t)=>{let i=this.props.acquirers.length;return m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:t,"data-uppy-super-focusable":i===0},e)},this.renderDropPasteBrowseTagline=e=>{let t=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),i=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),n=this.props.fileManagerSelectionType,r=n.charAt(0).toUpperCase()+n.slice(1);return m("div",{class:"uppy-Dashboard-AddFiles-title"},this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${r}`,{browseFiles:t,browseFolders:i,browse:t}):this.props.i18nArray(`dropPaste${r}`,{browseFiles:t,browseFolders:i,browse:t}))},this.renderAcquirer=e=>{var t;return m("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id},m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":((t=this.props.activePickerPanel)==null?void 0:t.id)===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id)},m("div",{className:"uppy-DashboardTab-inner"},e.icon()),m("div",{className:"uppy-DashboardTab-name"},e.name)))},this.renderAcquirers=e=>{let t=[...e],i=t.splice(e.length-2,e.length);return m(Zt,null,t.map(n=>this.renderAcquirer(n)),m("span",{role:"presentation",style:{"white-space":"nowrap"}},i.map(n=>this.renderAcquirer(n))))},this.renderSourcesList=(e,t)=>{let{showNativePhotoCameraButton:i,showNativeVideoCameraButton:n}=this.props,r=[],o="myDevice";t||r.push({key:o,elements:this.renderMyDeviceAcquirer()}),i&&r.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),n&&r.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),r.push(...e.map(u=>({key:u.id,elements:this.renderAcquirer(u)}))),r.length===1&&r[0].key===o&&(r=[]);let l=[...r],c=l.splice(r.length-2,r.length);return m(Zt,null,this.renderDropPasteBrowseTagline(r.length),m("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},l.map(u=>{let{key:h,elements:f}=u;return m(Zt,{key:h},f)}),m("span",{role:"presentation",style:{"white-space":"nowrap"}},c.map(u=>{let{key:h,elements:f}=u;return m(Zt,{key:h},f)}))))}}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){let{i18nArray:e}=this.props,t=m("span",null,m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},m("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),m("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy")),i=e("poweredBy",{uppy:t});return m("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},i)}render(){let{showNativePhotoCameraButton:e,showNativeVideoCameraButton:t,nativeCameraFacingMode:i}=this.props;return m("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,n=>{this.fileInput=n}),this.renderHiddenInput(!0,n=>{this.folderInput=n}),e&&this.renderHiddenCameraInput("photo",i,n=>{this.mobilePhotoFileInput=n}),t&&this.renderHiddenCameraInput("video",i,n=>{this.mobileVideoFileInput=n}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),m("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&m("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()))}},ad=Sg;var k1=Ve(Rt(),1);var PD=s=>m("div",{className:(0,k1.default)("uppy-Dashboard-AddFilesPanel",s.className),"data-uppy-panelType":"AddFiles","aria-hidden":!s.showAddFilesPanel},m("div",{className:"uppy-DashboardContent-bar"},m("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},s.i18n("addingMoreFiles")),m("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>s.toggleAddFilesPanel(!1)},s.i18n("back"))),m(ad,s)),D1=PD;var F1=Ve(Rt(),1);function _D(s){let{tagName:e}=s.target;if(e==="INPUT"||e==="TEXTAREA"){s.stopPropagation();return}s.preventDefault(),s.stopPropagation()}var ts=_D;function MD(s){let{activePickerPanel:e,className:t,hideAllPanels:i,i18n:n,state:r,uppy:o}=s,a=yo(null);return m("div",{className:(0,F1.default)("uppy-DashboardContent-panel",t),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${e.id}`,onDragOver:ts,onDragLeave:ts,onDrop:ts,onPaste:ts},m("div",{className:"uppy-DashboardContent-bar"},m("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},n("importFrom",{name:e.name})),m("button",{className:"uppy-DashboardContent-back",type:"button",onClick:i},n("cancel"))),m("div",{ref:a,className:"uppy-DashboardContent-panelBody"},o.getPlugin(e.id).render(r,a.current)))}var I1=MD;var R1=Ve(Rt(),1);function OD(s){let e=s.files[s.fileCardFor],t=()=>{s.uppy.emit("file-editor:cancel",e),s.closeFileEditor()};return m("div",{className:(0,R1.default)("uppy-DashboardContent-panel",s.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},m("div",{className:"uppy-DashboardContent-bar"},m("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},s.i18nArray("editing",{file:m("span",{className:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),m("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t},s.i18n("cancel")),m("button",{className:"uppy-DashboardContent-save",type:"button",onClick:s.saveFileEditor},s.i18n("save"))),m("div",{className:"uppy-DashboardContent-panelBody"},s.editors.map(i=>s.uppy.getPlugin(i.id).render(s.state))))}var N1=OD;var is={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function LD(s,e,t,i){if(i===void 0&&(i={}),s)return is.STATE_ERROR;if(e)return is.STATE_COMPLETE;if(t)return is.STATE_PAUSED;let n=is.STATE_WAITING,r=Object.keys(i);for(let o=0;o<r.length;o++){let{progress:a}=i[r[o]];if(a.uploadStarted&&!a.uploadComplete)return is.STATE_UPLOADING;a.preprocess&&n!==is.STATE_UPLOADING&&(n=is.STATE_PREPROCESSING),a.postprocess&&n!==is.STATE_UPLOADING&&n!==is.STATE_PREPROCESSING&&(n=is.STATE_POSTPROCESSING)}return n}function kD(s){let{files:e,i18n:t,isAllComplete:i,isAllErrored:n,isAllPaused:r,inProgressNotPausedFiles:o,newFiles:a,processingFiles:l}=s;switch(LD(n,i,r,e)){case"uploading":return t("uploadingXFiles",{smart_count:o.length});case"preprocessing":case"postprocessing":return t("processingXFiles",{smart_count:l.length});case"paused":return t("uploadPaused");case"waiting":return t("xFilesSelected",{smart_count:a.length});case"complete":return t("uploadComplete");case"error":return t("error");default:}}function DD(s){let{i18n:e,isAllComplete:t,hideCancelButton:i,maxNumberOfFiles:n,toggleAddFilesPanel:r,uppy:o}=s,{allowNewUpload:a}=s;return a&&n&&(a=s.totalFileCount<s.maxNumberOfFiles),m("div",{className:"uppy-DashboardContent-bar"},!t&&!i?m("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>o.cancelAll()},e("cancel")):m("div",null),m("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},m(kD,s)),a?m("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>r(!0)},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},m("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),m("span",{className:"uppy-DashboardContent-addMoreCaption"},e("addMore"))):m("div",null))}var B1=DD;var z1=Ve(Rt(),1);function Ag(s){let{computedMetaFields:e,requiredMetaFields:t,updateMeta:i,form:n,formState:r}=s,o={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(a=>{let l=`uppy-Dashboard-FileCard-input-${a.id}`,c=t.includes(a.id);return m("fieldset",{key:a.id,className:"uppy-Dashboard-FileCard-fieldset"},m("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:l},a.name),a.render!==void 0?a.render({value:r[a.id],onChange:u=>i(u,a.id),fieldCSSClasses:o,required:c,form:n.id},m):m("input",{className:o.text,id:l,form:n.id,type:a.type||"text",required:c,value:r[a.id],placeholder:a.placeholder,onInput:u=>i(u.target.value,a.id),"data-uppy-super-focusable":!0}))})}function Tg(s){var e;let{files:t,fileCardFor:i,toggleFileCard:n,saveFileCard:r,metaFields:o,requiredMetaFields:a,openFileEditor:l,i18n:c,i18nArray:u,className:h,canEditFile:f}=s,p=()=>typeof o=="function"?o(t[i]):o,v=t[i],w=(e=p())!=null?e:[],S=f(v),A={};w.forEach(K=>{var ue;A[K.id]=(ue=v.meta[K.id])!=null?ue:""});let[k,D]=es(A),R=wo(K=>{K.preventDefault(),r(k,i)},[r,k,i]),$=(K,ue)=>{D({...k,[ue]:K})},U=()=>{n(!1)},[Z]=es(()=>{let K=document.createElement("form");return K.setAttribute("tabindex","-1"),K.id=an(),K});return Ps(()=>(document.body.appendChild(Z),Z.addEventListener("submit",R),()=>{Z.removeEventListener("submit",R),document.body.removeChild(Z)}),[Z,R]),m("div",{className:(0,z1.default)("uppy-Dashboard-FileCard",h),"data-uppy-panelType":"FileCard",onDragOver:ts,onDragLeave:ts,onDrop:ts,onPaste:ts},m("div",{className:"uppy-DashboardContent-bar"},m("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},u("editing",{file:m("span",{className:"uppy-DashboardContent-titleFile"},v.meta?v.meta.name:v.name)})),m("button",{className:"uppy-DashboardContent-back",type:"button",form:Z.id,title:c("finishEditingFile"),onClick:U},c("cancel"))),m("div",{className:"uppy-Dashboard-FileCard-inner"},m("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:lr(v.type).color}},m(cl,{file:v}),S&&m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:K=>{R(K),l(v)}},c("editImage"))),m("div",{className:"uppy-Dashboard-FileCard-info"},m(Ag,{computedMetaFields:w,requiredMetaFields:a,updateMeta:$,form:Z,formState:k})),m("div",{className:"uppy-Dashboard-FileCard-actions"},m("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:Z.id},c("saveChanges")),m("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:U,form:Z.id},c("cancel")))))}var H1=Ve(Rt(),1),To="uppy-transition-slideDownUp",$1=250;function FD(s){let{children:e}=s,[t,i]=es(null),[n,r]=es(""),o=yo(),a=yo(),l=yo(),c=()=>{r(`${To}-enter`),cancelAnimationFrame(l.current),clearTimeout(a.current),a.current=void 0,l.current=requestAnimationFrame(()=>{r(`${To}-enter ${To}-enter-active`),o.current=setTimeout(()=>{r("")},$1)})},u=()=>{r(`${To}-leave`),cancelAnimationFrame(l.current),clearTimeout(o.current),o.current=void 0,l.current=requestAnimationFrame(()=>{r(`${To}-leave ${To}-leave-active`),a.current=setTimeout(()=>{i(null),r("")},$1)})};return Ps(()=>{let h=Qi(e)[0];t!==h&&(h&&!t?c():t&&!h&&!a.current&&u(),i(h))},[e,t]),Ps(()=>()=>{clearTimeout(o.current),clearTimeout(a.current),cancelAnimationFrame(l.current)},[]),t?ku(t,{className:(0,H1.default)(n,t.props.className)}):null}var hl=FD;function xo(){return xo=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},xo.apply(null,arguments)}var U1=900,j1=700,xg=576,V1=330;function Cg(s){let e=s.totalFileCount===0,t=s.totalFileCount===1,i=s.containerWidth>xg,n=s.containerHeight>V1,r=(0,q1.default)({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":s.disabled,"uppy-Dashboard--animateOpenClose":s.animateOpenClose,"uppy-Dashboard--isClosing":s.isClosing,"uppy-Dashboard--isDraggingOver":s.isDraggingOver,"uppy-Dashboard--modal":!s.inline,"uppy-size--md":s.containerWidth>xg,"uppy-size--lg":s.containerWidth>j1,"uppy-size--xl":s.containerWidth>U1,"uppy-size--height-md":s.containerHeight>V1,"uppy-Dashboard--isAddFilesPanelVisible":s.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":s.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":s.singleFileFullScreen&&t&&n}),o=1;s.containerWidth>U1?o=5:s.containerWidth>j1?o=4:s.containerWidth>xg&&(o=3);let a=s.showSelectedFiles&&!e,l=s.recoveredState?Object.keys(s.recoveredState.files).length:null,c=s.files?Object.keys(s.files).filter(f=>s.files[f].isGhost).length:0,u=()=>c>0?s.i18n("recoveredXFiles",{smart_count:c}):s.i18n("recoveredAllFiles");return m("div",{className:r,"data-uppy-theme":s.theme,"data-uppy-num-acquirers":s.acquirers.length,"data-uppy-drag-drop-supported":!s.disableLocalFiles&&hg(),"aria-hidden":s.inline?"false":s.isHidden,"aria-disabled":s.disabled,"aria-label":s.inline?s.i18n("dashboardTitle"):s.i18n("dashboardWindowTitle"),onPaste:s.handlePaste,onDragOver:s.handleDragOver,onDragLeave:s.handleDragLeave,onDrop:s.handleDrop},m("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:s.handleClickOutside}),m("div",{className:"uppy-Dashboard-inner","aria-modal":!s.inline&&"true",role:s.inline?void 0:"dialog",style:{width:s.inline&&s.width?s.width:"",height:s.inline&&s.height?s.height:""}},s.inline?null:m("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":s.i18n("closeModal"),title:s.i18n("closeModal"),onClick:s.closeModal},m("span",{"aria-hidden":"true"},"\xD7")),m("div",{className:"uppy-Dashboard-innerWrap"},m("div",{className:"uppy-Dashboard-dropFilesHereHint"},s.i18n("dropHint")),a&&m(B1,s),l&&m("div",{className:"uppy-Dashboard-serviceMsg"},m("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},m("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},m("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),m("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),m("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),m("strong",{className:"uppy-Dashboard-serviceMsg-title"},s.i18n("sessionRestored")),m("div",{className:"uppy-Dashboard-serviceMsg-text"},u())),a?m(Eg,{id:s.id,i18n:s.i18n,uppy:s.uppy,files:s.files,resumableUploads:s.resumableUploads,hideRetryButton:s.hideRetryButton,hidePauseResumeButton:s.hidePauseResumeButton,hideCancelButton:s.hideCancelButton,showLinkToFileUploadResult:s.showLinkToFileUploadResult,showRemoveButtonAfterComplete:s.showRemoveButtonAfterComplete,metaFields:s.metaFields,toggleFileCard:s.toggleFileCard,handleRequestThumbnail:s.handleRequestThumbnail,handleCancelThumbnail:s.handleCancelThumbnail,recoveredState:s.recoveredState,individualCancellation:s.individualCancellation,openFileEditor:s.openFileEditor,canEditFile:s.canEditFile,toggleAddFilesPanel:s.toggleAddFilesPanel,isSingleFile:t,itemsPerRow:o,containerWidth:s.containerWidth,containerHeight:s.containerHeight}):m(ad,{i18n:s.i18n,i18nArray:s.i18nArray,acquirers:s.acquirers,handleInputChange:s.handleInputChange,maxNumberOfFiles:s.maxNumberOfFiles,allowedFileTypes:s.allowedFileTypes,showNativePhotoCameraButton:s.showNativePhotoCameraButton,showNativeVideoCameraButton:s.showNativeVideoCameraButton,nativeCameraFacingMode:s.nativeCameraFacingMode,showPanel:s.showPanel,activePickerPanel:s.activePickerPanel,disableLocalFiles:s.disableLocalFiles,fileManagerSelectionType:s.fileManagerSelectionType,note:s.note,proudlyDisplayPoweredByUppy:s.proudlyDisplayPoweredByUppy}),m(hl,null,s.showAddFilesPanel?m(D1,xo({key:"AddFiles"},s,{isSizeMD:i})):null),m(hl,null,s.fileCardFor?m(Tg,xo({key:"FileCard"},s)):null),m(hl,null,s.activePickerPanel?m(I1,xo({key:"Picker"},s)):null),m(hl,null,s.showFileEditor?m(N1,xo({key:"Editor"},s)):null),m("div",{className:"uppy-Dashboard-progressindicators"},s.progressindicators.map(f=>s.uppy.getPlugin(f.id).render(s.state))))))}var W1={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}};function Le(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var ID=0;function xt(s){return"__private_"+ID+++"_"+s}var RD={version:"4.1.2"},Pg=cg.default||cg,G1=9,ND=27;function Y1(){let s={};return s.promise=new Promise((e,t)=>{s.resolve=e,s.reject=t}),s}var BD={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:al,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550},cr=xt("disabledNodes"),Ms=xt("generateLargeThumbnailIfSingleFile"),pl=xt("openFileEditorWhenFilesAdded"),ur=xt("attachRenderFunctionToTarget"),_g=xt("isTargetSupported"),Mg=xt("getAcquirers"),Og=xt("getProgressIndicators"),Os=xt("getEditors"),Lg=xt("addSpecifiedPluginsFromOptions"),kg=xt("autoDiscoverPlugins"),dr=xt("addSupportedPluginIfNoTarget"),fl=xt("getStatusBarOpts"),ml=xt("getThumbnailGeneratorOpts"),Dg=xt("getInformerOpts"),gl=xt("getStatusBarId"),vl=xt("getThumbnailGeneratorId"),Fg=xt("getInformerId"),hr=class extends Ii{constructor(e,t){var i,n,r;let o=(i=t?.autoOpen)!=null?i:null;super(e,{...BD,...t,autoOpen:o}),Object.defineProperty(this,Fg,{value:VD}),Object.defineProperty(this,vl,{value:jD}),Object.defineProperty(this,gl,{value:UD}),Object.defineProperty(this,Dg,{value:HD}),Object.defineProperty(this,ml,{value:$D}),Object.defineProperty(this,fl,{value:zD}),Object.defineProperty(this,cr,{writable:!0,value:void 0}),this.modalName=`uppy-Dashboard-${an()}`,this.superFocus=dg(),this.ifFocusedOnUppyRecently=!1,this.removeTarget=a=>{let c=this.getPluginState().targets.filter(u=>u.id!==a.id);this.setPluginState({targets:c})},this.addTarget=a=>{let l=a.id||a.constructor.name,c=a.title||l,u=a.type;if(u!=="acquirer"&&u!=="progressindicator"&&u!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;let h={id:l,name:c,type:u},p=this.getPluginState().targets.slice();return p.push(h),this.setPluginState({targets:p}),this.el},this.hideAllPanels=()=>{var a;let l=this.getPluginState(),c={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};l.activePickerPanel===c.activePickerPanel&&l.showAddFilesPanel===c.showAddFilesPanel&&l.showFileEditor===c.showFileEditor&&l.activeOverlayType===c.activeOverlayType||(this.setPluginState(c),this.uppy.emit("dashboard:close-panel",(a=l.activePickerPanel)==null?void 0:a.id))},this.showPanel=a=>{let{targets:l}=this.getPluginState(),c=l.find(u=>u.type==="acquirer"&&u.id===a);this.setPluginState({activePickerPanel:c,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",a)},this.canEditFile=a=>{let{targets:l}=this.getPluginState();return Le(this,Os)[Os](l).some(u=>this.uppy.getPlugin(u.id).canEditFile(a))},this.openFileEditor=a=>{let{targets:l}=this.getPluginState(),c=Le(this,Os)[Os](l);this.setPluginState({showFileEditor:!0,fileCardFor:a.id||null,activeOverlayType:"FileEditor"}),c.forEach(u=>{this.uppy.getPlugin(u.id).selectFile(a)})},this.closeFileEditor=()=>{let{metaFields:a}=this.getPluginState();a&&a.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})},this.saveFileEditor=()=>{let{targets:a}=this.getPluginState();Le(this,Os)[Os](a).forEach(c=>{this.uppy.getPlugin(c.id).save()}),this.closeFileEditor()},this.openModal=()=>{let{promise:a,resolve:l}=Y1();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){let c=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",c,!1),l()};this.el.addEventListener("animationend",c,!1)}else this.setPluginState({isHidden:!1}),l();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),a},this.closeModal=a=>{var l;let c=(l=a?.manualClose)!=null?l:!0,{isHidden:u,isClosing:h}=this.getPluginState();if(u||h)return;let{promise:f,resolve:p}=Y1();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});let w=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",w,!1),p()};this.el.addEventListener("animationend",w,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),p();if(document.removeEventListener("keydown",this.handleKeyDownInModal),c&&this.opts.browserBackButtonClose){var v;(v=history.state)!=null&&v[this.modalName]&&history.back()}return this.uppy.emit("dashboard:modal-closed"),f},this.isModalOpen=()=>!this.getPluginState().isHidden||!1,this.requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal(),this.setDarkModeCapability=a=>{let{capabilities:l}=this.uppy.getState();this.uppy.setState({capabilities:{...l,darkMode:a}})},this.handleSystemDarkModeChange=a=>{let l=a.matches;this.uppy.log(`[Dashboard] Dark mode is ${l?"on":"off"}`),this.setDarkModeCapability(l)},this.toggleFileCard=(a,l)=>{let c=this.uppy.getFile(l);a?this.uppy.emit("dashboard:file-edit-start",c):this.uppy.emit("dashboard:file-edit-complete",c),this.setPluginState({fileCardFor:a?l:null,activeOverlayType:a?"FileCard":null})},this.toggleAddFilesPanel=a=>{this.setPluginState({showAddFilesPanel:a,activeOverlayType:a?"AddFiles":null})},this.addFiles=a=>{let l=a.map(c=>({source:this.id,name:c.name,type:c.type,data:c,meta:{relativePath:c.relativePath||c.webkitRelativePath||null}}));try{this.uppy.addFiles(l)}catch(c){this.uppy.log(c)}},this.startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(a=>{let l=a[0],{width:c,height:u}=l.contentRect;this.setPluginState({containerWidth:c,containerHeight:u,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{let a=this.getPluginState(),l=!this.opts.inline&&a.isHidden;!a.areInsidesReadyToBeVisible&&!l&&(this.uppy.log("[Dashboard] resize event didn\u2019t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)},this.stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)},this.recordIfFocusedOnUppyRecently=a=>{this.el.contains(a.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())},this.disableInteractiveElements=a=>{var l;let c=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],u=(l=Le(this,cr)[cr])!=null?l:cn(this.el.querySelectorAll(c)).filter(h=>!h.classList.contains("uppy-Dashboard-close"));for(let h of u)h.tagName==="A"?h.setAttribute("aria-disabled",a):h.disabled=a;a?Le(this,cr)[cr]=u:Le(this,cr)[cr]=null,this.dashboardIsDisabled=a},this.updateBrowserHistory=()=>{var a;(a=history.state)!=null&&a[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)},this.handlePopState=a=>{var l;this.isModalOpen()&&(!a.state||!a.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&(l=a.state)!=null&&l[this.modalName]&&history.back()},this.handleKeyDownInModal=a=>{a.keyCode===ND&&this.requestCloseModal(),a.keyCode===G1&&ug(a,this.getPluginState().activeOverlayType,this.el)},this.handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()},this.handlePaste=a=>{this.uppy.iteratePlugins(c=>{c.type==="acquirer"&&(c.handleRootPaste==null||c.handleRootPaste(a))});let l=cn(a.clipboardData.files);l.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(l))},this.handleInputChange=a=>{a.preventDefault();let l=cn(a.currentTarget.files||[]);l.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(l))},this.handleDragOver=a=>{a.preventDefault(),a.stopPropagation();let l=()=>{let f=!0;return this.uppy.iteratePlugins(p=>{p.canHandleRootDrop!=null&&p.canHandleRootDrop(a)&&(f=!0)}),f},c=()=>{let{types:f}=a.dataTransfer;return f.some(p=>p==="Files")},u=l(),h=c();if(!u&&!h||this.opts.disabled||this.opts.disableLocalFiles&&(h||!u)||!this.uppy.getState().allowNewUpload){a.dataTransfer.dropEffect="none";return}a.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(a)},this.handleDragLeave=a=>{a.preventDefault(),a.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(a)},this.handleDrop=async a=>{a.preventDefault(),a.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(h=>{h.type==="acquirer"&&(h.handleRootDrop==null||h.handleRootDrop(a))});let l=!1,c=h=>{this.uppy.log(h,"error"),l||(this.uppy.info(h.message,"error"),l=!0)};this.uppy.log("[Dashboard] Processing dropped files");let u=await jm(a.dataTransfer,{logDropError:c});u.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(u)),this.opts.onDrop(a)},this.handleRequestThumbnail=a=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",a)},this.handleCancelThumbnail=a=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",a)},this.handleKeyDownInInline=a=>{a.keyCode===G1&&C1(a,this.getPluginState().activeOverlayType,this.el)},this.handlePasteOnBody=a=>{this.el.contains(document.activeElement)&&this.handlePaste(a)},this.handleComplete=a=>{let{failed:l}=a;this.opts.closeAfterFinish&&!(l!=null&&l.length)&&this.requestCloseModal()},this.handleCancelRestore=()=>{this.uppy.emit("restore-canceled")},Object.defineProperty(this,Ms,{writable:!0,value:()=>{if(this.opts.disableThumbnailGenerator)return;let a=600,l=this.uppy.getFiles();if(l.length===1){let c=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);c?.setOptions({thumbnailWidth:a});let u={...l[0],preview:void 0};c?.requestThumbnail(u).then(()=>{c?.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}}}),Object.defineProperty(this,pl,{writable:!0,value:a=>{let l=a[0],{metaFields:c}=this.getPluginState(),u=c&&c.length>0,h=this.canEditFile(l);u&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,l.id):h&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(l)}}),this.initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){let a=$m(this.opts.trigger);a?a.forEach(l=>l.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",Le(this,dr)[dr]),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",Le(this,Ms)[Ms]),this.uppy.on("file-removed",Le(this,Ms)[Ms]),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",Le(this,pl)[pl])},this.removeEvents=()=>{let a=$m(this.opts.trigger);!this.opts.inline&&a&&a.forEach(l=>l.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",Le(this,dr)[dr]),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",Le(this,Ms)[Ms]),this.uppy.off("file-removed",Le(this,Ms)[Ms]),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",Le(this,pl)[pl])},this.superFocusOnEachUpdate=()=>{let a=this.el.contains(document.activeElement),l=document.activeElement===document.body||document.activeElement===null,c=this.uppy.getState().info.length===0,u=!this.opts.inline;c&&(u||a||l&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()},this.afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()},this.saveFileCard=(a,l)=>{this.uppy.setFileMeta(l,a),this.toggleFileCard(!1,l)},Object.defineProperty(this,ur,{writable:!0,value:a=>{let l=this.uppy.getPlugin(a.id);return{...a,icon:l.icon||this.opts.defaultPickerIcon,render:l.render}}}),Object.defineProperty(this,_g,{writable:!0,value:a=>{let l=this.uppy.getPlugin(a.id);return typeof l.isSupported!="function"?!0:l.isSupported()}}),Object.defineProperty(this,Mg,{writable:!0,value:Pg(a=>a.filter(l=>l.type==="acquirer"&&Le(this,_g)[_g](l)).map(Le(this,ur)[ur]))}),Object.defineProperty(this,Og,{writable:!0,value:Pg(a=>a.filter(l=>l.type==="progressindicator").map(Le(this,ur)[ur]))}),Object.defineProperty(this,Os,{writable:!0,value:Pg(a=>a.filter(l=>l.type==="editor").map(Le(this,ur)[ur]))}),this.render=a=>{let l=this.getPluginState(),{files:c,capabilities:u,allowNewUpload:h}=a,{newFiles:f,uploadStartedFiles:p,completeFiles:v,erroredFiles:w,inProgressFiles:S,inProgressNotPausedFiles:A,processingFiles:k,isUploadStarted:D,isAllComplete:R,isAllPaused:$}=this.uppy.getObjectOfFilesPerState(),U=Le(this,Mg)[Mg](l.targets),Z=Le(this,Og)[Og](l.targets),K=Le(this,Os)[Os](l.targets),ue;return this.opts.theme==="auto"?ue=u.darkMode?"dark":"light":ue=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),Cg({state:a,isHidden:l.isHidden,files:c,newFiles:f,uploadStartedFiles:p,completeFiles:v,erroredFiles:w,inProgressFiles:S,inProgressNotPausedFiles:A,processingFiles:k,isUploadStarted:D,isAllComplete:R,isAllPaused:$,totalFileCount:Object.keys(c).length,totalProgress:a.totalProgress,allowNewUpload:h,acquirers:U,theme:ue,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:l.activePickerPanel,showFileEditor:l.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:l.isClosing,progressindicators:Z,editors:K,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:a.recoveredState,metaFields:l.metaFields,resumableUploads:u.resumableUploads||!1,individualCancellation:u.individualCancellation,isMobileDevice:u.isMobileDevice,fileCardFor:l.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:l.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:l.containerWidth,containerHeight:l.containerHeight,areInsidesReadyToBeVisible:l.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:l.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})},Object.defineProperty(this,Lg,{writable:!0,value:()=>{let{plugins:a}=this.opts;a.forEach(l=>{let c=this.uppy.getPlugin(l);c?c.mount(this,c):this.uppy.log(`[Uppy] Dashboard could not find plugin '${l}', make sure to uppy.use() the plugins you are specifying`,"warning")})}}),Object.defineProperty(this,kg,{writable:!0,value:()=>{this.uppy.iteratePlugins(Le(this,dr)[dr])}}),Object.defineProperty(this,dr,{writable:!0,value:a=>{var l;let c=["acquirer","editor"];a&&!((l=a.opts)!=null&&l.target)&&c.includes(a.type)&&(this.getPluginState().targets.some(h=>a.id===h.id)||a.mount(this,a))}}),this.install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});let{inline:a,closeAfterFinish:l}=this.opts;if(a&&l)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");let{allowMultipleUploads:c,allowMultipleUploadBatches:u}=this.uppy.opts;(c||u)&&l&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");let{target:h}=this.opts;h&&this.mount(h,this),this.opts.disableStatusBar||this.uppy.use(er,{id:Le(this,gl)[gl](),target:this,...Le(this,fl)[fl]()}),this.opts.disableInformer||this.uppy.use(tr,{id:Le(this,Fg)[Fg](),target:this,...Le(this,Dg)[Dg]()}),this.opts.disableThumbnailGenerator||this.uppy.use(bo,{id:Le(this,vl)[vl](),...Le(this,ml)[ml]()}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;let f=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;if(this.uppy.log(`[Dashboard] Dark mode is ${f?"on":"off"}`),this.setDarkModeCapability(f),this.opts.theme==="auto"){var p;(p=this.darkModeMediaQuery)==null||p.addListener(this.handleSystemDarkModeChange)}Le(this,Lg)[Lg](),Le(this,kg)[kg](),this.initEvents()},this.uninstall=()=>{if(!this.opts.disableInformer){let c=this.uppy.getPlugin(`${this.id}:Informer`);c&&this.uppy.removePlugin(c)}if(!this.opts.disableStatusBar){let c=this.uppy.getPlugin(`${this.id}:StatusBar`);c&&this.uppy.removePlugin(c)}if(!this.opts.disableThumbnailGenerator){let c=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);c&&this.uppy.removePlugin(c)}let{plugins:a}=this.opts;if(a.forEach(c=>{let u=this.uppy.getPlugin(c);u&&u.unmount()}),this.opts.theme==="auto"){var l;(l=this.darkModeMediaQuery)==null||l.removeListener(this.handleSystemDarkModeChange)}this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()},this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=W1,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),(r=(n=this.opts).onRequestCloseModal)!=null||(n.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}setOptions(e){var t,i;super.setOptions(e),(t=this.uppy.getPlugin(Le(this,gl)[gl]()))==null||t.setOptions(Le(this,fl)[fl]()),(i=this.uppy.getPlugin(Le(this,vl)[vl]()))==null||i.setOptions(Le(this,ml)[ml]())}};function zD(){let{hideUploadButton:s,hideRetryButton:e,hidePauseResumeButton:t,hideCancelButton:i,showProgressDetails:n,hideProgressAfterFinish:r,locale:o,doneButtonHandler:a}=this.opts;return{hideUploadButton:s,hideRetryButton:e,hidePauseResumeButton:t,hideCancelButton:i,showProgressDetails:n,hideAfterFinish:r,locale:o,doneButtonHandler:a}}function $D(){let{thumbnailWidth:s,thumbnailHeight:e,thumbnailType:t,waitForThumbnailsBeforeUpload:i}=this.opts;return{thumbnailWidth:s,thumbnailHeight:e,thumbnailType:t,waitForThumbnailsBeforeUpload:i,lazy:!i}}function HD(){return{}}function UD(){return`${this.id}:StatusBar`}function jD(){return`${this.id}:ThumbnailGenerator`}function VD(){return`${this.id}:Informer`}hr.VERSION=RD.version;var eS=Ve(X1(),1);function qD(s,e){let t=s.width/e.width,i=s.height/e.height,n=Math.min(t,i),r=e.width*n,o=e.height*n,a=(s.width-r)/2,l=(s.height-o)/2;return{width:r,height:o,left:a,top:l}}var K1=qD;function WD(s){return s*(Math.PI/180)}function GD(s,e,t){let i=Math.abs(WD(t));return Math.max((Math.sin(i)*s+Math.cos(i)*e)/e,(Math.sin(i)*e+Math.cos(i)*s)/s)}var J1=GD;function YD(s,e,t){return e.left<s.left?{left:s.left,width:t.width}:e.top<s.top?{top:s.top,height:t.height}:e.left+e.width>s.left+s.width?{left:s.left+s.width-t.width,width:t.width}:e.top+e.height>s.top+s.height?{top:s.top+s.height-t.height,height:t.height}:null}var Z1=YD;function XD(s,e,t){return e.left<s.left?{left:s.left,width:t.left+t.width-s.left}:e.top<s.top?{top:s.top,height:t.top+t.height-s.top}:e.left+e.width>s.left+s.width?{left:t.left,width:s.left+s.width-t.left}:e.top+e.height>s.top+s.height?{top:t.top,height:s.top+s.height-t.top}:null}var Q1=XD;var bl=class extends Ot{constructor(e){super(e),this.onRotate90Deg=()=>{let{angle90Deg:t}=this.state,i=t-90;this.setState({angle90Deg:i,angleGranular:0}),this.cropper.scale(1),this.cropper.rotateTo(i);let n=this.cropper.getCanvasData(),r=this.cropper.getContainerData(),o=K1(r,n);this.cropper.setCanvasData(o),this.cropper.setCropBoxData(o)},this.onRotateGranular=t=>{let i=Number(t.target.value);this.setState({angleGranular:i});let{angle90Deg:n}=this.state,r=n+i;this.cropper.rotateTo(r);let o=this.cropper.getImageData(),a=J1(o.naturalWidth,o.naturalHeight,i),l=this.cropper.getImageData().scaleX<0?-a:a;this.cropper.scale(l,a)},this.state={angle90Deg:0,angleGranular:0,prevCropboxData:null},this.storePrevCropboxData=this.storePrevCropboxData.bind(this),this.limitCropboxMovement=this.limitCropboxMovement.bind(this)}componentDidMount(){let{opts:e,storeCropperInstance:t}=this.props;this.cropper=new eS.default(this.imgElement,e.cropperOptions),this.imgElement.addEventListener("cropstart",this.storePrevCropboxData),this.imgElement.addEventListener("cropend",this.limitCropboxMovement),t(this.cropper)}componentWillUnmount(){this.cropper.destroy(),this.imgElement.removeEventListener("cropstart",this.storePrevCropboxData),this.imgElement.removeEventListener("cropend",this.limitCropboxMovement)}storePrevCropboxData(){this.setState({prevCropboxData:this.cropper.getCropBoxData()})}limitCropboxMovement(e){let t=this.cropper.getCanvasData(),i=this.cropper.getCropBoxData(),{prevCropboxData:n}=this.state;if(e.detail.action==="all"){let r=Z1(t,i,n);r&&this.cropper.setCropBoxData(r)}else{let r=Q1(t,i,n);r&&this.cropper.setCropBoxData(r)}}renderGranularRotate(){let{i18n:e}=this.props,{angleGranular:t}=this.state;return m("label",{role:"tooltip","aria-label":`${t}\xBA`,"data-microtip-position":"top",className:"uppy-ImageCropper-rangeWrapper"},m("input",{className:"uppy-ImageCropper-range uppy-u-reset",type:"range",onInput:this.onRotateGranular,onChange:this.onRotateGranular,value:t,min:"-45",max:"45","aria-label":e("rotate")}))}renderRevert(){let{i18n:e,opts:t}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("revert"),onClick:()=>{this.cropper.reset(),this.cropper.setAspectRatio(t.cropperOptions.initialAspectRatio),this.setState({angle90Deg:0,angleGranular:0})}},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M0 0h24v24H0z",fill:"none"}),m("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})))}renderRotate(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("rotate"),onClick:this.onRotate90Deg},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"}),m("path",{d:"M14 10a2 2 0 012 2v7a2 2 0 01-2 2H6a2 2 0 01-2-2v-7a2 2 0 012-2h8zm0 1.75H6a.25.25 0 00-.243.193L5.75 12v7a.25.25 0 00.193.243L6 19.25h8a.25.25 0 00.243-.193L14.25 19v-7a.25.25 0 00-.193-.243L14 11.75zM12 .76V4c2.3 0 4.61.88 6.36 2.64a8.95 8.95 0 012.634 6.025L21 13a1 1 0 01-1.993.117L19 13h-.003a6.979 6.979 0 00-2.047-4.95 6.97 6.97 0 00-4.652-2.044L12 6v3.24L7.76 5 12 .76z"})))}renderFlip(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("flipHorizontal"),onClick:()=>this.cropper.scaleX(-this.cropper.getData().scaleX||-1)},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M0 0h24v24H0z",fill:"none"}),m("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"})))}renderZoomIn(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("zoomIn"),onClick:()=>this.cropper.zoom(.1)},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",height:"24",viewBox:"0 0 24 24",width:"24"},m("path",{d:"M0 0h24v24H0V0z",fill:"none"}),m("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),m("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})))}renderZoomOut(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("zoomOut"),onClick:()=>this.cropper.zoom(-.1)},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M0 0h24v24H0V0z",fill:"none"}),m("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})))}renderCropSquare(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("aspectRatioSquare"),onClick:()=>this.cropper.setAspectRatio(1)},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M0 0h24v24H0z",fill:"none"}),m("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})))}renderCropWidescreen(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("aspectRatioLandscape"),onClick:()=>this.cropper.setAspectRatio(16/9)},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M 19,4.9999992 V 17.000001 H 4.9999998 V 6.9999992 H 19 m 0,-2 H 4.9999998 c -1.0999999,0 -1.9999999,0.9000001 -1.9999999,2 V 17.000001 c 0,1.1 0.9,2 1.9999999,2 H 19 c 1.1,0 2,-0.9 2,-2 V 6.9999992 c 0,-1.0999999 -0.9,-2 -2,-2 z"}),m("path",{fill:"none",d:"M0 0h24v24H0z"})))}renderCropWidescreenVertical(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button","aria-label":e("aspectRatioPortrait"),className:"uppy-u-reset uppy-c-btn",onClick:()=>this.cropper.setAspectRatio(9/16)},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M 19.000001,19 H 6.999999 V 5 h 10.000002 v 14 m 2,0 V 5 c 0,-1.0999999 -0.9,-1.9999999 -2,-1.9999999 H 6.999999 c -1.1,0 -2,0.9 -2,1.9999999 v 14 c 0,1.1 0.9,2 2,2 h 10.000002 c 1.1,0 2,-0.9 2,-2 z"}),m("path",{d:"M0 0h24v24H0z",fill:"none"})))}render(){let{currentImage:e,opts:t}=this.props,{actions:i}=t,n=URL.createObjectURL(e.data);return m("div",{className:"uppy-ImageCropper"},m("div",{className:"uppy-ImageCropper-container"},m("img",{className:"uppy-ImageCropper-image",alt:e.name,src:n,ref:r=>{this.imgElement=r}})),m("div",{className:"uppy-ImageCropper-controls"},i.revert&&this.renderRevert(),i.rotate&&this.renderRotate(),i.granularRotate&&this.renderGranularRotate(),i.flip&&this.renderFlip(),i.zoomIn&&this.renderZoomIn(),i.zoomOut&&this.renderZoomOut(),i.cropSquare&&this.renderCropSquare(),i.cropWidescreen&&this.renderCropWidescreen(),i.cropWidescreenVertical&&this.renderCropWidescreenVertical()))}};var tS={strings:{revert:"Reset",rotate:"Rotate 90\xB0",zoomIn:"Zoom in",zoomOut:"Zoom out",flipHorizontal:"Flip horizontally",aspectRatioSquare:"Crop square",aspectRatioLandscape:"Crop landscape (16:9)",aspectRatioPortrait:"Crop portrait (9:16)"}};var KD={version:"3.2.0"},iS={viewMode:0,background:!1,autoCropArea:1,responsive:!0,minCropBoxWidth:70,minCropBoxHeight:70,croppedCanvasOptions:{},initialAspectRatio:0},sS={revert:!0,rotate:!0,granularRotate:!0,flip:!0,zoomIn:!0,zoomOut:!0,cropSquare:!0,cropWidescreen:!0,cropWidescreenVertical:!0},JD={quality:.8,actions:sS,cropperOptions:iS},pr=class extends Ii{constructor(e,t){super(e,{...JD,...t,actions:{...sS,...t?.actions},cropperOptions:{...iS,...t?.cropperOptions}}),this.save=()=>{let i=o=>{var a;let{currentImage:l}=this.getPluginState();this.uppy.setFileState(l.id,{data:new File([o],(a=l.name)!=null?a:this.i18n("unnamed"),{type:o.type}),size:o.size,preview:void 0});let c=this.uppy.getFile(l.id);this.uppy.emit("thumbnail:request",c),this.setPluginState({currentImage:c}),this.uppy.emit("file-editor:complete",c)},{currentImage:n}=this.getPluginState(),r=this.cropper.getCroppedCanvas({});r.width%2!==0&&this.cropper.setData({width:r.width-1}),r.height%2!==0&&this.cropper.setData({height:r.height-1}),this.cropper.getCroppedCanvas(this.opts.cropperOptions.croppedCanvasOptions).toBlob(i,n.type,this.opts.quality)},this.storeCropperInstance=i=>{this.cropper=i},this.selectFile=i=>{this.uppy.emit("file-editor:start",i),this.setPluginState({currentImage:i})},this.id=this.opts.id||"ImageEditor",this.title="Image Editor",this.type="editor",this.defaultLocale=tS,this.i18nInit()}canEditFile(e){if(!e.type||e.isRemote)return!1;let t=e.type.split("/")[1];return!!/^(jpe?g|gif|png|bmp|webp)$/.test(t)}install(){this.setPluginState({currentImage:null});let{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){let{currentImage:e}=this.getPluginState();if(e){let t=this.uppy.getFile(e.id);this.uppy.emit("file-editor:cancel",t)}this.unmount()}render(){let{currentImage:e}=this.getPluginState();return e===null||e.isRemote?null:m(bl,{currentImage:e,storeCropperInstance:this.storeCropperInstance,save:this.save,opts:this.opts,i18n:this.i18n})}};pr.VERSION=KD.version;function Ls(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var ZD=0;function nS(s){return"__private_"+ZD+++"_"+s}var zt=nS("uppy"),yl=nS("events"),wl=class{constructor(e){Object.defineProperty(this,zt,{writable:!0,value:void 0}),Object.defineProperty(this,yl,{writable:!0,value:[]}),Ls(this,zt)[zt]=e}on(e,t){return Ls(this,yl)[yl].push([e,t]),Ls(this,zt)[zt].on(e,t)}remove(){for(let[e,t]of Ls(this,yl)[yl].splice(0))Ls(this,zt)[zt].off(e,t)}onFilePause(e,t){this.on("upload-pause",(i,n)=>{e===i?.id&&t(n)})}onFileRemove(e,t){this.on("file-removed",i=>{e===i.id&&t(i.id)})}onPause(e,t){this.on("upload-pause",(i,n)=>{e===i?.id&&t(n)})}onRetry(e,t){this.on("upload-retry",i=>{e===i?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{Ls(this,zt)[zt].getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{Ls(this,zt)[zt].getFile(e)&&t()})}onCancelAll(e,t){var i=this;this.on("cancel-all",function(){Ls(i,zt)[zt].getFile(e)&&t(...arguments)})}onResumeAll(e,t){this.on("resume-all",()=>{Ls(this,zt)[zt].getFile(e)&&t()})}};function be(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var QD=0;function Qt(s){return"__private_"+QD+++"_"+s}function eF(s){return new Error("Cancelled",{cause:s})}function rS(s){if(s!=null){var e;let t=()=>this.abort(s.reason);s.addEventListener("abort",t,{once:!0});let i=()=>{s.removeEventListener("abort",t)};(e=this.then)==null||e.call(this,i,i)}return this}var di=Qt("activeRequests"),Ht=Qt("queuedHandlers"),ui=Qt("paused"),fr=Qt("pauseTimer"),$t=Qt("downLimit"),mr=Qt("upperLimit"),ks=Qt("rateLimitingTimer"),El=Qt("call"),Ds=Qt("queueNext"),zg=Qt("next"),Ng=Qt("queue"),$g=Qt("dequeue"),Bg=Qt("resume"),gr=Qt("increaseLimit"),ld=class{constructor(e){Object.defineProperty(this,$g,{value:rF}),Object.defineProperty(this,Ng,{value:nF}),Object.defineProperty(this,zg,{value:sF}),Object.defineProperty(this,Ds,{value:iF}),Object.defineProperty(this,El,{value:tF}),Object.defineProperty(this,di,{writable:!0,value:0}),Object.defineProperty(this,Ht,{writable:!0,value:[]}),Object.defineProperty(this,ui,{writable:!0,value:!1}),Object.defineProperty(this,fr,{writable:!0,value:void 0}),Object.defineProperty(this,$t,{writable:!0,value:1}),Object.defineProperty(this,mr,{writable:!0,value:void 0}),Object.defineProperty(this,ks,{writable:!0,value:void 0}),Object.defineProperty(this,Bg,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,gr,{writable:!0,value:()=>{if(be(this,ui)[ui]){be(this,ks)[ks]=setTimeout(be(this,gr)[gr],0);return}be(this,$t)[$t]=this.limit,this.limit=Math.ceil((be(this,mr)[mr]+be(this,$t)[$t])/2);for(let t=be(this,$t)[$t];t<=this.limit;t++)be(this,Ds)[Ds]();be(this,mr)[mr]-be(this,$t)[$t]>3?be(this,ks)[ks]=setTimeout(be(this,gr)[gr],2e3):be(this,$t)[$t]=Math.floor(be(this,$t)[$t]/2)}}),typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,t){return!be(this,ui)[ui]&&be(this,di)[di]<this.limit?be(this,El)[El](e):be(this,Ng)[Ng](e,t)}wrapSyncFunction(e,t){var i=this;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];let a=i.run(()=>(e(...r),queueMicrotask(()=>a.done()),()=>{}),t);return{abortOn:rS,abort(){a.abort()}}}}wrapPromiseFunction(e,t){var i=this;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];let a,l=new Promise((c,u)=>{a=i.run(()=>{let h,f;try{f=Promise.resolve(e(...r))}catch(p){f=Promise.reject(p)}return f.then(p=>{h?u(h):(a.done(),c(p))},p=>{h?u(h):(a.done(),u(p))}),p=>{h=eF(p)}},t)});return l.abort=c=>{a.abort(c)},l.abortOn=rS,l}}resume(){be(this,ui)[ui]=!1,clearTimeout(be(this,fr)[fr]);for(let e=0;e<this.limit;e++)be(this,Ds)[Ds]()}pause(e){e===void 0&&(e=null),be(this,ui)[ui]=!0,clearTimeout(be(this,fr)[fr]),e!=null&&(be(this,fr)[fr]=setTimeout(be(this,Bg)[Bg],e))}rateLimit(e){clearTimeout(be(this,ks)[ks]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(be(this,mr)[mr]=this.limit-1,this.limit=be(this,$t)[$t],be(this,ks)[ks]=setTimeout(be(this,gr)[gr],e))}get isPaused(){return be(this,ui)[ui]}};function tF(s){be(this,di)[di]+=1;let e=!1,t;try{t=s()}catch(i){throw be(this,di)[di]-=1,i}return{abort:i=>{e||(e=!0,be(this,di)[di]-=1,t?.(i),be(this,Ds)[Ds]())},done:()=>{e||(e=!0,be(this,di)[di]-=1,be(this,Ds)[Ds]())}}}function iF(){queueMicrotask(()=>be(this,zg)[zg]())}function sF(){if(be(this,ui)[ui]||be(this,di)[di]>=this.limit||be(this,Ht)[Ht].length===0)return;let s=be(this,Ht)[Ht].shift();if(s==null)throw new Error("Invariant violation: next is null");let e=be(this,El)[El](s.fn);s.abort=e.abort,s.done=e.done}function nF(s,e){let t={fn:s,priority:e?.priority||0,abort:()=>{be(this,$g)[$g](t)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},i=be(this,Ht)[Ht].findIndex(n=>t.priority>n.priority);return i===-1?be(this,Ht)[Ht].push(t):be(this,Ht)[Ht].splice(i,0,t),t}function rF(s){let e=be(this,Ht)[Ht].indexOf(s);e!==-1&&be(this,Ht)[Ht].splice(e,1)}var cd=Symbol("__queue");var Hg=class extends Error{constructor(e,t){t===void 0&&(t=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}},Co=Hg;function oF(s){return s?s.readyState!==0&&s.readyState!==4||s.status===0:!1}var oS=oF;function Mi(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var aF=0;function ud(s){return"__private_"+aF+++"_"+s}var Fs=ud("aliveTimer"),vr=ud("isDone"),Sl=ud("onTimedOut"),br=ud("timeout"),Ug=class{constructor(e,t){Object.defineProperty(this,Fs,{writable:!0,value:void 0}),Object.defineProperty(this,vr,{writable:!0,value:!1}),Object.defineProperty(this,Sl,{writable:!0,value:void 0}),Object.defineProperty(this,br,{writable:!0,value:void 0}),Mi(this,br)[br]=e,Mi(this,Sl)[Sl]=()=>t(e)}progress(){Mi(this,vr)[vr]||Mi(this,br)[br]>0&&(clearTimeout(Mi(this,Fs)[Fs]),Mi(this,Fs)[Fs]=setTimeout(Mi(this,Sl)[Sl],Mi(this,br)[br]))}done(){Mi(this,vr)[vr]||(clearTimeout(Mi(this,Fs)[Fs]),Mi(this,Fs)[Fs]=void 0,Mi(this,vr)[vr]=!0)}},aS=Ug;var dd=()=>{};function lS(s,e){e===void 0&&(e={});let{body:t=null,headers:i={},method:n="GET",onBeforeRequest:r=dd,onUploadProgress:o=dd,shouldRetry:a=()=>!0,onAfterResponse:l=dd,onTimeout:c=dd,responseType:u,retries:h=3,signal:f=null,timeout:p=3e4,withCredentials:v=!1}=e,w=k=>.3*2**(k-1)*1e3,S=new aS(p,c);function A(k){return k===void 0&&(k=0),new Promise(async(D,R)=>{let $=new XMLHttpRequest;$.open(n,s,!0),$.withCredentials=v,u&&($.responseType=u),f?.addEventListener("abort",()=>{$.abort(),R(new DOMException("Aborted","AbortError"))}),$.onload=async()=>{await l($,k),$.status>=200&&$.status<300?(S.done(),D($)):a($)&&k<h?setTimeout(()=>{A(k+1).then(D,R)},w(k)):(S.done(),R(new Co($.statusText,$)))},$.onerror=()=>{a($)&&k<h?setTimeout(()=>{A(k+1).then(D,R)},w(k)):(S.done(),R(new Co($.statusText,$)))},$.upload.onprogress=U=>{S.progress(),o(U)},i&&Object.keys(i).forEach(U=>{$.setRequestHeader(U,i[U])}),await r($,k),$.send(t)})}return A()}function cS(s){let e=t=>"error"in t&&!!t.error;return s.filter(t=>!e(t))}function uS(s){return s.filter(e=>{var t;return!((t=e.progress)!=null&&t.uploadStarted)||!e.isRestored})}function hd(s,e){return s===!0?Object.keys(e):Array.isArray(s)?s:[]}var dS={strings:{uploadStalled:"Upload has not made any progress for %{seconds} seconds. You may want to retry it."}};function Is(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var lF=0;function _o(s){return"__private_"+lF+++"_"+s}var cF={version:"4.2.2"};function uF(s,e){let t=e;return t||(t=new Error("Upload error")),typeof t=="string"&&(t=new Error(t)),t instanceof Error||(t=Object.assign(new Error("Upload error"),{data:t})),oS(s)?(t=new Co(t,s),t):(t.request=s,t)}function hS(s){return s.data.slice(0,s.data.size,s.meta.type)}var dF={formData:!0,fieldName:"file",method:"post",allowedMetaFields:!0,bundle:!1,headers:{},timeout:30*1e3,limit:5,withCredentials:!1,responseType:""},yr=_o("getFetcher"),qg=_o("uploadLocalFile"),jg=_o("uploadBundle"),Wg=_o("getCompanionClientArgs"),Vg=_o("uploadFiles"),Al=_o("handleUpload"),Po=class extends Qn{constructor(e,t){if(super(e,{...dF,fieldName:t.bundle?"files[]":"file",...t}),Object.defineProperty(this,Vg,{value:mF}),Object.defineProperty(this,Wg,{value:fF}),Object.defineProperty(this,jg,{value:pF}),Object.defineProperty(this,qg,{value:hF}),Object.defineProperty(this,yr,{writable:!0,value:void 0}),Object.defineProperty(this,Al,{writable:!0,value:async i=>{if(i.length===0){this.uppy.log("[XHRUpload] No files to upload!");return}this.opts.limit===0&&!this.opts[cd]&&this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");let n=this.uppy.getFilesByIds(i),r=cS(n),o=uS(r);if(this.uppy.emit("upload-start",o),this.opts.bundle){if(r.some(l=>l.isRemote))throw new Error("Can\u2019t upload remote files when the `bundle: true` option is set");if(typeof this.opts.headers=="function")throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");await Is(this,jg)[jg](r)}else await Is(this,Vg)[Vg](r)}}),this.type="uploader",this.id=this.opts.id||"XHRUpload",this.defaultLocale=dS,this.i18nInit(),cd in this.opts?this.requests=this.opts[cd]:this.requests=new ld(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");if(this.opts.bundle&&typeof this.opts.headers=="function")throw new Error("`opts.headers` can not be a function when the `bundle: true` option is set.");if(t?.allowedMetaFields===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.uploaderEvents=Object.create(null),Is(this,yr)[yr]=i=>async(n,r)=>{try{var o,a,l;let u=await lS(n,{...r,onBeforeRequest:(p,v)=>{var w,S;return(w=(S=this.opts).onBeforeRequest)==null?void 0:w.call(S,p,v,i)},shouldRetry:this.opts.shouldRetry,onAfterResponse:this.opts.onAfterResponse,onTimeout:p=>{let v=Math.ceil(p/1e3),w=new Error(this.i18n("uploadStalled",{seconds:v}));this.uppy.emit("upload-stalled",w,i)},onUploadProgress:p=>{if(p.lengthComputable)for(let{id:w}of i){var v;let S=this.uppy.getFile(w);this.uppy.emit("upload-progress",S,{uploadStarted:(v=S.progress.uploadStarted)!=null?v:0,bytesUploaded:p.loaded/p.total*S.size,bytesTotal:S.size})}}}),h=await((o=(a=this.opts).getResponseData)==null?void 0:o.call(a,u));try{var c;(c=h)!=null||(h=JSON.parse(u.responseText))}catch(p){throw new Error("@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.",{cause:p})}let f=typeof((l=h)==null?void 0:l.url)=="string"?h.url:void 0;for(let{id:p}of i)this.uppy.emit("upload-success",this.uppy.getFile(p),{status:u.status,body:h,uploadURL:f});return u}catch(u){if(u.name==="AbortError")return;if(u instanceof Co){let h=u.request;for(let f of i)this.uppy.emit("upload-error",this.uppy.getFile(f.id),uF(h,u),h)}throw u}}}getOptions(e){let t=this.uppy.getState().xhrUpload,{headers:i}=this.opts,n={...this.opts,...t||{},...e.xhrUpload||{},headers:{}};return typeof i=="function"?n.headers=i(e):Object.assign(n.headers,this.opts.headers),t&&Object.assign(n.headers,t.headers),e.xhrUpload&&Object.assign(n.headers,e.xhrUpload.headers),n}addMetadata(e,t,i){hd(i.allowedMetaFields,t).forEach(r=>{let o=t[r];Array.isArray(o)?o.forEach(a=>e.append(r,a)):e.append(r,o)})}createFormDataUpload(e,t){let i=new FormData;this.addMetadata(i,e.meta,t);let n=hS(e);return e.name?i.append(t.fieldName,n,e.meta.name):i.append(t.fieldName,n),i}createBundledUpload(e,t){let i=new FormData,{meta:n}=this.uppy.getState();return this.addMetadata(i,n,t),e.forEach(r=>{let o=this.getOptions(r),a=hS(r);r.name?i.append(o.fieldName,a,r.name):i.append(o.fieldName,a)}),i}install(){if(this.opts.bundle){let{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!1}})}this.uppy.addUploader(Is(this,Al)[Al])}uninstall(){if(this.opts.bundle){let{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!0}})}this.uppy.removeUploader(Is(this,Al)[Al])}};async function hF(s){let e=new wl(this.uppy),t=new AbortController,i=this.requests.wrapPromiseFunction(async()=>{let n=this.getOptions(s),r=Is(this,yr)[yr]([s]),o=n.formData?this.createFormDataUpload(s,n):s.data;return r(n.endpoint,{...n,body:o,signal:t.signal})});e.onFileRemove(s.id,()=>t.abort()),e.onCancelAll(s.id,()=>{t.abort()});try{await i().abortOn(t.signal)}catch(n){if(n.message!=="Cancelled")throw n}finally{e.remove()}}async function pF(s){let e=new AbortController,t=this.requests.wrapPromiseFunction(async()=>{var n;let r=(n=this.uppy.getState().xhrUpload)!=null?n:{},o=Is(this,yr)[yr](s),a=this.createBundledUpload(s,{...this.opts,...r});return o(this.opts.endpoint,{...this.opts,body:a,signal:e.signal})});function i(){e.abort()}this.uppy.once("cancel-all",i);try{await t().abortOn(e.signal)}catch(n){if(n.message!=="Cancelled")throw n}finally{this.uppy.off("cancel-all",i)}}function fF(s){var e;let t=this.getOptions(s),i=hd(t.allowedMetaFields,s.meta);return{...(e=s.remote)==null?void 0:e.body,protocol:"multipart",endpoint:t.endpoint,size:s.data.size,fieldname:t.fieldName,metadata:Object.fromEntries(i.map(n=>[n,s.meta[n]])),httpMethod:t.method,useFormData:t.formData,headers:t.headers}}async function mF(s){await Promise.allSettled(s.map(e=>{if(e.isRemote){let t=()=>this.requests,i=new AbortController,n=o=>{o.id===e.id&&i.abort()};this.uppy.on("file-removed",n);let r=this.uppy.getRequestClientForFile(e).uploadRemoteFile(e,Is(this,Wg)[Wg](e),{signal:i.signal,getQueue:t});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",n)},{priority:-1})(),r}return Is(this,qg)[qg](e)}))}Po.VERSION=cF.version;var pd=class extends Pe{static targets=["dashboard","preview","imageUrl"];connect(){this.initializeUppy()}initializeUppy(){this.uppy=new cm({id:"uppy",autoProceed:!1,restrictions:{maxFileSize:5e6,maxNumberOfFiles:1,minNumberOfFiles:1,allowedFileTypes:["image/*"]}}).use(hr,{inline:!0,target:this.dashboardTarget,showProgressDetails:!0,height:500}).use(pr,{quality:.8}).use(Po,{endpoint:"/upload",formData:!0,fieldName:"image_layer[layer]"}),this.uppy.on("file-added",s=>{this.updatePreview(s)}),this.uppy.on("upload-success",(s,e)=>{this.imageUrlTarget.value=e.body.url,console.log("Upload successful:",e)})}updatePreview(s){let e=new FileReader;e.onload=()=>{let t=this.previewTarget.querySelector("img");t.src=e.result},e.readAsDataURL(s.data)}};var fd=class extends Pe{static values={noImageUrl:String};connect(){this.noImageUrlValue=window.location.origin+window.noimage_url,this.processImages()}processImages(){this.element.querySelectorAll(".game-img").forEach(e=>{let t=new Image;t.src=e.style.backgroundImage.replace(/^url\(["']?/,"").replace(/["']?\)$/,""),t.addEventListener("error",()=>this.handleImageError(e))})}handleImageError(s){s.style.backgroundImage=`url(${this.noImageUrlValue})`}};var md=class extends Pe{connect(){this.scroller()}showLeftBar(s){let e=s.target.parentElement.parentElement;e.style.transform==""?e.style.transform="rotate(180deg)":e.style.transform="",document.querySelector(".left-bar").classList.toggle("hidden-left-bar")}showMainMenu(){document.querySelector(".navbar-toggler").click()}up(){window.scrollTo({top:0,behavior:"smooth"})}scroller(){window.addEventListener("scroll",()=>{let s=document.getElementById("scroller");window.scrollY>300?(s.style.visibility="visible",s.style.opacity=1):(s.style.opacity=0,setTimeout(()=>{s.style.visibility="hidden"},400))})}};var gd=class extends Pe{connect(){this.element.scrollTop=this.element.scrollHeight}};var vd=class extends Pe{static targets=["text"];copy(){let s=this.textTarget.innerText;navigator.clipboard.writeText(s)}};bt.register("confirm",Nc);bt.register("btn_preloader",Bc);bt.register("notices",zc);bt.register("clear-form",$c);bt.register("fancybox",uu);bt.register("pagy-initializer",du);bt.register("map",hu);bt.register("swiper",vu);bt.register("expand_text",bu);bt.register("collapse",yu);bt.register("layer",pd);bt.register("no_image",fd);bt.register("mobile-bar",md);bt.register("auto-scroll-down",gd);bt.register("clipboard",vd);var $6=Ve(df());var gF="2.1.8",Sr="[data-trix-attachment]",Ov={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}},jt={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,htmlAttributes:["language"],text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test(s){return pS(s.parentNode)===jt[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test(s){return pS(s.parentNode)===jt[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}},pS=s=>{var e;return s==null||(e=s.tagName)===null||e===void 0?void 0:e.toLowerCase()},fS=navigator.userAgent.match(/android\s([0-9]+.*Chrome)/i),Gg=fS&&parseInt(fS[1]),Bl={composesExistingText:/Android.*Chrome/.test(navigator.userAgent),recentAndroid:Gg&&Gg>12,samsungAndroid:Gg&&navigator.userAgent.match(/Android.*SM-/),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:typeof InputEvent<"u"&&["data","getTargetRanges","inputType"].every(s=>s in InputEvent.prototype)},ye={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"},vF=[ye.bytes,ye.KB,ye.MB,ye.GB,ye.TB,ye.PB],$S={prefix:"IEC",precision:2,formatter(s){switch(s){case 0:return"0 ".concat(ye.bytes);case 1:return"1 ".concat(ye.byte);default:let e;this.prefix==="SI"?e=1e3:this.prefix==="IEC"&&(e=1024);let t=Math.floor(Math.log(s)/Math.log(e)),i=(s/Math.pow(e,t)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"");return"".concat(i," ").concat(vF[t])}}},qd="\uFEFF",hn="\xA0",HS=function(s){for(let e in s){let t=s[e];this[e]=t}return this},Lv=document.documentElement,bF=Lv.matches,Ze=function(s){let{onElement:e,matchingSelector:t,withCallback:i,inPhase:n,preventDefault:r,times:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e||Lv,l=t,c=n==="capturing",u=function(h){o!=null&&--o==0&&u.destroy();let f=fn(h.target,{matchingSelector:l});f!=null&&(i?.call(f,h,f),r&&h.preventDefault())};return u.destroy=()=>a.removeEventListener(s,u,c),a.addEventListener(s,u,c),u},_l=function(s){let{onElement:e,bubbles:t,cancelable:i,attributes:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e??Lv;t=t!==!1,i=i!==!1;let o=document.createEvent("Events");return o.initEvent(s,t,i),n!=null&&HS.call(o,n),r.dispatchEvent(o)},US=function(s,e){if(s?.nodeType===1)return bF.call(s,e)},fn=function(s){let{matchingSelector:e,untilNode:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(;s&&s.nodeType!==Node.ELEMENT_NODE;)s=s.parentNode;if(s!=null){if(e==null)return s;if(s.closest&&t==null)return s.closest(e);for(;s&&s!==t;){if(US(s,e))return s;s=s.parentNode}}},kv=s=>document.activeElement!==s&&Er(s,document.activeElement),Er=function(s,e){if(s&&e)for(;e;){if(e===s)return!0;e=e.parentNode}},Yg=function(s){var e;if((e=s)===null||e===void 0||!e.parentNode)return;let t=0;for(s=s.previousSibling;s;)t++,s=s.previousSibling;return t},mn=s=>{var e;return s==null||(e=s.parentNode)===null||e===void 0?void 0:e.removeChild(s)},Td=function(s){let{onlyNodesOfType:e,usingFilter:t,expandEntityReferences:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=(()=>{switch(e){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}})();return document.createTreeWalker(s,n,t??null,i===!0)},Ut=s=>{var e;return s==null||(e=s.tagName)===null||e===void 0?void 0:e.toLowerCase()},Se=function(s){let e,t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof s=="object"?(i=s,s=i.tagName):i={attributes:i};let n=document.createElement(s);if(i.editable!=null&&(i.attributes==null&&(i.attributes={}),i.attributes.contenteditable=i.editable),i.attributes)for(e in i.attributes)t=i.attributes[e],n.setAttribute(e,t);if(i.style)for(e in i.style)t=i.style[e],n.style[e]=t;if(i.data)for(e in i.data)t=i.data[e],n.dataset[e]=t;return i.className&&i.className.split(" ").forEach(r=>{n.classList.add(r)}),i.textContent&&(n.textContent=i.textContent),i.childNodes&&[].concat(i.childNodes).forEach(r=>{n.appendChild(r)}),n},Tl,Ml=function(){if(Tl!=null)return Tl;Tl=[];for(let s in jt){let e=jt[s];e.tagName&&Tl.push(e.tagName)}return Tl},Xg=s=>Oo(s?.firstChild),mS=function(s){let{strict:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{strict:!0};return e?Oo(s):Oo(s)||!Oo(s.firstChild)&&function(t){return Ml().includes(Ut(t))&&!Ml().includes(Ut(t.firstChild))}(s)},Oo=s=>yF(s)&&s?.data==="block",yF=s=>s?.nodeType===Node.COMMENT_NODE,Lo=function(s){let{name:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s)return Ol(s)?s.data===qd?!e||s.parentNode.dataset.trixCursorTarget===e:void 0:Lo(s.firstChild)},Ar=s=>US(s,Sr),jS=s=>Ol(s)&&s?.data==="",Ol=s=>s?.nodeType===Node.TEXT_NODE,Dv={level2Enabled:!0,getLevel(){return this.level2Enabled&&Bl.supportsInputEvents?2:0},pickFiles(s){let e=Se("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId});e.addEventListener("change",()=>{s(e.files),mn(e)}),mn(document.getElementById(this.fileInputId)),document.body.appendChild(e),e.click()}},Sd={removeBlankTableCells:!1,tableCellSeparator:" | ",tableRowSeparator:`
`},Cr={bold:{tagName:"strong",inheritable:!0,parser(s){let e=window.getComputedStyle(s);return e.fontWeight==="bold"||e.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:s=>window.getComputedStyle(s).fontStyle==="italic"},href:{groupTagName:"a",parser(s){let e="a:not(".concat(Sr,")"),t=s.closest(e);if(t)return t.getAttribute("href")}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}},VS={getDefaultHTML:()=>`<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="`.concat(ye.bold,'" tabindex="-1">').concat(ye.bold,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="`).concat(ye.italic,'" tabindex="-1">').concat(ye.italic,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="`).concat(ye.strike,'" tabindex="-1">').concat(ye.strike,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="`).concat(ye.link,'" tabindex="-1">').concat(ye.link,`</button>
      </span>

      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="`).concat(ye.heading1,'" tabindex="-1">').concat(ye.heading1,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="`).concat(ye.quote,'" tabindex="-1">').concat(ye.quote,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="`).concat(ye.code,'" tabindex="-1">').concat(ye.code,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="`).concat(ye.bullets,'" tabindex="-1">').concat(ye.bullets,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="`).concat(ye.numbers,'" tabindex="-1">').concat(ye.numbers,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="`).concat(ye.outdent,'" tabindex="-1">').concat(ye.outdent,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="`).concat(ye.indent,'" tabindex="-1">').concat(ye.indent,`</button>
      </span>

      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="`).concat(ye.attachFiles,'" tabindex="-1">').concat(ye.attachFiles,`</button>
      </span>

      <span class="trix-button-group-spacer"></span>

      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="`).concat(ye.undo,'" tabindex="-1">').concat(ye.undo,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="`).concat(ye.redo,'" tabindex="-1">').concat(ye.redo,`</button>
      </span>
    </div>

    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="`).concat(ye.urlPlaceholder,'" aria-label="').concat(ye.url,`" required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(ye.link,`" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(ye.unlink,`" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`)},fv={interval:5e3},zl=Object.freeze({__proto__:null,attachments:Ov,blockAttributes:jt,browser:Bl,css:{attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"},fileSize:$S,input:Dv,keyNames:{8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},lang:ye,parser:Sd,textAttributes:Cr,toolbar:VS,undo:fv}),it=class{static proxyMethod(e){let{name:t,toMethod:i,toProperty:n,optional:r}=wF(e);this.prototype[t]=function(){let o,a;var l,c;return i?a=r?(l=this[i])===null||l===void 0?void 0:l.call(this):this[i]():n&&(a=this[n]),r?(o=(c=a)===null||c===void 0?void 0:c[t],o?gS.call(o,a,arguments):void 0):(o=a[t],gS.call(o,a,arguments))}}},wF=function(s){let e=s.match(EF);if(!e)throw new Error("can't parse @proxyMethod expression: ".concat(s));let t={name:e[4]};return e[2]!=null?t.toMethod=e[1]:t.toProperty=e[1],e[3]!=null&&(t.optional=!0),t},{apply:gS}=Function.prototype,EF=new RegExp("^(.+?)(\\(\\))?(\\?)?\\.(.+?)$"),Kg,Jg,Zg,Pr=class extends it{static box(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e instanceof this?e:this.fromUCS2String(e?.toString())}static fromUCS2String(e){return new this(e,mv(e))}static fromCodepoints(e){return new this(gv(e),e)}constructor(e,t){super(...arguments),this.ucs2String=e,this.codepoints=t,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}offsetToUCS2Offset(e){return gv(this.codepoints.slice(0,Math.max(0,e))).length}offsetFromUCS2Offset(e){return mv(this.ucs2String.slice(0,Math.max(0,e))).length}slice(){return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))}charAt(e){return this.slice(e,e+1)}isEqualTo(e){return this.constructor.box(e).ucs2String===this.ucs2String}toJSON(){return this.ucs2String}getCacheKey(){return this.ucs2String}toString(){return this.ucs2String}},SF=((Kg=Array.from)===null||Kg===void 0?void 0:Kg.call(Array,"\u{1F47C}").length)===1,AF=((Jg=" ".codePointAt)===null||Jg===void 0?void 0:Jg.call(" ",0))!=null,TF=((Zg=String.fromCodePoint)===null||Zg===void 0?void 0:Zg.call(String,32,128124))===" \u{1F47C}",mv,gv;mv=SF&&AF?s=>Array.from(s).map(e=>e.codePointAt(0)):function(s){let e=[],t=0,{length:i}=s;for(;t<i;){let n=s.charCodeAt(t++);if(55296<=n&&n<=56319&&t<i){let r=s.charCodeAt(t++);(64512&r)==56320?n=((1023&n)<<10)+(1023&r)+65536:t--}e.push(n)}return e},gv=TF?s=>String.fromCodePoint(...Array.from(s||[])):function(s){return(()=>{let e=[];return Array.from(s).forEach(t=>{let i="";t>65535&&(t-=65536,i+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e.push(i+String.fromCharCode(t))}),e})().join("")};var xF=0,zs=class extends it{static fromJSONString(e){return this.fromJSON(JSON.parse(e))}constructor(){super(...arguments),this.id=++xF}hasSameConstructorAs(e){return this.constructor===e?.constructor}isEqualTo(e){return this===e}inspect(){let e=[],t=this.contentsForInspection()||{};for(let i in t){let n=t[i];e.push("".concat(i,"=").concat(n))}return"#<".concat(this.constructor.name,":").concat(this.id).concat(e.length?" ".concat(e.join(", ")):"",">")}contentsForInspection(){}toJSONString(){return JSON.stringify(this)}toUTF16String(){return Pr.box(this)}getCacheKey(){return this.id.toString()}},_r=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(s.length!==e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!==e[t])return!1;return!0},Fv=function(s){let e=s.slice(0);for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.splice(...i),e},CF=/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,PF=function(){let s=Se("input",{dir:"auto",name:"x",dirName:"x.dir"}),e=Se("textarea",{dir:"auto",name:"y",dirName:"y.dir"}),t=Se("form");t.appendChild(s),t.appendChild(e);let i=function(){try{return new FormData(t).has(e.dirName)}catch{return!1}}(),n=function(){try{return s.matches(":dir(ltr),:dir(rtl)")}catch{return!1}}();return i?function(r){return e.value=r,new FormData(t).get(e.dirName)}:n?function(r){return s.value=r,s.matches(":dir(rtl)")?"rtl":"ltr"}:function(r){let o=r.trim().charAt(0);return CF.test(o)?"rtl":"ltr"}}(),Qg=null,ev=null,tv=null,bd=null,vv=()=>(Qg||(Qg=MF().concat(_F())),Qg),at=s=>jt[s],_F=()=>(ev||(ev=Object.keys(jt)),ev),bv=s=>Cr[s],MF=()=>(tv||(tv=Object.keys(Cr)),tv),qS=function(s,e){OF(s).textContent=e.replace(/%t/g,s)},OF=function(s){let e=document.createElement("style");e.setAttribute("type","text/css"),e.setAttribute("data-tag-name",s.toLowerCase());let t=LF();return t&&e.setAttribute("nonce",t),document.head.insertBefore(e,document.head.firstChild),e},LF=function(){let s=vS("trix-csp-nonce")||vS("csp-nonce");if(s){let{nonce:e,content:t}=s;return e==""?t:e}},vS=s=>document.head.querySelector("meta[name=".concat(s,"]")),bS={"application/x-trix-feature-detection":"test"},WS=function(s){let e=s.getData("text/plain"),t=s.getData("text/html");if(!e||!t)return e?.length;{let{body:i}=new DOMParser().parseFromString(t,"text/html");if(i.textContent===e)return!i.querySelector("*")}},GS=/Mac|^iP/.test(navigator.platform)?s=>s.metaKey:s=>s.ctrlKey,Iv=s=>setTimeout(s,1),YS=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={};for(let t in s){let i=s[t];e[t]=i}return e},zo=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object.keys(s).length!==Object.keys(e).length)return!1;for(let t in s)if(s[t]!==e[t])return!1;return!0},Ne=function(s){if(s!=null)return Array.isArray(s)||(s=[s,s]),[yS(s[0]),yS(s[1]!=null?s[1]:s[0])]},Bs=function(s){if(s==null)return;let[e,t]=Ne(s);return yv(e,t)},xd=function(s,e){if(s==null||e==null)return;let[t,i]=Ne(s),[n,r]=Ne(e);return yv(t,n)&&yv(i,r)},yS=function(s){return typeof s=="number"?s:YS(s)},yv=function(s,e){return typeof s=="number"?s===e:zo(s,e)},Cd=class extends it{constructor(){super(...arguments),this.update=this.update.bind(this),this.selectionManagers=[]}start(){this.started||(this.started=!0,document.addEventListener("selectionchange",this.update,!0))}stop(){if(this.started)return this.started=!1,document.removeEventListener("selectionchange",this.update,!0)}registerSelectionManager(e){if(!this.selectionManagers.includes(e))return this.selectionManagers.push(e),this.start()}unregisterSelectionManager(e){if(this.selectionManagers=this.selectionManagers.filter(t=>t!==e),this.selectionManagers.length===0)return this.stop()}notifySelectionManagersOfSelectionChange(){return this.selectionManagers.map(e=>e.selectionDidChange())}update(){this.notifySelectionManagersOfSelectionChange()}reset(){this.update()}},Mr=new Cd,XS=function(){let s=window.getSelection();if(s.rangeCount>0)return s},Ll=function(){var s;let e=(s=XS())===null||s===void 0?void 0:s.getRangeAt(0);if(e&&!kF(e))return e},KS=function(s){let e=window.getSelection();return e.removeAllRanges(),e.addRange(s),Mr.update()},kF=s=>wS(s.startContainer)||wS(s.endContainer),wS=s=>!Object.getPrototypeOf(s),Pl=s=>s.replace(new RegExp("".concat(qd),"g"),"").replace(new RegExp("".concat(hn),"g")," "),Rv=new RegExp("[^\\S".concat(hn,"]")),Nv=s=>s.replace(new RegExp("".concat(Rv.source),"g")," ").replace(/\ {2,}/g," "),ES=function(s,e){if(s.isEqualTo(e))return["",""];let t=iv(s,e),{length:i}=t.utf16String,n;if(i){let{offset:r}=t,o=s.codepoints.slice(0,r).concat(s.codepoints.slice(r+i));n=iv(e,Pr.fromCodepoints(o))}else n=iv(e,s);return[t.utf16String.toString(),n.utf16String.toString()]},iv=function(s,e){let t=0,i=s.length,n=e.length;for(;t<i&&s.charAt(t).isEqualTo(e.charAt(t));)t++;for(;i>t+1&&s.charAt(i-1).isEqualTo(e.charAt(n-1));)i--,n--;return{utf16String:s.slice(t,i),offset:t}},zi=class s extends zs{static fromCommonAttributesOfObjects(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(!e.length)return new this;let t=xl(e[0]),i=t.getKeys();return e.slice(1).forEach(n=>{i=t.getKeysCommonToHash(xl(n)),t=t.slice(i)}),t}static box(e){return xl(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(...arguments),this.values=Ad(e)}add(e,t){return this.merge(DF(e,t))}remove(e){return new s(Ad(this.values,e))}get(e){return this.values[e]}has(e){return e in this.values}merge(e){return new s(FF(this.values,IF(e)))}slice(e){let t={};return Array.from(e).forEach(i=>{this.has(i)&&(t[i]=this.values[i])}),new s(t)}getKeys(){return Object.keys(this.values)}getKeysCommonToHash(e){return e=xl(e),this.getKeys().filter(t=>this.values[t]===e.values[t])}isEqualTo(e){return _r(this.toArray(),xl(e).toArray())}isEmpty(){return this.getKeys().length===0}toArray(){if(!this.array){let e=[];for(let t in this.values){let i=this.values[t];e.push(e.push(t,i))}this.array=e.slice(0)}return this.array}toObject(){return Ad(this.values)}toJSON(){return this.toObject()}contentsForInspection(){return{values:JSON.stringify(this.values)}}},DF=function(s,e){let t={};return t[s]=e,t},FF=function(s,e){let t=Ad(s);for(let i in e){let n=e[i];t[i]=n}return t},Ad=function(s,e){let t={};return Object.keys(s).sort().forEach(i=>{i!==e&&(t[i]=s[i])}),t},xl=function(s){return s instanceof zi?s:new zi(s)},IF=function(s){return s instanceof zi?s.values:s},Dl=class{static groupObjects(){let e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:i,asTree:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n&&i==null&&(i=0);let r=[];return Array.from(t).forEach(o=>{var a;if(e){var l,c,u;if((l=o.canBeGrouped)!==null&&l!==void 0&&l.call(o,i)&&(c=(u=e[e.length-1]).canBeGroupedWith)!==null&&c!==void 0&&c.call(u,o,i))return void e.push(o);r.push(new this(e,{depth:i,asTree:n})),e=null}(a=o.canBeGrouped)!==null&&a!==void 0&&a.call(o,i)?e=[o]:r.push(o)}),e&&r.push(new this(e,{depth:i,asTree:n})),r}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:t,asTree:i}=arguments.length>1?arguments[1]:void 0;this.objects=e,i&&(this.depth=t,this.objects=this.constructor.groupObjects(this.objects,{asTree:i,depth:this.depth+1}))}getObjects(){return this.objects}getDepth(){return this.depth}getCacheKey(){let e=["objectGroup"];return Array.from(this.getObjects()).forEach(t=>{e.push(t.getCacheKey())}),e.join("/")}},wv=class extends it{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects={},Array.from(e).forEach(t=>{let i=JSON.stringify(t);this.objects[i]==null&&(this.objects[i]=t)})}find(e){let t=JSON.stringify(e);return this.objects[t]}},Ev=class{constructor(e){this.reset(e)}add(e){let t=SS(e);this.elements[t]=e}remove(e){let t=SS(e),i=this.elements[t];if(i)return delete this.elements[t],i}reset(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this.elements={},Array.from(e).forEach(t=>{this.add(t)}),e}},SS=s=>s.dataset.trixStoreKey,ko=class extends it{isPerforming(){return this.performing===!0}hasPerformed(){return this.performed===!0}hasSucceeded(){return this.performed&&this.succeeded}hasFailed(){return this.performed&&!this.succeeded}getPromise(){return this.promise||(this.promise=new Promise((e,t)=>(this.performing=!0,this.perform((i,n)=>{this.succeeded=i,this.performing=!1,this.performed=!0,this.succeeded?e(n):t(n)})))),this.promise}perform(e){return e(!1)}release(){var e,t;(e=this.promise)===null||e===void 0||(t=e.cancel)===null||t===void 0||t.call(e),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null}};ko.proxyMethod("getPromise().then"),ko.proxyMethod("getPromise().catch");var $s=class extends it{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.object=e,this.options=t,this.childViews=[],this.rootView=this}getNodes(){return this.nodes||(this.nodes=this.createNodes()),this.nodes.map(e=>e.cloneNode(!0))}invalidate(){var e;return this.nodes=null,this.childViews=[],(e=this.parentView)===null||e===void 0?void 0:e.invalidate()}invalidateViewForObject(e){var t;return(t=this.findViewForObject(e))===null||t===void 0?void 0:t.invalidate()}findOrCreateCachedChildView(e,t,i){let n=this.getCachedViewForObject(t);return n?this.recordChildView(n):(n=this.createChildView(...arguments),this.cacheViewForObject(n,t)),n}createChildView(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};t instanceof Dl&&(i.viewClass=e,e=Sv);let n=new e(t,i);return this.recordChildView(n)}recordChildView(e){return e.parentView=this,e.rootView=this.rootView,this.childViews.push(e),e}getAllChildViews(){let e=[];return this.childViews.forEach(t=>{e.push(t),e=e.concat(t.getAllChildViews())}),e}findElement(){return this.findElementForObject(this.object)}findElementForObject(e){let t=e?.id;if(t)return this.rootView.element.querySelector("[data-trix-id='".concat(t,"']"))}findViewForObject(e){for(let t of this.getAllChildViews())if(t.object===e)return t}getViewCache(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?(this.viewCache||(this.viewCache={}),this.viewCache):void 0}isViewCachingEnabled(){return this.shouldCacheViews!==!1}enableViewCaching(){this.shouldCacheViews=!0}disableViewCaching(){this.shouldCacheViews=!1}getCachedViewForObject(e){var t;return(t=this.getViewCache())===null||t===void 0?void 0:t[e.getCacheKey()]}cacheViewForObject(e,t){let i=this.getViewCache();i&&(i[t.getCacheKey()]=e)}garbageCollectCachedViews(){let e=this.getViewCache();if(e){let t=this.getAllChildViews().concat(this).map(i=>i.object.getCacheKey());for(let i in e)t.includes(i)||delete e[i]}}},Sv=class extends $s{constructor(){super(...arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}getChildViews(){return this.childViews.length||Array.from(this.objectGroup.getObjects()).forEach(e=>{this.findOrCreateCachedChildView(this.viewClass,e,this.options)}),this.childViews}createNodes(){let e=this.createContainerElement();return this.getChildViews().forEach(t=>{Array.from(t.getNodes()).forEach(i=>{e.appendChild(i)})}),[e]}createContainerElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.objectGroup.getDepth();return this.getChildViews()[0].createContainerElement(e)}},RF="style href src width height language class".split(" "),NF="javascript:".split(" "),BF="script iframe form noscript".split(" "),Do=class extends it{static setHTML(e,t){let i=new this(t).sanitize(),n=i.getHTML?i.getHTML():i.outerHTML;e.innerHTML=n}static sanitize(e,t){let i=new this(e,t);return i.sanitize(),i}constructor(e){let{allowedAttributes:t,forbiddenProtocols:i,forbiddenElements:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.allowedAttributes=t||RF,this.forbiddenProtocols=i||NF,this.forbiddenElements=n||BF,this.body=zF(e)}sanitize(){return this.sanitizeElements(),this.normalizeListElementNesting()}getHTML(){return this.body.innerHTML}getBody(){return this.body}sanitizeElements(){let e=Td(this.body),t=[];for(;e.nextNode();){let i=e.currentNode;switch(i.nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(i)?t.push(i):this.sanitizeElement(i);break;case Node.COMMENT_NODE:t.push(i)}}return t.forEach(i=>mn(i)),this.body}sanitizeElement(e){return e.hasAttribute("href")&&this.forbiddenProtocols.includes(e.protocol)&&e.removeAttribute("href"),Array.from(e.attributes).forEach(t=>{let{name:i}=t;this.allowedAttributes.includes(i)||i.indexOf("data-trix")===0||e.removeAttribute(i)}),e}normalizeListElementNesting(){return Array.from(this.body.querySelectorAll("ul,ol")).forEach(e=>{let t=e.previousElementSibling;t&&Ut(t)==="li"&&t.appendChild(e)}),this.body}elementIsRemovable(e){if(e?.nodeType===Node.ELEMENT_NODE)return this.elementIsForbidden(e)||this.elementIsntSerializable(e)}elementIsForbidden(e){return this.forbiddenElements.includes(Ut(e))}elementIsntSerializable(e){return e.getAttribute("data-trix-serialize")==="false"&&!Ar(e)}},zF=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";s=s.replace(/<\/html[^>]*>[^]*$/i,"</html>");let e=document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=s,Array.from(e.head.querySelectorAll("style")).forEach(t=>{e.body.appendChild(t)}),e.body},{css:dn}=zl,Fl=class extends $s{constructor(){super(...arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}createContentNodes(){return[]}createNodes(){let e,t=e=Se({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),i=this.getHref();return i&&(e=Se({tagName:"a",editable:!1,attributes:{href:i,tabindex:-1}}),t.appendChild(e)),this.attachment.hasContent()?Do.setHTML(e,this.attachment.getContent()):this.createContentNodes().forEach(n=>{e.appendChild(n)}),e.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=Se({tagName:"progress",attributes:{class:dn.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),t.appendChild(this.progressElement)),[AS("left"),t,AS("right")]}createCaptionElement(){let e=Se({tagName:"figcaption",className:dn.attachmentCaption}),t=this.attachmentPiece.getCaption();if(t)e.classList.add("".concat(dn.attachmentCaption,"--edited")),e.textContent=t;else{let i,n,r=this.getCaptionConfig();if(r.name&&(i=this.attachment.getFilename()),r.size&&(n=this.attachment.getFormattedFilesize()),i){let o=Se({tagName:"span",className:dn.attachmentName,textContent:i});e.appendChild(o)}if(n){i&&e.appendChild(document.createTextNode(" "));let o=Se({tagName:"span",className:dn.attachmentSize,textContent:n});e.appendChild(o)}}return e}getClassName(){let e=[dn.attachment,"".concat(dn.attachment,"--").concat(this.attachment.getType())],t=this.attachment.getExtension();return t&&e.push("".concat(dn.attachment,"--").concat(t)),e.join(" ")}getData(){let e={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},{attributes:t}=this.attachmentPiece;return t.isEmpty()||(e.trixAttributes=JSON.stringify(t)),this.attachment.isPending()&&(e.trixSerialize=!1),e}getHref(){if(!$F(this.attachment.getContent(),"a"))return this.attachment.getHref()}getCaptionConfig(){var e;let t=this.attachment.getType(),i=YS((e=Ov[t])===null||e===void 0?void 0:e.caption);return t==="file"&&(i.name=!0),i}findProgressElement(){var e;return(e=this.findElement())===null||e===void 0?void 0:e.querySelector("progress")}attachmentDidChangeUploadProgress(){let e=this.attachment.getUploadProgress(),t=this.findProgressElement();t&&(t.value=e)}},AS=s=>Se({tagName:"span",textContent:qd,data:{trixCursorTarget:s,trixSerialize:!1}}),$F=function(s,e){let t=Se("div");return Do.setHTML(t,s||""),t.querySelector(e)},Pd=class extends Fl{constructor(){super(...arguments),this.attachment.previewDelegate=this}createContentNodes(){return this.image=Se({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]}createCaptionElement(){let e=super.createCaptionElement(...arguments);return e.textContent||e.setAttribute("data-trix-placeholder",ye.captionPlaceholder),e}refresh(e){var t;if(e||(e=(t=this.findElement())===null||t===void 0?void 0:t.querySelector("img")),e)return this.updateAttributesForImage(e)}updateAttributesForImage(e){let t=this.attachment.getURL(),i=this.attachment.getPreviewURL();if(e.src=i||t,i===t)e.removeAttribute("data-trix-serialized-attributes");else{let a=JSON.stringify({src:t});e.setAttribute("data-trix-serialized-attributes",a)}let n=this.attachment.getWidth(),r=this.attachment.getHeight();n!=null&&(e.width=n),r!=null&&(e.height=r);let o=["imageElement",this.attachment.id,e.src,e.width,e.height].join("/");e.dataset.trixStoreKey=o}attachmentDidChangeAttributes(){return this.refresh(this.image),this.refresh()}},_d=class extends $s{constructor(){super(...arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),this.textConfig=this.options.textConfig,this.context=this.options.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}createNodes(){let e=this.attachment?this.createAttachmentNodes():this.createStringNodes(),t=this.createElement();if(t){let i=function(n){for(;(r=n)!==null&&r!==void 0&&r.firstElementChild;){var r;n=n.firstElementChild}return n}(t);Array.from(e).forEach(n=>{i.appendChild(n)}),e=[t]}return e}createAttachmentNodes(){let e=this.attachment.isPreviewable()?Pd:Fl;return this.createChildView(e,this.piece.attachment,{piece:this.piece}).getNodes()}createStringNodes(){var e;if((e=this.textConfig)!==null&&e!==void 0&&e.plaintext)return[document.createTextNode(this.string)];{let t=[],i=this.string.split(`
`);for(let n=0;n<i.length;n++){let r=i[n];if(n>0){let o=Se("br");t.push(o)}if(r.length){let o=document.createTextNode(this.preserveSpaces(r));t.push(o)}}return t}}createElement(){let e,t,i,n={};for(t in this.attributes){i=this.attributes[t];let o=bv(t);if(o){if(o.tagName){var r;let a=Se(o.tagName);r?(r.appendChild(a),r=a):e=r=a}if(o.styleProperty&&(n[o.styleProperty]=i),o.style)for(t in o.style)i=o.style[t],n[t]=i}}if(Object.keys(n).length)for(t in e||(e=Se("span")),n)i=n[t],e.style[t]=i;return e}createContainerElement(){for(let e in this.attributes){let t=this.attributes[e],i=bv(e);if(i&&i.groupTagName){let n={};return n[e]=t,Se(i.groupTagName,n)}}}preserveSpaces(e){return this.context.isLast&&(e=e.replace(/\ $/,hn)),e=e.replace(/(\S)\ {3}(\S)/g,"$1 ".concat(hn," $2")).replace(/\ {2}/g,"".concat(hn," ")).replace(/\ {2}/g," ".concat(hn)),(this.context.isFirst||this.context.followsWhitespace)&&(e=e.replace(/^\ /,hn)),e}},Md=class extends $s{constructor(){super(...arguments),this.text=this.object,this.textConfig=this.options.textConfig}createNodes(){let e=[],t=Dl.groupObjects(this.getPieces()),i=t.length-1;for(let r=0;r<t.length;r++){let o=t[r],a={};r===0&&(a.isFirst=!0),r===i&&(a.isLast=!0),HF(n)&&(a.followsWhitespace=!0);let l=this.findOrCreateCachedChildView(_d,o,{textConfig:this.textConfig,context:a});e.push(...Array.from(l.getNodes()||[]));var n=o}return e}getPieces(){return Array.from(this.text.getPieces()).filter(e=>!e.hasAttribute("blockBreak"))}},HF=s=>/\s$/.test(s?.toString()),{css:TS}=zl,Od=class extends $s{constructor(){super(...arguments),this.block=this.object,this.attributes=this.block.getAttributes()}createNodes(){let e=[document.createComment("block")];if(this.block.isEmpty())e.push(Se("br"));else{var t;let i=(t=at(this.block.getLastAttribute()))===null||t===void 0?void 0:t.text,n=this.findOrCreateCachedChildView(Md,this.block.text,{textConfig:i});e.push(...Array.from(n.getNodes()||[])),this.shouldAddExtraNewlineElement()&&e.push(Se("br"))}if(this.attributes.length)return e;{let i,{tagName:n}=jt.default;this.block.isRTL()&&(i={dir:"rtl"});let r=Se({tagName:n,attributes:i});return e.forEach(o=>r.appendChild(o)),[r]}}createContainerElement(e){let t={},i,n=this.attributes[e],{tagName:r,htmlAttributes:o=[]}=at(n);if(e===0&&this.block.isRTL()&&Object.assign(t,{dir:"rtl"}),n==="attachmentGallery"){let a=this.block.getBlockBreakPosition();i="".concat(TS.attachmentGallery," ").concat(TS.attachmentGallery,"--").concat(a)}return Object.entries(this.block.htmlAttributes).forEach(a=>{let[l,c]=a;o.includes(l)&&(t[l]=c)}),Se({tagName:r,className:i,attributes:t})}shouldAddExtraNewlineElement(){return/\n\n$/.test(this.block.toString())}},Fo=class extends $s{static render(e){let t=Se("div"),i=new this(e,{element:t});return i.render(),i.sync(),t}constructor(){super(...arguments),this.element=this.options.element,this.elementStore=new Ev,this.setDocument(this.object)}setDocument(e){e.isEqualTo(this.document)||(this.document=this.object=e)}render(){if(this.childViews=[],this.shadowElement=Se("div"),!this.document.isEmpty()){let e=Dl.groupObjects(this.document.getBlocks(),{asTree:!0});Array.from(e).forEach(t=>{let i=this.findOrCreateCachedChildView(Od,t);Array.from(i.getNodes()).map(n=>this.shadowElement.appendChild(n))})}}isSynced(){return UF(this.shadowElement,this.element)}sync(){let e=this.createDocumentFragmentForSync();for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(e),this.didSync()}didSync(){return this.elementStore.reset(xS(this.element)),Iv(()=>this.garbageCollectCachedViews())}createDocumentFragmentForSync(){let e=document.createDocumentFragment();return Array.from(this.shadowElement.childNodes).forEach(t=>{e.appendChild(t.cloneNode(!0))}),Array.from(xS(e)).forEach(t=>{let i=this.elementStore.remove(t);i&&t.parentNode.replaceChild(i,t)}),e}},xS=s=>s.querySelectorAll("[data-trix-store-key]"),UF=(s,e)=>CS(s.innerHTML)===CS(e.innerHTML),CS=s=>s.replace(/&nbsp;/g," ");function yd(s){var e,t;function i(r,o){try{var a=s[r](o),l=a.value,c=l instanceof jF;Promise.resolve(c?l.v:l).then(function(u){if(c){var h=r==="return"?"return":"next";if(!l.k||u.done)return i(h,u);u=s[h](u).value}n(a.done?"return":"normal",u)},function(u){i("throw",u)})}catch(u){n("throw",u)}}function n(r,o){switch(r){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(r,o){return new Promise(function(a,l){var c={key:r,arg:o,resolve:a,reject:l,next:null};t?t=t.next=c:(e=t=c,i(r,o))})},typeof s.return!="function"&&(this.return=void 0)}function jF(s,e){this.v=s,this.k=e}function ti(s,e,t){return(e=VF(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function VF(s){var e=function(t,i){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,i||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}(s,"string");return typeof e=="symbol"?e:String(e)}yd.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},yd.prototype.next=function(s){return this._invoke("next",s)},yd.prototype.throw=function(s){return this._invoke("throw",s)},yd.prototype.return=function(s){return this._invoke("return",s)};function Ue(s,e){return qF(s,JS(s,e,"get"))}function Bv(s,e,t){return WF(s,JS(s,e,"set"),t),t}function JS(s,e,t){if(!e.has(s))throw new TypeError("attempted to "+t+" private field on non-instance");return e.get(s)}function qF(s,e){return e.get?e.get.call(s):e.value}function WF(s,e,t){if(e.set)e.set.call(s,t);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=t}}function wd(s,e,t){if(!e.has(s))throw new TypeError("attempted to get private field on non-instance");return t}function ZS(s,e){if(e.has(s))throw new TypeError("Cannot initialize the same private elements twice on an object")}function kl(s,e,t){ZS(s,e),e.set(s,t)}var Hs=class extends zs{static registerType(e,t){t.type=e,this.types[e]=t}static fromJSON(e){let t=this.types[e.type];if(t)return t.fromJSON(e)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.attributes=zi.box(t)}copyWithAttributes(e){return new this.constructor(this.getValue(),e)}copyWithAdditionalAttributes(e){return this.copyWithAttributes(this.attributes.merge(e))}copyWithoutAttribute(e){return this.copyWithAttributes(this.attributes.remove(e))}copy(){return this.copyWithAttributes(this.attributes)}getAttribute(e){return this.attributes.get(e)}getAttributesHash(){return this.attributes}getAttributes(){return this.attributes.toObject()}hasAttribute(e){return this.attributes.has(e)}hasSameStringValueAsPiece(e){return e&&this.toString()===e.toString()}hasSameAttributesAsPiece(e){return e&&(this.attributes===e.attributes||this.attributes.isEqualTo(e.attributes))}isBlockBreak(){return!1}isEqualTo(e){return super.isEqualTo(...arguments)||this.hasSameConstructorAs(e)&&this.hasSameStringValueAsPiece(e)&&this.hasSameAttributesAsPiece(e)}isEmpty(){return this.length===0}isSerializable(){return!0}toJSON(){return{type:this.constructor.type,attributes:this.getAttributes()}}contentsForInspection(){return{type:this.constructor.type,attributes:this.attributes.inspect()}}canBeGrouped(){return this.hasAttribute("href")}canBeGroupedWith(e){return this.getAttribute("href")===e.getAttribute("href")}getLength(){return this.length}canBeConsolidatedWith(e){return!1}};ti(Hs,"types",{});var Ld=class extends ko{constructor(e){super(...arguments),this.url=e}perform(e){let t=new Image;t.onload=()=>(t.width=this.width=t.naturalWidth,t.height=this.height=t.naturalHeight,e(!0,t)),t.onerror=()=>e(!1),t.src=this.url}},Io=class s extends zs{static attachmentForFile(e){let t=new this(this.attributesForFile(e));return t.setFile(e),t}static attributesForFile(e){return new zi({filename:e.name,filesize:e.size,contentType:e.type})}static fromJSON(e){return new this(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.releaseFile=this.releaseFile.bind(this),this.attributes=zi.box(e),this.didChangeAttributes()}getAttribute(e){return this.attributes.get(e)}hasAttribute(e){return this.attributes.has(e)}getAttributes(){return this.attributes.toObject()}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.attributes.merge(e);var i,n,r,o;if(!this.attributes.isEqualTo(t))return this.attributes=t,this.didChangeAttributes(),(i=this.previewDelegate)===null||i===void 0||(n=i.attachmentDidChangeAttributes)===null||n===void 0||n.call(i,this),(r=this.delegate)===null||r===void 0||(o=r.attachmentDidChangeAttributes)===null||o===void 0?void 0:o.call(r,this)}didChangeAttributes(){if(this.isPreviewable())return this.preloadURL()}isPending(){return this.file!=null&&!(this.getURL()||this.getHref())}isPreviewable(){return this.attributes.has("previewable")?this.attributes.get("previewable"):s.previewablePattern.test(this.getContentType())}getType(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"}getURL(){return this.attributes.get("url")}getHref(){return this.attributes.get("href")}getFilename(){return this.attributes.get("filename")||""}getFilesize(){return this.attributes.get("filesize")}getFormattedFilesize(){let e=this.attributes.get("filesize");return typeof e=="number"?$S.formatter(e):""}getExtension(){var e;return(e=this.getFilename().match(/\.(\w+)$/))===null||e===void 0?void 0:e[1].toLowerCase()}getContentType(){return this.attributes.get("contentType")}hasContent(){return this.attributes.has("content")}getContent(){return this.attributes.get("content")}getWidth(){return this.attributes.get("width")}getHeight(){return this.attributes.get("height")}getFile(){return this.file}setFile(e){if(this.file=e,this.isPreviewable())return this.preloadFile()}releaseFile(){this.releasePreloadedFile(),this.file=null}getUploadProgress(){return this.uploadProgress!=null?this.uploadProgress:0}setUploadProgress(e){var t,i;if(this.uploadProgress!==e)return this.uploadProgress=e,(t=this.uploadProgressDelegate)===null||t===void 0||(i=t.attachmentDidChangeUploadProgress)===null||i===void 0?void 0:i.call(t,this)}toJSON(){return this.getAttributes()}getCacheKey(){return[super.getCacheKey(...arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")}getPreviewURL(){return this.previewURL||this.preloadingURL}setPreviewURL(e){var t,i,n,r;if(e!==this.getPreviewURL())return this.previewURL=e,(t=this.previewDelegate)===null||t===void 0||(i=t.attachmentDidChangeAttributes)===null||i===void 0||i.call(t,this),(n=this.delegate)===null||n===void 0||(r=n.attachmentDidChangePreviewURL)===null||r===void 0?void 0:r.call(n,this)}preloadURL(){return this.preload(this.getURL(),this.releaseFile)}preloadFile(){if(this.file)return this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)}releasePreloadedFile(){this.fileObjectURL&&(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null)}preload(e,t){if(e&&e!==this.getPreviewURL())return this.preloadingURL=e,new Ld(e).then(i=>{let{width:n,height:r}=i;return this.getWidth()&&this.getHeight()||this.setAttributes({width:n,height:r}),this.preloadingURL=null,this.setPreviewURL(e),t?.()}).catch(()=>(this.preloadingURL=null,t?.()))}};ti(Io,"previewablePattern",/^image(\/(gif|png|webp|jpe?g)|$)/);var Ro=class s extends Hs{static fromJSON(e){return new this(Io.fromJSON(e.attachment),e.attributes)}constructor(e){super(...arguments),this.attachment=e,this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}ensureAttachmentExclusivelyHasAttribute(e){this.hasAttribute(e)&&(this.attachment.hasAttribute(e)||this.attachment.setAttributes(this.attributes.slice([e])),this.attributes=this.attributes.remove(e))}removeProhibitedAttributes(){let e=this.attributes.slice(s.permittedAttributes);e.isEqualTo(this.attributes)||(this.attributes=e)}getValue(){return this.attachment}isSerializable(){return!this.attachment.isPending()}getCaption(){return this.attributes.get("caption")||""}isEqualTo(e){var t;return super.isEqualTo(e)&&this.attachment.id===(e==null||(t=e.attachment)===null||t===void 0?void 0:t.id)}toString(){return"\uFFFC"}toJSON(){let e=super.toJSON(...arguments);return e.attachment=this.attachment,e}getCacheKey(){return[super.getCacheKey(...arguments),this.attachment.getCacheKey()].join("/")}toConsole(){return JSON.stringify(this.toString())}};ti(Ro,"permittedAttributes",["caption","presentation"]),Hs.registerType("attachment",Ro);var Il=class extends Hs{static fromJSON(e){return new this(e.string,e.attributes)}constructor(e){super(...arguments),this.string=(t=>t.replace(/\r\n?/g,`
`))(e),this.length=this.string.length}getValue(){return this.string}toString(){return this.string.toString()}isBlockBreak(){return this.toString()===`
`&&this.getAttribute("blockBreak")===!0}toJSON(){let e=super.toJSON(...arguments);return e.string=this.string,e}canBeConsolidatedWith(e){return e&&this.hasSameConstructorAs(e)&&this.hasSameAttributesAsPiece(e)}consolidateWith(e){return new this.constructor(this.toString()+e.toString(),this.attributes)}splitAtOffset(e){let t,i;return e===0?(t=null,i=this):e===this.length?(t=this,i=null):(t=new this.constructor(this.string.slice(0,e),this.attributes),i=new this.constructor(this.string.slice(e),this.attributes)),[t,i]}toConsole(){let{string:e}=this;return e.length>15&&(e=e.slice(0,14)+"\u2026"),JSON.stringify(e.toString())}};Hs.registerType("string",Il);var No=class extends zs{static box(e){return e instanceof this?e:new this(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects=e.slice(0),this.length=this.objects.length}indexOf(e){return this.objects.indexOf(e)}splice(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new this.constructor(Fv(this.objects,...t))}eachObject(e){return this.objects.map((t,i)=>e(t,i))}insertObjectAtIndex(e,t){return this.splice(t,0,e)}insertSplittableListAtIndex(e,t){return this.splice(t,0,...e.objects)}insertSplittableListAtPosition(e,t){let[i,n]=this.splitObjectAtPosition(t);return new this.constructor(i).insertSplittableListAtIndex(e,n)}editObjectAtIndex(e,t){return this.replaceObjectAtIndex(t(this.objects[e]),e)}replaceObjectAtIndex(e,t){return this.splice(t,1,e)}removeObjectAtIndex(e){return this.splice(e,1)}getObjectAtIndex(e){return this.objects[e]}getSplittableListInRange(e){let[t,i,n]=this.splitObjectsAtRange(e);return new this.constructor(t.slice(i,n+1))}selectSplittableList(e){let t=this.objects.filter(i=>e(i));return new this.constructor(t)}removeObjectsInRange(e){let[t,i,n]=this.splitObjectsAtRange(e);return new this.constructor(t).splice(i,n-i+1)}transformObjectsInRange(e,t){let[i,n,r]=this.splitObjectsAtRange(e),o=i.map((a,l)=>n<=l&&l<=r?t(a):a);return new this.constructor(o)}splitObjectsAtRange(e){let t,[i,n,r]=this.splitObjectAtPosition(YF(e));return[i,t]=new this.constructor(i).splitObjectAtPosition(XF(e)+r),[i,n,t-1]}getObjectAtPosition(e){let{index:t}=this.findIndexAndOffsetAtPosition(e);return this.objects[t]}splitObjectAtPosition(e){let t,i,{index:n,offset:r}=this.findIndexAndOffsetAtPosition(e),o=this.objects.slice(0);if(n!=null)if(r===0)t=n,i=0;else{let a=this.getObjectAtIndex(n),[l,c]=a.splitAtOffset(r);o.splice(n,1,l,c),t=n+1,i=l.getLength()-r}else t=o.length,i=0;return[o,t,i]}consolidate(){let e=[],t=this.objects[0];return this.objects.slice(1).forEach(i=>{var n,r;(n=(r=t).canBeConsolidatedWith)!==null&&n!==void 0&&n.call(r,i)?t=t.consolidateWith(i):(e.push(t),t=i)}),t&&e.push(t),new this.constructor(e)}consolidateFromIndexToIndex(e,t){let i=this.objects.slice(0).slice(e,t+1),n=new this.constructor(i).consolidate().toArray();return this.splice(e,i.length,...n)}findIndexAndOffsetAtPosition(e){let t,i=0;for(t=0;t<this.objects.length;t++){let n=i+this.objects[t].getLength();if(i<=e&&e<n)return{index:t,offset:e-i};i=n}return{index:null,offset:null}}findPositionAtIndexAndOffset(e,t){let i=0;for(let n=0;n<this.objects.length;n++){let r=this.objects[n];if(n<e)i+=r.getLength();else if(n===e){i+=t;break}}return i}getEndPosition(){return this.endPosition==null&&(this.endPosition=0,this.objects.forEach(e=>this.endPosition+=e.getLength())),this.endPosition}toString(){return this.objects.join("")}toArray(){return this.objects.slice(0)}toJSON(){return this.toArray()}isEqualTo(e){return super.isEqualTo(...arguments)||GF(this.objects,e?.objects)}contentsForInspection(){return{objects:"[".concat(this.objects.map(e=>e.inspect()).join(", "),"]")}}},GF=function(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(s.length!==e.length)return!1;let t=!0;for(let i=0;i<s.length;i++){let n=s[i];t&&!n.isEqualTo(e[i])&&(t=!1)}return t},YF=s=>s[0],XF=s=>s[1],hi=class extends zs{static textForAttachmentWithAttributes(e,t){return new this([new Ro(e,t)])}static textForStringWithAttributes(e,t){return new this([new Il(e,t)])}static fromJSON(e){return new this(Array.from(e).map(t=>Hs.fromJSON(t)))}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments);let t=e.filter(i=>!i.isEmpty());this.pieceList=new No(t)}copy(){return this.copyWithPieceList(this.pieceList)}copyWithPieceList(e){return new this.constructor(e.consolidate().toArray())}copyUsingObjectMap(e){let t=this.getPieces().map(i=>e.find(i)||i);return new this.constructor(t)}appendText(e){return this.insertTextAtPosition(e,this.getLength())}insertTextAtPosition(e,t){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(e.pieceList,t))}removeTextAtRange(e){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(e))}replaceTextAtRange(e,t){return this.removeTextAtRange(t).insertTextAtPosition(e,t[0])}moveTextFromRangeToPosition(e,t){if(e[0]<=t&&t<=e[1])return;let i=this.getTextAtRange(e),n=i.getLength();return e[0]<t&&(t-=n),this.removeTextAtRange(e).insertTextAtPosition(i,t)}addAttributeAtRange(e,t,i){let n={};return n[e]=t,this.addAttributesAtRange(n,i)}addAttributesAtRange(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,i=>i.copyWithAdditionalAttributes(e)))}removeAttributeAtRange(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,i=>i.copyWithoutAttribute(e)))}setAttributesAtRange(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,i=>i.copyWithAttributes(e)))}getAttributesAtPosition(e){var t;return((t=this.pieceList.getObjectAtPosition(e))===null||t===void 0?void 0:t.getAttributes())||{}}getCommonAttributes(){let e=Array.from(this.pieceList.toArray()).map(t=>t.getAttributes());return zi.fromCommonAttributesOfObjects(e).toObject()}getCommonAttributesAtRange(e){return this.getTextAtRange(e).getCommonAttributes()||{}}getExpandedRangeForAttributeAtOffset(e,t){let i,n=i=t,r=this.getLength();for(;n>0&&this.getCommonAttributesAtRange([n-1,i])[e];)n--;for(;i<r&&this.getCommonAttributesAtRange([t,i+1])[e];)i++;return[n,i]}getTextAtRange(e){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(e))}getStringAtRange(e){return this.pieceList.getSplittableListInRange(e).toString()}getStringAtPosition(e){return this.getStringAtRange([e,e+1])}startsWithString(e){return this.getStringAtRange([0,e.length])===e}endsWithString(e){let t=this.getLength();return this.getStringAtRange([t-e.length,t])===e}getAttachmentPieces(){return this.pieceList.toArray().filter(e=>!!e.attachment)}getAttachments(){return this.getAttachmentPieces().map(e=>e.attachment)}getAttachmentAndPositionById(e){let t=0;for(let n of this.pieceList.toArray()){var i;if(((i=n.attachment)===null||i===void 0?void 0:i.id)===e)return{attachment:n.attachment,position:t};t+=n.length}return{attachment:null,position:null}}getAttachmentById(e){let{attachment:t}=this.getAttachmentAndPositionById(e);return t}getRangeOfAttachment(e){let t=this.getAttachmentAndPositionById(e.id),i=t.position;if(e=t.attachment)return[i,i+1]}updateAttributesForAttachment(e,t){let i=this.getRangeOfAttachment(t);return i?this.addAttributesAtRange(e,i):this}getLength(){return this.pieceList.getEndPosition()}isEmpty(){return this.getLength()===0}isEqualTo(e){var t;return super.isEqualTo(e)||(e==null||(t=e.pieceList)===null||t===void 0?void 0:t.isEqualTo(this.pieceList))}isBlockBreak(){return this.getLength()===1&&this.pieceList.getObjectAtIndex(0).isBlockBreak()}eachPiece(e){return this.pieceList.eachObject(e)}getPieces(){return this.pieceList.toArray()}getPieceAtPosition(e){return this.pieceList.getObjectAtPosition(e)}contentsForInspection(){return{pieceList:this.pieceList.inspect()}}toSerializableText(){let e=this.pieceList.selectSplittableList(t=>t.isSerializable());return this.copyWithPieceList(e)}toString(){return this.pieceList.toString()}toJSON(){return this.pieceList.toJSON()}toConsole(){return JSON.stringify(this.pieceList.toArray().map(e=>JSON.parse(e.toConsole())))}getDirection(){return PF(this.toString())}isRTL(){return this.getDirection()==="rtl"}},pn=class s extends zs{static fromJSON(e){return new this(hi.fromJSON(e.text),e.attributes,e.htmlAttributes)}constructor(e,t,i){super(...arguments),this.text=KF(e||new hi),this.attributes=t||[],this.htmlAttributes=i||{}}isEmpty(){return this.text.isBlockBreak()}isEqualTo(e){return!!super.isEqualTo(e)||this.text.isEqualTo(e?.text)&&_r(this.attributes,e?.attributes)&&zo(this.htmlAttributes,e?.htmlAttributes)}copyWithText(e){return new s(e,this.attributes,this.htmlAttributes)}copyWithoutText(){return this.copyWithText(null)}copyWithAttributes(e){return new s(this.text,e,this.htmlAttributes)}copyWithoutAttributes(){return this.copyWithAttributes(null)}copyUsingObjectMap(e){let t=e.find(this.text);return t?this.copyWithText(t):this.copyWithText(this.text.copyUsingObjectMap(e))}addAttribute(e){let t=this.attributes.concat(PS(e));return this.copyWithAttributes(t)}addHTMLAttribute(e,t){let i=Object.assign({},this.htmlAttributes,{[e]:t});return new s(this.text,this.attributes,i)}removeAttribute(e){let{listAttribute:t}=at(e),i=MS(MS(this.attributes,e),t);return this.copyWithAttributes(i)}removeLastAttribute(){return this.removeAttribute(this.getLastAttribute())}getLastAttribute(){return _S(this.attributes)}getAttributes(){return this.attributes.slice(0)}getAttributeLevel(){return this.attributes.length}getAttributeAtLevel(e){return this.attributes[e-1]}hasAttribute(e){return this.attributes.includes(e)}hasAttributes(){return this.getAttributeLevel()>0}getLastNestableAttribute(){return _S(this.getNestableAttributes())}getNestableAttributes(){return this.attributes.filter(e=>at(e).nestable)}getNestingLevel(){return this.getNestableAttributes().length}decreaseNestingLevel(){let e=this.getLastNestableAttribute();return e?this.removeAttribute(e):this}increaseNestingLevel(){let e=this.getLastNestableAttribute();if(e){let t=this.attributes.lastIndexOf(e),i=Fv(this.attributes,t+1,0,...PS(e));return this.copyWithAttributes(i)}return this}getListItemAttributes(){return this.attributes.filter(e=>at(e).listAttribute)}isListItem(){var e;return(e=at(this.getLastAttribute()))===null||e===void 0?void 0:e.listAttribute}isTerminalBlock(){var e;return(e=at(this.getLastAttribute()))===null||e===void 0?void 0:e.terminal}breaksOnReturn(){var e;return(e=at(this.getLastAttribute()))===null||e===void 0?void 0:e.breakOnReturn}findLineBreakInDirectionFromPosition(e,t){let i=this.toString(),n;switch(e){case"forward":n=i.indexOf(`
`,t);break;case"backward":n=i.slice(0,t).lastIndexOf(`
`)}if(n!==-1)return n}contentsForInspection(){return{text:this.text.inspect(),attributes:this.attributes}}toString(){return this.text.toString()}toJSON(){return{text:this.text,attributes:this.attributes,htmlAttributes:this.htmlAttributes}}getDirection(){return this.text.getDirection()}isRTL(){return this.text.isRTL()}getLength(){return this.text.getLength()}canBeConsolidatedWith(e){return!this.hasAttributes()&&!e.hasAttributes()&&this.getDirection()===e.getDirection()}consolidateWith(e){let t=hi.textForStringWithAttributes(`
`),i=this.getTextWithoutBlockBreak().appendText(t);return this.copyWithText(i.appendText(e.text))}splitAtOffset(e){let t,i;return e===0?(t=null,i=this):e===this.getLength()?(t=this,i=null):(t=this.copyWithText(this.text.getTextAtRange([0,e])),i=this.copyWithText(this.text.getTextAtRange([e,this.getLength()]))),[t,i]}getBlockBreakPosition(){return this.text.getLength()-1}getTextWithoutBlockBreak(){return QS(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()}canBeGrouped(e){return this.attributes[e]}canBeGroupedWith(e,t){let i=e.getAttributes(),n=i[t],r=this.attributes[t];return r===n&&!(at(r).group===!1&&!(()=>{if(!bd){bd=[];for(let o in jt){let{listAttribute:a}=jt[o];a!=null&&bd.push(a)}}return bd})().includes(i[t+1]))&&(this.getDirection()===e.getDirection()||e.isEmpty())}},KF=function(s){return s=JF(s),s=QF(s)},JF=function(s){let e=!1,t=s.getPieces(),i=t.slice(0,t.length-1),n=t[t.length-1];return n?(i=i.map(r=>r.isBlockBreak()?(e=!0,eI(r)):r),e?new hi([...i,n]):s):s},ZF=hi.textForStringWithAttributes(`
`,{blockBreak:!0}),QF=function(s){return QS(s)?s:s.appendText(ZF)},QS=function(s){let e=s.getLength();return e===0?!1:s.getTextAtRange([e-1,e]).isBlockBreak()},eI=s=>s.copyWithoutAttribute("blockBreak"),PS=function(s){let{listAttribute:e}=at(s);return e?[e,s]:[s]},_S=s=>s.slice(-1)[0],MS=function(s,e){let t=s.lastIndexOf(e);return t===-1?s:Fv(s,t,1)},ei=class extends zs{static fromJSON(e){return new this(Array.from(e).map(t=>pn.fromJSON(t)))}static fromString(e,t){let i=hi.textForStringWithAttributes(e,t);return new this([new pn(i)])}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),e.length===0&&(e=[new pn]),this.blockList=No.box(e)}isEmpty(){let e=this.getBlockAtIndex(0);return this.blockList.length===1&&e.isEmpty()&&!e.hasAttributes()}copy(){let e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray();return new this.constructor(e)}copyUsingObjectsFromDocument(e){let t=new wv(e.getObjects());return this.copyUsingObjectMap(t)}copyUsingObjectMap(e){let t=this.getBlocks().map(i=>e.find(i)||i.copyUsingObjectMap(e));return new this.constructor(t)}copyWithBaseBlockAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.getBlocks().map(i=>{let n=e.concat(i.getAttributes());return i.copyWithAttributes(n)});return new this.constructor(t)}replaceBlock(e,t){let i=this.blockList.indexOf(e);return i===-1?this:new this.constructor(this.blockList.replaceObjectAtIndex(t,i))}insertDocumentAtRange(e,t){let{blockList:i}=e;t=Ne(t);let[n]=t,{index:r,offset:o}=this.locationFromPosition(n),a=this,l=this.getBlockAtPosition(n);return Bs(t)&&l.isEmpty()&&!l.hasAttributes()?a=new this.constructor(a.blockList.removeObjectAtIndex(r)):l.getBlockBreakPosition()===o&&n++,a=a.removeTextAtRange(t),new this.constructor(a.blockList.insertSplittableListAtPosition(i,n))}mergeDocumentAtRange(e,t){let i,n;t=Ne(t);let[r]=t,o=this.locationFromPosition(r),a=this.getBlockAtIndex(o.index).getAttributes(),l=e.getBaseBlockAttributes(),c=a.slice(-l.length);if(_r(l,c)){let f=a.slice(0,-l.length);i=e.copyWithBaseBlockAttributes(f)}else i=e.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(a);let u=i.getBlockCount(),h=i.getBlockAtIndex(0);if(_r(a,h.getAttributes())){let f=h.getTextWithoutBlockBreak();if(n=this.insertTextAtRange(f,t),u>1){i=new this.constructor(i.getBlocks().slice(1));let p=r+f.getLength();n=n.insertDocumentAtRange(i,p)}}else n=this.insertDocumentAtRange(i,t);return n}insertTextAtRange(e,t){t=Ne(t);let[i]=t,{index:n,offset:r}=this.locationFromPosition(i),o=this.removeTextAtRange(t);return new this.constructor(o.blockList.editObjectAtIndex(n,a=>a.copyWithText(a.text.insertTextAtPosition(e,r))))}removeTextAtRange(e){let t;e=Ne(e);let[i,n]=e;if(Bs(e))return this;let[r,o]=Array.from(this.locationRangeFromRange(e)),a=r.index,l=r.offset,c=this.getBlockAtIndex(a),u=o.index,h=o.offset,f=this.getBlockAtIndex(u);if(n-i==1&&c.getBlockBreakPosition()===l&&f.getBlockBreakPosition()!==h&&f.text.getStringAtPosition(h)===`
`)t=this.blockList.editObjectAtIndex(u,p=>p.copyWithText(p.text.removeTextAtRange([h,h+1])));else{let p,v=c.text.getTextAtRange([0,l]),w=f.text.getTextAtRange([h,f.getLength()]),S=v.appendText(w);p=a!==u&&l===0&&c.getAttributeLevel()>=f.getAttributeLevel()?f.copyWithText(S):c.copyWithText(S);let A=u+1-a;t=this.blockList.splice(a,A,p)}return new this.constructor(t)}moveTextFromRangeToPosition(e,t){let i;e=Ne(e);let[n,r]=e;if(n<=t&&t<=r)return this;let o=this.getDocumentAtRange(e),a=this.removeTextAtRange(e),l=n<t;l&&(t-=o.getLength());let[c,...u]=o.getBlocks();return u.length===0?(i=c.getTextWithoutBlockBreak(),l&&(t+=1)):i=c.text,a=a.insertTextAtRange(i,t),u.length===0?a:(o=new this.constructor(u),t+=i.getLength(),a.insertDocumentAtRange(o,t))}addAttributeAtRange(e,t,i){let{blockList:n}=this;return this.eachBlockAtRange(i,(r,o,a)=>n=n.editObjectAtIndex(a,function(){return at(e)?r.addAttribute(e,t):o[0]===o[1]?r:r.copyWithText(r.text.addAttributeAtRange(e,t,o))})),new this.constructor(n)}addAttribute(e,t){let{blockList:i}=this;return this.eachBlock((n,r)=>i=i.editObjectAtIndex(r,()=>n.addAttribute(e,t))),new this.constructor(i)}removeAttributeAtRange(e,t){let{blockList:i}=this;return this.eachBlockAtRange(t,function(n,r,o){at(e)?i=i.editObjectAtIndex(o,()=>n.removeAttribute(e)):r[0]!==r[1]&&(i=i.editObjectAtIndex(o,()=>n.copyWithText(n.text.removeAttributeAtRange(e,r))))}),new this.constructor(i)}updateAttributesForAttachment(e,t){let i=this.getRangeOfAttachment(t),[n]=Array.from(i),{index:r}=this.locationFromPosition(n),o=this.getTextAtIndex(r);return new this.constructor(this.blockList.editObjectAtIndex(r,a=>a.copyWithText(o.updateAttributesForAttachment(e,t))))}removeAttributeForAttachment(e,t){let i=this.getRangeOfAttachment(t);return this.removeAttributeAtRange(e,i)}setHTMLAttributeAtPosition(e,t,i){let n=this.getBlockAtPosition(e),r=n.addHTMLAttribute(t,i);return this.replaceBlock(n,r)}insertBlockBreakAtRange(e){let t;e=Ne(e);let[i]=e,{offset:n}=this.locationFromPosition(i),r=this.removeTextAtRange(e);return n===0&&(t=[new pn]),new this.constructor(r.blockList.insertSplittableListAtPosition(new No(t),i))}applyBlockAttributeAtRange(e,t,i){let n=this.expandRangeToLineBreaksAndSplitBlocks(i),r=n.document;i=n.range;let o=at(e);if(o.listAttribute){r=r.removeLastListAttributeAtRange(i,{exceptAttributeName:e});let a=r.convertLineBreaksToBlockBreaksInRange(i);r=a.document,i=a.range}else r=o.exclusive?r.removeBlockAttributesAtRange(i):o.terminal?r.removeLastTerminalAttributeAtRange(i):r.consolidateBlocksAtRange(i);return r.addAttributeAtRange(e,t,i)}removeLastListAttributeAtRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{blockList:i}=this;return this.eachBlockAtRange(e,function(n,r,o){let a=n.getLastAttribute();a&&at(a).listAttribute&&a!==t.exceptAttributeName&&(i=i.editObjectAtIndex(o,()=>n.removeAttribute(a)))}),new this.constructor(i)}removeLastTerminalAttributeAtRange(e){let{blockList:t}=this;return this.eachBlockAtRange(e,function(i,n,r){let o=i.getLastAttribute();o&&at(o).terminal&&(t=t.editObjectAtIndex(r,()=>i.removeAttribute(o)))}),new this.constructor(t)}removeBlockAttributesAtRange(e){let{blockList:t}=this;return this.eachBlockAtRange(e,function(i,n,r){i.hasAttributes()&&(t=t.editObjectAtIndex(r,()=>i.copyWithoutAttributes()))}),new this.constructor(t)}expandRangeToLineBreaksAndSplitBlocks(e){let t;e=Ne(e);let[i,n]=e,r=this.locationFromPosition(i),o=this.locationFromPosition(n),a=this,l=a.getBlockAtIndex(r.index);if(r.offset=l.findLineBreakInDirectionFromPosition("backward",r.offset),r.offset!=null&&(t=a.positionFromLocation(r),a=a.insertBlockBreakAtRange([t,t+1]),o.index+=1,o.offset-=a.getBlockAtIndex(r.index).getLength(),r.index+=1),r.offset=0,o.offset===0&&o.index>r.index)o.index-=1,o.offset=a.getBlockAtIndex(o.index).getBlockBreakPosition();else{let c=a.getBlockAtIndex(o.index);c.text.getStringAtRange([o.offset-1,o.offset])===`
`?o.offset-=1:o.offset=c.findLineBreakInDirectionFromPosition("forward",o.offset),o.offset!==c.getBlockBreakPosition()&&(t=a.positionFromLocation(o),a=a.insertBlockBreakAtRange([t,t+1]))}return i=a.positionFromLocation(r),n=a.positionFromLocation(o),{document:a,range:e=Ne([i,n])}}convertLineBreaksToBlockBreaksInRange(e){e=Ne(e);let[t]=e,i=this.getStringAtRange(e).slice(0,-1),n=this;return i.replace(/.*?\n/g,function(r){t+=r.length,n=n.insertBlockBreakAtRange([t-1,t])}),{document:n,range:e}}consolidateBlocksAtRange(e){e=Ne(e);let[t,i]=e,n=this.locationFromPosition(t).index,r=this.locationFromPosition(i).index;return new this.constructor(this.blockList.consolidateFromIndexToIndex(n,r))}getDocumentAtRange(e){e=Ne(e);let t=this.blockList.getSplittableListInRange(e).toArray();return new this.constructor(t)}getStringAtRange(e){let t,i=e=Ne(e);return i[i.length-1]!==this.getLength()&&(t=-1),this.getDocumentAtRange(e).toString().slice(0,t)}getBlockAtIndex(e){return this.blockList.getObjectAtIndex(e)}getBlockAtPosition(e){let{index:t}=this.locationFromPosition(e);return this.getBlockAtIndex(t)}getTextAtIndex(e){var t;return(t=this.getBlockAtIndex(e))===null||t===void 0?void 0:t.text}getTextAtPosition(e){let{index:t}=this.locationFromPosition(e);return this.getTextAtIndex(t)}getPieceAtPosition(e){let{index:t,offset:i}=this.locationFromPosition(e);return this.getTextAtIndex(t).getPieceAtPosition(i)}getCharacterAtPosition(e){let{index:t,offset:i}=this.locationFromPosition(e);return this.getTextAtIndex(t).getStringAtRange([i,i+1])}getLength(){return this.blockList.getEndPosition()}getBlocks(){return this.blockList.toArray()}getBlockCount(){return this.blockList.length}getEditCount(){return this.editCount}eachBlock(e){return this.blockList.eachObject(e)}eachBlockAtRange(e,t){let i,n;e=Ne(e);let[r,o]=e,a=this.locationFromPosition(r),l=this.locationFromPosition(o);if(a.index===l.index)return i=this.getBlockAtIndex(a.index),n=[a.offset,l.offset],t(i,n,a.index);for(let c=a.index;c<=l.index;c++)if(i=this.getBlockAtIndex(c),i){switch(c){case a.index:n=[a.offset,i.text.getLength()];break;case l.index:n=[0,l.offset];break;default:n=[0,i.text.getLength()]}t(i,n,c)}}getCommonAttributesAtRange(e){e=Ne(e);let[t]=e;if(Bs(e))return this.getCommonAttributesAtPosition(t);{let i=[],n=[];return this.eachBlockAtRange(e,function(r,o){if(o[0]!==o[1])return i.push(r.text.getCommonAttributesAtRange(o)),n.push(OS(r))}),zi.fromCommonAttributesOfObjects(i).merge(zi.fromCommonAttributesOfObjects(n)).toObject()}}getCommonAttributesAtPosition(e){let t,i,{index:n,offset:r}=this.locationFromPosition(e),o=this.getBlockAtIndex(n);if(!o)return{};let a=OS(o),l=o.text.getAttributesAtPosition(r),c=o.text.getAttributesAtPosition(r-1),u=Object.keys(Cr).filter(h=>Cr[h].inheritable);for(t in c)i=c[t],(i===l[t]||u.includes(t))&&(a[t]=i);return a}getRangeOfCommonAttributeAtPosition(e,t){let{index:i,offset:n}=this.locationFromPosition(t),r=this.getTextAtIndex(i),[o,a]=Array.from(r.getExpandedRangeForAttributeAtOffset(e,n)),l=this.positionFromLocation({index:i,offset:o}),c=this.positionFromLocation({index:i,offset:a});return Ne([l,c])}getBaseBlockAttributes(){let e=this.getBlockAtIndex(0).getAttributes();for(let t=1;t<this.getBlockCount();t++){let i=this.getBlockAtIndex(t).getAttributes(),n=Math.min(e.length,i.length);e=(()=>{let r=[];for(let o=0;o<n&&i[o]===e[o];o++)r.push(i[o]);return r})()}return e}getAttachmentById(e){for(let t of this.getAttachments())if(t.id===e)return t}getAttachmentPieces(){let e=[];return this.blockList.eachObject(t=>{let{text:i}=t;return e=e.concat(i.getAttachmentPieces())}),e}getAttachments(){return this.getAttachmentPieces().map(e=>e.attachment)}getRangeOfAttachment(e){let t=0,i=this.blockList.toArray();for(let n=0;n<i.length;n++){let{text:r}=i[n],o=r.getRangeOfAttachment(e);if(o)return Ne([t+o[0],t+o[1]]);t+=r.getLength()}}getLocationRangeOfAttachment(e){let t=this.getRangeOfAttachment(e);return this.locationRangeFromRange(t)}getAttachmentPieceForAttachment(e){for(let t of this.getAttachmentPieces())if(t.attachment===e)return t}findRangesForBlockAttribute(e){let t=0,i=[];return this.getBlocks().forEach(n=>{let r=n.getLength();n.hasAttribute(e)&&i.push([t,t+r]),t+=r}),i}findRangesForTextAttribute(e){let{withValue:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=0,n=[],r=[];return this.getPieces().forEach(o=>{let a=o.getLength();(function(l){return t?l.getAttribute(e)===t:l.hasAttribute(e)})(o)&&(n[1]===i?n[1]=i+a:r.push(n=[i,i+a])),i+=a}),r}locationFromPosition(e){let t=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,e));if(t.index!=null)return t;{let i=this.getBlocks();return{index:i.length-1,offset:i[i.length-1].getLength()}}}positionFromLocation(e){return this.blockList.findPositionAtIndexAndOffset(e.index,e.offset)}locationRangeFromPosition(e){return Ne(this.locationFromPosition(e))}locationRangeFromRange(e){if(!(e=Ne(e)))return;let[t,i]=Array.from(e),n=this.locationFromPosition(t),r=this.locationFromPosition(i);return Ne([n,r])}rangeFromLocationRange(e){let t;e=Ne(e);let i=this.positionFromLocation(e[0]);return Bs(e)||(t=this.positionFromLocation(e[1])),Ne([i,t])}isEqualTo(e){return this.blockList.isEqualTo(e?.blockList)}getTexts(){return this.getBlocks().map(e=>e.text)}getPieces(){let e=[];return Array.from(this.getTexts()).forEach(t=>{e.push(...Array.from(t.getPieces()||[]))}),e}getObjects(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())}toSerializableDocument(){let e=[];return this.blockList.eachObject(t=>e.push(t.copyWithText(t.text.toSerializableText()))),new this.constructor(e)}toString(){return this.blockList.toString()}toJSON(){return this.blockList.toJSON()}toConsole(){return JSON.stringify(this.blockList.toArray().map(e=>JSON.parse(e.text.toConsole())))}},OS=function(s){let e={},t=s.getLastAttribute();return t&&(e[t]=!0),e},sv=function(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{string:s=Pl(s),attributes:e,type:"string"}},LS=(s,e)=>{try{return JSON.parse(s.getAttribute("data-trix-".concat(e)))}catch{return{}}},Or=class extends it{static parse(e,t){let i=new this(e,t);return i.parse(),i}constructor(e){let{referenceElement:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.html=e,this.referenceElement=t,this.blocks=[],this.blockElements=[],this.processedElements=[]}getDocument(){return ei.fromJSON(this.blocks)}parse(){try{this.createHiddenContainer(),Do.setHTML(this.containerElement,this.html);let e=Td(this.containerElement,{usingFilter:iI});for(;e.nextNode();)this.processNode(e.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}}createHiddenContainer(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=Se({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))}removeHiddenContainer(){return mn(this.containerElement)}processNode(e){switch(e.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(e))return this.appendBlockForTextNode(e),this.processTextNode(e);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(e),this.processElement(e)}}appendBlockForTextNode(e){let t=e.parentNode;if(t===this.currentBlockElement&&this.isBlockElement(e.previousSibling))return this.appendStringWithAttributes(`
`);if(t===this.containerElement||this.isBlockElement(t)){var i;let n=this.getBlockAttributes(t),r=this.getBlockHTMLAttributes(t);_r(n,(i=this.currentBlock)===null||i===void 0?void 0:i.attributes)||(this.currentBlock=this.appendBlockForAttributesWithElement(n,t,r),this.currentBlockElement=t)}}appendBlockForElement(e){let t=this.isBlockElement(e),i=Er(this.currentBlockElement,e);if(t&&!this.isBlockElement(e.firstChild)){if(!this.isInsignificantTextNode(e.firstChild)||!this.isBlockElement(e.firstElementChild)){let n=this.getBlockAttributes(e),r=this.getBlockHTMLAttributes(e);if(e.firstChild){if(i&&_r(n,this.currentBlock.attributes))return this.appendStringWithAttributes(`
`);this.currentBlock=this.appendBlockForAttributesWithElement(n,e,r),this.currentBlockElement=e}}}else if(this.currentBlockElement&&!i&&!t){let n=this.findParentBlockElement(e);if(n)return this.appendBlockForElement(n);this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null}}findParentBlockElement(e){let{parentElement:t}=e;for(;t&&t!==this.containerElement;){if(this.isBlockElement(t)&&this.blockElements.includes(t))return t;t=t.parentElement}return null}processTextNode(e){let t=e.data;var i;return kS(e.parentNode)||(t=Nv(t),eA((i=e.previousSibling)===null||i===void 0?void 0:i.textContent)&&(t=sI(t))),this.appendStringWithAttributes(t,this.getTextAttributes(e.parentNode))}processElement(e){let t;if(Ar(e)){if(t=LS(e,"attachment"),Object.keys(t).length){let i=this.getTextAttributes(e);this.appendAttachmentWithAttributes(t,i),e.innerHTML=""}return this.processedElements.push(e)}switch(Ut(e)){case"br":return this.isExtraBR(e)||this.isBlockElement(e.nextSibling)||this.appendStringWithAttributes(`
`,this.getTextAttributes(e)),this.processedElements.push(e);case"img":t={url:e.getAttribute("src"),contentType:"image"};let i=(n=>{let r=n.getAttribute("width"),o=n.getAttribute("height"),a={};return r&&(a.width=parseInt(r,10)),o&&(a.height=parseInt(o,10)),a})(e);for(let n in i){let r=i[n];t[n]=r}return this.appendAttachmentWithAttributes(t,this.getTextAttributes(e)),this.processedElements.push(e);case"tr":if(this.needsTableSeparator(e))return this.appendStringWithAttributes(Sd.tableRowSeparator);break;case"td":if(this.needsTableSeparator(e))return this.appendStringWithAttributes(Sd.tableCellSeparator)}}appendBlockForAttributesWithElement(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.blockElements.push(t);let n=function(){return{text:[],attributes:arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},htmlAttributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}}}(e,i);return this.blocks.push(n),n}appendEmptyBlock(){return this.appendBlockForAttributesWithElement([],null)}appendStringWithAttributes(e,t){return this.appendPiece(sv(e,t))}appendAttachmentWithAttributes(e,t){return this.appendPiece(function(i){return{attachment:i,attributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},type:"attachment"}}(e,t))}appendPiece(e){return this.blocks.length===0&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(e)}appendStringToTextAtIndex(e,t){let{text:i}=this.blocks[t],n=i[i.length-1];if(n?.type!=="string")return i.push(sv(e));n.string+=e}prependStringToTextAtIndex(e,t){let{text:i}=this.blocks[t],n=i[0];if(n?.type!=="string")return i.unshift(sv(e));n.string=e+n.string}getTextAttributes(e){let t,i={};for(let n in Cr){let r=Cr[n];if(r.tagName&&fn(e,{matchingSelector:r.tagName,untilNode:this.containerElement}))i[n]=!0;else if(r.parser){if(t=r.parser(e),t){let o=!1;for(let a of this.findBlockElementAncestors(e))if(r.parser(a)===t){o=!0;break}o||(i[n]=t)}}else r.styleProperty&&(t=e.style[r.styleProperty],t&&(i[n]=t))}if(Ar(e)){let n=LS(e,"attributes");for(let r in n)t=n[r],i[r]=t}return i}getBlockAttributes(e){let t=[];for(;e&&e!==this.containerElement;){for(let n in jt){let r=jt[n];var i;r.parse!==!1&&Ut(e)===r.tagName&&((i=r.test)!==null&&i!==void 0&&i.call(r,e)||!r.test)&&(t.push(n),r.listAttribute&&t.push(r.listAttribute))}e=e.parentNode}return t.reverse()}getBlockHTMLAttributes(e){let t={},i=Object.values(jt).find(n=>n.tagName===Ut(e));return(i?.htmlAttributes||[]).forEach(n=>{e.hasAttribute(n)&&(t[n]=e.getAttribute(n))}),t}findBlockElementAncestors(e){let t=[];for(;e&&e!==this.containerElement;){let i=Ut(e);Ml().includes(i)&&t.push(e),e=e.parentNode}return t}isBlockElement(e){if(e?.nodeType===Node.ELEMENT_NODE&&!Ar(e)&&!fn(e,{matchingSelector:"td",untilNode:this.containerElement}))return Ml().includes(Ut(e))||window.getComputedStyle(e).display==="block"}isInsignificantTextNode(e){if(e?.nodeType!==Node.TEXT_NODE||!nI(e.data))return;let{parentNode:t,previousSibling:i,nextSibling:n}=e;return tI(t.previousSibling)&&!this.isBlockElement(t.previousSibling)||kS(t)?void 0:!i||this.isBlockElement(i)||!n||this.isBlockElement(n)}isExtraBR(e){return Ut(e)==="br"&&this.isBlockElement(e.parentNode)&&e.parentNode.lastChild===e}needsTableSeparator(e){if(Sd.removeBlankTableCells){var t;let i=(t=e.previousSibling)===null||t===void 0?void 0:t.textContent;return i&&/\S/.test(i)}return e.previousSibling}translateBlockElementMarginsToNewlines(){let e=this.getMarginOfDefaultBlockElement();for(let t=0;t<this.blocks.length;t++){let i=this.getMarginOfBlockElementAtIndex(t);i&&(i.top>2*e.top&&this.prependStringToTextAtIndex(`
`,t),i.bottom>2*e.bottom&&this.appendStringToTextAtIndex(`
`,t))}}getMarginOfBlockElementAtIndex(e){let t=this.blockElements[e];if(t&&t.textContent&&!Ml().includes(Ut(t))&&!this.processedElements.includes(t))return DS(t)}getMarginOfDefaultBlockElement(){let e=Se(jt.default.tagName);return this.containerElement.appendChild(e),DS(e)}},kS=function(s){let{whiteSpace:e}=window.getComputedStyle(s);return["pre","pre-wrap","pre-line"].includes(e)},tI=s=>s&&!eA(s.textContent),DS=function(s){let e=window.getComputedStyle(s);if(e.display==="block")return{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}},iI=function(s){return Ut(s)==="style"?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},sI=s=>s.replace(new RegExp("^".concat(Rv.source,"+")),""),nI=s=>new RegExp("^".concat(Rv.source,"*$")).test(s),eA=s=>/\s$/.test(s),rI=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],Av="data-trix-serialized-attributes",oI="[".concat(Av,"]"),aI=new RegExp("<!--block-->","g"),lI={"application/json":function(s){let e;if(s instanceof ei)e=s;else{if(!(s instanceof HTMLElement))throw new Error("unserializable object");e=Or.parse(s.innerHTML).getDocument()}return e.toSerializableDocument().toJSONString()},"text/html":function(s){let e;if(s instanceof ei)e=Fo.render(s);else{if(!(s instanceof HTMLElement))throw new Error("unserializable object");e=s.cloneNode(!0)}return Array.from(e.querySelectorAll("[data-trix-serialize=false]")).forEach(t=>{mn(t)}),rI.forEach(t=>{Array.from(e.querySelectorAll("[".concat(t,"]"))).forEach(i=>{i.removeAttribute(t)})}),Array.from(e.querySelectorAll(oI)).forEach(t=>{try{let i=JSON.parse(t.getAttribute(Av));t.removeAttribute(Av);for(let n in i){let r=i[n];t.setAttribute(n,r)}}catch{}}),e.innerHTML.replace(aI,"")}},cI=Object.freeze({__proto__:null}),Je=class extends it{constructor(e,t){super(...arguments),this.attachmentManager=e,this.attachment=t,this.id=this.attachment.id,this.file=this.attachment.file}remove(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)}};Je.proxyMethod("attachment.getAttribute"),Je.proxyMethod("attachment.hasAttribute"),Je.proxyMethod("attachment.setAttribute"),Je.proxyMethod("attachment.getAttributes"),Je.proxyMethod("attachment.setAttributes"),Je.proxyMethod("attachment.isPending"),Je.proxyMethod("attachment.isPreviewable"),Je.proxyMethod("attachment.getURL"),Je.proxyMethod("attachment.getHref"),Je.proxyMethod("attachment.getFilename"),Je.proxyMethod("attachment.getFilesize"),Je.proxyMethod("attachment.getFormattedFilesize"),Je.proxyMethod("attachment.getExtension"),Je.proxyMethod("attachment.getContentType"),Je.proxyMethod("attachment.getFile"),Je.proxyMethod("attachment.setFile"),Je.proxyMethod("attachment.releaseFile"),Je.proxyMethod("attachment.getUploadProgress"),Je.proxyMethod("attachment.setUploadProgress");var kd=class extends it{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.managedAttachments={},Array.from(e).forEach(t=>{this.manageAttachment(t)})}getAttachments(){let e=[];for(let t in this.managedAttachments){let i=this.managedAttachments[t];e.push(i)}return e}manageAttachment(e){return this.managedAttachments[e.id]||(this.managedAttachments[e.id]=new Je(this,e)),this.managedAttachments[e.id]}attachmentIsManaged(e){return e.id in this.managedAttachments}requestRemovalOfAttachment(e){var t,i;if(this.attachmentIsManaged(e))return(t=this.delegate)===null||t===void 0||(i=t.attachmentManagerDidRequestRemovalOfAttachment)===null||i===void 0?void 0:i.call(t,e)}unmanageAttachment(e){let t=this.managedAttachments[e.id];return delete this.managedAttachments[e.id],t}},Dd=class{constructor(e){this.composition=e,this.document=this.composition.document;let t=this.composition.getSelectedRange();this.startPosition=t[0],this.endPosition=t[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}shouldInsertBlockBreak(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?this.startLocation.offset!==0:this.breaksOnReturn&&this.nextCharacter!==`
`}shouldBreakFormattedBlock(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&this.nextCharacter===`
`||this.previousCharacter===`
`)}shouldDecreaseListLevel(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()}shouldPrependListItem(){return this.block.isListItem()&&this.startLocation.offset===0&&!this.block.isEmpty()}shouldRemoveLastBlockAttribute(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()}},ns=class extends it{constructor(){super(...arguments),this.document=new ei,this.attachments=[],this.currentAttributes={},this.revision=0}setDocument(e){var t,i;if(!e.isEqualTo(this.document))return this.document=e,this.refreshAttachments(),this.revision++,(t=this.delegate)===null||t===void 0||(i=t.compositionDidChangeDocument)===null||i===void 0?void 0:i.call(t,e)}getSnapshot(){return{document:this.document,selectedRange:this.getSelectedRange()}}loadSnapshot(e){var t,i,n,r;let{document:o,selectedRange:a}=e;return(t=this.delegate)===null||t===void 0||(i=t.compositionWillLoadSnapshot)===null||i===void 0||i.call(t),this.setDocument(o??new ei),this.setSelection(a??[0,0]),(n=this.delegate)===null||n===void 0||(r=n.compositionDidLoadSnapshot)===null||r===void 0?void 0:r.call(n)}insertText(e){let{updatePosition:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{updatePosition:!0},i=this.getSelectedRange();this.setDocument(this.document.insertTextAtRange(e,i));let n=i[0],r=n+e.getLength();return t&&this.setSelection(r),this.notifyDelegateOfInsertionAtRange([n,r])}insertBlock(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new pn,t=new ei([e]);return this.insertDocument(t)}insertDocument(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new ei,t=this.getSelectedRange();this.setDocument(this.document.insertDocumentAtRange(e,t));let i=t[0],n=i+e.getLength();return this.setSelection(n),this.notifyDelegateOfInsertionAtRange([i,n])}insertString(e,t){let i=this.getCurrentTextAttributes(),n=hi.textForStringWithAttributes(e,i);return this.insertText(n,t)}insertBlockBreak(){let e=this.getSelectedRange();this.setDocument(this.document.insertBlockBreakAtRange(e));let t=e[0],i=t+1;return this.setSelection(i),this.notifyDelegateOfInsertionAtRange([t,i])}insertLineBreak(){let e=new Dd(this);if(e.shouldDecreaseListLevel())return this.decreaseListLevel(),this.setSelection(e.startPosition);if(e.shouldPrependListItem()){let t=new ei([e.block.copyWithoutText()]);return this.insertDocument(t)}return e.shouldInsertBlockBreak()?this.insertBlockBreak():e.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():e.shouldBreakFormattedBlock()?this.breakFormattedBlock(e):this.insertString(`
`)}insertHTML(e){let t=Or.parse(e).getDocument(),i=this.getSelectedRange();this.setDocument(this.document.mergeDocumentAtRange(t,i));let n=i[0],r=n+t.getLength()-1;return this.setSelection(r),this.notifyDelegateOfInsertionAtRange([n,r])}replaceHTML(e){let t=Or.parse(e).getDocument().copyUsingObjectsFromDocument(this.document),i=this.getLocationRange({strict:!1}),n=this.document.rangeFromLocationRange(i);return this.setDocument(t),this.setSelection(n)}insertFile(e){return this.insertFiles([e])}insertFiles(e){let t=[];return Array.from(e).forEach(i=>{var n;if((n=this.delegate)!==null&&n!==void 0&&n.compositionShouldAcceptFile(i)){let r=Io.attachmentForFile(i);t.push(r)}}),this.insertAttachments(t)}insertAttachment(e){return this.insertAttachments([e])}insertAttachments(e){let t=new hi;return Array.from(e).forEach(i=>{var n;let r=i.getType(),o=(n=Ov[r])===null||n===void 0?void 0:n.presentation,a=this.getCurrentTextAttributes();o&&(a.presentation=o);let l=hi.textForAttachmentWithAttributes(i,a);t=t.appendText(l)}),this.insertText(t)}shouldManageDeletingInDirection(e){let t=this.getLocationRange();if(Bs(t)){if(e==="backward"&&t[0].offset===0||this.shouldManageMovingCursorInDirection(e))return!0}else if(t[0].index!==t[1].index)return!0;return!1}deleteInDirection(e){let t,i,n,{length:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.getLocationRange(),a=this.getSelectedRange(),l=Bs(a);if(l?i=e==="backward"&&o[0].offset===0:n=o[0].index!==o[1].index,i&&this.canDecreaseBlockAttributeLevel()){let c=this.getBlock();if(c.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(a[0]),c.isEmpty())return!1}return l&&(a=this.getExpandedRangeInDirection(e,{length:r}),e==="backward"&&(t=this.getAttachmentAtRange(a))),t?(this.editAttachment(t),!1):(this.setDocument(this.document.removeTextAtRange(a)),this.setSelection(a[0]),!i&&!n&&void 0)}moveTextFromRange(e){let[t]=Array.from(this.getSelectedRange());return this.setDocument(this.document.moveTextFromRangeToPosition(e,t)),this.setSelection(t)}removeAttachment(e){let t=this.document.getRangeOfAttachment(e);if(t)return this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(t)),this.setSelection(t[0])}removeLastBlockAttribute(){let[e,t]=Array.from(this.getSelectedRange()),i=this.document.getBlockAtPosition(t);return this.removeCurrentAttribute(i.getLastAttribute()),this.setSelection(e)}insertPlaceholder(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")}selectPlaceholder(){if(this.placeholderPosition!=null)return this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+1]),this.getSelectedRange()}forgetPlaceholder(){this.placeholderPosition=null}hasCurrentAttribute(e){let t=this.currentAttributes[e];return t!=null&&t!==!1}toggleCurrentAttribute(e){let t=!this.currentAttributes[e];return t?this.setCurrentAttribute(e,t):this.removeCurrentAttribute(e)}canSetCurrentAttribute(e){return at(e)?this.canSetCurrentBlockAttribute(e):this.canSetCurrentTextAttribute(e)}canSetCurrentTextAttribute(e){let t=this.getSelectedDocument();if(t){for(let i of Array.from(t.getAttachments()))if(!i.hasContent())return!1;return!0}}canSetCurrentBlockAttribute(e){let t=this.getBlock();if(t)return!t.isTerminalBlock()}setCurrentAttribute(e,t){return at(e)?this.setBlockAttribute(e,t):(this.setTextAttribute(e,t),this.currentAttributes[e]=t,this.notifyDelegateOfCurrentAttributesChange())}setHTMLAtributeAtPosition(e,t,i){var n;let r=this.document.getBlockAtPosition(e),o=(n=at(r.getLastAttribute()))===null||n===void 0?void 0:n.htmlAttributes;if(r&&o!=null&&o.includes(t)){let a=this.document.setHTMLAttributeAtPosition(e,t,i);this.setDocument(a)}}setTextAttribute(e,t){let i=this.getSelectedRange();if(!i)return;let[n,r]=Array.from(i);if(n!==r)return this.setDocument(this.document.addAttributeAtRange(e,t,i));if(e==="href"){let o=hi.textForStringWithAttributes(t,{href:t});return this.insertText(o)}}setBlockAttribute(e,t){let i=this.getSelectedRange();if(this.canSetCurrentAttribute(e))return this.setDocument(this.document.applyBlockAttributeAtRange(e,t,i)),this.setSelection(i)}removeCurrentAttribute(e){return at(e)?(this.removeBlockAttribute(e),this.updateCurrentAttributes()):(this.removeTextAttribute(e),delete this.currentAttributes[e],this.notifyDelegateOfCurrentAttributesChange())}removeTextAttribute(e){let t=this.getSelectedRange();if(t)return this.setDocument(this.document.removeAttributeAtRange(e,t))}removeBlockAttribute(e){let t=this.getSelectedRange();if(t)return this.setDocument(this.document.removeAttributeAtRange(e,t))}canDecreaseNestingLevel(){var e;return((e=this.getBlock())===null||e===void 0?void 0:e.getNestingLevel())>0}canIncreaseNestingLevel(){var e;let t=this.getBlock();if(t){if((e=at(t.getLastNestableAttribute()))===null||e===void 0||!e.listAttribute)return t.getNestingLevel()>0;{let i=this.getPreviousBlock();if(i)return function(){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _r((arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).slice(0,n.length),n)}(i.getListItemAttributes(),t.getListItemAttributes())}}}decreaseNestingLevel(){let e=this.getBlock();if(e)return this.setDocument(this.document.replaceBlock(e,e.decreaseNestingLevel()))}increaseNestingLevel(){let e=this.getBlock();if(e)return this.setDocument(this.document.replaceBlock(e,e.increaseNestingLevel()))}canDecreaseBlockAttributeLevel(){var e;return((e=this.getBlock())===null||e===void 0?void 0:e.getAttributeLevel())>0}decreaseBlockAttributeLevel(){var e;let t=(e=this.getBlock())===null||e===void 0?void 0:e.getLastAttribute();if(t)return this.removeCurrentAttribute(t)}decreaseListLevel(){let[e]=Array.from(this.getSelectedRange()),{index:t}=this.document.locationFromPosition(e),i=t,n=this.getBlock().getAttributeLevel(),r=this.document.getBlockAtIndex(i+1);for(;r&&r.isListItem()&&!(r.getAttributeLevel()<=n);)i++,r=this.document.getBlockAtIndex(i+1);e=this.document.positionFromLocation({index:t,offset:0});let o=this.document.positionFromLocation({index:i,offset:0});return this.setDocument(this.document.removeLastListAttributeAtRange([e,o]))}updateCurrentAttributes(){let e=this.getSelectedRange({ignoreLock:!0});if(e){let t=this.document.getCommonAttributesAtRange(e);if(Array.from(vv()).forEach(i=>{t[i]||this.canSetCurrentAttribute(i)||(t[i]=!1)}),!zo(t,this.currentAttributes))return this.currentAttributes=t,this.notifyDelegateOfCurrentAttributesChange()}}getCurrentAttributes(){return HS.call({},this.currentAttributes)}getCurrentTextAttributes(){let e={};for(let t in this.currentAttributes){let i=this.currentAttributes[t];i!==!1&&bv(t)&&(e[t]=i)}return e}freezeSelection(){return this.setCurrentAttribute("frozen",!0)}thawSelection(){return this.removeCurrentAttribute("frozen")}hasFrozenSelection(){return this.hasCurrentAttribute("frozen")}setSelection(e){var t;let i=this.document.locationRangeFromRange(e);return(t=this.delegate)===null||t===void 0?void 0:t.compositionDidRequestChangingSelectionToLocationRange(i)}getSelectedRange(){let e=this.getLocationRange();if(e)return this.document.rangeFromLocationRange(e)}setSelectedRange(e){let t=this.document.locationRangeFromRange(e);return this.getSelectionManager().setLocationRange(t)}getPosition(){let e=this.getLocationRange();if(e)return this.document.positionFromLocation(e[0])}getLocationRange(e){return this.targetLocationRange?this.targetLocationRange:this.getSelectionManager().getLocationRange(e)||Ne({index:0,offset:0})}withTargetLocationRange(e,t){let i;this.targetLocationRange=e;try{i=t()}finally{this.targetLocationRange=null}return i}withTargetRange(e,t){let i=this.document.locationRangeFromRange(e);return this.withTargetLocationRange(i,t)}withTargetDOMRange(e,t){let i=this.createLocationRangeFromDOMRange(e,{strict:!1});return this.withTargetLocationRange(i,t)}getExpandedRangeInDirection(e){let{length:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},[i,n]=Array.from(this.getSelectedRange());return e==="backward"?t?i-=t:i=this.translateUTF16PositionFromOffset(i,-1):t?n+=t:n=this.translateUTF16PositionFromOffset(n,1),Ne([i,n])}shouldManageMovingCursorInDirection(e){if(this.editingAttachment)return!0;let t=this.getExpandedRangeInDirection(e);return this.getAttachmentAtRange(t)!=null}moveCursorInDirection(e){let t,i;if(this.editingAttachment)i=this.document.getRangeOfAttachment(this.editingAttachment);else{let n=this.getSelectedRange();i=this.getExpandedRangeInDirection(e),t=!xd(n,i)}if(e==="backward"?this.setSelectedRange(i[0]):this.setSelectedRange(i[1]),t){let n=this.getAttachmentAtRange(i);if(n)return this.editAttachment(n)}}expandSelectionInDirection(e){let{length:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getExpandedRangeInDirection(e,{length:t});return this.setSelectedRange(i)}expandSelectionForEditing(){if(this.hasCurrentAttribute("href"))return this.expandSelectionAroundCommonAttribute("href")}expandSelectionAroundCommonAttribute(e){let t=this.getPosition(),i=this.document.getRangeOfCommonAttributeAtPosition(e,t);return this.setSelectedRange(i)}selectionContainsAttachments(){var e;return((e=this.getSelectedAttachments())===null||e===void 0?void 0:e.length)>0}selectionIsInCursorTarget(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())}positionIsCursorTarget(e){let t=this.document.locationFromPosition(e);if(t)return this.locationIsCursorTarget(t)}positionIsBlockBreak(e){var t;return(t=this.document.getPieceAtPosition(e))===null||t===void 0?void 0:t.isBlockBreak()}getSelectedDocument(){let e=this.getSelectedRange();if(e)return this.document.getDocumentAtRange(e)}getSelectedAttachments(){var e;return(e=this.getSelectedDocument())===null||e===void 0?void 0:e.getAttachments()}getAttachments(){return this.attachments.slice(0)}refreshAttachments(){let e=this.document.getAttachments(),{added:t,removed:i}=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=[],a=[],l=new Set;n.forEach(u=>{l.add(u)});let c=new Set;return r.forEach(u=>{c.add(u),l.has(u)||o.push(u)}),n.forEach(u=>{c.has(u)||a.push(u)}),{added:o,removed:a}}(this.attachments,e);return this.attachments=e,Array.from(i).forEach(n=>{var r,o;n.delegate=null,(r=this.delegate)===null||r===void 0||(o=r.compositionDidRemoveAttachment)===null||o===void 0||o.call(r,n)}),(()=>{let n=[];return Array.from(t).forEach(r=>{var o,a;r.delegate=this,n.push((o=this.delegate)===null||o===void 0||(a=o.compositionDidAddAttachment)===null||a===void 0?void 0:a.call(o,r))}),n})()}attachmentDidChangeAttributes(e){var t,i;return this.revision++,(t=this.delegate)===null||t===void 0||(i=t.compositionDidEditAttachment)===null||i===void 0?void 0:i.call(t,e)}attachmentDidChangePreviewURL(e){var t,i;return this.revision++,(t=this.delegate)===null||t===void 0||(i=t.compositionDidChangeAttachmentPreviewURL)===null||i===void 0?void 0:i.call(t,e)}editAttachment(e,t){var i,n;if(e!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=e,(i=this.delegate)===null||i===void 0||(n=i.compositionDidStartEditingAttachment)===null||n===void 0?void 0:n.call(i,this.editingAttachment,t)}stopEditingAttachment(){var e,t;this.editingAttachment&&((e=this.delegate)===null||e===void 0||(t=e.compositionDidStopEditingAttachment)===null||t===void 0||t.call(e,this.editingAttachment),this.editingAttachment=null)}updateAttributesForAttachment(e,t){return this.setDocument(this.document.updateAttributesForAttachment(e,t))}removeAttributeForAttachment(e,t){return this.setDocument(this.document.removeAttributeForAttachment(e,t))}breakFormattedBlock(e){let{document:t}=e,{block:i}=e,n=e.startPosition,r=[n-1,n];i.getBlockBreakPosition()===e.startLocation.offset?(i.breaksOnReturn()&&e.nextCharacter===`
`?n+=1:t=t.removeTextAtRange(r),r=[n,n]):e.nextCharacter===`
`?e.previousCharacter===`
`?r=[n-1,n+1]:(r=[n,n+1],n+=1):e.startLocation.offset-1!=0&&(n+=1);let o=new ei([i.removeLastAttribute().copyWithoutText()]);return this.setDocument(t.insertDocumentAtRange(o,r)),this.setSelection(n)}getPreviousBlock(){let e=this.getLocationRange();if(e){let{index:t}=e[0];if(t>0)return this.document.getBlockAtIndex(t-1)}}getBlock(){let e=this.getLocationRange();if(e)return this.document.getBlockAtIndex(e[0].index)}getAttachmentAtRange(e){let t=this.document.getDocumentAtRange(e);if(t.toString()==="".concat("\uFFFC",`
`))return t.getAttachments()[0]}notifyDelegateOfCurrentAttributesChange(){var e,t;return(e=this.delegate)===null||e===void 0||(t=e.compositionDidChangeCurrentAttributes)===null||t===void 0?void 0:t.call(e,this.currentAttributes)}notifyDelegateOfInsertionAtRange(e){var t,i;return(t=this.delegate)===null||t===void 0||(i=t.compositionDidPerformInsertionAtRange)===null||i===void 0?void 0:i.call(t,e)}translateUTF16PositionFromOffset(e,t){let i=this.document.toUTF16String(),n=i.offsetFromUCS2Offset(e);return i.offsetToUCS2Offset(n+t)}};ns.proxyMethod("getSelectionManager().getPointRange"),ns.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),ns.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),ns.proxyMethod("getSelectionManager().locationIsCursorTarget"),ns.proxyMethod("getSelectionManager().selectionIsExpanded"),ns.proxyMethod("delegate?.getSelectionManager");var Rl=class extends it{constructor(e){super(...arguments),this.composition=e,this.undoEntries=[],this.redoEntries=[]}recordUndoEntry(e){let{context:t,consolidatable:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.undoEntries.slice(-1)[0];if(!i||!uI(n,e,t)){let r=this.createEntry({description:e,context:t});this.undoEntries.push(r),this.redoEntries=[]}}undo(){let e=this.undoEntries.pop();if(e){let t=this.createEntry(e);return this.redoEntries.push(t),this.composition.loadSnapshot(e.snapshot)}}redo(){let e=this.redoEntries.pop();if(e){let t=this.createEntry(e);return this.undoEntries.push(t),this.composition.loadSnapshot(e.snapshot)}}canUndo(){return this.undoEntries.length>0}canRedo(){return this.redoEntries.length>0}createEntry(){let{description:e,context:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{description:e?.toString(),context:JSON.stringify(t),snapshot:this.composition.getSnapshot()}}},uI=(s,e,t)=>s?.description===e?.toString()&&s?.context===JSON.stringify(t),nv="attachmentGallery",Fd=class{constructor(e){this.document=e.document,this.selectedRange=e.selectedRange}perform(){return this.removeBlockAttribute(),this.applyBlockAttribute()}getSnapshot(){return{document:this.document,selectedRange:this.selectedRange}}removeBlockAttribute(){return this.findRangesOfBlocks().map(e=>this.document=this.document.removeAttributeAtRange(nv,e))}applyBlockAttribute(){let e=0;this.findRangesOfPieces().forEach(t=>{t[1]-t[0]>1&&(t[0]+=e,t[1]+=e,this.document.getCharacterAtPosition(t[1])!==`
`&&(this.document=this.document.insertBlockBreakAtRange(t[1]),t[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),t[1]++,e++),t[0]!==0&&this.document.getCharacterAtPosition(t[0]-1)!==`
`&&(this.document=this.document.insertBlockBreakAtRange(t[0]),t[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),t[0]++,e++),this.document=this.document.applyBlockAttributeAtRange(nv,!0,t))})}findRangesOfBlocks(){return this.document.findRangesForBlockAttribute(nv)}findRangesOfPieces(){return this.document.findRangesForTextAttribute("presentation",{withValue:"gallery"})}moveSelectedRangeForward(){this.selectedRange[0]+=1,this.selectedRange[1]+=1}},tA=function(s){let e=new Fd(s);return e.perform(),e.getSnapshot()},dI=[tA],Id=class{constructor(e,t,i){this.insertFiles=this.insertFiles.bind(this),this.composition=e,this.selectionManager=t,this.element=i,this.undoManager=new Rl(this.composition),this.filters=dI.slice(0)}loadDocument(e){return this.loadSnapshot({document:e,selectedRange:[0,0]})}loadHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=Or.parse(e,{referenceElement:this.element}).getDocument();return this.loadDocument(t)}loadJSON(e){let{document:t,selectedRange:i}=e;return t=ei.fromJSON(t),this.loadSnapshot({document:t,selectedRange:i})}loadSnapshot(e){return this.undoManager=new Rl(this.composition),this.composition.loadSnapshot(e)}getDocument(){return this.composition.document}getSelectedDocument(){return this.composition.getSelectedDocument()}getSnapshot(){return this.composition.getSnapshot()}toJSON(){return this.getSnapshot()}deleteInDirection(e){return this.composition.deleteInDirection(e)}insertAttachment(e){return this.composition.insertAttachment(e)}insertAttachments(e){return this.composition.insertAttachments(e)}insertDocument(e){return this.composition.insertDocument(e)}insertFile(e){return this.composition.insertFile(e)}insertFiles(e){return this.composition.insertFiles(e)}insertHTML(e){return this.composition.insertHTML(e)}insertString(e){return this.composition.insertString(e)}insertText(e){return this.composition.insertText(e)}insertLineBreak(){return this.composition.insertLineBreak()}getSelectedRange(){return this.composition.getSelectedRange()}getPosition(){return this.composition.getPosition()}getClientRectAtPosition(e){let t=this.getDocument().locationRangeFromRange([e,e+1]);return this.selectionManager.getClientRectAtLocationRange(t)}expandSelectionInDirection(e){return this.composition.expandSelectionInDirection(e)}moveCursorInDirection(e){return this.composition.moveCursorInDirection(e)}setSelectedRange(e){return this.composition.setSelectedRange(e)}activateAttribute(e){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return this.composition.setCurrentAttribute(e,t)}attributeIsActive(e){return this.composition.hasCurrentAttribute(e)}canActivateAttribute(e){return this.composition.canSetCurrentAttribute(e)}deactivateAttribute(e){return this.composition.removeCurrentAttribute(e)}setHTMLAtributeAtPosition(e,t,i){this.composition.setHTMLAtributeAtPosition(e,t,i)}canDecreaseNestingLevel(){return this.composition.canDecreaseNestingLevel()}canIncreaseNestingLevel(){return this.composition.canIncreaseNestingLevel()}decreaseNestingLevel(){if(this.canDecreaseNestingLevel())return this.composition.decreaseNestingLevel()}increaseNestingLevel(){if(this.canIncreaseNestingLevel())return this.composition.increaseNestingLevel()}canRedo(){return this.undoManager.canRedo()}canUndo(){return this.undoManager.canUndo()}recordUndoEntry(e){let{context:t,consolidatable:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.undoManager.recordUndoEntry(e,{context:t,consolidatable:i})}redo(){if(this.canRedo())return this.undoManager.redo()}undo(){if(this.canUndo())return this.undoManager.undo()}},Rd=class{constructor(e){this.element=e}findLocationFromContainerAndOffset(e,t){let{strict:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{strict:!0},n=0,r=!1,o={index:0,offset:0},a=this.findAttachmentElementParentForNode(e);a&&(e=a.parentNode,t=Yg(a));let l=Td(this.element,{usingFilter:iA});for(;l.nextNode();){let c=l.currentNode;if(c===e&&Ol(e)){Lo(c)||(o.offset+=t);break}if(c.parentNode===e){if(n++===t)break}else if(!Er(e,c)&&n>0)break;mS(c,{strict:i})?(r&&o.index++,o.offset=0,r=!0):o.offset+=rv(c)}return o}findContainerAndOffsetFromLocation(e){let t,i;if(e.index===0&&e.offset===0){for(t=this.element,i=0;t.firstChild;)if(t=t.firstChild,Xg(t)){i=1;break}return[t,i]}let[n,r]=this.findNodeAndOffsetFromLocation(e);if(n){if(Ol(n))rv(n)===0?(t=n.parentNode.parentNode,i=Yg(n.parentNode),Lo(n,{name:"right"})&&i++):(t=n,i=e.offset-r);else{if(t=n.parentNode,!mS(n.previousSibling)&&!Xg(t))for(;n===t.lastChild&&(n=t,t=t.parentNode,!Xg(t)););i=Yg(n),e.offset!==0&&i++}return[t,i]}}findNodeAndOffsetFromLocation(e){let t,i,n=0;for(let r of this.getSignificantNodesForIndex(e.index)){let o=rv(r);if(e.offset<=n+o)if(Ol(r)){if(t=r,i=n,e.offset===i&&Lo(t))break}else t||(t=r,i=n);if(n+=o,n>e.offset)break}return[t,i]}findAttachmentElementParentForNode(e){for(;e&&e!==this.element;){if(Ar(e))return e;e=e.parentNode}}getSignificantNodesForIndex(e){let t=[],i=Td(this.element,{usingFilter:hI}),n=!1;for(;i.nextNode();){let o=i.currentNode;var r;if(Oo(o)){if(r!=null?r++:r=0,r===e)n=!0;else if(n)break}else n&&t.push(o)}return t}},rv=function(s){return s.nodeType===Node.TEXT_NODE?Lo(s)?0:s.textContent.length:Ut(s)==="br"||Ar(s)?1:0},hI=function(s){return pI(s)===NodeFilter.FILTER_ACCEPT?iA(s):NodeFilter.FILTER_REJECT},pI=function(s){return jS(s)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},iA=function(s){return Ar(s.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},Nd=class{createDOMRangeFromPoint(e){let t,{x:i,y:n}=e;if(document.caretPositionFromPoint){let{offsetNode:r,offset:o}=document.caretPositionFromPoint(i,n);return t=document.createRange(),t.setStart(r,o),t}if(document.caretRangeFromPoint)return document.caretRangeFromPoint(i,n);if(document.body.createTextRange){let r=Ll();try{let o=document.body.createTextRange();o.moveToPoint(i,n),o.select()}catch{}return t=Ll(),KS(r),t}}getClientRectsForDOMRange(e){let t=Array.from(e.getClientRects());return[t[0],t[t.length-1]]}},Ns=class extends it{constructor(e){super(...arguments),this.didMouseDown=this.didMouseDown.bind(this),this.selectionDidChange=this.selectionDidChange.bind(this),this.element=e,this.locationMapper=new Rd(this.element),this.pointMapper=new Nd,this.lockCount=0,Ze("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}getLocationRange(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.strict===!1?this.createLocationRangeFromDOMRange(Ll()):e.ignoreLock?this.currentLocationRange:this.lockedLocationRange?this.lockedLocationRange:this.currentLocationRange}setLocationRange(e){if(this.lockedLocationRange)return;e=Ne(e);let t=this.createDOMRangeFromLocationRange(e);t&&(KS(t),this.updateCurrentLocationRange(e))}setLocationRangeFromPointRange(e){e=Ne(e);let t=this.getLocationAtPoint(e[0]),i=this.getLocationAtPoint(e[1]);this.setLocationRange([t,i])}getClientRectAtLocationRange(e){let t=this.createDOMRangeFromLocationRange(e);if(t)return this.getClientRectsForDOMRange(t)[1]}locationIsCursorTarget(e){let t=Array.from(this.findNodeAndOffsetFromLocation(e))[0];return Lo(t)}lock(){this.lockCount++==0&&(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange())}unlock(){if(--this.lockCount==0){let{lockedLocationRange:e}=this;if(this.lockedLocationRange=null,e!=null)return this.setLocationRange(e)}}clearSelection(){var e;return(e=XS())===null||e===void 0?void 0:e.removeAllRanges()}selectionIsCollapsed(){var e;return((e=Ll())===null||e===void 0?void 0:e.collapsed)===!0}selectionIsExpanded(){return!this.selectionIsCollapsed()}createLocationRangeFromDOMRange(e,t){if(e==null||!this.domRangeWithinElement(e))return;let i=this.findLocationFromContainerAndOffset(e.startContainer,e.startOffset,t);if(!i)return;let n=e.collapsed?void 0:this.findLocationFromContainerAndOffset(e.endContainer,e.endOffset,t);return Ne([i,n])}didMouseDown(){return this.pauseTemporarily()}pauseTemporarily(){let e;this.paused=!0;let t=()=>{if(this.paused=!1,clearTimeout(i),Array.from(e).forEach(n=>{n.destroy()}),Er(document,this.element))return this.selectionDidChange()},i=setTimeout(t,200);e=["mousemove","keydown"].map(n=>Ze(n,{onElement:document,withCallback:t}))}selectionDidChange(){if(!this.paused&&!kv(this.element))return this.updateCurrentLocationRange()}updateCurrentLocationRange(e){var t,i;if((e??(e=this.createLocationRangeFromDOMRange(Ll())))&&!xd(e,this.currentLocationRange))return this.currentLocationRange=e,(t=this.delegate)===null||t===void 0||(i=t.locationRangeDidChange)===null||i===void 0?void 0:i.call(t,this.currentLocationRange.slice(0))}createDOMRangeFromLocationRange(e){let t=this.findContainerAndOffsetFromLocation(e[0]),i=Bs(e)?t:this.findContainerAndOffsetFromLocation(e[1])||t;if(t!=null&&i!=null){let n=document.createRange();return n.setStart(...Array.from(t||[])),n.setEnd(...Array.from(i||[])),n}}getLocationAtPoint(e){let t=this.createDOMRangeFromPoint(e);var i;if(t)return(i=this.createLocationRangeFromDOMRange(t))===null||i===void 0?void 0:i[0]}domRangeWithinElement(e){return e.collapsed?Er(this.element,e.startContainer):Er(this.element,e.startContainer)&&Er(this.element,e.endContainer)}};Ns.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),Ns.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),Ns.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),Ns.proxyMethod("pointMapper.createDOMRangeFromPoint"),Ns.proxyMethod("pointMapper.getClientRectsForDOMRange");var sA=Object.freeze({__proto__:null,Attachment:Io,AttachmentManager:kd,AttachmentPiece:Ro,Block:pn,Composition:ns,Document:ei,Editor:Id,HTMLParser:Or,HTMLSanitizer:Do,LineBreakInsertion:Dd,LocationMapper:Rd,ManagedAttachment:Je,Piece:Hs,PointMapper:Nd,SelectionManager:Ns,SplittableList:No,StringPiece:Il,Text:hi,UndoManager:Rl}),fI=Object.freeze({__proto__:null,ObjectView:$s,AttachmentView:Fl,BlockView:Od,DocumentView:Fo,PieceView:_d,PreviewableAttachmentView:Pd,TextView:Md}),{lang:ov,css:wr,keyNames:mI}=zl,av=function(s){return function(){let e=s.apply(this,arguments);e.do(),this.undos||(this.undos=[]),this.undos.push(e.undo)}},Bd=class extends it{constructor(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(...arguments),ti(this,"makeElementMutable",av(()=>({do:()=>{this.element.dataset.trixMutable=!0},undo:()=>delete this.element.dataset.trixMutable}))),ti(this,"addToolbar",av(()=>{let r=Se({tagName:"div",className:wr.attachmentToolbar,data:{trixMutable:!0},childNodes:Se({tagName:"div",className:"trix-button-row",childNodes:Se({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:Se({tagName:"button",className:"trix-button trix-button--remove",textContent:ov.remove,attributes:{title:ov.remove},data:{trixAction:"remove"}})})})});return this.attachment.isPreviewable()&&r.appendChild(Se({tagName:"div",className:wr.attachmentMetadataContainer,childNodes:Se({tagName:"span",className:wr.attachmentMetadata,childNodes:[Se({tagName:"span",className:wr.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),Se({tagName:"span",className:wr.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),Ze("click",{onElement:r,withCallback:this.didClickToolbar}),Ze("click",{onElement:r,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),_l("trix-attachment-before-toolbar",{onElement:this.element,attributes:{toolbar:r,attachment:this.attachment}}),{do:()=>this.element.appendChild(r),undo:()=>mn(r)}})),ti(this,"installCaptionEditor",av(()=>{let r=Se({tagName:"textarea",className:wr.attachmentCaptionEditor,attributes:{placeholder:ov.captionPlaceholder},data:{trixMutable:!0}});r.value=this.attachmentPiece.getCaption();let o=r.cloneNode();o.classList.add("trix-autoresize-clone"),o.tabIndex=-1;let a=function(){o.value=r.value,r.style.height=o.scrollHeight+"px"};Ze("input",{onElement:r,withCallback:a}),Ze("input",{onElement:r,withCallback:this.didInputCaption}),Ze("keydown",{onElement:r,withCallback:this.didKeyDownCaption}),Ze("change",{onElement:r,withCallback:this.didChangeCaption}),Ze("blur",{onElement:r,withCallback:this.didBlurCaption});let l=this.element.querySelector("figcaption"),c=l.cloneNode();return{do:()=>{if(l.style.display="none",c.appendChild(r),c.appendChild(o),c.classList.add("".concat(wr.attachmentCaption,"--editing")),l.parentElement.insertBefore(c,l),a(),this.options.editCaption)return Iv(()=>r.focus())},undo(){mn(c),l.style.display=null}}})),this.didClickToolbar=this.didClickToolbar.bind(this),this.didClickActionButton=this.didClickActionButton.bind(this),this.didKeyDownCaption=this.didKeyDownCaption.bind(this),this.didInputCaption=this.didInputCaption.bind(this),this.didChangeCaption=this.didChangeCaption.bind(this),this.didBlurCaption=this.didBlurCaption.bind(this),this.attachmentPiece=e,this.element=t,this.container=i,this.options=n,this.attachment=this.attachmentPiece.attachment,Ut(this.element)==="a"&&(this.element=this.element.firstChild),this.install()}install(){this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()&&this.installCaptionEditor()}uninstall(){var e;let t=this.undos.pop();for(this.savePendingCaption();t;)t(),t=this.undos.pop();(e=this.delegate)===null||e===void 0||e.didUninstallAttachmentEditor(this)}savePendingCaption(){if(this.pendingCaption!=null){let r=this.pendingCaption;var e,t,i,n;this.pendingCaption=null,r?(e=this.delegate)===null||e===void 0||(t=e.attachmentEditorDidRequestUpdatingAttributesForAttachment)===null||t===void 0||t.call(e,{caption:r},this.attachment):(i=this.delegate)===null||i===void 0||(n=i.attachmentEditorDidRequestRemovingAttributeForAttachment)===null||n===void 0||n.call(i,"caption",this.attachment)}}didClickToolbar(e){return e.preventDefault(),e.stopPropagation()}didClickActionButton(e){var t;if(e.target.getAttribute("data-trix-action")==="remove")return(t=this.delegate)===null||t===void 0?void 0:t.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)}didKeyDownCaption(e){var t,i;if(mI[e.keyCode]==="return")return e.preventDefault(),this.savePendingCaption(),(t=this.delegate)===null||t===void 0||(i=t.attachmentEditorDidRequestDeselectingAttachment)===null||i===void 0?void 0:i.call(t,this.attachment)}didInputCaption(e){this.pendingCaption=e.target.value.replace(/\s/g," ").trim()}didChangeCaption(e){return this.savePendingCaption()}didBlurCaption(e){return this.savePendingCaption()}},zd=class extends it{constructor(e,t){super(...arguments),this.didFocus=this.didFocus.bind(this),this.didBlur=this.didBlur.bind(this),this.didClickAttachment=this.didClickAttachment.bind(this),this.element=e,this.composition=t,this.documentView=new Fo(this.composition.document,{element:this.element}),Ze("focus",{onElement:this.element,withCallback:this.didFocus}),Ze("blur",{onElement:this.element,withCallback:this.didBlur}),Ze("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),Ze("mousedown",{onElement:this.element,matchingSelector:Sr,withCallback:this.didClickAttachment}),Ze("click",{onElement:this.element,matchingSelector:"a".concat(Sr),preventDefault:!0})}didFocus(e){var t;let i=()=>{var n,r;if(!this.focused)return this.focused=!0,(n=this.delegate)===null||n===void 0||(r=n.compositionControllerDidFocus)===null||r===void 0?void 0:r.call(n)};return((t=this.blurPromise)===null||t===void 0?void 0:t.then(i))||i()}didBlur(e){this.blurPromise=new Promise(t=>Iv(()=>{var i,n;return kv(this.element)||(this.focused=null,(i=this.delegate)===null||i===void 0||(n=i.compositionControllerDidBlur)===null||n===void 0||n.call(i)),this.blurPromise=null,t()}))}didClickAttachment(e,t){var i,n;let r=this.findAttachmentForElement(t),o=!!fn(e.target,{matchingSelector:"figcaption"});return(i=this.delegate)===null||i===void 0||(n=i.compositionControllerDidSelectAttachment)===null||n===void 0?void 0:n.call(i,r,{editCaption:o})}getSerializableElement(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element}render(){var e,t,i,n,r,o;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&((i=this.delegate)===null||i===void 0||(n=i.compositionControllerWillSyncDocumentView)===null||n===void 0||n.call(i),this.documentView.sync(),(r=this.delegate)===null||r===void 0||(o=r.compositionControllerDidSyncDocumentView)===null||o===void 0||o.call(r)),(e=this.delegate)===null||e===void 0||(t=e.compositionControllerDidRender)===null||t===void 0?void 0:t.call(e)}rerenderViewForObject(e){return this.invalidateViewForObject(e),this.render()}invalidateViewForObject(e){return this.documentView.invalidateViewForObject(e)}isViewCachingEnabled(){return this.documentView.isViewCachingEnabled()}enableViewCaching(){return this.documentView.enableViewCaching()}disableViewCaching(){return this.documentView.disableViewCaching()}refreshViewCache(){return this.documentView.garbageCollectCachedViews()}isEditingAttachment(){return!!this.attachmentEditor}installAttachmentEditorForAttachment(e,t){var i;if(((i=this.attachmentEditor)===null||i===void 0?void 0:i.attachment)===e)return;let n=this.documentView.findElementForObject(e);if(!n)return;this.uninstallAttachmentEditor();let r=this.composition.document.getAttachmentPieceForAttachment(e);this.attachmentEditor=new Bd(r,n,this.element,t),this.attachmentEditor.delegate=this}uninstallAttachmentEditor(){var e;return(e=this.attachmentEditor)===null||e===void 0?void 0:e.uninstall()}didUninstallAttachmentEditor(){return this.attachmentEditor=null,this.render()}attachmentEditorDidRequestUpdatingAttributesForAttachment(e,t){var i,n;return(i=this.delegate)===null||i===void 0||(n=i.compositionControllerWillUpdateAttachment)===null||n===void 0||n.call(i,t),this.composition.updateAttributesForAttachment(e,t)}attachmentEditorDidRequestRemovingAttributeForAttachment(e,t){var i,n;return(i=this.delegate)===null||i===void 0||(n=i.compositionControllerWillUpdateAttachment)===null||n===void 0||n.call(i,t),this.composition.removeAttributeForAttachment(e,t)}attachmentEditorDidRequestRemovalOfAttachment(e){var t,i;return(t=this.delegate)===null||t===void 0||(i=t.compositionControllerDidRequestRemovalOfAttachment)===null||i===void 0?void 0:i.call(t,e)}attachmentEditorDidRequestDeselectingAttachment(e){var t,i;return(t=this.delegate)===null||t===void 0||(i=t.compositionControllerDidRequestDeselectingAttachment)===null||i===void 0?void 0:i.call(t,e)}canSyncDocumentView(){return!this.isEditingAttachment()}findAttachmentForElement(e){return this.composition.document.getAttachmentById(parseInt(e.dataset.trixId,10))}},$d=class extends it{},nA="data-trix-mutable",gI="[".concat(nA,"]"),vI={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},Hd=class extends it{constructor(e){super(e),this.didMutate=this.didMutate.bind(this),this.element=e,this.observer=new window.MutationObserver(this.didMutate),this.start()}start(){return this.reset(),this.observer.observe(this.element,vI)}stop(){return this.observer.disconnect()}didMutate(e){var t,i;if(this.mutations.push(...Array.from(this.findSignificantMutations(e)||[])),this.mutations.length)return(t=this.delegate)===null||t===void 0||(i=t.elementDidMutate)===null||i===void 0||i.call(t,this.getMutationSummary()),this.reset()}reset(){this.mutations=[]}findSignificantMutations(e){return e.filter(t=>this.mutationIsSignificant(t))}mutationIsSignificant(e){if(this.nodeIsMutable(e.target))return!1;for(let t of Array.from(this.nodesModifiedByMutation(e)))if(this.nodeIsSignificant(t))return!0;return!1}nodeIsSignificant(e){return e!==this.element&&!this.nodeIsMutable(e)&&!jS(e)}nodeIsMutable(e){return fn(e,{matchingSelector:gI})}nodesModifiedByMutation(e){let t=[];switch(e.type){case"attributes":e.attributeName!==nA&&t.push(e.target);break;case"characterData":t.push(e.target.parentNode),t.push(e.target);break;case"childList":t.push(...Array.from(e.addedNodes||[])),t.push(...Array.from(e.removedNodes||[]))}return t}getMutationSummary(){return this.getTextMutationSummary()}getTextMutationSummary(){let{additions:e,deletions:t}=this.getTextChangesFromCharacterData(),i=this.getTextChangesFromChildList();Array.from(i.additions).forEach(a=>{Array.from(e).includes(a)||e.push(a)}),t.push(...Array.from(i.deletions||[]));let n={},r=e.join("");r&&(n.textAdded=r);let o=t.join("");return o&&(n.textDeleted=o),n}getMutationsByType(e){return Array.from(this.mutations).filter(t=>t.type===e)}getTextChangesFromChildList(){let e,t,i=[],n=[];return Array.from(this.getMutationsByType("childList")).forEach(r=>{i.push(...Array.from(r.addedNodes||[])),n.push(...Array.from(r.removedNodes||[]))}),i.length===0&&n.length===1&&Oo(n[0])?(e=[],t=[`
`]):(e=Tv(i),t=Tv(n)),{additions:e.filter((r,o)=>r!==t[o]).map(Pl),deletions:t.filter((r,o)=>r!==e[o]).map(Pl)}}getTextChangesFromCharacterData(){let e,t,i=this.getMutationsByType("characterData");if(i.length){let n=i[0],r=i[i.length-1],o=function(a,l){let c,u;return a=Pr.box(a),(l=Pr.box(l)).length<a.length?[u,c]=ES(a,l):[c,u]=ES(l,a),{added:c,removed:u}}(Pl(n.oldValue),Pl(r.target.data));e=o.added,t=o.removed}return{additions:e?[e]:[],deletions:t?[t]:[]}}},Tv=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=[];for(let t of Array.from(s))switch(t.nodeType){case Node.TEXT_NODE:e.push(t.data);break;case Node.ELEMENT_NODE:Ut(t)==="br"?e.push(`
`):e.push(...Array.from(Tv(t.childNodes)||[]))}return e},Ud=class extends ko{constructor(e){super(...arguments),this.file=e}perform(e){let t=new FileReader;return t.onerror=()=>e(!1),t.onload=()=>{t.onerror=null;try{t.abort()}catch{}return e(!0,this.file)},t.readAsArrayBuffer(this.file)}},xv=class{constructor(e){this.element=e}shouldIgnore(e){return!!Bl.samsungAndroid&&(this.previousEvent=this.event,this.event=e,this.checkSamsungKeyboardBuggyModeStart(),this.checkSamsungKeyboardBuggyModeEnd(),this.buggyMode)}checkSamsungKeyboardBuggyModeStart(){this.insertingLongTextAfterUnidentifiedChar()&&bI(this.element.innerText,this.event.data)&&(this.buggyMode=!0,this.event.preventDefault())}checkSamsungKeyboardBuggyModeEnd(){this.buggyMode&&this.event.inputType!=="insertText"&&(this.buggyMode=!1)}insertingLongTextAfterUnidentifiedChar(){var e;return this.isBeforeInputInsertText()&&this.previousEventWasUnidentifiedKeydown()&&((e=this.event.data)===null||e===void 0?void 0:e.length)>50}isBeforeInputInsertText(){return this.event.type==="beforeinput"&&this.event.inputType==="insertText"}previousEventWasUnidentifiedKeydown(){var e,t;return((e=this.previousEvent)===null||e===void 0?void 0:e.type)==="keydown"&&((t=this.previousEvent)===null||t===void 0?void 0:t.key)==="Unidentified"}},bI=(s,e)=>FS(s)===FS(e),yI=new RegExp("(".concat("\uFFFC","|").concat(qd,"|").concat(hn,"|\\s)+"),"g"),FS=s=>s.replace(yI," ").trim(),Bo=class extends it{constructor(e){super(...arguments),this.element=e,this.mutationObserver=new Hd(this.element),this.mutationObserver.delegate=this,this.flakyKeyboardDetector=new xv(this.element);for(let t in this.constructor.events)Ze(t,{onElement:this.element,withCallback:this.handlerFor(t)})}elementDidMutate(e){}editorWillSyncDocumentView(){return this.mutationObserver.stop()}editorDidSyncDocumentView(){return this.mutationObserver.start()}requestRender(){var e,t;return(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidRequestRender)===null||t===void 0?void 0:t.call(e)}requestReparse(){var e,t;return(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidRequestReparse)===null||t===void 0||t.call(e),this.requestRender()}attachFiles(e){let t=Array.from(e).map(i=>new Ud(i));return Promise.all(t).then(i=>{this.handleInput(function(){var n,r;return(n=this.delegate)===null||n===void 0||n.inputControllerWillAttachFiles(),(r=this.responder)===null||r===void 0||r.insertFiles(i),this.requestRender()})})}handlerFor(e){return t=>{t.defaultPrevented||this.handleInput(()=>{if(!kv(this.element)){if(this.flakyKeyboardDetector.shouldIgnore(t))return;this.eventName=e,this.constructor.events[e].call(this,t)}})}}handleInput(e){try{var t;(t=this.delegate)===null||t===void 0||t.inputControllerWillHandleInput(),e.call(this)}finally{var i;(i=this.delegate)===null||i===void 0||i.inputControllerDidHandleInput()}}createLinkHTML(e,t){let i=document.createElement("a");return i.href=e,i.textContent=t||e,i.outerHTML}},lv;ti(Bo,"events",{});var{browser:wI,keyNames:rA}=zl,EI=0,Bi=class extends Bo{constructor(){super(...arguments),this.resetInputSummary()}setInputSummary(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.inputSummary.eventName=this.eventName;for(let t in e){let i=e[t];this.inputSummary[t]=i}return this.inputSummary}resetInputSummary(){this.inputSummary={}}reset(){return this.resetInputSummary(),Mr.reset()}elementDidMutate(e){var t,i;return this.isComposing()?(t=this.delegate)===null||t===void 0||(i=t.inputControllerDidAllowUnhandledInput)===null||i===void 0?void 0:i.call(t):this.handleInput(function(){return this.mutationIsSignificant(e)&&(this.mutationIsExpected(e)?this.requestRender():this.requestReparse()),this.reset()})}mutationIsExpected(e){let{textAdded:t,textDeleted:i}=e;if(this.inputSummary.preferDocument)return!0;let n=t!=null?t===this.inputSummary.textAdded:!this.inputSummary.textAdded,r=i!=null?this.inputSummary.didDelete:!this.inputSummary.didDelete,o=[`
`,` 
`].includes(t)&&!n,a=i===`
`&&!r;if(o&&!a||a&&!o){let c=this.getSelectedRange();if(c){var l;let u=o?t.replace(/\n$/,"").length||-1:t?.length||1;if((l=this.responder)!==null&&l!==void 0&&l.positionIsBlockBreak(c[1]+u))return!0}}return n&&r}mutationIsSignificant(e){var t;let i=Object.keys(e).length>0,n=((t=this.compositionInput)===null||t===void 0?void 0:t.getEndData())==="";return i||!n}getCompositionInput(){if(this.isComposing())return this.compositionInput;this.compositionInput=new ss(this)}isComposing(){return this.compositionInput&&!this.compositionInput.isEnded()}deleteInDirection(e,t){var i;return((i=this.responder)===null||i===void 0?void 0:i.deleteInDirection(e))!==!1?this.setInputSummary({didDelete:!0}):t?(t.preventDefault(),this.requestRender()):void 0}serializeSelectionToDataTransfer(e){var t;if(!function(n){if(n==null||!n.setData)return!1;for(let r in bS){let o=bS[r];try{if(n.setData(r,o),!n.getData(r)===o)return!1}catch{return!1}}return!0}(e))return;let i=(t=this.responder)===null||t===void 0?void 0:t.getSelectedDocument().toSerializableDocument();return e.setData("application/x-trix-document",JSON.stringify(i)),e.setData("text/html",Fo.render(i).innerHTML),e.setData("text/plain",i.toString().replace(/\n$/,"")),!0}canAcceptDataTransfer(e){let t={};return Array.from(e?.types||[]).forEach(i=>{t[i]=!0}),t.Files||t["application/x-trix-document"]||t["text/html"]||t["text/plain"]}getPastedHTMLUsingHiddenElement(e){let t=this.getSelectedRange(),i={position:"absolute",left:"".concat(window.pageXOffset,"px"),top:"".concat(window.pageYOffset,"px"),opacity:0},n=Se({style:i,tagName:"div",editable:!0});return document.body.appendChild(n),n.focus(),requestAnimationFrame(()=>{let r=n.innerHTML;return mn(n),this.setSelectedRange(t),e(r)})}};ti(Bi,"events",{keydown(s){this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0;let e=rA[s.keyCode];if(e){var t;let n=this.keys;["ctrl","alt","shift","meta"].forEach(r=>{var o;s["".concat(r,"Key")]&&(r==="ctrl"&&(r="control"),n=(o=n)===null||o===void 0?void 0:o[r])}),((t=n)===null||t===void 0?void 0:t[e])!=null&&(this.setInputSummary({keyName:e}),Mr.reset(),n[e].call(this,s))}if(GS(s)){let n=String.fromCharCode(s.keyCode).toLowerCase();if(n){var i;let r=["alt","shift"].map(o=>{if(s["".concat(o,"Key")])return o}).filter(o=>o);r.push(n),(i=this.delegate)!==null&&i!==void 0&&i.inputControllerDidReceiveKeyboardCommand(r)&&s.preventDefault()}}},keypress(s){if(this.inputSummary.eventName!=null||s.metaKey||s.ctrlKey&&!s.altKey)return;let e=TI(s);var t,i;return e?((t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(i=this.responder)===null||i===void 0||i.insertString(e),this.setInputSummary({textAdded:e,didDelete:this.selectionIsExpanded()})):void 0},textInput(s){let{data:e}=s,{textAdded:t}=this.inputSummary;if(t&&t!==e&&t.toUpperCase()===e){var i;let n=this.getSelectedRange();return this.setSelectedRange([n[0],n[1]+t.length]),(i=this.responder)===null||i===void 0||i.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(n)}},dragenter(s){s.preventDefault()},dragstart(s){var e,t;return this.serializeSelectionToDataTransfer(s.dataTransfer),this.draggedRange=this.getSelectedRange(),(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidStartDrag)===null||t===void 0?void 0:t.call(e)},dragover(s){if(this.draggedRange||this.canAcceptDataTransfer(s.dataTransfer)){s.preventDefault();let i={x:s.clientX,y:s.clientY};var e,t;if(!zo(i,this.draggingPoint))return this.draggingPoint=i,(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidReceiveDragOverPoint)===null||t===void 0?void 0:t.call(e,this.draggingPoint)}},dragend(s){var e,t;(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidCancelDrag)===null||t===void 0||t.call(e),this.draggedRange=null,this.draggingPoint=null},drop(s){var e,t;s.preventDefault();let i=(e=s.dataTransfer)===null||e===void 0?void 0:e.files,n=s.dataTransfer.getData("application/x-trix-document"),r={x:s.clientX,y:s.clientY};if((t=this.responder)===null||t===void 0||t.setLocationRangeFromPointRange(r),i!=null&&i.length)this.attachFiles(i);else if(this.draggedRange){var o,a;(o=this.delegate)===null||o===void 0||o.inputControllerWillMoveText(),(a=this.responder)===null||a===void 0||a.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()}else if(n){var l;let c=ei.fromJSONString(n);(l=this.responder)===null||l===void 0||l.insertDocument(c),this.requestRender()}this.draggedRange=null,this.draggingPoint=null},cut(s){var e,t;if((e=this.responder)!==null&&e!==void 0&&e.selectionIsExpanded()&&(this.serializeSelectionToDataTransfer(s.clipboardData)&&s.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillCutText(),this.deleteInDirection("backward"),s.defaultPrevented))return this.requestRender()},copy(s){var e;(e=this.responder)!==null&&e!==void 0&&e.selectionIsExpanded()&&this.serializeSelectionToDataTransfer(s.clipboardData)&&s.preventDefault()},paste(s){let e=s.clipboardData||s.testClipboardData,t={clipboard:e};if(!e||xI(s))return void this.getPastedHTMLUsingHiddenElement(R=>{var $,U,Z;return t.type="text/html",t.html=R,($=this.delegate)===null||$===void 0||$.inputControllerWillPaste(t),(U=this.responder)===null||U===void 0||U.insertHTML(t.html),this.requestRender(),(Z=this.delegate)===null||Z===void 0?void 0:Z.inputControllerDidPaste(t)});let i=e.getData("URL"),n=e.getData("text/html"),r=e.getData("public.url-name");if(i){var o,a,l;let R;t.type="text/html",R=r?Nv(r).trim():i,t.html=this.createLinkHTML(i,R),(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(t),this.setInputSummary({textAdded:R,didDelete:this.selectionIsExpanded()}),(a=this.responder)===null||a===void 0||a.insertHTML(t.html),this.requestRender(),(l=this.delegate)===null||l===void 0||l.inputControllerDidPaste(t)}else if(WS(e)){var c,u,h;t.type="text/plain",t.string=e.getData("text/plain"),(c=this.delegate)===null||c===void 0||c.inputControllerWillPaste(t),this.setInputSummary({textAdded:t.string,didDelete:this.selectionIsExpanded()}),(u=this.responder)===null||u===void 0||u.insertString(t.string),this.requestRender(),(h=this.delegate)===null||h===void 0||h.inputControllerDidPaste(t)}else if(n){var f,p,v;t.type="text/html",t.html=n,(f=this.delegate)===null||f===void 0||f.inputControllerWillPaste(t),(p=this.responder)===null||p===void 0||p.insertHTML(t.html),this.requestRender(),(v=this.delegate)===null||v===void 0||v.inputControllerDidPaste(t)}else if(Array.from(e.types).includes("Files")){var w,S;let R=(w=e.items)===null||w===void 0||(w=w[0])===null||w===void 0||(S=w.getAsFile)===null||S===void 0?void 0:S.call(w);if(R){var A,k,D;let $=SI(R);!R.name&&$&&(R.name="pasted-file-".concat(++EI,".").concat($)),t.type="File",t.file=R,(A=this.delegate)===null||A===void 0||A.inputControllerWillAttachFiles(),(k=this.responder)===null||k===void 0||k.insertFile(t.file),this.requestRender(),(D=this.delegate)===null||D===void 0||D.inputControllerDidPaste(t)}}s.preventDefault()},compositionstart(s){return this.getCompositionInput().start(s.data)},compositionupdate(s){return this.getCompositionInput().update(s.data)},compositionend(s){return this.getCompositionInput().end(s.data)},beforeinput(s){this.inputSummary.didInput=!0},input(s){return this.inputSummary.didInput=!0,s.stopPropagation()}}),ti(Bi,"keys",{backspace(s){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",s)},delete(s){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",s)},return(s){var e,t;return this.setInputSummary({preferDocument:!0}),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0?void 0:t.insertLineBreak()},tab(s){var e,t;(e=this.responder)!==null&&e!==void 0&&e.canIncreaseNestingLevel()&&((t=this.responder)===null||t===void 0||t.increaseNestingLevel(),this.requestRender(),s.preventDefault())},left(s){var e;if(this.selectionIsInCursorTarget())return s.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("backward")},right(s){var e;if(this.selectionIsInCursorTarget())return s.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("forward")},control:{d(s){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",s)},h(s){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",s)},o(s){var e,t;return s.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0||t.insertString(`
`,{updatePosition:!1}),this.requestRender()}},shift:{return(s){var e,t;(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0||t.insertString(`
`),this.requestRender(),s.preventDefault()},tab(s){var e,t;(e=this.responder)!==null&&e!==void 0&&e.canDecreaseNestingLevel()&&((t=this.responder)===null||t===void 0||t.decreaseNestingLevel(),this.requestRender(),s.preventDefault())},left(s){if(this.selectionIsInCursorTarget())return s.preventDefault(),this.expandSelectionInDirection("backward")},right(s){if(this.selectionIsInCursorTarget())return s.preventDefault(),this.expandSelectionInDirection("forward")}},alt:{backspace(s){var e;return this.setInputSummary({preferDocument:!1}),(e=this.delegate)===null||e===void 0?void 0:e.inputControllerWillPerformTyping()}},meta:{backspace(s){var e;return this.setInputSummary({preferDocument:!1}),(e=this.delegate)===null||e===void 0?void 0:e.inputControllerWillPerformTyping()}}}),Bi.proxyMethod("responder?.getSelectedRange"),Bi.proxyMethod("responder?.setSelectedRange"),Bi.proxyMethod("responder?.expandSelectionInDirection"),Bi.proxyMethod("responder?.selectionIsInCursorTarget"),Bi.proxyMethod("responder?.selectionIsExpanded");var SI=s=>{var e;return(e=s.type)===null||e===void 0||(e=e.match(/\/(\w+)$/))===null||e===void 0?void 0:e[1]},AI=!((lv=" ".codePointAt)===null||lv===void 0||!lv.call(" ",0)),TI=function(s){if(s.key&&AI&&s.key.codePointAt(0)===s.keyCode)return s.key;{let e;if(s.which===null?e=s.keyCode:s.which!==0&&s.charCode!==0&&(e=s.charCode),e!=null&&rA[e]!=="escape")return Pr.fromCodepoints([e]).toString()}},xI=function(s){let e=s.clipboardData;if(e){if(e.types.includes("text/html")){for(let t of e.types){let i=/^CorePasteboardFlavorType/.test(t),n=/^dyn\./.test(t)&&e.getData(t);if(i||n)return!0}return!1}{let t=e.types.includes("com.apple.webarchive"),i=e.types.includes("com.apple.flat-rtfd");return t||i}}},ss=class extends it{constructor(e){super(...arguments),this.inputController=e,this.responder=this.inputController.responder,this.delegate=this.inputController.delegate,this.inputSummary=this.inputController.inputSummary,this.data={}}start(e){if(this.data.start=e,this.isSignificant()){var t,i;this.inputSummary.eventName==="keypress"&&this.inputSummary.textAdded&&((i=this.responder)===null||i===void 0||i.deleteInDirection("left")),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=(t=this.responder)===null||t===void 0?void 0:t.getSelectedRange()}}update(e){if(this.data.update=e,this.isSignificant()){let t=this.selectPlaceholder();t&&(this.forgetPlaceholder(),this.range=t)}}end(e){return this.data.end=e,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(i=this.responder)===null||i===void 0||i.setSelectedRange(this.range),(n=this.responder)===null||n===void 0||n.insertString(this.data.end),(r=this.responder)===null||r===void 0?void 0:r.setSelectedRange(this.range[0]+this.data.end.length)):this.data.start!=null||this.data.update!=null?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset();var t,i,n,r}getEndData(){return this.data.end}isEnded(){return this.getEndData()!=null}isSignificant(){return!wI.composesExistingText||this.inputSummary.didInput}canApplyToDocument(){var e,t;return((e=this.data.start)===null||e===void 0?void 0:e.length)===0&&((t=this.data.end)===null||t===void 0?void 0:t.length)>0&&this.range}};ss.proxyMethod("inputController.setInputSummary"),ss.proxyMethod("inputController.requestRender"),ss.proxyMethod("inputController.requestReparse"),ss.proxyMethod("responder?.selectionIsExpanded"),ss.proxyMethod("responder?.insertPlaceholder"),ss.proxyMethod("responder?.selectPlaceholder"),ss.proxyMethod("responder?.forgetPlaceholder");var Tr=class extends Bo{constructor(){super(...arguments),this.render=this.render.bind(this)}elementDidMutate(){return this.scheduledRender?this.composing?(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidAllowUnhandledInput)===null||t===void 0?void 0:t.call(e):void 0:this.reparse();var e,t}scheduleRender(){return this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)}render(){var e,t;cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||(t=this.delegate)===null||t===void 0||t.render(),(e=this.afterRender)===null||e===void 0||e.call(this),this.afterRender=null}reparse(){var e;return(e=this.delegate)===null||e===void 0?void 0:e.reparse()}insertString(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var n;return(n=this.responder)===null||n===void 0?void 0:n.insertString(t,i)})}toggleAttributeIfSupported(e){var t;if(vv().includes(e))return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformFormatting(e),this.withTargetDOMRange(function(){var i;return(i=this.responder)===null||i===void 0?void 0:i.toggleCurrentAttribute(e)})}activateAttributeIfSupported(e,t){var i;if(vv().includes(e))return(i=this.delegate)===null||i===void 0||i.inputControllerWillPerformFormatting(e),this.withTargetDOMRange(function(){var n;return(n=this.responder)===null||n===void 0?void 0:n.setCurrentAttribute(e,t)})}deleteInDirection(e){let{recordUndoEntry:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{recordUndoEntry:!0};var i;t&&((i=this.delegate)===null||i===void 0||i.inputControllerWillPerformTyping());let n=()=>{var o;return(o=this.responder)===null||o===void 0?void 0:o.deleteInDirection(e)},r=this.getTargetDOMRange({minLength:this.composing?1:2});return r?this.withTargetDOMRange(r,n):n()}withTargetDOMRange(e,t){var i;return typeof e=="function"&&(t=e,e=this.getTargetDOMRange()),e?(i=this.responder)===null||i===void 0?void 0:i.withTargetDOMRange(e,t.bind(this)):(Mr.reset(),t.call(this))}getTargetDOMRange(){var e,t;let{minLength:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{minLength:0},n=(e=(t=this.event).getTargetRanges)===null||e===void 0?void 0:e.call(t);if(n&&n.length){let r=CI(n[0]);if(i===0||r.toString().length>=i)return r}}withEvent(e,t){let i;this.event=e;try{i=t.call(this)}finally{this.event=null}return i}};ti(Tr,"events",{keydown(s){if(GS(s)){var e;let t=MI(s);(e=this.delegate)!==null&&e!==void 0&&e.inputControllerDidReceiveKeyboardCommand(t)&&s.preventDefault()}else{let t=s.key;s.altKey&&(t+="+Alt"),s.shiftKey&&(t+="+Shift");let i=this.constructor.keys[t];if(i)return this.withEvent(s,i)}},paste(s){var e;let t,i=(e=s.clipboardData)===null||e===void 0?void 0:e.getData("URL");return oA(s)?(s.preventDefault(),this.attachFiles(s.clipboardData.files)):_I(s)?(s.preventDefault(),t={type:"text/plain",string:s.clipboardData.getData("text/plain")},(n=this.delegate)===null||n===void 0||n.inputControllerWillPaste(t),(r=this.responder)===null||r===void 0||r.insertString(t.string),this.render(),(o=this.delegate)===null||o===void 0?void 0:o.inputControllerDidPaste(t)):i?(s.preventDefault(),t={type:"text/html",html:this.createLinkHTML(i)},(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(t),(l=this.responder)===null||l===void 0||l.insertHTML(t.html),this.render(),(c=this.delegate)===null||c===void 0?void 0:c.inputControllerDidPaste(t)):void 0;var n,r,o,a,l,c},beforeinput(s){let e=this.constructor.inputTypes[s.inputType],t=(i=s,!(!/iPhone|iPad/.test(navigator.userAgent)||i.inputType&&i.inputType!=="insertParagraph"));var i;e&&(this.withEvent(s,e),t||this.scheduleRender()),t&&this.render()},input(s){Mr.reset()},dragstart(s){var e,t;(e=this.responder)!==null&&e!==void 0&&e.selectionContainsAttachments()&&(s.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:(t=this.responder)===null||t===void 0?void 0:t.getSelectedRange(),point:uv(s)})},dragenter(s){cv(s)&&s.preventDefault()},dragover(s){if(this.dragging){s.preventDefault();let t=uv(s);var e;if(!zo(t,this.dragging.point))return this.dragging.point=t,(e=this.responder)===null||e===void 0?void 0:e.setLocationRangeFromPointRange(t)}else cv(s)&&s.preventDefault()},drop(s){var e,t;if(this.dragging)return s.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillMoveText(),(t=this.responder)===null||t===void 0||t.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender();if(cv(s)){var i;s.preventDefault();let n=uv(s);return(i=this.responder)===null||i===void 0||i.setLocationRangeFromPointRange(n),this.attachFiles(s.dataTransfer.files)}},dragend(){var s;this.dragging&&((s=this.responder)===null||s===void 0||s.setSelectedRange(this.dragging.range),this.dragging=null)},compositionend(s){this.composing&&(this.composing=!1,Bl.recentAndroid||this.scheduleRender())}}),ti(Tr,"keys",{ArrowLeft(){var s,e;if((s=this.responder)!==null&&s!==void 0&&s.shouldManageMovingCursorInDirection("backward"))return this.event.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("backward")},ArrowRight(){var s,e;if((s=this.responder)!==null&&s!==void 0&&s.shouldManageMovingCursorInDirection("forward"))return this.event.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("forward")},Backspace(){var s,e,t;if((s=this.responder)!==null&&s!==void 0&&s.shouldManageDeletingInDirection("backward"))return this.event.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0||t.deleteInDirection("backward"),this.render()},Tab(){var s,e;if((s=this.responder)!==null&&s!==void 0&&s.canIncreaseNestingLevel())return this.event.preventDefault(),(e=this.responder)===null||e===void 0||e.increaseNestingLevel(),this.render()},"Tab+Shift"(){var s,e;if((s=this.responder)!==null&&s!==void 0&&s.canDecreaseNestingLevel())return this.event.preventDefault(),(e=this.responder)===null||e===void 0||e.decreaseNestingLevel(),this.render()}}),ti(Tr,"inputTypes",{deleteByComposition(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut(){return this.deleteInDirection("backward")},deleteByDrag(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var s;this.deleteByDragRange=(s=this.responder)===null||s===void 0?void 0:s.getSelectedRange()})},deleteCompositionText(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent(){return this.deleteInDirection("backward")},deleteContentBackward(){return this.deleteInDirection("backward")},deleteContentForward(){return this.deleteInDirection("forward")},deleteEntireSoftLine(){return this.deleteInDirection("forward")},deleteHardLineBackward(){return this.deleteInDirection("backward")},deleteHardLineForward(){return this.deleteInDirection("forward")},deleteSoftLineBackward(){return this.deleteInDirection("backward")},deleteSoftLineForward(){return this.deleteInDirection("forward")},deleteWordBackward(){return this.deleteInDirection("backward")},deleteWordForward(){return this.deleteInDirection("forward")},formatBackColor(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold(){return this.toggleAttributeIfSupported("bold")},formatFontColor(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent(){var s;if((s=this.responder)!==null&&s!==void 0&&s.canIncreaseNestingLevel())return this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.increaseNestingLevel()})},formatItalic(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent(){var s;if((s=this.responder)!==null&&s!==void 0&&s.canDecreaseNestingLevel())return this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.decreaseNestingLevel()})},formatRemove(){this.withTargetDOMRange(function(){for(let t in(s=this.responder)===null||s===void 0?void 0:s.getCurrentAttributes()){var s,e;(e=this.responder)===null||e===void 0||e.removeCurrentAttribute(t)}})},formatSetBlockTextDirection(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough(){return this.toggleAttributeIfSupported("strike")},formatSubscript(){return this.toggleAttributeIfSupported("sub")},formatSuperscript(){return this.toggleAttributeIfSupported("sup")},formatUnderline(){return this.toggleAttributeIfSupported("underline")},historyRedo(){var s;return(s=this.delegate)===null||s===void 0?void 0:s.inputControllerWillPerformRedo()},historyUndo(){var s;return(s=this.delegate)===null||s===void 0?void 0:s.inputControllerWillPerformUndo()},insertCompositionText(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop(){let s=this.deleteByDragRange;var e;if(s)return this.deleteByDragRange=null,(e=this.delegate)===null||e===void 0||e.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.moveTextFromRange(s)})},insertFromPaste(){let{dataTransfer:s}=this.event,e={dataTransfer:s},t=s.getData("URL"),i=s.getData("text/html");if(t){var n;let l;this.event.preventDefault(),e.type="text/html";let c=s.getData("public.url-name");l=c?Nv(c).trim():t,e.html=this.createLinkHTML(t,l),(n=this.delegate)===null||n===void 0||n.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var u;return(u=this.responder)===null||u===void 0?void 0:u.insertHTML(e.html)}),this.afterRender=()=>{var u;return(u=this.delegate)===null||u===void 0?void 0:u.inputControllerDidPaste(e)}}else if(WS(s)){var r;e.type="text/plain",e.string=s.getData("text/plain"),(r=this.delegate)===null||r===void 0||r.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertString(e.string)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(e)}}else if(PI(this.event)){var o;e.type="File",e.file=s.files[0],(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertFile(e.file)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(e)}}else if(i){var a;this.event.preventDefault(),e.type="text/html",e.html=i,(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertHTML(e.html)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(e)}}},insertFromYank(){return this.insertString(this.event.data)},insertLineBreak(){return this.insertString(`
`)},insertLink(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList(){return this.toggleAttributeIfSupported("number")},insertParagraph(){var s;return(s=this.delegate)===null||s===void 0||s.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.insertLineBreak()})},insertReplacementText(){let s=this.event.dataTransfer.getData("text/plain"),e=this.event.getTargetRanges()[0];this.withTargetDOMRange(e,()=>{this.insertString(s,{updatePosition:!1})})},insertText(){var s;return this.insertString(this.event.data||((s=this.event.dataTransfer)===null||s===void 0?void 0:s.getData("text/plain")))},insertTranspose(){return this.insertString(this.event.data)},insertUnorderedList(){return this.toggleAttributeIfSupported("bullet")}});var CI=function(s){let e=document.createRange();return e.setStart(s.startContainer,s.startOffset),e.setEnd(s.endContainer,s.endOffset),e},cv=s=>{var e;return Array.from(((e=s.dataTransfer)===null||e===void 0?void 0:e.types)||[]).includes("Files")},PI=s=>{var e;return((e=s.dataTransfer.files)===null||e===void 0?void 0:e[0])&&!oA(s)&&!(t=>{let{dataTransfer:i}=t;return i.types.includes("Files")&&i.types.includes("text/html")&&i.getData("text/html").includes("urn:schemas-microsoft-com:office:office")})(s)},oA=function(s){let e=s.clipboardData;if(e)return Array.from(e.types).filter(t=>t.match(/file/i)).length===e.types.length&&e.files.length>=1},_I=function(s){let e=s.clipboardData;if(e)return e.types.includes("text/plain")&&e.types.length===1},MI=function(s){let e=[];return s.altKey&&e.push("alt"),s.shiftKey&&e.push("shift"),e.push(s.key),e},uv=s=>({x:s.clientX,y:s.clientY}),Cv="[data-trix-attribute]",Pv="[data-trix-action]",OI="".concat(Cv,", ").concat(Pv),Wd="[data-trix-dialog]",LI="".concat(Wd,"[data-trix-active]"),kI="".concat(Wd," [data-trix-method]"),IS="".concat(Wd," [data-trix-input]"),RS=(s,e)=>(e||(e=Mo(s)),s.querySelector("[data-trix-input][name='".concat(e,"']"))),NS=s=>s.getAttribute("data-trix-action"),Mo=s=>s.getAttribute("data-trix-attribute")||s.getAttribute("data-trix-dialog-attribute"),jd=class extends it{constructor(e){super(e),this.didClickActionButton=this.didClickActionButton.bind(this),this.didClickAttributeButton=this.didClickAttributeButton.bind(this),this.didClickDialogButton=this.didClickDialogButton.bind(this),this.didKeyDownDialogInput=this.didKeyDownDialogInput.bind(this),this.element=e,this.attributes={},this.actions={},this.resetDialogInputs(),Ze("mousedown",{onElement:this.element,matchingSelector:Pv,withCallback:this.didClickActionButton}),Ze("mousedown",{onElement:this.element,matchingSelector:Cv,withCallback:this.didClickAttributeButton}),Ze("click",{onElement:this.element,matchingSelector:OI,preventDefault:!0}),Ze("click",{onElement:this.element,matchingSelector:kI,withCallback:this.didClickDialogButton}),Ze("keydown",{onElement:this.element,matchingSelector:IS,withCallback:this.didKeyDownDialogInput})}didClickActionButton(e,t){var i;(i=this.delegate)===null||i===void 0||i.toolbarDidClickButton(),e.preventDefault();let n=NS(t);return this.getDialog(n)?this.toggleDialog(n):(r=this.delegate)===null||r===void 0?void 0:r.toolbarDidInvokeAction(n,t);var r}didClickAttributeButton(e,t){var i;(i=this.delegate)===null||i===void 0||i.toolbarDidClickButton(),e.preventDefault();let n=Mo(t);var r;return this.getDialog(n)?this.toggleDialog(n):(r=this.delegate)===null||r===void 0||r.toolbarDidToggleAttribute(n),this.refreshAttributeButtons()}didClickDialogButton(e,t){let i=fn(t,{matchingSelector:Wd});return this[t.getAttribute("data-trix-method")].call(this,i)}didKeyDownDialogInput(e,t){if(e.keyCode===13){e.preventDefault();let i=t.getAttribute("name"),n=this.getDialog(i);this.setAttribute(n)}if(e.keyCode===27)return e.preventDefault(),this.hideDialog()}updateActions(e){return this.actions=e,this.refreshActionButtons()}refreshActionButtons(){return this.eachActionButton((e,t)=>{e.disabled=this.actions[t]===!1})}eachActionButton(e){return Array.from(this.element.querySelectorAll(Pv)).map(t=>e(t,NS(t)))}updateAttributes(e){return this.attributes=e,this.refreshAttributeButtons()}refreshAttributeButtons(){return this.eachAttributeButton((e,t)=>(e.disabled=this.attributes[t]===!1,this.attributes[t]||this.dialogIsVisible(t)?(e.setAttribute("data-trix-active",""),e.classList.add("trix-active")):(e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"))))}eachAttributeButton(e){return Array.from(this.element.querySelectorAll(Cv)).map(t=>e(t,Mo(t)))}applyKeyboardCommand(e){let t=JSON.stringify(e.sort());for(let i of Array.from(this.element.querySelectorAll("[data-trix-key]"))){let n=i.getAttribute("data-trix-key").split("+");if(JSON.stringify(n.sort())===t)return _l("mousedown",{onElement:i}),!0}return!1}dialogIsVisible(e){let t=this.getDialog(e);if(t)return t.hasAttribute("data-trix-active")}toggleDialog(e){return this.dialogIsVisible(e)?this.hideDialog():this.showDialog(e)}showDialog(e){var t,i;this.hideDialog(),(t=this.delegate)===null||t===void 0||t.toolbarWillShowDialog();let n=this.getDialog(e);n.setAttribute("data-trix-active",""),n.classList.add("trix-active"),Array.from(n.querySelectorAll("input[disabled]")).forEach(o=>{o.removeAttribute("disabled")});let r=Mo(n);if(r){let o=RS(n,e);o&&(o.value=this.attributes[r]||"",o.select())}return(i=this.delegate)===null||i===void 0?void 0:i.toolbarDidShowDialog(e)}setAttribute(e){let t=Mo(e),i=RS(e,t);return i.willValidate&&!i.checkValidity()?(i.setAttribute("data-trix-validate",""),i.classList.add("trix-validate"),i.focus()):((n=this.delegate)===null||n===void 0||n.toolbarDidUpdateAttribute(t,i.value),this.hideDialog());var n}removeAttribute(e){var t;let i=Mo(e);return(t=this.delegate)===null||t===void 0||t.toolbarDidRemoveAttribute(i),this.hideDialog()}hideDialog(){let e=this.element.querySelector(LI);var t;if(e)return e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"),this.resetDialogInputs(),(t=this.delegate)===null||t===void 0?void 0:t.toolbarDidHideDialog((i=>i.getAttribute("data-trix-dialog"))(e))}resetDialogInputs(){Array.from(this.element.querySelectorAll(IS)).forEach(e=>{e.setAttribute("disabled","disabled"),e.removeAttribute("data-trix-validate"),e.classList.remove("trix-validate")})}getDialog(e){return this.element.querySelector("[data-trix-dialog=".concat(e,"]"))}},xr=class extends $d{constructor(e){let{editorElement:t,document:i,html:n}=e;super(...arguments),this.editorElement=t,this.selectionManager=new Ns(this.editorElement),this.selectionManager.delegate=this,this.composition=new ns,this.composition.delegate=this,this.attachmentManager=new kd(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=Dv.getLevel()===2?new Tr(this.editorElement):new Bi(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new zd(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new jd(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new Id(this.composition,this.selectionManager,this.editorElement),i?this.editor.loadDocument(i):this.editor.loadHTML(n)}registerSelectionManager(){return Mr.registerSelectionManager(this.selectionManager)}unregisterSelectionManager(){return Mr.unregisterSelectionManager(this.selectionManager)}render(){return this.compositionController.render()}reparse(){return this.composition.replaceHTML(this.editorElement.innerHTML)}compositionDidChangeDocument(e){if(this.notifyEditorElement("document-change"),!this.handlingInput)return this.render()}compositionDidChangeCurrentAttributes(e){return this.currentAttributes=e,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})}compositionDidPerformInsertionAtRange(e){this.pasting&&(this.pastedRange=e)}compositionShouldAcceptFile(e){return this.notifyEditorElement("file-accept",{file:e})}compositionDidAddAttachment(e){let t=this.attachmentManager.manageAttachment(e);return this.notifyEditorElement("attachment-add",{attachment:t})}compositionDidEditAttachment(e){this.compositionController.rerenderViewForObject(e);let t=this.attachmentManager.manageAttachment(e);return this.notifyEditorElement("attachment-edit",{attachment:t}),this.notifyEditorElement("change")}compositionDidChangeAttachmentPreviewURL(e){return this.compositionController.invalidateViewForObject(e),this.notifyEditorElement("change")}compositionDidRemoveAttachment(e){let t=this.attachmentManager.unmanageAttachment(e);return this.notifyEditorElement("attachment-remove",{attachment:t})}compositionDidStartEditingAttachment(e,t){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(e),this.compositionController.installAttachmentEditorForAttachment(e,t),this.selectionManager.setLocationRange(this.attachmentLocationRange)}compositionDidStopEditingAttachment(e){this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null}compositionDidRequestChangingSelectionToLocationRange(e){if(!this.loadingSnapshot||this.isFocused())return this.requestedLocationRange=e,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()}compositionWillLoadSnapshot(){this.loadingSnapshot=!0}compositionDidLoadSnapshot(){this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1}getSelectionManager(){return this.selectionManager}attachmentManagerDidRequestRemovalOfAttachment(e){return this.removeAttachment(e)}compositionControllerWillSyncDocumentView(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()}compositionControllerDidSyncDocumentView(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")}compositionControllerDidRender(){this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision}compositionControllerDidFocus(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")}compositionControllerDidBlur(){return this.notifyEditorElement("blur")}compositionControllerDidSelectAttachment(e,t){return this.toolbarController.hideDialog(),this.composition.editAttachment(e,t)}compositionControllerDidRequestDeselectingAttachment(e){let t=this.attachmentLocationRange||this.composition.document.getLocationRangeOfAttachment(e);return this.selectionManager.setLocationRange(t[1])}compositionControllerWillUpdateAttachment(e){return this.editor.recordUndoEntry("Edit Attachment",{context:e.id,consolidatable:!0})}compositionControllerDidRequestRemovalOfAttachment(e){return this.removeAttachment(e)}inputControllerWillHandleInput(){this.handlingInput=!0,this.requestedRender=!1}inputControllerDidRequestRender(){this.requestedRender=!0}inputControllerDidHandleInput(){if(this.handlingInput=!1,this.requestedRender)return this.requestedRender=!1,this.render()}inputControllerDidAllowUnhandledInput(){return this.notifyEditorElement("change")}inputControllerDidRequestReparse(){return this.reparse()}inputControllerWillPerformTyping(){return this.recordTypingUndoEntry()}inputControllerWillPerformFormatting(e){return this.recordFormattingUndoEntry(e)}inputControllerWillCutText(){return this.editor.recordUndoEntry("Cut")}inputControllerWillPaste(e){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:e})}inputControllerDidPaste(e){return e.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:e})}inputControllerWillMoveText(){return this.editor.recordUndoEntry("Move")}inputControllerWillAttachFiles(){return this.editor.recordUndoEntry("Drop Files")}inputControllerWillPerformUndo(){return this.editor.undo()}inputControllerWillPerformRedo(){return this.editor.redo()}inputControllerDidReceiveKeyboardCommand(e){return this.toolbarController.applyKeyboardCommand(e)}inputControllerDidStartDrag(){this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()}inputControllerDidReceiveDragOverPoint(e){return this.selectionManager.setLocationRangeFromPointRange(e)}inputControllerDidCancelDrag(){this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null}locationRangeDidChange(e){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!xd(this.attachmentLocationRange,e)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")}toolbarDidClickButton(){if(!this.getLocationRange())return this.setLocationRange({index:0,offset:0})}toolbarDidInvokeAction(e,t){return this.invokeAction(e,t)}toolbarDidToggleAttribute(e){if(this.recordFormattingUndoEntry(e),this.composition.toggleCurrentAttribute(e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidUpdateAttribute(e,t){if(this.recordFormattingUndoEntry(e),this.composition.setCurrentAttribute(e,t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidRemoveAttribute(e){if(this.recordFormattingUndoEntry(e),this.composition.removeCurrentAttribute(e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarWillShowDialog(e){return this.composition.expandSelectionForEditing(),this.freezeSelection()}toolbarDidShowDialog(e){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:e})}toolbarDidHideDialog(e){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:e})}freezeSelection(){if(!this.selectionFrozen)return this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render()}thawSelection(){if(this.selectionFrozen)return this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()}canInvokeAction(e){return!!this.actionIsExternal(e)||!((t=this.actions[e])===null||t===void 0||(t=t.test)===null||t===void 0||!t.call(this));var t}invokeAction(e,t){return this.actionIsExternal(e)?this.notifyEditorElement("action-invoke",{actionName:e,invokingElement:t}):(i=this.actions[e])===null||i===void 0||(i=i.perform)===null||i===void 0?void 0:i.call(this);var i}actionIsExternal(e){return/^x-./.test(e)}getCurrentActions(){let e={};for(let t in this.actions)e[t]=this.canInvokeAction(t);return e}updateCurrentActions(){let e=this.getCurrentActions();if(!zo(e,this.currentActions))return this.currentActions=e,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions})}runEditorFilters(){let e=this.composition.getSnapshot();if(Array.from(this.editor.filters).forEach(n=>{let{document:r,selectedRange:o}=e;e=n.call(this.editor,e)||{},e.document||(e.document=r),e.selectedRange||(e.selectedRange=o)}),t=e,i=this.composition.getSnapshot(),!xd(t.selectedRange,i.selectedRange)||!t.document.isEqualTo(i.document))return this.composition.loadSnapshot(e);var t,i}updateInputElement(){let e=function(t,i){let n=lI[i];if(n)return n(t);throw new Error("unknown content type: ".concat(i))}(this.compositionController.getSerializableElement(),"text/html");return this.editorElement.setFormValue(e)}notifyEditorElement(e,t){switch(e){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(e,t)}removeAttachment(e){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(e),this.render()}recordFormattingUndoEntry(e){let t=at(e),i=this.selectionManager.getLocationRange();if(t||!Bs(i))return this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})}recordTypingUndoEntry(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})}getUndoContext(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return[this.getLocationContext(),this.getTimeContext(),...Array.from(t)]}getLocationContext(){let e=this.selectionManager.getLocationRange();return Bs(e)?e[0].index:e}getTimeContext(){return fv.interval>0?Math.floor(new Date().getTime()/fv.interval):0}isFocused(){var e;return this.editorElement===((e=this.editorElement.ownerDocument)===null||e===void 0?void 0:e.activeElement)}isFocusedInvisibly(){return this.isFocused()&&!this.getLocationRange()}get actions(){return this.constructor.actions}};ti(xr,"actions",{undo:{test(){return this.editor.canUndo()},perform(){return this.editor.undo()}},redo:{test(){return this.editor.canRedo()},perform(){return this.editor.redo()}},link:{test(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test(){return this.editor.canIncreaseNestingLevel()},perform(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test(){return this.editor.canDecreaseNestingLevel()},perform(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:()=>!0,perform(){return Dv.pickFiles(this.editor.insertFiles)}}}),xr.proxyMethod("getSelectionManager().setLocationRange"),xr.proxyMethod("getSelectionManager().getLocationRange");var DI=Object.freeze({__proto__:null,AttachmentEditorController:Bd,CompositionController:zd,Controller:$d,EditorController:xr,InputController:Bo,Level0InputController:Bi,Level2InputController:Tr,ToolbarController:jd}),FI=Object.freeze({__proto__:null,MutationObserver:Hd,SelectionChangeObserver:Cd}),II=Object.freeze({__proto__:null,FileVerificationOperation:Ud,ImagePreloadOperation:Ld});qS("trix-toolbar",`%t {
  display: block;
}

%t {
  white-space: nowrap;
}

%t [data-trix-dialog] {
  display: none;
}

%t [data-trix-dialog][data-trix-active] {
  display: block;
}

%t [data-trix-dialog] [data-trix-validate]:invalid {
  background-color: #ffdddd;
}`);var Vd=class extends HTMLElement{connectedCallback(){this.innerHTML===""&&(this.innerHTML=VS.getDefaultHTML())}},RI=0,NI=function(s){if(!s.hasAttribute("contenteditable"))return s.setAttribute("contenteditable",""),function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.times=1,Ze(e,t)}("focus",{onElement:s,withCallback:()=>BI(s)})},BI=function(s){return zI(s),$I(s)},zI=function(s){var e,t;if((e=(t=document).queryCommandSupported)!==null&&e!==void 0&&e.call(t,"enableObjectResizing"))return document.execCommand("enableObjectResizing",!1,!1),Ze("mscontrolselect",{onElement:s,preventDefault:!0})},$I=function(s){var e,t;if((e=(t=document).queryCommandSupported)!==null&&e!==void 0&&e.call(t,"DefaultParagraphSeparator")){let{tagName:i}=jt.default;if(["div","p"].includes(i))return document.execCommand("DefaultParagraphSeparator",!1,i)}},BS=Bl.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"};qS("trix-editor",`%t {
    display: block;
}

%t:empty::before {
    content: attr(placeholder);
    color: graytext;
    cursor: text;
    pointer-events: none;
    white-space: pre-line;
}

%t a[contenteditable=false] {
    cursor: text;
}

%t img {
    max-width: 100%;
    height: auto;
}

%t `.concat(Sr,` figcaption textarea {
    resize: none;
}

%t `).concat(Sr,` figcaption textarea.trix-autoresize-clone {
    position: absolute;
    left: -9999px;
    max-height: 0px;
}

%t `).concat(Sr,` figcaption[data-trix-placeholder]:empty::before {
    content: attr(data-trix-placeholder);
    color: graytext;
}

%t [data-trix-cursor-target] {
    display: `).concat(BS.display,` !important;
    width: `).concat(BS.width,` !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

%t [data-trix-cursor-target=left] {
    vertical-align: top !important;
    margin-left: -1px !important;
}

%t [data-trix-cursor-target=right] {
    vertical-align: bottom !important;
    margin-right: -1px !important;
}`));var Rs=new WeakMap,Cl=new WeakSet,_v=class{constructor(e){var t,i;ZS(t=this,i=Cl),i.add(t),kl(this,Rs,{writable:!0,value:void 0}),this.element=e,Bv(this,Rs,e.attachInternals())}connectedCallback(){wd(this,Cl,Ed).call(this)}disconnectedCallback(){}get labels(){return Ue(this,Rs).labels}get disabled(){var e;return(e=this.element.inputElement)===null||e===void 0?void 0:e.disabled}set disabled(e){this.element.toggleAttribute("disabled",e)}get required(){return this.element.hasAttribute("required")}set required(e){this.element.toggleAttribute("required",e),wd(this,Cl,Ed).call(this)}get validity(){return Ue(this,Rs).validity}get validationMessage(){return Ue(this,Rs).validationMessage}get willValidate(){return Ue(this,Rs).willValidate}setFormValue(e){wd(this,Cl,Ed).call(this)}checkValidity(){return Ue(this,Rs).checkValidity()}reportValidity(){return Ue(this,Rs).reportValidity()}setCustomValidity(e){wd(this,Cl,Ed).call(this,e)}};function Ed(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",{required:e,value:t}=this.element,i=e&&!t,n=!!s,r=Se("input",{required:e}),o=s||r.validationMessage;Ue(this,Rs).setValidity({valueMissing:i,customError:n},o)}var dv=new WeakMap,hv=new WeakMap,pv=new WeakMap,Mv=class{constructor(e){kl(this,dv,{writable:!0,value:void 0}),kl(this,hv,{writable:!0,value:t=>{t.defaultPrevented||t.target===this.element.form&&this.element.reset()}}),kl(this,pv,{writable:!0,value:t=>{if(t.defaultPrevented||this.element.contains(t.target))return;let i=fn(t.target,{matchingSelector:"label"});i&&Array.from(this.labels).includes(i)&&this.element.focus()}}),this.element=e}connectedCallback(){Bv(this,dv,function(e){if(e.hasAttribute("aria-label")||e.hasAttribute("aria-labelledby"))return;let t=function(){let i=Array.from(e.labels).map(r=>{if(!r.contains(e))return r.textContent}).filter(r=>r),n=i.join(" ");return n?e.setAttribute("aria-label",n):e.removeAttribute("aria-label")};return t(),Ze("focus",{onElement:e,withCallback:t})}(this.element)),window.addEventListener("reset",Ue(this,hv),!1),window.addEventListener("click",Ue(this,pv),!1)}disconnectedCallback(){var e;(e=Ue(this,dv))===null||e===void 0||e.destroy(),window.removeEventListener("reset",Ue(this,hv),!1),window.removeEventListener("click",Ue(this,pv),!1)}get labels(){let e=[];this.element.id&&this.element.ownerDocument&&e.push(...Array.from(this.element.ownerDocument.querySelectorAll("label[for='".concat(this.element.id,"']"))||[]));let t=fn(this.element,{matchingSelector:"label"});return t&&[this.element,null].includes(t.control)&&e.push(t),e}get disabled(){return console.warn("This browser does not support the [disabled] attribute for trix-editor elements."),!1}set disabled(e){console.warn("This browser does not support the [disabled] attribute for trix-editor elements.")}get required(){return console.warn("This browser does not support the [required] attribute for trix-editor elements."),!1}set required(e){console.warn("This browser does not support the [required] attribute for trix-editor elements.")}get validity(){return console.warn("This browser does not support the validity property for trix-editor elements."),null}get validationMessage(){return console.warn("This browser does not support the validationMessage property for trix-editor elements."),""}get willValidate(){return console.warn("This browser does not support the willValidate property for trix-editor elements."),!1}setFormValue(e){}checkValidity(){return console.warn("This browser does not support checkValidity() for trix-editor elements."),!0}reportValidity(){return console.warn("This browser does not support reportValidity() for trix-editor elements."),!0}setCustomValidity(e){console.warn("This browser does not support setCustomValidity(validationMessage) for trix-editor elements.")}},kt=new WeakMap,Nl=class extends HTMLElement{constructor(){super(),kl(this,kt,{writable:!0,value:void 0}),Bv(this,kt,this.constructor.formAssociated?new _v(this):new Mv(this))}get trixId(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++RI),this.trixId)}get labels(){return Ue(this,kt).labels}get disabled(){return Ue(this,kt).disabled}set disabled(e){Ue(this,kt).disabled=e}get required(){return Ue(this,kt).required}set required(e){Ue(this,kt).required=e}get validity(){return Ue(this,kt).validity}get validationMessage(){return Ue(this,kt).validationMessage}get willValidate(){return Ue(this,kt).willValidate}get type(){return this.localName}get toolbarElement(){var e;if(this.hasAttribute("toolbar"))return(e=this.ownerDocument)===null||e===void 0?void 0:e.getElementById(this.getAttribute("toolbar"));if(this.parentNode){let t="trix-toolbar-".concat(this.trixId);this.setAttribute("toolbar",t);let i=Se("trix-toolbar",{id:t});return this.parentNode.insertBefore(i,this),i}}get form(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.form}get inputElement(){var e;if(this.hasAttribute("input"))return(e=this.ownerDocument)===null||e===void 0?void 0:e.getElementById(this.getAttribute("input"));if(this.parentNode){let t="trix-input-".concat(this.trixId);this.setAttribute("input",t);let i=Se("input",{type:"hidden",id:t});return this.parentNode.insertBefore(i,this.nextElementSibling),i}}get editor(){var e;return(e=this.editorController)===null||e===void 0?void 0:e.editor}get name(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.name}get value(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.value}set value(e){var t;this.defaultValue=e,(t=this.editor)===null||t===void 0||t.loadHTML(this.defaultValue)}notify(e,t){if(this.editorController)return _l("trix-".concat(e),{onElement:this,attributes:t})}setFormValue(e){this.inputElement&&(this.inputElement.value=e,Ue(this,kt).setFormValue(e))}connectedCallback(){this.hasAttribute("data-trix-internal")||(NI(this),function(e){e.hasAttribute("role")||e.setAttribute("role","textbox")}(this),this.editorController||(_l("trix-before-initialize",{onElement:this}),this.editorController=new xr({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame(()=>_l("trix-initialize",{onElement:this}))),this.editorController.registerSelectionManager(),Ue(this,kt).connectedCallback(),function(e){!document.querySelector(":focus")&&e.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===e&&e.focus()}(this))}disconnectedCallback(){var e;(e=this.editorController)===null||e===void 0||e.unregisterSelectionManager(),Ue(this,kt).disconnectedCallback()}checkValidity(){return Ue(this,kt).checkValidity()}reportValidity(){return Ue(this,kt).reportValidity()}setCustomValidity(e){Ue(this,kt).setCustomValidity(e)}formDisabledCallback(e){this.inputElement&&(this.inputElement.disabled=e),this.toggleAttribute("contenteditable",!e)}formResetCallback(){this.reset()}reset(){this.value=this.defaultValue}};ti(Nl,"formAssociated","ElementInternals"in window);var zS={VERSION:gF,config:zl,core:cI,models:sA,views:fI,controllers:DI,observers:FI,operations:II,elements:Object.freeze({__proto__:null,TrixEditorElement:Nl,TrixToolbarElement:Vd}),filters:Object.freeze({__proto__:null,Filter:Fd,attachmentGalleryFilter:tA})};Object.assign(zS,sA),window.Trix=zS,setTimeout(function(){customElements.get("trix-toolbar")||customElements.define("trix-toolbar",Vd),customElements.get("trix-editor")||customElements.define("trix-editor",Nl)},0);(function(s){typeof define=="function"&&define.amd?define(s):s()})(function(){"use strict";var s={exports:{}};(function(Q,H){(function(T){Q.exports=T()})(function(T){var F=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function _(ee,V){var O=ee[0],P=ee[1],z=ee[2],I=ee[3];O+=(P&z|~P&I)+V[0]-680876936|0,O=(O<<7|O>>>25)+P|0,I+=(O&P|~O&z)+V[1]-389564586|0,I=(I<<12|I>>>20)+O|0,z+=(I&O|~I&P)+V[2]+606105819|0,z=(z<<17|z>>>15)+I|0,P+=(z&I|~z&O)+V[3]-1044525330|0,P=(P<<22|P>>>10)+z|0,O+=(P&z|~P&I)+V[4]-176418897|0,O=(O<<7|O>>>25)+P|0,I+=(O&P|~O&z)+V[5]+1200080426|0,I=(I<<12|I>>>20)+O|0,z+=(I&O|~I&P)+V[6]-1473231341|0,z=(z<<17|z>>>15)+I|0,P+=(z&I|~z&O)+V[7]-45705983|0,P=(P<<22|P>>>10)+z|0,O+=(P&z|~P&I)+V[8]+1770035416|0,O=(O<<7|O>>>25)+P|0,I+=(O&P|~O&z)+V[9]-1958414417|0,I=(I<<12|I>>>20)+O|0,z+=(I&O|~I&P)+V[10]-42063|0,z=(z<<17|z>>>15)+I|0,P+=(z&I|~z&O)+V[11]-1990404162|0,P=(P<<22|P>>>10)+z|0,O+=(P&z|~P&I)+V[12]+1804603682|0,O=(O<<7|O>>>25)+P|0,I+=(O&P|~O&z)+V[13]-40341101|0,I=(I<<12|I>>>20)+O|0,z+=(I&O|~I&P)+V[14]-1502002290|0,z=(z<<17|z>>>15)+I|0,P+=(z&I|~z&O)+V[15]+1236535329|0,P=(P<<22|P>>>10)+z|0,O+=(P&I|z&~I)+V[1]-165796510|0,O=(O<<5|O>>>27)+P|0,I+=(O&z|P&~z)+V[6]-1069501632|0,I=(I<<9|I>>>23)+O|0,z+=(I&P|O&~P)+V[11]+643717713|0,z=(z<<14|z>>>18)+I|0,P+=(z&O|I&~O)+V[0]-373897302|0,P=(P<<20|P>>>12)+z|0,O+=(P&I|z&~I)+V[5]-701558691|0,O=(O<<5|O>>>27)+P|0,I+=(O&z|P&~z)+V[10]+38016083|0,I=(I<<9|I>>>23)+O|0,z+=(I&P|O&~P)+V[15]-660478335|0,z=(z<<14|z>>>18)+I|0,P+=(z&O|I&~O)+V[4]-405537848|0,P=(P<<20|P>>>12)+z|0,O+=(P&I|z&~I)+V[9]+568446438|0,O=(O<<5|O>>>27)+P|0,I+=(O&z|P&~z)+V[14]-1019803690|0,I=(I<<9|I>>>23)+O|0,z+=(I&P|O&~P)+V[3]-187363961|0,z=(z<<14|z>>>18)+I|0,P+=(z&O|I&~O)+V[8]+1163531501|0,P=(P<<20|P>>>12)+z|0,O+=(P&I|z&~I)+V[13]-1444681467|0,O=(O<<5|O>>>27)+P|0,I+=(O&z|P&~z)+V[2]-51403784|0,I=(I<<9|I>>>23)+O|0,z+=(I&P|O&~P)+V[7]+1735328473|0,z=(z<<14|z>>>18)+I|0,P+=(z&O|I&~O)+V[12]-1926607734|0,P=(P<<20|P>>>12)+z|0,O+=(P^z^I)+V[5]-378558|0,O=(O<<4|O>>>28)+P|0,I+=(O^P^z)+V[8]-2022574463|0,I=(I<<11|I>>>21)+O|0,z+=(I^O^P)+V[11]+1839030562|0,z=(z<<16|z>>>16)+I|0,P+=(z^I^O)+V[14]-35309556|0,P=(P<<23|P>>>9)+z|0,O+=(P^z^I)+V[1]-1530992060|0,O=(O<<4|O>>>28)+P|0,I+=(O^P^z)+V[4]+1272893353|0,I=(I<<11|I>>>21)+O|0,z+=(I^O^P)+V[7]-155497632|0,z=(z<<16|z>>>16)+I|0,P+=(z^I^O)+V[10]-1094730640|0,P=(P<<23|P>>>9)+z|0,O+=(P^z^I)+V[13]+681279174|0,O=(O<<4|O>>>28)+P|0,I+=(O^P^z)+V[0]-358537222|0,I=(I<<11|I>>>21)+O|0,z+=(I^O^P)+V[3]-722521979|0,z=(z<<16|z>>>16)+I|0,P+=(z^I^O)+V[6]+76029189|0,P=(P<<23|P>>>9)+z|0,O+=(P^z^I)+V[9]-640364487|0,O=(O<<4|O>>>28)+P|0,I+=(O^P^z)+V[12]-421815835|0,I=(I<<11|I>>>21)+O|0,z+=(I^O^P)+V[15]+530742520|0,z=(z<<16|z>>>16)+I|0,P+=(z^I^O)+V[2]-995338651|0,P=(P<<23|P>>>9)+z|0,O+=(z^(P|~I))+V[0]-198630844|0,O=(O<<6|O>>>26)+P|0,I+=(P^(O|~z))+V[7]+1126891415|0,I=(I<<10|I>>>22)+O|0,z+=(O^(I|~P))+V[14]-1416354905|0,z=(z<<15|z>>>17)+I|0,P+=(I^(z|~O))+V[5]-57434055|0,P=(P<<21|P>>>11)+z|0,O+=(z^(P|~I))+V[12]+1700485571|0,O=(O<<6|O>>>26)+P|0,I+=(P^(O|~z))+V[3]-1894986606|0,I=(I<<10|I>>>22)+O|0,z+=(O^(I|~P))+V[10]-1051523|0,z=(z<<15|z>>>17)+I|0,P+=(I^(z|~O))+V[1]-2054922799|0,P=(P<<21|P>>>11)+z|0,O+=(z^(P|~I))+V[8]+1873313359|0,O=(O<<6|O>>>26)+P|0,I+=(P^(O|~z))+V[15]-30611744|0,I=(I<<10|I>>>22)+O|0,z+=(O^(I|~P))+V[6]-1560198380|0,z=(z<<15|z>>>17)+I|0,P+=(I^(z|~O))+V[13]+1309151649|0,P=(P<<21|P>>>11)+z|0,O+=(z^(P|~I))+V[4]-145523070|0,O=(O<<6|O>>>26)+P|0,I+=(P^(O|~z))+V[11]-1120210379|0,I=(I<<10|I>>>22)+O|0,z+=(O^(I|~P))+V[2]+718787259|0,z=(z<<15|z>>>17)+I|0,P+=(I^(z|~O))+V[9]-343485551|0,P=(P<<21|P>>>11)+z|0,ee[0]=O+ee[0]|0,ee[1]=P+ee[1]|0,ee[2]=z+ee[2]|0,ee[3]=I+ee[3]|0}function J(ee){var V=[],O;for(O=0;O<64;O+=4)V[O>>2]=ee.charCodeAt(O)+(ee.charCodeAt(O+1)<<8)+(ee.charCodeAt(O+2)<<16)+(ee.charCodeAt(O+3)<<24);return V}function ie(ee){var V=[],O;for(O=0;O<64;O+=4)V[O>>2]=ee[O]+(ee[O+1]<<8)+(ee[O+2]<<16)+(ee[O+3]<<24);return V}function le(ee){var V=ee.length,O=[1732584193,-271733879,-1732584194,271733878],P,z,I,je,fe,ft;for(P=64;P<=V;P+=64)_(O,J(ee.substring(P-64,P)));for(ee=ee.substring(P-64),z=ee.length,I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P=0;P<z;P+=1)I[P>>2]|=ee.charCodeAt(P)<<(P%4<<3);if(I[P>>2]|=128<<(P%4<<3),P>55)for(_(O,I),P=0;P<16;P+=1)I[P]=0;return je=V*8,je=je.toString(16).match(/(.*?)(.{0,8})$/),fe=parseInt(je[2],16),ft=parseInt(je[1],16)||0,I[14]=fe,I[15]=ft,_(O,I),O}function ve(ee){var V=ee.length,O=[1732584193,-271733879,-1732584194,271733878],P,z,I,je,fe,ft;for(P=64;P<=V;P+=64)_(O,ie(ee.subarray(P-64,P)));for(ee=P-64<V?ee.subarray(P-64):new Uint8Array(0),z=ee.length,I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P=0;P<z;P+=1)I[P>>2]|=ee[P]<<(P%4<<3);if(I[P>>2]|=128<<(P%4<<3),P>55)for(_(O,I),P=0;P<16;P+=1)I[P]=0;return je=V*8,je=je.toString(16).match(/(.*?)(.{0,8})$/),fe=parseInt(je[2],16),ft=parseInt(je[1],16)||0,I[14]=fe,I[15]=ft,_(O,I),O}function Ae(ee){var V="",O;for(O=0;O<4;O+=1)V+=F[ee>>O*8+4&15]+F[ee>>O*8&15];return V}function De(ee){var V;for(V=0;V<ee.length;V+=1)ee[V]=Ae(ee[V]);return ee.join("")}De(le("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function ee(V,O){return V=V|0||0,V<0?Math.max(V+O,0):Math.min(V,O)}ArrayBuffer.prototype.slice=function(V,O){var P=this.byteLength,z=ee(V,P),I=P,je,fe,ft,Dt;return O!==T&&(I=ee(O,P)),z>I?new ArrayBuffer(0):(je=I-z,fe=new ArrayBuffer(je),ft=new Uint8Array(fe),Dt=new Uint8Array(this,z,je),ft.set(Dt),fe)}}();function qe(ee){return/[\u0080-\uFFFF]/.test(ee)&&(ee=unescape(encodeURIComponent(ee))),ee}function _e(ee,V){var O=ee.length,P=new ArrayBuffer(O),z=new Uint8Array(P),I;for(I=0;I<O;I+=1)z[I]=ee.charCodeAt(I);return V?z:P}function Qe(ee){return String.fromCharCode.apply(null,new Uint8Array(ee))}function Ge(ee,V,O){var P=new Uint8Array(ee.byteLength+V.byteLength);return P.set(new Uint8Array(ee)),P.set(new Uint8Array(V),ee.byteLength),O?P:P.buffer}function G(ee){var V=[],O=ee.length,P;for(P=0;P<O-1;P+=2)V.push(parseInt(ee.substr(P,2),16));return String.fromCharCode.apply(String,V)}function Te(){this.reset()}return Te.prototype.append=function(ee){return this.appendBinary(qe(ee)),this},Te.prototype.appendBinary=function(ee){this._buff+=ee,this._length+=ee.length;var V=this._buff.length,O;for(O=64;O<=V;O+=64)_(this._hash,J(this._buff.substring(O-64,O)));return this._buff=this._buff.substring(O-64),this},Te.prototype.end=function(ee){var V=this._buff,O=V.length,P,z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I;for(P=0;P<O;P+=1)z[P>>2]|=V.charCodeAt(P)<<(P%4<<3);return this._finish(z,O),I=De(this._hash),ee&&(I=G(I)),this.reset(),I},Te.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},Te.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},Te.prototype.setState=function(ee){return this._buff=ee.buff,this._length=ee.length,this._hash=ee.hash,this},Te.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},Te.prototype._finish=function(ee,V){var O=V,P,z,I;if(ee[O>>2]|=128<<(O%4<<3),O>55)for(_(this._hash,ee),O=0;O<16;O+=1)ee[O]=0;P=this._length*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),z=parseInt(P[2],16),I=parseInt(P[1],16)||0,ee[14]=z,ee[15]=I,_(this._hash,ee)},Te.hash=function(ee,V){return Te.hashBinary(qe(ee),V)},Te.hashBinary=function(ee,V){var O=le(ee),P=De(O);return V?G(P):P},Te.ArrayBuffer=function(){this.reset()},Te.ArrayBuffer.prototype.append=function(ee){var V=Ge(this._buff.buffer,ee,!0),O=V.length,P;for(this._length+=ee.byteLength,P=64;P<=O;P+=64)_(this._hash,ie(V.subarray(P-64,P)));return this._buff=P-64<O?new Uint8Array(V.buffer.slice(P-64)):new Uint8Array(0),this},Te.ArrayBuffer.prototype.end=function(ee){var V=this._buff,O=V.length,P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],z,I;for(z=0;z<O;z+=1)P[z>>2]|=V[z]<<(z%4<<3);return this._finish(P,O),I=De(this._hash),ee&&(I=G(I)),this.reset(),I},Te.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},Te.ArrayBuffer.prototype.getState=function(){var ee=Te.prototype.getState.call(this);return ee.buff=Qe(ee.buff),ee},Te.ArrayBuffer.prototype.setState=function(ee){return ee.buff=_e(ee.buff,!0),Te.prototype.setState.call(this,ee)},Te.ArrayBuffer.prototype.destroy=Te.prototype.destroy,Te.ArrayBuffer.prototype._finish=Te.prototype._finish,Te.ArrayBuffer.hash=function(ee,V){var O=ve(new Uint8Array(ee)),P=De(O);return V?G(P):P},Te})})(s);var e=s.exports;let t=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice;class i{static create(H,T){new i(H).create(T)}constructor(H){this.file=H,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}create(H){this.callback=H,this.md5Buffer=new e.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",T=>this.fileReaderDidLoad(T)),this.fileReader.addEventListener("error",T=>this.fileReaderDidError(T)),this.readNextChunk()}fileReaderDidLoad(H){if(this.md5Buffer.append(H.target.result),!this.readNextChunk()){let T=this.md5Buffer.end(!0),F=btoa(T);this.callback(null,F)}}fileReaderDidError(H){this.callback(`Error reading ${this.file.name}`)}readNextChunk(){if(this.chunkIndex<this.chunkCount||this.chunkIndex==0&&this.chunkCount==0){let H=this.chunkIndex*this.chunkSize,T=Math.min(H+this.chunkSize,this.file.size),F=t.call(this.file,H,T);return this.fileReader.readAsArrayBuffer(F),this.chunkIndex++,!0}else return!1}}function n(Q){let H=o(document.head,`meta[name="${Q}"]`);if(H)return H.getAttribute("content")}function r(Q,H){typeof Q=="string"&&(H=Q,Q=document);let T=Q.querySelectorAll(H);return l(T)}function o(Q,H){return typeof Q=="string"&&(H=Q,Q=document),Q.querySelector(H)}function a(Q,H,T={}){let{disabled:F}=Q,{bubbles:_,cancelable:J,detail:ie}=T,le=document.createEvent("Event");le.initEvent(H,_||!0,J||!0),le.detail=ie||{};try{Q.disabled=!1,Q.dispatchEvent(le)}finally{Q.disabled=F}return le}function l(Q){return Array.isArray(Q)?Q:Array.from?Array.from(Q):[].slice.call(Q)}class c{constructor(H,T,F,_={}){this.file=H,this.attributes={filename:H.name,content_type:H.type||"application/octet-stream",byte_size:H.size,checksum:T},this.xhr=new XMLHttpRequest,this.xhr.open("POST",F,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(_).forEach(ie=>{this.xhr.setRequestHeader(ie,_[ie])});let J=n("csrf-token");J!=null&&this.xhr.setRequestHeader("X-CSRF-Token",J),this.xhr.addEventListener("load",ie=>this.requestDidLoad(ie)),this.xhr.addEventListener("error",ie=>this.requestDidError(ie))}get status(){return this.xhr.status}get response(){let{responseType:H,response:T}=this.xhr;return H=="json"?T:JSON.parse(T)}create(H){this.callback=H,this.xhr.send(JSON.stringify({blob:this.attributes}))}requestDidLoad(H){if(this.status>=200&&this.status<300){let{response:T}=this,{direct_upload:F}=T;delete T.direct_upload,this.attributes=T,this.directUploadData=F,this.callback(null,this.toJSON())}else this.requestDidError(H)}requestDidError(H){this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`)}toJSON(){let H={};for(let T in this.attributes)H[T]=this.attributes[T];return H}}class u{constructor(H){this.blob=H,this.file=H.file;let{url:T,headers:F}=H.directUploadData;this.xhr=new XMLHttpRequest,this.xhr.open("PUT",T,!0),this.xhr.responseType="text";for(let _ in F)this.xhr.setRequestHeader(_,F[_]);this.xhr.addEventListener("load",_=>this.requestDidLoad(_)),this.xhr.addEventListener("error",_=>this.requestDidError(_))}create(H){this.callback=H,this.xhr.send(this.file.slice())}requestDidLoad(H){let{status:T,response:F}=this.xhr;T>=200&&T<300?this.callback(null,F):this.requestDidError(H)}requestDidError(H){this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`)}}let h=0;class f{constructor(H,T,F,_={}){this.id=++h,this.file=H,this.url=T,this.delegate=F,this.customHeaders=_}create(H){i.create(this.file,(T,F)=>{if(T){H(T);return}let _=new c(this.file,F,this.url,this.customHeaders);p(this.delegate,"directUploadWillCreateBlobWithXHR",_.xhr),_.create(J=>{if(J)H(J);else{let ie=new u(_);p(this.delegate,"directUploadWillStoreFileWithXHR",ie.xhr),ie.create(le=>{le?H(le):H(null,_.toJSON())})}})})}}function p(Q,H,...T){if(Q&&typeof Q[H]=="function")return Q[H](...T)}class v{constructor(H,T){this.input=H,this.file=T,this.directUpload=new f(this.file,this.url,this),this.dispatch("initialize")}start(H){let T=document.createElement("input");T.type="hidden",T.name=this.input.name,this.input.insertAdjacentElement("beforebegin",T),this.dispatch("start"),this.directUpload.create((F,_)=>{F?(T.parentNode.removeChild(T),this.dispatchError(F)):T.value=_.signed_id,this.dispatch("end"),H(F)})}uploadRequestDidProgress(H){let T=H.loaded/H.total*100;T&&this.dispatch("progress",{progress:T})}get url(){return this.input.getAttribute("data-direct-upload-url")}dispatch(H,T={}){return T.file=this.file,T.id=this.directUpload.id,a(this.input,`direct-upload:${H}`,{detail:T})}dispatchError(H){this.dispatch("error",{error:H}).defaultPrevented||alert(H)}directUploadWillCreateBlobWithXHR(H){this.dispatch("before-blob-request",{xhr:H})}directUploadWillStoreFileWithXHR(H){this.dispatch("before-storage-request",{xhr:H}),H.upload.addEventListener("progress",T=>this.uploadRequestDidProgress(T))}}let w="input[type=file][data-direct-upload-url]:not([disabled])";class S{constructor(H){this.form=H,this.inputs=r(H,w).filter(T=>T.files.length)}start(H){let T=this.createDirectUploadControllers(),F=()=>{let _=T.shift();_?_.start(J=>{J?(H(J),this.dispatch("end")):F()}):(H(),this.dispatch("end"))};this.dispatch("start"),F()}createDirectUploadControllers(){let H=[];return this.inputs.forEach(T=>{l(T.files).forEach(F=>{let _=new v(T,F);H.push(_)})}),H}dispatch(H,T={}){return a(this.form,`direct-uploads:${H}`,{detail:T})}}let A="data-direct-uploads-processing",k=new WeakMap,D=!1;function R(){D||(D=!0,document.addEventListener("click",$,!0),document.addEventListener("submit",U,!0),document.addEventListener("ajax:before",Z))}function $(Q){let H=Q.target.closest("button, input");H&&H.type==="submit"&&H.form&&k.set(H.form,H)}function U(Q){K(Q)}function Z(Q){Q.target.tagName=="FORM"&&K(Q)}function K(Q){let H=Q.target;if(H.hasAttribute(A)){Q.preventDefault();return}let T=new S(H),{inputs:F}=T;F.length&&(Q.preventDefault(),H.setAttribute(A,""),F.forEach(X),T.start(_=>{H.removeAttribute(A),_?F.forEach(oe):ue(H)}))}function ue(Q){let H=k.get(Q)||o(Q,"input[type=submit], button[type=submit]");if(H){let{disabled:T}=H;H.disabled=!1,H.focus(),H.click(),H.disabled=T}else H=document.createElement("input"),H.type="submit",H.style.display="none",Q.appendChild(H),H.click(),Q.removeChild(H);k.delete(Q)}function X(Q){Q.disabled=!0}function oe(Q){Q.disabled=!1}function he(){window.ActiveStorage&&R()}setTimeout(he,1);class se{constructor(H,T){this.attachment=H,this.element=T,this.directUpload=new f(H.file,this.directUploadUrl,this)}start(){this.directUpload.create(this.directUploadDidComplete.bind(this))}directUploadWillStoreFileWithXHR(H){H.upload.addEventListener("progress",T=>{let F=T.loaded/T.total*100;this.attachment.setUploadProgress(F)})}directUploadDidComplete(H,T){if(H)throw new Error(`Direct upload failed: ${H}`);this.attachment.setAttributes({sgid:T.attachable_sgid,url:this.createBlobUrl(T.signed_id,T.filename)})}createBlobUrl(H,T){return this.blobUrlTemplate.replace(":signed_id",H).replace(":filename",encodeURIComponent(T))}get directUploadUrl(){return this.element.dataset.directUploadUrl}get blobUrlTemplate(){return this.element.dataset.blobUrlTemplate}}addEventListener("trix-attachment-add",Q=>{let{attachment:H,target:T}=Q;H.file&&new se(H,T).start()})});})();
/*! Bundled license information:

bootstrap/dist/js/bootstrap.js:
  (*!
    * Bootstrap v5.3.3 (https://getbootstrap.com/)
    * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
    *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

cropperjs/dist/cropper.js:
  (*!
   * Cropper.js v1.6.2
   * https://fengyuanchen.github.io/cropperjs
   *
   * Copyright 2015-present Chen Fengyuan
   * Released under the MIT license
   *
   * Date: 2024-04-21T07:43:05.335Z
   *)

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.12
  Copyright  2024 37signals LLC
   *)

@uppy/utils/lib/Translator.js:
  (**
   * Takes a string with placeholder variables like `%{smart_count} file selected`
   * and replaces it with values from options `{smart_count: 5}`
   *
   * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
   * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
   *
   * @param phrase that needs interpolation, with placeholders
   * @param options with values that will be used to replace placeholders
   *)
*/
//# sourceMappingURL=/assets/application.js.map
