(()=>{var JT=Object.create;var mh=Object.defineProperty;var ZT=Object.getOwnPropertyDescriptor;var QT=Object.getOwnPropertyNames;var ex=Object.getPrototypeOf,tx=Object.prototype.hasOwnProperty;var qi=(s,e)=>()=>(s&&(e=s(s=0)),e);var je=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),Wv=(s,e)=>{for(var t in e)mh(s,t,{get:e[t],enumerable:!0})},ix=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of QT(e))!tx.call(s,n)&&n!==t&&mh(s,n,{get:()=>e[n],enumerable:!(i=ZT(e,n))||i.enumerable});return s};var Ue=(s,e,t)=>(t=s!=null?JT(ex(s)):{},ix(e||!s||!s.__esModule?mh(t,"default",{value:s,enumerable:!0}):t,s));var Xs,fc=qi(()=>{Xs={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0}});var Fe,Vr=qi(()=>{fc();Fe={log(...s){this.enabled&&(s.push(Date.now()),Xs.logger.log("[ActionCable]",...s))}}});var Yo,mc,Xo,gc,Xh=qi(()=>{Vr();Yo=()=>new Date().getTime(),mc=s=>(Yo()-s)/1e3,Xo=class{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=Yo(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),Fe.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=Yo(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),Fe.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=Yo()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,Fe.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=Yo(),Fe.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:e,reconnectionBackoffRate:t}=this.constructor,i=Math.pow(1+t,Math.min(this.reconnectAttempts,10)),r=(this.reconnectAttempts===0?1:t)*Math.random();return e*1e3*i*(1+r)}reconnectIfStale(){this.connectionIsStale()&&(Fe.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${mc(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?Fe.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${mc(this.disconnectedAt)} s`):(Fe.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return mc(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&mc(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(Fe.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};Xo.staleThreshold=6;Xo.reconnectionBackoffRate=.15;gc=Xo});var Ko,Kh=qi(()=>{Ko={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]}});var Jo,Jh,pC,Eb,Zo,vc,Zh=qi(()=>{fc();Xh();Kh();Vr();({message_types:Jo,protocols:Jh}=Ko),pC=Jh.slice(0,Jh.length-1),Eb=[].indexOf,Zo=class{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new gc(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){if(this.isActive())return Fe.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let e=[...Jh,...this.consumer.subprotocols||[]];return Fe.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${e}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new Xs.WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(Fe.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){Fe.log("Failed to reopen WebSocket",e)}finally{Fe.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return Eb.call(pC,this.getProtocol())>=0}isState(...e){return Eb.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in Xs.WebSocket)if(Xs.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){let t=this.events[e].bind(this);this.webSocket[`on${e}`]=t}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}};Zo.reopenDelay=500;Zo.prototype.events={message(s){if(!this.isProtocolSupported())return;let{identifier:e,message:t,reason:i,reconnect:n,type:r}=JSON.parse(s.data);switch(r){case Jo.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case Jo.disconnect:return Fe.log(`Disconnecting. Reason: ${i}`),this.close({allowReconnect:n});case Jo.ping:return this.monitor.recordPing();case Jo.confirmation:return this.subscriptions.confirmSubscription(e),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(e,"connected",{reconnected:!0})):this.subscriptions.notify(e,"connected",{reconnected:!1});case Jo.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",t)}},open(){if(Fe.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return Fe.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(s){if(Fe.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){Fe.log("WebSocket onerror event")}};vc=Zo});var fC,Cn,Qh=qi(()=>{fC=function(s,e){if(e!=null)for(let t in e){let i=e[t];s[t]=i}return s},Cn=class{constructor(e,t={},i){this.consumer=e,this.identifier=JSON.stringify(t),fC(this,i)}perform(e,t={}){return t.action=e,this.send(t)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}});var ep,bc,tp=qi(()=>{Vr();ep=class{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(Fe.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):Fe.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){Fe.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(t=>t!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{Fe.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}},bc=ep});var Pn,ip=qi(()=>{Qh();tp();Vr();Pn=class{constructor(e){this.consumer=e,this.guarantor=new bc(this),this.subscriptions=[]}create(e,t){let i=e,n=typeof i=="object"?i:{channel:i},r=new Cn(this.consumer,n,t);return this.add(r)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(t=>(this.forget(t),this.notify(t,"rejected"),t))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(t=>t!==e),e}findAll(e){return this.subscriptions.filter(t=>t.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...t){return this.subscriptions.map(i=>this.notify(i,e,...t))}notify(e,t,...i){let n;return typeof e=="string"?n=this.findAll(e):n=[e],n.map(r=>typeof r[t]=="function"?r[t](...i):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){Fe.log(`Subscription confirmed ${e}`),this.findAll(e).map(t=>this.guarantor.forget(t))}sendCommand(e,t){let{identifier:i}=e;return this.consumer.send({command:t,identifier:i})}}});function sp(s){if(typeof s=="function"&&(s=s()),s&&!/^wss?:/i.test(s)){let e=document.createElement("a");return e.href=s,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return s}var qr,Sb=qi(()=>{Zh();ip();qr=class{constructor(e){this._url=e,this.subscriptions=new Pn(this),this.connection=new vc(this),this.subprotocols=[]}get url(){return sp(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(e){this.subprotocols=[...this.subprotocols,e]}}});var Tb={};Wv(Tb,{Connection:()=>vc,ConnectionMonitor:()=>gc,Consumer:()=>qr,INTERNAL:()=>Ko,Subscription:()=>Cn,SubscriptionGuarantor:()=>bc,Subscriptions:()=>Pn,adapters:()=>Xs,createConsumer:()=>mC,createWebSocketURL:()=>sp,getConfig:()=>Ab,logger:()=>Fe});function mC(s=Ab("url")||Ko.default_mount_path){return new qr(s)}function Ab(s){let e=document.head.querySelector(`meta[name='action-cable-${s}']`);if(e)return e.getAttribute("content")}var xb=qi(()=>{Zh();Xh();Sb();Kh();Qh();ip();tp();fc();Vr()});var py=je(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});function ti(s){if(s==null)return window;if(s.toString()!=="[object Window]"){var e=s.ownerDocument;return e&&e.defaultView||window}return s}function On(s){var e=ti(s).Element;return s instanceof e||s instanceof Element}function bi(s){var e=ti(s).HTMLElement;return s instanceof e||s instanceof HTMLElement}function Lp(s){if(typeof ShadowRoot>"u")return!1;var e=ti(s).ShadowRoot;return s instanceof e||s instanceof ShadowRoot}var _n=Math.max,_c=Math.min,Wr=Math.round;function Op(){var s=navigator.userAgentData;return s!=null&&s.brands&&Array.isArray(s.brands)?s.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Zb(){return!/^((?!chrome|android).)*safari/i.test(Op())}function Gr(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=s.getBoundingClientRect(),n=1,r=1;e&&bi(s)&&(n=s.offsetWidth>0&&Wr(i.width)/s.offsetWidth||1,r=s.offsetHeight>0&&Wr(i.height)/s.offsetHeight||1);var o=On(s)?ti(s):window,a=o.visualViewport,l=!Zb()&&t,c=(i.left+(l&&a?a.offsetLeft:0))/n,u=(i.top+(l&&a?a.offsetTop:0))/r,h=i.width/n,f=i.height/r;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c,x:c,y:u}}function kp(s){var e=ti(s),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function dP(s){return{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}}function hP(s){return s===ti(s)||!bi(s)?kp(s):dP(s)}function Gi(s){return s?(s.nodeName||"").toLowerCase():null}function Ks(s){return((On(s)?s.ownerDocument:s.document)||window.document).documentElement}function Dp(s){return Gr(Ks(s)).left+kp(s).scrollLeft}function hs(s){return ti(s).getComputedStyle(s)}function Ip(s){var e=hs(s),t=e.overflow,i=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+n+i)}function pP(s){var e=s.getBoundingClientRect(),t=Wr(e.width)/s.offsetWidth||1,i=Wr(e.height)/s.offsetHeight||1;return t!==1||i!==1}function fP(s,e,t){t===void 0&&(t=!1);var i=bi(e),n=bi(e)&&pP(e),r=Ks(e),o=Gr(s,n,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((Gi(e)!=="body"||Ip(r))&&(a=hP(e)),bi(e)?(l=Gr(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=Dp(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Fp(s){var e=Gr(s),t=s.offsetWidth,i=s.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:s.offsetLeft,y:s.offsetTop,width:t,height:i}}function Oc(s){return Gi(s)==="html"?s:s.assignedSlot||s.parentNode||(Lp(s)?s.host:null)||Ks(s)}function Qb(s){return["html","body","#document"].indexOf(Gi(s))>=0?s.ownerDocument.body:bi(s)&&Ip(s)?s:Qb(Oc(s))}function na(s,e){var t;e===void 0&&(e=[]);var i=Qb(s),n=i===((t=s.ownerDocument)==null?void 0:t.body),r=ti(i),o=n?[r].concat(r.visualViewport||[],Ip(i)?i:[]):i,a=e.concat(o);return n?a:a.concat(na(Oc(o)))}function mP(s){return["table","td","th"].indexOf(Gi(s))>=0}function jb(s){return!bi(s)||hs(s).position==="fixed"?null:s.offsetParent}function gP(s){var e=/firefox/i.test(Op()),t=/Trident/i.test(Op());if(t&&bi(s)){var i=hs(s);if(i.position==="fixed")return null}var n=Oc(s);for(Lp(n)&&(n=n.host);bi(n)&&["html","body"].indexOf(Gi(n))<0;){var r=hs(n);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return n;n=n.parentNode}return null}function aa(s){for(var e=ti(s),t=jb(s);t&&mP(t)&&hs(t).position==="static";)t=jb(t);return t&&(Gi(t)==="html"||Gi(t)==="body"&&hs(t).position==="static")?e:t||gP(s)||e}var Ut="top",yi="bottom",wi="right",jt="left",Rp="auto",la=[Ut,yi,wi,jt],Yr="start",oa="end",vP="clippingParents",ey="viewport",sa="popper",bP="reference",Vb=la.reduce(function(s,e){return s.concat([e+"-"+Yr,e+"-"+oa])},[]),ty=[].concat(la,[Rp]).reduce(function(s,e){return s.concat([e,e+"-"+Yr,e+"-"+oa])},[]),yP="beforeRead",wP="read",EP="afterRead",SP="beforeMain",AP="main",TP="afterMain",xP="beforeWrite",CP="write",PP="afterWrite",_P=[yP,wP,EP,SP,AP,TP,xP,CP,PP];function OP(s){var e=new Map,t=new Set,i=[];s.forEach(function(r){e.set(r.name,r)});function n(r){t.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&n(l)}}),i.push(r)}return s.forEach(function(r){t.has(r.name)||n(r)}),i}function MP(s){var e=OP(s);return _P.reduce(function(t,i){return t.concat(e.filter(function(n){return n.phase===i}))},[])}function LP(s){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(s())})})),e}}function kP(s){var e=s.reduce(function(t,i){var n=t[i.name];return t[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}function DP(s,e){var t=ti(s),i=Ks(s),n=t.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(n){r=n.width,o=n.height;var c=Zb();(c||!c&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:r,height:o,x:a+Dp(s),y:l}}function IP(s){var e,t=Ks(s),i=kp(s),n=(e=s.ownerDocument)==null?void 0:e.body,r=_n(t.scrollWidth,t.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=_n(t.scrollHeight,t.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-i.scrollLeft+Dp(s),l=-i.scrollTop;return hs(n||t).direction==="rtl"&&(a+=_n(t.clientWidth,n?n.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function iy(s,e){var t=e.getRootNode&&e.getRootNode();if(s.contains(e))return!0;if(t&&Lp(t)){var i=e;do{if(i&&s.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Mp(s){return Object.assign({},s,{left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height})}function FP(s,e){var t=Gr(s,!1,e==="fixed");return t.top=t.top+s.clientTop,t.left=t.left+s.clientLeft,t.bottom=t.top+s.clientHeight,t.right=t.left+s.clientWidth,t.width=s.clientWidth,t.height=s.clientHeight,t.x=t.left,t.y=t.top,t}function qb(s,e,t){return e===ey?Mp(DP(s,t)):On(e)?FP(e,t):Mp(IP(Ks(s)))}function RP(s){var e=na(Oc(s)),t=["absolute","fixed"].indexOf(hs(s).position)>=0,i=t&&bi(s)?aa(s):s;return On(i)?e.filter(function(n){return On(n)&&iy(n,i)&&Gi(n)!=="body"}):[]}function NP(s,e,t,i){var n=e==="clippingParents"?RP(s):[].concat(e),r=[].concat(n,[t]),o=r[0],a=r.reduce(function(l,c){var u=qb(s,c,i);return l.top=_n(u.top,l.top),l.right=_c(u.right,l.right),l.bottom=_c(u.bottom,l.bottom),l.left=_n(u.left,l.left),l},qb(s,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Wi(s){return s.split("-")[0]}function Xr(s){return s.split("-")[1]}function Np(s){return["top","bottom"].indexOf(s)>=0?"x":"y"}function sy(s){var e=s.reference,t=s.element,i=s.placement,n=i?Wi(i):null,r=i?Xr(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(n){case Ut:l={x:o,y:e.y-t.height};break;case yi:l={x:o,y:e.y+e.height};break;case wi:l={x:e.x+e.width,y:a};break;case jt:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=n?Np(n):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case Yr:l[c]=l[c]-(e[u]/2-t[u]/2);break;case oa:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function ny(){return{top:0,right:0,bottom:0,left:0}}function ry(s){return Object.assign({},ny(),s)}function oy(s,e){return e.reduce(function(t,i){return t[i]=s,t},{})}function Kr(s,e){e===void 0&&(e={});var t=e,i=t.placement,n=i===void 0?s.placement:i,r=t.strategy,o=r===void 0?s.strategy:r,a=t.boundary,l=a===void 0?vP:a,c=t.rootBoundary,u=c===void 0?ey:c,h=t.elementContext,f=h===void 0?sa:h,p=t.altBoundary,g=p===void 0?!1:p,y=t.padding,A=y===void 0?0:y,S=ry(typeof A!="number"?A:oy(A,la)),O=f===sa?bP:sa,I=s.rects.popper,F=s.elements[g?O:f],H=NP(On(F)?F:F.contextElement||Ks(s.elements.popper),l,u,o),U=Gr(s.elements.reference),W=sy({reference:U,element:I,strategy:"absolute",placement:n}),J=Mp(Object.assign({},I,W)),oe=f===sa?J:U,G={top:H.top-oe.top+S.top,bottom:oe.bottom-H.bottom+S.bottom,left:H.left-oe.left+S.left,right:oe.right-H.right+S.right},ae=s.modifiersData.offset;if(f===sa&&ae){var pe=ae[n];Object.keys(G).forEach(function(ue){var te=[wi,yi].indexOf(ue)>=0?1:-1,$=[Ut,yi].indexOf(ue)>=0?"y":"x";G[ue]+=pe[$]*te})}return G}var Wb={placement:"bottom",modifiers:[],strategy:"absolute"};function Gb(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Bp(s){s===void 0&&(s={});var e=s,t=e.defaultModifiers,i=t===void 0?[]:t,n=e.defaultOptions,r=n===void 0?Wb:n;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Wb,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],f=!1,p={state:u,setOptions:function(S){var O=typeof S=="function"?S(u.options):S;y(),u.options=Object.assign({},r,u.options,O),u.scrollParents={reference:On(a)?na(a):a.contextElement?na(a.contextElement):[],popper:na(l)};var I=MP(kP([].concat(i,u.options.modifiers)));return u.orderedModifiers=I.filter(function(F){return F.enabled}),g(),p.update()},forceUpdate:function(){if(!f){var S=u.elements,O=S.reference,I=S.popper;if(Gb(O,I)){u.rects={reference:fP(O,aa(I),u.options.strategy==="fixed"),popper:Fp(I)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(G){return u.modifiersData[G.name]=Object.assign({},G.data)});for(var F=0;F<u.orderedModifiers.length;F++){if(u.reset===!0){u.reset=!1,F=-1;continue}var H=u.orderedModifiers[F],U=H.fn,W=H.options,J=W===void 0?{}:W,oe=H.name;typeof U=="function"&&(u=U({state:u,options:J,name:oe,instance:p})||u)}}}},update:LP(function(){return new Promise(function(A){p.forceUpdate(),A(u)})}),destroy:function(){y(),f=!0}};if(!Gb(a,l))return p;p.setOptions(c).then(function(A){!f&&c.onFirstUpdate&&c.onFirstUpdate(A)});function g(){u.orderedModifiers.forEach(function(A){var S=A.name,O=A.options,I=O===void 0?{}:O,F=A.effect;if(typeof F=="function"){var H=F({state:u,name:S,instance:p,options:I}),U=function(){};h.push(H||U)}})}function y(){h.forEach(function(A){return A()}),h=[]}return p}}var Cc={passive:!0};function BP(s){var e=s.state,t=s.instance,i=s.options,n=i.scroll,r=n===void 0?!0:n,o=i.resize,a=o===void 0?!0:o,l=ti(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",t.update,Cc)}),a&&l.addEventListener("resize",t.update,Cc),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",t.update,Cc)}),a&&l.removeEventListener("resize",t.update,Cc)}}var zp={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:BP,data:{}};function zP(s){var e=s.state,t=s.name;e.modifiersData[t]=sy({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var $p={name:"popperOffsets",enabled:!0,phase:"read",fn:zP,data:{}},$P={top:"auto",right:"auto",bottom:"auto",left:"auto"};function HP(s,e){var t=s.x,i=s.y,n=e.devicePixelRatio||1;return{x:Wr(t*n)/n||0,y:Wr(i*n)/n||0}}function Yb(s){var e,t=s.popper,i=s.popperRect,n=s.placement,r=s.variation,o=s.offsets,a=s.position,l=s.gpuAcceleration,c=s.adaptive,u=s.roundOffsets,h=s.isFixed,f=o.x,p=f===void 0?0:f,g=o.y,y=g===void 0?0:g,A=typeof u=="function"?u({x:p,y}):{x:p,y};p=A.x,y=A.y;var S=o.hasOwnProperty("x"),O=o.hasOwnProperty("y"),I=jt,F=Ut,H=window;if(c){var U=aa(t),W="clientHeight",J="clientWidth";if(U===ti(t)&&(U=Ks(t),hs(U).position!=="static"&&a==="absolute"&&(W="scrollHeight",J="scrollWidth")),U=U,n===Ut||(n===jt||n===wi)&&r===oa){F=yi;var oe=h&&U===H&&H.visualViewport?H.visualViewport.height:U[W];y-=oe-i.height,y*=l?1:-1}if(n===jt||(n===Ut||n===yi)&&r===oa){I=wi;var G=h&&U===H&&H.visualViewport?H.visualViewport.width:U[J];p-=G-i.width,p*=l?1:-1}}var ae=Object.assign({position:a},c&&$P),pe=u===!0?HP({x:p,y},ti(t)):{x:p,y};if(p=pe.x,y=pe.y,l){var ue;return Object.assign({},ae,(ue={},ue[F]=O?"0":"",ue[I]=S?"0":"",ue.transform=(H.devicePixelRatio||1)<=1?"translate("+p+"px, "+y+"px)":"translate3d("+p+"px, "+y+"px, 0)",ue))}return Object.assign({},ae,(e={},e[F]=O?y+"px":"",e[I]=S?p+"px":"",e.transform="",e))}function UP(s){var e=s.state,t=s.options,i=t.gpuAcceleration,n=i===void 0?!0:i,r=t.adaptive,o=r===void 0?!0:r,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:Wi(e.placement),variation:Xr(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Yb(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Yb(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Hp={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:UP,data:{}};function jP(s){var e=s.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},r=e.elements[t];!bi(r)||!Gi(r)||(Object.assign(r.style,i),Object.keys(n).forEach(function(o){var a=n[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function VP(s){var e=s.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var n=e.elements[i],r=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!bi(n)||!Gi(n)||(Object.assign(n.style,a),Object.keys(r).forEach(function(l){n.removeAttribute(l)}))})}}var Up={name:"applyStyles",enabled:!0,phase:"write",fn:jP,effect:VP,requires:["computeStyles"]};function qP(s,e,t){var i=Wi(s),n=[jt,Ut].indexOf(i)>=0?-1:1,r=typeof t=="function"?t(Object.assign({},e,{placement:s})):t,o=r[0],a=r[1];return o=o||0,a=(a||0)*n,[jt,wi].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function WP(s){var e=s.state,t=s.options,i=s.name,n=t.offset,r=n===void 0?[0,0]:n,o=ty.reduce(function(u,h){return u[h]=qP(h,e.rects,r),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}var ay={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:WP},GP={left:"right",right:"left",bottom:"top",top:"bottom"};function Pc(s){return s.replace(/left|right|bottom|top/g,function(e){return GP[e]})}var YP={start:"end",end:"start"};function Xb(s){return s.replace(/start|end/g,function(e){return YP[e]})}function XP(s,e){e===void 0&&(e={});var t=e,i=t.placement,n=t.boundary,r=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?ty:l,u=Xr(i),h=u?a?Vb:Vb.filter(function(g){return Xr(g)===u}):la,f=h.filter(function(g){return c.indexOf(g)>=0});f.length===0&&(f=h);var p=f.reduce(function(g,y){return g[y]=Kr(s,{placement:y,boundary:n,rootBoundary:r,padding:o})[Wi(y)],g},{});return Object.keys(p).sort(function(g,y){return p[g]-p[y]})}function KP(s){if(Wi(s)===Rp)return[];var e=Pc(s);return[Xb(s),e,Xb(e)]}function JP(s){var e=s.state,t=s.options,i=s.name;if(!e.modifiersData[i]._skip){for(var n=t.mainAxis,r=n===void 0?!0:n,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,h=t.rootBoundary,f=t.altBoundary,p=t.flipVariations,g=p===void 0?!0:p,y=t.allowedAutoPlacements,A=e.options.placement,S=Wi(A),O=S===A,I=l||(O||!g?[Pc(A)]:KP(A)),F=[A].concat(I).reduce(function(Ne,Ke){return Ne.concat(Wi(Ke)===Rp?XP(e,{placement:Ke,boundary:u,rootBoundary:h,padding:c,flipVariations:g,allowedAutoPlacements:y}):Ke)},[]),H=e.rects.reference,U=e.rects.popper,W=new Map,J=!0,oe=F[0],G=0;G<F.length;G++){var ae=F[G],pe=Wi(ae),ue=Xr(ae)===Yr,te=[Ut,yi].indexOf(pe)>=0,$=te?"width":"height",T=Kr(e,{placement:ae,boundary:u,rootBoundary:h,altBoundary:f,padding:c}),D=te?ue?wi:jt:ue?yi:Ut;H[$]>U[$]&&(D=Pc(D));var k=Pc(D),K=[];if(r&&K.push(T[pe]<=0),a&&K.push(T[D]<=0,T[k]<=0),K.every(function(Ne){return Ne})){oe=ae,J=!1;break}W.set(ae,K)}if(J)for(var Z=g?3:1,re=function(Ke){var Se=F.find(function(Be){var Je=W.get(Be);if(Je)return Je.slice(0,Ke).every(function(X){return X})});if(Se)return oe=Se,"break"},ve=Z;ve>0;ve--){var _e=re(ve);if(_e==="break")break}e.placement!==oe&&(e.modifiersData[i]._skip=!0,e.placement=oe,e.reset=!0)}}var ly={name:"flip",enabled:!0,phase:"main",fn:JP,requiresIfExists:["offset"],data:{_skip:!1}};function ZP(s){return s==="x"?"y":"x"}function ra(s,e,t){return _n(s,_c(e,t))}function QP(s,e,t){var i=ra(s,e,t);return i>t?t:i}function e_(s){var e=s.state,t=s.options,i=s.name,n=t.mainAxis,r=n===void 0?!0:n,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,h=t.padding,f=t.tether,p=f===void 0?!0:f,g=t.tetherOffset,y=g===void 0?0:g,A=Kr(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),S=Wi(e.placement),O=Xr(e.placement),I=!O,F=Np(S),H=ZP(F),U=e.modifiersData.popperOffsets,W=e.rects.reference,J=e.rects.popper,oe=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,G=typeof oe=="number"?{mainAxis:oe,altAxis:oe}:Object.assign({mainAxis:0,altAxis:0},oe),ae=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,pe={x:0,y:0};if(U){if(r){var ue,te=F==="y"?Ut:jt,$=F==="y"?yi:wi,T=F==="y"?"height":"width",D=U[F],k=D+A[te],K=D-A[$],Z=p?-J[T]/2:0,re=O===Yr?W[T]:J[T],ve=O===Yr?-J[T]:-W[T],_e=e.elements.arrow,Ne=p&&_e?Fp(_e):{width:0,height:0},Ke=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:ny(),Se=Ke[te],Be=Ke[$],Je=ra(0,W[T],Ne[T]),X=I?W[T]/2-Z-Je-Se-G.mainAxis:re-Je-Se-G.mainAxis,Pe=I?-W[T]/2+Z+Je+Be+G.mainAxis:ve+Je+Be+G.mainAxis,Q=e.elements.arrow&&aa(e.elements.arrow),j=Q?F==="y"?Q.clientTop||0:Q.clientLeft||0:0,L=(ue=ae?.[F])!=null?ue:0,P=D+X-L-j,z=D+Pe-L,R=ra(p?_c(k,P):k,D,p?_n(K,z):K);U[F]=R,pe[F]=R-D}if(a){var He,fe=F==="x"?Ut:jt,pt=F==="x"?yi:wi,xt=U[H],Ns=H==="y"?"height":"width",un=xt+A[fe],xr=xt-A[pt],dn=[Ut,jt].indexOf(S)!==-1,Cr=(He=ae?.[H])!=null?He:0,hn=dn?un:xt-W[Ns]-J[Ns]-Cr+G.altAxis,zi=dn?xt+W[Ns]+J[Ns]-Cr-G.altAxis:xr,Pr=p&&dn?QP(hn,xt,zi):ra(p?hn:un,xt,p?zi:xr);U[H]=Pr,pe[H]=Pr-xt}e.modifiersData[i]=pe}}var cy={name:"preventOverflow",enabled:!0,phase:"main",fn:e_,requiresIfExists:["offset"]},t_=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,ry(typeof e!="number"?e:oy(e,la))};function i_(s){var e,t=s.state,i=s.name,n=s.options,r=t.elements.arrow,o=t.modifiersData.popperOffsets,a=Wi(t.placement),l=Np(a),c=[jt,wi].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var h=t_(n.padding,t),f=Fp(r),p=l==="y"?Ut:jt,g=l==="y"?yi:wi,y=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],A=o[l]-t.rects.reference[l],S=aa(r),O=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,I=y/2-A/2,F=h[p],H=O-f[u]-h[g],U=O/2-f[u]/2+I,W=ra(F,U,H),J=l;t.modifiersData[i]=(e={},e[J]=W,e.centerOffset=W-U,e)}}function s_(s){var e=s.state,t=s.options,i=t.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||iy(e.elements.popper,n)&&(e.elements.arrow=n))}var uy={name:"arrow",enabled:!0,phase:"main",fn:i_,effect:s_,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Kb(s,e,t){return t===void 0&&(t={x:0,y:0}),{top:s.top-e.height-t.y,right:s.right-e.width+t.x,bottom:s.bottom-e.height+t.y,left:s.left-e.width-t.x}}function Jb(s){return[Ut,wi,yi,jt].some(function(e){return s[e]>=0})}function n_(s){var e=s.state,t=s.name,i=e.rects.reference,n=e.rects.popper,r=e.modifiersData.preventOverflow,o=Kr(e,{elementContext:"reference"}),a=Kr(e,{altBoundary:!0}),l=Kb(o,i),c=Kb(a,n,r),u=Jb(l),h=Jb(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}var dy={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:n_},r_=[zp,$p,Hp,Up],o_=Bp({defaultModifiers:r_}),hy=[zp,$p,Hp,Up,ay,ly,cy,uy,dy],a_=Bp({defaultModifiers:hy});Ct.applyStyles=Up;Ct.arrow=uy;Ct.computeStyles=Hp;Ct.createPopper=a_;Ct.createPopperLite=o_;Ct.defaultModifiers=hy;Ct.detectOverflow=Kr;Ct.eventListeners=zp;Ct.flip=ly;Ct.hide=dy;Ct.offset=ay;Ct.popperGenerator=Bp;Ct.popperOffsets=$p;Ct.preventOverflow=cy});var qp=je((jp,Vp)=>{(function(s,e){typeof jp=="object"&&typeof Vp<"u"?Vp.exports=e(py()):typeof define=="function"&&define.amd?define(["@popperjs/core"],e):(s=typeof globalThis<"u"?globalThis:s||self,s.bootstrap=e(s.Popper))})(jp,function(s){"use strict";function e(C){let d=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(C){for(let b in C)if(b!=="default"){let M=Object.getOwnPropertyDescriptor(C,b);Object.defineProperty(d,b,M.get?M:{enumerable:!0,get:()=>C[b]})}}return d.default=C,Object.freeze(d)}let t=e(s),i=new Map,n={set(C,d,b){i.has(C)||i.set(C,new Map);let M=i.get(C);if(!M.has(d)&&M.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(M.keys())[0]}.`);return}M.set(d,b)},get(C,d){return i.has(C)&&i.get(C).get(d)||null},remove(C,d){if(!i.has(C))return;let b=i.get(C);b.delete(d),b.size===0&&i.delete(C)}},r=1e6,o=1e3,a="transitionend",l=C=>(C&&window.CSS&&window.CSS.escape&&(C=C.replace(/#([^\s"#']+)/g,(d,b)=>`#${CSS.escape(b)}`)),C),c=C=>C==null?`${C}`:Object.prototype.toString.call(C).match(/\s([a-z]+)/i)[1].toLowerCase(),u=C=>{do C+=Math.floor(Math.random()*r);while(document.getElementById(C));return C},h=C=>{if(!C)return 0;let{transitionDuration:d,transitionDelay:b}=window.getComputedStyle(C),M=Number.parseFloat(d),Y=Number.parseFloat(b);return!M&&!Y?0:(d=d.split(",")[0],b=b.split(",")[0],(Number.parseFloat(d)+Number.parseFloat(b))*o)},f=C=>{C.dispatchEvent(new Event(a))},p=C=>!C||typeof C!="object"?!1:(typeof C.jquery<"u"&&(C=C[0]),typeof C.nodeType<"u"),g=C=>p(C)?C.jquery?C[0]:C:typeof C=="string"&&C.length>0?document.querySelector(l(C)):null,y=C=>{if(!p(C)||C.getClientRects().length===0)return!1;let d=getComputedStyle(C).getPropertyValue("visibility")==="visible",b=C.closest("details:not([open])");if(!b)return d;if(b!==C){let M=C.closest("summary");if(M&&M.parentNode!==b||M===null)return!1}return d},A=C=>!C||C.nodeType!==Node.ELEMENT_NODE||C.classList.contains("disabled")?!0:typeof C.disabled<"u"?C.disabled:C.hasAttribute("disabled")&&C.getAttribute("disabled")!=="false",S=C=>{if(!document.documentElement.attachShadow)return null;if(typeof C.getRootNode=="function"){let d=C.getRootNode();return d instanceof ShadowRoot?d:null}return C instanceof ShadowRoot?C:C.parentNode?S(C.parentNode):null},O=()=>{},I=C=>{C.offsetHeight},F=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,H=[],U=C=>{document.readyState==="loading"?(H.length||document.addEventListener("DOMContentLoaded",()=>{for(let d of H)d()}),H.push(C)):C()},W=()=>document.documentElement.dir==="rtl",J=C=>{U(()=>{let d=F();if(d){let b=C.NAME,M=d.fn[b];d.fn[b]=C.jQueryInterface,d.fn[b].Constructor=C,d.fn[b].noConflict=()=>(d.fn[b]=M,C.jQueryInterface)}})},oe=(C,d=[],b=C)=>typeof C=="function"?C(...d):b,G=(C,d,b=!0)=>{if(!b){oe(C);return}let Y=h(d)+5,de=!1,ce=({target:Ee})=>{Ee===d&&(de=!0,d.removeEventListener(a,ce),oe(C))};d.addEventListener(a,ce),setTimeout(()=>{de||f(d)},Y)},ae=(C,d,b,M)=>{let Y=C.length,de=C.indexOf(d);return de===-1?!b&&M?C[Y-1]:C[0]:(de+=b?1:-1,M&&(de=(de+Y)%Y),C[Math.max(0,Math.min(de,Y-1))])},pe=/[^.]*(?=\..*)\.|.*/,ue=/\..*/,te=/::\d+$/,$={},T=1,D={mouseenter:"mouseover",mouseleave:"mouseout"},k=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function K(C,d){return d&&`${d}::${T++}`||C.uidEvent||T++}function Z(C){let d=K(C);return C.uidEvent=d,$[d]=$[d]||{},$[d]}function re(C,d){return function b(M){return Pe(M,{delegateTarget:C}),b.oneOff&&X.off(C,M.type,d),d.apply(C,[M])}}function ve(C,d,b){return function M(Y){let de=C.querySelectorAll(d);for(let{target:ce}=Y;ce&&ce!==this;ce=ce.parentNode)for(let Ee of de)if(Ee===ce)return Pe(Y,{delegateTarget:ce}),M.oneOff&&X.off(C,Y.type,d,b),b.apply(ce,[Y])}}function _e(C,d,b=null){return Object.values(C).find(M=>M.callable===d&&M.delegationSelector===b)}function Ne(C,d,b){let M=typeof d=="string",Y=M?b:d||b,de=Je(C);return k.has(de)||(de=C),[M,Y,de]}function Ke(C,d,b,M,Y){if(typeof d!="string"||!C)return;let[de,ce,Ee]=Ne(d,b,M);d in D&&(ce=(KT=>function(Ir){if(!Ir.relatedTarget||Ir.relatedTarget!==Ir.delegateTarget&&!Ir.delegateTarget.contains(Ir.relatedTarget))return KT.call(this,Ir)})(ce));let Ht=Z(C),gi=Ht[Ee]||(Ht[Ee]={}),ft=_e(gi,ce,de?b:null);if(ft){ft.oneOff=ft.oneOff&&Y;return}let Vi=K(ce,d.replace(pe,"")),Mi=de?ve(C,b,ce):re(C,ce);Mi.delegationSelector=de?b:null,Mi.callable=ce,Mi.oneOff=Y,Mi.uidEvent=Vi,gi[Vi]=Mi,C.addEventListener(Ee,Mi,de)}function Se(C,d,b,M,Y){let de=_e(d[b],M,Y);de&&(C.removeEventListener(b,de,!!Y),delete d[b][de.uidEvent])}function Be(C,d,b,M){let Y=d[b]||{};for(let[de,ce]of Object.entries(Y))de.includes(M)&&Se(C,d,b,ce.callable,ce.delegationSelector)}function Je(C){return C=C.replace(ue,""),D[C]||C}let X={on(C,d,b,M){Ke(C,d,b,M,!1)},one(C,d,b,M){Ke(C,d,b,M,!0)},off(C,d,b,M){if(typeof d!="string"||!C)return;let[Y,de,ce]=Ne(d,b,M),Ee=ce!==d,Ht=Z(C),gi=Ht[ce]||{},ft=d.startsWith(".");if(typeof de<"u"){if(!Object.keys(gi).length)return;Se(C,Ht,ce,de,Y?b:null);return}if(ft)for(let Vi of Object.keys(Ht))Be(C,Ht,Vi,d.slice(1));for(let[Vi,Mi]of Object.entries(gi)){let Zl=Vi.replace(te,"");(!Ee||d.includes(Zl))&&Se(C,Ht,ce,Mi.callable,Mi.delegationSelector)}},trigger(C,d,b){if(typeof d!="string"||!C)return null;let M=F(),Y=Je(d),de=d!==Y,ce=null,Ee=!0,Ht=!0,gi=!1;de&&M&&(ce=M.Event(d,b),M(C).trigger(ce),Ee=!ce.isPropagationStopped(),Ht=!ce.isImmediatePropagationStopped(),gi=ce.isDefaultPrevented());let ft=Pe(new Event(d,{bubbles:Ee,cancelable:!0}),b);return gi&&ft.preventDefault(),Ht&&C.dispatchEvent(ft),ft.defaultPrevented&&ce&&ce.preventDefault(),ft}};function Pe(C,d={}){for(let[b,M]of Object.entries(d))try{C[b]=M}catch{Object.defineProperty(C,b,{configurable:!0,get(){return M}})}return C}function Q(C){if(C==="true")return!0;if(C==="false")return!1;if(C===Number(C).toString())return Number(C);if(C===""||C==="null")return null;if(typeof C!="string")return C;try{return JSON.parse(decodeURIComponent(C))}catch{return C}}function j(C){return C.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`)}let L={setDataAttribute(C,d,b){C.setAttribute(`data-bs-${j(d)}`,b)},removeDataAttribute(C,d){C.removeAttribute(`data-bs-${j(d)}`)},getDataAttributes(C){if(!C)return{};let d={},b=Object.keys(C.dataset).filter(M=>M.startsWith("bs")&&!M.startsWith("bsConfig"));for(let M of b){let Y=M.replace(/^bs/,"");Y=Y.charAt(0).toLowerCase()+Y.slice(1,Y.length),d[Y]=Q(C.dataset[M])}return d},getDataAttribute(C,d){return Q(C.getAttribute(`data-bs-${j(d)}`))}};class P{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(d){return d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d}_mergeConfigObj(d,b){let M=p(b)?L.getDataAttribute(b,"config"):{};return{...this.constructor.Default,...typeof M=="object"?M:{},...p(b)?L.getDataAttributes(b):{},...typeof d=="object"?d:{}}}_typeCheckConfig(d,b=this.constructor.DefaultType){for(let[M,Y]of Object.entries(b)){let de=d[M],ce=p(de)?"element":c(de);if(!new RegExp(Y).test(ce))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${M}" provided type "${ce}" but expected type "${Y}".`)}}}let z="5.3.3";class R extends P{constructor(d,b){super(),d=g(d),d&&(this._element=d,this._config=this._getConfig(b),n.set(this._element,this.constructor.DATA_KEY,this))}dispose(){n.remove(this._element,this.constructor.DATA_KEY),X.off(this._element,this.constructor.EVENT_KEY);for(let d of Object.getOwnPropertyNames(this))this[d]=null}_queueCallback(d,b,M=!0){G(d,b,M)}_getConfig(d){return d=this._mergeConfigObj(d,this._element),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}static getInstance(d){return n.get(g(d),this.DATA_KEY)}static getOrCreateInstance(d,b={}){return this.getInstance(d)||new this(d,typeof b=="object"?b:null)}static get VERSION(){return z}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(d){return`${d}${this.EVENT_KEY}`}}let He=C=>{let d=C.getAttribute("data-bs-target");if(!d||d==="#"){let b=C.getAttribute("href");if(!b||!b.includes("#")&&!b.startsWith("."))return null;b.includes("#")&&!b.startsWith("#")&&(b=`#${b.split("#")[1]}`),d=b&&b!=="#"?b.trim():null}return d?d.split(",").map(b=>l(b)).join(","):null},fe={find(C,d=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(d,C))},findOne(C,d=document.documentElement){return Element.prototype.querySelector.call(d,C)},children(C,d){return[].concat(...C.children).filter(b=>b.matches(d))},parents(C,d){let b=[],M=C.parentNode.closest(d);for(;M;)b.push(M),M=M.parentNode.closest(d);return b},prev(C,d){let b=C.previousElementSibling;for(;b;){if(b.matches(d))return[b];b=b.previousElementSibling}return[]},next(C,d){let b=C.nextElementSibling;for(;b;){if(b.matches(d))return[b];b=b.nextElementSibling}return[]},focusableChildren(C){let d=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(b=>`${b}:not([tabindex^="-"])`).join(",");return this.find(d,C).filter(b=>!A(b)&&y(b))},getSelectorFromElement(C){let d=He(C);return d&&fe.findOne(d)?d:null},getElementFromSelector(C){let d=He(C);return d?fe.findOne(d):null},getMultipleElementsFromSelector(C){let d=He(C);return d?fe.find(d):[]}},pt=(C,d="hide")=>{let b=`click.dismiss${C.EVENT_KEY}`,M=C.NAME;X.on(document,b,`[data-bs-dismiss="${M}"]`,function(Y){if(["A","AREA"].includes(this.tagName)&&Y.preventDefault(),A(this))return;let de=fe.getElementFromSelector(this)||this.closest(`.${M}`);C.getOrCreateInstance(de)[d]()})},xt="alert",un=".bs.alert",xr=`close${un}`,dn=`closed${un}`,Cr="fade",hn="show";class zi extends R{static get NAME(){return xt}close(){if(X.trigger(this._element,xr).defaultPrevented)return;this._element.classList.remove(hn);let b=this._element.classList.contains(Cr);this._queueCallback(()=>this._destroyElement(),this._element,b)}_destroyElement(){this._element.remove(),X.trigger(this._element,dn),this.dispose()}static jQueryInterface(d){return this.each(function(){let b=zi.getOrCreateInstance(this);if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d](this)}})}}pt(zi,"close"),J(zi);let Pr="button",Fl=".bs.button",ko=".data-api",ss="active",Rl='[data-bs-toggle="button"]',Bs=`click${Fl}${ko}`;class ot extends R{static get NAME(){return Pr}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(ss))}static jQueryInterface(d){return this.each(function(){let b=ot.getOrCreateInstance(this);d==="toggle"&&b[d]()})}}X.on(document,Bs,Rl,C=>{C.preventDefault();let d=C.target.closest(Rl);ot.getOrCreateInstance(d).toggle()}),J(ot);let zd="swipe",ns=".bs.swipe",Ze=`touchstart${ns}`,ze=`touchmove${ns}`,$d=`touchend${ns}`,zs=`pointerdown${ns}`,Hd=`pointerup${ns}`,$i="touch",Ud="pen",at="pointer-event",hi=40,$s={endCallback:null,leftCallback:null,rightCallback:null},jd={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Hs extends P{constructor(d,b){super(),this._element=d,!(!d||!Hs.isSupported())&&(this._config=this._getConfig(b),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return $s}static get DefaultType(){return jd}static get NAME(){return zd}dispose(){X.off(this._element,ns)}_start(d){if(!this._supportPointerEvents){this._deltaX=d.touches[0].clientX;return}this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX)}_end(d){this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX-this._deltaX),this._handleSwipe(),oe(this._config.endCallback)}_move(d){this._deltaX=d.touches&&d.touches.length>1?0:d.touches[0].clientX-this._deltaX}_handleSwipe(){let d=Math.abs(this._deltaX);if(d<=hi)return;let b=d/this._deltaX;this._deltaX=0,b&&oe(b>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(X.on(this._element,zs,d=>this._start(d)),X.on(this._element,Hd,d=>this._end(d)),this._element.classList.add(at)):(X.on(this._element,Ze,d=>this._start(d)),X.on(this._element,ze,d=>this._move(d)),X.on(this._element,$d,d=>this._end(d)))}_eventIsPointerPenTouch(d){return this._supportPointerEvents&&(d.pointerType===Ud||d.pointerType===$i)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}let Do="carousel",Hi=".bs.carousel",Io=".data-api",Nl="ArrowLeft",Jt="ArrowRight",$t=500,pi="next",rs="prev",Ui="left",Or="right",Bl=`slide${Hi}`,Mr=`slid${Hi}`,pn=`keydown${Hi}`,Vd=`mouseenter${Hi}`,Lr=`mouseleave${Hi}`,qd=`dragstart${Hi}`,ji=`load${Hi}${Io}`,Wd=`click${Hi}${Io}`,zl="carousel",fn="active",Gd="slide",Yd="carousel-item-end",Xd="carousel-item-start",Kd="carousel-item-next",Jd="carousel-item-prev",$l=".active",Hl=".carousel-item",Zd=$l+Hl,Qd=".carousel-item img",eh=".carousel-indicators",th="[data-bs-slide], [data-bs-slide-to]",ih='[data-bs-ride="carousel"]',sh={[Nl]:Or,[Jt]:Ui},Ul={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},x={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class v extends R{constructor(d,b){super(d,b),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=fe.findOne(eh,this._element),this._addEventListeners(),this._config.ride===zl&&this.cycle()}static get Default(){return Ul}static get DefaultType(){return x}static get NAME(){return Do}next(){this._slide(pi)}nextWhenVisible(){!document.hidden&&y(this._element)&&this.next()}prev(){this._slide(rs)}pause(){this._isSliding&&f(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){X.one(this._element,Mr,()=>this.cycle());return}this.cycle()}}to(d){let b=this._getItems();if(d>b.length-1||d<0)return;if(this._isSliding){X.one(this._element,Mr,()=>this.to(d));return}let M=this._getItemIndex(this._getActive());if(M===d)return;let Y=d>M?pi:rs;this._slide(Y,b[d])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(d){return d.defaultInterval=d.interval,d}_addEventListeners(){this._config.keyboard&&X.on(this._element,pn,d=>this._keydown(d)),this._config.pause==="hover"&&(X.on(this._element,Vd,()=>this.pause()),X.on(this._element,Lr,()=>this._maybeEnableCycle())),this._config.touch&&Hs.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let M of fe.find(Qd,this._element))X.on(M,qd,Y=>Y.preventDefault());let b={leftCallback:()=>this._slide(this._directionToOrder(Ui)),rightCallback:()=>this._slide(this._directionToOrder(Or)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),$t+this._config.interval))}};this._swipeHelper=new Hs(this._element,b)}_keydown(d){if(/input|textarea/i.test(d.target.tagName))return;let b=sh[d.key];b&&(d.preventDefault(),this._slide(this._directionToOrder(b)))}_getItemIndex(d){return this._getItems().indexOf(d)}_setActiveIndicatorElement(d){if(!this._indicatorsElement)return;let b=fe.findOne($l,this._indicatorsElement);b.classList.remove(fn),b.removeAttribute("aria-current");let M=fe.findOne(`[data-bs-slide-to="${d}"]`,this._indicatorsElement);M&&(M.classList.add(fn),M.setAttribute("aria-current","true"))}_updateInterval(){let d=this._activeElement||this._getActive();if(!d)return;let b=Number.parseInt(d.getAttribute("data-bs-interval"),10);this._config.interval=b||this._config.defaultInterval}_slide(d,b=null){if(this._isSliding)return;let M=this._getActive(),Y=d===pi,de=b||ae(this._getItems(),M,Y,this._config.wrap);if(de===M)return;let ce=this._getItemIndex(de),Ee=Zl=>X.trigger(this._element,Zl,{relatedTarget:de,direction:this._orderToDirection(d),from:this._getItemIndex(M),to:ce});if(Ee(Bl).defaultPrevented||!M||!de)return;let gi=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ce),this._activeElement=de;let ft=Y?Xd:Yd,Vi=Y?Kd:Jd;de.classList.add(Vi),I(de),M.classList.add(ft),de.classList.add(ft);let Mi=()=>{de.classList.remove(ft,Vi),de.classList.add(fn),M.classList.remove(fn,Vi,ft),this._isSliding=!1,Ee(Mr)};this._queueCallback(Mi,M,this._isAnimated()),gi&&this.cycle()}_isAnimated(){return this._element.classList.contains(Gd)}_getActive(){return fe.findOne(Zd,this._element)}_getItems(){return fe.find(Hl,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(d){return W()?d===Ui?rs:pi:d===Ui?pi:rs}_orderToDirection(d){return W()?d===rs?Ui:Or:d===rs?Or:Ui}static jQueryInterface(d){return this.each(function(){let b=v.getOrCreateInstance(this,d);if(typeof d=="number"){b.to(d);return}if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d]()}})}}X.on(document,Wd,th,function(C){let d=fe.getElementFromSelector(this);if(!d||!d.classList.contains(zl))return;C.preventDefault();let b=v.getOrCreateInstance(d),M=this.getAttribute("data-bs-slide-to");if(M){b.to(M),b._maybeEnableCycle();return}if(L.getDataAttribute(this,"slide")==="next"){b.next(),b._maybeEnableCycle();return}b.prev(),b._maybeEnableCycle()}),X.on(window,ji,()=>{let C=fe.find(ih);for(let d of C)v.getOrCreateInstance(d)}),J(v);let E="collapse",N=".bs.collapse",_=".data-api",B=`show${N}`,V=`shown${N}`,ne=`hide${N}`,ie=`hidden${N}`,ee=`click${N}${_}`,q="show",se="collapse",we="collapsing",Te="collapsed",$e=`:scope .${se} .${se}`,Le="collapse-horizontal",it="width",lt="height",Qe=".collapse.show, .collapse.collapsing",Zt='[data-bs-toggle="collapse"]',Mt={parent:null,toggle:!0},le={parent:"(null|element)",toggle:"boolean"};class xe extends R{constructor(d,b){super(d,b),this._isTransitioning=!1,this._triggerArray=[];let M=fe.find(Zt);for(let Y of M){let de=fe.getSelectorFromElement(Y),ce=fe.find(de).filter(Ee=>Ee===this._element);de!==null&&ce.length&&this._triggerArray.push(Y)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Mt}static get DefaultType(){return le}static get NAME(){return E}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let d=[];if(this._config.parent&&(d=this._getFirstLevelChildren(Qe).filter(Ee=>Ee!==this._element).map(Ee=>xe.getOrCreateInstance(Ee,{toggle:!1}))),d.length&&d[0]._isTransitioning||X.trigger(this._element,B).defaultPrevented)return;for(let Ee of d)Ee.hide();let M=this._getDimension();this._element.classList.remove(se),this._element.classList.add(we),this._element.style[M]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let Y=()=>{this._isTransitioning=!1,this._element.classList.remove(we),this._element.classList.add(se,q),this._element.style[M]="",X.trigger(this._element,V)},ce=`scroll${M[0].toUpperCase()+M.slice(1)}`;this._queueCallback(Y,this._element,!0),this._element.style[M]=`${this._element[ce]}px`}hide(){if(this._isTransitioning||!this._isShown()||X.trigger(this._element,ne).defaultPrevented)return;let b=this._getDimension();this._element.style[b]=`${this._element.getBoundingClientRect()[b]}px`,I(this._element),this._element.classList.add(we),this._element.classList.remove(se,q);for(let Y of this._triggerArray){let de=fe.getElementFromSelector(Y);de&&!this._isShown(de)&&this._addAriaAndCollapsedClass([Y],!1)}this._isTransitioning=!0;let M=()=>{this._isTransitioning=!1,this._element.classList.remove(we),this._element.classList.add(se),X.trigger(this._element,ie)};this._element.style[b]="",this._queueCallback(M,this._element,!0)}_isShown(d=this._element){return d.classList.contains(q)}_configAfterMerge(d){return d.toggle=!!d.toggle,d.parent=g(d.parent),d}_getDimension(){return this._element.classList.contains(Le)?it:lt}_initializeChildren(){if(!this._config.parent)return;let d=this._getFirstLevelChildren(Zt);for(let b of d){let M=fe.getElementFromSelector(b);M&&this._addAriaAndCollapsedClass([b],this._isShown(M))}}_getFirstLevelChildren(d){let b=fe.find($e,this._config.parent);return fe.find(d,this._config.parent).filter(M=>!b.includes(M))}_addAriaAndCollapsedClass(d,b){if(d.length)for(let M of d)M.classList.toggle(Te,!b),M.setAttribute("aria-expanded",b)}static jQueryInterface(d){let b={};return typeof d=="string"&&/show|hide/.test(d)&&(b.toggle=!1),this.each(function(){let M=xe.getOrCreateInstance(this,b);if(typeof d=="string"){if(typeof M[d]>"u")throw new TypeError(`No method named "${d}"`);M[d]()}})}}X.on(document,ee,Zt,function(C){(C.target.tagName==="A"||C.delegateTarget&&C.delegateTarget.tagName==="A")&&C.preventDefault();for(let d of fe.getMultipleElementsFromSelector(this))xe.getOrCreateInstance(d,{toggle:!1}).toggle()}),J(xe);let et="dropdown",yt=".bs.dropdown",Pi=".data-api",os="Escape",_i="Tab",fi="ArrowUp",wt="ArrowDown",as=2,kr=`hide${yt}`,Fo=`hidden${yt}`,Ro=`show${yt}`,jl=`shown${yt}`,No=`click${yt}${Pi}`,Bo=`keydown${yt}${Pi}`,Vl=`keyup${yt}${Pi}`,Us="show",nh="dropup",CS="dropend",PS="dropstart",_S="dropup-center",OS="dropdown-center",mn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',MS=`${mn}.${Us}`,ql=".dropdown-menu",LS=".navbar",kS=".navbar-nav",DS=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",IS=W()?"top-end":"top-start",FS=W()?"top-start":"top-end",RS=W()?"bottom-end":"bottom-start",NS=W()?"bottom-start":"bottom-end",BS=W()?"left-start":"right-start",zS=W()?"right-start":"left-start",$S="top",HS="bottom",US={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},jS={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Oi extends R{constructor(d,b){super(d,b),this._popper=null,this._parent=this._element.parentNode,this._menu=fe.next(this._element,ql)[0]||fe.prev(this._element,ql)[0]||fe.findOne(ql,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return US}static get DefaultType(){return jS}static get NAME(){return et}toggle(){return this._isShown()?this.hide():this.show()}show(){if(A(this._element)||this._isShown())return;let d={relatedTarget:this._element};if(!X.trigger(this._element,Ro,d).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(kS))for(let M of[].concat(...document.body.children))X.on(M,"mouseover",O);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Us),this._element.classList.add(Us),X.trigger(this._element,jl,d)}}hide(){if(A(this._element)||!this._isShown())return;let d={relatedTarget:this._element};this._completeHide(d)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(d){if(!X.trigger(this._element,kr,d).defaultPrevented){if("ontouchstart"in document.documentElement)for(let M of[].concat(...document.body.children))X.off(M,"mouseover",O);this._popper&&this._popper.destroy(),this._menu.classList.remove(Us),this._element.classList.remove(Us),this._element.setAttribute("aria-expanded","false"),L.removeDataAttribute(this._menu,"popper"),X.trigger(this._element,Fo,d)}}_getConfig(d){if(d=super._getConfig(d),typeof d.reference=="object"&&!p(d.reference)&&typeof d.reference.getBoundingClientRect!="function")throw new TypeError(`${et.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return d}_createPopper(){if(typeof t>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let d=this._element;this._config.reference==="parent"?d=this._parent:p(this._config.reference)?d=g(this._config.reference):typeof this._config.reference=="object"&&(d=this._config.reference);let b=this._getPopperConfig();this._popper=t.createPopper(d,this._menu,b)}_isShown(){return this._menu.classList.contains(Us)}_getPlacement(){let d=this._parent;if(d.classList.contains(CS))return BS;if(d.classList.contains(PS))return zS;if(d.classList.contains(_S))return $S;if(d.classList.contains(OS))return HS;let b=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return d.classList.contains(nh)?b?FS:IS:b?NS:RS}_detectNavbar(){return this._element.closest(LS)!==null}_getOffset(){let{offset:d}=this._config;return typeof d=="string"?d.split(",").map(b=>Number.parseInt(b,10)):typeof d=="function"?b=>d(b,this._element):d}_getPopperConfig(){let d={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(L.setDataAttribute(this._menu,"popper","static"),d.modifiers=[{name:"applyStyles",enabled:!1}]),{...d,...oe(this._config.popperConfig,[d])}}_selectMenuItem({key:d,target:b}){let M=fe.find(DS,this._menu).filter(Y=>y(Y));M.length&&ae(M,b,d===wt,!M.includes(b)).focus()}static jQueryInterface(d){return this.each(function(){let b=Oi.getOrCreateInstance(this,d);if(typeof d=="string"){if(typeof b[d]>"u")throw new TypeError(`No method named "${d}"`);b[d]()}})}static clearMenus(d){if(d.button===as||d.type==="keyup"&&d.key!==_i)return;let b=fe.find(MS);for(let M of b){let Y=Oi.getInstance(M);if(!Y||Y._config.autoClose===!1)continue;let de=d.composedPath(),ce=de.includes(Y._menu);if(de.includes(Y._element)||Y._config.autoClose==="inside"&&!ce||Y._config.autoClose==="outside"&&ce||Y._menu.contains(d.target)&&(d.type==="keyup"&&d.key===_i||/input|select|option|textarea|form/i.test(d.target.tagName)))continue;let Ee={relatedTarget:Y._element};d.type==="click"&&(Ee.clickEvent=d),Y._completeHide(Ee)}}static dataApiKeydownHandler(d){let b=/input|textarea/i.test(d.target.tagName),M=d.key===os,Y=[fi,wt].includes(d.key);if(!Y&&!M||b&&!M)return;d.preventDefault();let de=this.matches(mn)?this:fe.prev(this,mn)[0]||fe.next(this,mn)[0]||fe.findOne(mn,d.delegateTarget.parentNode),ce=Oi.getOrCreateInstance(de);if(Y){d.stopPropagation(),ce.show(),ce._selectMenuItem(d);return}ce._isShown()&&(d.stopPropagation(),ce.hide(),de.focus())}}X.on(document,Bo,mn,Oi.dataApiKeydownHandler),X.on(document,Bo,ql,Oi.dataApiKeydownHandler),X.on(document,No,Oi.clearMenus),X.on(document,Vl,Oi.clearMenus),X.on(document,No,mn,function(C){C.preventDefault(),Oi.getOrCreateInstance(this).toggle()}),J(Oi);let fv="backdrop",VS="fade",mv="show",gv=`mousedown.bs.${fv}`,qS={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},WS={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class vv extends P{constructor(d){super(),this._config=this._getConfig(d),this._isAppended=!1,this._element=null}static get Default(){return qS}static get DefaultType(){return WS}static get NAME(){return fv}show(d){if(!this._config.isVisible){oe(d);return}this._append();let b=this._getElement();this._config.isAnimated&&I(b),b.classList.add(mv),this._emulateAnimation(()=>{oe(d)})}hide(d){if(!this._config.isVisible){oe(d);return}this._getElement().classList.remove(mv),this._emulateAnimation(()=>{this.dispose(),oe(d)})}dispose(){this._isAppended&&(X.off(this._element,gv),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let d=document.createElement("div");d.className=this._config.className,this._config.isAnimated&&d.classList.add(VS),this._element=d}return this._element}_configAfterMerge(d){return d.rootElement=g(d.rootElement),d}_append(){if(this._isAppended)return;let d=this._getElement();this._config.rootElement.append(d),X.on(d,gv,()=>{oe(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(d){G(d,this._getElement(),this._config.isAnimated)}}let GS="focustrap",Wl=".bs.focustrap",YS=`focusin${Wl}`,XS=`keydown.tab${Wl}`,KS="Tab",JS="forward",bv="backward",ZS={autofocus:!0,trapElement:null},QS={autofocus:"boolean",trapElement:"element"};class yv extends P{constructor(d){super(),this._config=this._getConfig(d),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ZS}static get DefaultType(){return QS}static get NAME(){return GS}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),X.off(document,Wl),X.on(document,YS,d=>this._handleFocusin(d)),X.on(document,XS,d=>this._handleKeydown(d)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,X.off(document,Wl))}_handleFocusin(d){let{trapElement:b}=this._config;if(d.target===document||d.target===b||b.contains(d.target))return;let M=fe.focusableChildren(b);M.length===0?b.focus():this._lastTabNavDirection===bv?M[M.length-1].focus():M[0].focus()}_handleKeydown(d){d.key===KS&&(this._lastTabNavDirection=d.shiftKey?bv:JS)}}let wv=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ev=".sticky-top",Gl="padding-right",Sv="margin-right";class rh{constructor(){this._element=document.body}getWidth(){let d=document.documentElement.clientWidth;return Math.abs(window.innerWidth-d)}hide(){let d=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Gl,b=>b+d),this._setElementAttributes(wv,Gl,b=>b+d),this._setElementAttributes(Ev,Sv,b=>b-d)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Gl),this._resetElementAttributes(wv,Gl),this._resetElementAttributes(Ev,Sv)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(d,b,M){let Y=this.getWidth(),de=ce=>{if(ce!==this._element&&window.innerWidth>ce.clientWidth+Y)return;this._saveInitialAttribute(ce,b);let Ee=window.getComputedStyle(ce).getPropertyValue(b);ce.style.setProperty(b,`${M(Number.parseFloat(Ee))}px`)};this._applyManipulationCallback(d,de)}_saveInitialAttribute(d,b){let M=d.style.getPropertyValue(b);M&&L.setDataAttribute(d,b,M)}_resetElementAttributes(d,b){let M=Y=>{let de=L.getDataAttribute(Y,b);if(de===null){Y.style.removeProperty(b);return}L.removeDataAttribute(Y,b),Y.style.setProperty(b,de)};this._applyManipulationCallback(d,M)}_applyManipulationCallback(d,b){if(p(d)){b(d);return}for(let M of fe.find(d,this._element))b(M)}}let eA="modal",mi=".bs.modal",tA=".data-api",iA="Escape",sA=`hide${mi}`,nA=`hidePrevented${mi}`,Av=`hidden${mi}`,Tv=`show${mi}`,rA=`shown${mi}`,oA=`resize${mi}`,aA=`click.dismiss${mi}`,lA=`mousedown.dismiss${mi}`,cA=`keydown.dismiss${mi}`,uA=`click${mi}${tA}`,xv="modal-open",dA="fade",Cv="show",oh="modal-static",hA=".modal.show",pA=".modal-dialog",fA=".modal-body",mA='[data-bs-toggle="modal"]',gA={backdrop:!0,focus:!0,keyboard:!0},vA={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class gn extends R{constructor(d,b){super(d,b),this._dialog=fe.findOne(pA,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new rh,this._addEventListeners()}static get Default(){return gA}static get DefaultType(){return vA}static get NAME(){return eA}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||this._isTransitioning||X.trigger(this._element,Tv,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(xv),this._adjustDialog(),this._backdrop.show(()=>this._showElement(d)))}hide(){!this._isShown||this._isTransitioning||X.trigger(this._element,sA).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Cv),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){X.off(window,mi),X.off(this._dialog,mi),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new vv({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new yv({trapElement:this._element})}_showElement(d){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let b=fe.findOne(fA,this._dialog);b&&(b.scrollTop=0),I(this._element),this._element.classList.add(Cv);let M=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,X.trigger(this._element,rA,{relatedTarget:d})};this._queueCallback(M,this._dialog,this._isAnimated())}_addEventListeners(){X.on(this._element,cA,d=>{if(d.key===iA){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),X.on(window,oA,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),X.on(this._element,lA,d=>{X.one(this._element,aA,b=>{if(!(this._element!==d.target||this._element!==b.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(xv),this._resetAdjustments(),this._scrollBar.reset(),X.trigger(this._element,Av)})}_isAnimated(){return this._element.classList.contains(dA)}_triggerBackdropTransition(){if(X.trigger(this._element,nA).defaultPrevented)return;let b=this._element.scrollHeight>document.documentElement.clientHeight,M=this._element.style.overflowY;M==="hidden"||this._element.classList.contains(oh)||(b||(this._element.style.overflowY="hidden"),this._element.classList.add(oh),this._queueCallback(()=>{this._element.classList.remove(oh),this._queueCallback(()=>{this._element.style.overflowY=M},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let d=this._element.scrollHeight>document.documentElement.clientHeight,b=this._scrollBar.getWidth(),M=b>0;if(M&&!d){let Y=W()?"paddingLeft":"paddingRight";this._element.style[Y]=`${b}px`}if(!M&&d){let Y=W()?"paddingRight":"paddingLeft";this._element.style[Y]=`${b}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(d,b){return this.each(function(){let M=gn.getOrCreateInstance(this,d);if(typeof d=="string"){if(typeof M[d]>"u")throw new TypeError(`No method named "${d}"`);M[d](b)}})}}X.on(document,uA,mA,function(C){let d=fe.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&C.preventDefault(),X.one(d,Tv,Y=>{Y.defaultPrevented||X.one(d,Av,()=>{y(this)&&this.focus()})});let b=fe.findOne(hA);b&&gn.getInstance(b).hide(),gn.getOrCreateInstance(d).toggle(this)}),pt(gn),J(gn);let bA="offcanvas",ls=".bs.offcanvas",Pv=".data-api",yA=`load${ls}${Pv}`,wA="Escape",_v="show",Ov="showing",Mv="hiding",EA="offcanvas-backdrop",Lv=".offcanvas.show",SA=`show${ls}`,AA=`shown${ls}`,TA=`hide${ls}`,kv=`hidePrevented${ls}`,Dv=`hidden${ls}`,xA=`resize${ls}`,CA=`click${ls}${Pv}`,PA=`keydown.dismiss${ls}`,_A='[data-bs-toggle="offcanvas"]',OA={backdrop:!0,keyboard:!0,scroll:!1},MA={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class cs extends R{constructor(d,b){super(d,b),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return OA}static get DefaultType(){return MA}static get NAME(){return bA}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){if(this._isShown||X.trigger(this._element,SA,{relatedTarget:d}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new rh().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ov);let M=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(_v),this._element.classList.remove(Ov),X.trigger(this._element,AA,{relatedTarget:d})};this._queueCallback(M,this._element,!0)}hide(){if(!this._isShown||X.trigger(this._element,TA).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Mv),this._backdrop.hide();let b=()=>{this._element.classList.remove(_v,Mv),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new rh().reset(),X.trigger(this._element,Dv)};this._queueCallback(b,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let d=()=>{if(this._config.backdrop==="static"){X.trigger(this._element,kv);return}this.hide()},b=!!this._config.backdrop;return new vv({className:EA,isVisible:b,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:b?d:null})}_initializeFocusTrap(){return new yv({trapElement:this._element})}_addEventListeners(){X.on(this._element,PA,d=>{if(d.key===wA){if(this._config.keyboard){this.hide();return}X.trigger(this._element,kv)}})}static jQueryInterface(d){return this.each(function(){let b=cs.getOrCreateInstance(this,d);if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d](this)}})}}X.on(document,CA,_A,function(C){let d=fe.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&C.preventDefault(),A(this))return;X.one(d,Dv,()=>{y(this)&&this.focus()});let b=fe.findOne(Lv);b&&b!==d&&cs.getInstance(b).hide(),cs.getOrCreateInstance(d).toggle(this)}),X.on(window,yA,()=>{for(let C of fe.find(Lv))cs.getOrCreateInstance(C).show()}),X.on(window,xA,()=>{for(let C of fe.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(C).position!=="fixed"&&cs.getOrCreateInstance(C).hide()}),pt(cs),J(cs);let Iv={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},LA=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),kA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,DA=(C,d)=>{let b=C.nodeName.toLowerCase();return d.includes(b)?LA.has(b)?!!kA.test(C.nodeValue):!0:d.filter(M=>M instanceof RegExp).some(M=>M.test(b))};function IA(C,d,b){if(!C.length)return C;if(b&&typeof b=="function")return b(C);let Y=new window.DOMParser().parseFromString(C,"text/html"),de=[].concat(...Y.body.querySelectorAll("*"));for(let ce of de){let Ee=ce.nodeName.toLowerCase();if(!Object.keys(d).includes(Ee)){ce.remove();continue}let Ht=[].concat(...ce.attributes),gi=[].concat(d["*"]||[],d[Ee]||[]);for(let ft of Ht)DA(ft,gi)||ce.removeAttribute(ft.nodeName)}return Y.body.innerHTML}let FA="TemplateFactory",RA={allowList:Iv,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},NA={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},BA={entry:"(string|element|function|null)",selector:"(string|element)"};class zA extends P{constructor(d){super(),this._config=this._getConfig(d)}static get Default(){return RA}static get DefaultType(){return NA}static get NAME(){return FA}getContent(){return Object.values(this._config.content).map(d=>this._resolvePossibleFunction(d)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(d){return this._checkContent(d),this._config.content={...this._config.content,...d},this}toHtml(){let d=document.createElement("div");d.innerHTML=this._maybeSanitize(this._config.template);for(let[Y,de]of Object.entries(this._config.content))this._setContent(d,de,Y);let b=d.children[0],M=this._resolvePossibleFunction(this._config.extraClass);return M&&b.classList.add(...M.split(" ")),b}_typeCheckConfig(d){super._typeCheckConfig(d),this._checkContent(d.content)}_checkContent(d){for(let[b,M]of Object.entries(d))super._typeCheckConfig({selector:b,entry:M},BA)}_setContent(d,b,M){let Y=fe.findOne(M,d);if(Y){if(b=this._resolvePossibleFunction(b),!b){Y.remove();return}if(p(b)){this._putElementInTemplate(g(b),Y);return}if(this._config.html){Y.innerHTML=this._maybeSanitize(b);return}Y.textContent=b}}_maybeSanitize(d){return this._config.sanitize?IA(d,this._config.allowList,this._config.sanitizeFn):d}_resolvePossibleFunction(d){return oe(d,[this])}_putElementInTemplate(d,b){if(this._config.html){b.innerHTML="",b.append(d);return}b.textContent=d.textContent}}let $A="tooltip",HA=new Set(["sanitize","allowList","sanitizeFn"]),ah="fade",UA="modal",Yl="show",jA=".tooltip-inner",Fv=`.${UA}`,Rv="hide.bs.modal",zo="hover",lh="focus",VA="click",qA="manual",WA="hide",GA="hidden",YA="show",XA="shown",KA="inserted",JA="click",ZA="focusin",QA="focusout",eT="mouseenter",tT="mouseleave",iT={AUTO:"auto",TOP:"top",RIGHT:W()?"left":"right",BOTTOM:"bottom",LEFT:W()?"right":"left"},sT={allowList:Iv,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},nT={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class vn extends R{constructor(d,b){if(typeof t>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(d,b),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return sT}static get DefaultType(){return nT}static get NAME(){return $A}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),X.off(this._element.closest(Fv),Rv,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let d=X.trigger(this._element,this.constructor.eventName(YA)),M=(S(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(d.defaultPrevented||!M)return;this._disposePopper();let Y=this._getTipElement();this._element.setAttribute("aria-describedby",Y.getAttribute("id"));let{container:de}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(de.append(Y),X.trigger(this._element,this.constructor.eventName(KA))),this._popper=this._createPopper(Y),Y.classList.add(Yl),"ontouchstart"in document.documentElement)for(let Ee of[].concat(...document.body.children))X.on(Ee,"mouseover",O);let ce=()=>{X.trigger(this._element,this.constructor.eventName(XA)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(ce,this.tip,this._isAnimated())}hide(){if(!this._isShown()||X.trigger(this._element,this.constructor.eventName(WA)).defaultPrevented)return;if(this._getTipElement().classList.remove(Yl),"ontouchstart"in document.documentElement)for(let Y of[].concat(...document.body.children))X.off(Y,"mouseover",O);this._activeTrigger[VA]=!1,this._activeTrigger[lh]=!1,this._activeTrigger[zo]=!1,this._isHovered=null;let M=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),X.trigger(this._element,this.constructor.eventName(GA)))};this._queueCallback(M,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(d){let b=this._getTemplateFactory(d).toHtml();if(!b)return null;b.classList.remove(ah,Yl),b.classList.add(`bs-${this.constructor.NAME}-auto`);let M=u(this.constructor.NAME).toString();return b.setAttribute("id",M),this._isAnimated()&&b.classList.add(ah),b}setContent(d){this._newContent=d,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(d){return this._templateFactory?this._templateFactory.changeContent(d):this._templateFactory=new zA({...this._config,content:d,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[jA]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(d){return this.constructor.getOrCreateInstance(d.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ah)}_isShown(){return this.tip&&this.tip.classList.contains(Yl)}_createPopper(d){let b=oe(this._config.placement,[this,d,this._element]),M=iT[b.toUpperCase()];return t.createPopper(this._element,d,this._getPopperConfig(M))}_getOffset(){let{offset:d}=this._config;return typeof d=="string"?d.split(",").map(b=>Number.parseInt(b,10)):typeof d=="function"?b=>d(b,this._element):d}_resolvePossibleFunction(d){return oe(d,[this._element])}_getPopperConfig(d){let b={placement:d,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:M=>{this._getTipElement().setAttribute("data-popper-placement",M.state.placement)}}]};return{...b,...oe(this._config.popperConfig,[b])}}_setListeners(){let d=this._config.trigger.split(" ");for(let b of d)if(b==="click")X.on(this._element,this.constructor.eventName(JA),this._config.selector,M=>{this._initializeOnDelegatedTarget(M).toggle()});else if(b!==qA){let M=b===zo?this.constructor.eventName(eT):this.constructor.eventName(ZA),Y=b===zo?this.constructor.eventName(tT):this.constructor.eventName(QA);X.on(this._element,M,this._config.selector,de=>{let ce=this._initializeOnDelegatedTarget(de);ce._activeTrigger[de.type==="focusin"?lh:zo]=!0,ce._enter()}),X.on(this._element,Y,this._config.selector,de=>{let ce=this._initializeOnDelegatedTarget(de);ce._activeTrigger[de.type==="focusout"?lh:zo]=ce._element.contains(de.relatedTarget),ce._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},X.on(this._element.closest(Fv),Rv,this._hideModalHandler)}_fixTitle(){let d=this._element.getAttribute("title");d&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",d),this._element.setAttribute("data-bs-original-title",d),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(d,b){clearTimeout(this._timeout),this._timeout=setTimeout(d,b)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(d){let b=L.getDataAttributes(this._element);for(let M of Object.keys(b))HA.has(M)&&delete b[M];return d={...b,...typeof d=="object"&&d?d:{}},d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d.container=d.container===!1?document.body:g(d.container),typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),typeof d.title=="number"&&(d.title=d.title.toString()),typeof d.content=="number"&&(d.content=d.content.toString()),d}_getDelegateConfig(){let d={};for(let[b,M]of Object.entries(this._config))this.constructor.Default[b]!==M&&(d[b]=M);return d.selector=!1,d.trigger="manual",d}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(d){return this.each(function(){let b=vn.getOrCreateInstance(this,d);if(typeof d=="string"){if(typeof b[d]>"u")throw new TypeError(`No method named "${d}"`);b[d]()}})}}J(vn);let rT="popover",oT=".popover-header",aT=".popover-body",lT={...vn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},cT={...vn.DefaultType,content:"(null|string|element|function)"};class Xl extends vn{static get Default(){return lT}static get DefaultType(){return cT}static get NAME(){return rT}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[oT]:this._getTitle(),[aT]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(d){return this.each(function(){let b=Xl.getOrCreateInstance(this,d);if(typeof d=="string"){if(typeof b[d]>"u")throw new TypeError(`No method named "${d}"`);b[d]()}})}}J(Xl);let uT="scrollspy",ch=".bs.scrollspy",dT=".data-api",hT=`activate${ch}`,Nv=`click${ch}`,pT=`load${ch}${dT}`,fT="dropdown-item",Dr="active",mT='[data-bs-spy="scroll"]',uh="[href]",gT=".nav, .list-group",Bv=".nav-link",vT=`${Bv}, .nav-item > ${Bv}, .list-group-item`,bT=".dropdown",yT=".dropdown-toggle",wT={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ET={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class $o extends R{constructor(d,b){super(d,b),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return wT}static get DefaultType(){return ET}static get NAME(){return uT}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let d of this._observableSections.values())this._observer.observe(d)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(d){return d.target=g(d.target)||document.body,d.rootMargin=d.offset?`${d.offset}px 0px -30%`:d.rootMargin,typeof d.threshold=="string"&&(d.threshold=d.threshold.split(",").map(b=>Number.parseFloat(b))),d}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(X.off(this._config.target,Nv),X.on(this._config.target,Nv,uh,d=>{let b=this._observableSections.get(d.target.hash);if(b){d.preventDefault();let M=this._rootElement||window,Y=b.offsetTop-this._element.offsetTop;if(M.scrollTo){M.scrollTo({top:Y,behavior:"smooth"});return}M.scrollTop=Y}}))}_getNewObserver(){let d={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(b=>this._observerCallback(b),d)}_observerCallback(d){let b=ce=>this._targetLinks.get(`#${ce.target.id}`),M=ce=>{this._previousScrollData.visibleEntryTop=ce.target.offsetTop,this._process(b(ce))},Y=(this._rootElement||document.documentElement).scrollTop,de=Y>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=Y;for(let ce of d){if(!ce.isIntersecting){this._activeTarget=null,this._clearActiveClass(b(ce));continue}let Ee=ce.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(de&&Ee){if(M(ce),!Y)return;continue}!de&&!Ee&&M(ce)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let d=fe.find(uh,this._config.target);for(let b of d){if(!b.hash||A(b))continue;let M=fe.findOne(decodeURI(b.hash),this._element);y(M)&&(this._targetLinks.set(decodeURI(b.hash),b),this._observableSections.set(b.hash,M))}}_process(d){this._activeTarget!==d&&(this._clearActiveClass(this._config.target),this._activeTarget=d,d.classList.add(Dr),this._activateParents(d),X.trigger(this._element,hT,{relatedTarget:d}))}_activateParents(d){if(d.classList.contains(fT)){fe.findOne(yT,d.closest(bT)).classList.add(Dr);return}for(let b of fe.parents(d,gT))for(let M of fe.prev(b,vT))M.classList.add(Dr)}_clearActiveClass(d){d.classList.remove(Dr);let b=fe.find(`${uh}.${Dr}`,d);for(let M of b)M.classList.remove(Dr)}static jQueryInterface(d){return this.each(function(){let b=$o.getOrCreateInstance(this,d);if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d]()}})}}X.on(window,pT,()=>{for(let C of fe.find(mT))$o.getOrCreateInstance(C)}),J($o);let ST="tab",bn=".bs.tab",AT=`hide${bn}`,TT=`hidden${bn}`,xT=`show${bn}`,CT=`shown${bn}`,PT=`click${bn}`,_T=`keydown${bn}`,OT=`load${bn}`,MT="ArrowLeft",zv="ArrowRight",LT="ArrowUp",$v="ArrowDown",dh="Home",Hv="End",yn="active",Uv="fade",hh="show",kT="dropdown",jv=".dropdown-toggle",DT=".dropdown-menu",ph=`:not(${jv})`,IT='.list-group, .nav, [role="tablist"]',FT=".nav-item, .list-group-item",RT=`.nav-link${ph}, .list-group-item${ph}, [role="tab"]${ph}`,Vv='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',fh=`${RT}, ${Vv}`,NT=`.${yn}[data-bs-toggle="tab"], .${yn}[data-bs-toggle="pill"], .${yn}[data-bs-toggle="list"]`;class wn extends R{constructor(d){super(d),this._parent=this._element.closest(IT),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),X.on(this._element,_T,b=>this._keydown(b)))}static get NAME(){return ST}show(){let d=this._element;if(this._elemIsActive(d))return;let b=this._getActiveElem(),M=b?X.trigger(b,AT,{relatedTarget:d}):null;X.trigger(d,xT,{relatedTarget:b}).defaultPrevented||M&&M.defaultPrevented||(this._deactivate(b,d),this._activate(d,b))}_activate(d,b){if(!d)return;d.classList.add(yn),this._activate(fe.getElementFromSelector(d));let M=()=>{if(d.getAttribute("role")!=="tab"){d.classList.add(hh);return}d.removeAttribute("tabindex"),d.setAttribute("aria-selected",!0),this._toggleDropDown(d,!0),X.trigger(d,CT,{relatedTarget:b})};this._queueCallback(M,d,d.classList.contains(Uv))}_deactivate(d,b){if(!d)return;d.classList.remove(yn),d.blur(),this._deactivate(fe.getElementFromSelector(d));let M=()=>{if(d.getAttribute("role")!=="tab"){d.classList.remove(hh);return}d.setAttribute("aria-selected",!1),d.setAttribute("tabindex","-1"),this._toggleDropDown(d,!1),X.trigger(d,TT,{relatedTarget:b})};this._queueCallback(M,d,d.classList.contains(Uv))}_keydown(d){if(![MT,zv,LT,$v,dh,Hv].includes(d.key))return;d.stopPropagation(),d.preventDefault();let b=this._getChildren().filter(Y=>!A(Y)),M;if([dh,Hv].includes(d.key))M=b[d.key===dh?0:b.length-1];else{let Y=[zv,$v].includes(d.key);M=ae(b,d.target,Y,!0)}M&&(M.focus({preventScroll:!0}),wn.getOrCreateInstance(M).show())}_getChildren(){return fe.find(fh,this._parent)}_getActiveElem(){return this._getChildren().find(d=>this._elemIsActive(d))||null}_setInitialAttributes(d,b){this._setAttributeIfNotExists(d,"role","tablist");for(let M of b)this._setInitialAttributesOnChild(M)}_setInitialAttributesOnChild(d){d=this._getInnerElement(d);let b=this._elemIsActive(d),M=this._getOuterElement(d);d.setAttribute("aria-selected",b),M!==d&&this._setAttributeIfNotExists(M,"role","presentation"),b||d.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(d,"role","tab"),this._setInitialAttributesOnTargetPanel(d)}_setInitialAttributesOnTargetPanel(d){let b=fe.getElementFromSelector(d);b&&(this._setAttributeIfNotExists(b,"role","tabpanel"),d.id&&this._setAttributeIfNotExists(b,"aria-labelledby",`${d.id}`))}_toggleDropDown(d,b){let M=this._getOuterElement(d);if(!M.classList.contains(kT))return;let Y=(de,ce)=>{let Ee=fe.findOne(de,M);Ee&&Ee.classList.toggle(ce,b)};Y(jv,yn),Y(DT,hh),M.setAttribute("aria-expanded",b)}_setAttributeIfNotExists(d,b,M){d.hasAttribute(b)||d.setAttribute(b,M)}_elemIsActive(d){return d.classList.contains(yn)}_getInnerElement(d){return d.matches(fh)?d:fe.findOne(fh,d)}_getOuterElement(d){return d.closest(FT)||d}static jQueryInterface(d){return this.each(function(){let b=wn.getOrCreateInstance(this);if(typeof d=="string"){if(b[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);b[d]()}})}}X.on(document,PT,Vv,function(C){["A","AREA"].includes(this.tagName)&&C.preventDefault(),!A(this)&&wn.getOrCreateInstance(this).show()}),X.on(window,OT,()=>{for(let C of fe.find(NT))wn.getOrCreateInstance(C)}),J(wn);let BT="toast",js=".bs.toast",zT=`mouseover${js}`,$T=`mouseout${js}`,HT=`focusin${js}`,UT=`focusout${js}`,jT=`hide${js}`,VT=`hidden${js}`,qT=`show${js}`,WT=`shown${js}`,GT="fade",qv="hide",Kl="show",Jl="showing",YT={animation:"boolean",autohide:"boolean",delay:"number"},XT={animation:!0,autohide:!0,delay:5e3};class Ho extends R{constructor(d,b){super(d,b),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return XT}static get DefaultType(){return YT}static get NAME(){return BT}show(){if(X.trigger(this._element,qT).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(GT);let b=()=>{this._element.classList.remove(Jl),X.trigger(this._element,WT),this._maybeScheduleHide()};this._element.classList.remove(qv),I(this._element),this._element.classList.add(Kl,Jl),this._queueCallback(b,this._element,this._config.animation)}hide(){if(!this.isShown()||X.trigger(this._element,jT).defaultPrevented)return;let b=()=>{this._element.classList.add(qv),this._element.classList.remove(Jl,Kl),X.trigger(this._element,VT)};this._element.classList.add(Jl),this._queueCallback(b,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Kl),super.dispose()}isShown(){return this._element.classList.contains(Kl)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(d,b){switch(d.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=b;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=b;break}}if(b){this._clearTimeout();return}let M=d.relatedTarget;this._element===M||this._element.contains(M)||this._maybeScheduleHide()}_setListeners(){X.on(this._element,zT,d=>this._onInteraction(d,!0)),X.on(this._element,$T,d=>this._onInteraction(d,!1)),X.on(this._element,HT,d=>this._onInteraction(d,!0)),X.on(this._element,UT,d=>this._onInteraction(d,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(d){return this.each(function(){let b=Ho.getOrCreateInstance(this,d);if(typeof d=="string"){if(typeof b[d]>"u")throw new TypeError(`No method named "${d}"`);b[d](this)}})}}return pt(Ho),J(Ho),{Alert:zi,Button:ot,Carousel:v,Collapse:xe,Dropdown:Oi,Modal:gn,Offcanvas:cs,Popover:Xl,ScrollSpy:$o,Tab:wn,Toast:Ho,Tooltip:vn}})});var y0=je((xB,b0)=>{b0.exports=function(){var e={},t=e._fns={};e.emit=function(o,a,l,c,u,h,f){var p=i(o);p.length&&n(o,p,[a,l,c,u,h,f])},e.on=function(o,a){t[o]||(t[o]=[]),t[o].push(a)},e.once=function(o,a){function l(){a.apply(this,arguments),e.off(o,l)}this.on(o,l)},e.off=function(o,a){var l=[];if(o&&a){var c=this._fns[o],u=0,h=c?c.length:0;for(u;u<h;u++)c[u]!==a&&l.push(c[u])}l.length?this._fns[o]=l:delete this._fns[o]};function i(r){var o=t[r]?t[r]:[],a=r.indexOf(":"),l=a===-1?[r]:[r.substring(0,a),r.substring(a+1)],c=Object.keys(t),u=0,h=c.length;for(u;u<h;u++){var f=c[u];if(f==="*"&&(o=o.concat(t[f])),l.length===2&&l[0]===f){o=o.concat(t[f]);break}}return o}function n(r,o,a){var l=0,c=o.length;for(l;l<c&&o[l];l++)o[l].event=r,o[l].apply(o[l],a)}return e}});var fu=je((PB,w0)=>{function $O(s){var e=typeof s;return s!=null&&(e=="object"||e=="function")}w0.exports=$O});var S0=je((_B,E0)=>{var HO=typeof global=="object"&&global&&global.Object===Object&&global;E0.exports=HO});var Mf=je((OB,A0)=>{var UO=S0(),jO=typeof self=="object"&&self&&self.Object===Object&&self,VO=UO||jO||Function("return this")();A0.exports=VO});var x0=je((MB,T0)=>{var qO=Mf(),WO=function(){return qO.Date.now()};T0.exports=WO});var P0=je((LB,C0)=>{var GO=/\s/;function YO(s){for(var e=s.length;e--&&GO.test(s.charAt(e)););return e}C0.exports=YO});var O0=je((kB,_0)=>{var XO=P0(),KO=/^\s+/;function JO(s){return s&&s.slice(0,XO(s)+1).replace(KO,"")}_0.exports=JO});var Lf=je((DB,M0)=>{var ZO=Mf(),QO=ZO.Symbol;M0.exports=QO});var I0=je((IB,D0)=>{var L0=Lf(),k0=Object.prototype,eM=k0.hasOwnProperty,tM=k0.toString,Sa=L0?L0.toStringTag:void 0;function iM(s){var e=eM.call(s,Sa),t=s[Sa];try{s[Sa]=void 0;var i=!0}catch{}var n=tM.call(s);return i&&(e?s[Sa]=t:delete s[Sa]),n}D0.exports=iM});var R0=je((FB,F0)=>{var sM=Object.prototype,nM=sM.toString;function rM(s){return nM.call(s)}F0.exports=rM});var $0=je((RB,z0)=>{var N0=Lf(),oM=I0(),aM=R0(),lM="[object Null]",cM="[object Undefined]",B0=N0?N0.toStringTag:void 0;function uM(s){return s==null?s===void 0?cM:lM:B0&&B0 in Object(s)?oM(s):aM(s)}z0.exports=uM});var U0=je((NB,H0)=>{function dM(s){return s!=null&&typeof s=="object"}H0.exports=dM});var V0=je((BB,j0)=>{var hM=$0(),pM=U0(),fM="[object Symbol]";function mM(s){return typeof s=="symbol"||pM(s)&&hM(s)==fM}j0.exports=mM});var Y0=je((zB,G0)=>{var gM=O0(),q0=fu(),vM=V0(),W0=NaN,bM=/^[-+]0x[0-9a-f]+$/i,yM=/^0b[01]+$/i,wM=/^0o[0-7]+$/i,EM=parseInt;function SM(s){if(typeof s=="number")return s;if(vM(s))return W0;if(q0(s)){var e=typeof s.valueOf=="function"?s.valueOf():s;s=q0(e)?e+"":e}if(typeof s!="string")return s===0?s:+s;s=gM(s);var t=yM.test(s);return t||wM.test(s)?EM(s.slice(2),t?2:8):bM.test(s)?W0:+s}G0.exports=SM});var Df=je(($B,K0)=>{var AM=fu(),kf=x0(),X0=Y0(),TM="Expected a function",xM=Math.max,CM=Math.min;function PM(s,e,t){var i,n,r,o,a,l,c=0,u=!1,h=!1,f=!0;if(typeof s!="function")throw new TypeError(TM);e=X0(e)||0,AM(t)&&(u=!!t.leading,h="maxWait"in t,r=h?xM(X0(t.maxWait)||0,e):r,f="trailing"in t?!!t.trailing:f);function p(U){var W=i,J=n;return i=n=void 0,c=U,o=s.apply(J,W),o}function g(U){return c=U,a=setTimeout(S,e),u?p(U):o}function y(U){var W=U-l,J=U-c,oe=e-W;return h?CM(oe,r-J):oe}function A(U){var W=U-l,J=U-c;return l===void 0||W>=e||W<0||h&&J>=r}function S(){var U=kf();if(A(U))return O(U);a=setTimeout(S,y(U))}function O(U){return a=void 0,f&&i?p(U):(i=n=void 0,o)}function I(){a!==void 0&&clearTimeout(a),c=0,i=l=n=a=void 0}function F(){return a===void 0?o:O(kf())}function H(){var U=kf(),W=A(U);if(i=arguments,n=this,l=U,W){if(a===void 0)return g(l);if(h)return clearTimeout(a),a=setTimeout(S,e),p(l)}return a===void 0&&(a=setTimeout(S,e)),o}return H.cancel=I,H.flush=F,H}K0.exports=PM});var Z0=je((HB,J0)=>{var _M=Df(),OM=fu(),MM="Expected a function";function LM(s,e,t){var i=!0,n=!0;if(typeof s!="function")throw new TypeError(MM);return OM(t)&&(i="leading"in t?!!t.leading:i,n="trailing"in t?!!t.trailing:n),_M(s,e,{leading:i,maxWait:e,trailing:n})}J0.exports=LM});var bu=je((t5,rw)=>{"use strict";rw.exports=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);let t=e<0,i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return`${(t?"-":"")+e} B`;let n=Math.min(Math.floor(Math.log(e)/Math.log(1024)),i.length-1);e=Number(e/1024**n);let r=i[n];return e>=10||e%1===0?`${(t?"-":"")+e.toFixed(0)} ${r}`:`${(t?"-":"")+e.toFixed(1)} ${r}`}});var lw=je((i5,aw)=>{"use strict";function ow(s,e){this.text=s=s||"",this.hasWild=~s.indexOf("*"),this.separator=e,this.parts=s.split(e)}ow.prototype.match=function(s){var e=!0,t=this.parts,i,n=t.length,r;if(typeof s=="string"||s instanceof String)if(!this.hasWild&&this.text!=s)e=!1;else{for(r=(s||"").split(this.separator),i=0;e&&i<n;i++)t[i]!=="*"&&(i<r.length?e=t[i]===r[i]:e=!1);e=e&&r}else if(typeof s.splice=="function")for(e=[],i=s.length;i--;)this.match(s[i])&&(e[e.length]=s[i]);else if(typeof s=="object"){e={};for(var o in s)this.match(o)&&(e[o]=s[o])}return e};aw.exports=function(s,e,t){var i=new ow(s,t||/[\/\.]/);return typeof e<"u"?i.match(e):i}});var uw=je((s5,cw)=>{var NM=lw(),BM=/[\/\+\.]/;cw.exports=function(s,e){function t(i){var n=NM(i,s,BM);return n&&n.length>=2}return e?t(e.split(";")[0]):t}});var kt=je((F5,_u)=>{(function(){"use strict";var s={}.hasOwnProperty;function e(){for(var n="",r=0;r<arguments.length;r++){var o=arguments[r];o&&(n=i(n,t(o)))}return n}function t(n){if(typeof n=="string"||typeof n=="number")return n;if(typeof n!="object")return"";if(Array.isArray(n))return e.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var r="";for(var o in n)s.call(n,o)&&n[o]&&(r=i(r,o));return r}function i(n,r){return r?n?n+" "+r:n+r:n}typeof _u<"u"&&_u.exports?(e.default=e,_u.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var LE=je((Oz,zm)=>{"use strict";var ck=Object.prototype.hasOwnProperty,It="~";function Za(){}Object.create&&(Za.prototype=Object.create(null),new Za().__proto__||(It=!1));function uk(s,e,t){this.fn=s,this.context=e,this.once=t||!1}function ME(s,e,t,i,n){if(typeof t!="function")throw new TypeError("The listener must be a function");var r=new uk(t,i||s,n),o=It?It+e:e;return s._events[o]?s._events[o].fn?s._events[o]=[s._events[o],r]:s._events[o].push(r):(s._events[o]=r,s._eventsCount++),s}function Gu(s,e){--s._eventsCount===0?s._events=new Za:delete s._events[e]}function Ot(){this._events=new Za,this._eventsCount=0}Ot.prototype.eventNames=function(){var e=[],t,i;if(this._eventsCount===0)return e;for(i in t=this._events)ck.call(t,i)&&e.push(It?i.slice(1):i);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Ot.prototype.listeners=function(e){var t=It?It+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,o=new Array(r);n<r;n++)o[n]=i[n].fn;return o};Ot.prototype.listenerCount=function(e){var t=It?It+e:e,i=this._events[t];return i?i.fn?1:i.length:0};Ot.prototype.emit=function(e,t,i,n,r,o){var a=It?It+e:e;if(!this._events[a])return!1;var l=this._events[a],c=arguments.length,u,h;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,n),!0;case 5:return l.fn.call(l.context,t,i,n,r),!0;case 6:return l.fn.call(l.context,t,i,n,r,o),!0}for(h=1,u=new Array(c-1);h<c;h++)u[h-1]=arguments[h];l.fn.apply(l.context,u)}else{var f=l.length,p;for(h=0;h<f;h++)switch(l[h].once&&this.removeListener(e,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,t);break;case 3:l[h].fn.call(l[h].context,t,i);break;case 4:l[h].fn.call(l[h].context,t,i,n);break;default:if(!u)for(p=1,u=new Array(c-1);p<c;p++)u[p-1]=arguments[p];l[h].fn.apply(l[h].context,u)}}return!0};Ot.prototype.on=function(e,t,i){return ME(this,e,t,i,!1)};Ot.prototype.once=function(e,t,i){return ME(this,e,t,i,!0)};Ot.prototype.removeListener=function(e,t,i,n){var r=It?It+e:e;if(!this._events[r])return this;if(!t)return Gu(this,r),this;var o=this._events[r];if(o.fn)o.fn===t&&(!n||o.once)&&(!i||o.context===i)&&Gu(this,r);else{for(var a=0,l=[],c=o.length;a<c;a++)(o[a].fn!==t||n&&!o[a].once||i&&o[a].context!==i)&&l.push(o[a]);l.length?this._events[r]=l.length===1?l[0]:l:Gu(this,r)}return this};Ot.prototype.removeAllListeners=function(e){var t;return e?(t=It?It+e:e,this._events[t]&&Gu(this,t)):(this._events=new Za,this._eventsCount=0),this};Ot.prototype.off=Ot.prototype.removeListener;Ot.prototype.addListener=Ot.prototype.on;Ot.prefixed=It;Ot.EventEmitter=Ot;typeof zm<"u"&&(zm.exports=Ot)});var g1=je((gg,vg)=>{(function(s,e){typeof gg=="object"&&typeof vg<"u"?vg.exports=e():typeof define=="function"&&define.amd?define(e):(s=s||self,s.Cropper=e())})(gg,function(){"use strict";function s(x){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(v){return typeof v}:s=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},s(x)}function e(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function t(x,v){for(var E=0;E<v.length;E++){var w=v[E];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}function i(x,v,E){return v&&t(x.prototype,v),E&&t(x,E),x}function n(x,v,E){return v in x?Object.defineProperty(x,v,{value:E,enumerable:!0,configurable:!0,writable:!0}):x[v]=E,x}function r(x,v){var E=Object.keys(x);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(x);v&&(w=w.filter(function(N){return Object.getOwnPropertyDescriptor(x,N).enumerable})),E.push.apply(E,w)}return E}function o(x){for(var v=1;v<arguments.length;v++){var E=arguments[v]!=null?arguments[v]:{};v%2?r(Object(E),!0).forEach(function(w){n(x,w,E[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(E)):r(Object(E)).forEach(function(w){Object.defineProperty(x,w,Object.getOwnPropertyDescriptor(E,w))})}return x}function a(x){return l(x)||c(x)||u(x)||f()}function l(x){if(Array.isArray(x))return h(x)}function c(x){if(typeof Symbol<"u"&&Symbol.iterator in Object(x))return Array.from(x)}function u(x,v){if(x){if(typeof x=="string")return h(x,v);var E=Object.prototype.toString.call(x).slice(8,-1);if(E==="Object"&&x.constructor&&(E=x.constructor.name),E==="Map"||E==="Set")return Array.from(x);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return h(x,v)}}function h(x,v){(v==null||v>x.length)&&(v=x.length);for(var E=0,w=new Array(v);E<v;E++)w[E]=x[E];return w}function f(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=typeof window<"u"&&typeof window.document<"u",g=p?window:{},y=p&&g.document.documentElement?"ontouchstart"in g.document.documentElement:!1,A=p?"PointerEvent"in g:!1,S="cropper",O="all",I="crop",F="move",H="zoom",U="e",W="w",J="s",oe="n",G="ne",ae="nw",pe="se",ue="sw",te="".concat(S,"-crop"),$="".concat(S,"-disabled"),T="".concat(S,"-hidden"),D="".concat(S,"-hide"),k="".concat(S,"-invisible"),K="".concat(S,"-modal"),Z="".concat(S,"-move"),re="".concat(S,"Action"),ve="".concat(S,"Preview"),_e="crop",Ne="move",Ke="none",Se="crop",Be="cropend",Je="cropmove",X="cropstart",Pe="dblclick",Q=y?"touchstart":"mousedown",j=y?"touchmove":"mousemove",L=y?"touchend touchcancel":"mouseup",P=A?"pointerdown":Q,z=A?"pointermove":j,R=A?"pointerup pointercancel":L,He="ready",fe="resize",pt="wheel",xt="zoom",Ns="image/jpeg",un=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,xr=/^data:/,dn=/^data:image\/jpeg;base64,/,Cr=/^img|canvas$/i,hn={viewMode:0,dragMode:_e,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},zi='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Pr=Number.isNaN||g.isNaN;function Ae(x){return typeof x=="number"&&!Pr(x)}var Fl=function(v){return v>0&&v<1/0};function ko(x){return typeof x>"u"}function ss(x){return s(x)==="object"&&x!==null}var Rl=Object.prototype.hasOwnProperty;function Bs(x){if(!ss(x))return!1;try{var v=x.constructor,E=v.prototype;return v&&E&&Rl.call(E,"isPrototypeOf")}catch{return!1}}function ot(x){return typeof x=="function"}var zd=Array.prototype.slice;function ns(x){return Array.from?Array.from(x):zd.call(x)}function Ze(x,v){return x&&ot(v)&&(Array.isArray(x)||Ae(x.length)?ns(x).forEach(function(E,w){v.call(x,E,w,x)}):ss(x)&&Object.keys(x).forEach(function(E){v.call(x,x[E],E,x)})),x}var ze=Object.assign||function(v){for(var E=arguments.length,w=new Array(E>1?E-1:0),N=1;N<E;N++)w[N-1]=arguments[N];return ss(v)&&w.length>0&&w.forEach(function(_){ss(_)&&Object.keys(_).forEach(function(B){v[B]=_[B]})}),v},$d=/\.\d*(?:0|9){12}\d*$/;function zs(x){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return $d.test(x)?Math.round(x*v)/v:x}var Hd=/^width|height|left|top|marginLeft|marginTop$/;function $i(x,v){var E=x.style;Ze(v,function(w,N){Hd.test(N)&&Ae(w)&&(w="".concat(w,"px")),E[N]=w})}function Ud(x,v){return x.classList?x.classList.contains(v):x.className.indexOf(v)>-1}function at(x,v){if(v){if(Ae(x.length)){Ze(x,function(w){at(w,v)});return}if(x.classList){x.classList.add(v);return}var E=x.className.trim();E?E.indexOf(v)<0&&(x.className="".concat(E," ").concat(v)):x.className=v}}function hi(x,v){if(v){if(Ae(x.length)){Ze(x,function(E){hi(E,v)});return}if(x.classList){x.classList.remove(v);return}x.className.indexOf(v)>=0&&(x.className=x.className.replace(v,""))}}function $s(x,v,E){if(v){if(Ae(x.length)){Ze(x,function(w){$s(w,v,E)});return}E?at(x,v):hi(x,v)}}var jd=/([a-z\d])([A-Z])/g;function Hs(x){return x.replace(jd,"$1-$2").toLowerCase()}function Do(x,v){return ss(x[v])?x[v]:x.dataset?x.dataset[v]:x.getAttribute("data-".concat(Hs(v)))}function _r(x,v,E){ss(E)?x[v]=E:x.dataset?x.dataset[v]=E:x.setAttribute("data-".concat(Hs(v)),E)}function Hi(x,v){if(ss(x[v]))try{delete x[v]}catch{x[v]=void 0}else if(x.dataset)try{delete x.dataset[v]}catch{x.dataset[v]=void 0}else x.removeAttribute("data-".concat(Hs(v)))}var Io=/\s\s*/,Nl=function(){var x=!1;if(p){var v=!1,E=function(){},w=Object.defineProperty({},"once",{get:function(){return x=!0,v},set:function(_){v=_}});g.addEventListener("test",E,w),g.removeEventListener("test",E,w)}return x}();function Jt(x,v,E){var w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},N=E;v.trim().split(Io).forEach(function(_){if(!Nl){var B=x.listeners;B&&B[_]&&B[_][E]&&(N=B[_][E],delete B[_][E],Object.keys(B[_]).length===0&&delete B[_],Object.keys(B).length===0&&delete x.listeners)}x.removeEventListener(_,N,w)})}function $t(x,v,E){var w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},N=E;v.trim().split(Io).forEach(function(_){if(w.once&&!Nl){var B=x.listeners,V=B===void 0?{}:B;N=function(){delete V[_][E],x.removeEventListener(_,N,w);for(var ie=arguments.length,ee=new Array(ie),q=0;q<ie;q++)ee[q]=arguments[q];E.apply(x,ee)},V[_]||(V[_]={}),V[_][E]&&x.removeEventListener(_,V[_][E],w),V[_][E]=N,x.listeners=V}x.addEventListener(_,N,w)})}function pi(x,v,E){var w;return ot(Event)&&ot(CustomEvent)?w=new CustomEvent(v,{detail:E,bubbles:!0,cancelable:!0}):(w=document.createEvent("CustomEvent"),w.initCustomEvent(v,!0,!0,E)),x.dispatchEvent(w)}function rs(x){var v=x.getBoundingClientRect();return{left:v.left+(window.pageXOffset-document.documentElement.clientLeft),top:v.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ui=g.location,Or=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Bl(x){var v=x.match(Or);return v!==null&&(v[1]!==Ui.protocol||v[2]!==Ui.hostname||v[3]!==Ui.port)}function Mr(x){var v="timestamp=".concat(new Date().getTime());return x+(x.indexOf("?")===-1?"?":"&")+v}function pn(x){var v=x.rotate,E=x.scaleX,w=x.scaleY,N=x.translateX,_=x.translateY,B=[];Ae(N)&&N!==0&&B.push("translateX(".concat(N,"px)")),Ae(_)&&_!==0&&B.push("translateY(".concat(_,"px)")),Ae(v)&&v!==0&&B.push("rotate(".concat(v,"deg)")),Ae(E)&&E!==1&&B.push("scaleX(".concat(E,")")),Ae(w)&&w!==1&&B.push("scaleY(".concat(w,")"));var V=B.length?B.join(" "):"none";return{WebkitTransform:V,msTransform:V,transform:V}}function Vd(x){var v=o({},x),E=[];return Ze(x,function(w,N){delete v[N],Ze(v,function(_){var B=Math.abs(w.startX-_.startX),V=Math.abs(w.startY-_.startY),ne=Math.abs(w.endX-_.endX),ie=Math.abs(w.endY-_.endY),ee=Math.sqrt(B*B+V*V),q=Math.sqrt(ne*ne+ie*ie),se=(q-ee)/ee;E.push(se)})}),E.sort(function(w,N){return Math.abs(w)<Math.abs(N)}),E[0]}function Lr(x,v){var E=x.pageX,w=x.pageY,N={endX:E,endY:w};return v?N:o({startX:E,startY:w},N)}function qd(x){var v=0,E=0,w=0;return Ze(x,function(N){var _=N.startX,B=N.startY;v+=_,E+=B,w+=1}),v/=w,E/=w,{pageX:v,pageY:E}}function ji(x){var v=x.aspectRatio,E=x.height,w=x.width,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",_=Fl(w),B=Fl(E);if(_&&B){var V=E*v;N==="contain"&&V>w||N==="cover"&&V<w?E=w/v:w=E*v}else _?E=w/v:B&&(w=E*v);return{width:w,height:E}}function Wd(x){var v=x.width,E=x.height,w=x.degree;if(w=Math.abs(w)%180,w===90)return{width:E,height:v};var N=w%90*Math.PI/180,_=Math.sin(N),B=Math.cos(N),V=v*B+E*_,ne=v*_+E*B;return w>90?{width:ne,height:V}:{width:V,height:ne}}function zl(x,v,E,w){var N=v.aspectRatio,_=v.naturalWidth,B=v.naturalHeight,V=v.rotate,ne=V===void 0?0:V,ie=v.scaleX,ee=ie===void 0?1:ie,q=v.scaleY,se=q===void 0?1:q,we=E.aspectRatio,Te=E.naturalWidth,$e=E.naturalHeight,Le=w.fillColor,it=Le===void 0?"transparent":Le,lt=w.imageSmoothingEnabled,Qe=lt===void 0?!0:lt,Zt=w.imageSmoothingQuality,Mt=Zt===void 0?"low":Zt,le=w.maxWidth,xe=le===void 0?1/0:le,et=w.maxHeight,Qt=et===void 0?1/0:et,yt=w.minWidth,Pi=yt===void 0?0:yt,os=w.minHeight,_i=os===void 0?0:os,fi=document.createElement("canvas"),wt=fi.getContext("2d"),as=ji({aspectRatio:we,width:xe,height:Qt}),kr=ji({aspectRatio:we,width:Pi,height:_i},"cover"),Fo=Math.min(as.width,Math.max(kr.width,Te)),Ro=Math.min(as.height,Math.max(kr.height,$e)),jl=ji({aspectRatio:N,width:xe,height:Qt}),No=ji({aspectRatio:N,width:Pi,height:_i},"cover"),Bo=Math.min(jl.width,Math.max(No.width,_)),Vl=Math.min(jl.height,Math.max(No.height,B)),Us=[-Bo/2,-Vl/2,Bo,Vl];return fi.width=zs(Fo),fi.height=zs(Ro),wt.fillStyle=it,wt.fillRect(0,0,Fo,Ro),wt.save(),wt.translate(Fo/2,Ro/2),wt.rotate(ne*Math.PI/180),wt.scale(ee,se),wt.imageSmoothingEnabled=Qe,wt.imageSmoothingQuality=Mt,wt.drawImage.apply(wt,[x].concat(a(Us.map(function(nh){return Math.floor(zs(nh))})))),wt.restore(),fi}var fn=String.fromCharCode;function Gd(x,v,E){var w="";E+=v;for(var N=v;N<E;N+=1)w+=fn(x.getUint8(N));return w}var Yd=/^data:.*,/;function Xd(x){var v=x.replace(Yd,""),E=atob(v),w=new ArrayBuffer(E.length),N=new Uint8Array(w);return Ze(N,function(_,B){N[B]=E.charCodeAt(B)}),w}function Kd(x,v){for(var E=[],w=8192,N=new Uint8Array(x);N.length>0;)E.push(fn.apply(null,ns(N.subarray(0,w)))),N=N.subarray(w);return"data:".concat(v,";base64,").concat(btoa(E.join("")))}function Jd(x){var v=new DataView(x),E;try{var w,N,_;if(v.getUint8(0)===255&&v.getUint8(1)===216)for(var B=v.byteLength,V=2;V+1<B;){if(v.getUint8(V)===255&&v.getUint8(V+1)===225){N=V;break}V+=1}if(N){var ne=N+4,ie=N+10;if(Gd(v,ne,4)==="Exif"){var ee=v.getUint16(ie);if(w=ee===18761,(w||ee===19789)&&v.getUint16(ie+2,w)===42){var q=v.getUint32(ie+4,w);q>=8&&(_=ie+q)}}}if(_){var se=v.getUint16(_,w),we,Te;for(Te=0;Te<se;Te+=1)if(we=_+Te*12+2,v.getUint16(we,w)===274){we+=8,E=v.getUint16(we,w),v.setUint16(we,1,w);break}}}catch{E=1}return E}function $l(x){var v=0,E=1,w=1;switch(x){case 2:E=-1;break;case 3:v=-180;break;case 4:w=-1;break;case 5:v=90,w=-1;break;case 6:v=90;break;case 7:v=90,E=-1;break;case 8:v=-90;break}return{rotate:v,scaleX:E,scaleY:w}}var Hl={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var v=this.element,E=this.options,w=this.container,N=this.cropper;at(N,T),hi(v,T);var _={width:Math.max(w.offsetWidth,Number(E.minContainerWidth)||200),height:Math.max(w.offsetHeight,Number(E.minContainerHeight)||100)};this.containerData=_,$i(N,{width:_.width,height:_.height}),at(v,T),hi(N,T)},initCanvas:function(){var v=this.containerData,E=this.imageData,w=this.options.viewMode,N=Math.abs(E.rotate)%180===90,_=N?E.naturalHeight:E.naturalWidth,B=N?E.naturalWidth:E.naturalHeight,V=_/B,ne=v.width,ie=v.height;v.height*V>v.width?w===3?ne=v.height*V:ie=v.width/V:w===3?ie=v.width/V:ne=v.height*V;var ee={aspectRatio:V,naturalWidth:_,naturalHeight:B,width:ne,height:ie};ee.left=(v.width-ne)/2,ee.top=(v.height-ie)/2,ee.oldLeft=ee.left,ee.oldTop=ee.top,this.canvasData=ee,this.limited=w===1||w===2,this.limitCanvas(!0,!0),this.initialImageData=ze({},E),this.initialCanvasData=ze({},ee)},limitCanvas:function(v,E){var w=this.options,N=this.containerData,_=this.canvasData,B=this.cropBoxData,V=w.viewMode,ne=_.aspectRatio,ie=this.cropped&&B;if(v){var ee=Number(w.minCanvasWidth)||0,q=Number(w.minCanvasHeight)||0;V>1?(ee=Math.max(ee,N.width),q=Math.max(q,N.height),V===3&&(q*ne>ee?ee=q*ne:q=ee/ne)):V>0&&(ee?ee=Math.max(ee,ie?B.width:0):q?q=Math.max(q,ie?B.height:0):ie&&(ee=B.width,q=B.height,q*ne>ee?ee=q*ne:q=ee/ne));var se=ji({aspectRatio:ne,width:ee,height:q});ee=se.width,q=se.height,_.minWidth=ee,_.minHeight=q,_.maxWidth=1/0,_.maxHeight=1/0}if(E)if(V>(ie?0:1)){var we=N.width-_.width,Te=N.height-_.height;_.minLeft=Math.min(0,we),_.minTop=Math.min(0,Te),_.maxLeft=Math.max(0,we),_.maxTop=Math.max(0,Te),ie&&this.limited&&(_.minLeft=Math.min(B.left,B.left+(B.width-_.width)),_.minTop=Math.min(B.top,B.top+(B.height-_.height)),_.maxLeft=B.left,_.maxTop=B.top,V===2&&(_.width>=N.width&&(_.minLeft=Math.min(0,we),_.maxLeft=Math.max(0,we)),_.height>=N.height&&(_.minTop=Math.min(0,Te),_.maxTop=Math.max(0,Te))))}else _.minLeft=-_.width,_.minTop=-_.height,_.maxLeft=N.width,_.maxTop=N.height},renderCanvas:function(v,E){var w=this.canvasData,N=this.imageData;if(E){var _=Wd({width:N.naturalWidth*Math.abs(N.scaleX||1),height:N.naturalHeight*Math.abs(N.scaleY||1),degree:N.rotate||0}),B=_.width,V=_.height,ne=w.width*(B/w.naturalWidth),ie=w.height*(V/w.naturalHeight);w.left-=(ne-w.width)/2,w.top-=(ie-w.height)/2,w.width=ne,w.height=ie,w.aspectRatio=B/V,w.naturalWidth=B,w.naturalHeight=V,this.limitCanvas(!0,!1)}(w.width>w.maxWidth||w.width<w.minWidth)&&(w.left=w.oldLeft),(w.height>w.maxHeight||w.height<w.minHeight)&&(w.top=w.oldTop),w.width=Math.min(Math.max(w.width,w.minWidth),w.maxWidth),w.height=Math.min(Math.max(w.height,w.minHeight),w.maxHeight),this.limitCanvas(!1,!0),w.left=Math.min(Math.max(w.left,w.minLeft),w.maxLeft),w.top=Math.min(Math.max(w.top,w.minTop),w.maxTop),w.oldLeft=w.left,w.oldTop=w.top,$i(this.canvas,ze({width:w.width,height:w.height},pn({translateX:w.left,translateY:w.top}))),this.renderImage(v),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(v){var E=this.canvasData,w=this.imageData,N=w.naturalWidth*(E.width/E.naturalWidth),_=w.naturalHeight*(E.height/E.naturalHeight);ze(w,{width:N,height:_,left:(E.width-N)/2,top:(E.height-_)/2}),$i(this.image,ze({width:w.width,height:w.height},pn(ze({translateX:w.left,translateY:w.top},w)))),v&&this.output()},initCropBox:function(){var v=this.options,E=this.canvasData,w=v.aspectRatio||v.initialAspectRatio,N=Number(v.autoCropArea)||.8,_={width:E.width,height:E.height};w&&(E.height*w>E.width?_.height=_.width/w:_.width=_.height*w),this.cropBoxData=_,this.limitCropBox(!0,!0),_.width=Math.min(Math.max(_.width,_.minWidth),_.maxWidth),_.height=Math.min(Math.max(_.height,_.minHeight),_.maxHeight),_.width=Math.max(_.minWidth,_.width*N),_.height=Math.max(_.minHeight,_.height*N),_.left=E.left+(E.width-_.width)/2,_.top=E.top+(E.height-_.height)/2,_.oldLeft=_.left,_.oldTop=_.top,this.initialCropBoxData=ze({},_)},limitCropBox:function(v,E){var w=this.options,N=this.containerData,_=this.canvasData,B=this.cropBoxData,V=this.limited,ne=w.aspectRatio;if(v){var ie=Number(w.minCropBoxWidth)||0,ee=Number(w.minCropBoxHeight)||0,q=V?Math.min(N.width,_.width,_.width+_.left,N.width-_.left):N.width,se=V?Math.min(N.height,_.height,_.height+_.top,N.height-_.top):N.height;ie=Math.min(ie,N.width),ee=Math.min(ee,N.height),ne&&(ie&&ee?ee*ne>ie?ee=ie/ne:ie=ee*ne:ie?ee=ie/ne:ee&&(ie=ee*ne),se*ne>q?se=q/ne:q=se*ne),B.minWidth=Math.min(ie,q),B.minHeight=Math.min(ee,se),B.maxWidth=q,B.maxHeight=se}E&&(V?(B.minLeft=Math.max(0,_.left),B.minTop=Math.max(0,_.top),B.maxLeft=Math.min(N.width,_.left+_.width)-B.width,B.maxTop=Math.min(N.height,_.top+_.height)-B.height):(B.minLeft=0,B.minTop=0,B.maxLeft=N.width-B.width,B.maxTop=N.height-B.height))},renderCropBox:function(){var v=this.options,E=this.containerData,w=this.cropBoxData;(w.width>w.maxWidth||w.width<w.minWidth)&&(w.left=w.oldLeft),(w.height>w.maxHeight||w.height<w.minHeight)&&(w.top=w.oldTop),w.width=Math.min(Math.max(w.width,w.minWidth),w.maxWidth),w.height=Math.min(Math.max(w.height,w.minHeight),w.maxHeight),this.limitCropBox(!1,!0),w.left=Math.min(Math.max(w.left,w.minLeft),w.maxLeft),w.top=Math.min(Math.max(w.top,w.minTop),w.maxTop),w.oldLeft=w.left,w.oldTop=w.top,v.movable&&v.cropBoxMovable&&_r(this.face,re,w.width>=E.width&&w.height>=E.height?F:O),$i(this.cropBox,ze({width:w.width,height:w.height},pn({translateX:w.left,translateY:w.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),pi(this.element,Se,this.getData())}},Zd={initPreview:function(){var v=this.element,E=this.crossOrigin,w=this.options.preview,N=E?this.crossOriginUrl:this.url,_=v.alt||"The image to preview",B=document.createElement("img");if(E&&(B.crossOrigin=E),B.src=N,B.alt=_,this.viewBox.appendChild(B),this.viewBoxImage=B,!!w){var V=w;typeof w=="string"?V=v.ownerDocument.querySelectorAll(w):w.querySelector&&(V=[w]),this.previews=V,Ze(V,function(ne){var ie=document.createElement("img");_r(ne,ve,{width:ne.offsetWidth,height:ne.offsetHeight,html:ne.innerHTML}),E&&(ie.crossOrigin=E),ie.src=N,ie.alt=_,ie.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',ne.innerHTML="",ne.appendChild(ie)})}},resetPreview:function(){Ze(this.previews,function(v){var E=Do(v,ve);$i(v,{width:E.width,height:E.height}),v.innerHTML=E.html,Hi(v,ve)})},preview:function(){var v=this.imageData,E=this.canvasData,w=this.cropBoxData,N=w.width,_=w.height,B=v.width,V=v.height,ne=w.left-E.left-v.left,ie=w.top-E.top-v.top;!this.cropped||this.disabled||($i(this.viewBoxImage,ze({width:B,height:V},pn(ze({translateX:-ne,translateY:-ie},v)))),Ze(this.previews,function(ee){var q=Do(ee,ve),se=q.width,we=q.height,Te=se,$e=we,Le=1;N&&(Le=se/N,$e=_*Le),_&&$e>we&&(Le=we/_,Te=N*Le,$e=we),$i(ee,{width:Te,height:$e}),$i(ee.getElementsByTagName("img")[0],ze({width:B*Le,height:V*Le},pn(ze({translateX:-ne*Le,translateY:-ie*Le},v))))}))}},Qd={bind:function(){var v=this.element,E=this.options,w=this.cropper;ot(E.cropstart)&&$t(v,X,E.cropstart),ot(E.cropmove)&&$t(v,Je,E.cropmove),ot(E.cropend)&&$t(v,Be,E.cropend),ot(E.crop)&&$t(v,Se,E.crop),ot(E.zoom)&&$t(v,xt,E.zoom),$t(w,P,this.onCropStart=this.cropStart.bind(this)),E.zoomable&&E.zoomOnWheel&&$t(w,pt,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),E.toggleDragModeOnDblclick&&$t(w,Pe,this.onDblclick=this.dblclick.bind(this)),$t(v.ownerDocument,z,this.onCropMove=this.cropMove.bind(this)),$t(v.ownerDocument,R,this.onCropEnd=this.cropEnd.bind(this)),E.responsive&&$t(window,fe,this.onResize=this.resize.bind(this))},unbind:function(){var v=this.element,E=this.options,w=this.cropper;ot(E.cropstart)&&Jt(v,X,E.cropstart),ot(E.cropmove)&&Jt(v,Je,E.cropmove),ot(E.cropend)&&Jt(v,Be,E.cropend),ot(E.crop)&&Jt(v,Se,E.crop),ot(E.zoom)&&Jt(v,xt,E.zoom),Jt(w,P,this.onCropStart),E.zoomable&&E.zoomOnWheel&&Jt(w,pt,this.onWheel,{passive:!1,capture:!0}),E.toggleDragModeOnDblclick&&Jt(w,Pe,this.onDblclick),Jt(v.ownerDocument,z,this.onCropMove),Jt(v.ownerDocument,R,this.onCropEnd),E.responsive&&Jt(window,fe,this.onResize)}},eh={resize:function(){if(!this.disabled){var v=this.options,E=this.container,w=this.containerData,N=E.offsetWidth/w.width;if(N!==1||E.offsetHeight!==w.height){var _,B;v.restore&&(_=this.getCanvasData(),B=this.getCropBoxData()),this.render(),v.restore&&(this.setCanvasData(Ze(_,function(V,ne){_[ne]=V*N})),this.setCropBoxData(Ze(B,function(V,ne){B[ne]=V*N})))}}},dblclick:function(){this.disabled||this.options.dragMode===Ke||this.setDragMode(Ud(this.dragBox,te)?Ne:_e)},wheel:function(v){var E=this,w=Number(this.options.wheelZoomRatio)||.1,N=1;this.disabled||(v.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){E.wheeling=!1},50),v.deltaY?N=v.deltaY>0?1:-1:v.wheelDelta?N=-v.wheelDelta/120:v.detail&&(N=v.detail>0?1:-1),this.zoom(-N*w,v)))},cropStart:function(v){var E=v.buttons,w=v.button;if(!(this.disabled||(v.type==="mousedown"||v.type==="pointerdown"&&v.pointerType==="mouse")&&(Ae(E)&&E!==1||Ae(w)&&w!==0||v.ctrlKey))){var N=this.options,_=this.pointers,B;v.changedTouches?Ze(v.changedTouches,function(V){_[V.identifier]=Lr(V)}):_[v.pointerId||0]=Lr(v),Object.keys(_).length>1&&N.zoomable&&N.zoomOnTouch?B=H:B=Do(v.target,re),un.test(B)&&pi(this.element,X,{originalEvent:v,action:B})!==!1&&(v.preventDefault(),this.action=B,this.cropping=!1,B===I&&(this.cropping=!0,at(this.dragBox,K)))}},cropMove:function(v){var E=this.action;if(!(this.disabled||!E)){var w=this.pointers;v.preventDefault(),pi(this.element,Je,{originalEvent:v,action:E})!==!1&&(v.changedTouches?Ze(v.changedTouches,function(N){ze(w[N.identifier]||{},Lr(N,!0))}):ze(w[v.pointerId||0]||{},Lr(v,!0)),this.change(v))}},cropEnd:function(v){if(!this.disabled){var E=this.action,w=this.pointers;v.changedTouches?Ze(v.changedTouches,function(N){delete w[N.identifier]}):delete w[v.pointerId||0],E&&(v.preventDefault(),Object.keys(w).length||(this.action=""),this.cropping&&(this.cropping=!1,$s(this.dragBox,K,this.cropped&&this.options.modal)),pi(this.element,Be,{originalEvent:v,action:E}))}}},th={change:function(v){var E=this.options,w=this.canvasData,N=this.containerData,_=this.cropBoxData,B=this.pointers,V=this.action,ne=E.aspectRatio,ie=_.left,ee=_.top,q=_.width,se=_.height,we=ie+q,Te=ee+se,$e=0,Le=0,it=N.width,lt=N.height,Qe=!0,Zt;!ne&&v.shiftKey&&(ne=q&&se?q/se:1),this.limited&&($e=_.minLeft,Le=_.minTop,it=$e+Math.min(N.width,w.width,w.left+w.width),lt=Le+Math.min(N.height,w.height,w.top+w.height));var Mt=B[Object.keys(B)[0]],le={x:Mt.endX-Mt.startX,y:Mt.endY-Mt.startY},xe=function(Qt){switch(Qt){case U:we+le.x>it&&(le.x=it-we);break;case W:ie+le.x<$e&&(le.x=$e-ie);break;case oe:ee+le.y<Le&&(le.y=Le-ee);break;case J:Te+le.y>lt&&(le.y=lt-Te);break}};switch(V){case O:ie+=le.x,ee+=le.y;break;case U:if(le.x>=0&&(we>=it||ne&&(ee<=Le||Te>=lt))){Qe=!1;break}xe(U),q+=le.x,q<0&&(V=W,q=-q,ie-=q),ne&&(se=q/ne,ee+=(_.height-se)/2);break;case oe:if(le.y<=0&&(ee<=Le||ne&&(ie<=$e||we>=it))){Qe=!1;break}xe(oe),se-=le.y,ee+=le.y,se<0&&(V=J,se=-se,ee-=se),ne&&(q=se*ne,ie+=(_.width-q)/2);break;case W:if(le.x<=0&&(ie<=$e||ne&&(ee<=Le||Te>=lt))){Qe=!1;break}xe(W),q-=le.x,ie+=le.x,q<0&&(V=U,q=-q,ie-=q),ne&&(se=q/ne,ee+=(_.height-se)/2);break;case J:if(le.y>=0&&(Te>=lt||ne&&(ie<=$e||we>=it))){Qe=!1;break}xe(J),se+=le.y,se<0&&(V=oe,se=-se,ee-=se),ne&&(q=se*ne,ie+=(_.width-q)/2);break;case G:if(ne){if(le.y<=0&&(ee<=Le||we>=it)){Qe=!1;break}xe(oe),se-=le.y,ee+=le.y,q=se*ne}else xe(oe),xe(U),le.x>=0?we<it?q+=le.x:le.y<=0&&ee<=Le&&(Qe=!1):q+=le.x,le.y<=0?ee>Le&&(se-=le.y,ee+=le.y):(se-=le.y,ee+=le.y);q<0&&se<0?(V=ue,se=-se,q=-q,ee-=se,ie-=q):q<0?(V=ae,q=-q,ie-=q):se<0&&(V=pe,se=-se,ee-=se);break;case ae:if(ne){if(le.y<=0&&(ee<=Le||ie<=$e)){Qe=!1;break}xe(oe),se-=le.y,ee+=le.y,q=se*ne,ie+=_.width-q}else xe(oe),xe(W),le.x<=0?ie>$e?(q-=le.x,ie+=le.x):le.y<=0&&ee<=Le&&(Qe=!1):(q-=le.x,ie+=le.x),le.y<=0?ee>Le&&(se-=le.y,ee+=le.y):(se-=le.y,ee+=le.y);q<0&&se<0?(V=pe,se=-se,q=-q,ee-=se,ie-=q):q<0?(V=G,q=-q,ie-=q):se<0&&(V=ue,se=-se,ee-=se);break;case ue:if(ne){if(le.x<=0&&(ie<=$e||Te>=lt)){Qe=!1;break}xe(W),q-=le.x,ie+=le.x,se=q/ne}else xe(J),xe(W),le.x<=0?ie>$e?(q-=le.x,ie+=le.x):le.y>=0&&Te>=lt&&(Qe=!1):(q-=le.x,ie+=le.x),le.y>=0?Te<lt&&(se+=le.y):se+=le.y;q<0&&se<0?(V=G,se=-se,q=-q,ee-=se,ie-=q):q<0?(V=pe,q=-q,ie-=q):se<0&&(V=ae,se=-se,ee-=se);break;case pe:if(ne){if(le.x>=0&&(we>=it||Te>=lt)){Qe=!1;break}xe(U),q+=le.x,se=q/ne}else xe(J),xe(U),le.x>=0?we<it?q+=le.x:le.y>=0&&Te>=lt&&(Qe=!1):q+=le.x,le.y>=0?Te<lt&&(se+=le.y):se+=le.y;q<0&&se<0?(V=ae,se=-se,q=-q,ee-=se,ie-=q):q<0?(V=ue,q=-q,ie-=q):se<0&&(V=G,se=-se,ee-=se);break;case F:this.move(le.x,le.y),Qe=!1;break;case H:this.zoom(Vd(B),v),Qe=!1;break;case I:if(!le.x||!le.y){Qe=!1;break}Zt=rs(this.cropper),ie=Mt.startX-Zt.left,ee=Mt.startY-Zt.top,q=_.minWidth,se=_.minHeight,le.x>0?V=le.y>0?pe:G:le.x<0&&(ie-=q,V=le.y>0?ue:ae),le.y<0&&(ee-=se),this.cropped||(hi(this.cropBox,T),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}Qe&&(_.width=q,_.height=se,_.left=ie,_.top=ee,this.action=V,this.renderCropBox()),Ze(B,function(et){et.startX=et.endX,et.startY=et.endY})}},ih={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&at(this.dragBox,K),hi(this.cropBox,T),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=ze({},this.initialImageData),this.canvasData=ze({},this.initialCanvasData),this.cropBoxData=ze({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(ze(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),hi(this.dragBox,K),at(this.cropBox,T)),this},replace:function(v){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&v&&(this.isImg&&(this.element.src=v),E?(this.url=v,this.image.src=v,this.ready&&(this.viewBoxImage.src=v,Ze(this.previews,function(w){w.getElementsByTagName("img")[0].src=v}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(v))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,hi(this.cropper,$)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,at(this.cropper,$)),this},destroy:function(){var v=this.element;return v[S]?(v[S]=void 0,this.isImg&&this.replaced&&(v.src=this.originalUrl),this.uncreate(),this):this},move:function(v){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v,w=this.canvasData,N=w.left,_=w.top;return this.moveTo(ko(v)?v:N+Number(v),ko(E)?E:_+Number(E))},moveTo:function(v){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v,w=this.canvasData,N=!1;return v=Number(v),E=Number(E),this.ready&&!this.disabled&&this.options.movable&&(Ae(v)&&(w.left=v,N=!0),Ae(E)&&(w.top=E,N=!0),N&&this.renderCanvas(!0)),this},zoom:function(v,E){var w=this.canvasData;return v=Number(v),v<0?v=1/(1-v):v=1+v,this.zoomTo(w.width*v/w.naturalWidth,null,E)},zoomTo:function(v,E,w){var N=this.options,_=this.canvasData,B=_.width,V=_.height,ne=_.naturalWidth,ie=_.naturalHeight;if(v=Number(v),v>=0&&this.ready&&!this.disabled&&N.zoomable){var ee=ne*v,q=ie*v;if(pi(this.element,xt,{ratio:v,oldRatio:B/ne,originalEvent:w})===!1)return this;if(w){var se=this.pointers,we=rs(this.cropper),Te=se&&Object.keys(se).length?qd(se):{pageX:w.pageX,pageY:w.pageY};_.left-=(ee-B)*((Te.pageX-we.left-_.left)/B),_.top-=(q-V)*((Te.pageY-we.top-_.top)/V)}else Bs(E)&&Ae(E.x)&&Ae(E.y)?(_.left-=(ee-B)*((E.x-_.left)/B),_.top-=(q-V)*((E.y-_.top)/V)):(_.left-=(ee-B)/2,_.top-=(q-V)/2);_.width=ee,_.height=q,this.renderCanvas(!0)}return this},rotate:function(v){return this.rotateTo((this.imageData.rotate||0)+Number(v))},rotateTo:function(v){return v=Number(v),Ae(v)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=v%360,this.renderCanvas(!0,!0)),this},scaleX:function(v){var E=this.imageData.scaleY;return this.scale(v,Ae(E)?E:1)},scaleY:function(v){var E=this.imageData.scaleX;return this.scale(Ae(E)?E:1,v)},scale:function(v){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v,w=this.imageData,N=!1;return v=Number(v),E=Number(E),this.ready&&!this.disabled&&this.options.scalable&&(Ae(v)&&(w.scaleX=v,N=!0),Ae(E)&&(w.scaleY=E,N=!0),N&&this.renderCanvas(!0,!0)),this},getData:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,E=this.options,w=this.imageData,N=this.canvasData,_=this.cropBoxData,B;if(this.ready&&this.cropped){B={x:_.left-N.left,y:_.top-N.top,width:_.width,height:_.height};var V=w.width/w.naturalWidth;if(Ze(B,function(ee,q){B[q]=ee/V}),v){var ne=Math.round(B.y+B.height),ie=Math.round(B.x+B.width);B.x=Math.round(B.x),B.y=Math.round(B.y),B.width=ie-B.x,B.height=ne-B.y}}else B={x:0,y:0,width:0,height:0};return E.rotatable&&(B.rotate=w.rotate||0),E.scalable&&(B.scaleX=w.scaleX||1,B.scaleY=w.scaleY||1),B},setData:function(v){var E=this.options,w=this.imageData,N=this.canvasData,_={};if(this.ready&&!this.disabled&&Bs(v)){var B=!1;E.rotatable&&Ae(v.rotate)&&v.rotate!==w.rotate&&(w.rotate=v.rotate,B=!0),E.scalable&&(Ae(v.scaleX)&&v.scaleX!==w.scaleX&&(w.scaleX=v.scaleX,B=!0),Ae(v.scaleY)&&v.scaleY!==w.scaleY&&(w.scaleY=v.scaleY,B=!0)),B&&this.renderCanvas(!0,!0);var V=w.width/w.naturalWidth;Ae(v.x)&&(_.left=v.x*V+N.left),Ae(v.y)&&(_.top=v.y*V+N.top),Ae(v.width)&&(_.width=v.width*V),Ae(v.height)&&(_.height=v.height*V),this.setCropBoxData(_)}return this},getContainerData:function(){return this.ready?ze({},this.containerData):{}},getImageData:function(){return this.sized?ze({},this.imageData):{}},getCanvasData:function(){var v=this.canvasData,E={};return this.ready&&Ze(["left","top","width","height","naturalWidth","naturalHeight"],function(w){E[w]=v[w]}),E},setCanvasData:function(v){var E=this.canvasData,w=E.aspectRatio;return this.ready&&!this.disabled&&Bs(v)&&(Ae(v.left)&&(E.left=v.left),Ae(v.top)&&(E.top=v.top),Ae(v.width)?(E.width=v.width,E.height=v.width/w):Ae(v.height)&&(E.height=v.height,E.width=v.height*w),this.renderCanvas(!0)),this},getCropBoxData:function(){var v=this.cropBoxData,E;return this.ready&&this.cropped&&(E={left:v.left,top:v.top,width:v.width,height:v.height}),E||{}},setCropBoxData:function(v){var E=this.cropBoxData,w=this.options.aspectRatio,N,_;return this.ready&&this.cropped&&!this.disabled&&Bs(v)&&(Ae(v.left)&&(E.left=v.left),Ae(v.top)&&(E.top=v.top),Ae(v.width)&&v.width!==E.width&&(N=!0,E.width=v.width),Ae(v.height)&&v.height!==E.height&&(_=!0,E.height=v.height),w&&(N?E.height=E.width/w:_&&(E.width=E.height*w)),this.renderCropBox()),this},getCroppedCanvas:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var E=this.canvasData,w=zl(this.image,this.imageData,E,v);if(!this.cropped)return w;var N=this.getData(),_=N.x,B=N.y,V=N.width,ne=N.height,ie=w.width/Math.floor(E.naturalWidth);ie!==1&&(_*=ie,B*=ie,V*=ie,ne*=ie);var ee=V/ne,q=ji({aspectRatio:ee,width:v.maxWidth||1/0,height:v.maxHeight||1/0}),se=ji({aspectRatio:ee,width:v.minWidth||0,height:v.minHeight||0},"cover"),we=ji({aspectRatio:ee,width:v.width||(ie!==1?w.width:V),height:v.height||(ie!==1?w.height:ne)}),Te=we.width,$e=we.height;Te=Math.min(q.width,Math.max(se.width,Te)),$e=Math.min(q.height,Math.max(se.height,$e));var Le=document.createElement("canvas"),it=Le.getContext("2d");Le.width=zs(Te),Le.height=zs($e),it.fillStyle=v.fillColor||"transparent",it.fillRect(0,0,Te,$e);var lt=v.imageSmoothingEnabled,Qe=lt===void 0?!0:lt,Zt=v.imageSmoothingQuality;it.imageSmoothingEnabled=Qe,Zt&&(it.imageSmoothingQuality=Zt);var Mt=w.width,le=w.height,xe=_,et=B,Qt,yt,Pi,os,_i,fi;xe<=-V||xe>Mt?(xe=0,Qt=0,Pi=0,_i=0):xe<=0?(Pi=-xe,xe=0,Qt=Math.min(Mt,V+xe),_i=Qt):xe<=Mt&&(Pi=0,Qt=Math.min(V,Mt-xe),_i=Qt),Qt<=0||et<=-ne||et>le?(et=0,yt=0,os=0,fi=0):et<=0?(os=-et,et=0,yt=Math.min(le,ne+et),fi=yt):et<=le&&(os=0,yt=Math.min(ne,le-et),fi=yt);var wt=[xe,et,Qt,yt];if(_i>0&&fi>0){var as=Te/V;wt.push(Pi*as,os*as,_i*as,fi*as)}return it.drawImage.apply(it,[w].concat(a(wt.map(function(kr){return Math.floor(zs(kr))})))),Le},setAspectRatio:function(v){var E=this.options;return!this.disabled&&!ko(v)&&(E.aspectRatio=Math.max(0,v)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(v){var E=this.options,w=this.dragBox,N=this.face;if(this.ready&&!this.disabled){var _=v===_e,B=E.movable&&v===Ne;v=_||B?v:Ke,E.dragMode=v,_r(w,re,v),$s(w,te,_),$s(w,Z,B),E.cropBoxMovable||(_r(N,re,v),$s(N,te,_),$s(N,Z,B))}return this}},sh=g.Cropper,Ul=function(){function x(v){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e(this,x),!v||!Cr.test(v.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=v,this.options=ze({},hn,Bs(E)&&E),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return i(x,[{key:"init",value:function(){var E=this.element,w=E.tagName.toLowerCase(),N;if(!E[S]){if(E[S]=this,w==="img"){if(this.isImg=!0,N=E.getAttribute("src")||"",this.originalUrl=N,!N)return;N=E.src}else w==="canvas"&&window.HTMLCanvasElement&&(N=E.toDataURL());this.load(N)}}},{key:"load",value:function(E){var w=this;if(E){this.url=E,this.imageData={};var N=this.element,_=this.options;if(!_.rotatable&&!_.scalable&&(_.checkOrientation=!1),!_.checkOrientation||!window.ArrayBuffer){this.clone();return}if(xr.test(E)){dn.test(E)?this.read(Xd(E)):this.clone();return}var B=new XMLHttpRequest,V=this.clone.bind(this);this.reloading=!0,this.xhr=B,B.onabort=V,B.onerror=V,B.ontimeout=V,B.onprogress=function(){B.getResponseHeader("content-type")!==Ns&&B.abort()},B.onload=function(){w.read(B.response)},B.onloadend=function(){w.reloading=!1,w.xhr=null},_.checkCrossOrigin&&Bl(E)&&N.crossOrigin&&(E=Mr(E)),B.open("GET",E),B.responseType="arraybuffer",B.withCredentials=N.crossOrigin==="use-credentials",B.send()}}},{key:"read",value:function(E){var w=this.options,N=this.imageData,_=Jd(E),B=0,V=1,ne=1;if(_>1){this.url=Kd(E,Ns);var ie=$l(_);B=ie.rotate,V=ie.scaleX,ne=ie.scaleY}w.rotatable&&(N.rotate=B),w.scalable&&(N.scaleX=V,N.scaleY=ne),this.clone()}},{key:"clone",value:function(){var E=this.element,w=this.url,N=E.crossOrigin,_=w;this.options.checkCrossOrigin&&Bl(w)&&(N||(N="anonymous"),_=Mr(w)),this.crossOrigin=N,this.crossOriginUrl=_;var B=document.createElement("img");N&&(B.crossOrigin=N),B.src=_||w,B.alt=E.alt||"The image to crop",this.image=B,B.onload=this.start.bind(this),B.onerror=this.stop.bind(this),at(B,D),E.parentNode.insertBefore(B,E.nextSibling)}},{key:"start",value:function(){var E=this,w=this.image;w.onload=null,w.onerror=null,this.sizing=!0;var N=g.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(g.navigator.userAgent),_=function(ie,ee){ze(E.imageData,{naturalWidth:ie,naturalHeight:ee,aspectRatio:ie/ee}),E.sizing=!1,E.sized=!0,E.build()};if(w.naturalWidth&&!N){_(w.naturalWidth,w.naturalHeight);return}var B=document.createElement("img"),V=document.body||document.documentElement;this.sizingImage=B,B.onload=function(){_(B.width,B.height),N||V.removeChild(B)},B.src=w.src,N||(B.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",V.appendChild(B))}},{key:"stop",value:function(){var E=this.image;E.onload=null,E.onerror=null,E.parentNode.removeChild(E),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var E=this.element,w=this.options,N=this.image,_=E.parentNode,B=document.createElement("div");B.innerHTML=zi;var V=B.querySelector(".".concat(S,"-container")),ne=V.querySelector(".".concat(S,"-canvas")),ie=V.querySelector(".".concat(S,"-drag-box")),ee=V.querySelector(".".concat(S,"-crop-box")),q=ee.querySelector(".".concat(S,"-face"));this.container=_,this.cropper=V,this.canvas=ne,this.dragBox=ie,this.cropBox=ee,this.viewBox=V.querySelector(".".concat(S,"-view-box")),this.face=q,ne.appendChild(N),at(E,T),_.insertBefore(V,E.nextSibling),this.isImg||hi(N,D),this.initPreview(),this.bind(),w.initialAspectRatio=Math.max(0,w.initialAspectRatio)||NaN,w.aspectRatio=Math.max(0,w.aspectRatio)||NaN,w.viewMode=Math.max(0,Math.min(3,Math.round(w.viewMode)))||0,at(ee,T),w.guides||at(ee.getElementsByClassName("".concat(S,"-dashed")),T),w.center||at(ee.getElementsByClassName("".concat(S,"-center")),T),w.background&&at(V,"".concat(S,"-bg")),w.highlight||at(q,k),w.cropBoxMovable&&(at(q,Z),_r(q,re,O)),w.cropBoxResizable||(at(ee.getElementsByClassName("".concat(S,"-line")),T),at(ee.getElementsByClassName("".concat(S,"-point")),T)),this.render(),this.ready=!0,this.setDragMode(w.dragMode),w.autoCrop&&this.crop(),this.setData(w.data),ot(w.ready)&&$t(E,He,w.ready,{once:!0}),pi(E,He)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),hi(this.element,T))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=sh,x}},{key:"setDefaults",value:function(E){ze(hn,Bs(E)&&E)}}]),x}();return ze(Ul.prototype,Hl,Zd,Qd,eh,th,ih),Ul})});var Yh={};Wv(Yh,{FetchEnctype:()=>qs,FetchMethod:()=>ei,FetchRequest:()=>Gs,FetchResponse:()=>$r,FrameElement:()=>Li,FrameLoadingStyle:()=>Sn,FrameRenderer:()=>jr,PageRenderer:()=>xn,PageSnapshot:()=>vi,StreamActions:()=>Gh,StreamElement:()=>uc,StreamSourceElement:()=>dc,cache:()=>hb,clearCache:()=>vb,connectStreamSource:()=>Wo,disconnectStreamSource:()=>Go,fetch:()=>qh,fetchEnctypeFromString:()=>lb,fetchMethodFromString:()=>hc,isSafe:()=>pc,navigator:()=>pb,registerAdapter:()=>fb,renderStreamMessage:()=>gb,session:()=>Ve,setConfirmMethod:()=>yb,setFormMode:()=>wb,setProgressBarDelay:()=>bb,start:()=>Wh,visit:()=>mb});(function(s){if(typeof s.requestSubmit=="function")return;s.requestSubmit=function(i){i?(e(i,this),i.click()):(i=document.createElement("input"),i.type="submit",i.hidden=!0,this.appendChild(i),i.click(),this.removeChild(i))};function e(i,n){i instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),i.type=="submit"||t(TypeError,"The specified element is not a submit button"),i.form==n||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}function t(i,n,r){throw new i("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+n+".",r)}})(HTMLFormElement.prototype);var Zv=new WeakMap;function sx(s){let e=s instanceof Element?s:s instanceof Node?s.parentElement:null,t=e?e.closest("input, button"):null;return t?.type=="submit"?t:null}function nx(s){let e=sx(s.target);e&&e.form&&Zv.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let s=window.Event.prototype;if("SubmitEvent"in window){let e=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in e))s=e;else return}addEventListener("click",nx,!0),Object.defineProperty(s,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return Zv.get(this.target)}})})();var Sn={eager:"eager",lazy:"lazy"},Li=class s extends HTMLElement{static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return["disabled","complete","loading","src"]}constructor(){super(),this.delegate=new s.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="complete"?this.delegate.completeChanged():e=="src"?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(e){e?this.setAttribute("refresh",e):this.removeAttribute("refresh")}get loading(){return rx(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};function rx(s){switch(s.toLowerCase()){case"lazy":return Sn.lazy;default:return Sn.eager}}function mt(s){return new URL(s.toString(),document.baseURI)}function An(s){let e;if(s.hash)return s.hash.slice(1);if(e=s.href.match(/#(.*)$/))return e[1]}function jh(s,e){let t=e?.getAttribute("formaction")||s.getAttribute("action")||s.action;return mt(t)}function ox(s){return(dx(s).match(/\.[^.]*$/)||[])[0]||""}function ax(s){return!!ox(s).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}function lx(s,e){let t=hx(e);return s.href===mt(t).href||s.href.startsWith(t)}function Vs(s,e){return lx(s,e)&&ax(s)}function gh(s){let e=An(s);return e!=null?s.href.slice(0,-(e.length+1)):s.href}function Ql(s){return gh(s)}function cx(s,e){return mt(s).href==mt(e).href}function ux(s){return s.pathname.split("/").slice(1)}function dx(s){return ux(s).slice(-1)[0]}function hx(s){return px(s.origin+s.pathname)}function px(s){return s.endsWith("/")?s:s+"/"}var $r=class{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return mt(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}};function Uo(s){if(s.getAttribute("data-turbo-eval")=="false")return s;{let e=document.createElement("script"),t=Hr("csp-nonce");return t&&(e.nonce=t),e.textContent=s.textContent,e.async=!1,fx(e,s),e}}function fx(s,e){for(let{name:t,value:i}of e.attributes)s.setAttribute(t,i)}function mx(s){let e=document.createElement("template");return e.innerHTML=s,e.content}function We(s,{target:e,cancelable:t,detail:i}={}){let n=new CustomEvent(s,{cancelable:t,bubbles:!0,composed:!0,detail:i});return e&&e.isConnected?e.dispatchEvent(n):document.documentElement.dispatchEvent(n),n}function Nr(){return document.visibilityState==="hidden"?eb():Qv()}function Qv(){return new Promise(s=>requestAnimationFrame(()=>s()))}function eb(){return new Promise(s=>setTimeout(()=>s(),0))}function gx(){return Promise.resolve()}function tb(s=""){return new DOMParser().parseFromString(s,"text/html")}function ib(s,...e){let t=vx(s,e).replace(/^\n/,"").split(`
`),i=t[0].match(/^\s+/),n=i?i[0].length:0;return t.map(r=>r.slice(n)).join(`
`)}function vx(s,e){return s.reduce((t,i,n)=>{let r=e[n]==null?"":e[n];return t+i+r},"")}function Ws(){return Array.from({length:36}).map((s,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function tc(s,...e){for(let t of e.map(i=>i?.getAttribute(s)))if(typeof t=="string")return t;return null}function bx(s,...e){return e.some(t=>t&&t.hasAttribute(s))}function ic(...s){for(let e of s)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function sc(...s){for(let e of s)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function yx(s,e=2e3){return new Promise(t=>{let i=()=>{s.removeEventListener("error",i),s.removeEventListener("load",i),t()};s.addEventListener("load",i,{once:!0}),s.addEventListener("error",i,{once:!0}),setTimeout(t,e)})}function sb(s){switch(s){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function wx(s){return s=="advance"||s=="replace"||s=="restore"}function Tn(...s){let e=tc("data-turbo-action",...s);return wx(e)?e:null}function nb(s){return document.querySelector(`meta[name="${s}"]`)}function Hr(s){let e=nb(s);return e&&e.content}function Ex(s,e){let t=nb(s);return t||(t=document.createElement("meta"),t.setAttribute("name",s),document.head.appendChild(t)),t.setAttribute("content",e),t}function Br(s,e){if(s instanceof Element)return s.closest(e)||Br(s.assignedSlot||s.getRootNode()?.host,e)}function Vh(s){return!!s&&s.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof s.focus=="function"}function rb(s){return Array.from(s.querySelectorAll("[autofocus]")).find(Vh)}async function Sx(s,e){let t=e();s(),await Qv();let i=e();return[t,i]}function Ax(s){if(s.hasAttribute("target")){for(let e of document.getElementsByName(s.target))if(e instanceof HTMLIFrameElement)return!1}return!0}function Tx(s){return Br(s,"a[href]:not([target^=_]):not([download])")}function ob(s){return mt(s.getAttribute("href")||"")}function xx(s,e){let t=null;return(...i)=>{let n=()=>s.apply(this,i);clearTimeout(t),t=setTimeout(n,e)}}var vh=class extends Set{constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){let i=this.values().next().value;this.delete(i)}super.add(e)}},ab=new vh(20),Cx=window.fetch;function qh(s,e={}){let t=new Headers(e.headers||{}),i=Ws();return ab.add(i),t.append("X-Turbo-Request-Id",i),Cx(s,{...e,headers:t})}function hc(s){switch(s.toLowerCase()){case"get":return ei.get;case"post":return ei.post;case"put":return ei.put;case"patch":return ei.patch;case"delete":return ei.delete}}var ei={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function lb(s){switch(s.toLowerCase()){case qs.multipart:return qs.multipart;case qs.plain:return qs.plain;default:return qs.urlEncoded}}var qs={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},Gs=class{abortController=new AbortController;#e=e=>{};constructor(e,t,i,n=new URLSearchParams,r=null,o=qs.urlEncoded){let[a,l]=Gv(mt(i),t,n,o);this.delegate=e,this.url=a,this.target=r,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:t,headers:{...this.defaultHeaders},body:l,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=o}get method(){return this.fetchOptions.method}set method(e){let t=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,i=hc(e)||ei.get;this.url.search="";let[n,r]=Gv(this.url,i,t,this.enctype);this.url=n,this.fetchOptions.body=r,this.fetchOptions.method=i}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this);let t=await this.#t(e);try{this.delegate.requestStarted(this),t.detail.fetchRequest?this.response=t.detail.fetchRequest.response:this.response=qh(this.url.href,e);let i=await this.response;return await this.receive(i)}catch(i){if(i.name!=="AbortError")throw this.#i(i)&&this.delegate.requestErrored(this,i),i}finally{this.delegate.requestFinished(this)}}async receive(e){let t=new $r(e);return We("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return pc(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}async#t(e){let t=new Promise(n=>this.#e=n),i=We("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.#e},target:this.target});return this.url=i.detail.url,i.defaultPrevented&&await t,i}#i(e){return!We("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}};function pc(s){return hc(s)==ei.get}function Gv(s,e,t,i){let n=Array.from(t).length>0?new URLSearchParams(cb(t)):s.searchParams;return pc(e)?[Px(s,n),null]:i==qs.urlEncoded?[s,n]:[s,t]}function cb(s){let e=[];for(let[t,i]of s)i instanceof File||e.push([t,i]);return e}function Px(s,e){let t=new URLSearchParams(cb(e));return s.search=t.toString(),s}var bh=class{started=!1;constructor(e,t){this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}intersect=e=>{e.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}},Ys=class{static contentType="text/vnd.turbo-stream.html";static wrap(e){return typeof e=="string"?new this(mx(e)):e}constructor(e){this.fragment=_x(e)}};function _x(s){for(let e of s.querySelectorAll("turbo-stream")){let t=document.importNode(e,!0);for(let i of t.templateElement.content.querySelectorAll("script"))i.replaceWith(Uo(i));e.replaceWith(t)}return s}var Ox=100,yh=class{#e=null;#t=null;get(e){if(this.#t&&this.#t.url===e&&this.#t.expire>Date.now())return this.#t.request}setLater(e,t,i){this.clear(),this.#e=setTimeout(()=>{t.perform(),this.set(e,t,i),this.#e=null},Ox)}set(e,t,i){this.#t={url:e,request:t,expire:new Date(new Date().getTime()+i)}}clear(){this.#e&&clearTimeout(this.#e),this.#t=null}},Mx=10*1e3,Rr=new yh,Fr={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},jo=class s{state=Fr.initialized;static confirmMethod(e,t,i){return Promise.resolve(confirm(e))}constructor(e,t,i,n=!1){let r=Rx(t,i),o=Fx(Ix(t,i),r),a=Lx(t,i),l=Nx(t,i);this.delegate=e,this.formElement=t,this.submitter=i,this.fetchRequest=new Gs(this,r,o,a,t,l),this.mustRedirect=n}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=mt(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:e,requesting:t}=Fr,i=tc("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof i=="string"&&!await s.confirmMethod(i,this.formElement,this.submitter))&&this.state==e)return this.state=t,this.fetchRequest.perform()}stop(){let{stopping:e,stopped:t}=Fr;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let t=kx(Hr("csrf-param"))||Hr("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(Ys.contentType)}requestStarted(e){this.state=Fr.waiting,this.submitter?.setAttribute("disabled",""),this.setSubmitsWith(),ic(this.formElement),We("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){Rr.clear(),this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError){this.delegate.formSubmissionFailedWithResponse(this,t);return}if(Rr.clear(),this.requestMustRedirect(e)&&Dx(t)){let i=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,i)}else this.state=Fr.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){this.state=Fr.stopped,this.submitter?.removeAttribute("disabled"),this.resetSubmitterText(),sc(this.formElement),We("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||bx("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function Lx(s,e){let t=new FormData(s),i=e?.getAttribute("name"),n=e?.getAttribute("value");return i&&t.append(i,n||""),t}function kx(s){if(s!=null){let t=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(s));if(t){let i=t.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}function Dx(s){return s.statusCode==200&&!s.redirected}function Ix(s,e){let t=typeof s.action=="string"?s.action:null;return e?.hasAttribute("formaction")?e.getAttribute("formaction")||"":s.getAttribute("action")||t||""}function Fx(s,e){let t=mt(s);return pc(e)&&(t.search=""),t}function Rx(s,e){let t=e?.getAttribute("formmethod")||s.getAttribute("method")||"";return hc(t.toLowerCase())||ei.get}function Nx(s,e){return lb(e?.getAttribute("formenctype")||s.enctype)}var Ur=class{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return rb(this.element)}get permanentElements(){return db(this.element)}getPermanentElementById(e){return ub(this.element,e)}getPermanentElementMapForSnapshot(e){let t={};for(let i of this.permanentElements){let{id:n}=i,r=e.getPermanentElementById(n);r&&(t[n]=[i,r])}return t}};function ub(s,e){return s.querySelector(`#${e}[data-turbo-permanent]`)}function db(s){return s.querySelectorAll("[id][data-turbo-permanent]")}var Vo=class{started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)};submitBubbled=e=>{if(!e.defaultPrevented){let t=e.target instanceof HTMLFormElement?e.target:void 0,i=e.submitter||void 0;t&&Bx(t,i)&&zx(t,i)&&this.delegate.willSubmitForm(t,i)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(t,i))}}};function Bx(s,e){return(e?.getAttribute("formmethod")||s.getAttribute("method"))!="dialog"}function zx(s,e){if(e?.hasAttribute("formtarget")||s.hasAttribute("target")){let t=e?.getAttribute("formtarget")||s.target;for(let i of document.getElementsByName(t))if(i instanceof HTMLIFrameElement)return!1;return!0}else return!0}var nc=class{#e=e=>{};#t=e=>{};constructor(e,t){this.delegate=e,this.element=t}scrollToAnchor(e){let t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(An(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){let{isPreview:t,shouldRender:i,willRender:n,newSnapshot:r}=e,o=n;if(i)try{this.renderPromise=new Promise(u=>this.#e=u),this.renderer=e,await this.prepareToRenderSnapshot(e);let a=new Promise(u=>this.#t=u),l={resume:this.#t,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(r,l)||await a,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(r,t,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.#e(void 0),delete this.renderPromise}else o&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}},wh=class extends nc{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Ur(this.element)}},rc=class{constructor(e,t){this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickBubbled=e=>{this.respondsToEventTarget(e.target)?this.clickEvent=e:delete this.clickEvent};linkClicked=e=>{this.clickEvent&&this.respondsToEventTarget(e.target)&&e.target instanceof Element&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent};willVisit=e=>{delete this.clickEvent};respondsToEventTarget(e){let t=e instanceof Element?e:e instanceof Node?e.parentElement:null;return t&&t.closest("turbo-frame, html")==this.element}},oc=class{started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)};clickBubbled=e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){let t=e.composedPath&&e.composedPath()[0]||e.target,i=Tx(t);if(i&&Ax(i)){let n=ob(i);this.delegate.willFollowLinkToLocation(i,n,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(i,n))}}};clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}},ac=class{constructor(e,t){this.delegate=e,this.linkInterceptor=new oc(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,t){return!1}prefetchAndCacheRequestToLocation(e,t){}willFollowLinkToLocation(e,t,i){return this.delegate.willSubmitFormLinkToLocation(e,t,i)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,t){let i=document.createElement("form"),n="hidden";for(let[h,f]of t.searchParams)i.append(Object.assign(document.createElement("input"),{type:n,name:h,value:f}));let r=Object.assign(t,{search:""});i.setAttribute("data-turbo","true"),i.setAttribute("action",r.href),i.setAttribute("hidden","");let o=e.getAttribute("data-turbo-method");o&&i.setAttribute("method",o);let a=e.getAttribute("data-turbo-frame");a&&i.setAttribute("data-turbo-frame",a);let l=Tn(e);l&&i.setAttribute("data-turbo-action",l);let c=e.getAttribute("data-turbo-confirm");c&&i.setAttribute("data-turbo-confirm",c),e.hasAttribute("data-turbo-stream")&&i.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,i),document.body.appendChild(i),i.addEventListener("turbo:submit-end",()=>i.remove(),{once:!0}),requestAnimationFrame(()=>i.requestSubmit())}},lc=class{static async preservingPermanentElements(e,t,i){let n=new this(e,t);n.enter(),await i(),n.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(let e in this.permanentElementMap){let[t,i]=this.permanentElementMap[e];this.delegate.enteringBardo(t,i),this.replaceNewPermanentElementWithPlaceholder(i)}}leave(){for(let e in this.permanentElementMap){let[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){let t=$x(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){let t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){this.getPlaceholderById(e.id)?.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function $x(s){let e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",s.id),e}var qo=class{#e=null;constructor(e,t,i,n,r=!0){this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=n,this.willRender=r,this.renderElement=i,this.promise=new Promise((o,a)=>this.resolvingFunctions={resolve:o,reject:a})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await lc.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){let e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}enteringBardo(e){this.#e||e.contains(this.currentSnapshot.activeElement)&&(this.#e=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.#e)&&this.#e instanceof HTMLElement&&(this.#e.focus(),this.#e=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}},jr=class extends qo{static renderElement(e,t){let i=document.createRange();i.selectNodeContents(e),i.deleteContents();let n=t,r=n.ownerDocument?.createRange();r&&(r.selectNodeContents(n),e.appendChild(r.extractContents()))}constructor(e,t,i,n,r,o=!0){super(t,i,n,r,o),this.delegate=e}get shouldRender(){return!0}async render(){await Nr(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await Nr(),this.focusFirstAutofocusableElement(),await Nr(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,t=Hx(this.currentElement.getAttribute("data-autoscroll-block"),"end"),i=Ux(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:i}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let t=Uo(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function Hx(s,e){return s=="end"||s=="start"||s=="center"||s=="nearest"?s:e}function Ux(s,e){return s=="auto"||s=="smooth"?s:e}var Eh=class s{static animationDuration=300;static get defaultCSS(){return ib`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${s.animationDuration}ms ease-out,
          opacity ${s.animationDuration/2}ms ${s.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,s.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,s.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let e=document.createElement("style");return e.type="text/css",e.textContent=s.defaultCSS,this.cspNonce&&(e.nonce=this.cspNonce),e}createProgressElement(){let e=document.createElement("div");return e.className="turbo-progress-bar",e}get cspNonce(){return Hr("csp-nonce")}},Sh=class extends Ur{detailsByOuterHTML=this.children.filter(e=>!Wx(e)).map(e=>Xx(e)).reduce((e,t)=>{let{outerHTML:i}=t,n=i in e?e[i]:{type:jx(t),tracked:Vx(t),elements:[]};return{...e,[i]:{...n,elements:[...n.elements,t]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,t){return Object.keys(this.detailsByOuterHTML).filter(i=>!(i in t.detailsByOuterHTML)).map(i=>this.detailsByOuterHTML[i]).filter(({type:i})=>i==e).map(({elements:[i]})=>i)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,t)=>{let{type:i,tracked:n,elements:r}=this.detailsByOuterHTML[t];return i==null&&!n?[...e,...r]:r.length>1?[...e,...r.slice(1)]:e},[])}getMetaValue(e){let t=this.findMetaElementByName(e);return t?t.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((t,i)=>{let{elements:[n]}=this.detailsByOuterHTML[i];return Yx(n,e)?n:t},void 0|void 0)}};function jx(s){if(qx(s))return"script";if(Gx(s))return"stylesheet"}function Vx(s){return s.getAttribute("data-turbo-track")=="reload"}function qx(s){return s.localName=="script"}function Wx(s){return s.localName=="noscript"}function Gx(s){let e=s.localName;return e=="style"||e=="link"&&s.getAttribute("rel")=="stylesheet"}function Yx(s,e){return s.localName=="meta"&&s.getAttribute("name")==e}function Xx(s){return s.hasAttribute("nonce")&&s.setAttribute("nonce",""),s}var vi=class s extends Ur{static fromHTMLString(e=""){return this.fromDocument(tb(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:t,head:i}){return new this(e,t,new Sh(i))}constructor(e,t,i){super(t),this.documentElement=e,this.headSnapshot=i}clone(){let e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),i=e.querySelectorAll("select");for(let[n,r]of t.entries()){let o=i[n];for(let a of o.selectedOptions)a.selected=!1;for(let a of r.selectedOptions)o.options[a.index].selected=!0}for(let n of e.querySelectorAll('input[type="password"]'))n.value="";return new s(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){let e=this.getSetting("root")??"/";return mt(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},Ah=class{#e=!1;#t=Promise.resolve();renderChange(e,t){return e&&this.viewTransitionsAvailable&&!this.#e?(this.#e=!0,this.#t=this.#t.then(async()=>{await document.startViewTransition(t).finished})):this.#t=this.#t.then(t),this.#t}get viewTransitionsAvailable(){return document.startViewTransition}},Kx={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},ec={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},us={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},zr={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},Jx={advance:"forward",restore:"back",replace:"none"},Th=class{identifier=Ws();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=us.initialized;viewTransitioner=new Ah;constructor(e,t,i,n={}){this.delegate=e,this.location=t,this.restorationIdentifier=i||Ws();let{action:r,historyChanged:o,referrer:a,snapshot:l,snapshotHTML:c,response:u,visitCachedSnapshot:h,willRender:f,updateHistory:p,shouldCacheSnapshot:g,acceptsStreamResponse:y,direction:A}={...Kx,...n};this.action=r,this.historyChanged=o,this.referrer=a,this.snapshot=l,this.snapshotHTML=c,this.response=u,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=h,this.willRender=f,this.updateHistory=p,this.scrolled=!f,this.shouldCacheSnapshot=g,this.acceptsStreamResponse=y,this.direction=A||Jx[r]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==us.initialized&&(this.recordTimingMetric(ec.visitStart),this.state=us.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==us.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=us.canceled)}complete(){this.state==us.started&&(this.recordTimingMetric(ec.visitEnd),this.adapter.visitCompleted(this),this.state=us.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==us.started&&(this.state=us.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let e=this.location.href===this.referrer?.href?"replace":this.action,t=sb(e);this.history.update(t,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Gs(this,ei.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(ec.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:t}=e;Yv(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(ec.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:t}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,Yv(e)&&t!=null){let i=vi.fromHTMLString(t);await this.renderPageSnapshot(i,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(vi.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!An(this.location)||e.hasAnchor(An(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return vi.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let t=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,t),this.adapter.visitRendered(this),t||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(Ys.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){let i=await t.responseHTML,{redirected:n,statusCode:r}=t;i==null?this.recordResponse({statusCode:zr.contentTypeMismatch,redirected:n}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:r,responseHTML:i,redirected:n}))}async requestFailedWithResponse(e,t){let i=await t.responseHTML,{redirected:n,statusCode:r}=t;i==null?this.recordResponse({statusCode:zr.contentTypeMismatch,redirected:n}):this.recordResponse({statusCode:r,responseHTML:i,redirected:n})}requestErrored(e,t){this.recordResponse({statusCode:zr.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=An(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),this.frame=await Nr(),await e(),delete this.frame}async renderPageSnapshot(e,t){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,t,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function Yv(s){return s>=200&&s<300}var xh=class{progressBar=new Eh;constructor(e){this.session=e}visitProposedToLocation(e,t){Vs(e,this.navigator.rootLocation)?this.navigator.startVisit(e,t?.restorationIdentifier||Ws(),t):window.location.href=e.toString()}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case zr.networkFailure:case zr.timeoutFailure:case zr.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}showProgressBar=()=>{this.progressBar.show()};reload(e){We("turbo:reload",{detail:e}),window.location.href=this.location?.toString()||window.location.href}get navigator(){return this.session.navigator}},Ch=class{selector="[data-turbo-temporary]";deprecatedSelector="[data-turbo-cache=false]";started=!1;start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}removeTemporaryElements=e=>{for(let t of this.temporaryElements)t.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}},Ph=class{constructor(e,t){this.session=e,this.element=t,this.linkInterceptor=new rc(this,t),this.formSubmitObserver=new Vo(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,i){return this.#t(e)}linkClickIntercepted(e,t,i){let n=this.#i(e);n&&n.delegate.linkClickIntercepted(e,t,i)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&this.#e(e,t)&&this.#t(e,t)}formSubmitted(e,t){let i=this.#i(e,t);i&&i.delegate.formSubmitted(e,t)}#e(e,t){let i=jh(e,t),n=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),r=mt(n?.content??"/");return this.#t(e,t)&&Vs(i,r)}#t(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){let n=this.#i(e,t);return n?n!=e.closest("turbo-frame"):!1}else return!1}#i(e,t){let i=t?.getAttribute("data-turbo-frame")||e.getAttribute("data-turbo-frame");if(i&&i!="_top"){let n=this.element.querySelector(`#${i}:not([disabled])`);if(n instanceof Li)return n}}},_h=class{location;restorationIdentifier=Ws();restorationData={};started=!1;pageLoaded=!1;currentIndex=0;constructor(e){this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,i=Ws()){e===history.pushState&&++this.currentIndex;let n={turbo:{restorationIdentifier:i,restorationIndex:this.currentIndex}};e.call(history,n,"",t.href),this.location=t,this.restorationIdentifier=i}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:t}=this,i=this.restorationData[t];this.restorationData[t]={...i,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}onPopState=e=>{if(this.shouldHandlePopState()){let{turbo:t}=e.state||{};if(t){this.location=new URL(window.location.href);let{restorationIdentifier:i,restorationIndex:n}=t;this.restorationIdentifier=i;let r=n>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,i,r),this.currentIndex=n}}};onPageLoad=async e=>{await gx(),this.pageLoaded=!0};shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},Oh=class{started=!1;#e=null;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",this.#t,{once:!0}):this.#t())}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",this.#i,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",this.#a,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",this.#o,!0),this.started=!1)}#t=()=>{this.eventTarget.addEventListener("mouseenter",this.#i,{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",this.#a,{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",this.#o,!0),this.started=!0};#i=e=>{if(Hr("turbo-prefetch")==="false")return;let t=e.target;if(t.matches&&t.matches("a[href]:not([target^=_]):not([download])")&&this.#c(t)){let n=t,r=ob(n);if(this.delegate.canPrefetchRequestToLocation(n,r)){this.#e=n;let o=new Gs(this,ei.get,r,new URLSearchParams,t);Rr.setLater(r.toString(),o,this.#s)}}};#a=e=>{e.target===this.#e&&this.#l()};#l=()=>{Rr.clear(),this.#e=null};#o=e=>{if(e.target.tagName!=="FORM"&&e.detail.fetchOptions.method==="get"){let t=Rr.get(e.detail.url.toString());t&&(e.detail.fetchRequest=t),Rr.clear()}};prepareRequest(e){let t=e.target;e.headers["X-Sec-Purpose"]="prefetch";let i=t.closest("turbo-frame"),n=t.getAttribute("data-turbo-frame")||i?.getAttribute("target")||i?.id;n&&n!=="_top"&&(e.headers["Turbo-Frame"]=n)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}get#s(){return Number(Hr("turbo-prefetch-cache-time"))||Mx}#c(e){return!(!e.getAttribute("href")||Zx(e)||Qx(e)||eC(e)||tC(e)||sC(e))}},Zx=s=>s.origin!==document.location.origin||!["http:","https:"].includes(s.protocol)||s.hasAttribute("target"),Qx=s=>s.pathname+s.search===document.location.pathname+document.location.search||s.href.startsWith("#"),eC=s=>{if(s.getAttribute("data-turbo-prefetch")==="false"||s.getAttribute("data-turbo")==="false")return!0;let e=Br(s,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},tC=s=>{let e=s.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||iC(s)||s.hasAttribute("data-turbo-confirm")||s.hasAttribute("data-turbo-stream"))},iC=s=>s.hasAttribute("data-remote")||s.hasAttribute("data-behavior")||s.hasAttribute("data-confirm")||s.hasAttribute("data-method"),sC=s=>We("turbo:before-prefetch",{target:s,cancelable:!0}).defaultPrevented,Mh=class{constructor(e){this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&this.delegate.visitProposedToLocation(e,t)}startVisit(e,t,i={}){this.stop(),this.currentVisit=new Th(this,mt(e),t,{referrer:this.location,...i}),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new jo(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){let i=await t.responseHTML;if(i){let n=e.isSafe;n||this.view.clearSnapshotCache();let{statusCode:r,redirected:o}=t,l={action:this.#e(e,t),shouldCacheSnapshot:n,response:{statusCode:r,responseHTML:i,redirected:o}};this.proposeVisit(t.location,l)}}}async formSubmissionFailedWithResponse(e,t){let i=await t.responseHTML;if(i){let n=vi.fromHTMLString(i);t.serverError?await this.view.renderError(n,this.currentVisit):await this.view.renderPage(n,!1,!0,this.currentVisit),n.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e)}locationWithActionIsSamePage(e,t){let i=An(e),n=An(this.view.lastRenderedLocation),r=t==="restore"&&typeof i>"u";return t!=="replace"&&gh(e)===gh(this.view.lastRenderedLocation)&&(r||i!=null&&i!==n)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#e(e,t){let{submitter:i,formElement:n}=e;return Tn(i,n)||this.#t(t)}#t(e){return e.redirected&&e.location.href===this.location?.href?"replace":"advance"}},En={initial:0,loading:1,interactive:2,complete:3},Lh=class{stage=En.initial;started=!1;constructor(e){this.delegate=e}start(){this.started||(this.stage==En.initial&&(this.stage=En.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}interpretReadyState=()=>{let{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()};pageIsInteractive(){this.stage==En.loading&&(this.stage=En.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==En.interactive&&(this.stage=En.complete,this.delegate.pageLoaded())}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}},kh=class{started=!1;constructor(e){this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(e){this.delegate.scrollPositionChanged(e)}},Dh=class{render({fragment:e}){lc.preservingPermanentElements(this,nC(e),()=>{rC(e,()=>{oC(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function nC(s){let e=db(document.documentElement),t={};for(let i of e){let{id:n}=i;for(let r of s.querySelectorAll("turbo-stream")){let o=ub(r.templateElement.content,n);o&&(t[n]=[i,o])}}return t}async function rC(s,e){let t=`turbo-stream-autofocus-${Ws()}`,i=s.querySelectorAll("turbo-stream"),n=aC(i),r=null;if(n&&(n.id?r=n.id:r=t,n.id=r),e(),await Nr(),(document.activeElement==null||document.activeElement==document.body)&&r){let a=document.getElementById(r);Vh(a)&&a.focus(),a&&a.id==t&&a.removeAttribute("id")}}async function oC(s){let[e,t]=await Sx(s,()=>document.activeElement),i=e&&e.id;if(i){let n=document.getElementById(i);Vh(n)&&n!=t&&n.focus()}}function aC(s){for(let e of s){let t=rb(e.templateElement.content);if(t)return t}return null}var Ih=class{sources=new Set;#e=!1;constructor(e){this.delegate=e}start(){this.#e||(this.#e=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.#e&&(this.#e=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}inspectFetchResponse=e=>{let t=lC(e);t&&cC(t)&&(e.preventDefault(),this.receiveMessageResponse(t))};receiveMessageEvent=e=>{this.#e&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)};async receiveMessageResponse(e){let t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(Ys.wrap(e))}};function lC(s){let e=s.detail?.fetchResponse;if(e instanceof $r)return e}function cC(s){return(s.contentType??"").startsWith(Ys.contentType)}var cc=class extends qo{static renderElement(e,t){let{documentElement:i,body:n}=document;i.replaceChild(t,n)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let t=e.parentNode;if(t){let i=Uo(e);t.replaceChild(i,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},uC=function(){let s=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:f,afterNodeAdded:f,beforeNodeMorphed:f,afterNodeMorphed:f,beforeNodeRemoved:f,afterNodeRemoved:f,beforeAttributeUpdated:f},head:{style:"merge",shouldPreserve:function(T){return T.getAttribute("im-preserve")==="true"},shouldReAppend:function(T){return T.getAttribute("im-re-append")==="true"},shouldRemove:f,afterHeadMorphed:f}};function t(T,D,k={}){T instanceof Document&&(T=T.documentElement),typeof D=="string"&&(D=F(D));let K=H(D),Z=g(T,K,k);return i(T,K,Z)}function i(T,D,k){if(k.head.block){let K=T.querySelector("head"),Z=D.querySelector("head");if(K&&Z){let re=h(Z,K,k);Promise.all(re).then(function(){i(T,D,Object.assign(k,{head:{block:!1,ignore:!0}}))});return}}if(k.morphStyle==="innerHTML")return o(D,T,k),T.children;if(k.morphStyle==="outerHTML"||k.morphStyle==null){let K=W(D,T,k),Z=K?.previousSibling,re=K?.nextSibling,ve=r(T,K,k);return K?U(Z,ve,re):[]}else throw"Do not understand how to morph style "+k.morphStyle}function n(T,D){return D.ignoreActiveValue&&T===document.activeElement&&T!==document.body}function r(T,D,k){if(!(k.ignoreActive&&T===document.activeElement))return D==null?k.callbacks.beforeNodeRemoved(T)===!1?T:(T.remove(),k.callbacks.afterNodeRemoved(T),null):A(T,D)?(k.callbacks.beforeNodeMorphed(T,D)===!1||(T instanceof HTMLHeadElement&&k.head.ignore||(T instanceof HTMLHeadElement&&k.head.style!=="morph"?h(D,T,k):(l(D,T,k),n(T,k)||o(D,T,k))),k.callbacks.afterNodeMorphed(T,D)),T):k.callbacks.beforeNodeRemoved(T)===!1||k.callbacks.beforeNodeAdded(D)===!1?T:(T.parentElement.replaceChild(D,T),k.callbacks.afterNodeAdded(D),k.callbacks.afterNodeRemoved(T),D)}function o(T,D,k){let K=T.firstChild,Z=D.firstChild,re;for(;K;){if(re=K,K=re.nextSibling,Z==null){if(k.callbacks.beforeNodeAdded(re)===!1)return;D.appendChild(re),k.callbacks.afterNodeAdded(re),pe(k,re);continue}if(y(re,Z,k)){r(Z,re,k),Z=Z.nextSibling,pe(k,re);continue}let ve=O(T,D,re,Z,k);if(ve){Z=S(Z,ve,k),r(ve,re,k),pe(k,re);continue}let _e=I(T,D,re,Z,k);if(_e){Z=S(Z,_e,k),r(_e,re,k),pe(k,re);continue}if(k.callbacks.beforeNodeAdded(re)===!1)return;D.insertBefore(re,Z),k.callbacks.afterNodeAdded(re),pe(k,re)}for(;Z!==null;){let ve=Z;Z=Z.nextSibling,oe(ve,k)}}function a(T,D,k,K){return T==="value"&&K.ignoreActiveValue&&D===document.activeElement?!0:K.callbacks.beforeAttributeUpdated(T,D,k)===!1}function l(T,D,k){let K=T.nodeType;if(K===1){let Z=T.attributes,re=D.attributes;for(let ve of Z)a(ve.name,D,"update",k)||D.getAttribute(ve.name)!==ve.value&&D.setAttribute(ve.name,ve.value);for(let ve=re.length-1;0<=ve;ve--){let _e=re[ve];a(_e.name,D,"remove",k)||T.hasAttribute(_e.name)||D.removeAttribute(_e.name)}}(K===8||K===3)&&D.nodeValue!==T.nodeValue&&(D.nodeValue=T.nodeValue),n(D,k)||u(T,D,k)}function c(T,D,k,K){if(T[k]!==D[k]){let Z=a(k,D,"update",K);Z||(D[k]=T[k]),T[k]?Z||D.setAttribute(k,T[k]):a(k,D,"remove",K)||D.removeAttribute(k)}}function u(T,D,k){if(T instanceof HTMLInputElement&&D instanceof HTMLInputElement&&T.type!=="file"){let K=T.value,Z=D.value;c(T,D,"checked",k),c(T,D,"disabled",k),T.hasAttribute("value")?K!==Z&&(a("value",D,"update",k)||(D.setAttribute("value",K),D.value=K)):a("value",D,"remove",k)||(D.value="",D.removeAttribute("value"))}else if(T instanceof HTMLOptionElement)c(T,D,"selected",k);else if(T instanceof HTMLTextAreaElement&&D instanceof HTMLTextAreaElement){let K=T.value,Z=D.value;if(a("value",D,"update",k))return;K!==Z&&(D.value=K),D.firstChild&&D.firstChild.nodeValue!==K&&(D.firstChild.nodeValue=K)}}function h(T,D,k){let K=[],Z=[],re=[],ve=[],_e=k.head.style,Ne=new Map;for(let Se of T.children)Ne.set(Se.outerHTML,Se);for(let Se of D.children){let Be=Ne.has(Se.outerHTML),Je=k.head.shouldReAppend(Se),X=k.head.shouldPreserve(Se);Be||X?Je?Z.push(Se):(Ne.delete(Se.outerHTML),re.push(Se)):_e==="append"?Je&&(Z.push(Se),ve.push(Se)):k.head.shouldRemove(Se)!==!1&&Z.push(Se)}ve.push(...Ne.values());let Ke=[];for(let Se of ve){let Be=document.createRange().createContextualFragment(Se.outerHTML).firstChild;if(k.callbacks.beforeNodeAdded(Be)!==!1){if(Be.href||Be.src){let Je=null,X=new Promise(function(Pe){Je=Pe});Be.addEventListener("load",function(){Je()}),Ke.push(X)}D.appendChild(Be),k.callbacks.afterNodeAdded(Be),K.push(Be)}}for(let Se of Z)k.callbacks.beforeNodeRemoved(Se)!==!1&&(D.removeChild(Se),k.callbacks.afterNodeRemoved(Se));return k.head.afterHeadMorphed(D,{added:K,kept:re,removed:Z}),Ke}function f(){}function p(T){let D={};return Object.assign(D,e),Object.assign(D,T),D.callbacks={},Object.assign(D.callbacks,e.callbacks),Object.assign(D.callbacks,T.callbacks),D.head={},Object.assign(D.head,e.head),Object.assign(D.head,T.head),D}function g(T,D,k){return k=p(k),{target:T,newContent:D,config:k,morphStyle:k.morphStyle,ignoreActive:k.ignoreActive,ignoreActiveValue:k.ignoreActiveValue,idMap:$(T,D),deadIds:new Set,callbacks:k.callbacks,head:k.head}}function y(T,D,k){return T==null||D==null?!1:T.nodeType===D.nodeType&&T.tagName===D.tagName?T.id!==""&&T.id===D.id?!0:ue(k,T,D)>0:!1}function A(T,D){return T==null||D==null?!1:T.nodeType===D.nodeType&&T.tagName===D.tagName}function S(T,D,k){for(;T!==D;){let K=T;T=T.nextSibling,oe(K,k)}return pe(k,D),D.nextSibling}function O(T,D,k,K,Z){let re=ue(Z,k,D),ve=null;if(re>0){let _e=K,Ne=0;for(;_e!=null;){if(y(k,_e,Z))return _e;if(Ne+=ue(Z,_e,T),Ne>re)return null;_e=_e.nextSibling}}return ve}function I(T,D,k,K,Z){let re=K,ve=k.nextSibling,_e=0;for(;re!=null;){if(ue(Z,re,T)>0)return null;if(A(k,re))return re;if(A(ve,re)&&(_e++,ve=ve.nextSibling,_e>=2))return null;re=re.nextSibling}return re}function F(T){let D=new DOMParser,k=T.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(k.match(/<\/html>/)||k.match(/<\/head>/)||k.match(/<\/body>/)){let K=D.parseFromString(T,"text/html");if(k.match(/<\/html>/))return K.generatedByIdiomorph=!0,K;{let Z=K.firstChild;return Z?(Z.generatedByIdiomorph=!0,Z):null}}else{let Z=D.parseFromString("<body><template>"+T+"</template></body>","text/html").body.querySelector("template").content;return Z.generatedByIdiomorph=!0,Z}}function H(T){if(T==null)return document.createElement("div");if(T.generatedByIdiomorph)return T;if(T instanceof Node){let D=document.createElement("div");return D.append(T),D}else{let D=document.createElement("div");for(let k of[...T])D.append(k);return D}}function U(T,D,k){let K=[],Z=[];for(;T!=null;)K.push(T),T=T.previousSibling;for(;K.length>0;){let re=K.pop();Z.push(re),D.parentElement.insertBefore(re,D)}for(Z.push(D);k!=null;)K.push(k),Z.push(k),k=k.nextSibling;for(;K.length>0;)D.parentElement.insertBefore(K.pop(),D.nextSibling);return Z}function W(T,D,k){let K;K=T.firstChild;let Z=K,re=0;for(;K;){let ve=J(K,D,k);ve>re&&(Z=K,re=ve),K=K.nextSibling}return Z}function J(T,D,k){return A(T,D)?.5+ue(k,T,D):0}function oe(T,D){pe(D,T),D.callbacks.beforeNodeRemoved(T)!==!1&&(T.remove(),D.callbacks.afterNodeRemoved(T))}function G(T,D){return!T.deadIds.has(D)}function ae(T,D,k){return(T.idMap.get(k)||s).has(D)}function pe(T,D){let k=T.idMap.get(D)||s;for(let K of k)T.deadIds.add(K)}function ue(T,D,k){let K=T.idMap.get(D)||s,Z=0;for(let re of K)G(T,re)&&ae(T,re,k)&&++Z;return Z}function te(T,D){let k=T.parentElement,K=T.querySelectorAll("[id]");for(let Z of K){let re=Z;for(;re!==k&&re!=null;){let ve=D.get(re);ve==null&&(ve=new Set,D.set(re,ve)),ve.add(Z.id),re=re.parentElement}}}function $(T,D){let k=new Map;return te(T,k),te(D,k),k}return{morph:t,defaults:e}}(),xn=class extends qo{static renderElement(e,t){document.body&&t instanceof HTMLBodyElement?document.body.replaceWith(t):document.documentElement.appendChild(t)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){this.#e(),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#e(){let{documentElement:e}=this.currentSnapshot,{lang:t}=this.newSnapshot;t?e.setAttribute("lang",t):e.removeAttribute("lang")}async mergeHead(){let e=this.mergeProvisionalElements(),t=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await t,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let t of this.newHeadStylesheetElements)e.push(yx(t)),document.head.appendChild(t);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(Uo(e))}removeUnusedDynamicStylesheetElements(){for(let e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let t of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(t,e)||document.head.removeChild(t);for(let t of e)document.head.appendChild(t)}isCurrentElementInElementList(e,t){for(let[i,n]of t.entries()){if(e.tagName=="TITLE"){if(n.tagName!="TITLE")continue;if(e.innerHTML==n.innerHTML)return t.splice(i,1),!0}if(n.isEqualNode(e))return t.splice(i,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let t=Uo(e);e.replaceWith(t)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},Fh=class extends xn{async render(){this.willRender&&await this.#e()}get renderMethod(){return"morph"}async#e(){this.#t(this.currentElement,this.newElement),this.#c(),We("turbo:morph",{detail:{currentElement:this.currentElement,newElement:this.newElement}})}#t(e,t,i="outerHTML"){this.isMorphingTurboFrame=this.#r(e),uC.morph(e,t,{morphStyle:i,callbacks:{beforeNodeAdded:this.#i,beforeNodeMorphed:this.#a,beforeAttributeUpdated:this.#l,beforeNodeRemoved:this.#s,afterNodeMorphed:this.#o}})}#i=e=>!(e.id&&e.hasAttribute("data-turbo-permanent")&&document.getElementById(e.id));#a=(e,t)=>{if(e instanceof HTMLElement)return!e.hasAttribute("data-turbo-permanent")&&(this.isMorphingTurboFrame||!this.#r(e))?!We("turbo:before-morph-element",{cancelable:!0,target:e,detail:{newElement:t}}).defaultPrevented:!1};#l=(e,t,i)=>!We("turbo:before-morph-attribute",{cancelable:!0,target:t,detail:{attributeName:e,mutationType:i}}).defaultPrevented;#o=(e,t)=>{t instanceof HTMLElement&&We("turbo:morph-element",{target:e,detail:{newElement:t}})};#s=e=>this.#a(e);#c(){this.#d().forEach(e=>{this.#r(e)&&(this.#n(e),e.reload())})}#n(e){e.addEventListener("turbo:before-frame-render",t=>{t.detail.render=this.#p},{once:!0})}#p=(e,t)=>{We("turbo:before-frame-morph",{target:e,detail:{currentElement:e,newElement:t}}),this.#t(e,t.children,"innerHTML")};#r(e){return e.src&&e.refresh==="morph"}#d(){return Array.from(document.querySelectorAll("turbo-frame[src]")).filter(e=>!e.closest("[data-turbo-permanent]"))}},Rh=class{keys=[];snapshots={};constructor(e){this.size=e}has(e){return Ql(e)in this.snapshots}get(e){if(this.has(e)){let t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[Ql(e)]}write(e,t){this.snapshots[Ql(e)]=t}touch(e){let t=Ql(e),i=this.keys.indexOf(t);i>-1&&this.keys.splice(i,1),this.keys.unshift(t),this.trim()}trim(){for(let e of this.keys.splice(this.size))delete this.snapshots[e]}},Nh=class extends nc{snapshotCache=new Rh(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,t=!1,i=!0,n){let o=this.isPageRefresh(n)&&this.snapshot.shouldMorphPage?Fh:xn,a=new o(this.snapshot,e,xn.renderElement,t,i);return a.shouldRender?n?.changeHistory():this.forceReloaded=!0,this.render(a)}renderError(e,t){t?.changeHistory();let i=new cc(this.snapshot,e,cc.renderElement,!1);return this.render(i)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:t}=this;await eb();let i=e.clone();return this.snapshotCache.put(t,i),i}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action==="replace"}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return vi.fromElement(this.element)}},Bh=class{selector="a[data-turbo-preload]";constructor(e,t){this.delegate=e,this.snapshotCache=t}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this.#e):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",this.#e)}preloadOnLoadLinksForView(e){for(let t of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(t)&&this.preloadURL(t)}async preloadURL(e){let t=new URL(e.href);if(this.snapshotCache.has(t))return;await new Gs(this,ei.get,t,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,t){try{let i=await t.responseHTML,n=vi.fromHTMLString(i);this.snapshotCache.put(e.url,n)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}#e=()=>{this.preloadOnLoadLinksForView(document.body)}},zh=class{constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.#e("")}exemptPageFromCache(){this.#e("no-cache")}exemptPageFromPreview(){this.#e("no-preview")}#e(e){Ex("turbo-cache-control",e)}},$h=class{navigator=new Mh(this);history=new _h(this);view=new Nh(this,document.documentElement);adapter=new xh(this);pageObserver=new Lh(this);cacheObserver=new Ch;linkPrefetchObserver=new Oh(this,document);linkClickObserver=new oc(this,window);formSubmitObserver=new Vo(this,document);scrollObserver=new kh(this);streamObserver=new Ih(this);formLinkClickObserver=new ac(this,document.documentElement);frameRedirector=new Ph(this,document.documentElement);streamMessageRenderer=new Dh;cache=new zh(this);drive=!0;enabled=!0;progressBarDelay=500;started=!1;formMode="on";#e=150;constructor(e){this.recentRequests=e,this.preloader=new Bh(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){let i=t.frame?document.getElementById(t.frame):null;if(i instanceof Li){let n=t.action||Tn(i);i.delegate.proposeVisitIfNavigatedWithAction(i,n),i.src=e.toString()}else this.navigator.proposeVisit(mt(e),t)}refresh(e,t){t&&this.recentRequests.has(t)||this.visit(e,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(Ys.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){this.progressBarDelay=e}setFormMode(e){this.formMode=e}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#e}set pageRefreshDebouncePeriod(e){this.refresh=xx(this.debouncedRefresh.bind(this),e),this.#e=e}shouldPreloadLink(e){let t=e.hasAttribute("data-turbo-method"),i=e.hasAttribute("data-turbo-stream"),n=e.getAttribute("data-turbo-frame"),r=n=="_top"?null:document.getElementById(n)||Br(e,"turbo-frame:not([disabled])");if(t||i||r instanceof Li)return!1;{let o=new URL(e.href);return this.elementIsNavigatable(e)&&Vs(o,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,t,i){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0,direction:i}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&Vs(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,t){return this.elementIsNavigatable(e)&&Vs(t,this.snapshot.rootLocation)}willFollowLinkToLocation(e,t,i){return this.elementIsNavigatable(e)&&Vs(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,i)}followedLinkToLocation(e,t){let i=this.getActionForLink(e),n=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:i,acceptsStreamResponse:n})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){Xv(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||(ic(document.documentElement),this.view.markVisitDirection(e.direction)),Xv(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),sc(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){let i=jh(e,t);return this.submissionIsNavigatable(e,t)&&Vs(mt(i),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){this.navigator.currentVisit?.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){let i=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:n,detail:{render:r}}=i;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!n}viewRenderedSnapshot(e,t,i){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(i)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,i){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,i).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,i){return We("turbo:click",{target:e,detail:{url:t.href,originalEvent:i},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return We("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return We("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return We("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return We("turbo:before-render",{detail:{newBody:e,...t},cancelable:!0})}notifyApplicationAfterRender(e){return We("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return We("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return We("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return We("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(this.formMode=="off")return!1;{let i=t?this.elementIsNavigatable(t):!0;return this.formMode=="optin"?i&&e.closest('[data-turbo="true"]')!=null:i&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let t=Br(e,"[data-turbo]"),i=Br(e,"turbo-frame");return this.drive||i?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return Tn(e)||"advance"}get snapshot(){return this.view.snapshot}};function Xv(s){Object.defineProperties(s,dC)}var dC={absoluteURL:{get(){return this.toString()}}},Ve=new $h(ab),{cache:hb,navigator:pb}=Ve;function Wh(){Ve.start()}function fb(s){Ve.registerAdapter(s)}function mb(s,e){Ve.visit(s,e)}function Wo(s){Ve.connectStreamSource(s)}function Go(s){Ve.disconnectStreamSource(s)}function gb(s){Ve.renderStreamMessage(s)}function vb(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Ve.clearCache()}function bb(s){Ve.setProgressBarDelay(s)}function yb(s){jo.confirmMethod=s}function wb(s){Ve.setFormMode(s)}var hC=Object.freeze({__proto__:null,navigator:pb,session:Ve,cache:hb,PageRenderer:xn,PageSnapshot:vi,FrameRenderer:jr,fetch:qh,start:Wh,registerAdapter:fb,visit:mb,connectStreamSource:Wo,disconnectStreamSource:Go,renderStreamMessage:gb,clearCache:vb,setProgressBarDelay:bb,setConfirmMethod:yb,setFormMode:wb}),Hh=class extends Error{},Uh=class{fetchResponseLoaded=e=>Promise.resolve();#e=null;#t=()=>{};#i=!1;#a=!1;#l=new Set;action=null;constructor(e){this.element=e,this.view=new wh(this,this.element),this.appearanceObserver=new bh(this,this.element),this.formLinkClickObserver=new ac(this,this.element),this.linkInterceptor=new rc(this,this.element),this.restorationIdentifier=Ws(),this.formSubmitObserver=new Vo(this,this.element)}connect(){this.#i||(this.#i=!0,this.loadingStyle==Sn.lazy?this.appearanceObserver.start():this.#o(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.#i&&(this.#i=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==Sn.eager&&this.#o()}sourceURLChanged(){this.#b("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Sn.eager||this.#a)&&this.#o())}sourceURLReloaded(){let{src:e}=this.element;return this.#g("complete",()=>{this.element.removeAttribute("complete")}),this.element.src=null,this.element.src=e,this.element.loaded}completeChanged(){this.#b("complete")||this.#o()}loadingStyleChanged(){this.loadingStyle==Sn.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.#o())}async#o(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.#c(mt(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#a=!0)}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let t=await e.responseHTML;if(t){let i=tb(t);vi.fromDocument(i).isVisitable?await this.#s(e,i):await this.#p(e)}}finally{this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,Tn(e)),this.#o()}willSubmitFormLinkToLocation(e){return this.#m(e)}submittedFormLinkToLocation(e,t,i){let n=this.#h(e);n&&i.setAttribute("data-turbo-frame",n.id)}shouldInterceptLinkClick(e,t,i){return this.#m(e)}linkClickIntercepted(e,t){this.#n(e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&this.#m(e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new jo(this,e,t);let{fetchRequest:i}=this.formSubmission;this.prepareRequest(i),this.formSubmission.start()}prepareRequest(e){e.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&e.acceptResponseType(Ys.contentType)}requestStarted(e){ic(this.element)}requestPreventedHandlingResponse(e,t){this.#t()}async requestSucceededWithResponse(e,t){await this.loadResponse(t),this.#t()}async requestFailedWithResponse(e,t){await this.loadResponse(t),this.#t()}requestErrored(e,t){console.error(t),this.#t()}requestFinished(e){sc(this.element)}formSubmissionStarted({formElement:e}){ic(e,this.#h(e))}formSubmissionSucceededWithResponse(e,t){let i=this.#h(e.formElement,e.submitter);i.delegate.proposeVisitIfNavigatedWithAction(i,Tn(e.submitter,e.formElement,i)),i.delegate.loadResponse(t),e.isSafe||Ve.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),Ve.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){sc(e,this.#h(e))}allowsImmediateRender({element:e},t){let i=We("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...t},cancelable:!0}),{defaultPrevented:n,detail:{render:r}}=i;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!n}viewRenderedSnapshot(e,t,i){}preloadOnLoadLinksForView(e){Ve.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}visitCachedSnapshot=({element:e})=>{let t=e.querySelector("#"+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement};async#s(e,t){let i=await this.extractForeignFrameElement(t.body);if(i){let n=new Ur(i),r=new jr(this,this.view.snapshot,n,jr.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(r),this.complete=!0,Ve.frameRendered(e,this.element),Ve.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else this.#r(e)&&this.#d(e)}async#c(e){let t=new Gs(this,ei.get,e,new URLSearchParams,this.element);return this.#e?.cancel(),this.#e=t,new Promise(i=>{this.#t=()=>{this.#t=()=>{},this.#e=null,i()},t.perform()})}#n(e,t,i){let n=this.#h(e,i);n.delegate.proposeVisitIfNavigatedWithAction(n,Tn(i,e,n)),this.#v(e,()=>{n.src=t})}proposeVisitIfNavigatedWithAction(e,t=null){if(this.action=t,this.action){let i=vi.fromElement(e).clone(),{visitCachedSnapshot:n}=e.delegate;e.delegate.fetchResponseLoaded=async r=>{if(e.src){let{statusCode:o,redirected:a}=r,l=await r.responseHTML,u={response:{statusCode:o,redirected:a,responseHTML:l},visitCachedSnapshot:n,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:i};this.action&&(u.action=this.action),Ve.visit(e.src,u)}}}}changeHistory(){if(this.action){let e=sb(this.action);Ve.history.update(e,mt(this.element.src||""),this.restorationIdentifier)}}async#p(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#f(e.response)}#r(e){this.element.setAttribute("complete","");let t=e.response,i=async(r,o)=>{r instanceof Response?this.#f(r):Ve.visit(r,o)};return!We("turbo:frame-missing",{target:this.element,detail:{response:t,visit:i},cancelable:!0}).defaultPrevented}#d(e){this.view.missing(),this.#u(e)}#u(e){let t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new Hh(t)}async#f(e){let t=new $r(e),i=await t.responseHTML,{location:n,redirected:r,statusCode:o}=t;return Ve.visit(n,{response:{redirected:r,statusCode:o,responseHTML:i}})}#h(e,t){let i=tc("data-turbo-frame",t,e)||this.element.getAttribute("target");return Kv(i)??this.element}async extractForeignFrameElement(e){let t,i=CSS.escape(this.id);try{if(t=Jv(e.querySelector(`turbo-frame#${i}`),this.sourceURL),t)return t;if(t=Jv(e.querySelector(`turbo-frame[src][recurse~=${i}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(n){return console.error(n),new Li}return null}#y(e,t){let i=jh(e,t);return Vs(mt(i),this.rootLocation)}#m(e,t){let i=tc("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.#y(e,t)||!this.enabled||i=="_top")return!1;if(i){let n=Kv(i);if(n)return!n.disabled}return!(!Ve.elementIsNavigatable(e)||t&&!Ve.elementIsNavigatable(t))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.#g("src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#t()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){this.#g("complete",()=>{e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")})}get isActive(){return this.element.isActive&&this.#i}get rootLocation(){let t=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return mt(t)}#b(e){return this.#l.has(e)}#g(e,t){this.#l.add(e),t(),this.#l.delete(e)}#v(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement}};function Kv(s){if(s!=null){let e=document.getElementById(s);if(e instanceof Li)return e}}function Jv(s,e){if(s){let t=s.getAttribute("src");if(t!=null&&e!=null&&cx(t,e))throw new Error(`Matching <turbo-frame id="${s.id}"> element has a source URL which references itself`);if(s.ownerDocument!==document&&(s=document.importNode(s,!0)),s instanceof Li)return s.connectedCallback(),s.disconnectedCallback(),s}}var Gh={after(){this.targetElements.forEach(s=>s.parentElement?.insertBefore(this.templateContent,s.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.append(this.templateContent))},before(){this.targetElements.forEach(s=>s.parentElement?.insertBefore(this.templateContent,s))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.prepend(this.templateContent))},remove(){this.targetElements.forEach(s=>s.remove())},replace(){this.targetElements.forEach(s=>s.replaceWith(this.templateContent))},update(){this.targetElements.forEach(s=>{s.innerHTML="",s.append(this.templateContent)})},refresh(){Ve.refresh(this.baseURI,this.requestId)}},uc=class s extends HTMLElement{static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{let e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await Nr(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){let e=this.targetElements.flatMap(i=>[...i.children]).filter(i=>!!i.id),t=[...this.templateContent?.children||[]].filter(i=>!!i.id).map(i=>i.id);return e.filter(i=>t.includes(i.id))}get performAction(){if(this.action){let e=Gh[this.action];if(e)return e;this.#e("unknown action")}this.#e("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.#e("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#e("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}#e(e){throw new Error(`${this.description}: ${e}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:s.renderElement}})}get targetElementsById(){let e=this.ownerDocument?.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){let e=this.ownerDocument?.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}},dc=class extends HTMLElement{streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Wo(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),Go(this.streamSource))}get src(){return this.getAttribute("src")||""}};Li.delegateConstructor=Uh;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",Li);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",uc);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",dc);(()=>{let s=document.currentScript;if(s&&!s.hasAttribute("data-turbo-suppress-warning"))for(s=s.parentElement;s;){if(s==document.body)return console.warn(ib`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,s.outerHTML);s=s.parentElement}})();window.Turbo={...hC,StreamActions:Gh};Wh();var Pb;async function gC(){return Pb||Cb(vC().then(Cb))}function Cb(s){return Pb=s}async function vC(){let{createConsumer:s}=await Promise.resolve().then(()=>(xb(),Tb));return s()}async function _b(s,e){let{subscriptions:t}=await gC();return t.create(s,e)}function Qo(s){return!s||typeof s!="object"||s instanceof Date||s instanceof RegExp?s:Array.isArray(s)?s.map(Qo):Object.keys(s).reduce(function(e,t){var i=t[0].toLowerCase()+t.slice(1).replace(/([A-Z]+)/g,function(n,r){return"_"+r.toLowerCase()});return e[i]=Qo(s[t]),e},{})}var np=class extends HTMLElement{async connectedCallback(){Wo(this),this.subscription=await _b(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){Go(this),this.subscription&&this.subscription.unsubscribe()}dispatchMessageEvent(e){let t=new MessageEvent("message",{data:e});return this.dispatchEvent(t)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){let e=this.getAttribute("channel"),t=this.getAttribute("signed-stream-name");return{channel:e,signed_stream_name:t,...Qo({...this.dataset})}}};customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",np);function Ob(s){if(s.target instanceof HTMLFormElement){let{target:e,detail:{fetchOptions:t}}=s;e.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:i}}})=>{let n=EC(t.body)?t.body:new URLSearchParams,r=yC(i,n,e);/get/i.test(r)||(/post/i.test(r)?n.delete("_method"):n.set("_method",r),t.method="post")},{once:!0})}}function yC(s,e,t){let i=wC(s),n=e.get("_method"),r=t.getAttribute("method")||"get";return typeof i=="string"?i:typeof n=="string"?n:r}function wC(s){return s instanceof HTMLButtonElement||s instanceof HTMLInputElement?s.name==="_method"?s.value:s.hasAttribute("formmethod")?s.formMethod:null:null}function EC(s){return s instanceof FormData||s instanceof URLSearchParams}window.Turbo=Yh;addEventListener("turbo:before-fetch-request",Ob);var rp=class{constructor(e,t,i){this.eventTarget=e,this.eventName=t,this.eventOptions=i,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let t=SC(e);for(let i of this.bindings){if(t.immediatePropagationStopped)break;i.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{let i=e.index,n=t.index;return i<n?-1:i>n?1:0})}};function SC(s){if("immediatePropagationStopped"in s)return s;{let{stopImmediatePropagation:e}=s;return Object.assign(s,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}var op=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,i={}){this.application.handleError(e,`Error ${t}`,i)}clearEventListenersForBinding(e){let t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){let{eventTarget:t,eventName:i,eventOptions:n}=e,r=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(i,n);r.delete(o),r.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){let{eventTarget:t,eventName:i,eventOptions:n}=e;return this.fetchEventListener(t,i,n)}fetchEventListener(e,t,i){let n=this.fetchEventListenerMapForEventTarget(e),r=this.cacheKey(t,i),o=n.get(r);return o||(o=this.createEventListener(e,t,i),n.set(r,o)),o}createEventListener(e,t,i){let n=new rp(e,t,i);return this.started&&n.connect(),n}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){let i=[e];return Object.keys(t).sort().forEach(n=>{i.push(`${t[n]?"":"!"}${n}`)}),i.join(":")}},AC={stop({event:s,value:e}){return e&&s.stopPropagation(),!0},prevent({event:s,value:e}){return e&&s.preventDefault(),!0},self({event:s,value:e,element:t}){return e?t===s.target:!0}},TC=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function xC(s){let t=s.trim().match(TC)||[],i=t[2],n=t[3];return n&&!["keydown","keyup","keypress"].includes(i)&&(i+=`.${n}`,n=""),{eventTarget:CC(t[4]),eventName:i,eventOptions:t[7]?PC(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||n}}function CC(s){if(s=="window")return window;if(s=="document")return document}function PC(s){return s.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function _C(s){if(s==window)return"window";if(s==document)return"document"}function _p(s){return s.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function ap(s){return _p(s.replace(/--/g,"-").replace(/__/g,"_"))}function ta(s){return s.charAt(0).toUpperCase()+s.slice(1)}function zb(s){return s.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function OC(s){return s.match(/[^\s]+/g)||[]}function Mb(s){return s!=null}function lp(s,e){return Object.prototype.hasOwnProperty.call(s,e)}var Lb=["meta","ctrl","alt","shift"],cp=class{constructor(e,t,i,n){this.element=e,this.index=t,this.eventTarget=i.eventTarget||e,this.eventName=i.eventName||MC(e)||yc("missing event name"),this.eventOptions=i.eventOptions||{},this.identifier=i.identifier||yc("missing identifier"),this.methodName=i.methodName||yc("missing method name"),this.keyFilter=i.keyFilter||"",this.schema=n}static forToken(e,t){return new this(e.element,e.index,xC(e.content),t)}toString(){let e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;let t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;let i=t.filter(n=>!Lb.includes(n))[0];return i?(lp(this.keyMappings,i)||yc(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[i].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;let t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){let e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:i,value:n}of Array.from(this.element.attributes)){let r=i.match(t),o=r&&r[1];o&&(e[_p(o)]=LC(n))}return e}get eventTargetName(){return _C(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){let[i,n,r,o]=Lb.map(a=>t.includes(a));return e.metaKey!==i||e.ctrlKey!==n||e.altKey!==r||e.shiftKey!==o}},kb={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:s=>s.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function MC(s){let e=s.tagName.toLowerCase();if(e in kb)return kb[e](s)}function yc(s){throw new Error(s)}function LC(s){try{return JSON.parse(s)}catch{return s}}var up=class{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){let t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){let{element:t}=this.action,{actionDescriptorFilters:i}=this.context.application,{controller:n}=this.context,r=!0;for(let[o,a]of Object.entries(this.eventOptions))if(o in i){let l=i[o];r=r&&l({name:o,value:a,event:e,element:t,controller:n})}else continue;return r}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){let{target:t,currentTarget:i}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:i,action:this.methodName})}catch(n){let{identifier:r,controller:o,element:a,index:l}=this,c={identifier:r,controller:o,element:a,index:l,event:e};this.context.handleError(n,`invoking action "${this.action}"`,c)}}willBeInvokedByEvent(e){let t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},wc=class{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(let t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(let t of Array.from(e)){let i=this.elementFromNode(t);i&&this.processTree(i,this.removeElement)}}processAddedNodes(e){for(let t of Array.from(e)){let i=this.elementFromNode(t);i&&this.elementIsActive(i)&&this.processTree(i,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(let i of this.matchElementsInTree(e))t.call(this,i)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},Ec=class{constructor(e,t,i){this.attributeName=t,this.delegate=i,this.elementObserver=new wc(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(this.selector));return t.concat(i)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}};function kC(s,e,t){$b(s,e).add(t)}function DC(s,e,t){$b(s,e).delete(t),IC(s,e)}function $b(s,e){let t=s.get(e);return t||(t=new Set,s.set(e,t)),t}function IC(s,e){let t=s.get(e);t!=null&&t.size==0&&s.delete(e)}var ds=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t.concat(Array.from(i)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t+i.size,0)}add(e,t){kC(this.valuesByKey,e,t)}delete(e,t){DC(this.valuesByKey,e,t)}has(e,t){let i=this.valuesByKey.get(e);return i!=null&&i.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(i=>i.has(e))}getValuesForKey(e){let t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,i])=>i.has(e)).map(([t,i])=>t)}};var dp=class{constructor(e,t,i,n){this._selector=t,this.details=n,this.elementObserver=new wc(e,this),this.delegate=i,this.matchesByElement=new ds}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){let{selector:t}=this;if(t){let i=e.matches(t);return this.delegate.selectorMatchElement?i&&this.delegate.selectorMatchElement(e,this.details):i}else return!1}matchElementsInTree(e){let{selector:t}=this;if(t){let i=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(t)).filter(r=>this.matchElement(r));return i.concat(n)}else return[]}elementMatched(e){let{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){let t=this.matchesByElement.getKeysForValue(e);for(let i of t)this.selectorUnmatched(e,i)}elementAttributeChanged(e,t){let{selector:i}=this;if(i){let n=this.matchElement(e),r=this.matchesByElement.has(i,e);n&&!r?this.selectorMatched(e,i):!n&&r&&this.selectorUnmatched(e,i)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}},hp=class{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){let t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){let i=this.delegate.getStringMapKeyForAttribute(e);if(i!=null){this.stringMap.has(e)||this.stringMapKeyAdded(i,e);let n=this.element.getAttribute(e);if(this.stringMap.get(e)!=n&&this.stringMapValueChanged(n,i,t),n==null){let r=this.stringMap.get(e);this.stringMap.delete(e),r&&this.stringMapKeyRemoved(i,e,r)}else this.stringMap.set(e,n)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,i){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,i)}stringMapKeyRemoved(e,t,i){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,i)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},Sc=class{constructor(e,t,i){this.attributeObserver=new Ec(e,t,this),this.delegate=i,this.tokensByElement=new ds}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[t,i]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(i)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let t=this.tokensByElement.getValuesForKey(e),i=this.readTokensForElement(e),n=RC(t,i).findIndex(([r,o])=>!NC(r,o));return n==-1?[[],[]]:[t.slice(n),i.slice(n)]}readTokensForElement(e){let t=this.attributeName,i=e.getAttribute(t)||"";return FC(i,e,t)}};function FC(s,e,t){return s.trim().split(/\s+/).filter(i=>i.length).map((i,n)=>({element:e,attributeName:t,content:i,index:n}))}function RC(s,e){let t=Math.max(s.length,e.length);return Array.from({length:t},(i,n)=>[s[n],e[n]])}function NC(s,e){return s&&e&&s.index==e.index&&s.content==e.content}var Ac=class{constructor(e,t,i){this.tokenListObserver=new Sc(e,t,this),this.delegate=i,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).set(e,i),this.delegate.elementMatchedValue(t,i))}tokenUnmatched(e){let{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,i))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}},pp=class{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Ac(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let t=new up(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){let t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){let t=cp.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}},fp=class{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new hp(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){let i=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,i.writer(this.receiver[e]),i.writer(i.defaultValue))}stringMapValueChanged(e,t,i){let n=this.valueDescriptorNameMap[t];e!==null&&(i===null&&(i=n.writer(n.defaultValue)),this.invokeChangedCallback(t,e,i))}stringMapKeyRemoved(e,t,i){let n=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,n.writer(this.receiver[e]),i):this.invokeChangedCallback(e,n.writer(n.defaultValue),i)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:t,defaultValue:i,writer:n}of this.valueDescriptors)i!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,n(i),void 0)}invokeChangedCallback(e,t,i){let n=`${e}Changed`,r=this.receiver[n];if(typeof r=="function"){let o=this.valueDescriptorNameMap[e];try{let a=o.reader(t),l=i;i&&(l=o.reader(i)),r.call(this.receiver,a,l)}catch(a){throw a instanceof TypeError&&(a.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${a.message}`),a}}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{let i=this.valueDescriptorMap[t];e[i.name]=i}),e}hasValue(e){let t=this.valueDescriptorNameMap[e],i=`has${ta(t.name)}`;return this.receiver[i]}},mp=class{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new ds}start(){this.tokenListObserver||(this.tokenListObserver=new Sc(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var i;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var i;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function ia(s,e){let t=Hb(s);return Array.from(t.reduce((i,n)=>(zC(n,e).forEach(r=>i.add(r)),i),new Set))}function BC(s,e){return Hb(s).reduce((i,n)=>(i.push(...$C(n,e)),i),[])}function Hb(s){let e=[];for(;s;)e.push(s),s=Object.getPrototypeOf(s);return e.reverse()}function zC(s,e){let t=s[e];return Array.isArray(t)?t:[]}function $C(s,e){let t=s[e];return t?Object.keys(t).map(i=>[i,t[i]]):[]}var gp=class{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new ds,this.outletElementsByName=new ds,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:i}){let n=this.getOutlet(e,i);n&&this.connectOutlet(n,e,i)}selectorUnmatched(e,t,{outletName:i}){let n=this.getOutletFromMap(e,i);n&&this.disconnectOutlet(n,e,i)}selectorMatchElement(e,{outletName:t}){let i=this.selector(t),n=this.hasOutlet(e,t),r=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return i?n&&r&&e.matches(i):!1}elementMatchedAttribute(e,t){let i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}elementAttributeValueChanged(e,t){let i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}elementUnmatchedAttribute(e,t){let i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}connectOutlet(e,t,i){var n;this.outletElementsByName.has(i,t)||(this.outletsByName.add(i,e),this.outletElementsByName.add(i,t),(n=this.selectorObserverMap.get(i))===null||n===void 0||n.pause(()=>this.delegate.outletConnected(e,t,i)))}disconnectOutlet(e,t,i){var n;this.outletElementsByName.has(i,t)&&(this.outletsByName.delete(i,e),this.outletElementsByName.delete(i,t),(n=this.selectorObserverMap.get(i))===null||n===void 0||n.pause(()=>this.delegate.outletDisconnected(e,t,i)))}disconnectAllOutlets(){for(let e of this.outletElementsByName.keys)for(let t of this.outletElementsByName.getValuesForKey(e))for(let i of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(i,t,e)}updateSelectorObserverForOutlet(e){let t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){let t=this.selector(e),i=new dp(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,i),i.start()}setupAttributeObserverForOutlet(e){let t=this.attributeNameForOutletName(e),i=new Ec(this.scope.element,t,this);this.attributeObserverMap.set(e,i),i.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){let e=new ds;return this.router.modules.forEach(t=>{let i=t.definition.controllerConstructor;ia(i,"outlets").forEach(r=>e.add(r,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(i=>i.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},vp=class{constructor(e,t){this.logDebugActivity=(i,n={})=>{let{identifier:r,controller:o,element:a}=this;n=Object.assign({identifier:r,controller:o,element:a},n),this.application.logDebugActivity(this.identifier,i,n)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new pp(this,this.dispatcher),this.valueObserver=new fp(this,this.controller),this.targetObserver=new mp(this,this),this.outletObserver=new gp(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(i){this.handleError(i,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,i={}){let{identifier:n,controller:r,element:o}=this;i=Object.assign({identifier:n,controller:r,element:o},i),this.application.handleError(e,`Error ${t}`,i)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,i){this.invokeControllerMethod(`${ap(i)}OutletConnected`,e,t)}outletDisconnected(e,t,i){this.invokeControllerMethod(`${ap(i)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){let i=this.controller;typeof i[e]=="function"&&i[e](...t)}};function HC(s){return UC(s,jC(s))}function UC(s,e){let t=GC(s),i=VC(s.prototype,e);return Object.defineProperties(t.prototype,i),t}function jC(s){return ia(s,"blessings").reduce((t,i)=>{let n=i(s);for(let r in n){let o=t[r]||{};t[r]=Object.assign(o,n[r])}return t},{})}function VC(s,e){return WC(e).reduce((t,i)=>{let n=qC(s,e,i);return n&&Object.assign(t,{[i]:n}),t},{})}function qC(s,e,t){let i=Object.getOwnPropertyDescriptor(s,t);if(!(i&&"value"in i)){let r=Object.getOwnPropertyDescriptor(e,t).value;return i&&(r.get=i.get||r.get,r.set=i.set||r.set),r}}var WC=typeof Object.getOwnPropertySymbols=="function"?s=>[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)]:Object.getOwnPropertyNames,GC=(()=>{function s(t){function i(){return Reflect.construct(t,arguments,new.target)}return i.prototype=Object.create(t.prototype,{constructor:{value:i}}),Reflect.setPrototypeOf(i,t),i}function e(){let i=s(function(){this.a.call(this)});return i.prototype.a=function(){},new i}try{return e(),s}catch{return i=>class extends i{}}})();function YC(s){return{identifier:s.identifier,controllerConstructor:HC(s.controllerConstructor)}}var bp=class{constructor(e,t){this.application=e,this.definition=YC(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){let t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new vp(this,e),this.contextsByScope.set(e,t)),t}},yp=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){let t=this.data.get(this.getDataKey(e))||"";return OC(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},wp=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){let i=this.getAttributeNameForKey(e);return this.element.setAttribute(i,t),this.get(e)}has(e){let t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){let t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${zb(e)}`}},Ep=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,i){let n=this.warnedKeysByObject.get(e);n||(n=new Set,this.warnedKeysByObject.set(e,n)),n.has(t)||(n.add(t),this.logger.warn(i,e))}};function Sp(s,e){return`[${s}~="${e}"]`}var Ap=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findTarget(i)||this.findLegacyTarget(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllTargets(i),...this.findAllLegacyTargets(i)],[])}findTarget(e){let t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){let t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){let t=this.schema.targetAttributeForScope(this.identifier);return Sp(t,e)}findLegacyTarget(e){let t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){let t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(i=>this.deprecate(i,e))}getLegacySelectorForTargetName(e){let t=`${this.identifier}.${e}`;return Sp(this.schema.targetAttribute,t)}deprecate(e,t){if(e){let{identifier:i}=this,n=this.schema.targetAttribute,r=this.schema.targetAttributeForScope(i);this.guide.warn(e,`target:${t}`,`Please replace ${n}="${i}.${t}" with ${r}="${t}". The ${n} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},Tp=class{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findOutlet(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllOutlets(i)],[])}getSelectorForOutletName(e){let t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){let t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){let t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(n=>this.matchesElement(n,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(n=>this.matchesElement(n,e,t))}matchesElement(e,t,i){let n=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&n.split(" ").includes(i)}},xp=class s{constructor(e,t,i,n){this.targets=new Ap(this),this.classes=new yp(this),this.data=new wp(this),this.containsElement=r=>r.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=i,this.guide=new Ep(n),this.outlets=new Tp(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return Sp(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new s(this.schema,document.documentElement,this.identifier,this.guide.logger)}},Cp=class{constructor(e,t,i){this.element=e,this.schema=t,this.delegate=i,this.valueListObserver=new Ac(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:t,content:i}=e;return this.parseValueForElementAndIdentifier(t,i)}parseValueForElementAndIdentifier(e,t){let i=this.fetchScopesByIdentifierForElement(e),n=i.get(t);return n||(n=this.delegate.createScopeForElementAndIdentifier(e,t),i.set(t,n)),n}elementMatchedValue(e,t){let i=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,i),i==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){let i=this.scopeReferenceCounts.get(t);i&&(this.scopeReferenceCounts.set(t,i-1),i==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}},Pp=class{constructor(e){this.application=e,this.scopeObserver=new Cp(this.element,this.schema,this),this.scopesByIdentifier=new ds,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let t=new bp(this.application,e);this.connectModule(t);let i=e.controllerConstructor.afterLoad;i&&i.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){let t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){let i=this.modulesByIdentifier.get(t);if(i)return i.contexts.find(n=>n.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){let i=this.scopeObserver.parseValueForElementAndIdentifier(e,t);i?this.scopeObserver.elementMatchedValue(i.element,i):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,i){this.application.handleError(e,t,i)}createScopeForElementAndIdentifier(e,t){return new xp(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.connectContextForScope(i))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.disconnectContextForScope(i))}},XC={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:s=>`data-${s}-target`,outletAttributeForScope:(s,e)=>`data-${s}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Db("abcdefghijklmnopqrstuvwxyz".split("").map(s=>[s,s]))),Db("0123456789".split("").map(s=>[s,s])))};function Db(s){return s.reduce((e,[t,i])=>Object.assign(Object.assign({},e),{[t]:i}),{})}var Tc=class{constructor(e=document.documentElement,t=XC){this.logger=console,this.debug=!1,this.logDebugActivity=(i,n,r={})=>{this.debug&&this.logFormattedMessage(i,n,r)},this.element=e,this.schema=t,this.dispatcher=new op(this),this.router=new Pp(this),this.actionDescriptorFilters=Object.assign({},AC)}static start(e,t){let i=new this(e,t);return i.start(),i}async start(){await KC(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(n=>{n.controllerConstructor.shouldLoad&&this.router.loadDefinition(n)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(n=>this.router.unloadIdentifier(n))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){let i=this.router.getContextForElementAndIdentifier(e,t);return i?i.controller:null}handleError(e,t,i){var n;this.logger.error(`%s

%o

%o`,t,e,i),(n=window.onerror)===null||n===void 0||n.call(window,t,"",0,0,e)}logFormattedMessage(e,t,i={}){i=Object.assign({application:this},i),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},i)),this.logger.groupEnd()}};function KC(){return new Promise(s=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>s()):s()})}function JC(s){return ia(s,"classes").reduce((t,i)=>Object.assign(t,ZC(i)),{})}function ZC(s){return{[`${s}Class`]:{get(){let{classes:e}=this;if(e.has(s))return e.get(s);{let t=e.getAttributeName(s);throw new Error(`Missing attribute "${t}"`)}}},[`${s}Classes`]:{get(){return this.classes.getAll(s)}},[`has${ta(s)}Class`]:{get(){return this.classes.has(s)}}}}function QC(s){return ia(s,"outlets").reduce((t,i)=>Object.assign(t,eP(i)),{})}function Ib(s,e,t){return s.application.getControllerForElementAndIdentifier(e,t)}function Fb(s,e,t){let i=Ib(s,e,t);if(i||(s.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),i=Ib(s,e,t),i))return i}function eP(s){let e=ap(s);return{[`${e}Outlet`]:{get(){let t=this.outlets.find(s),i=this.outlets.getSelectorForOutletName(s);if(t){let n=Fb(this,t,s);if(n)return n;throw new Error(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${e}Outlets`]:{get(){let t=this.outlets.findAll(s);return t.length>0?t.map(i=>{let n=Fb(this,i,s);if(n)return n;console.warn(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`,i)}).filter(i=>i):[]}},[`${e}OutletElement`]:{get(){let t=this.outlets.find(s),i=this.outlets.getSelectorForOutletName(s);if(t)return t;throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(s)}},[`has${ta(e)}Outlet`]:{get(){return this.outlets.has(s)}}}}function tP(s){return ia(s,"targets").reduce((t,i)=>Object.assign(t,iP(i)),{})}function iP(s){return{[`${s}Target`]:{get(){let e=this.targets.find(s);if(e)return e;throw new Error(`Missing target element "${s}" for "${this.identifier}" controller`)}},[`${s}Targets`]:{get(){return this.targets.findAll(s)}},[`has${ta(s)}Target`]:{get(){return this.targets.has(s)}}}}function sP(s){let e=BC(s,"values"),t={valueDescriptorMap:{get(){return e.reduce((i,n)=>{let r=Ub(n,this.identifier),o=this.data.getAttributeNameForKey(r.key);return Object.assign(i,{[o]:r})},{})}}};return e.reduce((i,n)=>Object.assign(i,nP(n)),t)}function nP(s,e){let t=Ub(s,e),{key:i,name:n,reader:r,writer:o}=t;return{[n]:{get(){let a=this.data.get(i);return a!==null?r(a):t.defaultValue},set(a){a===void 0?this.data.delete(i):this.data.set(i,o(a))}},[`has${ta(n)}`]:{get(){return this.data.has(i)||t.hasCustomDefaultValue}}}}function Ub([s,e],t){return lP({controller:t,token:s,typeDefinition:e})}function xc(s){switch(s){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function ea(s){switch(typeof s){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(s))return"array";if(Object.prototype.toString.call(s)==="[object Object]")return"object"}function rP(s){let{controller:e,token:t,typeObject:i}=s,n=Mb(i.type),r=Mb(i.default),o=n&&r,a=n&&!r,l=!n&&r,c=xc(i.type),u=ea(s.typeObject.default);if(a)return c;if(l)return u;if(c!==u){let h=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${h}" must match the defined type "${c}". The provided default value of "${i.default}" is of type "${u}".`)}if(o)return c}function oP(s){let{controller:e,token:t,typeDefinition:i}=s,r=rP({controller:e,token:t,typeObject:i}),o=ea(i),a=xc(i),l=r||o||a;if(l)return l;let c=e?`${e}.${i}`:t;throw new Error(`Unknown value type "${c}" for "${t}" value`)}function aP(s){let e=xc(s);if(e)return Rb[e];let t=lp(s,"default"),i=lp(s,"type"),n=s;if(t)return n.default;if(i){let{type:r}=n,o=xc(r);if(o)return Rb[o]}return s}function lP(s){let{token:e,typeDefinition:t}=s,i=`${zb(e)}-value`,n=oP(s);return{type:n,key:i,name:_p(i),get defaultValue(){return aP(t)},get hasCustomDefaultValue(){return ea(t)!==void 0},reader:cP[n],writer:Nb[n]||Nb.default}}var Rb={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},cP={array(s){let e=JSON.parse(s);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${s}" of type "${ea(e)}"`);return e},boolean(s){return!(s=="0"||String(s).toLowerCase()=="false")},number(s){return Number(s.replace(/_/g,""))},object(s){let e=JSON.parse(s);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${s}" of type "${ea(e)}"`);return e},string(s){return s}},Nb={default:uP,array:Bb,object:Bb};function Bb(s){return JSON.stringify(s)}function uP(s){return`${s}`}var Oe=class{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:i={},prefix:n=this.identifier,bubbles:r=!0,cancelable:o=!0}={}){let a=n?`${n}:${e}`:e,l=new CustomEvent(a,{detail:i,bubbles:r,cancelable:o});return t.dispatchEvent(l),l}};Oe.blessings=[JC,tP,sP,QC];Oe.targets=[];Oe.outlets=[];Oe.values={};var Et=Tc.start();Et.debug=!1;window.Stimulus=Et;var fy=Ue(qp()),Mc=class extends Oe{connect(){}call(s){let e=this.element.getAttribute("data-confirm");confirm(e)||s.preventDefault()}newCall(s){let e=document.getElementById("mainModal"),t=e.querySelector("#mainModalCompleteBtn"),i=new fy.Modal(e),n=this.element.getAttribute("data-confirm");if(s.target.hasAttribute("data-confirmed"))return console.log(s.target),s.target.removeAttribute("data-confirmed");s.preventDefault(),e.querySelector(".modal-body").textContent=n;let r=n.toLowerCase().includes("\u0443\u0434\u0430\u043B");t.textContent=r?"\u0423\u0434\u0430\u043B\u0438\u0442\u044C":"\u041E\u041A",e.querySelector("#mainModalTitle").textContent="\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435!",t.classList.remove("btn-primary"),t.classList.add("btn-danger"),i.show(),t.addEventListener("click",()=>{i.hide(),s.target.setAttribute("data-confirmed","true"),s.target.click(),setTimeout(()=>{s.target.removeAttribute("data-confirmed")},0)})}};var Lc=class extends Oe{call(s){this.element.insertAdjacentHTML("afterbegin",'<div id="loader" class="loader"></div>'),setTimeout(()=>{this.element.querySelector("#loader").remove()},1e3)}};var kc=class extends Oe{connect(){this.startTimer()}startTimer(){this.timer=setInterval(()=>{this.fadeOutAndRemove()},7e3)}fadeOutAndRemove(){this.element.classList.add("fade-out"),setTimeout(()=>{this.element.remove()},1e3)}close(){clearInterval(this.timer),this.fadeOutAndRemove()}};var Dc=class extends Oe{clearForm(s){s.detail.success&&this.element.reset()}};var he=(s,e=1e4)=>(s=parseFloat(s+"")||0,Math.round((s+Number.EPSILON)*e)/e),cf=function(s){if(!(s&&s instanceof Element&&s.offsetParent))return!1;let e=s.scrollHeight>s.clientHeight,t=window.getComputedStyle(s).overflowY,i=t.indexOf("hidden")!==-1,n=t.indexOf("visible")!==-1;return e&&!i&&!n},Wc=function(s,e=void 0){return!(!s||s===document.body||e&&s===e)&&(cf(s)?s:Wc(s.parentElement,e))},Xi=function(s){var e=new DOMParser().parseFromString(s,"text/html").body;if(e.childElementCount>1){for(var t=document.createElement("div");e.firstChild;)t.appendChild(e.firstChild);return t}return e.firstChild},pf=s=>`${s||""}`.split(" ").filter(e=>!!e),Ki=(s,e,t)=>{s&&pf(e).forEach(i=>{s.classList.toggle(i,t||!1)})},Zs=class{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}},Jr={passive:!1},uf=class{constructor(e,{start:t=()=>!0,move:i=()=>{},end:n=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=t,this.moveCallback=i,this.endCallback=n;for(let r of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[r]=this[r].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,Jr),this.element.addEventListener("touchstart",this.onTouchStart,Jr),this.element.addEventListener("touchmove",this.onMove,Jr),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(!e.buttons||e.button!==0)return;let t=new Zs(e);this.currentPointers.some(i=>i.id===t.id)||this.triggerPointerStart(t,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(e){for(let t of Array.from(e.changedTouches||[]))this.triggerPointerStart(new Zs(t),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){let t=this.currentPointers.slice(),i="changedTouches"in e?Array.from(e.changedTouches||[]).map(r=>new Zs(r)):[new Zs(e)],n=[];for(let r of i){let o=this.currentPointers.findIndex(a=>a.id===r.id);o<0||(n.push(r),this.currentPointers[o]=r)}n.length&&this.moveCallback(e,this.currentPointers.slice(),t)}onPointerEnd(e){e.buttons>0&&e.button!==0||(this.triggerPointerEnd(e,new Zs(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(let t of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new Zs(t))}triggerPointerStart(e,t){return!!this.startCallback(t,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,t){let i=this.currentPointers.findIndex(n=>n.id===t.id);i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(e,t,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){let e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,Jr),this.element.removeEventListener("touchstart",this.onTouchStart,Jr),this.element.removeEventListener("touchmove",this.onMove,Jr),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}};function my(s,e){return e?Math.sqrt(Math.pow(e.clientX-s.clientX,2)+Math.pow(e.clientY-s.clientY,2)):0}function gy(s,e){return e?{clientX:(s.clientX+e.clientX)/2,clientY:(s.clientY+e.clientY)/2}:s}var df=s=>typeof s=="object"&&s!==null&&s.constructor===Object&&Object.prototype.toString.call(s)==="[object Object]",qt=(s,...e)=>{let t=e.length;for(let i=0;i<t;i++){let n=e[i]||{};Object.entries(n).forEach(([r,o])=>{let a=Array.isArray(o)?[]:{};s[r]||Object.assign(s,{[r]:a}),df(o)?Object.assign(s[r],qt(a,o)):Array.isArray(o)?Object.assign(s,{[r]:[...o]}):Object.assign(s,{[r]:o})})}return s},Wp=function(s,e){return s.split(".").reduce((t,i)=>typeof t=="object"?t[i]:void 0,e)},io=class{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(let t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}setOptions(e){this.options=e?qt({},this.constructor.defaults,e):{};for(let[t,i]of Object.entries(this.option("on")||{}))this.on(t,i)}option(e,...t){let i=Wp(e,this.options);return i&&typeof i=="function"&&(i=i.call(this,this,...t)),i}optionFor(e,t,i,...n){let r=Wp(t,e);var o;typeof(o=r)!="string"||isNaN(o)||isNaN(parseFloat(o))||(r=parseFloat(r)),r==="true"&&(r=!0),r==="false"&&(r=!1),r&&typeof r=="function"&&(r=r.call(this,this,e,...n));let a=Wp(t,this.options);return a&&typeof a=="function"?r=a.call(this,this,e,...n,r):r===void 0&&(r=a),r===void 0?i:r}cn(e){let t=this.options.classes;return t&&t[e]||""}localize(e,t=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(i,n,r)=>{let o="";return r?o=this.option(`${n[0]+n.toLowerCase().substring(1)}.l10n.${r}`):n&&(o=this.option(`l10n.${n}`)),o||(o=i),o});for(let i=0;i<t.length;i++)e=e.split(t[i][0]).join(t[i][1]);return e=e.replace(/\{\{(.*?)\}\}/g,(i,n)=>n)}on(e,t){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),this.events||(this.events=new Map),i.forEach(n=>{let r=this.events.get(n);r||(this.events.set(n,[]),r=[]),r.includes(t)||r.push(t),this.events.set(n,r)})}off(e,t){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),i.forEach(n=>{let r=this.events.get(n);if(Array.isArray(r)){let o=r.indexOf(t);o>-1&&r.splice(o,1)}})}emit(e,...t){[...this.events.get(e)||[]].forEach(i=>i(this,...t)),e!=="*"&&this.emit("*",e,...t)}};Object.defineProperty(io,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.33"}),Object.defineProperty(io,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});var fa=class extends io{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){let t=new Map;for(let[i,n]of Object.entries(e)){let r=this.option(i),o=this.plugins[i];o||r===!1?o&&r===!1&&(o.detach(),delete this.plugins[i]):t.set(i,new n(this,r||{}))}for(let[i,n]of t)this.plugins[i]=n,n.attach()}detachPlugins(e){e=e||Object.keys(this.plugins);for(let t of e){let i=this.plugins[t];i&&i.detach(),delete this.plugins[t]}return this.emit("detachPlugins"),this}},De;(function(s){s[s.Init=0]="Init",s[s.Error=1]="Error",s[s.Ready=2]="Ready",s[s.Panning=3]="Panning",s[s.Mousemove=4]="Mousemove",s[s.Destroy=5]="Destroy"})(De||(De={}));var ps=["a","b","c","d","e","f"],Uy={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},l_={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:Uy},vy='<circle cx="25" cy="25" r="20"></circle>',ff='<div class="f-spinner"><svg viewBox="0 0 50 50">'+vy+vy+"</svg></div>",Vt=s=>s&&s!==null&&s instanceof Element&&"nodeType"in s,ke=(s,e)=>{s&&pf(e).forEach(t=>{s.classList.remove(t)})},ge=(s,e)=>{s&&pf(e).forEach(t=>{s.classList.add(t)})},Ic={a:1,b:0,c:0,d:1,e:0,f:0},c_=1e5,Fc=1e4,Ei="mousemove",by="drag",yy="content",Gp=null,Yp=null,Fn=class s extends fa{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return Yp===null&&(Yp=window.matchMedia("(hover: none)").matches),Yp}get isMobile(){return Gp===null&&(Gp=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),Gp}get panMode(){return this.options.panMode!==Ei||this.isTouchDevice?by:Ei}get panOnlyZoomed(){let e=this.options.panOnlyZoomed;return e==="auto"?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){let{a:e,b:t}=this.current;return Math.sqrt(e*e+t*t)||1}get targetScale(){let{a:e,b:t}=this.target;return Math.sqrt(e*e+t*t)||1}get minScale(){return this.option("minScale")||1}get fullScale(){let{contentRect:e}=this;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){let{containerRect:e,contentRect:t}=this,i=Math.max(e.height/t.fitHeight,e.width/t.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){let e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(let e of ps){let t=e=="e"||e==="f"?1e-4:1e-5;if(Math.abs(this.target[e]-this.current[e])>t)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,t={},i={}){var n;if(super(t),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:De.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Ic)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Ic)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},s.Plugins),i)),this.emit("attachPlugins"),this.emit("init");let r=this.content;if(r.addEventListener("load",this.onLoad),r.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){e.classList.add(this.cn("isLoading"));let o=Xi(ff);!e.contains(r)||r.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(o):this.spinner=((n=r.parentElement)===null||n===void 0?void 0:n.insertBefore(o,r))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){let{container:e}=this,t=this.cn(yy),i=this.option(yy)||e.querySelector(`.${t}`);if(i||(i=e.querySelector("img,picture")||e.firstElementChild,i&&ge(i,t)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){let{spinner:e,container:t,state:i}=this;e&&(e.remove(),this.spinner=null),this.option("spinner")&&t.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===De.Init?this.enable():this.updateMetrics()}onError(){this.state!==De.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=De.Error,this.emit("error"))}getNextScale(e){let{fullScale:t,targetScale:i,coverScale:n,maxScale:r,minScale:o}=this,a=o;switch(e){case"toggleMax":a=i-o<.5*(r-o)?r:o;break;case"toggleCover":a=i-o<.5*(n-o)?n:o;break;case"toggleZoom":a=i-o<.5*(t-o)?t:o;break;case"iterateZoom":let l=[1,t,r].sort((u,h)=>u-h),c=l.findIndex(u=>u>i+1e-5);a=l[c]||1}return a}attachObserver(){var e;let t=()=>{let{container:i,containerRect:n}=this;return Math.abs(n.width-i.getBoundingClientRect().width)>.1||Math.abs(n.height-i.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(t()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{t()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(e=this.resizeObserver)===null||e===void 0||e.observe(this.container)}detachObserver(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}attachEvents(){let{container:e}=this;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new uf(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(Ei,this.onMouseMove)}detachEvents(){var e;let{container:t}=this;t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("wheel",this.onWheel,{passive:!1}),(e=this.pointerTracker)===null||e===void 0||e.stop(),this.pointerTracker=null,document.removeEventListener(Ei,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();let e=this.friction,t=this.option("maxVelocity");for(let i of ps)e?(this.velocity[i]*=1-e,t&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],t),-1*t)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(let e of ps)e==="e"&&this.isBouncingX||e==="f"&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,t=0){let{current:i}=this,n=i.e+e,r=i.f+t,o=this.getBounds(),{x:a,y:l}=o,c=a.min,u=a.max,h=l.min,f=l.max,p=0,g=0;return c!==1/0&&n<c?p=c-n:u!==1/0&&n>u&&(p=u-n),h!==1/0&&r<h?g=h-r:f!==1/0&&r>f&&(g=f-r),Math.abs(p)<1e-4&&(p=0),Math.abs(g)<1e-4&&(g=0),Object.assign(Object.assign({},o),{xDiff:p,yDiff:g,inBounds:!p&&!g})}clampTargetBounds(){let{target:e}=this,{x:t,y:i}=this.getBounds();t.min!==1/0&&(e.e=Math.max(e.e,t.min)),t.max!==1/0&&(e.e=Math.min(e.e,t.max)),i.min!==1/0&&(e.f=Math.max(e.f,i.min)),i.max!==1/0&&(e.f=Math.min(e.f,i.max))}calculateContentDim(e=this.current){let{content:t,contentRect:i}=this,{fitWidth:n,fitHeight:r,fullWidth:o,fullHeight:a}=i,l=o,c=a;if(this.option("zoom")||this.angle!==0){let u=!(t instanceof HTMLImageElement)&&(window.getComputedStyle(t).maxWidth==="none"||window.getComputedStyle(t).maxHeight==="none"),h=u?o:n,f=u?a:r,p=this.getMatrix(e),g=new DOMPoint(0,0).matrixTransform(p),y=new DOMPoint(0+h,0).matrixTransform(p),A=new DOMPoint(0+h,0+f).matrixTransform(p),S=new DOMPoint(0,0+f).matrixTransform(p),O=Math.abs(A.x-g.x),I=Math.abs(A.y-g.y),F=Math.abs(S.x-y.x),H=Math.abs(S.y-y.y);l=Math.max(O,F),c=Math.max(I,H)}return{contentWidth:l,contentHeight:c}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===Ei||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);let{target:e}=this,{x:t,y:i,xDiff:n,yDiff:r}=this.checkBounds(),o=this.option("maxVelocity"),a=this.velocity.e,l=this.velocity.f;n!==0?(this.isBouncingX=!0,n*a<=0?a+=.14*n:(a=.14*n,t.min!==1/0&&(this.target.e=Math.max(e.e,t.min)),t.max!==1/0&&(this.target.e=Math.min(e.e,t.max))),o&&(a=Math.max(Math.min(a,o),-1*o))):this.isBouncingX=!1,r!==0?(this.isBouncingY=!0,r*l<=0?l+=.14*r:(l=.14*r,i.min!==1/0&&(this.target.f=Math.max(e.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(e.f,i.max))),o&&(l=Math.max(Math.min(l,o),-1*o))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=a),this.isBouncingY&&(this.velocity.f=l)}enable(){let{content:e}=this,t=new DOMMatrixReadOnly(window.getComputedStyle(e).transform);for(let i of ps)this.current[i]=this.target[i]=t[i];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=De.Ready,this.emit("ready")}onClick(e){var t;e.type==="click"&&e.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((t=this.pointerTracker)===null||t===void 0||t.clear(),this.trackingPoints=[],this.startDecelAnim());let i=e.target;if(!i||e.defaultPrevented)return;if(i.hasAttribute("disabled"))return e.preventDefault(),void e.stopPropagation();if((()=>{let p=window.getSelection();return p&&p.type==="Range"})()&&!i.closest("button"))return;let n=i.closest("[data-panzoom-action]"),r=i.closest("[data-panzoom-change]"),o=n||r,a=o&&Vt(o)?o.dataset:null;if(a){let p=a.panzoomChange,g=a.panzoomAction;if((p||g)&&e.preventDefault(),p){let y={};try{y=JSON.parse(p)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(y)}if(g)return void(this[g]&&this[g]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return e.preventDefault(),void e.stopPropagation();if(i.closest("[data-fancybox]"))return;let l=this.content.getBoundingClientRect(),c=this.dragStart;if(c.time&&!this.canZoomOut()&&(Math.abs(l.x-c.x)>2||Math.abs(l.y-c.y)>2))return;this.dragStart.time=0;let u=p=>{this.option("zoom",e)&&p&&typeof p=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(p)&&typeof this[p]=="function"&&(e.preventDefault(),this[p]({event:e}))},h=this.option("click",e),f=this.option("dblClick",e);f?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",e),!e.defaultPrevented&&h&&u(h)):(this.emit("dblClick",e),e.defaultPrevented||u(f)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",e),!e.defaultPrevented&&h&&u(h))}addTrackingPoint(e){let t=this.trackingPoints.filter(i=>i.time>Date.now()-100);t.push(e),this.trackingPoints=t}onPointerDown(e,t,i){var n;if(this.option("touch",e)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];let r=this.content.getBoundingClientRect();if(this.dragStart={x:r.x,y:r.y,top:r.top,left:r.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===Ei&&this.targetScale>1)return e.preventDefault(),e.stopPropagation(),!1;let o=e.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(o.nodeName)||o.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(n=window.getSelection())===null||n===void 0||n.removeAllRanges()}if(e.type==="mousedown")["A","BUTTON"].includes(o.nodeName)||e.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(t),this.emit("touchStart",e)),!0}onPointerMove(e,t,i){if(this.option("touch",e)===!1||!this.isDragging||t.length<2&&this.panOnlyZoomed&&he(this.targetScale)<=he(this.minScale)||(this.emit("touchMove",e),e.defaultPrevented))return;this.addTrackingPoint(t[0]);let{content:n}=this,r=gy(i[0],i[1]),o=gy(t[0],t[1]),a=0,l=0;if(t.length>1){let I=n.getBoundingClientRect();a=r.clientX-I.left-.5*I.width,l=r.clientY-I.top-.5*I.height}let c=my(i[0],i[1]),u=my(t[0],t[1]),h=c?u/c:1,f=o.clientX-r.clientX,p=o.clientY-r.clientY;this.dragOffset.x+=f,this.dragOffset.y+=p,this.dragOffset.time=Date.now()-this.dragStart.time;let g=he(this.targetScale)===he(this.minScale)&&this.option("lockAxis");if(g&&!this.lockedAxis)if(g==="xy"||g==="y"||e.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();let I=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=I>45&&I<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,f=0,p=0}else this.lockedAxis=g;if(Wc(e.target,this.content)&&(g="x",this.dragOffset.y=0),g&&g!=="xy"&&this.lockedAxis!==g&&he(this.targetScale)===he(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));let y=this.checkBounds(f,p);this.option("rubberband")?(this.isInfinite!=="x"&&(y.xDiff>0&&f<0||y.xDiff<0&&f>0)&&(f*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*y.xDiff))),this.isInfinite!=="y"&&(y.yDiff>0&&p<0||y.yDiff<0&&p>0)&&(p*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*y.yDiff)))):(y.xDiff&&(f=0),y.yDiff&&(p=0));let A=this.targetScale,S=this.minScale,O=this.maxScale;A<.5*S&&(h=Math.max(h,S)),A>1.5*O&&(h=Math.min(h,O)),this.lockedAxis==="y"&&he(A)===he(S)&&(f=0),this.lockedAxis==="x"&&he(A)===he(S)&&(p=0),this.applyChange({originX:a,originY:l,panX:f,panY:p,scale:h,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(e,t,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(t),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),Wc(e.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==De.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;let t=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(let I of ps)this.velocity[I]=0;this.target.e=this.current.e,this.target.f=this.current.f,ke(this.container,"is-scaling"),ke(this.container,"is-animating"),this.isTicking=!1;let{trackingPoints:i}=this,n=i[0],r=i[i.length-1],o=0,a=0,l=0;r&&n&&(o=r.clientX-n.clientX,a=r.clientY-n.clientY,l=r.time-n.time);let c=((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1;c!==1&&(o*=c,a*=c);let u=0,h=0,f=0,p=0,g=this.option("decelFriction"),y=this.targetScale;if(l>0){f=Math.abs(o)>3?o/(l/30):0,p=Math.abs(a)>3?a/(l/30):0;let I=this.option("maxVelocity");I&&(f=Math.max(Math.min(f,I),-1*I),p=Math.max(Math.min(p,I),-1*I))}f&&(u=f/(1/(1-g)-1)),p&&(h=p/(1/(1-g)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&he(y)===this.minScale)&&(u=f=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&he(y)===this.minScale)&&(h=p=0);let A=this.dragOffset.x,S=this.dragOffset.y,O=this.option("dragMinThreshold")||0;Math.abs(A)<O&&Math.abs(S)<O&&(u=h=0,f=p=0),(this.option("zoom")&&(y<this.minScale-1e-5||y>this.maxScale+1e-5)||t&&!u&&!h)&&(g=.35),this.applyChange({panX:u,panY:h,friction:g}),this.emit("decel",f,p,A,S)}onWheel(e){var t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(r,o){return Math.abs(o)>Math.abs(r)?o:r});let i=Math.max(-1,Math.min(1,t));if(this.emit("wheel",e,i),this.panMode===Ei||e.defaultPrevented)return;let n=this.option("wheel");n==="pan"?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):n==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(e)}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){e.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");let{current:e,target:t,content:i,contentRect:n}=this,r=Object.assign({},Ic);for(let A of ps){let S=A=="e"||A==="f"?Fc:c_;r[A]=he(e[A],S),Math.abs(t[A]-e[A])<(A=="e"||A==="f"?.51:.001)&&(e[A]=t[A])}let{a:o,b:a,c:l,d:c,e:u,f:h}=r,f=`matrix(${o}, ${a}, ${l}, ${c}, ${u}, ${h})`,p=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;if(this.option("transformParent")&&(p=p.parentElement||p),p.style.transform===f)return;p.style.transform=f;let{contentWidth:g,contentHeight:y}=this.calculateContentDim();n.width=g,n.height=y,this.emit("afterTransform")}updateMetrics(e=!1){var t;if(!this||this.state===De.Destroy||this.isContentLoading)return;let i=Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1),{container:n,content:r}=this,o=r instanceof HTMLImageElement,a=n.getBoundingClientRect(),l=getComputedStyle(this.container),c=a.width*i,u=a.height*i,h=parseFloat(l.paddingTop)+parseFloat(l.paddingBottom),f=c-(parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),p=u-h;this.containerRect={width:c,height:u,innerWidth:f,innerHeight:p};let g=this.option("width")||"auto",y=this.option("height")||"auto";g==="auto"&&(g=parseFloat(r.dataset.width||"")||(W=>{let J=0;return J=W instanceof HTMLImageElement?W.naturalWidth:W instanceof SVGElement?W.width.baseVal.value:Math.max(W.offsetWidth,W.scrollWidth),J||0})(r)),y==="auto"&&(y=parseFloat(r.dataset.height||"")||(W=>{let J=0;return J=W instanceof HTMLImageElement?W.naturalHeight:W instanceof SVGElement?W.height.baseVal.value:Math.max(W.offsetHeight,W.scrollHeight),J||0})(r));let A=r.parentElement instanceof HTMLPictureElement?r.parentElement:r;this.option("transformParent")&&(A=A.parentElement||A);let S=A.getAttribute("style")||"";A.style.setProperty("transform","none","important"),o&&(A.style.width="",A.style.height=""),A.offsetHeight;let O=r.getBoundingClientRect(),I=O.width*i,F=O.height*i,H=0,U=0;o&&(Math.abs(g-I)>1||Math.abs(y-F)>1)&&({width:I,height:F,top:H,left:U}=((W,J,oe,G)=>{let ae=oe/G;return ae>W/J?(oe=W,G=W/ae):(oe=J*ae,G=J),{width:oe,height:G,top:.5*(J-G),left:.5*(W-oe)}})(I,F,g,y)),this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:O.top-a.top+H,bottom:a.bottom-O.bottom+H,left:O.left-a.left+U,right:a.right-O.right+U,fitWidth:I,fitHeight:F,width:I,height:F,fullWidth:g,fullHeight:y}),A.style.cssText=S,o&&(A.style.width=`${I}px`,A.style.height=`${F}px`),this.setTransform(),e!==!0&&this.emit("refresh"),this.ignoreBounds||(he(this.targetScale)<he(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===De.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){let{contentWidth:e,contentHeight:t}=this.calculateContentDim(this.target),{targetScale:i,lockedAxis:n}=this,{fitWidth:r,fitHeight:o}=this.contentRect,a=0,l=0,c=0,u=0,h=this.option("infinite");if(h===!0||n&&h===n)a=-1/0,c=1/0,l=-1/0,u=1/0;else{let{containerRect:f,contentRect:p}=this,g=he(r*i,Fc),y=he(o*i,Fc),{innerWidth:A,innerHeight:S}=f;if(f.width===g&&(A=f.width),f.width===y&&(S=f.height),e>A){c=.5*(e-A),a=-1*c;let O=.5*(p.right-p.left);a+=O,c+=O}if(r>A&&e<A&&(a-=.5*(r-A),c-=.5*(r-A)),t>S){u=.5*(t-S),l=-1*u;let O=.5*(p.bottom-p.top);l+=O,u+=O}o>S&&t<S&&(a-=.5*(o-S),c-=.5*(o-S))}return{x:{min:a,max:c},y:{min:l,max:u}}}getBounds(){let e=this.option("bounds");return e!=="auto"?e:this.calculateBounds()}updateControls(){let e=this,t=e.container,{panMode:i,contentRect:n,targetScale:r,minScale:o}=e,a=o,l=e.option("click")||!1;l&&(a=e.getNextScale(l));let c=e.canZoomIn(),u=e.canZoomOut(),h=i===by&&!!this.option("touch"),f=u&&h;if(h&&(he(r)<he(o)&&!this.panOnlyZoomed&&(f=!0),(he(n.width,1)>he(n.fitWidth,1)||he(n.height,1)>he(n.fitHeight,1))&&(f=!0)),he(n.width*r,1)<he(n.fitWidth,1)&&(f=!1),i===Ei&&(f=!1),Ki(t,this.cn("isDraggable"),f),!this.option("zoom"))return;let p=c&&he(a)>he(r),g=!p&&!f&&u&&he(a)<he(r);Ki(t,this.cn("canZoomIn"),p),Ki(t,this.cn("canZoomOut"),g);for(let y of t.querySelectorAll("[data-panzoom-action]")){let A=!1,S=!1;switch(y.dataset.panzoomAction){case"zoomIn":c?A=!0:S=!0;break;case"zoomOut":u?A=!0:S=!0;break;case"toggleZoom":case"iterateZoom":c||u?A=!0:S=!0;let O=y.querySelector("g");O&&(O.style.display=c?"":"none")}A?(y.removeAttribute("disabled"),y.removeAttribute("tabindex")):S&&(y.setAttribute("disabled",""),y.setAttribute("tabindex","-1"))}}panTo({x:e=this.target.e,y:t=this.target.f,scale:i=this.targetScale,friction:n=this.option("friction"),angle:r=0,originX:o=0,originY:a=0,flipX:l=!1,flipY:c=!1,ignoreBounds:u=!1}){this.state!==De.Destroy&&this.applyChange({panX:e-this.target.e,panY:t-this.target.f,scale:i/this.targetScale,angle:r,originX:o,originY:a,friction:n,flipX:l,flipY:c,ignoreBounds:u})}applyChange({panX:e=0,panY:t=0,scale:i=1,angle:n=0,originX:r=-this.current.e,originY:o=-this.current.f,friction:a=this.option("friction"),flipX:l=!1,flipY:c=!1,ignoreBounds:u=!1,bounce:h=this.option("bounce")}){let f=this.state;if(f===De.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=a||0,this.ignoreBounds=u;let{current:p}=this,g=p.e,y=p.f,A=this.getMatrix(this.target),S=new DOMMatrix().translate(g,y).translate(r,o).translate(e,t);if(this.option("zoom")){if(!u){let O=this.targetScale,I=this.minScale,F=this.maxScale;O*i<I&&(i=I/O),O*i>F&&(i=F/O)}S=S.scale(i)}S=S.translate(-r,-o).translate(-g,-y).multiply(A),n&&(S=S.rotate(n)),l&&(S=S.scale(-1,1)),c&&(S=S.scale(1,-1));for(let O of ps)O!=="e"&&O!=="f"&&(S[O]>this.minScale+1e-5||S[O]<this.minScale-1e-5)?this.target[O]=S[O]:this.target[O]=he(S[O],Fc);(this.targetScale<this.scale||Math.abs(i-1)>.1||this.panMode===Ei||h===!1)&&!u&&this.clampTargetBounds(),f===De.Init?this.animate():this.isResting||(this.state=De.Panning,this.requestTick())}stop(e=!1){if(this.state===De.Init||this.state===De.Destroy)return;let t=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(let i of ps)this.velocity[i]=0,e==="current"?this.current[i]=this.target[i]:e==="target"&&(this.target[i]=this.current[i]);this.setTransform(),ke(this.container,"is-scaling"),ke(this.container,"is-animating"),this.isTicking=!1,this.state=De.Ready,t&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),ge(this.container,"is-animating"),this.isScaling&&ge(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(e,t=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==Ei||!e||he(this.targetScale)<=he(this.minScale))return;this.emit("mouseMove",e);let{container:i,containerRect:n,contentRect:r}=this,o=n.width,a=n.height,l=i.getBoundingClientRect(),c=(e.clientX||0)-l.left,u=(e.clientY||0)-l.top,{contentWidth:h,contentHeight:f}=this.calculateContentDim(this.target),p=this.option("mouseMoveFactor");p>1&&(h!==o&&(h*=p),f!==a&&(f*=p));let g=.5*(h-o)-c/o*100/100*(h-o);g+=.5*(r.right-r.left);let y=.5*(f-a)-u/a*100/100*(f-a);y+=.5*(r.bottom-r.top),this.applyChange({panX:g-this.target.e,panY:y-this.target.f,friction:t})}zoomWithWheel(e){if(this.state===De.Destroy||this.state===De.Init)return;let t=Date.now();if(t-this.pwt<45)return void e.preventDefault();this.pwt=t;var i=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(c,u){return Math.abs(u)>Math.abs(c)?u:c});let n=Math.max(-1,Math.min(1,i)),{targetScale:r,maxScale:o,minScale:a}=this,l=r*(100+45*n)/100;he(l)<he(a)&&he(r)<=he(a)?(this.cwd+=Math.abs(n),l=a):he(l)>he(o)&&he(r)>=he(o)?(this.cwd+=Math.abs(n),l=o):(this.cwd=0,l=Math.max(Math.min(l,o),a)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),he(l)!==he(r)&&this.zoomTo(l,{event:e}))}canZoomIn(){return this.option("zoom")&&(he(this.contentRect.width,1)<he(this.contentRect.fitWidth,1)||he(this.targetScale)<he(this.maxScale))}canZoomOut(){return this.option("zoom")&&he(this.targetScale)>he(this.minScale)}zoomIn(e=1.25,t){this.zoomTo(this.targetScale*e,t)}zoomOut(e=.8,t){this.zoomTo(this.targetScale*e,t)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.getNextScale("toggleZoom"),e)}toggleMax(e){this.zoomTo(this.getNextScale("toggleMax"),e)}toggleCover(e){this.zoomTo(this.getNextScale("toggleCover"),e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(e=1,{friction:t="auto",originX:i="auto",originY:n="auto",event:r}={}){if(this.isContentLoading||this.state===De.Destroy)return;let{targetScale:o,fullScale:a,maxScale:l,coverScale:c}=this;if(this.stop(),this.panMode===Ei&&(r=this.pmme||r),r||i==="auto"||n==="auto"){let h=this.content.getBoundingClientRect(),f=this.container.getBoundingClientRect(),p=r?r.clientX:f.left+.5*f.width,g=r?r.clientY:f.top+.5*f.height;i=p-h.left-.5*h.width,n=g-h.top-.5*h.height}let u=1;typeof e=="number"?u=e:e==="full"?u=a:e==="cover"?u=c:e==="max"?u=l:e==="fit"?u=1:e==="next"&&(u=this.getNextScale("iterateZoom")),u=u/o||1,t=t==="auto"?u>1?.15:.25:t,this.applyChange({scale:u,originX:i,originY:n,friction:t}),r&&this.panMode===Ei&&this.panWithMouse(r,t)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");let{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.height-(t.top+.5*t.fitHeight)-i.f,scale:e.width/t.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");let{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.innerHeight-(t.top+.5*t.fitHeight)-i.f,scale:e.height/t.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){let{container:e}=this,t=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");e.classList.toggle(t);let n=e.classList.contains(t);n?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(n?"enterFS":"exitFS")}getMatrix(e=this.current){let{a:t,b:i,c:n,d:r,e:o,f:a}=e;return new DOMMatrix([t,i,n,r,o,a])}reset(e){if(this.state!==De.Init&&this.state!==De.Destroy){this.stop("current");for(let t of ps)this.target[t]=Ic[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=e===void 0?this.option("friction"):e,this.state=De.Panning,this.requestTick())}}destroy(){this.stop(),this.state=De.Destroy,this.detachEvents(),this.detachObserver();let{container:e,content:t}=this,i=this.option("classes")||{};for(let n of Object.values(i))e.classList.remove(n+"");t&&(t.removeEventListener("load",this.onLoad),t.removeEventListener("error",this.onError)),this.detachPlugins()}};Object.defineProperty(Fn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:l_}),Object.defineProperty(Fn,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});var wy=function(s,e){let t=!0;return(...i)=>{t&&(t=!1,s(...i),setTimeout(()=>{t=!0},e))}},Ey=(s,e)=>{let t=[];return s.childNodes.forEach(i=>{i.nodeType!==Node.ELEMENT_NODE||e&&!i.matches(e)||t.push(i)}),t},u_={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}},ct;(function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Destroy=2]="Destroy"})(ct||(ct={}));var Xp=s=>{if(typeof s=="string"||s instanceof HTMLElement)s={html:s};else{let e=s.thumb;e!==void 0&&(typeof e=="string"&&(s.thumbSrc=e),e instanceof HTMLImageElement&&(s.thumbEl=e,s.thumbElSrc=e.src,s.thumbSrc=e.src),delete s.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},s)},d_=(s={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},s),ii=class extends io{constructor(e,t){super(t),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}},h_={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2},Gc=class extends ii{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list;if(!e){e=document.createElement("ul"),ge(e,this.cn("list")),e.setAttribute("role","tablist");let t=this.instance.container;t.appendChild(e),ge(t,this.cn("hasDots")),this.list=e}return e}refresh(){var e;let t=this.instance.pages.length,i=Math.min(2,this.option("minCount")),n=Math.max(2e3,this.option("maxCount")),r=this.option("dynamicFrom");if(t<i||t>n)return void this.cleanup();let o=typeof r=="number"&&t>5&&t>=r,a=!this.list||this.isDynamic!==o||this.list.children.length!==t;a&&this.cleanup();let l=this.build();if(Ki(l,this.cn("isDynamic"),!!o),a)for(let h=0;h<t;h++)l.append(this.createItem(h));let c,u=0;for(let h of[...l.children]){let f=u===this.instance.page;f&&(c=h),Ki(h,this.cn("isCurrent"),f),(e=h.children[0])===null||e===void 0||e.setAttribute("aria-selected",f?"true":"false");for(let p of["isBeforePrev","isPrev","isNext","isAfterNext"])ke(h,this.cn(p));u++}if(c=c||l.firstChild,o&&c){let h=c.previousElementSibling,f=h&&h.previousElementSibling;ge(h,this.cn("isPrev")),ge(f,this.cn("isBeforePrev"));let p=c.nextElementSibling,g=p&&p.nextElementSibling;ge(p,this.cn("isNext")),ge(g,this.cn("isAfterNext"))}this.isDynamic=o}createItem(e=0){var t;let i=document.createElement("li");i.setAttribute("role","presentation");let n=Xi(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return i.appendChild(n),(t=i.children[0])===null||t===void 0||t.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,ke(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(Gc,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:h_});var Rc="disabled",Nc="next",Sy="prev",Yc=class extends ii{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){let e=this.instance,t=e.pages.length,i=e.page;if(t<2)return void this.cleanup();this.build();let n=this.prev,r=this.next;n&&r&&(n.removeAttribute(Rc),r.removeAttribute(Rc),e.isInfinite||(i<=0&&n.setAttribute(Rc,""),i>=t-1&&r.setAttribute(Rc,"")))}addBtn(e){var t;let i=this.instance,n=document.createElement("button");n.setAttribute("tabindex","0"),n.setAttribute("title",i.localize(`{{${e.toUpperCase()}}}`)),ge(n,this.cn("button")+" "+this.cn(e===Nc?"isNext":"isPrev"));let r=i.isRTL?e===Nc?Sy:Nc:e;var o;return n.innerHTML=i.localize(this.option(`${r}Tpl`)),n.dataset[`carousel${o=e,o?o.match("^[a-z]")?o.charAt(0).toUpperCase()+o.substring(1):o:""}`]="true",(t=this.container)===null||t===void 0||t.appendChild(n),n}build(){let e=this.instance.container,t=this.cn("container"),{container:i,prev:n,next:r}=this;i||(i=e.querySelector("."+t),this.isDom=!!i),i||(i=document.createElement("div"),ge(i,t),e.appendChild(i)),this.container=i,r||(r=i.querySelector("[data-carousel-next]")),r||(r=this.addBtn(Nc)),this.next=r,n||(n=i.querySelector("[data-carousel-prev]")),n||(n=this.addBtn(Sy)),this.prev=n}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(Yc,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});var Xc=class extends ii{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){let{nav:e,target:t}=this;e&&t&&(e.options.initialSlide=t.options.initialPage,e.state===ct.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),t.state===ct.Ready?this.onTargetReady(t):t.on("ready",this.onTargetReady))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,t,i){this.onNavTouch(e,e.panzoom,i)}onNavTouch(e,t,i){var n,r;if(Math.abs(t.dragOffset.x)>3||Math.abs(t.dragOffset.y)>3)return;let o=i.target,{nav:a,target:l}=this;if(!a||!l||!o)return;let c=o.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!c)return;let u=parseInt(c.dataset.index||"",10)||0,h=l.getPageForSlide(u),f=a.getPageForSlide(u);a.slideTo(f),l.slideTo(h,{friction:((r=(n=this.nav)===null||n===void 0?void 0:n.plugins)===null||r===void 0?void 0:r.Sync.option("friction"))||0}),this.markSelectedSlide(u)}onNavCreateSlide(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}onTargetChange(){var e,t;let{target:i,nav:n}=this;if(!i||!n||n.state!==ct.Ready||i.state!==ct.Ready)return;let r=(t=(e=i.pages[i.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index,o=n.getPageForSlide(r);this.markSelectedSlide(r),n.slideTo(o,n.prevPage===null&&i.prevPage===null?{friction:0}:void 0)}markSelectedSlide(e){let t=this.nav;t&&t.state===ct.Ready&&(this.selectedIndex=e,[...t.slides].map(i=>{i.el&&i.el.classList[i.index===e?"add":"remove"]("is-nav-selected")}))}attach(){let e=this,t=e.options.target,i=e.options.nav;t?e.addAsNavFor(t):i&&e.addAsTargetFor(i)}detach(){let e=this,t=e.nav,i=e.target;t&&(t.off("ready",e.onNavReady),t.off("createSlide",e.onNavCreateSlide),t.off("Panzoom.click",e.onNavClick),t.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,i&&(i.off("ready",e.onTargetReady),i.off("refresh",e.onTargetChange),i.off("change",e.onTargetChange)),e.target=null}};Object.defineProperty(Xc,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});var p_={Navigation:Yc,Dots:Gc,Sync:Xc},Bc="animationend",Ay="isSelected",zc="slide",to=class s extends fa{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===ct.Ready}get isInfinite(){let e=!1,{contentDim:t,viewportDim:i,pages:n,slides:r}=this,o=r[0];return n.length>=2&&o&&t+o.dim>=i&&(e=this.option("infinite")),e}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(e,t={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ct.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof e=="string"&&(e=document.querySelector(e)),!e||!Vt(e))throw new Error("No Element found");this.container=e,this.slideNext=wy(this.slideNext.bind(this),150),this.slidePrev=wy(this.slidePrev.bind(this),150),this.userOptions=t,this.userPlugins=i,queueMicrotask(()=>{this.processOptions()})}processOptions(){var e,t;let i=qt({},s.defaults,this.userOptions),n="",r=i.breakpoints;if(r&&df(r))for(let[o,a]of Object.entries(r))window.matchMedia(o).matches&&df(a)&&(n+=o,qt(i,a));n===this.bp&&this.state!==ct.Init||(this.bp=n,this.state===ct.Ready&&(i.initialSlide=((t=(e=this.pages[this.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index)||0),this.state!==ct.Init&&this.destroy(),super.setOptions(i),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=ct.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},s.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=ct.Ready,this.emit("ready")}initLayout(){let{container:e}=this,t=this.option("classes");ge(e,this.cn("container")),Ki(e,t.isLTR,!this.isRTL),Ki(e,t.isRTL,this.isRTL),Ki(e,t.isVertical,!this.isHorizontal),Ki(e,t.isHorizontal,this.isHorizontal);let i=this.option("viewport")||e.querySelector(`.${t.viewport}`);i||(i=document.createElement("div"),ge(i,t.viewport),i.append(...Ey(e,`.${t.slide}`)),e.prepend(i)),i.addEventListener("scroll",this.onScroll);let n=this.option("track")||e.querySelector(`.${t.track}`);n||(n=document.createElement("div"),ge(n,t.track),n.append(...Array.from(i.childNodes))),n.setAttribute("aria-live","polite"),i.contains(n)||i.prepend(n),this.viewport=i,this.track=n,this.emit("initLayout")}initSlides(){let{track:e}=this;if(!e)return;let t=[...this.slides],i=[];[...Ey(e,`.${this.cn(zc)}`)].forEach(n=>{if(Vt(n)){let r=Xp({el:n,isDom:!0,index:this.slides.length});i.push(r)}});for(let n of[...this.option("slides",[])||[],...t])i.push(Xp(n));this.slides=i;for(let n=0;n<this.slides.length;n++)this.slides[n].index=n;for(let n of i)this.emit("beforeInitSlide",n,n.index),this.emit("initSlide",n,n.index);this.emit("initSlides")}setInitialPage(){let e=this.option("initialSlide");this.page=typeof e=="number"?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){let{track:e,pages:t,isHorizontal:i}=this;if(!e||!t.length)return;let n=this.page;t[n]||(this.page=n=0);let r=(t[n].pos||0)*(this.isRTL&&i?1:-1),o=i?`${r}px`:"0",a=i?"0":`${r}px`;e.style.transform=`translate3d(${o}, ${a}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);let e=this.option("Panzoom")||{};this.panzoom=new Fn(this.viewport,qt({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:t=>!(this.pages.length<2&&!t.options.infinite),bounds:()=>this.getBounds(),maxVelocity:t=>Math.abs(t.target[this.axis]-t.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",(t,i,...n)=>{this.emit(`Panzoom.${i}`,t,...n)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){let e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let e=[],{contentDim:t,viewportDim:i}=this,n=this.option("slidesPerPage");n=(n==="auto"||t<=i)&&this.option("fill")!==!1?1/0:parseFloat(n+"");let r=0,o=0,a=0;for(let l of this.slides)(!e.length||o+l.dim-i>.05||a>=n)&&(e.push(d_()),r=e.length-1,o=0,a=0),e[r].slides.push(l),o+=l.dim+l.gap,a++;return e}processPages(){let e=this.pages,{contentDim:t,viewportDim:i,isInfinite:n}=this,r=this.option("center"),o=this.option("fill"),a=o&&r&&t>i&&!n;if(e.forEach((u,h)=>{var f;u.index=h,u.pos=((f=u.slides[0])===null||f===void 0?void 0:f.pos)||0,u.dim=0;for(let[p,g]of u.slides.entries())u.dim+=g.dim,p<u.slides.length-1&&(u.dim+=g.gap);a&&u.pos+.5*u.dim<.5*i?u.pos=0:a&&u.pos+.5*u.dim>=t-.5*i?u.pos=t-i:r&&(u.pos+=-.5*(i-u.dim))}),e.forEach(u=>{o&&!n&&t>i&&(u.pos=Math.max(u.pos,0),u.pos=Math.min(u.pos,t-i)),u.pos=he(u.pos,1e3),u.dim=he(u.dim,1e3),Math.abs(u.pos)<=.1&&(u.pos=0)}),n)return e;let l=[],c;return e.forEach(u=>{let h=Object.assign({},u);c&&h.pos===c.pos?(c.dim+=h.dim,c.slides=[...c.slides,...h.slides]):(h.index=l.length,c=h,l.push(h))}),l}getPageFromIndex(e=0){let t=this.pages.length,i;return e=parseInt((e||0).toString())||0,i=this.isInfinite?(e%t+t)%t:Math.max(Math.min(e,t-1),0),i}getSlideMetrics(e){var t,i;let n=this.isHorizontal?"width":"height",r=0,o=0,a=e.el,l=!(!a||a.parentNode);if(a?r=parseFloat(a.dataset[n]||"")||0:(a=document.createElement("div"),a.style.visibility="hidden",(this.track||document.body).prepend(a)),ge(a,this.cn(zc)+" "+e.class+" "+e.customClass),r)a.style[n]=`${r}px`,a.style[n==="width"?"height":"width"]="";else{l&&(this.track||document.body).prepend(a),r=a.getBoundingClientRect()[n]*Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1);let u=a[this.isHorizontal?"offsetWidth":"offsetHeight"];u-1>r&&(r=u)}let c=getComputedStyle(a);return c.boxSizing==="content-box"&&(this.isHorizontal?(r+=parseFloat(c.paddingLeft)||0,r+=parseFloat(c.paddingRight)||0):(r+=parseFloat(c.paddingTop)||0,r+=parseFloat(c.paddingBottom)||0)),o=parseFloat(c[this.isHorizontal?"marginRight":"marginBottom"])||0,l?(i=a.parentElement)===null||i===void 0||i.removeChild(a):e.el||a.remove(),{dim:he(r,1e3),gap:he(o,1e3)}}getBounds(){let{isInfinite:e,isRTL:t,isHorizontal:i,pages:n}=this,r={min:0,max:0};if(e)r={min:-1/0,max:1/0};else if(n.length){let o=n[0].pos,a=n[n.length-1].pos;r=t&&i?{min:o,max:a}:{min:-1*a,max:-1*o}}return{x:i?r:{min:0,max:0},y:i?{min:0,max:0}:r}}repositionSlides(){let e,{isHorizontal:t,isRTL:i,isInfinite:n,viewport:r,viewportDim:o,contentDim:a,page:l,pages:c,slides:u,panzoom:h}=this,f=0,p=0,g=0,y=0;h?y=-1*h.current[this.axis]:c[l]&&(y=c[l].pos||0),e=t?i?"right":"left":"top",i&&t&&(y*=-1);for(let I of u){let F=I.el;F?(e==="top"?(F.style.right="",F.style.left=""):F.style.top="",I.index!==f?F.style[e]=p===0?"":`${he(p,1e3)}px`:F.style[e]="",g+=I.dim+I.gap,f++):p+=I.dim+I.gap}if(n&&g&&r){let I=getComputedStyle(r),F="padding",H=t?"Right":"Bottom",U=parseFloat(I[F+(t?"Left":"Top")]);y-=U,o+=U,o+=parseFloat(I[F+H]);for(let W of u)W.el&&(he(W.pos)<he(o)&&he(W.pos+W.dim+W.gap)<he(y)&&he(y)>he(a-o)&&(W.el.style[e]=`${he(p+g,1e3)}px`),he(W.pos+W.gap)>=he(a-o)&&he(W.pos)>he(y+o)&&he(y)<he(o)&&(W.el.style[e]=`-${he(g,1e3)}px`))}let A,S,O=[...this.inTransition];if(O.length>1&&(A=c[O[0]],S=c[O[1]]),A&&S){let I=0;for(let F of u)F.el?this.inTransition.has(F.index)&&A.slides.indexOf(F)<0&&(F.el.style[e]=`${he(I+(A.pos-S.pos),1e3)}px`):I+=F.dim+F.gap}}createSlideEl(e){let{track:t,slides:i}=this;if(!t||!e||e.el&&e.el.parentNode)return;let n=e.el||document.createElement("div");ge(n,this.cn(zc)),ge(n,e.class),ge(n,e.customClass);let r=e.html;r&&(r instanceof HTMLElement?n.appendChild(r):n.innerHTML=e.html+"");let o=[];i.forEach((u,h)=>{u.el&&o.push(h)});let a=e.index,l=null;o.length&&(l=i[o.reduce((u,h)=>Math.abs(h-a)<Math.abs(u-a)?h:u)]);let c=l&&l.el&&l.el.parentNode?l.index<e.index?l.el.nextSibling:l.el:null;t.insertBefore(n,t.contains(c)?c:null),e.el=n,this.emit("createSlide",e)}removeSlideEl(e,t=!1){let i=e?.el;if(!i||!i.parentNode)return;let n=this.cn(Ay);if(i.classList.contains(n)&&(ke(i,n),this.emit("unselectSlide",e)),e.isDom&&!t)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",e);let r=new CustomEvent(Bc);i.dispatchEvent(r),e.el&&(e.el.remove(),e.el=null)}transitionTo(e=0,t=this.option("transition")){var i,n,r,o;if(!t)return!1;let a=this.page,{pages:l,panzoom:c}=this;e=parseInt((e||0).toString())||0;let u=this.getPageFromIndex(e);if(!c||!l[u]||l.length<2||Math.abs((((n=(i=l[a])===null||i===void 0?void 0:i.slides[0])===null||n===void 0?void 0:n.dim)||0)-this.viewportDim)>1)return!1;let h=e>a?1:-1,f=l[u].pos*(this.isRTL?1:-1);if(a===u&&Math.abs(f-c.target[this.axis])<1)return!1;this.clearTransitions();let p=c.isResting;ge(this.container,this.cn("inTransition"));let g=((r=l[a])===null||r===void 0?void 0:r.slides[0])||null,y=((o=l[u])===null||o===void 0?void 0:o.slides[0])||null;this.inTransition.add(y.index),this.createSlideEl(y);let A=g.el,S=y.el;p||t===zc||(t="fadeFast",A=null);let O=this.isRTL?"next":"prev",I=this.isRTL?"prev":"next";return A&&(this.inTransition.add(g.index),g.transition=t,A.addEventListener(Bc,this.onAnimationEnd),A.classList.add(`f-${t}Out`,`to-${h>0?I:O}`)),S&&(y.transition=t,S.addEventListener(Bc,this.onAnimationEnd),S.classList.add(`f-${t}In`,`from-${h>0?O:I}`)),c.current[this.axis]=f,c.target[this.axis]=f,c.requestTick(),this.onChange(u),!0}manageSlideVisiblity(){let e=new Set,t=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(let n of this.slides)i.has(n)?e.add(n):t.add(n);for(let n of this.inTransition)e.add(this.slides[n]);for(let n of e)this.createSlideEl(n),this.lazyLoadSlide(n);for(let n of t)e.has(n)||this.removeSlideEl(n);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;let e="aria-hidden",t=this.cn(Ay);if(t)for(let i of this.slides){let n=i.el;n&&(n.dataset.index=`${i.index}`,n.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?n.removeAttribute(e):n.setAttribute(e,"true"):this.pages[this.page].slides.includes(i)?(n.classList.contains(t)||(ge(n,t),this.emit("selectSlide",i)),n.removeAttribute(e)):(n.classList.contains(t)&&(ke(n,t),this.emit("unselectSlide",i)),n.setAttribute(e,"true")))}}flipInfiniteTrack(){let{axis:e,isHorizontal:t,isInfinite:i,isRTL:n,viewportDim:r,contentDim:o}=this,a=this.panzoom;if(!a||!i)return;let l=a.current[e],c=a.target[e]-l,u=0,h=.5*r;n&&t?(l<-h&&(u=-1,l+=o),l>o-h&&(u=1,l-=o)):(l>h&&(u=1,l-=o),l<-o+h&&(u=-1,l+=o)),u&&(a.current[e]=l,a.target[e]=l+c)}lazyLoadImg(e,t){let i=this,n="f-fadeIn",r="is-preloading",o=!1,a=null,l=()=>{o||(o=!0,a&&(a.remove(),a=null),ke(t,r),t.complete&&(ge(t,n),setTimeout(()=>{ke(t,n)},350)),this.option("adaptiveHeight")&&e.el&&this.pages[this.page].slides.indexOf(e)>-1&&(i.updateMetrics(),i.setViewportHeight()),this.emit("load",e))};ge(t,r),t.src=t.dataset.lazySrcset||t.dataset.lazySrc||"",delete t.dataset.lazySrc,delete t.dataset.lazySrcset,t.addEventListener("error",()=>{l()}),t.addEventListener("load",()=>{l()}),setTimeout(()=>{let c=t.parentNode;c&&e.el&&(t.complete?l():o||(a=Xi(ff),c.insertBefore(a,t)))},300)}lazyLoadSlide(e){let t=e&&e.el;if(!t)return;let i=new Set,n=Array.from(t.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));t.dataset.lazySrc&&n.push(t),n.map(r=>{r instanceof HTMLImageElement?i.add(r):r instanceof HTMLElement&&r.dataset.lazySrc&&(r.style.backgroundImage=`url('${r.dataset.lazySrc}')`,delete r.dataset.lazySrc)});for(let r of i)this.lazyLoadImg(e,r)}onAnimationEnd(e){var t;let i=e.target,n=i?parseInt(i.dataset.index||"",10)||0:-1,r=this.slides[n],o=e.animationName;if(!i||!r||!o)return;let a=!!this.inTransition.has(n)&&r.transition;a&&o.substring(0,a.length+2)===`f-${a}`&&this.inTransition.delete(n),this.inTransition.size||this.clearTransitions(),n===this.page&&(!((t=this.panzoom)===null||t===void 0)&&t.isResting)&&this.emit("settle")}onDecel(e,t=0,i=0,n=0,r=0){if(this.option("dragFree"))return void this.setPageFromPosition();let{isRTL:o,isHorizontal:a,axis:l,pages:c}=this,u=c.length,h=Math.abs(Math.atan2(i,t)/(Math.PI/180)),f=0;if(f=h>45&&h<135?a?0:i:a?t:0,!u)return;let p=this.page,g=o&&a?1:-1,y=e.current[l]*g,{pageIndex:A}=this.getPageFromPosition(y);Math.abs(f)>5?(c[p].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(p=A),p=o&&a?f<0?p-1:p+1:f<0?p+1:p-1):p=n===0&&r===0?p:A,this.slideTo(p,{transition:!1,friction:e.option("decelFriction")})}onClick(e){let t=e.target,i=t&&Vt(t)?t.dataset:null,n,r;i&&(i.carouselPage!==void 0?(r="slideTo",n=i.carouselPage):i.carouselNext!==void 0?r="slideNext":i.carouselPrev!==void 0&&(r="slidePrev")),r?(e.preventDefault(),e.stopPropagation(),t&&!t.hasAttribute("disabled")&&this[r](n)):this.emit("click",e)}onSlideTo(e){let t=e.detail||0;this.slideTo(this.getPageForSlide(t),{friction:0})}onChange(e,t=0){let i=this.page;this.prevPage=i,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==i&&(this.markSelectedSlides(),this.emit("change",e,i,t))}onRefresh(){let e=this.contentDim,t=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===t||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var e;(e=this.viewport)===null||e===void 0||e.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,t=null){this.destroy(),this.state=ct.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=t||this.userPlugins,this.processOptions()}slideTo(e=0,{friction:t=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===ct.Destroy)return;e=parseInt((e||0).toString())||0;let n=this.getPageFromIndex(e),{axis:r,isHorizontal:o,isRTL:a,pages:l,panzoom:c}=this,u=l.length,h=a&&o?1:-1;if(!c||!u)return;if(this.page!==n){let p=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",p,e),p.defaultPrevented)return}if(this.transitionTo(e,i))return;let f=l[n].pos;if(this.isInfinite){let p=this.contentDim,g=c.target[r]*h;u===2?f+=p*Math.floor(parseFloat(e+"")/2):f=[f,f-p,f+p].reduce(function(y,A){return Math.abs(A-g)<Math.abs(y-g)?A:y})}f*=h,Math.abs(c.target[r]-f)<1||(c.panTo({x:o?f:0,y:o?0:f,friction:t}),this.onChange(n))}slideToClosest(e){if(this.panzoom){let{pageIndex:t}=this.getPageFromPosition();this.slideTo(t,e)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),ke(this.container,this.cn("inTransition"));let e=["to-prev","to-next","from-prev","from-next"];for(let t of this.slides){let i=t.el;if(i){i.removeEventListener(Bc,this.onAnimationEnd),i.classList.remove(...e);let n=t.transition;n&&i.classList.remove(`f-${n}Out`,`f-${n}In`)}}this.manageSlideVisiblity()}addSlide(e,t){var i,n,r,o;let a=this.panzoom,l=((i=this.pages[this.page])===null||i===void 0?void 0:i.pos)||0,c=((n=this.pages[this.page])===null||n===void 0?void 0:n.dim)||0,u=this.contentDim<this.viewportDim,h=Array.isArray(t)?t:[t],f=[];for(let p of h)f.push(Xp(p));this.slides.splice(e,0,...f);for(let p=0;p<this.slides.length;p++)this.slides[p].index=p;for(let p of f)this.emit("beforeInitSlide",p,p.index);if(this.page>=e&&(this.page+=f.length),this.updateMetrics(),a){let p=((r=this.pages[this.page])===null||r===void 0?void 0:r.pos)||0,g=((o=this.pages[this.page])===null||o===void 0?void 0:o.dim)||0,y=this.pages.length||1,A=this.isRTL?c-g:g-c,S=this.isRTL?l-p:p-l;u&&y===1?(e<=this.page&&(a.current[this.axis]-=A,a.target[this.axis]-=A),a.panTo({[this.isHorizontal?"x":"y"]:-1*p})):S&&e<=this.page&&(a.target[this.axis]-=S,a.current[this.axis]-=S,a.requestTick())}for(let p of f)this.emit("initSlide",p,p.index)}prependSlide(e){this.addSlide(0,e)}appendSlide(e){this.addSlide(this.slides.length,e)}removeSlide(e){let t=this.slides.length;e=(e%t+t)%t;let i=this.slides[e];if(i){this.removeSlideEl(i,!0),this.slides.splice(e,1);for(let n=0;n<this.slides.length;n++)this.slides[n].index=n;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",i)}}updateMetrics(){let{panzoom:e,viewport:t,track:i,slides:n,isHorizontal:r,isInfinite:o}=this;if(!i)return;let a=r?"width":"height",l=r?"offsetWidth":"offsetHeight";if(t){let h=Math.max(t[l],he(t.getBoundingClientRect()[a],1e3)),f=getComputedStyle(t),p="padding",g=r?"Right":"Bottom";h-=parseFloat(f[p+(r?"Left":"Top")])+parseFloat(f[p+g]),this.viewportDim=h}let c,u=0;for(let[h,f]of n.entries()){let p=0,g=0;!f.el&&c?(p=c.dim,g=c.gap):({dim:p,gap:g}=this.getSlideMetrics(f),c=f),p=he(p,1e3),g=he(g,1e3),f.dim=p,f.gap=g,f.pos=u,u+=p,(o||h<n.length-1)&&(u+=g)}u=he(u,1e3),this.contentDim=u,e&&(e.contentRect[a]=u,e.contentRect[r?"fullWidth":"fullHeight"]=u),this.pages=this.createPages(),this.pages=this.processPages(),this.state===ct.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,t=!1,i=!1){e===void 0&&(e=this.page);let n=this,r=n.panzoom,o=n.contentDim,a=n.pages[e]||0;if(!a||!r)return e>this.page?-1:1;let l=-1*r.current.e,c=he((l-a.pos)/(1*a.dim),1e3),u=c,h=c;this.isInfinite&&i!==!0&&(u=he((l-a.pos+o)/(1*a.dim),1e3),h=he((l-a.pos-o)/(1*a.dim),1e3));let f=[c,u,h].reduce(function(p,g){return Math.abs(g)<Math.abs(p)?g:p});return t?f:f>1?1:f<-1?-1:f}setViewportHeight(){let{page:e,pages:t,viewport:i,isHorizontal:n}=this;if(!i||!t[e])return;let r=0;n&&this.track&&(this.track.style.height="auto",t[e].slides.forEach(o=>{o.el&&(r=Math.max(r,o.el.offsetHeight))})),i.style.height=r?`${r}px`:""}getPageForSlide(e){for(let t of this.pages)for(let i of t.slides)if(i.index===e)return t.index;return-1}getVisibleSlides(e=0){var t;let i=new Set,{panzoom:n,contentDim:r,viewportDim:o,pages:a,page:l}=this;if(o){r=r+((t=this.slides[this.slides.length-1])===null||t===void 0?void 0:t.gap)||0;let c=0;c=n&&n.state!==De.Init&&n.state!==De.Destroy?-1*n.current[this.axis]:a[l]&&a[l].pos||0,this.isInfinite&&(c-=Math.floor(c/r)*r),this.isRTL&&this.isHorizontal&&(c*=-1);let u=c-o*e,h=c+o*(e+1),f=this.isInfinite?[-1,0,1]:[0];for(let p of this.slides)for(let g of f){let y=p.pos+g*r,A=y+p.dim+p.gap;y<h&&A>u&&i.add(p)}}return i}getPageFromPosition(e){let{viewportDim:t,contentDim:i,slides:n,pages:r,panzoom:o}=this,a=r.length,l=n.length,c=n[0],u=n[l-1],h=this.option("center"),f=0,p=0,g=0,y=e===void 0?-1*(o?.target[this.axis]||0):e;h&&(y+=.5*t),this.isInfinite?(y<c.pos-.5*u.gap&&(y-=i,g=-1),y>u.pos+u.dim+.5*u.gap&&(y-=i,g=1)):y=Math.max(c.pos||0,Math.min(y,u.pos));let A=u,S=n.find(O=>{let I=O.pos-.5*A.gap,F=O.pos+O.dim+.5*O.gap;return A=O,y>=I&&y<F});return S||(S=u),p=this.getPageForSlide(S.index),f=p+g*a,{page:f,pageIndex:p}}setPageFromPosition(){let{pageIndex:e}=this.getPageFromPosition();this.onChange(e)}destroy(){if([ct.Destroy].includes(this.state))return;this.state=ct.Destroy;let{container:e,viewport:t,track:i,slides:n,panzoom:r}=this,o=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),r&&(r.destroy(),this.panzoom=null),n&&n.forEach(l=>{this.removeSlideEl(l)}),this.detachPlugins(),t&&(t.removeEventListener("scroll",this.onScroll),t.offsetParent&&i&&i.offsetParent&&t.replaceWith(...i.childNodes));for(let[l,c]of Object.entries(o))l!=="container"&&c&&e.classList.remove(c);this.track=null,this.viewport=null,this.page=0,this.slides=[];let a=this.events.get("ready");this.events=new Map,a&&this.events.set("ready",a)}};Object.defineProperty(to,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:Fn}),Object.defineProperty(to,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:u_}),Object.defineProperty(to,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:p_});var jy=function(s){if(!Vt(s))return 0;let e=window.scrollY,t=window.innerHeight,i=e+t,n=s.getBoundingClientRect(),r=n.y+e,o=n.height,a=r+o;if(e>a||i<r)return 0;if(e<r&&i>a||r<e&&a>i)return 100;let l=o;r<e&&(l-=e-r),a>i&&(l-=a-i);let c=l/t*100;return Math.round(c)},pa=!(typeof window>"u"||!window.document||!window.document.createElement),Kp,Jp=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),Ty=s=>{if(s&&pa){Kp===void 0&&document.createElement("div").focus({get preventScroll(){return Kp=!0,!1}});try{if(Kp)s.focus({preventScroll:!0});else{let e=window.scrollY||document.body.scrollTop,t=window.scrollX||document.body.scrollLeft;s.focus(),document.body.scrollTo({top:e,left:t,behavior:"auto"})}}catch{}}},Vy=()=>{let s=document,e,t="",i="",n="";return s.fullscreenEnabled?(t="requestFullscreen",i="exitFullscreen",n="fullscreenElement"):s.webkitFullscreenEnabled&&(t="webkitRequestFullscreen",i="webkitExitFullscreen",n="webkitFullscreenElement"),t&&(e={request:function(r=s.documentElement){return t==="webkitRequestFullscreen"?r[t](Element.ALLOW_KEYBOARD_INPUT):r[t]()},exit:function(){return s[n]&&s[i]()},isFullscreen:function(){return s[n]}}),e},hf={dragToClose:!0,hideScrollbar:!0,Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},contentClick:"toggleZoom",contentDblClick:!1,backdropClick:"close",animated:!0,idle:3500,showClass:"f-zoomInUp",hideClass:"f-fadeOut",commonCaption:!1,parentEl:null,startIndex:0,l10n:Object.assign(Object.assign({},Uy),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},groupAll:!1,groupAttr:"data-fancybox",defaultType:"image",defaultDisplay:"block",autoFocus:!0,trapFocus:!0,placeFocusBack:!0,closeButton:"auto",keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},Fullscreen:{autoStart:!1},compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,wheel:"zoom"},gt,Pt;(function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Closing=2]="Closing",s[s.CustomClosing=3]="CustomClosing",s[s.Destroy=4]="Destroy"})(gt||(gt={})),function(s){s[s.Loading=0]="Loading",s[s.Opening=1]="Opening",s[s.Ready=2]="Ready",s[s.Closing=3]="Closing"}(Pt||(Pt={}));var xy="",ha=!1,$c=!1,Dn=null,qy=()=>{let s="",e="",t=Ti.getInstance();if(t){let i=t.carousel,n=t.getSlide();if(i&&n){let r=n.slug||void 0,o=n.triggerEl||void 0;e=r||t.option("slug")||"",!e&&o&&o.dataset&&(e=o.dataset.fancybox||""),e&&e!=="true"&&(s="#"+e+(!r&&i.slides.length>1?"-"+(n.index+1):""))}}return{hash:s,slug:e,index:1}},Kc=()=>{let s=new URL(document.URL).hash,e=s.slice(1).split("-"),t=e[e.length-1],i=t&&/^\+?\d+$/.test(t)&&parseInt(e.pop()||"1",10)||1;return{hash:s,slug:e.join("-"),index:i}},Wy=()=>{let{slug:s,index:e}=Kc();if(!s)return;let t=document.querySelector(`[data-slug="${s}"]`);if(t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),Ti.getInstance())return;let i=document.querySelectorAll(`[data-fancybox="${s}"]`);i.length&&(t=i[e-1],t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},Gy=()=>{if(Ti.defaults.Hash===!1)return;let s=Ti.getInstance();if(s?.options.Hash===!1)return;let{slug:e,index:t}=Kc(),{slug:i}=qy();s&&(e===i?s.jumpTo(t-1):(ha=!0,s.close())),Wy()},Yy=()=>{Dn&&clearTimeout(Dn),queueMicrotask(()=>{Gy()})},Cy=()=>{window.addEventListener("hashchange",Yy,!1),setTimeout(()=>{Gy()},500)};pa&&(/complete|interactive|loaded/.test(document.readyState)?Cy():document.addEventListener("DOMContentLoaded",Cy));var Hc="is-zooming-in",Jc=class extends ii{onCreateSlide(e,t,i){let n=this.instance.optionFor(i,"src")||"";i.el&&i.type==="image"&&typeof n=="string"&&this.setImage(i,n)}onRemoveSlide(e,t,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(e,t,i,n){ke(this.instance.container,Hc);for(let r of t.slides){let o=r.panzoom;o&&r.index!==i&&o.reset(.35)}}onClose(){var e;let t=this.instance,i=t.container,n=t.getSlide();if(!i||!i.parentElement||!n)return;let{el:r,contentEl:o,panzoom:a,thumbElSrc:l}=n;if(!r||!l||!o||!a||a.isContentLoading||a.state===De.Init||a.state===De.Destroy)return;a.updateMetrics();let c=this.getZoomInfo(n);if(!c)return;this.instance.state=gt.CustomClosing,i.classList.remove(Hc),i.classList.add("is-zooming-out"),o.style.backgroundImage=`url('${l}')`;let u=i.getBoundingClientRect();(((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1)===1&&Object.assign(i.style,{position:"absolute",top:`${i.offsetTop+window.scrollY}px`,left:`${i.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${u.width}px`,height:`${u.height}px`,overflow:"hidden"});let{x:h,y:f,scale:p,opacity:g}=c;if(g){let y=((A,S,O,I)=>{let F=S-A,H=I-O;return U=>O+((U-A)/F*H||0)})(a.scale,p,1,0);a.on("afterTransform",()=>{o.style.opacity=y(a.scale)+""})}a.on("endAnimation",()=>{t.destroy()}),a.target.a=p,a.target.b=0,a.target.c=0,a.target.d=p,a.panTo({x:h,y:f,scale:p,friction:g?.2:.33,ignoreBounds:!0}),a.isResting&&t.destroy()}setImage(e,t){let i=this.instance;e.src=t,this.process(e,t).then(n=>{let{contentEl:r,imageEl:o,thumbElSrc:a,el:l}=e;if(i.isClosing()||!r||!o)return;r.offsetHeight;let c=!!i.isOpeningSlide(e)&&this.getZoomInfo(e);if(this.option("protected")&&l){l.addEventListener("contextmenu",f=>{f.preventDefault()});let h=document.createElement("div");ge(h,"fancybox-protected"),r.appendChild(h)}if(a&&c){let h=n.contentRect,f=Math.max(h.fullWidth,h.fullHeight),p=null;!c.opacity&&f>1200&&(p=document.createElement("img"),ge(p,"fancybox-ghost"),p.src=a,r.appendChild(p));let g=()=>{p&&(ge(p,"f-fadeFastOut"),setTimeout(()=>{p&&(p.remove(),p=null)},200))};(u=a,new Promise((y,A)=>{let S=new Image;S.onload=y,S.onerror=A,S.src=u})).then(()=>{i.hideLoading(e),e.state=Pt.Opening,this.instance.emit("reveal",e),this.zoomIn(e).then(()=>{g(),this.instance.done(e)},()=>{}),p&&setTimeout(()=>{g()},f>2500?800:200)},()=>{i.hideLoading(e),i.revealContent(e)})}else{let h=this.optionFor(e,"initialSize"),f=this.optionFor(e,"zoom"),p={event:i.prevMouseMoveEvent||i.options.event,friction:f?.12:0},g=i.optionFor(e,"showClass")||void 0,y=!0;i.isOpeningSlide(e)&&(h==="full"?n.zoomToFull(p):h==="cover"?n.zoomToCover(p):h==="max"?n.zoomToMax(p):y=!1,n.stop("current")),y&&g&&(g=n.isDragging?"f-fadeIn":""),i.hideLoading(e),i.revealContent(e,g)}var u},()=>{i.setError(e,"{{IMAGE_ERROR}}")})}process(e,t){return new Promise((i,n)=>{var r;let o=this.instance,a=e.el;o.clearContent(e),o.showLoading(e);let l=this.optionFor(e,"content");if(typeof l=="string"&&(l=Xi(l)),!l||!Vt(l)){if(l=document.createElement("img"),l instanceof HTMLImageElement){let c="",u=e.caption;c=typeof u=="string"&&u?u.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${e.index+1} of ${((r=o.carousel)===null||r===void 0?void 0:r.pages.length)||1}`,l.src=t||"",l.alt=c,l.draggable=!1,e.srcset&&l.setAttribute("srcset",e.srcset),this.instance.isOpeningSlide(e)&&(l.fetchPriority="high")}e.sizes&&l.setAttribute("sizes",e.sizes)}ge(l,"fancybox-image"),e.imageEl=l,o.setContent(e,l,!1),e.panzoom=new Fn(a,qt({transformParent:!0},this.option("Panzoom")||{},{content:l,width:o.optionFor(e,"width","auto"),height:o.optionFor(e,"height","auto"),wheel:()=>{let c=o.option("wheel");return(c==="zoom"||c=="pan")&&c},click:(c,u)=>{var h,f;if(o.isCompact||o.isClosing()||e.index!==((h=o.getSlide())===null||h===void 0?void 0:h.index))return!1;if(u){let g=u.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(g.nodeName))return!1}let p=!u||u.target&&((f=e.contentEl)===null||f===void 0?void 0:f.contains(u.target));return o.option(p?"contentClick":"backdropClick")||!1},dblClick:()=>o.isCompact?"toggleZoom":o.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:c=>{i(c)},error:()=>{n()},destroy:()=>{n()}}}))})}zoomIn(e){return new Promise((t,i)=>{let n=this.instance,r=n.container,{panzoom:o,contentEl:a,el:l}=e;o&&o.updateMetrics();let c=this.getZoomInfo(e);if(!(c&&l&&a&&o&&r))return void i();let{x:u,y:h,scale:f,opacity:p}=c,g=()=>{e.state!==Pt.Closing&&(p&&(a.style.opacity=Math.max(Math.min(1,1-(1-o.scale)/(1-f)),0)+""),o.scale>=1&&o.scale>o.targetScale-.1&&t(o))},y=O=>{(O.scale<.99||O.scale>1.01)&&!O.isDragging||(ke(r,Hc),a.style.opacity="",O.off("endAnimation",y),O.off("touchStart",y),O.off("afterTransform",g),t(O))};o.on("endAnimation",y),o.on("touchStart",y),o.on("afterTransform",g),o.on(["error","destroy"],()=>{i()}),o.panTo({x:u,y:h,scale:f,friction:0,ignoreBounds:!0}),o.stop("current");let A={event:o.panMode==="mousemove"?n.prevMouseMoveEvent||n.options.event:void 0},S=this.optionFor(e,"initialSize");ge(r,Hc),n.hideLoading(e),S==="full"?o.zoomToFull(A):S==="cover"?o.zoomToCover(A):S==="max"?o.zoomToMax(A):o.reset(.172)})}getZoomInfo(e){let{el:t,imageEl:i,thumbEl:n,panzoom:r}=e,o=this.instance,a=o.container;if(!t||!i||!n||!r||jy(n)<3||!this.optionFor(e,"zoom")||!a||o.state===gt.Destroy||getComputedStyle(a).getPropertyValue("--f-images-zoom")==="0")return!1;let l=window.visualViewport||null;if((l?l.scale:1)!==1)return!1;let{top:c,left:u,width:h,height:f}=n.getBoundingClientRect(),{top:p,left:g,fitWidth:y,fitHeight:A}=r.contentRect;if(!(h&&f&&y&&A))return!1;let S=r.container.getBoundingClientRect();g+=S.left,p+=S.top;let O=-1*(g+.5*y-(u+.5*h)),I=-1*(p+.5*A-(c+.5*f)),F=h/y,H=this.option("zoomOpacity")||!1;return H==="auto"&&(H=Math.abs(h/f-y/A)>.1),{x:O,y:I,scale:F,opacity:H}}attach(){let e=this,t=e.instance;t.on("Carousel.change",e.onChange),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("close",e.onClose)}detach(){let e=this,t=e.instance;t.off("Carousel.change",e.onChange),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("close",e.onClose)}};Object.defineProperty(Jc,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;var Zp="html",Py="image",Qp="map",fs="youtube",Mn="vimeo",ca="html5video",_y=(s,e={})=>{let t=new URL(s),i=new URLSearchParams(t.search),n=new URLSearchParams;for(let[a,l]of[...i,...Object.entries(e)]){let c=l+"";if(a==="t"){let u=c.match(/((\d*)m)?(\d*)s?/);u&&n.set("start",60*parseInt(u[2]||"0")+parseInt(u[3]||"0")+"")}else n.set(a,c)}let r=n+"",o=s.match(/#t=((.*)?\d+s)/);return o&&(r+=`#t=${o[1]}`),r},f_={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},m_=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"],Zc=class extends ii{onBeforeInitSlide(e,t,i){this.processType(i)}onCreateSlide(e,t,i){this.setContent(i)}onClearContent(e,t){t.xhr&&(t.xhr.abort(),t.xhr=null);let i=t.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",t.iframeEl=null);let n=t.contentEl,r=t.placeholderEl;if(t.type==="inline"&&n&&r)n.classList.remove("fancybox__content"),n.style.display!=="none"&&(n.style.display="none"),r.parentNode&&r.parentNode.insertBefore(n,r),r.remove(),t.contentEl=void 0,t.placeholderEl=void 0;else for(;t.el&&t.el.firstChild;)t.el.removeChild(t.el.firstChild)}onSelectSlide(e,t,i){i.state===Pt.Ready&&this.playVideo()}onUnselectSlide(e,t,i){var n,r;if(i.type===ca){try{(r=(n=i.el)===null||n===void 0?void 0:n.querySelector("video"))===null||r===void 0||r.pause()}catch{}return}let o;i.type===Mn?o={method:"pause",value:"true"}:i.type===fs&&(o={event:"command",func:"pauseVideo"}),o&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(o),"*"),i.poller&&clearTimeout(i.poller)}onDone(e,t){e.isCurrentSlide(t)&&!e.isClosing()&&this.playVideo()}onRefresh(e,t){t.slides.forEach(i=>{i.el&&(this.resizeIframe(i),this.setAspectRatio(i))})}onMessage(e){try{let t=JSON.parse(e.data);if(e.origin==="https://player.vimeo.com"){if(t.event==="ready")for(let i of Array.from(document.getElementsByClassName("fancybox__iframe")))i instanceof HTMLIFrameElement&&i.contentWindow===e.source&&(i.dataset.ready="true")}else if(e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&t.event==="onReady"){let i=document.getElementById(t.id);i&&(i.dataset.ready="true")}}catch{}}loadAjaxContent(e){let t=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);let i=this.instance,n=new XMLHttpRequest;i.showLoading(e),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i.state===gt.Ready&&(i.hideLoading(e),n.status===200?i.setContent(e,n.responseText):i.setError(e,n.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};let r=e.ajax||null;n.open(r?"POST":"GET",t+""),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(r),e.xhr=n}setInlineContent(e){let t=null;if(Vt(e.src))t=e.src;else if(typeof e.src=="string"){let i=e.src.split("#",2).pop();t=i?document.getElementById(i):null}if(t){if(e.type==="clone"||t.closest(".fancybox__slide")){t=t.cloneNode(!0);let i=t.dataset.animationName;i&&(t.classList.remove(i),delete t.dataset.animationName);let n=t.getAttribute("id");n=n?`${n}--clone`:`clone-${this.instance.id}-${e.index}`,t.setAttribute("id",n)}else if(t.parentNode){let i=document.createElement("div");i.classList.add("fancybox-placeholder"),t.parentNode.insertBefore(i,t),e.placeholderEl=i}this.instance.setContent(e,t)}else this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(e){let{src:t,el:i}=e;if(!t||typeof t!="string"||!i)return;i.classList.add("is-loading");let n=this.instance,r=document.createElement("iframe");r.className="fancybox__iframe",r.setAttribute("id",`fancybox__iframe_${n.id}_${e.index}`);for(let[a,l]of Object.entries(this.optionFor(e,"iframeAttr")||{}))r.setAttribute(a,l);r.onerror=()=>{n.setError(e,"{{IFRAME_ERROR}}")},e.iframeEl=r;let o=this.optionFor(e,"preload");if(e.type!=="iframe"||o===!1)return r.setAttribute("src",e.src+""),n.setContent(e,r,!1),this.resizeIframe(e),void n.revealContent(e);n.showLoading(e),r.onload=()=>{if(!r.src.length)return;let a=r.dataset.ready!=="true";r.dataset.ready="true",this.resizeIframe(e),a?n.revealContent(e):n.hideLoading(e)},r.setAttribute("src",t),n.setContent(e,r,!1)}resizeIframe(e){let{type:t,iframeEl:i}=e;if(t===fs||t===Mn)return;let n=i?.parentElement;if(!i||!n)return;let r=e.autoSize;r===void 0&&(r=this.optionFor(e,"autoSize"));let o=e.width||0,a=e.height||0;o&&a&&(r=!1);let l=n&&n.style;if(e.preload!==!1&&r!==!1&&l)try{let c=window.getComputedStyle(n),u=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight),h=parseFloat(c.paddingTop)+parseFloat(c.paddingBottom),f=i.contentWindow;if(f){let p=f.document,g=p.getElementsByTagName(Zp)[0],y=p.body;l.width="",y.style.overflow="hidden",o=o||g.scrollWidth+u,l.width=`${o}px`,y.style.overflow="",l.flex="0 0 auto",l.height=`${y.scrollHeight}px`,a=g.scrollHeight+h}}catch{}if(o||a){let c={flex:"0 1 auto",width:"",height:""};o&&o!=="auto"&&(c.width=`${o}px`),a&&a!=="auto"&&(c.height=`${a}px`),Object.assign(l,c)}}playVideo(){let e=this.instance.getSlide();if(!e)return;let{el:t}=e;if(!t||!t.offsetParent||!this.optionFor(e,"videoAutoplay"))return;if(e.type===ca)try{let n=t.querySelector("video");if(n){let r=n.play();r!==void 0&&r.then(()=>{}).catch(o=>{n.muted=!0,n.play()})}}catch{}if(e.type!==fs&&e.type!==Mn)return;let i=()=>{if(e.iframeEl&&e.iframeEl.contentWindow){let n;if(e.iframeEl.dataset.ready==="true")return n=e.type===fs?{event:"command",func:"playVideo"}:{method:"play",value:"true"},n&&e.iframeEl.contentWindow.postMessage(JSON.stringify(n),"*"),void(e.poller=void 0);e.type===fs&&(n={event:"listening",id:e.iframeEl.getAttribute("id")},e.iframeEl.contentWindow.postMessage(JSON.stringify(n),"*"))}e.poller=setTimeout(i,250)};i()}processType(e){if(e.html)return e.type=Zp,e.src=e.html,void(e.html="");let t=this.instance.optionFor(e,"src","");if(!t||typeof t!="string")return;let i=e.type,n=null;if(n=t.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){let r=this.optionFor(e,fs),{nocookie:o}=r,a=function(h,f){var p={};for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&f.indexOf(g)<0&&(p[g]=h[g]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var y=0;for(g=Object.getOwnPropertySymbols(h);y<g.length;y++)f.indexOf(g[y])<0&&Object.prototype.propertyIsEnumerable.call(h,g[y])&&(p[g[y]]=h[g[y]])}return p}(r,["nocookie"]),l=`www.youtube${o?"-nocookie":""}.com`,c=_y(t,a),u=encodeURIComponent(n[2]);e.videoId=u,e.src=`https://${l}/embed/${u}?${c}`,e.thumbSrc=e.thumbSrc||`https://i.ytimg.com/vi/${u}/mqdefault.jpg`,i=fs}else if(n=t.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){let r=_y(t,this.optionFor(e,Mn)),o=encodeURIComponent(n[1]),a=n[4]||"";e.videoId=o,e.src=`https://player.vimeo.com/video/${o}?${a?`h=${a}${r?"&":""}`:""}${r}`,i=Mn}if(!i&&e.triggerEl){let r=e.triggerEl.dataset.type;m_.includes(r)&&(i=r)}i||typeof t=="string"&&(t.charAt(0)==="#"?i="inline":(n=t.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i=ca,e.videoFormat=e.videoFormat||"video/"+(n[1]==="ogv"?"ogg":n[1])):t.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i=Py:t.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`https://maps.google.${n[1]}/?ll=${(n[2]?n[2]+"&z="+Math.floor(parseFloat(n[3]))+(n[4]?n[4].replace(/^\//,"&"):""):n[4]+"").replace(/\?/,"&")}&output=${n[4]&&n[4].indexOf("layer=c")>0?"svembed":"embed"}`,i=Qp):(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`https://maps.google.${n[1]}/maps?q=${n[2].replace("query=","q=").replace("api=1","")}&output=embed`,i=Qp),i=i||this.instance.option("defaultType"),e.type=i,i===Py&&(e.thumbSrc=e.thumbSrc||e.src)}setContent(e){let t=this.instance.optionFor(e,"src")||"";if(e&&e.type&&t){switch(e.type){case Zp:this.instance.setContent(e,t);break;case ca:let i=this.option("videoTpl");i&&this.instance.setContent(e,i.replace(/\{\{src\}\}/gi,t+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case Qp:case fs:case Mn:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(e){let t=e.contentEl;if(!(e.el&&t&&e.type&&[fs,Mn,ca].includes(e.type)))return;let i,n=e.width||"auto",r=e.height||"auto";if(n==="auto"||r==="auto"){i=this.optionFor(e,"videoRatio");let c=(i+"").match(/(\d+)\s*\/\s?(\d+)/);i=c&&c.length>2?parseFloat(c[1])/parseFloat(c[2]):parseFloat(i+"")}else n&&r&&(i=n/r);if(!i)return;t.style.aspectRatio="",t.style.width="",t.style.height="",t.offsetHeight;let o=t.getBoundingClientRect(),a=o.width||1,l=o.height||1;t.style.aspectRatio=i+"",i<a/l?(r=r==="auto"?l:Math.min(l,r),t.style.width="auto",t.style.height=`${r}px`):(n=n==="auto"?a:Math.min(a,n),t.style.width=`${n}px`,t.style.height="auto")}attach(){let e=this,t=e.instance;t.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.selectSlide",e.onSelectSlide),t.on("Carousel.unselectSlide",e.onUnselectSlide),t.on("Carousel.Panzoom.refresh",e.onRefresh),t.on("done",e.onDone),t.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}detach(){let e=this,t=e.instance;t.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.selectSlide",e.onSelectSlide),t.off("Carousel.unselectSlide",e.onUnselectSlide),t.off("Carousel.Panzoom.refresh",e.onRefresh),t.off("done",e.onDone),t.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}};Object.defineProperty(Zc,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:f_});var Uc="play",jc="pause",ua="ready",Qc=class extends ii{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ua}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==ua}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,!((e=this.instance.panzoom)===null||e===void 0)&&e.isResting&&this.resume()}onTimerEnd(){let e=this.instance;this.state==="play"&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var e;if(!this.option("showProgress"))return null;this.removeProgressBar();let t=this.instance,i=((e=t.pages[t.page])===null||e===void 0?void 0:e.slides)||[],n=this.option("progressParentEl");if(n||(n=(i.length===1?i[0].el:null)||t.viewport),!n)return null;let r=document.createElement("div");return ge(r,"f-progress"),n.prepend(r),this.progressBar=r,r.offsetHeight,r}set(){let e=this,t=e.instance;if(t.pages.length<2||e.timer)return;let i=e.option("timeout");e.state=Uc,ge(t.container,"has-autoplay");let n=e.createProgressBar();n&&(n.style.transitionDuration=`${i}ms`,n.style.transform="scaleX(1)"),e.timer=setTimeout(()=>{e.timer=null,e.inHover||e.onTimerEnd()},i),e.emit("set")}clear(){let e=this;e.timer&&(clearTimeout(e.timer),e.timer=null),e.removeProgressBar()}start(){let e=this;if(e.set(),e.state!==ua){if(e.option("pauseOnHover")){let t=e.instance.container;t.addEventListener("mouseenter",e.onMouseEnter,!1),t.addEventListener("mouseleave",e.onMouseLeave,!1)}document.addEventListener("visibilitychange",e.onVisibilityChange,!1),e.emit("start")}}stop(){let e=this,t=e.state,i=e.instance.container;e.clear(),e.state=ua,i.removeEventListener("mouseenter",e.onMouseEnter,!1),i.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),ke(i,"has-autoplay"),t!==ua&&e.emit("stop")}pause(){let e=this;e.state===Uc&&(e.state=jc,e.clear(),e.emit(jc))}resume(){let e=this,t=e.instance;if(t.isInfinite||t.page!==t.pages.length-1)if(e.state!==Uc){if(e.state===jc&&!e.inHover){let i=new Event("resume",{bubbles:!0,cancelable:!0});e.emit("resume",i),i.defaultPrevented||e.set()}}else e.set();else e.stop()}toggle(){this.state===Uc||this.state===jc?this.stop():this.start()}attach(){let e=this,t=e.instance;t.on("ready",e.onReady),t.on("Panzoom.startAnimation",e.onChange),t.on("Panzoom.endAnimation",e.onSettle),t.on("Panzoom.touchMove",e.onChange)}detach(){let e=this,t=e.instance;t.off("ready",e.onReady),t.off("Panzoom.startAnimation",e.onChange),t.off("Panzoom.endAnimation",e.onSettle),t.off("Panzoom.touchMove",e.onChange),e.stop()}};Object.defineProperty(Qc,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});var eu=class extends ii{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(e){let t=e.carousel;if(!t)return;let i=e.container;i&&(t.options.Autoplay=qt({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{e.emit("startSlideshow")},set:n=>{var r;i.classList.add("has-slideshow"),((r=e.getSlide())===null||r===void 0?void 0:r.state)!==Pt.Ready&&n.pause()},stop:()=>{i.classList.remove("has-slideshow"),e.isCompact||e.endIdle(),e.emit("endSlideshow")},resume:(n,r)=>{var o,a,l;!r||!r.cancelable||((o=e.getSlide())===null||o===void 0?void 0:o.state)===Pt.Ready&&(!((l=(a=e.carousel)===null||a===void 0?void 0:a.panzoom)===null||l===void 0)&&l.isResting)||r.preventDefault()}}}),t.attachPlugins({Autoplay:Qc}),this.ref=t.plugins.Autoplay)}onReady(e){let t=e.carousel,i=this.ref;i&&t&&this.option("playOnStart")&&(t.isInfinite||t.page<t.pages.length-1)&&i.start()}onDone(e,t){let i=this.ref,n=e.carousel;if(!i||!n)return;let r=t.panzoom;r&&r.on("startAnimation",()=>{e.isCurrentSlide(t)&&i.stop()}),e.isCurrentSlide(t)&&i.resume()}onKeydown(e,t){var i;let n=this.ref;n&&t===this.option("key")&&((i=document.activeElement)===null||i===void 0?void 0:i.nodeName)!=="BUTTON"&&n.toggle()}attach(){let e=this,t=e.instance;t.on("Carousel.init",e.onPrepare),t.on("Carousel.ready",e.onReady),t.on("done",e.onDone),t.on("keydown",e.onKeydown)}detach(){let e=this,t=e.instance;t.off("Carousel.init",e.onPrepare),t.off("Carousel.ready",e.onReady),t.off("done",e.onDone),t.off("keydown",e.onKeydown)}};Object.defineProperty(eu,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:s=>{var e;return((e=s.instance.container)===null||e===void 0?void 0:e.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||s.instance.container},timeout:3e3}});var Xy={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"},ms;(function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Hidden=2]="Hidden"})(ms||(ms={}));var Oy="isResting",Vc="thumbWidth",Zr="thumbHeight",Yi="thumbClipWidth",Ky=class extends ii{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ms.Init})}get isModern(){return this.type==="modern"}onInitSlide(s,e){let t=e.el?e.el.dataset:void 0;t&&(e.thumbSrc=t.thumbSrc||e.thumbSrc||"",e[Yi]=parseFloat(t[Yi]||"")||e[Yi]||0,e[Zr]=parseFloat(t.thumbHeight||"")||e[Zr]||0),this.addSlide(e)}onInitSlides(){this.build()}onChange(){var s;if(!this.isModern)return;let e=this.container,t=this.instance,i=t.panzoom,n=this.carousel,r=n?n.panzoom:null,o=t.page;if(i&&n&&r){if(i.isDragging){ke(e,this.cn(Oy));let a=((s=n.pages[o])===null||s===void 0?void 0:s.pos)||0;a+=t.getProgress(o)*(this[Yi]+this.thumbGap);let l=r.getBounds();-1*a>l.x.min&&-1*a<l.x.max&&r.panTo({x:-1*a,friction:.12})}else Ki(e,this.cn(Oy),i.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(let s of this.instance.slides||[])this.resizeModernSlide(s);this.shiftModern()}isDisabled(){let s=this.option("minCount")||0;if(s){let t=this.instance,i=0;for(let n of t.slides||[])n.thumbSrc&&i++;if(i<s)return!0}let e=this.option("type");return["modern","classic"].indexOf(e)<0}getThumb(s){let e=this.option("thumbTpl")||"";return{html:this.instance.localize(e,[["%i",s.index],["%d",s.index+1],["%s",s.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(s){let e=this.carousel;e&&e.addSlide(s.index,this.getThumb(s))}getSlides(){let s=[];for(let e of this.instance.slides||[])s.push(this.getThumb(e));return s}resizeModernSlide(s){this.isModern&&(s[Vc]=s[Yi]&&s[Zr]?Math.round(this[Zr]*(s[Yi]/s[Zr])):this[Vc])}updateProps(){let s=this.container;if(!s)return;let e=t=>parseFloat(getComputedStyle(s).getPropertyValue("--f-thumb-"+t))||0;this.thumbGap=e("gap"),this.thumbExtraGap=e("extra-gap"),this[Vc]=e("width")||40,this[Yi]=e("clip-width")||40,this[Zr]=e("height")||40}build(){let s=this;if(s.state!==ms.Init)return;if(s.isDisabled())return void s.emit("disabled");let e=s.instance,t=e.container,i=s.getSlides(),n=s.option("type");s.type=n;let r=s.option("parentEl"),o=s.cn("container"),a=s.cn("track"),l=r?.querySelector("."+o);l||(l=document.createElement("div"),ge(l,o),r?r.appendChild(l):t.after(l)),ge(l,`is-${n}`),ge(t,s.cn("hasThumbs")),s.container=l,s.updateProps();let c=l.querySelector("."+a);c||(c=document.createElement("div"),ge(c,s.cn("track")),l.appendChild(c)),s.track=c;let u=qt({},{track:c,infinite:!1,center:!0,fill:n==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},s.option("Carousel")||{},{Sync:{target:e},slides:i}),h=new e.constructor(l,u);h.on("createSlide",(f,p)=>{s.setProps(p.index),s.emit("createSlide",p,p.el)}),h.on("ready",()=>{s.shiftModern(),s.emit("ready")}),h.on("refresh",()=>{s.shiftModern()}),h.on("Panzoom.click",(f,p,g)=>{s.onClick(g)}),s.carousel=h,s.state=ms.Ready}onClick(s){s.preventDefault(),s.stopPropagation();let e=this.instance,{pages:t,page:i}=e,n=y=>{if(y){let A=y.closest("[data-carousel-index]");if(A)return[parseInt(A.dataset.carouselIndex||"",10)||0,A]}return[-1,void 0]},r=(y,A)=>{let S=document.elementFromPoint(y,A);return S?n(S):[-1,void 0]},[o,a]=n(s.target);if(o>-1)return;let l=this[Yi],c=s.clientX,u=s.clientY,[h,f]=r(c-l,u),[p,g]=r(c+l,u);f&&g?(o=Math.abs(c-f.getBoundingClientRect().right)<Math.abs(c-g.getBoundingClientRect().left)?h:p,o===i&&(o=o===h?p:h)):f?o=h:g&&(o=p),o>-1&&t[o]&&e.slideTo(o)}getShift(s){var e;let t=this,{instance:i}=t,n=t.carousel;if(!i||!n)return 0;let r=t[Vc],o=t[Yi],a=t.thumbGap,l=t.thumbExtraGap;if(!(!((e=n.slides[s])===null||e===void 0)&&e.el))return 0;let c=.5*(r-o),u=i.pages.length-1,h=i.getProgress(0),f=i.getProgress(u),p=i.getProgress(s,!1,!0),g=0,y=c+l+a,A=h<0&&h>-1,S=f>0&&f<1;return s===0?(g=y*Math.abs(h),S&&h===1&&(g-=y*Math.abs(f))):s===u?(g=y*Math.abs(f)*-1,A&&f===-1&&(g+=y*Math.abs(h))):A||S?(g=-1*y,g+=y*Math.abs(h),g+=y*(1-Math.abs(f))):g=y*p,g}setProps(s){var e;let t=this;if(!t.isModern)return;let{instance:i}=t,n=t.carousel;if(i&&n){let r=(e=n.slides[s])===null||e===void 0?void 0:e.el;if(r&&r.childNodes.length){let o=he(1-Math.abs(i.getProgress(s))),a=he(t.getShift(s));r.style.setProperty("--progress",o?o+"":""),r.style.setProperty("--shift",a+"")}}}shiftModern(){let s=this;if(!s.isModern)return;let{instance:e,track:t}=s,i=e.panzoom,n=s.carousel;if(!(e&&t&&i&&n)||i.state===De.Init||i.state===De.Destroy)return;for(let o of e.slides)s.setProps(o.index);let r=(s[Yi]+s.thumbGap)*(n.slides.length||0);t.style.setProperty("--width",r+"")}cleanup(){let s=this;s.carousel&&s.carousel.destroy(),s.carousel=null,s.container&&s.container.remove(),s.container=null,s.track&&s.track.remove(),s.track=null,s.state=ms.Init,ke(s.instance.container,s.cn("hasThumbs"))}attach(){let s=this,e=s.instance;e.on("initSlide",s.onInitSlide),e.state===ct.Init?e.on("initSlides",s.onInitSlides):s.onInitSlides(),e.on(["change","Panzoom.afterTransform"],s.onChange),e.on("Panzoom.refresh",s.onRefresh)}detach(){let s=this,e=s.instance;e.off("initSlide",s.onInitSlide),e.off("initSlides",s.onInitSlides),e.off(["change","Panzoom.afterTransform"],s.onChange),e.off("Panzoom.refresh",s.onRefresh),s.cleanup()}};Object.defineProperty(Ky,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Xy});var g_=Object.assign(Object.assign({},Xy),{key:"t",showOnStart:!0,parentEl:null}),My="is-masked",Ly="aria-hidden",tu=class extends ii{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){let e=this.ref;return e&&!e.isDisabled()}get isHidden(){return this.hidden}onClick(e,t){t.stopPropagation()}onCreateSlide(e,t){var i,n,r;let o=((r=(n=(i=this.instance)===null||i===void 0?void 0:i.carousel)===null||n===void 0?void 0:n.slides[t.index])===null||r===void 0?void 0:r.type)||"",a=t.el;if(a&&o){let l=`for-${o}`;["video","youtube","vimeo","html5video"].includes(o)&&(l+=" for-video"),ge(a,l)}}onInit(){var e;let t=this,i=t.instance,n=i.carousel;if(t.ref||!n)return;let r=t.option("parentEl")||i.footer||i.container;if(!r)return;let o=qt({},t.options,{parentEl:r,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:i.option("Carousel.friction")||0}},on:{ready:a=>{let l=a.container;l&&this.hidden&&(t.refresh(),l.style.transition="none",t.hide(),l.offsetHeight,queueMicrotask(()=>{l.style.transition="",t.show()}))}}});o.Carousel=o.Carousel||{},o.Carousel.on=qt(((e=t.options.Carousel)===null||e===void 0?void 0:e.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),n.options.Thumbs=o,n.attachPlugins({Thumbs:Ky}),t.ref=n.plugins.Thumbs,t.option("showOnStart")||(t.ref.state=ms.Hidden,t.hidden=!0)}onResize(){var e;let t=(e=this.ref)===null||e===void 0?void 0:e.container;t&&(t.style.maxHeight="")}onKeydown(e,t){let i=this.option("key");i&&i===t&&this.toggle()}toggle(){let e=this.ref;if(e&&!e.isDisabled())return e.state===ms.Hidden?(e.state=ms.Init,void e.build()):void(this.hidden?this.show():this.hide())}show(){let e=this.ref;if(!e||e.isDisabled())return;let t=e.container;t&&(this.refresh(),t.offsetHeight,t.removeAttribute(Ly),t.classList.remove(My),this.hidden=!1)}hide(){let e=this.ref,t=e&&e.container;t&&(this.refresh(),t.offsetHeight,t.classList.add(My),t.setAttribute(Ly,"true")),this.hidden=!0}refresh(){let e=this.ref;if(!e||!e.state)return;let t=e.container,i=t?.firstChild||null;t&&i&&i.childNodes.length&&(t.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){let e=this,t=e.instance;t.state===gt.Init?t.on("Carousel.init",e.onInit):e.onInit(),t.on("resize",e.onResize),t.on("keydown",e.onKeydown)}detach(){var e;let t=this,i=t.instance;i.off("Carousel.init",t.onInit),i.off("resize",t.onResize),i.off("keydown",t.onKeydown),(e=i.carousel)===null||e===void 0||e.detachPlugins(["Thumbs"]),t.ref=null}};Object.defineProperty(tu,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:g_});var ef={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}},In;(function(s){s[s.Init=0]="Init",s[s.Ready=1]="Ready",s[s.Disabled=2]="Disabled"})(In||(In={}));var v_={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},b_={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ky="has-toolbar",tf="fancybox__toolbar",iu=class extends ii{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:In.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var t;if(!e.carousel)return;let i=this.option("display"),n=this.option("absolute"),r=this.option("enabled");if(r==="auto"){let c=this.instance.carousel,u=0;if(c)for(let h of c.slides)(h.panzoom||h.type==="image")&&u++;u||(r=!1)}r||(i=void 0);let o=0,a={left:[],middle:[],right:[]};if(i)for(let c of["left","middle","right"])for(let u of i[c]){let h=this.createEl(u);h&&((t=a[c])===null||t===void 0||t.push(h),o++)}let l=null;if(o&&(l=this.createContainer()),l){for(let[c,u]of Object.entries(a)){let h=document.createElement("div");ge(h,tf+"__column is-"+c);for(let f of u)h.appendChild(f);n!=="auto"||c!=="middle"||u.length||(n=!0),l.appendChild(h)}n===!0&&ge(l,"is-absolute"),this.state=In.Ready,this.onRefresh()}else this.state=In.Disabled}onClick(e){var t,i;let n=this.instance,r=n.getSlide(),o=r?.panzoom,a=e.target,l=a&&Vt(a)?a.dataset:null;if(!l)return;if(l.fancyboxToggleThumbs!==void 0)return e.preventDefault(),e.stopPropagation(),void((t=n.plugins.Thumbs)===null||t===void 0||t.toggle());if(l.fancyboxToggleFullscreen!==void 0)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(l.fancyboxToggleSlideshow!==void 0){e.preventDefault(),e.stopPropagation();let h=(i=n.carousel)===null||i===void 0?void 0:i.plugins.Autoplay,f=h.isActive;return o&&o.panMode==="mousemove"&&!f&&o.reset(),void(f?h.stop():h.start())}let c=l.panzoomAction,u=l.panzoomChange;if((u||c)&&(e.preventDefault(),e.stopPropagation()),u){let h={};try{h=JSON.parse(u)}catch{}o&&o.applyChange(h)}else c&&o&&o[c]&&o[c]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;let e=this.container;if(!e)return;let t=this.instance.getSlide();if(!t||t.state!==Pt.Ready)return;let i=t&&!t.error&&t.panzoom;for(let o of e.querySelectorAll("[data-panzoom-action]"))i?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));let n=i&&i.canZoomIn(),r=i&&i.canZoomOut();for(let o of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))n?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));for(let o of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))r?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));for(let o of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){r||n?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));let a=o.querySelector("g");a&&(a.style.display=n?"":"none")}}onDone(e,t){var i;(i=t.panzoom)===null||i===void 0||i.on("afterTransform",()=>{this.instance.isCurrentSlide(t)&&this.onRefresh()}),this.instance.isCurrentSlide(t)&&this.onRefresh()}createContainer(){let e=this.instance.container;if(!e)return null;let t=this.option("parentEl")||e,i=t.querySelector("."+tf);return i||(i=document.createElement("div"),ge(i,tf),t.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&ge(e,ky),this.container=i,i}createEl(e){let t=this.instance,i=t.carousel;if(!i||e==="toggleFS"||e==="fullscreen"&&!Vy())return null;let n=null,r=i.slides.length||0,o=0,a=0;for(let c of i.slides)(c.panzoom||c.type==="image")&&o++,(c.type==="image"||c.downloadSrc)&&a++;if(r<2&&["infobar","prev","next"].includes(e))return n;if(ef[e]!==void 0&&!o||e==="download"&&!a)return null;if(e==="thumbs"){let c=t.plugins.Thumbs;if(!c||!c.isEnabled)return null}if(e==="slideshow"&&(!i.plugins.Autoplay||r<2))return null;if(ef[e]!==void 0){let c=ef[e];n=document.createElement("button"),n.setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),ge(n,"f-button"),c.action&&(n.dataset.panzoomAction=c.action),c.change&&(n.dataset.panzoomChange=JSON.stringify(c.change)),n.appendChild(Xi(this.instance.localize(c.icon)))}else{let c=(this.option("items")||[])[e];c&&(n=Xi(this.instance.localize(c.tpl)),typeof c.click=="function"&&n.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),typeof c.click=="function"&&c.click.call(this,this,u)}))}let l=n?.querySelector("svg");if(l)for(let[c,u]of Object.entries(b_))l.getAttribute(c)||l.setAttribute(c,String(u));return n}removeContainer(){let e=this.container;e&&e.remove(),this.container=null,this.state=In.Disabled;let t=this.instance.container;t&&ke(t,ky)}attach(){let e=this,t=e.instance;t.on("Carousel.initSlides",e.onReady),t.on("done",e.onDone),t.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}detach(){let e=this,t=e.instance;t.off("Carousel.initSlides",e.onReady),t.off("done",e.onDone),t.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}};Object.defineProperty(iu,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:v_});var y_={Hash:class extends ii{onReady(){ha=!1}onChange(s){Dn&&clearTimeout(Dn);let{hash:e}=qy(),{hash:t}=Kc(),i=s.isOpeningSlide(s.getSlide());i&&(xy=t===e?"":t),e&&e!==t&&(Dn=setTimeout(()=>{try{if(s.state===gt.Ready){let n="replaceState";i&&!$c&&(n="pushState",$c=!0),window.history[n]({},document.title,window.location.pathname+window.location.search+e)}}catch{}},300))}onClose(s){if(Dn&&clearTimeout(Dn),!ha&&$c)return $c=!1,ha=!1,void window.history.back();if(!ha)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(xy||""))}catch{}}attach(){let s=this.instance;s.on("ready",this.onReady),s.on(["Carousel.ready","Carousel.change"],this.onChange),s.on("close",this.onClose)}detach(){let s=this.instance;s.off("ready",this.onReady),s.off(["Carousel.ready","Carousel.change"],this.onChange),s.off("close",this.onClose)}static parseURL(){return Kc()}static startFromUrl(){Wy()}static destroy(){window.removeEventListener("hashchange",Yy,!1)}},Html:Zc,Images:Jc,Slideshow:eu,Thumbs:tu,Toolbar:iu},Dy="with-fancybox",sf="hide-scrollbar",Iy="--fancybox-scrollbar-compensate",Fy="--fancybox-body-margin",nf="aria-hidden",rf="is-using-tab",of="is-animated",Ry="is-compact",Ny="is-loading",af="is-opening",qc="has-caption",Qr="disabled",Ln="tabindex",By="download",lf="href",eo="src",Js=s=>typeof s=="string",zy=function(){var s=window.getSelection();return!!s&&s.type==="Range"},Si,Ai=null,kn=null,$y=0,Hy=0,da=new Map,w_=0,Ti=class s extends fa{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],t={},i={}){super(t),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:gt.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Si||(Si=Vy()),this.id=t.id||++w_,da.set(this.id,this),this.userSlides=e,this.userPlugins=i,queueMicrotask(()=>{this.init()})}init(){if(this.state===gt.Destroy)return;this.state=gt.Init,this.attachPlugins(Object.assign(Object.assign({},s.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!pa)return;let t=document,i=t.body,n=t.documentElement;if(i.classList.contains(sf))return;let r=window.innerWidth-n.getBoundingClientRect().width,o=parseFloat(window.getComputedStyle(i).marginRight);r<0&&(r=0),n.style.setProperty(Iy,`${r}px`),o&&i.style.setProperty(Fy,`${o}px`),i.classList.add(sf)})(),this.initLayout(),this.scale();let e=()=>{this.initCarousel(this.userSlides),this.state=gt.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(nf,"false")},16)};this.option("Fullscreen.autoStart")&&Si&&!Si.isFullscreen()?Si.request().then(()=>{this.startedFs=!0,e()}).catch(()=>e()):e()}initLayout(){var e,t;let i=this.option("parentEl")||document.body,n=Xi(this.localize(this.option("tpl.main")||""));n&&(n.setAttribute("id",`fancybox-${this.id}`),n.setAttribute("aria-label",this.localize("{{MODAL}}")),n.classList.toggle(Ry,this.isCompact),ge(n,this.option("mainClass")||""),ge(n,af),this.container=n,this.footer=n.querySelector(".fancybox__footer"),i.appendChild(n),ge(document.documentElement,Dy),Ai&&kn||(Ai=document.createElement("span"),ge(Ai,"fancybox-focus-guard"),Ai.setAttribute(Ln,"0"),Ai.setAttribute(nf,"true"),Ai.setAttribute("aria-label","Focus guard"),kn=Ai.cloneNode(),(e=n.parentElement)===null||e===void 0||e.insertBefore(Ai,n),(t=n.parentElement)===null||t===void 0||t.append(kn)),n.addEventListener("mousedown",r=>{$y=r.pageX,Hy=r.pageY,ke(n,rf)}),this.option("animated")&&(ge(n,of),setTimeout(()=>{this.isClosing()||ke(n,of)},350)),this.emit("initLayout"))}initCarousel(e){let t=this.container;if(!t)return;let i=t.querySelector(".fancybox__carousel");if(!i)return;let n=this.carousel=new to(i,qt({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));n.on("*",(r,o,...a)=>{this.emit(`Carousel.${o}`,r,...a)}),n.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(r,o,a)=>{this.clearContent(a),a.state=void 0}),n.on("Panzoom.touchStart",()=>{var r,o;this.isCompact||this.endIdle(),!((r=document.activeElement)===null||r===void 0)&&r.closest(".f-thumbs")&&((o=this.container)===null||o===void 0||o.focus())}),n.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(n.on("Panzoom.afterTransform",(r,o)=>{let a=this.getSlide();if(a&&cf(a.el))return;let l=this.container;if(l){let c=Math.abs(o.current.f),u=c<1?"":Math.max(.5,Math.min(1,1-c/o.contentRect.fitHeight*1.5));l.style.setProperty("--fancybox-ts",u?"0s":""),l.style.setProperty("--fancybox-opacity",u+"")}}),n.on("Panzoom.touchEnd",(r,o,a)=>{var l;let c=this.getSlide();if(c&&cf(c.el)||o.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((l=document.activeElement)===null||l===void 0?void 0:l.nodeName)!==-1)return;let u=Math.abs(o.dragOffset.y);o.lockedAxis==="y"&&(u>=200||u>=50&&o.dragOffset.time<300)&&(a&&a.cancelable&&a.preventDefault(),this.close(a,"f-throwOut"+(o.current.f<0?"Up":"Down")))})),n.on("change",r=>{var o;let a=(o=this.getSlide())===null||o===void 0?void 0:o.triggerEl;if(a){let l=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:r.page});a.dispatchEvent(l)}}),n.on(["refresh","change"],r=>{let o=this.container;if(!o)return;for(let c of o.querySelectorAll("[data-fancybox-current-index]"))c.innerHTML=r.page+1;for(let c of o.querySelectorAll("[data-fancybox-count]"))c.innerHTML=r.pages.length;if(!r.isInfinite){for(let c of o.querySelectorAll("[data-fancybox-next]"))r.page<r.pages.length-1?(c.removeAttribute(Qr),c.removeAttribute(Ln)):(c.setAttribute(Qr,""),c.setAttribute(Ln,"-1"));for(let c of o.querySelectorAll("[data-fancybox-prev]"))r.page>0?(c.removeAttribute(Qr),c.removeAttribute(Ln)):(c.setAttribute(Qr,""),c.setAttribute(Ln,"-1"))}let a=this.getSlide();if(!a)return;let l=a.downloadSrc||"";l||a.type!=="image"||a.error||!Js(a[eo])||(l=a[eo]);for(let c of o.querySelectorAll("[data-fancybox-download]")){let u=a.downloadFilename;l?(c.removeAttribute(Qr),c.removeAttribute(Ln),c.setAttribute(lf,l),c.setAttribute(By,u||l),c.setAttribute("target","_blank")):(c.setAttribute(Qr,""),c.setAttribute(Ln,"-1"),c.removeAttribute(lf),c.removeAttribute(By))}}),this.emit("initCarousel")}attachEvents(){let e=this,t=e.container;if(!t)return;t.addEventListener("click",e.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize);let i=window.visualViewport;i&&(i.addEventListener("scroll",e.onResize),i.addEventListener("resize",e.onResize))}detachEvents(){let e=this,t=e.container;if(!t)return;document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize);let i=window.visualViewport;i&&(i.removeEventListener("resize",e.onResize),i.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0)}scale(){let e=this.container;if(!e)return;let t=window.visualViewport,i=Math.max(1,t?.scale||1),n="",r="",o="";if(t&&i>1){let a=`${t.offsetLeft}px`,l=`${t.offsetTop}px`;n=t.width*i+"px",r=t.height*i+"px",o=`translate3d(${a}, ${l}, 0) scale(${1/i})`}e.style.transform=o,e.style.width=n,e.style.height=r}onClick(e){var t;let{container:i,isCompact:n}=this;if(!i||this.isClosing())return;!n&&this.option("idle")&&this.resetIdle();let r=e.composedPath()[0];if(r.closest(".fancybox-spinner")||r.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(r.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(r.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if(e.type==="click"&&e.detail===0||Math.abs(e.pageX-$y)>30||Math.abs(e.pageY-Hy)>30)return;let o=document.activeElement;if(zy()&&o&&i.contains(o))return;if(n&&((t=this.getSlide())===null||t===void 0?void 0:t.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",e),e.defaultPrevented)return;let a=!1;if(r.closest(".fancybox__content")){if(o){if(o.closest("[contenteditable]"))return;r.matches(Jp)||o.blur()}if(zy())return;a=this.option("contentClick")}else r.closest(".fancybox__carousel")&&!r.matches(Jp)&&(a=this.option("backdropClick"));a==="close"?(e.preventDefault(),this.close(e)):a==="next"?(e.preventDefault(),this.next()):a==="prev"&&(e.preventDefault(),this.prev())}onWheel(e){let t=e.target,i=this.option("wheel",e);t.closest(".fancybox__thumbs")&&(i="slide");let n=i==="slide",r=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(l,c){return Math.abs(c)>Math.abs(l)?c:l}),o=Math.max(-1,Math.min(1,r)),a=Date.now();this.pwt&&a-this.pwt<300?n&&e.preventDefault():(this.pwt=a,this.emit("wheel",e,o),e.defaultPrevented||(i==="close"?(e.preventDefault(),this.close(e)):i==="slide"&&(Wc(t)||(e.preventDefault(),this[o>0?"prev":"next"]()))))}onKeydown(e){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();let t=e.key,i=this.option("keyboard");if(!i)return;let n=e.composedPath()[0],r=document.activeElement&&document.activeElement.classList,o=r&&r.contains("f-button")||n.dataset.carouselPage||n.dataset.carouselIndex;if(t!=="Escape"&&!o&&Vt(n)&&(n.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(n.nodeName)!==-1)||(e.key==="Tab"?ge(this.container,rf):ke(this.container,rf),e.ctrlKey||e.altKey||e.shiftKey))return;this.emit("keydown",t,e);let a=i[t];a&&typeof this[a]=="function"&&(e.preventDefault(),this[a]())}onResize(){let e=this.container;if(!e)return;let t=this.isCompact;e.classList.toggle(Ry,t),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(e){let t=this.optionFor(e,"closeButton")||!1;if(t==="auto"){let n=this.plugins.Toolbar;if(n&&n.state===In.Ready)return}if(!t||!e.contentEl||e.closeBtnEl)return;let i=this.option("tpl.closeButton");if(i){let n=Xi(this.localize(i));e.closeBtnEl=e.contentEl.appendChild(n),e.el&&ge(e.el,"has-close-btn")}}manageCaption(e=void 0){var t,i;let n="fancybox__caption",r=this.container;if(!r)return;ke(r,qc);let o=this.isCompact||this.option("commonCaption"),a=!o;if(this.caption&&this.stop(this.caption),a&&this.caption&&(this.caption.remove(),this.caption=null),o&&!this.caption)for(let h of((t=this.carousel)===null||t===void 0?void 0:t.slides)||[])h.captionEl&&(h.captionEl.remove(),h.captionEl=void 0,ke(h.el,qc),(i=h.el)===null||i===void 0||i.removeAttribute("aria-labelledby"));if(e||(e=this.getSlide()),!e||o&&!this.isCurrentSlide(e))return;let l=e.el,c=this.optionFor(e,"caption","");if(!c)return void(o&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let u=null;if(a){if(u=e.captionEl||null,l&&!u){let h=n+`_${this.id}_${e.index}`;u=document.createElement("div"),ge(u,n),u.setAttribute("id",h),e.captionEl=l.appendChild(u),ge(l,qc),l.setAttribute("aria-labelledby",h)}}else u=this.caption,u||(u=r.querySelector("."+n)),!u&&(u=document.createElement("div"),u.dataset.fancyboxCaption="",ge(u,n),(this.footer||r).prepend(u)),ge(r,qc),this.caption=u;u&&(u.innerHTML="",Js(c)||typeof c=="number"?u.innerHTML=c+"":c instanceof HTMLElement&&u.appendChild(c))}checkFocus(e){this.focus(e)}focus(e){var t;if(this.ignoreFocusChange)return;let i=document.activeElement||null,n=e?.target||null,r=this.container,o=(t=this.carousel)===null||t===void 0?void 0:t.viewport;if(!r||!o||!e&&i&&r.contains(i))return;let a=this.getSlide(),l=a&&a.state===Pt.Ready?a.el:null;if(!l||l.contains(i)||r===i)return;e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;let c=Array.from(r.querySelectorAll(Jp)),u=[],h=null;for(let p of c){let g=!p.offsetParent||!!p.closest('[aria-hidden="true"]'),y=l&&l.contains(p),A=!o.contains(p);if(p===r||(y||A)&&!g){u.push(p);let S=p.dataset.origTabindex;S!==void 0&&S&&(p.tabIndex=parseFloat(S)),p.removeAttribute("data-orig-tabindex"),!p.hasAttribute("autoFocus")&&h||(h=p)}else{let S=p.dataset.origTabindex===void 0?p.getAttribute("tabindex")||"":p.dataset.origTabindex;S&&(p.dataset.origTabindex=S),p.tabIndex=-1}}let f=null;e?(!n||u.indexOf(n)<0)&&(f=h||r,u.length&&(i===kn?f=u[0]:this.lastFocus!==r&&i!==Ai||(f=u[u.length-1]))):f=a&&a.type==="image"?r:h||r,f&&Ty(f),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){let e=this.carousel;e&&e.pages.length>1&&e.slideNext()}prev(){let e=this.carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return((e=s.getInstance())===null||e===void 0?void 0:e.id)==this.id}animate(e=null,t="",i){if(!e||!t)return void(i&&i());this.stop(e);let n=r=>{r.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",n),delete e.dataset.animationName,i&&i(),ke(e,t))};e.dataset.animationName=t,e.addEventListener("animationend",n),ge(e,t)}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(e,t="",i=!0){if(this.isClosing())return;let n=e.el;if(!n)return;let r=null;if(Vt(t)?r=t:(r=Xi(t+""),Vt(r)||(r=document.createElement("div"),r.innerHTML=t+"")),["img","picture","iframe","video","audio"].includes(r.nodeName.toLowerCase())){let o=document.createElement("div");o.appendChild(r),r=o}Vt(r)&&e.filter&&!e.error&&(r=r.querySelector(e.filter)),r&&Vt(r)?(ge(r,"fancybox__content"),e.id&&r.setAttribute("id",e.id),r.style.display!=="none"&&getComputedStyle(r).getPropertyValue("display")!=="none"||(r.style.display=e.display||this.option("defaultDisplay")||"flex"),n.classList.add(`has-${e.error?"error":e.type||"unknown"}`),n.prepend(r),e.contentEl=r,i&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}")}revealContent(e,t){let i=e.el,n=e.contentEl;i&&n&&(this.emit("reveal",e),this.hideLoading(e),e.state=Pt.Opening,(t=this.isOpeningSlide(e)?t===void 0?this.optionFor(e,"showClass"):t:"f-fadeIn")?this.animate(n,t,()=>{this.done(e)}):this.done(e))}done(e){this.isClosing()||(e.state=Pt.Ready,this.emit("done",e),ge(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask(()=>{var t;(t=e.panzoom)===null||t===void 0||t.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(e)&&(ke(this.container,af),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(e){let t=this.getSlide();return!(!e||!t)&&t.index===e.index}isOpeningSlide(e){var t,i;return((t=this.carousel)===null||t===void 0?void 0:t.prevPage)===null&&e&&e.index===((i=this.getSlide())===null||i===void 0?void 0:i.index)}showLoading(e){e.state=Pt.Loading;let t=e.el;t&&(ge(t,Ny),this.emit("loading",e),e.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!e.spinnerEl&&e.state===Pt.Loading){let i=Xi(ff);ge(i,"fancybox-spinner"),e.spinnerEl=i,t.prepend(i),this.animate(i,"f-fadeIn")}},250))}hideLoading(e){let t=e.el;if(!t)return;let i=e.spinnerEl;this.isClosing()?i?.remove():(ke(t,Ny),i&&this.animate(i,"f-fadeOut",()=>{i.remove()}),e.state===Pt.Loading&&(this.emit("loaded",e),e.state=Pt.Ready))}setError(e,t){if(this.isClosing())return;let i=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",i,e),i.defaultPrevented)return;e.error=t,this.hideLoading(e),this.clearContent(e);let n=document.createElement("div");n.classList.add("fancybox-error"),n.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,n)}clearContent(e){if(e.state===void 0)return;this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0);let t=e.el;t&&(ke(t,"has-error"),ke(t,"has-unknown"),ke(t,`has-${e.type||"unknown"}`)),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0}getSlide(){var e;let t=this.carousel;return((e=t?.pages[t?.page])===null||e===void 0?void 0:e.slides[0])||void 0}close(e,t){if(this.isClosing())return;let i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,e),i.defaultPrevented)return;e&&e.cancelable&&(e.preventDefault(),e.stopPropagation());let n=()=>{this.proceedClose(e,t)};this.startedFs&&Si&&Si.isFullscreen()?Promise.resolve(Si.exit()).then(()=>n()):n()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){let t=()=>{this.clearIdle(),this.idle=!0,ge(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(e)t();else{let i=this.option("idle");i&&(this.idleTimer=setTimeout(t,i))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,ke(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){Si&&(Si.isFullscreen()?Si.exit():Si.request().then(()=>{this.startedFs=!0}))}isClosing(){return[gt.Closing,gt.CustomClosing,gt.Destroy].includes(this.state)}proceedClose(e,t){var i,n;this.state=gt.Closing,this.clearIdle(),this.detachEvents();let r=this.container,o=this.carousel,a=this.getSlide(),l=a&&this.option("placeFocusBack")?a.triggerEl||this.option("triggerEl"):null;if(l&&(jy(l)?Ty(l):l.focus()),r&&(ke(r,af),ge(r,"is-closing"),r.setAttribute(nf,"true"),this.option("animated")&&ge(r,of),r.style.pointerEvents="none"),o){o.clearTransitions(),(i=o.panzoom)===null||i===void 0||i.destroy(),(n=o.plugins.Navigation)===null||n===void 0||n.detach();for(let c of o.slides){c.state=Pt.Closing,this.hideLoading(c);let u=c.contentEl;u&&this.stop(u);let h=c?.panzoom;h&&(h.stop(),h.detachEvents(),h.detachObserver()),this.isCurrentSlide(c)||o.emit("removeSlide",c)}}this.emit("close",e),this.state!==gt.CustomClosing?(t===void 0&&a&&(t=this.optionFor(a,"hideClass")),t&&a?(this.animate(a.contentEl,t,()=>{o&&o.emit("removeSlide",a)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var e;if(this.state===gt.Destroy)return;this.state=gt.Destroy,(e=this.carousel)===null||e===void 0||e.destroy();let t=this.container;t&&t.remove(),da.delete(this.id);let i=s.getInstance();i?i.focus():(Ai&&(Ai.remove(),Ai=null),kn&&(kn.remove(),kn=null),ke(document.documentElement,Dy),(()=>{if(!pa)return;let n=document,r=n.body;r.classList.remove(sf),r.style.setProperty(Fy,""),n.documentElement.style.setProperty(Iy,"")})(),this.emit("destroy"))}static bind(e,t,i){if(!pa)return;let n,r="",o={};if(e===void 0?n=document.body:Js(e)?(n=document.body,r=e,typeof t=="object"&&(o=t||{})):(n=e,Js(t)&&(r=t),typeof i=="object"&&(o=i||{})),!n||!Vt(n))return;r=r||"[data-fancybox]";let a=s.openers.get(n)||new Map;a.set(r,o),s.openers.set(n,a),a.size===1&&n.addEventListener("click",s.fromEvent)}static unbind(e,t){let i,n="";if(Js(e)?(i=document.body,n=e):(i=e,Js(t)&&(n=t)),!i)return;let r=s.openers.get(i);r&&n&&r.delete(n),n&&r||(s.openers.delete(i),i.removeEventListener("click",s.fromEvent))}static destroy(){let e;for(;e=s.getInstance();)e.destroy();for(let t of s.openers.keys())t.removeEventListener("click",s.fromEvent);s.openers=new Map}static fromEvent(e){if(e.defaultPrevented||e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e.composedPath()[0],i=t.closest("[data-fancybox-trigger]");if(i){let g=i.dataset.fancyboxTrigger||"",y=document.querySelectorAll(`[data-fancybox="${g}"]`),A=parseInt(i.dataset.fancyboxIndex||"",10)||0;t=y[A]||t}if(!(t&&t instanceof Element))return;let n,r,o,a;if([...s.openers].reverse().find(([g,y])=>!(!g.contains(t)||![...y].reverse().find(([A,S])=>{let O=t.closest(A);return!!O&&(n=g,r=A,o=O,a=S,!0)}))),!n||!r||!o)return;a=a||{},e.preventDefault(),t=o;let l=[],c=qt({},hf,a);c.event=e,c.triggerEl=t,c.delegate=i;let u=c.groupAll,h=c.groupAttr,f=h&&t?t.getAttribute(`${h}`):"";if((!t||f||u)&&(l=[].slice.call(n.querySelectorAll(r))),t&&!u&&(l=f?l.filter(g=>g.getAttribute(`${h}`)===f):[t]),!l.length)return;let p=s.getInstance();return p&&p.options.triggerEl&&l.indexOf(p.options.triggerEl)>-1?void 0:(t&&(c.startIndex=l.indexOf(t)),s.fromNodes(l,c))}static fromSelector(e,t,i){let n=null,r="",o={};if(Js(e)?(n=document.body,r=e,typeof t=="object"&&(o=t||{})):e instanceof HTMLElement&&Js(t)&&(n=e,r=t,typeof i=="object"&&(o=i||{})),!n||!r)return!1;let a=s.openers.get(n);return!!a&&(o=qt({},a.get(r)||{},o),!!o&&s.fromNodes(Array.from(n.querySelectorAll(r)),o))}static fromNodes(e,t){t=qt({},hf,t||{});let i=[];for(let n of e){let r=n.dataset||{},o=r[eo]||n.getAttribute(lf)||n.getAttribute("currentSrc")||n.getAttribute(eo)||void 0,a,l=t.delegate,c;l&&i.length===t.startIndex&&(a=l instanceof HTMLImageElement?l:l.querySelector("img:not([aria-hidden])")),a||(a=n instanceof HTMLImageElement?n:n.querySelector("img:not([aria-hidden])")),a&&(c=a.currentSrc||a[eo]||void 0,!c&&a.dataset&&(c=a.dataset.lazySrc||a.dataset[eo]||void 0));let u={src:o,triggerEl:n,thumbEl:a,thumbElSrc:c,thumbSrc:c};for(let h in r){let f=r[h]+"";f=f!=="false"&&(f==="true"||f),u[h]=f}i.push(u)}return new s(i,t)}static getInstance(e){return e?da.get(e):Array.from(da.values()).reverse().find(t=>!t.isClosing()&&t)||null}static getSlide(){var e;return((e=s.getInstance())===null||e===void 0?void 0:e.getSlide())||null}static show(e=[],t={}){return new s(e,t)}static next(){let e=s.getInstance();e&&e.next()}static prev(){let e=s.getInstance();e&&e.prev()}static close(e=!0,...t){if(e)for(let i of da.values())i.close(...t);else{let i=s.getInstance();i&&i.close(...t)}}};Object.defineProperty(Ti,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.33"}),Object.defineProperty(Ti,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:hf}),Object.defineProperty(Ti,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:y_}),Object.defineProperty(Ti,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});var su=class extends Oe{connect(){Ti.bind("[data-fancybox]")}};var E_=(()=>{let s=new ResizeObserver(o=>o.forEach(a=>a.target.querySelectorAll(".pagy-rjs").forEach(l=>l.pagyRender()))),e=(o,[a,l,c,u])=>{let h=o.parentElement??o,f=Object.keys(l).map(y=>parseInt(y)).sort((y,A)=>A-y),p=-1,g=(y,A,S)=>y.replace(/__pagy_page__/g,A).replace(/__pagy_label__/g,S);(o.pagyRender=function(){let y=f.find(I=>I<h.clientWidth)||0;if(y===p)return;let A=a.before,S=l[y.toString()],O=c?.[y.toString()]??S.map(I=>I.toString());S.forEach((I,F)=>{let H=O[F],U;typeof I=="number"?U=g(a.a,I.toString(),H):I==="gap"?U=a.gap:U=g(a.current,I,H),A+=typeof u=="string"&&I==1?r(U,u):U}),A+=a.after,o.innerHTML="",o.insertAdjacentHTML("afterbegin",A),p=y})(),o.classList.contains("pagy-rjs")&&s.observe(h)},t=(o,[a,l])=>n(o,c=>[c,a.replace(/__pagy_page__/,c)],l),i=(o,[a,l,c])=>{n(o,u=>{let h=Math.max(Math.ceil(a/parseInt(u)),1).toString(),f=l.replace(/__pagy_page__/,h).replace(/__pagy_items__/,u);return[h,f]},c)},n=(o,a,l)=>{let c=o.querySelector("input"),u=o.querySelector("a"),h=c.value,f=function(){if(c.value===h)return;let[p,g,y]=[c.min,c.value,c.max].map(O=>parseInt(O)||0);if(g<p||g>y){c.value=h,c.select();return}let[A,S]=a(c.value);typeof l=="string"&&A==="1"&&(S=r(S,l)),u.href=S,u.click()};["change","focus"].forEach(p=>c.addEventListener(p,()=>c.select())),c.addEventListener("focusout",f),c.addEventListener("keypress",p=>{p.key==="Enter"&&f()})},r=(o,a)=>o.replace(new RegExp(`[?&]${a}=1\\b(?!&)|\\b${a}=1&`),"");return{version:"8.6.3",init(o){let l=(o instanceof Element?o:document).querySelectorAll("[data-pagy]");for(let c of l)try{let u=Uint8Array.from(atob(c.getAttribute("data-pagy")),p=>p.charCodeAt(0)),[h,...f]=JSON.parse(new TextDecoder().decode(u));h==="nav"?e(c,f):h==="combo"?t(c,f):h==="selector"?i(c,f):console.warn(`Skipped Pagy.init() for: %o
Unknown keyword '%s'`,c,h)}catch(u){console.warn(`Skipped Pagy.init() for: %o
%s`,c,u)}}}})(),Jy=E_;var nu=class extends Oe{connect(){Jy.init(this.element)}};var ru=class extends Oe{static targets=["map","addresses"];connect(){ymaps.ready(()=>{this.initMap(),this.processAddresses()})}initMap(){this.myMap=new ymaps.Map(this.mapTarget,{center:[55.753994,37.622093],zoom:10,controls:["zoomControl","fullscreenControl"]})}processAddresses(){this.addressesTarget.querySelectorAll("span").forEach(e=>{let t=e.textContent.trim();this.addCityToMap(t)})}addCityToMap(s){if(!this.myMap)return console.error("\u041A\u0430\u0440\u0442\u0430 \u0435\u0449\u0435 \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u0430");ymaps.geocode(s,{results:1}).then(e=>{let t=e.geoObjects.get(0),i=t.geometry.getCoordinates(),n=t.properties.get("boundedBy");t.options.set("preset","islands#darkBlueDotIconWithCaption"),t.properties.set("iconCaption",t.getAddressLine()),this.myMap.geoObjects.add(t),this.myMap.setBounds(this.myMap.geoObjects.getBounds(),{checkZoomRange:!0})})}};function Zy(s){return s!==null&&typeof s=="object"&&"constructor"in s&&s.constructor===Object}function mf(s,e){s===void 0&&(s={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof s[t]>"u"?s[t]=e[t]:Zy(e[t])&&Zy(s[t])&&Object.keys(e[t]).length>0&&mf(s[t],e[t])})}var Qy={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function vt(){let s=typeof document<"u"?document:{};return mf(s,Qy),s}var S_={document:Qy,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(s){return typeof setTimeout>"u"?(s(),null):setTimeout(s,0)},cancelAnimationFrame(s){typeof setTimeout>"u"||clearTimeout(s)}};function ut(){let s=typeof window<"u"?window:{};return mf(s,S_),s}function e0(s){return s===void 0&&(s=""),s.trim().split(" ").filter(e=>!!e.trim())}function t0(s){let e=s;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Rn(s,e){return e===void 0&&(e=0),setTimeout(s,e)}function Nn(){return Date.now()}function A_(s){let e=ut(),t;return e.getComputedStyle&&(t=e.getComputedStyle(s,null)),!t&&s.currentStyle&&(t=s.currentStyle),t||(t=s.style),t}function gf(s,e){e===void 0&&(e="x");let t=ut(),i,n,r,o=A_(s);return t.WebKitCSSMatrix?(n=o.transform||o.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(a=>a.replace(",",".")).join(", ")),r=new t.WebKitCSSMatrix(n==="none"?"":n)):(r=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=r.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?n=r.m41:i.length===16?n=parseFloat(i[12]):n=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?n=r.m42:i.length===16?n=parseFloat(i[13]):n=parseFloat(i[5])),n||0}function ma(s){return typeof s=="object"&&s!==null&&s.constructor&&Object.prototype.toString.call(s).slice(8,-1)==="Object"}function T_(s){return typeof window<"u"&&typeof window.HTMLElement<"u"?s instanceof HTMLElement:s&&(s.nodeType===1||s.nodeType===11)}function Wt(){let s=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){let i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!T_(i)){let n=Object.keys(Object(i)).filter(r=>e.indexOf(r)<0);for(let r=0,o=n.length;r<o;r+=1){let a=n[r],l=Object.getOwnPropertyDescriptor(i,a);l!==void 0&&l.enumerable&&(ma(s[a])&&ma(i[a])?i[a].__swiper__?s[a]=i[a]:Wt(s[a],i[a]):!ma(s[a])&&ma(i[a])?(s[a]={},i[a].__swiper__?s[a]=i[a]:Wt(s[a],i[a])):s[a]=i[a])}}}return s}function so(s,e,t){s.style.setProperty(e,t)}function vf(s){let{swiper:e,targetPosition:t,side:i}=s,n=ut(),r=-e.translate,o=null,a,l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(e.cssModeFrameID);let c=t>r?"next":"prev",u=(f,p)=>c==="next"&&f>=p||c==="prev"&&f<=p,h=()=>{a=new Date().getTime(),o===null&&(o=a);let f=Math.max(Math.min((a-o)/l,1),0),p=.5-Math.cos(f*Math.PI)/2,g=r+p*(t-r);if(u(g,t)&&(g=t),e.wrapperEl.scrollTo({[i]:g}),u(g,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:g})}),n.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=n.requestAnimationFrame(h)};h()}function St(s,e){return e===void 0&&(e=""),[...s.children].filter(t=>t.matches(e))}function ga(s){try{console.warn(s);return}catch{}}function ki(s,e){e===void 0&&(e=[]);let t=document.createElement(s);return t.classList.add(...Array.isArray(e)?e:e0(e)),t}function i0(s,e){let t=[];for(;s.previousElementSibling;){let i=s.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),s=i}return t}function s0(s,e){let t=[];for(;s.nextElementSibling;){let i=s.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),s=i}return t}function gs(s,e){return ut().getComputedStyle(s,null).getPropertyValue(e)}function va(s){let e=s,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function ba(s,e){let t=[],i=s.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function ou(s,e,t){let i=ut();return t?s[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(s,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(s,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):s.offsetWidth}function si(s){return(Array.isArray(s)?s:[s]).filter(e=>!!e)}var bf;function x_(){let s=ut(),e=vt();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in s||s.DocumentTouch&&e instanceof s.DocumentTouch)}}function c0(){return bf||(bf=x_()),bf}var yf;function C_(s){let{userAgent:e}=s===void 0?{}:s,t=c0(),i=ut(),n=i.navigator.platform,r=e||i.navigator.userAgent,o={ios:!1,android:!1},a=i.screen.width,l=i.screen.height,c=r.match(/(Android);?[\s\/]+([\d.]+)?/),u=r.match(/(iPad).*OS\s([\d_]+)/),h=r.match(/(iPod)(.*OS\s([\d_]+))?/),f=!u&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=n==="Win32",g=n==="MacIntel",y=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&g&&t.touch&&y.indexOf(`${a}x${l}`)>=0&&(u=r.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),g=!1),c&&!p&&(o.os="android",o.android=!0),(u||f||h)&&(o.os="ios",o.ios=!0),o}function u0(s){return s===void 0&&(s={}),yf||(yf=C_(s)),yf}var wf;function P_(){let s=ut(),e=u0(),t=!1;function i(){let a=s.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(i()){let a=String(s.navigator.userAgent);if(a.includes("Version/")){let[l,c]=a.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));t=l<16||l===16&&c<2}}let n=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(s.navigator.userAgent),r=i(),o=r||n&&e.ios;return{isSafari:t||r,needPerspectiveFix:t,need3dFix:o,isWebView:n}}function __(){return wf||(wf=P_()),wf}function O_(s){let{swiper:e,on:t,emit:i}=s,n=ut(),r=null,o=null,a=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(r=new ResizeObserver(h=>{o=n.requestAnimationFrame(()=>{let{width:f,height:p}=e,g=f,y=p;h.forEach(A=>{let{contentBoxSize:S,contentRect:O,target:I}=A;I&&I!==e.el||(g=O?O.width:(S[0]||S).inlineSize,y=O?O.height:(S[0]||S).blockSize)}),(g!==f||y!==p)&&a()})}),r.observe(e.el))},c=()=>{o&&n.cancelAnimationFrame(o),r&&r.unobserve&&e.el&&(r.unobserve(e.el),r=null)},u=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof n.ResizeObserver<"u"){l();return}n.addEventListener("resize",a),n.addEventListener("orientationchange",u)}),t("destroy",()=>{c(),n.removeEventListener("resize",a),n.removeEventListener("orientationchange",u)})}function M_(s){let{swiper:e,extendParams:t,on:i,emit:n}=s,r=[],o=ut(),a=function(u,h){h===void 0&&(h={});let f=o.MutationObserver||o.WebkitMutationObserver,p=new f(g=>{if(e.__preventObserver__)return;if(g.length===1){n("observerUpdate",g[0]);return}let y=function(){n("observerUpdate",g[0])};o.requestAnimationFrame?o.requestAnimationFrame(y):o.setTimeout(y,0)});p.observe(u,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:typeof h.childList>"u"?!0:h.childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),r.push(p)},l=()=>{if(e.params.observer){if(e.params.observeParents){let u=ba(e.hostEl);for(let h=0;h<u.length;h+=1)a(u[h])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},c=()=>{r.forEach(u=>{u.disconnect()}),r.splice(0,r.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var L_={on(s,e,t){let i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;let n=t?"unshift":"push";return s.split(" ").forEach(r=>{i.eventsListeners[r]||(i.eventsListeners[r]=[]),i.eventsListeners[r][n](e)}),i},once(s,e,t){let i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function n(){i.off(s,n),n.__emitterProxy&&delete n.__emitterProxy;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];e.apply(i,o)}return n.__emitterProxy=e,i.on(s,n,t)},onAny(s,e){let t=this;if(!t.eventsListeners||t.destroyed||typeof s!="function")return t;let i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(s)<0&&t.eventsAnyListeners[i](s),t},offAny(s){let e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;let t=e.eventsAnyListeners.indexOf(s);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(s,e){let t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||s.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((n,r)=>{(n===e||n.__emitterProxy&&n.__emitterProxy===e)&&t.eventsListeners[i].splice(r,1)})}),t},emit(){let s=this;if(!s.eventsListeners||s.destroyed||!s.eventsListeners)return s;let e,t,i;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return typeof r[0]=="string"||Array.isArray(r[0])?(e=r[0],t=r.slice(1,r.length),i=s):(e=r[0].events,t=r[0].data,i=r[0].context||s),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{s.eventsAnyListeners&&s.eventsAnyListeners.length&&s.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...t])}),s.eventsListeners&&s.eventsListeners[l]&&s.eventsListeners[l].forEach(c=>{c.apply(i,t)})}),s}};function k_(){let s=this,e,t,i=s.el;typeof s.params.width<"u"&&s.params.width!==null?e=s.params.width:e=i.clientWidth,typeof s.params.height<"u"&&s.params.height!==null?t=s.params.height:t=i.clientHeight,!(e===0&&s.isHorizontal()||t===0&&s.isVertical())&&(e=e-parseInt(gs(i,"padding-left")||0,10)-parseInt(gs(i,"padding-right")||0,10),t=t-parseInt(gs(i,"padding-top")||0,10)-parseInt(gs(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(s,{width:e,height:t,size:s.isHorizontal()?e:t}))}function D_(){let s=this;function e(G,ae){return parseFloat(G.getPropertyValue(s.getDirectionLabel(ae))||0)}let t=s.params,{wrapperEl:i,slidesEl:n,size:r,rtlTranslate:o,wrongRTL:a}=s,l=s.virtual&&t.virtual.enabled,c=l?s.virtual.slides.length:s.slides.length,u=St(n,`.${s.params.slideClass}, swiper-slide`),h=l?s.virtual.slides.length:u.length,f=[],p=[],g=[],y=t.slidesOffsetBefore;typeof y=="function"&&(y=t.slidesOffsetBefore.call(s));let A=t.slidesOffsetAfter;typeof A=="function"&&(A=t.slidesOffsetAfter.call(s));let S=s.snapGrid.length,O=s.slidesGrid.length,I=t.spaceBetween,F=-y,H=0,U=0;if(typeof r>"u")return;typeof I=="string"&&I.indexOf("%")>=0?I=parseFloat(I.replace("%",""))/100*r:typeof I=="string"&&(I=parseFloat(I)),s.virtualSize=-I,u.forEach(G=>{o?G.style.marginLeft="":G.style.marginRight="",G.style.marginBottom="",G.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(so(i,"--swiper-centered-offset-before",""),so(i,"--swiper-centered-offset-after",""));let W=t.grid&&t.grid.rows>1&&s.grid;W?s.grid.initSlides(u):s.grid&&s.grid.unsetSlides();let J,oe=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(G=>typeof t.breakpoints[G].slidesPerView<"u").length>0;for(let G=0;G<h;G+=1){J=0;let ae;if(u[G]&&(ae=u[G]),W&&s.grid.updateSlide(G,ae,u),!(u[G]&&gs(ae,"display")==="none")){if(t.slidesPerView==="auto"){oe&&(u[G].style[s.getDirectionLabel("width")]="");let pe=getComputedStyle(ae),ue=ae.style.transform,te=ae.style.webkitTransform;if(ue&&(ae.style.transform="none"),te&&(ae.style.webkitTransform="none"),t.roundLengths)J=s.isHorizontal()?ou(ae,"width",!0):ou(ae,"height",!0);else{let $=e(pe,"width"),T=e(pe,"padding-left"),D=e(pe,"padding-right"),k=e(pe,"margin-left"),K=e(pe,"margin-right"),Z=pe.getPropertyValue("box-sizing");if(Z&&Z==="border-box")J=$+k+K;else{let{clientWidth:re,offsetWidth:ve}=ae;J=$+T+D+k+K+(ve-re)}}ue&&(ae.style.transform=ue),te&&(ae.style.webkitTransform=te),t.roundLengths&&(J=Math.floor(J))}else J=(r-(t.slidesPerView-1)*I)/t.slidesPerView,t.roundLengths&&(J=Math.floor(J)),u[G]&&(u[G].style[s.getDirectionLabel("width")]=`${J}px`);u[G]&&(u[G].swiperSlideSize=J),g.push(J),t.centeredSlides?(F=F+J/2+H/2+I,H===0&&G!==0&&(F=F-r/2-I),G===0&&(F=F-r/2-I),Math.abs(F)<1/1e3&&(F=0),t.roundLengths&&(F=Math.floor(F)),U%t.slidesPerGroup===0&&f.push(F),p.push(F)):(t.roundLengths&&(F=Math.floor(F)),(U-Math.min(s.params.slidesPerGroupSkip,U))%s.params.slidesPerGroup===0&&f.push(F),p.push(F),F=F+J+I),s.virtualSize+=J+I,H=J,U+=1}}if(s.virtualSize=Math.max(s.virtualSize,r)+A,o&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${s.virtualSize+I}px`),t.setWrapperSize&&(i.style[s.getDirectionLabel("width")]=`${s.virtualSize+I}px`),W&&s.grid.updateWrapperSize(J,f),!t.centeredSlides){let G=[];for(let ae=0;ae<f.length;ae+=1){let pe=f[ae];t.roundLengths&&(pe=Math.floor(pe)),f[ae]<=s.virtualSize-r&&G.push(pe)}f=G,Math.floor(s.virtualSize-r)-Math.floor(f[f.length-1])>1&&f.push(s.virtualSize-r)}if(l&&t.loop){let G=g[0]+I;if(t.slidesPerGroup>1){let ae=Math.ceil((s.virtual.slidesBefore+s.virtual.slidesAfter)/t.slidesPerGroup),pe=G*t.slidesPerGroup;for(let ue=0;ue<ae;ue+=1)f.push(f[f.length-1]+pe)}for(let ae=0;ae<s.virtual.slidesBefore+s.virtual.slidesAfter;ae+=1)t.slidesPerGroup===1&&f.push(f[f.length-1]+G),p.push(p[p.length-1]+G),s.virtualSize+=G}if(f.length===0&&(f=[0]),I!==0){let G=s.isHorizontal()&&o?"marginLeft":s.getDirectionLabel("marginRight");u.filter((ae,pe)=>!t.cssMode||t.loop?!0:pe!==u.length-1).forEach(ae=>{ae.style[G]=`${I}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let G=0;g.forEach(pe=>{G+=pe+(I||0)}),G-=I;let ae=G-r;f=f.map(pe=>pe<=0?-y:pe>ae?ae+A:pe)}if(t.centerInsufficientSlides){let G=0;g.forEach(pe=>{G+=pe+(I||0)}),G-=I;let ae=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(G+ae<r){let pe=(r-G-ae)/2;f.forEach((ue,te)=>{f[te]=ue-pe}),p.forEach((ue,te)=>{p[te]=ue+pe})}}if(Object.assign(s,{slides:u,snapGrid:f,slidesGrid:p,slidesSizesGrid:g}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){so(i,"--swiper-centered-offset-before",`${-f[0]}px`),so(i,"--swiper-centered-offset-after",`${s.size/2-g[g.length-1]/2}px`);let G=-s.snapGrid[0],ae=-s.slidesGrid[0];s.snapGrid=s.snapGrid.map(pe=>pe+G),s.slidesGrid=s.slidesGrid.map(pe=>pe+ae)}if(h!==c&&s.emit("slidesLengthChange"),f.length!==S&&(s.params.watchOverflow&&s.checkOverflow(),s.emit("snapGridLengthChange")),p.length!==O&&s.emit("slidesGridLengthChange"),t.watchSlidesProgress&&s.updateSlidesOffset(),s.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){let G=`${t.containerModifierClass}backface-hidden`,ae=s.el.classList.contains(G);h<=t.maxBackfaceHiddenSlides?ae||s.el.classList.add(G):ae&&s.el.classList.remove(G)}}function I_(s){let e=this,t=[],i=e.virtual&&e.params.virtual.enabled,n=0,r;typeof s=="number"?e.setTransition(s):s===!0&&e.setTransition(e.params.speed);let o=a=>i?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(r=0;r<Math.ceil(e.params.slidesPerView);r+=1){let a=e.activeIndex+r;if(a>e.slides.length&&!i)break;t.push(o(a))}else t.push(o(e.activeIndex));for(r=0;r<t.length;r+=1)if(typeof t[r]<"u"){let a=t[r].offsetHeight;n=a>n?a:n}(n||n===0)&&(e.wrapperEl.style.height=`${n}px`)}function F_(){let s=this,e=s.slides,t=s.isElement?s.isHorizontal()?s.wrapperEl.offsetLeft:s.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(s.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-s.cssOverflowAdjustment()}var n0=(s,e,t)=>{e&&!s.classList.contains(t)?s.classList.add(t):!e&&s.classList.contains(t)&&s.classList.remove(t)};function R_(s){s===void 0&&(s=this&&this.translate||0);let e=this,t=e.params,{slides:i,rtlTranslate:n,snapGrid:r}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-s;n&&(o=s),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<i.length;l+=1){let c=i[l],u=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=i[0].swiperSlideOffset);let h=(o+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),f=(o-r[0]+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),p=-(o-u),g=p+e.slidesSizesGrid[l],y=p>=0&&p<=e.size-e.slidesSizesGrid[l],A=p>=0&&p<e.size-1||g>1&&g<=e.size||p<=0&&g>=e.size;A&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l)),n0(c,A,t.slideVisibleClass),n0(c,y,t.slideFullyVisibleClass),c.progress=n?-h:h,c.originalProgress=n?-f:f}}function N_(s){let e=this;if(typeof s>"u"){let u=e.rtlTranslate?-1:1;s=e&&e.translate&&e.translate*u||0}let t=e.params,i=e.maxTranslate()-e.minTranslate(),{progress:n,isBeginning:r,isEnd:o,progressLoop:a}=e,l=r,c=o;if(i===0)n=0,r=!0,o=!0;else{n=(s-e.minTranslate())/i;let u=Math.abs(s-e.minTranslate())<1,h=Math.abs(s-e.maxTranslate())<1;r=u||n<=0,o=h||n>=1,u&&(n=0),h&&(n=1)}if(t.loop){let u=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[u],p=e.slidesGrid[h],g=e.slidesGrid[e.slidesGrid.length-1],y=Math.abs(s);y>=f?a=(y-f)/g:a=(y+g-p)/g,a>1&&(a-=1)}Object.assign(e,{progress:n,progressLoop:a,isBeginning:r,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(s),r&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!r||c&&!o)&&e.emit("fromEdge"),e.emit("progress",n)}var Ef=(s,e,t)=>{e&&!s.classList.contains(t)?s.classList.add(t):!e&&s.classList.contains(t)&&s.classList.remove(t)};function B_(){let s=this,{slides:e,params:t,slidesEl:i,activeIndex:n}=s,r=s.virtual&&t.virtual.enabled,o=s.grid&&t.grid&&t.grid.rows>1,a=h=>St(i,`.${t.slideClass}${h}, swiper-slide${h}`)[0],l,c,u;if(r)if(t.loop){let h=n-s.virtual.slidesBefore;h<0&&(h=s.virtual.slides.length+h),h>=s.virtual.slides.length&&(h-=s.virtual.slides.length),l=a(`[data-swiper-slide-index="${h}"]`)}else l=a(`[data-swiper-slide-index="${n}"]`);else o?(l=e.filter(h=>h.column===n)[0],u=e.filter(h=>h.column===n+1)[0],c=e.filter(h=>h.column===n-1)[0]):l=e[n];l&&(o||(u=s0(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!u&&(u=e[0]),c=i0(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(h=>{Ef(h,h===l,t.slideActiveClass),Ef(h,h===u,t.slideNextClass),Ef(h,h===c,t.slidePrevClass)}),s.emitSlidesClasses()}var au=(s,e)=>{if(!s||s.destroyed||!s.params)return;let t=()=>s.isElement?"swiper-slide":`.${s.params.slideClass}`,i=e.closest(t());if(i){let n=i.querySelector(`.${s.params.lazyPreloaderClass}`);!n&&s.isElement&&(i.shadowRoot?n=i.shadowRoot.querySelector(`.${s.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(n=i.shadowRoot.querySelector(`.${s.params.lazyPreloaderClass}`),n&&n.remove())})),n&&n.remove()}},Sf=(s,e)=>{if(!s.slides[e])return;let t=s.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},xf=s=>{if(!s||s.destroyed||!s.params)return;let e=s.params.lazyPreloadPrevNext,t=s.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);let i=s.params.slidesPerView==="auto"?s.slidesPerViewDynamic():Math.ceil(s.params.slidesPerView),n=s.activeIndex;if(s.params.grid&&s.params.grid.rows>1){let o=n,a=[o-e];a.push(...Array.from({length:e}).map((l,c)=>o+i+c)),s.slides.forEach((l,c)=>{a.includes(l.column)&&Sf(s,c)});return}let r=n+i-1;if(s.params.rewind||s.params.loop)for(let o=n-e;o<=r+e;o+=1){let a=(o%t+t)%t;(a<n||a>r)&&Sf(s,a)}else for(let o=Math.max(n-e,0);o<=Math.min(r+e,t-1);o+=1)o!==n&&(o>r||o<n)&&Sf(s,o)};function z_(s){let{slidesGrid:e,params:t}=s,i=s.rtlTranslate?s.translate:-s.translate,n;for(let r=0;r<e.length;r+=1)typeof e[r+1]<"u"?i>=e[r]&&i<e[r+1]-(e[r+1]-e[r])/2?n=r:i>=e[r]&&i<e[r+1]&&(n=r+1):i>=e[r]&&(n=r);return t.normalizeSlideIndex&&(n<0||typeof n>"u")&&(n=0),n}function $_(s){let e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:n,activeIndex:r,realIndex:o,snapIndex:a}=e,l=s,c,u=p=>{let g=p-e.virtual.slidesBefore;return g<0&&(g=e.virtual.slides.length+g),g>=e.virtual.slides.length&&(g-=e.virtual.slides.length),g};if(typeof l>"u"&&(l=z_(e)),i.indexOf(t)>=0)c=i.indexOf(t);else{let p=Math.min(n.slidesPerGroupSkip,l);c=p+Math.floor((l-p)/n.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===r&&!e.params.loop){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===r&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=u(l);return}let h=e.grid&&n.grid&&n.grid.rows>1,f;if(e.virtual&&n.virtual.enabled&&n.loop)f=u(l);else if(h){let p=e.slides.filter(y=>y.column===l)[0],g=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(g)&&(g=Math.max(e.slides.indexOf(p),0)),f=Math.floor(g/n.grid.rows)}else if(e.slides[l]){let p=e.slides[l].getAttribute("data-swiper-slide-index");p?f=parseInt(p,10):f=l}else f=l;Object.assign(e,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:f,previousIndex:r,activeIndex:l}),e.initialized&&xf(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function H_(s,e){let t=this,i=t.params,n=s.closest(`.${i.slideClass}, swiper-slide`);!n&&t.isElement&&e&&e.length>1&&e.includes(s)&&[...e.slice(e.indexOf(s)+1,e.length)].forEach(a=>{!n&&a.matches&&a.matches(`.${i.slideClass}, swiper-slide`)&&(n=a)});let r=!1,o;if(n){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===n){r=!0,o=a;break}}if(n&&r)t.clickedSlide=n,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(n.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var U_={updateSize:k_,updateSlides:D_,updateAutoHeight:I_,updateSlidesOffset:F_,updateSlidesProgress:R_,updateProgress:N_,updateSlidesClasses:B_,updateActiveIndex:$_,updateClickedSlide:H_};function j_(s){s===void 0&&(s=this.isHorizontal()?"x":"y");let e=this,{params:t,rtlTranslate:i,translate:n,wrapperEl:r}=e;if(t.virtualTranslate)return i?-n:n;if(t.cssMode)return n;let o=gf(r,s);return o+=e.cssOverflowAdjustment(),i&&(o=-o),o||0}function V_(s,e){let t=this,{rtlTranslate:i,params:n,wrapperEl:r,progress:o}=t,a=0,l=0,c=0;t.isHorizontal()?a=i?-s:s:l=s,n.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,n.cssMode?r[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:n.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),r.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let u,h=t.maxTranslate()-t.minTranslate();h===0?u=0:u=(s-t.minTranslate())/h,u!==o&&t.updateProgress(s),t.emit("setTranslate",t.translate,e)}function q_(){return-this.snapGrid[0]}function W_(){return-this.snapGrid[this.snapGrid.length-1]}function G_(s,e,t,i,n){s===void 0&&(s=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);let r=this,{params:o,wrapperEl:a}=r;if(r.animating&&o.preventInteractionOnTransition)return!1;let l=r.minTranslate(),c=r.maxTranslate(),u;if(i&&s>l?u=l:i&&s<c?u=c:u=s,r.updateProgress(u),o.cssMode){let h=r.isHorizontal();if(e===0)a[h?"scrollLeft":"scrollTop"]=-u;else{if(!r.support.smoothScroll)return vf({swiper:r,targetPosition:-u,side:h?"left":"top"}),!0;a.scrollTo({[h?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(r.setTransition(0),r.setTranslate(u),t&&(r.emit("beforeTransitionStart",e,n),r.emit("transitionEnd"))):(r.setTransition(e),r.setTranslate(u),t&&(r.emit("beforeTransitionStart",e,n),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(f){!r||r.destroyed||f.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,r.animating=!1,t&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}var Y_={getTranslate:j_,setTranslate:V_,minTranslate:q_,maxTranslate:W_,translateTo:G_};function X_(s,e){let t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${s}ms`,t.wrapperEl.style.transitionDelay=s===0?"0ms":""),t.emit("setTransition",s,e)}function d0(s){let{swiper:e,runCallbacks:t,direction:i,step:n}=s,{activeIndex:r,previousIndex:o}=e,a=i;if(a||(r>o?a="next":r<o?a="prev":a="reset"),e.emit(`transition${n}`),t&&r!==o){if(a==="reset"){e.emit(`slideResetTransition${n}`);return}e.emit(`slideChangeTransition${n}`),a==="next"?e.emit(`slideNextTransition${n}`):e.emit(`slidePrevTransition${n}`)}}function K_(s,e){s===void 0&&(s=!0);let t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),d0({swiper:t,runCallbacks:s,direction:e,step:"Start"}))}function J_(s,e){s===void 0&&(s=!0);let t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),d0({swiper:t,runCallbacks:s,direction:e,step:"End"}))}var Z_={setTransition:X_,transitionStart:K_,transitionEnd:J_};function Q_(s,e,t,i,n){s===void 0&&(s=0),t===void 0&&(t=!0),typeof s=="string"&&(s=parseInt(s,10));let r=this,o=s;o<0&&(o=0);let{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:h,rtlTranslate:f,wrapperEl:p,enabled:g}=r;if(!g&&!i&&!n||r.destroyed||r.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=r.params.speed);let y=Math.min(r.params.slidesPerGroupSkip,o),A=y+Math.floor((o-y)/r.params.slidesPerGroup);A>=l.length&&(A=l.length-1);let S=-l[A];if(a.normalizeSlideIndex)for(let I=0;I<c.length;I+=1){let F=-Math.floor(S*100),H=Math.floor(c[I]*100),U=Math.floor(c[I+1]*100);typeof c[I+1]<"u"?F>=H&&F<U-(U-H)/2?o=I:F>=H&&F<U&&(o=I+1):F>=H&&(o=I)}if(r.initialized&&o!==h&&(!r.allowSlideNext&&(f?S>r.translate&&S>r.minTranslate():S<r.translate&&S<r.minTranslate())||!r.allowSlidePrev&&S>r.translate&&S>r.maxTranslate()&&(h||0)!==o))return!1;o!==(u||0)&&t&&r.emit("beforeSlideChangeStart"),r.updateProgress(S);let O;if(o>h?O="next":o<h?O="prev":O="reset",f&&-S===r.translate||!f&&S===r.translate)return r.updateActiveIndex(o),a.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),a.effect!=="slide"&&r.setTranslate(S),O!=="reset"&&(r.transitionStart(t,O),r.transitionEnd(t,O)),!1;if(a.cssMode){let I=r.isHorizontal(),F=f?S:-S;if(e===0){let H=r.virtual&&r.params.virtual.enabled;H&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),H&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[I?"scrollLeft":"scrollTop"]=F})):p[I?"scrollLeft":"scrollTop"]=F,H&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1})}else{if(!r.support.smoothScroll)return vf({swiper:r,targetPosition:F,side:I?"left":"top"}),!0;p.scrollTo({[I?"left":"top"]:F,behavior:"smooth"})}return!0}return r.setTransition(e),r.setTranslate(S),r.updateActiveIndex(o),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,i),r.transitionStart(t,O),e===0?r.transitionEnd(t,O):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(F){!r||r.destroyed||F.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(t,O))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0}function eO(s,e,t,i){s===void 0&&(s=0),t===void 0&&(t=!0),typeof s=="string"&&(s=parseInt(s,10));let n=this;if(n.destroyed)return;typeof e>"u"&&(e=n.params.speed);let r=n.grid&&n.params.grid&&n.params.grid.rows>1,o=s;if(n.params.loop)if(n.virtual&&n.params.virtual.enabled)o=o+n.virtual.slidesBefore;else{let a;if(r){let f=o*n.params.grid.rows;a=n.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===f)[0].column}else a=n.getSlideIndexByData(o);let l=r?Math.ceil(n.slides.length/n.params.grid.rows):n.slides.length,{centeredSlides:c}=n.params,u=n.params.slidesPerView;u==="auto"?u=n.slidesPerViewDynamic():(u=Math.ceil(parseFloat(n.params.slidesPerView,10)),c&&u%2===0&&(u=u+1));let h=l-a<u;if(c&&(h=h||a<Math.ceil(u/2)),i&&c&&n.params.slidesPerView!=="auto"&&!r&&(h=!1),h){let f=c?a<n.activeIndex?"prev":"next":a-n.activeIndex-1<n.params.slidesPerView?"next":"prev";n.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?a+1:a-l+1,slideRealIndex:f==="next"?n.realIndex:void 0})}if(r){let f=o*n.params.grid.rows;o=n.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===f)[0].column}else o=n.getSlideIndexByData(o)}return requestAnimationFrame(()=>{n.slideTo(o,e,t,i)}),n}function tO(s,e,t){e===void 0&&(e=!0);let i=this,{enabled:n,params:r,animating:o}=i;if(!n||i.destroyed)return i;typeof s>"u"&&(s=i.params.speed);let a=r.slidesPerGroup;r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(a=Math.max(i.slidesPerViewDynamic("current",!0),1));let l=i.activeIndex<r.slidesPerGroupSkip?1:a,c=i.virtual&&r.virtual.enabled;if(r.loop){if(o&&!c&&r.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,s,e,t)}),!0}return r.rewind&&i.isEnd?i.slideTo(0,s,e,t):i.slideTo(i.activeIndex+l,s,e,t)}function iO(s,e,t){e===void 0&&(e=!0);let i=this,{params:n,snapGrid:r,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=i;if(!l||i.destroyed)return i;typeof s>"u"&&(s=i.params.speed);let u=i.virtual&&n.virtual.enabled;if(n.loop){if(c&&!u&&n.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}let h=a?i.translate:-i.translate;function f(S){return S<0?-Math.floor(Math.abs(S)):Math.floor(S)}let p=f(h),g=r.map(S=>f(S)),y=r[g.indexOf(p)-1];if(typeof y>"u"&&n.cssMode){let S;r.forEach((O,I)=>{p>=O&&(S=I)}),typeof S<"u"&&(y=r[S>0?S-1:S])}let A=0;if(typeof y<"u"&&(A=o.indexOf(y),A<0&&(A=i.activeIndex-1),n.slidesPerView==="auto"&&n.slidesPerGroup===1&&n.slidesPerGroupAuto&&(A=A-i.slidesPerViewDynamic("previous",!0)+1,A=Math.max(A,0))),n.rewind&&i.isBeginning){let S=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(S,s,e,t)}else if(n.loop&&i.activeIndex===0&&n.cssMode)return requestAnimationFrame(()=>{i.slideTo(A,s,e,t)}),!0;return i.slideTo(A,s,e,t)}function sO(s,e,t){e===void 0&&(e=!0);let i=this;if(!i.destroyed)return typeof s>"u"&&(s=i.params.speed),i.slideTo(i.activeIndex,s,e,t)}function nO(s,e,t,i){e===void 0&&(e=!0),i===void 0&&(i=.5);let n=this;if(n.destroyed)return;typeof s>"u"&&(s=n.params.speed);let r=n.activeIndex,o=Math.min(n.params.slidesPerGroupSkip,r),a=o+Math.floor((r-o)/n.params.slidesPerGroup),l=n.rtlTranslate?n.translate:-n.translate;if(l>=n.snapGrid[a]){let c=n.snapGrid[a],u=n.snapGrid[a+1];l-c>(u-c)*i&&(r+=n.params.slidesPerGroup)}else{let c=n.snapGrid[a-1],u=n.snapGrid[a];l-c<=(u-c)*i&&(r-=n.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,n.slidesGrid.length-1),n.slideTo(r,s,e,t)}function rO(){let s=this;if(s.destroyed)return;let{params:e,slidesEl:t}=s,i=e.slidesPerView==="auto"?s.slidesPerViewDynamic():e.slidesPerView,n=s.clickedIndex,r,o=s.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(s.animating)return;r=parseInt(s.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?n<s.loopedSlides-i/2||n>s.slides.length-s.loopedSlides+i/2?(s.loopFix(),n=s.getSlideIndex(St(t,`${o}[data-swiper-slide-index="${r}"]`)[0]),Rn(()=>{s.slideTo(n)})):s.slideTo(n):n>s.slides.length-i?(s.loopFix(),n=s.getSlideIndex(St(t,`${o}[data-swiper-slide-index="${r}"]`)[0]),Rn(()=>{s.slideTo(n)})):s.slideTo(n)}else s.slideTo(n)}var oO={slideTo:Q_,slideToLoop:eO,slideNext:tO,slidePrev:iO,slideReset:sO,slideToClosest:nO,slideToClickedSlide:rO};function aO(s){let e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;let n=()=>{St(i,`.${t.slideClass}, swiper-slide`).forEach((h,f)=>{h.setAttribute("data-swiper-slide-index",f)})},r=e.grid&&t.grid&&t.grid.rows>1,o=t.slidesPerGroup*(r?t.grid.rows:1),a=e.slides.length%o!==0,l=r&&e.slides.length%t.grid.rows!==0,c=u=>{for(let h=0;h<u;h+=1){let f=e.isElement?ki("swiper-slide",[t.slideBlankClass]):ki("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(f)}};if(a){if(t.loopAddBlankSlides){let u=o-e.slides.length%o;c(u),e.recalcSlides(),e.updateSlides()}else ga("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");n()}else if(l){if(t.loopAddBlankSlides){let u=t.grid.rows-e.slides.length%t.grid.rows;c(u),e.recalcSlides(),e.updateSlides()}else ga("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");n()}else n();e.loopFix({slideRealIndex:s,direction:t.centeredSlides?void 0:"next"})}function lO(s){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:n,activeSlideIndex:r,byController:o,byMousewheel:a}=s===void 0?{}:s,l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");let{slides:c,allowSlidePrev:u,allowSlideNext:h,slidesEl:f,params:p}=l,{centeredSlides:g}=p;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&p.virtual.enabled){t&&(!p.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):p.centeredSlides&&l.snapIndex<p.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=u,l.allowSlideNext=h,l.emit("loopFix");return}let y=p.slidesPerView;y==="auto"?y=l.slidesPerViewDynamic():(y=Math.ceil(parseFloat(p.slidesPerView,10)),g&&y%2===0&&(y=y+1));let A=p.slidesPerGroupAuto?y:p.slidesPerGroup,S=A;S%A!==0&&(S+=A-S%A),S+=p.loopAdditionalSlides,l.loopedSlides=S;let O=l.grid&&p.grid&&p.grid.rows>1;c.length<y+S?ga("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):O&&p.grid.fill==="row"&&ga("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");let I=[],F=[],H=l.activeIndex;typeof r>"u"?r=l.getSlideIndex(c.filter(ue=>ue.classList.contains(p.slideActiveClass))[0]):H=r;let U=i==="next"||!i,W=i==="prev"||!i,J=0,oe=0,G=O?Math.ceil(c.length/p.grid.rows):c.length,pe=(O?c[r].column:r)+(g&&typeof n>"u"?-y/2+.5:0);if(pe<S){J=Math.max(S-pe,A);for(let ue=0;ue<S-pe;ue+=1){let te=ue-Math.floor(ue/G)*G;if(O){let $=G-te-1;for(let T=c.length-1;T>=0;T-=1)c[T].column===$&&I.push(T)}else I.push(G-te-1)}}else if(pe+y>G-S){oe=Math.max(pe-(G-S*2),A);for(let ue=0;ue<oe;ue+=1){let te=ue-Math.floor(ue/G)*G;O?c.forEach(($,T)=>{$.column===te&&F.push(T)}):F.push(te)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),W&&I.forEach(ue=>{c[ue].swiperLoopMoveDOM=!0,f.prepend(c[ue]),c[ue].swiperLoopMoveDOM=!1}),U&&F.forEach(ue=>{c[ue].swiperLoopMoveDOM=!0,f.append(c[ue]),c[ue].swiperLoopMoveDOM=!1}),l.recalcSlides(),p.slidesPerView==="auto"?l.updateSlides():O&&(I.length>0&&W||F.length>0&&U)&&l.slides.forEach((ue,te)=>{l.grid.updateSlide(te,ue,l.slides)}),p.watchSlidesProgress&&l.updateSlidesOffset(),t){if(I.length>0&&W){if(typeof e>"u"){let ue=l.slidesGrid[H],$=l.slidesGrid[H+J]-ue;a?l.setTranslate(l.translate-$):(l.slideTo(H+Math.ceil(J),0,!1,!0),n&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-$,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-$))}else if(n){let ue=O?I.length/p.grid.rows:I.length;l.slideTo(l.activeIndex+ue,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(F.length>0&&U)if(typeof e>"u"){let ue=l.slidesGrid[H],$=l.slidesGrid[H-oe]-ue;a?l.setTranslate(l.translate-$):(l.slideTo(H-oe,0,!1,!0),n&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-$,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-$))}else{let ue=O?F.length/p.grid.rows:F.length;l.slideTo(l.activeIndex-ue,0,!1,!0)}}if(l.allowSlidePrev=u,l.allowSlideNext=h,l.controller&&l.controller.control&&!o){let ue={slideRealIndex:e,direction:i,setTranslate:n,activeSlideIndex:r,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(te=>{!te.destroyed&&te.params.loop&&te.loopFix({...ue,slideTo:te.params.slidesPerView===p.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...ue,slideTo:l.controller.control.params.slidesPerView===p.slidesPerView?t:!1})}l.emit("loopFix")}function cO(){let s=this,{params:e,slidesEl:t}=s;if(!e.loop||s.virtual&&s.params.virtual.enabled)return;s.recalcSlides();let i=[];s.slides.forEach(n=>{let r=typeof n.swiperSlideIndex>"u"?n.getAttribute("data-swiper-slide-index")*1:n.swiperSlideIndex;i[r]=n}),s.slides.forEach(n=>{n.removeAttribute("data-swiper-slide-index")}),i.forEach(n=>{t.append(n)}),s.recalcSlides(),s.slideTo(s.realIndex,0)}var uO={loopCreate:aO,loopFix:lO,loopDestroy:cO};function dO(s){let e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;let t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=s?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function hO(){let s=this;s.params.watchOverflow&&s.isLocked||s.params.cssMode||(s.isElement&&(s.__preventObserver__=!0),s[s.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",s.isElement&&requestAnimationFrame(()=>{s.__preventObserver__=!1}))}var pO={setGrabCursor:dO,unsetGrabCursor:hO};function fO(s,e){e===void 0&&(e=this);function t(i){if(!i||i===vt()||i===ut())return null;i.assignedSlot&&(i=i.assignedSlot);let n=i.closest(s);return!n&&!i.getRootNode?null:n||t(i.getRootNode().host)}return t(e)}function r0(s,e,t){let i=ut(),{params:n}=s,r=n.edgeSwipeDetection,o=n.edgeSwipeThreshold;return r&&(t<=o||t>=i.innerWidth-o)?r==="prevent"?(e.preventDefault(),!0):!1:!0}function mO(s){let e=this,t=vt(),i=s;i.originalEvent&&(i=i.originalEvent);let n=e.touchEventsData;if(i.type==="pointerdown"){if(n.pointerId!==null&&n.pointerId!==i.pointerId)return;n.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(n.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){r0(e,i,i.targetTouches[0].pageX);return}let{params:r,touches:o,enabled:a}=e;if(!a||!r.simulateTouch&&i.pointerType==="mouse"||e.animating&&r.preventInteractionOnTransition)return;!e.animating&&r.cssMode&&r.loop&&e.loopFix();let l=i.target;if(r.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(l)||"which"in i&&i.which===3||"button"in i&&i.button>0||n.isTouched&&n.isMoved)return;let c=!!r.noSwipingClass&&r.noSwipingClass!=="",u=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&u&&(l=u[0]);let h=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,f=!!(i.target&&i.target.shadowRoot);if(r.noSwiping&&(f?fO(h,l):l.closest(h))){e.allowClick=!0;return}if(r.swipeHandler&&!l.closest(r.swipeHandler))return;o.currentX=i.pageX,o.currentY=i.pageY;let p=o.currentX,g=o.currentY;if(!r0(e,i,p))return;Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=g,n.touchStartTime=Nn(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(n.allowThresholdMove=!1);let y=!0;l.matches(n.focusableElements)&&(y=!1,l.nodeName==="SELECT"&&(n.isTouched=!1)),t.activeElement&&t.activeElement.matches(n.focusableElements)&&t.activeElement!==l&&t.activeElement.blur();let A=y&&e.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||A)&&!l.isContentEditable&&i.preventDefault(),r.freeMode&&r.freeMode.enabled&&e.freeMode&&e.animating&&!r.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function gO(s){let e=vt(),t=this,i=t.touchEventsData,{params:n,touches:r,rtlTranslate:o,enabled:a}=t;if(!a||!n.simulateTouch&&s.pointerType==="mouse")return;let l=s;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].filter(U=>U.identifier===i.touchId)[0],!c||c.identifier!==i.touchId)return}else c=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}let u=c.pageX,h=c.pageY;if(l.preventedByNestedSwiper){r.startX=u,r.startY=h;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(r,{startX:u,startY:h,currentX:u,currentY:h}),i.touchStartTime=Nn());return}if(n.touchReleaseOnEdges&&!n.loop){if(t.isVertical()){if(h<r.startY&&t.translate<=t.maxTranslate()||h>r.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(u<r.startX&&t.translate<=t.maxTranslate()||u>r.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",l),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=u,r.currentY=h;let f=r.currentX-r.startX,p=r.currentY-r.startY;if(t.params.threshold&&Math.sqrt(f**2+p**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let U;t.isHorizontal()&&r.currentY===r.startY||t.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:f*f+p*p>=25&&(U=Math.atan2(Math.abs(p),Math.abs(f))*180/Math.PI,i.isScrolling=t.isHorizontal()?U>n.touchAngle:90-U>n.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(r.currentX!==r.startX||r.currentY!==r.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!n.cssMode&&l.cancelable&&l.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&l.stopPropagation();let g=t.isHorizontal()?f:p,y=t.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;n.oneWayMovement&&(g=Math.abs(g)*(o?1:-1),y=Math.abs(y)*(o?1:-1)),r.diff=g,g*=n.touchRatio,o&&(g=-g,y=-y);let A=t.touchesDirection;t.swipeDirection=g>0?"prev":"next",t.touchesDirection=y>0?"prev":"next";let S=t.params.loop&&!n.cssMode,O=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(S&&O&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){let U=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(U)}i.allowMomentumBounce=!1,n.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let I;if(new Date().getTime(),i.isMoved&&i.allowThresholdMove&&A!==t.touchesDirection&&S&&O&&Math.abs(g)>=1){Object.assign(r,{startX:u,startY:h,currentX:u,currentY:h,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=g+i.startTranslate;let F=!0,H=n.resistanceRatio;if(n.touchReleaseOnEdges&&(H=0),g>0?(S&&O&&!I&&i.allowThresholdMove&&i.currentTranslate>(n.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(F=!1,n.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+g)**H))):g<0&&(S&&O&&!I&&i.allowThresholdMove&&i.currentTranslate<(n.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(n.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(n.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(F=!1,n.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-g)**H))),F&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),n.threshold>0)if(Math.abs(g)>n.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,r.diff=t.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY;return}}else{i.currentTranslate=i.startTranslate;return}!n.followFinger||n.cssMode||((n.freeMode&&n.freeMode.enabled&&t.freeMode||n.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),n.freeMode&&n.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function vO(s){let e=this,t=e.touchEventsData,i=s;i.originalEvent&&(i=i.originalEvent);let n;if(i.type==="touchend"||i.type==="touchcancel"){if(n=[...i.changedTouches].filter(H=>H.identifier===t.touchId)[0],!n||n.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;n=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;let{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:u}=e;if(!u||!o.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);let h=Nn(),f=h-t.touchStartTime;if(e.allowClick){let H=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(H&&H[0]||i.target,H),e.emit("tap click",i),f<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=Nn(),Rn(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let p;if(o.followFinger?p=l?e.translate:-e.translate:p=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:p});return}let g=p>=-e.maxTranslate()&&!e.params.loop,y=0,A=e.slidesSizesGrid[0];for(let H=0;H<c.length;H+=H<o.slidesPerGroupSkip?1:o.slidesPerGroup){let U=H<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof c[H+U]<"u"?(g||p>=c[H]&&p<c[H+U])&&(y=H,A=c[H+U]-c[H]):(g||p>=c[H])&&(y=H,A=c[c.length-1]-c[c.length-2])}let S=null,O=null;o.rewind&&(e.isBeginning?O=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(S=0));let I=(p-c[y])/A,F=y<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(f>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(I>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?S:y+F):e.slideTo(y)),e.swipeDirection==="prev"&&(I>1-o.longSwipesRatio?e.slideTo(y+F):O!==null&&I<0&&Math.abs(I)>o.longSwipesRatio?e.slideTo(O):e.slideTo(y))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(y+F):e.slideTo(y):(e.swipeDirection==="next"&&e.slideTo(S!==null?S:y+F),e.swipeDirection==="prev"&&e.slideTo(O!==null?O:y))}}function o0(){let s=this,{params:e,el:t}=s;if(t&&t.offsetWidth===0)return;e.breakpoints&&s.setBreakpoint();let{allowSlideNext:i,allowSlidePrev:n,snapGrid:r}=s,o=s.virtual&&s.params.virtual.enabled;s.allowSlideNext=!0,s.allowSlidePrev=!0,s.updateSize(),s.updateSlides(),s.updateSlidesClasses();let a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&s.isEnd&&!s.isBeginning&&!s.params.centeredSlides&&!a?s.slideTo(s.slides.length-1,0,!1,!0):s.params.loop&&!o?s.slideToLoop(s.realIndex,0,!1,!0):s.slideTo(s.activeIndex,0,!1,!0),s.autoplay&&s.autoplay.running&&s.autoplay.paused&&(clearTimeout(s.autoplay.resizeTimeout),s.autoplay.resizeTimeout=setTimeout(()=>{s.autoplay&&s.autoplay.running&&s.autoplay.paused&&s.autoplay.resume()},500)),s.allowSlidePrev=n,s.allowSlideNext=i,s.params.watchOverflow&&r!==s.snapGrid&&s.checkOverflow()}function bO(s){let e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&s.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(s.stopPropagation(),s.stopImmediatePropagation())))}function yO(){let s=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=s;if(!i)return;s.previousTranslate=s.translate,s.isHorizontal()?s.translate=-e.scrollLeft:s.translate=-e.scrollTop,s.translate===0&&(s.translate=0),s.updateActiveIndex(),s.updateSlidesClasses();let n,r=s.maxTranslate()-s.minTranslate();r===0?n=0:n=(s.translate-s.minTranslate())/r,n!==s.progress&&s.updateProgress(t?-s.translate:s.translate),s.emit("setTranslate",s.translate,!1)}function wO(s){let e=this;au(e,s.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function EO(){let s=this;s.documentTouchHandlerProceeded||(s.documentTouchHandlerProceeded=!0,s.params.touchReleaseOnEdges&&(s.el.style.touchAction="auto"))}var h0=(s,e)=>{let t=vt(),{params:i,el:n,wrapperEl:r,device:o}=s,a=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;!n||typeof n=="string"||(t[l]("touchstart",s.onDocumentTouchStart,{passive:!1,capture:a}),n[l]("touchstart",s.onTouchStart,{passive:!1}),n[l]("pointerdown",s.onTouchStart,{passive:!1}),t[l]("touchmove",s.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",s.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",s.onTouchEnd,{passive:!0}),t[l]("pointerup",s.onTouchEnd,{passive:!0}),t[l]("pointercancel",s.onTouchEnd,{passive:!0}),t[l]("touchcancel",s.onTouchEnd,{passive:!0}),t[l]("pointerout",s.onTouchEnd,{passive:!0}),t[l]("pointerleave",s.onTouchEnd,{passive:!0}),t[l]("contextmenu",s.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&n[l]("click",s.onClick,!0),i.cssMode&&r[l]("scroll",s.onScroll),i.updateOnWindowResize?s[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",o0,!0):s[c]("observerUpdate",o0,!0),n[l]("load",s.onLoad,{capture:!0}))};function SO(){let s=this,{params:e}=s;s.onTouchStart=mO.bind(s),s.onTouchMove=gO.bind(s),s.onTouchEnd=vO.bind(s),s.onDocumentTouchStart=EO.bind(s),e.cssMode&&(s.onScroll=yO.bind(s)),s.onClick=bO.bind(s),s.onLoad=wO.bind(s),h0(s,"on")}function AO(){h0(this,"off")}var TO={attachEvents:SO,detachEvents:AO},a0=(s,e)=>s.grid&&e.grid&&e.grid.rows>1;function xO(){let s=this,{realIndex:e,initialized:t,params:i,el:n}=s,r=i.breakpoints;if(!r||r&&Object.keys(r).length===0)return;let o=s.getBreakpoint(r,s.params.breakpointsBase,s.el);if(!o||s.currentBreakpoint===o)return;let l=(o in r?r[o]:void 0)||s.originalParams,c=a0(s,i),u=a0(s,l),h=s.params.grabCursor,f=l.grabCursor,p=i.enabled;c&&!u?(n.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),s.emitContainerClasses()):!c&&u&&(n.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&n.classList.add(`${i.containerModifierClass}grid-column`),s.emitContainerClasses()),h&&!f?s.unsetGrabCursor():!h&&f&&s.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(I=>{if(typeof l[I]>"u")return;let F=i[I]&&i[I].enabled,H=l[I]&&l[I].enabled;F&&!H&&s[I].disable(),!F&&H&&s[I].enable()});let g=l.direction&&l.direction!==i.direction,y=i.loop&&(l.slidesPerView!==i.slidesPerView||g),A=i.loop;g&&t&&s.changeDirection(),Wt(s.params,l);let S=s.params.enabled,O=s.params.loop;Object.assign(s,{allowTouchMove:s.params.allowTouchMove,allowSlideNext:s.params.allowSlideNext,allowSlidePrev:s.params.allowSlidePrev}),p&&!S?s.disable():!p&&S&&s.enable(),s.currentBreakpoint=o,s.emit("_beforeBreakpoint",l),t&&(y?(s.loopDestroy(),s.loopCreate(e),s.updateSlides()):!A&&O?(s.loopCreate(e),s.updateSlides()):A&&!O&&s.loopDestroy()),s.emit("breakpoint",l)}function CO(s,e,t){if(e===void 0&&(e="window"),!s||e==="container"&&!t)return;let i=!1,n=ut(),r=e==="window"?n.innerHeight:t.clientHeight,o=Object.keys(s).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){let l=parseFloat(a.substr(1));return{value:r*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){let{point:l,value:c}=o[a];e==="window"?n.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=t.clientWidth&&(i=l)}return i||"max"}var PO={setBreakpoint:xO,getBreakpoint:CO};function _O(s,e){let t=[];return s.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(n=>{i[n]&&t.push(e+n)}):typeof i=="string"&&t.push(e+i)}),t}function OO(){let s=this,{classNames:e,params:t,rtl:i,el:n,device:r}=s,o=_O(["initialized",t.direction,{"free-mode":s.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:r.android},{ios:r.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),n.classList.add(...e),s.emitContainerClasses()}function MO(){let s=this,{el:e,classNames:t}=s;!e||typeof e=="string"||(e.classList.remove(...t),s.emitContainerClasses())}var LO={addClasses:OO,removeClasses:MO};function kO(){let s=this,{isLocked:e,params:t}=s,{slidesOffsetBefore:i}=t;if(i){let n=s.slides.length-1,r=s.slidesGrid[n]+s.slidesSizesGrid[n]+i*2;s.isLocked=s.size>r}else s.isLocked=s.snapGrid.length===1;t.allowSlideNext===!0&&(s.allowSlideNext=!s.isLocked),t.allowSlidePrev===!0&&(s.allowSlidePrev=!s.isLocked),e&&e!==s.isLocked&&(s.isEnd=!1),e!==s.isLocked&&s.emit(s.isLocked?"lock":"unlock")}var DO={checkOverflow:kO},l0={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function IO(s,e){return function(i){i===void 0&&(i={});let n=Object.keys(i)[0],r=i[n];if(typeof r!="object"||r===null){Wt(e,i);return}if(s[n]===!0&&(s[n]={enabled:!0}),n==="navigation"&&s[n]&&s[n].enabled&&!s[n].prevEl&&!s[n].nextEl&&(s[n].auto=!0),["pagination","scrollbar"].indexOf(n)>=0&&s[n]&&s[n].enabled&&!s[n].el&&(s[n].auto=!0),!(n in s&&"enabled"in r)){Wt(e,i);return}typeof s[n]=="object"&&!("enabled"in s[n])&&(s[n].enabled=!0),s[n]||(s[n]={enabled:!1}),Wt(e,i)}}var Af={eventsEmitter:L_,update:U_,translate:Y_,transition:Z_,slide:oO,loop:uO,grabCursor:pO,events:TO,breakpoints:PO,checkOverflow:DO,classes:LO},Tf={},Qs=class s{constructor(){let e,t;for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];n.length===1&&n[0].constructor&&Object.prototype.toString.call(n[0]).slice(8,-1)==="Object"?t=n[0]:[e,t]=n,t||(t={}),t=Wt({},t),e&&!t.el&&(t.el=e);let o=vt();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){let u=[];return o.querySelectorAll(t.el).forEach(h=>{let f=Wt({},t,{el:h});u.push(new s(f))}),u}let a=this;a.__swiper__=!0,a.support=c0(),a.device=u0({userAgent:t.userAgent}),a.browser=__(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);let l={};a.modules.forEach(u=>{u({params:t,swiper:a,extendParams:IO(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});let c=Wt({},l0,l);return a.params=Wt({},c,Tf,t),a.originalParams=Wt({},a.params),a.passedParams=Wt({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(u=>{a.on(u,a.params.on[u])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){let{slidesEl:t,params:i}=this,n=St(t,`.${i.slideClass}, swiper-slide`),r=va(n[0]);return va(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){let e=this,{slidesEl:t,params:i}=e;e.slides=St(t,`.${i.slideClass}, swiper-slide`)}enable(){let e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){let e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){let i=this;e=Math.min(Math.max(e,0),1);let n=i.minTranslate(),o=(i.maxTranslate()-n)*e+n;i.translateTo(o,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){let e=this;if(!e.params._emitClasses||!e.el)return;let t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){let t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){let e=this;if(!e.params._emitClasses||!e.el)return;let t=[];e.slides.forEach(i=>{let n=e.getSlideClasses(i);t.push({slideEl:i,classNames:n}),e.emit("_slideClass",i,n)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);let i=this,{params:n,slides:r,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=i,u=1;if(typeof n.slidesPerView=="number")return n.slidesPerView;if(n.centeredSlides){let h=r[c]?Math.ceil(r[c].swiperSlideSize):0,f;for(let p=c+1;p<r.length;p+=1)r[p]&&!f&&(h+=Math.ceil(r[p].swiperSlideSize),u+=1,h>l&&(f=!0));for(let p=c-1;p>=0;p-=1)r[p]&&!f&&(h+=r[p].swiperSlideSize,u+=1,h>l&&(f=!0))}else if(e==="current")for(let h=c+1;h<r.length;h+=1)(t?o[h]+a[h]-o[c]<l:o[h]-o[c]<l)&&(u+=1);else for(let h=c-1;h>=0;h-=1)o[c]-o[h]<l&&(u+=1);return u}update(){let e=this;if(!e||e.destroyed)return;let{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&au(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function n(){let o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)n(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){let o=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(o.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||n()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);let i=this,n=i.params.direction;return e||(e=n==="horizontal"?"vertical":"horizontal"),e===n||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${n}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(r=>{e==="vertical"?r.style.width="":r.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){let t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){let t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);let n=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`,o=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(n()):St(i,n())[0];return!o&&t.params.createElements&&(o=ki("div",t.params.wrapperClass),i.append(o),St(i,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:i,wrapperEl:o,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:o,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||gs(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||gs(i,"direction")==="rtl"),wrongRTL:gs(o,"display")==="-webkit-box"}),!0}init(e){let t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();let n=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&n.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),n.forEach(r=>{r.complete?au(t,r):r.addEventListener("load",o=>{au(t,o.target)})}),xf(t),t.initialized=!0,xf(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);let i=this,{params:n,el:r,wrapperEl:o,slides:a}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),n.loop&&i.loopDestroy(),t&&(i.removeClasses(),r&&typeof r!="string"&&r.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(n.slideVisibleClass,n.slideFullyVisibleClass,n.slideActiveClass,n.slideNextClass,n.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),t0(i)),i.destroyed=!0),null}static extendDefaults(e){Wt(Tf,e)}static get extendedDefaults(){return Tf}static get defaults(){return l0}static installModule(e){s.prototype.__modules__||(s.prototype.__modules__=[]);let t=s.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>s.installModule(t)),s):(s.installModule(e),s)}};Object.keys(Af).forEach(s=>{Object.keys(Af[s]).forEach(e=>{Qs.prototype[e]=Af[s][e]})});Qs.use([O_,M_]);function lu(s,e,t,i){return s.params.createElements&&Object.keys(i).forEach(n=>{if(!t[n]&&t.auto===!0){let r=St(s.el,`.${i[n]}`)[0];r||(r=ki("div",i[n]),r.className=i[n],s.el.append(r)),t[n]=r,e[n]=r}}),t}function Cf(s){let{swiper:e,extendParams:t,on:i,emit:n}=s;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function r(g){let y;return g&&typeof g=="string"&&e.isElement&&(y=e.el.querySelector(g),y)?y:(g&&(typeof g=="string"&&(y=[...document.querySelectorAll(g)]),e.params.uniqueNavElements&&typeof g=="string"&&y&&y.length>1&&e.el.querySelectorAll(g).length===1?y=e.el.querySelector(g):y&&y.length===1&&(y=y[0])),g&&!y?g:y)}function o(g,y){let A=e.params.navigation;g=si(g),g.forEach(S=>{S&&(S.classList[y?"add":"remove"](...A.disabledClass.split(" ")),S.tagName==="BUTTON"&&(S.disabled=y),e.params.watchOverflow&&e.enabled&&S.classList[e.isLocked?"add":"remove"](A.lockClass))})}function a(){let{nextEl:g,prevEl:y}=e.navigation;if(e.params.loop){o(y,!1),o(g,!1);return}o(y,e.isBeginning&&!e.params.rewind),o(g,e.isEnd&&!e.params.rewind)}function l(g){g.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),n("navigationPrev"))}function c(g){g.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),n("navigationNext"))}function u(){let g=e.params.navigation;if(e.params.navigation=lu(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(g.nextEl||g.prevEl))return;let y=r(g.nextEl),A=r(g.prevEl);Object.assign(e.navigation,{nextEl:y,prevEl:A}),y=si(y),A=si(A);let S=(O,I)=>{O&&O.addEventListener("click",I==="next"?c:l),!e.enabled&&O&&O.classList.add(...g.lockClass.split(" "))};y.forEach(O=>S(O,"next")),A.forEach(O=>S(O,"prev"))}function h(){let{nextEl:g,prevEl:y}=e.navigation;g=si(g),y=si(y);let A=(S,O)=>{S.removeEventListener("click",O==="next"?c:l),S.classList.remove(...e.params.navigation.disabledClass.split(" "))};g.forEach(S=>A(S,"next")),y.forEach(S=>A(S,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?p():(u(),a())}),i("toEdge fromEdge lock unlock",()=>{a()}),i("destroy",()=>{h()}),i("enable disable",()=>{let{nextEl:g,prevEl:y}=e.navigation;if(g=si(g),y=si(y),e.enabled){a();return}[...g,...y].filter(A=>!!A).forEach(A=>A.classList.add(e.params.navigation.lockClass))}),i("click",(g,y)=>{let{nextEl:A,prevEl:S}=e.navigation;A=si(A),S=si(S);let O=y.target,I=S.includes(O)||A.includes(O);if(e.isElement&&!I){let F=y.path||y.composedPath&&y.composedPath();F&&(I=F.find(H=>A.includes(H)||S.includes(H)))}if(e.params.navigation.hideOnClick&&!I){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===O||e.pagination.el.contains(O)))return;let F;A.length?F=A[0].classList.contains(e.params.navigation.hiddenClass):S.length&&(F=S[0].classList.contains(e.params.navigation.hiddenClass)),n(F===!0?"navigationShow":"navigationHide"),[...A,...S].filter(H=>!!H).forEach(H=>H.classList.toggle(e.params.navigation.hiddenClass))}});let f=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),u(),a()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(e.navigation,{enable:f,disable:p,update:a,init:u,destroy:h})}function Pf(s){let{swiper:e,extendParams:t,on:i,emit:n,params:r}=s;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,a,l=r&&r.autoplay?r.autoplay.delay:3e3,c=r&&r.autoplay?r.autoplay.delay:3e3,u,h=new Date().getTime(),f,p,g,y,A,S,O;function I(k){!e||e.destroyed||!e.wrapperEl||k.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",I),!(O||k.detail&&k.detail.bySwiperTouchMove)&&G())}let F=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?f=!0:f&&(c=u,f=!1);let k=e.autoplay.paused?u:h+c-new Date().getTime();e.autoplay.timeLeft=k,n("autoplayTimeLeft",k,k/l),a=requestAnimationFrame(()=>{F()})},H=()=>{let k;return e.virtual&&e.params.virtual.enabled?k=e.slides.filter(Z=>Z.classList.contains("swiper-slide-active"))[0]:k=e.slides[e.activeIndex],k?parseInt(k.getAttribute("data-swiper-autoplay"),10):void 0},U=k=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(a),F();let K=typeof k>"u"?e.params.autoplay.delay:k;l=e.params.autoplay.delay,c=e.params.autoplay.delay;let Z=H();!Number.isNaN(Z)&&Z>0&&typeof k>"u"&&(K=Z,l=Z,c=Z),u=K;let re=e.params.speed,ve=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(re,!0,!0),n("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,re,!0,!0),n("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(re,!0,!0),n("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,re,!0,!0),n("autoplay")),e.params.cssMode&&(h=new Date().getTime(),requestAnimationFrame(()=>{U()})))};return K>0?(clearTimeout(o),o=setTimeout(()=>{ve()},K)):requestAnimationFrame(()=>{ve()}),K},W=()=>{h=new Date().getTime(),e.autoplay.running=!0,U(),n("autoplayStart")},J=()=>{e.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(a),n("autoplayStop")},oe=(k,K)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(o),k||(S=!0);let Z=()=>{n("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",I):G()};if(e.autoplay.paused=!0,K){A&&(u=e.params.autoplay.delay),A=!1,Z();return}u=(u||e.params.autoplay.delay)-(new Date().getTime()-h),!(e.isEnd&&u<0&&!e.params.loop)&&(u<0&&(u=0),Z())},G=()=>{e.isEnd&&u<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(h=new Date().getTime(),S?(S=!1,U(u)):U(),e.autoplay.paused=!1,n("autoplayResume"))},ae=()=>{if(e.destroyed||!e.autoplay.running)return;let k=vt();k.visibilityState==="hidden"&&(S=!0,oe(!0)),k.visibilityState==="visible"&&G()},pe=k=>{k.pointerType==="mouse"&&(S=!0,O=!0,!(e.animating||e.autoplay.paused)&&oe(!0))},ue=k=>{k.pointerType==="mouse"&&(O=!1,e.autoplay.paused&&G())},te=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",pe),e.el.addEventListener("pointerleave",ue))},$=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",pe),e.el.removeEventListener("pointerleave",ue))},T=()=>{vt().addEventListener("visibilitychange",ae)},D=()=>{vt().removeEventListener("visibilitychange",ae)};i("init",()=>{e.params.autoplay.enabled&&(te(),T(),W())}),i("destroy",()=>{$(),D(),e.autoplay.running&&J()}),i("_freeModeStaticRelease",()=>{(g||S)&&G()}),i("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?J():oe(!0,!0)}),i("beforeTransitionStart",(k,K,Z)=>{e.destroyed||!e.autoplay.running||(Z||!e.params.autoplay.disableOnInteraction?oe(!0,!0):J())}),i("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){J();return}p=!0,g=!1,S=!1,y=setTimeout(()=>{S=!0,g=!0,oe(!0)},200)}}),i("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!p)){if(clearTimeout(y),clearTimeout(o),e.params.autoplay.disableOnInteraction){g=!1,p=!1;return}g&&e.params.cssMode&&G(),g=!1,p=!1}}),i("slideChange",()=>{e.destroyed||!e.autoplay.running||(A=!0)}),Object.assign(e.autoplay,{start:W,stop:J,pause:oe,resume:G})}var uu=class extends Oe{connect(){this.swiper=new Qs(".games_swiper",{modules:[Cf,Pf],slidesPerView:12,spaceBetween:5,breakpoints:{320:{slidesPerView:3,spaceBetween:3},480:{slidesPerView:4,spaceBetween:5},768:{slidesPerView:6,spaceBetween:5},992:{slidesPerView:8,spaceBetween:5},1200:{slidesPerView:10,spaceBetween:5},1440:{slidesPerView:12,spaceBetween:5}},loop:!0,autoplay:{delay:5e3},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}};var du=class extends Oe{static targets=["message","button"];connect(){this.checkTextLength(),window.addEventListener("resize",this.checkTextLength.bind(this))}disconnect(){window.removeEventListener("resize",this.checkTextLength.bind(this))}call(){this.element.classList.toggle("open")}checkTextLength(){let s=this.messageTarget.textContent.length,e=window.innerWidth;s<=200&&e>768?this.buttonTarget.style.display="none":this.buttonTarget.style.display=""}};var hu=class extends Oe{call(){this.element.classList.toggle("collapse-bar")}};function pu(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var FO=0;function v0(s){return"__private_"+FO+++"_"+s}function RO(s,e,t){let i=[];return s.forEach(n=>typeof n!="string"?i.push(n):e[Symbol.split](n).forEach((r,o,a)=>{r!==""&&i.push(r),o<a.length-1&&i.push(t)})),i}function g0(s,e){let t=/\$/g,i="$$$$",n=[s];if(e==null)return n;for(let r of Object.keys(e))if(r!=="_"){let o=e[r];typeof o=="string"&&(o=t[Symbol.replace](o,i)),n=RO(n,new RegExp(`%\\{${r}\\}`,"g"),o)}return n}var NO=s=>{throw new Error(`missing string: ${s}`)},wa=v0("onMissingKey"),Ea=v0("apply"),Bn=class{constructor(e,t){let{onMissingKey:i=NO}=t===void 0?{}:t;Object.defineProperty(this,Ea,{value:BO}),Object.defineProperty(this,wa,{writable:!0,value:void 0}),this.locale={strings:{},pluralize(n){return n===1?0:1}},Array.isArray(e)?e.forEach(pu(this,Ea)[Ea],this):pu(this,Ea)[Ea](e),pu(this,wa)[wa]=i}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let i=this.locale.strings[e];if(i==null&&(pu(this,wa)[wa](e),i=e),typeof i=="object"){if(t&&typeof t.smart_count<"u"){let r=this.locale.pluralize(t.smart_count);return g0(i[r],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof i!="string")throw new Error("string was not a string");return g0(i,t)}};function BO(s){if(!(s!=null&&s.strings))return;let e=this.locale;Object.assign(this.locale,{strings:{...e.strings,...s.strings},pluralize:s.pluralize||e.pluralize})}var fw=Ue(y0(),1);var zO="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var en=(s=21)=>{let e="",t=s;for(;t--;)e+=zO[Math.random()*64|0];return e};var mw=Ue(Z0(),1);function mu(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var kM=0;function Q0(s){return"__private_"+kM+++"_"+s}var DM={version:"4.0.0"},zn=Q0("callbacks"),If=Q0("publish"),gu=class{constructor(){Object.defineProperty(this,If,{value:IM}),this.state={},Object.defineProperty(this,zn,{writable:!0,value:new Set})}getState(){return this.state}setState(e){let t={...this.state},i={...this.state,...e};this.state=i,mu(this,If)[If](t,i,e)}subscribe(e){return mu(this,zn)[zn].add(e),()=>{mu(this,zn)[zn].delete(e)}}};function IM(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];mu(this,zn)[zn].forEach(i=>{i(...e)})}gu.VERSION=DM.version;var ew=gu;function $n(s){let e=s.lastIndexOf(".");return e===-1||e===s.length-1?{name:s,extension:void 0}:{name:s.slice(0,e),extension:s.slice(e+1)}}var Ff={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function Aa(s){var e;if(s.type)return s.type;let t=s.name?(e=$n(s.name).extension)==null?void 0:e.toLowerCase():null;return t&&t in Ff?Ff[t]:"application/octet-stream"}function FM(s){return s.charCodeAt(0).toString(32)}function tw(s){let e="";return s.replace(/[^A-Z0-9]/gi,t=>(e+=`-${FM(t)}`,"/"))+e}function iw(s,e){let t=e||"uppy";return typeof s.name=="string"&&(t+=`-${tw(s.name.toLowerCase())}`),s.type!==void 0&&(t+=`-${s.type}`),s.meta&&typeof s.meta.relativePath=="string"&&(t+=`-${tw(s.meta.relativePath.toLowerCase())}`),s.data.size!==void 0&&(t+=`-${s.data.size}`),s.data.lastModified!==void 0&&(t+=`-${s.data.lastModified}`),t}function RM(s){return!s.isRemote||!s.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(s.remote.provider)}function vu(s,e){if(RM(s))return s.id;let t=Aa(s);return iw({...s,type:t},e)}function Rf(s){if(s==null&&typeof navigator<"u"&&(s=navigator.userAgent),!s)return!0;let e=/Edge\/(\d+\.\d+)/.exec(s);if(!e)return!0;let i=e[1].split(".",2),n=parseInt(i[0],10),r=parseInt(i[1],10);return n<15||n===15&&r<15063||n>18||n===18&&r>=18218}function Nf(s,e){return e.name?e.name:s.split("/")[0]==="image"?`${s.split("/")[0]}.${s.split("/")[1]}`:"noname"}function Bf(s){return s<10?`0${s}`:s.toString()}function ro(){let s=new Date,e=Bf(s.getHours()),t=Bf(s.getMinutes()),i=Bf(s.getSeconds());return`${e}:${t}:${i}`}var sw={debug:()=>{},warn:()=>{},error:function(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return console.error(`[Uppy] [${ro()}]`,...e)}},nw={debug:function(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return console.debug(`[Uppy] [${ro()}]`,...e)},warn:function(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return console.warn(`[Uppy] [${ro()}]`,...e)},error:function(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return console.error(`[Uppy] [${ro()}]`,...e)}};var Ta=Ue(bu(),1),dw=Ue(uw(),1),hw={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},Gt=class extends Error{constructor(e,t){var i;super(e),this.isRestriction=!0,this.isUserFacing=(i=t?.isUserFacing)!=null?i:!0,t!=null&&t.file&&(this.file=t.file)}},yu=class{constructor(e,t){this.getI18n=t,this.getOpts=()=>{var i;let n=e();if(((i=n.restrictions)==null?void 0:i.allowedFileTypes)!=null&&!Array.isArray(n.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return n}}validateAggregateRestrictions(e,t){let{maxTotalFileSize:i,maxNumberOfFiles:n}=this.getOpts().restrictions;if(n&&e.filter(o=>!o.isGhost).length+t.length>n)throw new Gt(`${this.getI18n()("youCanOnlyUploadX",{smart_count:n})}`);if(i){let r=[...e,...t].reduce((o,a)=>{var l;return o+((l=a.size)!=null?l:0)},0);if(r>i)throw new Gt(this.getI18n()("aggregateExceedsSize",{sizeAllowed:(0,Ta.default)(i),size:(0,Ta.default)(r)}))}}validateSingleFile(e){let{maxFileSize:t,minFileSize:i,allowedFileTypes:n}=this.getOpts().restrictions;if(n&&!n.some(a=>a.includes("/")?e.type?(0,dw.default)(e.type.replace(/;.*?$/,""),a):!1:a[0]==="."&&e.extension?e.extension.toLowerCase()===a.slice(1).toLowerCase():!1)){let a=n.join(", ");throw new Gt(this.getI18n()("youCanOnlyUploadFileTypes",{types:a}),{file:e})}if(t&&e.size!=null&&e.size>t){var r;throw new Gt(this.getI18n()("exceedsSize",{size:(0,Ta.default)(t),file:(r=e.name)!=null?r:this.getI18n()("unnamed")}),{file:e})}if(i&&e.size!=null&&e.size<i)throw new Gt(this.getI18n()("inferiorSize",{size:(0,Ta.default)(i)}),{file:e})}validate(e,t){t.forEach(i=>{this.validateSingleFile(i)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){let{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new Gt(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){var t;let i=new Gt(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:(t=e.name)!=null?t:this.getI18n()("unnamed")})),{requiredMetaFields:n}=this.getOpts().restrictions,r=[];for(let o of n)(!Object.hasOwn(e.meta,o)||e.meta[o]==="")&&r.push(o);return{missingFields:r,error:i}}};var pw={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed"}};function me(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var zM=0;function st(s){return"__private_"+zM+++"_"+s}var $M={version:"4.0.1"},wu={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},At=st("plugins"),Lt=st("restricter"),xa=st("storeUnsubscribe"),vs=st("emitter"),Hn=st("preProcessors"),Un=st("uploaders"),ws=st("postProcessors"),ni=st("informAndEmit"),Ma=st("checkRequiredMetaFieldsOnFile"),zf=st("checkRequiredMetaFields"),Ca=st("assertNewUploadAllowed"),Uf=st("transformFile"),Pa=st("startIfAutoProceed"),_a=st("checkAndUpdateFileState"),$f=st("addListeners"),Di=st("updateOnlineStatus"),Oa=st("requestClientById"),bs=st("createUpload"),Hf=st("getUpload"),jn=st("removeUpload"),ys=st("runUpload"),Eu=class s{constructor(e){Object.defineProperty(this,ys,{value:ZM}),Object.defineProperty(this,jn,{value:JM}),Object.defineProperty(this,Hf,{value:KM}),Object.defineProperty(this,bs,{value:XM}),Object.defineProperty(this,$f,{value:YM}),Object.defineProperty(this,_a,{value:GM}),Object.defineProperty(this,Pa,{value:WM}),Object.defineProperty(this,Uf,{value:qM}),Object.defineProperty(this,Ca,{value:VM}),Object.defineProperty(this,zf,{value:jM}),Object.defineProperty(this,Ma,{value:UM}),Object.defineProperty(this,ni,{value:HM}),Object.defineProperty(this,At,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,Lt,{writable:!0,value:void 0}),Object.defineProperty(this,xa,{writable:!0,value:void 0}),Object.defineProperty(this,vs,{writable:!0,value:(0,fw.default)()}),Object.defineProperty(this,Hn,{writable:!0,value:new Set}),Object.defineProperty(this,Un,{writable:!0,value:new Set}),Object.defineProperty(this,ws,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,this.calculateProgress=(0,mw.default)((n,r)=>{let o=this.getFile(n?.id);if(n==null||!o){this.log(`Not setting progress for a file that has been removed: ${n?.id}`);return}if(o.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${n.id}`);return}let a=Number.isFinite(r.bytesTotal)&&r.bytesTotal>0;this.setFileState(n.id,{progress:{...o.progress,bytesUploaded:r.bytesUploaded,bytesTotal:r.bytesTotal,percentage:a?Math.round(r.bytesUploaded/r.bytesTotal*100):0}}),this.calculateTotalProgress()},500,{leading:!0,trailing:!0}),Object.defineProperty(this,Di,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,Oa,{writable:!0,value:new Map}),this.defaultLocale=pw;let t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:hw,meta:{},onBeforeFileAdded:(n,r)=>!Object.hasOwn(r,n.id),onBeforeUpload:n=>n,store:new ew,logger:sw,infoTimeout:5e3},i={...t,...e};this.opts={...i,restrictions:{...t.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=nw),this.log(`Using Core v${s.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...wu,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:Rf(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),me(this,Lt)[Lt]=new yu(()=>this.opts,()=>this.i18n),me(this,xa)[xa]=this.store.subscribe((n,r,o)=>{this.emit("state-update",n,r,o),this.updateAll(r)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),me(this,$f)[$f]()}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];me(this,vs)[vs].emit(e,...i)}on(e,t){return me(this,vs)[vs].on(e,t),this}once(e,t){return me(this,vs)[vs].once(e,t),this}off(e,t){return me(this,vs)[vs].off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){let t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(i=>{let[n,r]=i;return[n,{...t[n],...r}]}))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can\u2019t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){let e=i=>this.log(`Missing i18n string: ${i}`,"error"),t=new Bn([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e?.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){let e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},i=Object.create(null);Object.keys(t).forEach(n=>{i[n]={...t[n],progress:{...t[n].progress,...e}}}),this.setState({files:i,...wu})}clear(){let{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...wu,files:{}})}addPreProcessor(e){me(this,Hn)[Hn].add(e)}removePreProcessor(e){return me(this,Hn)[Hn].delete(e)}addPostProcessor(e){me(this,ws)[ws].add(e)}removePostProcessor(e){return me(this,ws)[ws].delete(e)}addUploader(e){me(this,Un)[Un].add(e)}removeUploader(e){return me(this,Un)[Un].delete(e)}setMeta(e){let t={...this.getState().meta,...e},i={...this.getState().files};Object.keys(i).forEach(n=>{i[n]={...i[n],meta:{...i[n].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:i})}setFileMeta(e,t){let i={...this.getState().files};if(!i[e]){this.log("Was trying to set metadata for a file that has been removed: ",e);return}let n={...i[e].meta,...t};i[e]={...i[e],meta:n},this.setState({files:i})}getFile(e){return this.getState().files[e]}getFiles(){let{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){let{files:e,totalProgress:t,error:i}=this.getState(),n=Object.values(e),r=[],o=[],a=[],l=[],c=[],u=[],h=[],f=[],p=[];for(let g of n){let{progress:y}=g;!y.uploadComplete&&y.uploadStarted&&(r.push(g),g.isPaused||f.push(g)),y.uploadStarted||o.push(g),(y.uploadStarted||y.preprocess||y.postprocess)&&a.push(g),y.uploadStarted&&l.push(g),g.isPaused&&c.push(g),y.uploadComplete&&u.push(g),g.error&&h.push(g),(y.preprocess||y.postprocess)&&p.push(g)}return{newFiles:o,startedFiles:a,uploadStartedFiles:l,pausedFiles:c,completeFiles:u,erroredFiles:h,inProgressFiles:r,inProgressNotPausedFiles:f,processingFiles:p,isUploadStarted:l.length>0,isAllComplete:t===100&&u.length===n.length&&p.length===0,isAllErrored:!!i&&h.length===n.length,isAllPaused:r.length!==0&&c.length===r.length,isUploadInProgress:r.length>0,isSomeGhost:n.some(g=>g.isGhost)}}validateSingleFile(e){try{me(this,Lt)[Lt].validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){let t=this.getFiles();try{me(this,Lt)[Lt].validateAggregateRestrictions(t,e)}catch(i){return i.message}return null}checkIfFileAlreadyExists(e){let{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}addFile(e){me(this,Ca)[Ca](e);let{nextFilesState:t,validFilesToAdd:i,errors:n}=me(this,_a)[_a]([e]),r=n.filter(a=>a.isRestriction);if(me(this,ni)[ni](r),n.length>0)throw n[0];this.setState({files:t});let[o]=i;return this.emit("file-added",o),this.emit("files-added",i),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),me(this,Pa)[Pa](),o.id}addFiles(e){me(this,Ca)[Ca]();let{nextFilesState:t,validFilesToAdd:i,errors:n}=me(this,_a)[_a](e),r=n.filter(a=>a.isRestriction);me(this,ni)[ni](r);let o=n.filter(a=>!a.isRestriction);if(o.length>0){let a=`Multiple errors occurred while adding files:
`;if(o.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,a);{let l=new Error(a);throw l.errors=o,l}}this.setState({files:t}),i.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.values(i).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),i.length>0&&me(this,Pa)[Pa]()}removeFiles(e){let{files:t,currentUploads:i}=this.getState(),n={...t},r={...i},o=Object.create(null);e.forEach(u=>{t[u]&&(o[u]=t[u],delete n[u])});function a(u){return o[u]===void 0}Object.keys(r).forEach(u=>{let h=i[u].fileIDs.filter(a);if(h.length===0){delete r[u];return}let{capabilities:f}=this.getState();if(h.length!==i[u].fileIDs.length&&!f.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");r[u]={...i[u],fileIDs:h}});let l={currentUploads:r,files:n};Object.keys(n).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),this.calculateTotalProgress();let c=Object.keys(o);c.forEach(u=>{this.emit("file-removed",o[u])}),c.length>5?this.log(`Removed ${c.length} files`):this.log(`Removed files: ${c.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;let t=this.getFile(e),n=!(t.isPaused||!1);return this.setFileState(e,{isPaused:n}),this.emit("upload-pause",t,n),n}pauseAll(){let e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let n={...e[i],isPaused:!0};e[i]=n}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){let e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{let n={...e[i],isPaused:!1,error:null};e[i]=n}),this.setState({files:e}),this.emit("resume-all")}retryAll(){let e={...this.getState().files},t=Object.keys(e).filter(n=>e[n].error);if(t.forEach(n=>{let r={...e[n],isPaused:!1,error:null};e[n]=r}),this.setState({files:e,error:null}),this.emit("retry-all",Object.values(e)),t.length===0)return Promise.resolve({successful:[],failed:[]});let i=me(this,bs)[bs](t,{forceAllowNewUpload:!0});return me(this,ys)[ys](i)}cancelAll(){this.emit("cancel-all");let{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(wu)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));let t=me(this,bs)[bs]([e],{forceAllowNewUpload:!0});return me(this,ys)[ys](t)}logout(){this.iteratePlugins(e=>{var t;(t=e.provider)==null||t.logout==null||t.logout()})}calculateTotalProgress(){let t=this.getFiles().filter(c=>c.progress.uploadStarted||c.progress.preprocess||c.progress.postprocess);if(t.length===0){this.emit("progress",0),this.setState({totalProgress:0});return}let i=t.filter(c=>c.progress.bytesTotal!=null),n=t.filter(c=>c.progress.bytesTotal==null);if(i.length===0){let c=t.length*100,u=n.reduce((f,p)=>f+p.progress.percentage,0),h=Math.round(u/c*100);this.setState({totalProgress:h});return}let r=i.reduce((c,u)=>{var h;return c+((h=u.progress.bytesTotal)!=null?h:0)},0),o=r/i.length;r+=o*n.length;let a=0;i.forEach(c=>{a+=c.progress.bytesUploaded}),n.forEach(c=>{a+=o*(c.progress.percentage||0)/100});let l=r===0?0:Math.round(a/r*100);l>100&&(l=100),this.setState({totalProgress:l}),this.emit("progress",l)}updateOnlineStatus(){var e;((e=window.navigator.onLine)!=null?e:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e){if(typeof e!="function"){let l=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(l)}for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let r=new e(this,...i),o=r.id;if(!o)throw new Error("Your plugin must have an id");if(!r.type)throw new Error("Your plugin must have a type");let a=this.getPlugin(o);if(a){let l=`Already found a plugin named '${a.id}'. Tried to use: '${o}'.
Uppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`;throw new Error(l)}return e.VERSION&&this.log(`Using ${o} v${e.VERSION}`),r.type in me(this,At)[At]?me(this,At)[At][r.type].push(r):me(this,At)[At][r.type]=[r],r.install(),this.emit("plugin-added",r),this}getPlugin(e){for(let t of Object.values(me(this,At)[At])){let i=t.find(n=>n.id===e);if(i!=null)return i}}[Symbol.for("uppy test: getPlugins")](e){return me(this,At)[At][e]}iteratePlugins(e){Object.values(me(this,At)[At]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();let t=me(this,At)[At][e.type],i=t.findIndex(o=>o.id===e.id);i!==-1&&t.splice(i,1);let r={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(r)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),me(this,xa)[xa](),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",me(this,Di)[Di]),window.removeEventListener("offline",me(this,Di)[Di]))}hideInfo(){let{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t,i){t===void 0&&(t="info"),i===void 0&&(i=3e3);let n=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:n?e.message:e,details:n?e.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(e,t){let{logger:i}=this.opts;switch(t){case"error":i.error(e);break;case"warning":i.warn(e);break;default:i.debug(e);break}}registerRequestClient(e,t){me(this,Oa)[Oa].set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);let t=me(this,Oa)[Oa].get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?me(this,ys)[ys](e):(me(this,jn)[jn](e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](){return me(this,bs)[bs](...arguments)}addResultData(e,t){if(!me(this,Hf)[Hf](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}let{currentUploads:i}=this.getState(),n={...i[e],result:{...i[e].result,...t}};this.setState({currentUploads:{...i,[e]:n}})}upload(){var e;(e=me(this,At)[At].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState(),i=this.opts.onBeforeUpload(t);return i===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(i&&typeof i=="object"&&(t=i,this.setState({files:t})),Promise.resolve().then(()=>me(this,Lt)[Lt].validateMinNumberOfFiles(t)).catch(n=>{throw me(this,ni)[ni]([n]),n}).then(()=>{if(!me(this,zf)[zf](t))throw new Gt(this.i18n("missingRequiredMetaField"))}).catch(n=>{throw n}).then(()=>{let{currentUploads:n}=this.getState(),r=Object.values(n).flatMap(l=>l.fileIDs),o=[];Object.keys(t).forEach(l=>{let c=this.getFile(l);!c.progress.uploadStarted&&r.indexOf(l)===-1&&o.push(c.id)});let a=me(this,bs)[bs](o);return me(this,ys)[ys](a)}).catch(n=>{throw this.emit("error",n),this.log(n,"error"),n}))}};function HM(s){for(let r of s)r.isRestriction?this.emit("restriction-failed",r.file,r):this.emit("error",r,r.file),this.log(r,"warning");let e=s.filter(r=>r.isUserFacing),t=4,i=e.slice(0,t),n=e.slice(t);i.forEach(r=>{let{message:o,details:a=""}=r;this.info({message:o,details:a},"error",this.opts.infoTimeout)}),n.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:n.length})})}function UM(s){let{missingFields:e,error:t}=me(this,Lt)[Lt].getMissingRequiredMetaFields(s);return e.length>0?(this.setFileState(s.id,{missingRequiredMetaFields:e}),this.log(t.message),this.emit("restriction-failed",s,t),!1):!0}function jM(s){let e=!0;for(let t of Object.values(s))me(this,Ma)[Ma](t)||(e=!1);return e}function VM(s){let{allowNewUpload:e}=this.getState();if(e===!1){let t=new Gt(this.i18n("noMoreFilesAllowed"),{file:s});throw me(this,ni)[ni]([t]),t}}function qM(s){let e=s instanceof File?{name:s.name,type:s.type,size:s.size,data:s}:s,t=Aa(e),i=Nf(t,e),n=$n(i).extension,r=vu(e,this.getID()),o=e.meta||{};o.name=i,o.type=t;let a=Number.isFinite(e.data.size)?e.data.size:null;return{source:e.source||"",id:r,name:i,extension:n||"",meta:{...this.getState().meta,...o},type:t,data:e.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:a,uploadComplete:!1,uploadStarted:null},size:a,isGhost:!1,isRemote:e.isRemote||!1,remote:e.remote,preview:e.preview}}function WM(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(s=>{s.isRestriction||this.log(s.stack||s.message||s)})},4))}function GM(s){let{files:e}=this.getState(),t={...e},i=[],n=[];for(let a of s)try{var r;let l=me(this,Uf)[Uf](a),c=(r=e[l.id])==null?void 0:r.isGhost;c&&(l={...e[l.id],isGhost:!1,data:a.data},this.log(`Replaced the blob in the restored ghost file: ${l.name}, ${l.id}`));let u=this.opts.onBeforeFileAdded(l,t);if(!u&&this.checkIfFileAlreadyExists(l.id)){var o;throw new Gt(this.i18n("noDuplicates",{fileName:(o=l.name)!=null?o:this.i18n("unnamed")}),{file:a})}if(u===!1&&!c)throw new Gt("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:a});typeof u=="object"&&u!==null&&(l=u),me(this,Lt)[Lt].validateSingleFile(l),t[l.id]=l,i.push(l)}catch(l){n.push(l)}try{me(this,Lt)[Lt].validateAggregateRestrictions(Object.values(e),i)}catch(a){return n.push(a),{nextFilesState:e,validFilesToAdd:[],errors:n}}return{nextFilesState:t,validFilesToAdd:i,errors:n}}function YM(){let s=(i,n,r)=>{let o=i.message||"Unknown error";i.details&&(o+=` ${i.details}`),this.setState({error:o}),n!=null&&n.id in this.getState().files&&this.setFileState(n.id,{error:o,response:r})};this.on("error",s),this.on("upload-error",(i,n,r)=>{if(s(n,i,r),typeof n=="object"&&n.message){var o;this.log(n.message,"error");let a=new Error(this.i18n("failedToUpload",{file:(o=i?.name)!=null?o:""}));a.isUserFacing=!0,a.details=n.message,n.details&&(a.details+=` ${n.details}`),me(this,ni)[ni]([a])}else me(this,ni)[ni]([n])});let e=null;this.on("upload-stalled",(i,n)=>{let{message:r}=i,o=n.map(a=>a.meta.name).join(", ");e||(this.info({message:r,details:o},"warning",this.opts.infoTimeout),e=setTimeout(()=>{e=null},this.opts.infoTimeout)),this.log(`${r} ${o}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});let t=i=>{let n=i.filter(o=>{let a=o!=null&&this.getFile(o.id);return a||this.log(`Not setting progress for a file that has been removed: ${o?.id}`),a}),r=Object.fromEntries(n.map(o=>[o.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:o.size}}]));this.patchFilesState(r)};this.on("upload-start",t),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let r=this.getFile(i.id).progress;this.setFileState(i.id,{progress:{...r,postprocess:me(this,ws)[ws].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:r.bytesTotal},response:n,uploadURL:n.uploadURL,isPaused:!1}),i.size==null&&this.setFileState(i.id,{size:n.bytesUploaded||r.bytesTotal}),this.calculateTotalProgress()}),this.on("preprocess-progress",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getFile(i.id).progress,preprocess:n}})}),this.on("preprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let n={...this.getState().files};n[i.id]={...n[i.id],progress:{...n[i.id].progress}},delete n[i.id].progress.preprocess,this.setState({files:n})}),this.on("postprocess-progress",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}this.setFileState(i.id,{progress:{...this.getState().files[i.id].progress,postprocess:n}})}),this.on("postprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i?.id}`);return}let n={...this.getState().files};n[i.id]={...n[i.id],progress:{...n[i.id].progress}},delete n[i.id].progress.postprocess,this.setState({files:n})}),this.on("restored",()=>{this.calculateTotalProgress()}),this.on("dashboard:file-edit-complete",i=>{i&&me(this,Ma)[Ma](i)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",me(this,Di)[Di]),window.addEventListener("offline",me(this,Di)[Di]),setTimeout(me(this,Di)[Di],3e3))}function XM(s,e){e===void 0&&(e={});let{forceAllowNewUpload:t=!1}=e,{allowNewUpload:i,currentUploads:n}=this.getState();if(!i&&!t)throw new Error("Cannot create a new upload: already uploading.");let r=en();return this.emit("upload",r,this.getFilesByIds(s)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...n,[r]:{fileIDs:s,step:0,result:{}}}}),r}function KM(s){let{currentUploads:e}=this.getState();return e[s]}function JM(s){let e={...this.getState().currentUploads};delete e[s],this.setState({currentUploads:e})}async function ZM(s){let e=()=>{let{currentUploads:r}=this.getState();return r[s]},t=e(),i=[...me(this,Hn)[Hn],...me(this,Un)[Un],...me(this,ws)[ws]];try{for(let r=t.step||0;r<i.length&&t;r++){let o=i[r];this.setState({currentUploads:{...this.getState().currentUploads,[s]:{...t,step:r}}});let{fileIDs:a}=t;await o(a,s),t=e()}}catch(r){throw me(this,jn)[jn](s),r}if(t){t.fileIDs.forEach(l=>{let c=this.getFile(l);c&&c.progress.postprocess&&this.emit("postprocess-complete",c)});let r=t.fileIDs.map(l=>this.getFile(l)),o=r.filter(l=>!l.error),a=r.filter(l=>l.error);this.addResultData(s,{successful:o,failed:a,uploadID:s}),t=e()}let n;return t&&(n=t.result,this.emit("complete",n),me(this,jn)[jn](s)),n==null&&this.log(`Not setting result for an upload that has been removed: ${s}`),n}Eu.VERSION=$M.version;var jf=Eu;var Da,qe,ww,QM,Vn,gw,Ew,Vf,Yf,qf,Wf,eL,ka={},Sw=[],tL=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Tu=Array.isArray;function Es(s,e){for(var t in e)s[t]=e[t];return s}function Aw(s){var e=s.parentNode;e&&e.removeChild(s)}function m(s,e,t){var i,n,r,o={};for(r in e)r=="key"?i=e[r]:r=="ref"?n=e[r]:o[r]=e[r];if(arguments.length>2&&(o.children=arguments.length>3?Da.call(arguments,2):t),typeof s=="function"&&s.defaultProps!=null)for(r in s.defaultProps)o[r]===void 0&&(o[r]=s.defaultProps[r]);return La(s,o,i,n,null)}function La(s,e,t,i,n){var r={type:s,props:e,key:t,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:n??++ww,__i:-1,__u:0};return n==null&&qe.vnode!=null&&qe.vnode(r),r}function Tw(){return{current:null}}function Yt(s){return s.children}function _t(s,e){this.props=s,this.context=e}function qn(s,e){if(e==null)return s.__?qn(s.__,s.__i+1):null;for(var t;e<s.__k.length;e++)if((t=s.__k[e])!=null&&t.__e!=null)return t.__e;return typeof s.type=="function"?qn(s):null}function xw(s){var e,t;if((s=s.__)!=null&&s.__c!=null){for(s.__e=s.__c.base=null,e=0;e<s.__k.length;e++)if((t=s.__k[e])!=null&&t.__e!=null){s.__e=s.__c.base=t.__e;break}return xw(s)}}function vw(s){(!s.__d&&(s.__d=!0)&&Vn.push(s)&&!Au.__r++||gw!==qe.debounceRendering)&&((gw=qe.debounceRendering)||Ew)(Au)}function Au(){var s,e,t,i,n,r,o,a;for(Vn.sort(Vf);s=Vn.shift();)s.__d&&(e=Vn.length,i=void 0,r=(n=(t=s).__v).__e,o=[],a=[],t.__P&&((i=Es({},n)).__v=n.__v+1,qe.vnode&&qe.vnode(i),Xf(t.__P,i,n,t.__n,t.__P.namespaceURI,32&n.__u?[r]:null,o,r??qn(n),!!(32&n.__u),a),i.__v=n.__v,i.__.__k[i.__i]=i,_w(o,i,a),i.__e!=r&&xw(i)),Vn.length>e&&Vn.sort(Vf));Au.__r=0}function Cw(s,e,t,i,n,r,o,a,l,c,u){var h,f,p,g,y,A=i&&i.__k||Sw,S=e.length;for(t.__d=l,iL(t,e,A),l=t.__d,h=0;h<S;h++)(p=t.__k[h])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?ka:A[p.__i]||ka,p.__i=h,Xf(s,p,f,n,r,o,a,l,c,u),g=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&Kf(f.ref,null,p),u.push(p.ref,p.__c||g,p)),y==null&&g!=null&&(y=g),65536&p.__u||f.__k===p.__k?l=Pw(p,l,s):typeof p.type=="function"&&p.__d!==void 0?l=p.__d:g&&(l=g.nextSibling),p.__d=void 0,p.__u&=-196609);t.__d=l,t.__e=y}function iL(s,e,t){var i,n,r,o,a,l=e.length,c=t.length,u=c,h=0;for(s.__k=[],i=0;i<l;i++)o=i+h,(n=s.__k[i]=(n=e[i])==null||typeof n=="boolean"||typeof n=="function"?null:typeof n=="string"||typeof n=="number"||typeof n=="bigint"||n.constructor==String?La(null,n,null,null,null):Tu(n)?La(Yt,{children:n},null,null,null):n.constructor===void 0&&n.__b>0?La(n.type,n.props,n.key,n.ref?n.ref:null,n.__v):n)!=null?(n.__=s,n.__b=s.__b+1,a=sL(n,t,o,u),n.__i=a,r=null,a!==-1&&(u--,(r=t[a])&&(r.__u|=131072)),r==null||r.__v===null?(a==-1&&h--,typeof n.type!="function"&&(n.__u|=65536)):a!==o&&(a==o-1?h=a-o:a==o+1?h++:a>o?u>l-o?h+=a-o:h--:a<o&&h++,a!==i+h&&(n.__u|=65536))):(r=t[o])&&r.key==null&&r.__e&&!(131072&r.__u)&&(r.__e==s.__d&&(s.__d=qn(r)),Gf(r,r,!1),t[o]=null,u--);if(u)for(i=0;i<c;i++)(r=t[i])!=null&&!(131072&r.__u)&&(r.__e==s.__d&&(s.__d=qn(r)),Gf(r,r))}function Pw(s,e,t){var i,n;if(typeof s.type=="function"){for(i=s.__k,n=0;i&&n<i.length;n++)i[n]&&(i[n].__=s,e=Pw(i[n],e,t));return e}s.__e!=e&&(e&&s.type&&!t.contains(e)&&(e=qn(s)),t.insertBefore(s.__e,e||null),e=s.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Ji(s,e){return e=e||[],s==null||typeof s=="boolean"||(Tu(s)?s.some(function(t){Ji(t,e)}):e.push(s)),e}function sL(s,e,t,i){var n=s.key,r=s.type,o=t-1,a=t+1,l=e[t];if(l===null||l&&n==l.key&&r===l.type&&!(131072&l.__u))return t;if(i>(l!=null&&!(131072&l.__u)?1:0))for(;o>=0||a<e.length;){if(o>=0){if((l=e[o])&&!(131072&l.__u)&&n==l.key&&r===l.type)return o;o--}if(a<e.length){if((l=e[a])&&!(131072&l.__u)&&n==l.key&&r===l.type)return a;a++}}return-1}function bw(s,e,t){e[0]==="-"?s.setProperty(e,t??""):s[e]=t==null?"":typeof t!="number"||tL.test(e)?t:t+"px"}function Su(s,e,t,i,n){var r;e:if(e==="style")if(typeof t=="string")s.style.cssText=t;else{if(typeof i=="string"&&(s.style.cssText=i=""),i)for(e in i)t&&e in t||bw(s.style,e,"");if(t)for(e in t)i&&t[e]===i[e]||bw(s.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")r=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in s||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),s.l||(s.l={}),s.l[e+r]=t,t?i?t.u=i.u:(t.u=Yf,s.addEventListener(e,r?Wf:qf,r)):s.removeEventListener(e,r?Wf:qf,r);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in s)try{s[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!=="-"?s.removeAttribute(e):s.setAttribute(e,e=="popover"&&t==1?"":t))}}function yw(s){return function(e){if(this.l){var t=this.l[e.type+s];if(e.t==null)e.t=Yf++;else if(e.t<t.u)return;return t(qe.event?qe.event(e):e)}}}function Xf(s,e,t,i,n,r,o,a,l,c){var u,h,f,p,g,y,A,S,O,I,F,H,U,W,J,oe,G=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(l=!!(32&t.__u),r=[a=e.__e=t.__e]),(u=qe.__b)&&u(e);e:if(typeof G=="function")try{if(S=e.props,O="prototype"in G&&G.prototype.render,I=(u=G.contextType)&&i[u.__c],F=u?I?I.props.value:u.__:i,t.__c?A=(h=e.__c=t.__c).__=h.__E:(O?e.__c=h=new G(S,F):(e.__c=h=new _t(S,F),h.constructor=G,h.render=rL),I&&I.sub(h),h.props=S,h.state||(h.state={}),h.context=F,h.__n=i,f=h.__d=!0,h.__h=[],h._sb=[]),O&&h.__s==null&&(h.__s=h.state),O&&G.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Es({},h.__s)),Es(h.__s,G.getDerivedStateFromProps(S,h.__s))),p=h.props,g=h.state,h.__v=e,f)O&&G.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),O&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(O&&G.getDerivedStateFromProps==null&&S!==p&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(S,F),!h.__e&&(h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(S,h.__s,F)===!1||e.__v===t.__v)){for(e.__v!==t.__v&&(h.props=S,h.state=h.__s,h.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.forEach(function(ae){ae&&(ae.__=e)}),H=0;H<h._sb.length;H++)h.__h.push(h._sb[H]);h._sb=[],h.__h.length&&o.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(S,h.__s,F),O&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(p,g,y)})}if(h.context=F,h.props=S,h.__P=s,h.__e=!1,U=qe.__r,W=0,O){for(h.state=h.__s,h.__d=!1,U&&U(e),u=h.render(h.props,h.state,h.context),J=0;J<h._sb.length;J++)h.__h.push(h._sb[J]);h._sb=[]}else do h.__d=!1,U&&U(e),u=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++W<25);h.state=h.__s,h.getChildContext!=null&&(i=Es(Es({},i),h.getChildContext())),O&&!f&&h.getSnapshotBeforeUpdate!=null&&(y=h.getSnapshotBeforeUpdate(p,g)),Cw(s,Tu(oe=u!=null&&u.type===Yt&&u.key==null?u.props.children:u)?oe:[oe],e,t,i,n,r,o,a,l,c),h.base=e.__e,e.__u&=-161,h.__h.length&&o.push(h),A&&(h.__E=h.__=null)}catch(ae){if(e.__v=null,l||r!=null){for(e.__u|=l?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;r[r.indexOf(a)]=null,e.__e=a}else e.__e=t.__e,e.__k=t.__k;qe.__e(ae,e,t)}else r==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=nL(t.__e,e,t,i,n,r,o,l,c);(u=qe.diffed)&&u(e)}function _w(s,e,t){e.__d=void 0;for(var i=0;i<t.length;i++)Kf(t[i],t[++i],t[++i]);qe.__c&&qe.__c(e,s),s.some(function(n){try{s=n.__h,n.__h=[],s.some(function(r){r.call(n)})}catch(r){qe.__e(r,n.__v)}})}function nL(s,e,t,i,n,r,o,a,l){var c,u,h,f,p,g,y,A=t.props,S=e.props,O=e.type;if(O==="svg"?n="http://www.w3.org/2000/svg":O==="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),r!=null){for(c=0;c<r.length;c++)if((p=r[c])&&"setAttribute"in p==!!O&&(O?p.localName===O:p.nodeType===3)){s=p,r[c]=null;break}}if(s==null){if(O===null)return document.createTextNode(S);s=document.createElementNS(n,O,S.is&&S),r=null,a=!1}if(O===null)A===S||a&&s.data===S||(s.data=S);else{if(r=r&&Da.call(s.childNodes),A=t.props||ka,!a&&r!=null)for(A={},c=0;c<s.attributes.length;c++)A[(p=s.attributes[c]).name]=p.value;for(c in A)if(p=A[c],c!="children"){if(c=="dangerouslySetInnerHTML")h=p;else if(c!=="key"&&!(c in S)){if(c=="value"&&"defaultValue"in S||c=="checked"&&"defaultChecked"in S)continue;Su(s,c,null,p,n)}}for(c in S)p=S[c],c=="children"?f=p:c=="dangerouslySetInnerHTML"?u=p:c=="value"?g=p:c=="checked"?y=p:c==="key"||a&&typeof p!="function"||A[c]===p||Su(s,c,p,A[c],n);if(u)a||h&&(u.__html===h.__html||u.__html===s.innerHTML)||(s.innerHTML=u.__html),e.__k=[];else if(h&&(s.innerHTML=""),Cw(s,Tu(f)?f:[f],e,t,i,O==="foreignObject"?"http://www.w3.org/1999/xhtml":n,r,o,r?r[0]:t.__k&&qn(t,0),a,l),r!=null)for(c=r.length;c--;)r[c]!=null&&Aw(r[c]);a||(c="value",g!==void 0&&(g!==s[c]||O==="progress"&&!g||O==="option"&&g!==A[c])&&Su(s,c,g,A[c],n),c="checked",y!==void 0&&y!==s[c]&&Su(s,c,y,A[c],n))}return s}function Kf(s,e,t){try{if(typeof s=="function"){var i=typeof s.__u=="function";i&&s.__u(),i&&e==null||(s.__u=s(e))}else s.current=e}catch(n){qe.__e(n,t)}}function Gf(s,e,t){var i,n;if(qe.unmount&&qe.unmount(s),(i=s.ref)&&(i.current&&i.current!==s.__e||Kf(i,null,e)),(i=s.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){qe.__e(r,e)}i.base=i.__P=null}if(i=s.__k)for(n=0;n<i.length;n++)i[n]&&Gf(i[n],e,t||typeof s.type!="function");t||s.__e==null||Aw(s.__e),s.__c=s.__=s.__e=s.__d=void 0}function rL(s,e,t){return this.constructor(s,t)}function Jf(s,e,t){var i,n,r,o;qe.__&&qe.__(s,e),n=(i=typeof t=="function")?null:t&&t.__k||e.__k,r=[],o=[],Xf(e,s=(!i&&t||e).__k=m(Yt,null,[s]),n||ka,ka,e.namespaceURI,!i&&t?[t]:n?null:e.firstChild?Da.call(e.childNodes):null,r,!i&&t?t:n?n.__e:e.firstChild,i,o),_w(r,s,o)}function xu(s,e,t){var i,n,r,o,a=Es({},s.props);for(r in s.type&&s.type.defaultProps&&(o=s.type.defaultProps),e)r=="key"?i=e[r]:r=="ref"?n=e[r]:a[r]=e[r]===void 0&&o!==void 0?o[r]:e[r];return arguments.length>2&&(a.children=arguments.length>3?Da.call(arguments,2):t),La(s.type,a,i||s.key,n||s.ref,null)}Da=Sw.slice,qe={__e:function(s,e,t,i){for(var n,r,o;e=e.__;)if((n=e.__c)&&!n.__)try{if((r=n.constructor)&&r.getDerivedStateFromError!=null&&(n.setState(r.getDerivedStateFromError(s)),o=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(s,i||{}),o=n.__d),o)return n.__E=n}catch(a){s=a}throw s}},ww=0,QM=function(s){return s!=null&&s.constructor==null},_t.prototype.setState=function(s,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Es({},this.state),typeof s=="function"&&(s=s(Es({},t),this.props)),s&&Es(t,s),s!=null&&this.__v&&(e&&this._sb.push(e),vw(this))},_t.prototype.forceUpdate=function(s){this.__v&&(this.__e=!0,s&&this.__h.push(s),vw(this))},_t.prototype.render=Yt,Vn=[],Ew=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Vf=function(s,e){return s.__v.__b-e.__v.__b},Au.__r=0,Yf=0,qf=yw(!1),Wf=yw(!0),eL=0;function Ia(s){return typeof s!="object"||s===null||!("nodeType"in s)?!1:s.nodeType===Node.ELEMENT_NODE}function oL(s,e){return e===void 0&&(e=document),typeof s=="string"?e.querySelector(s):Ia(s)?s:null}var Ow=oL;function aL(s){for(var e;s&&!s.dir;)s=s.parentNode;return(e=s)==null?void 0:e.dir}var Cu=aL;var Wn=class{constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){let{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){let{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){let e=new Bn([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}};function Mw(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var lL=0;function cL(s){return"__private_"+lL+++"_"+s}function uL(s){let e=null,t;return function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return t=n,e||(e=Promise.resolve().then(()=>(e=null,s(...t)))),e}}var Fa=cL("updateUI"),Zf=class s extends Wn{constructor(){super(...arguments),Object.defineProperty(this,Fa,{writable:!0,value:void 0})}getTargetPlugin(e){let t;if(typeof e?.addTarget=="function")t=e,t instanceof s||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:t,UIPlugin:s}}));else if(typeof e=="function"){let i=e;this.uppy.iteratePlugins(n=>{n instanceof i&&(t=n)})}return t}mount(e,t){let i=t.id,n=Ow(e);if(n){this.isTargetDOMEl=!0;let a=document.createElement("div");return a.classList.add("uppy-Root"),Mw(this,Fa)[Fa]=uL(l=>{this.uppy.getPlugin(this.id)&&(Jf(this.render(l),a),this.afterUpdate())}),this.uppy.log(`Installing ${i} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(n.innerHTML=""),Jf(this.render(this.uppy.getState()),a),this.el=a,n.appendChild(a),a.dir=this.opts.direction||Cu(a)||"ltr",this.onMount(),this.el}let r=this.getTargetPlugin(e);if(r)return this.uppy.log(`Installing ${i} to ${r.id}`),this.parent=r,this.el=r.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${i}`);let o=`Invalid target option given to ${i}.`;throw typeof e=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(e){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){if(this.el!=null){var t,i;(t=(i=Mw(this,Fa))[Fa])==null||t.call(i,e)}}unmount(){if(this.isTargetDOMEl){var e;(e=this.el)==null||e.remove()}this.onUnmount()}onMount(){}onUnmount(){}},Ii=Zf;function Pu(s,e,t,i){return t===0||s===e?s:i===0?e:s+(e-s)*2**(-i/t)}var ri={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};var rm=Ue(kt(),1);function Ra(s){let e=[],t="indeterminate",i;for(let{progress:r}of Object.values(s)){let{preprocess:o,postprocess:a}=r;i==null&&(o||a)&&({mode:t,message:i}=o||a),o?.mode==="determinate"&&e.push(o.value),a?.mode==="determinate"&&e.push(a.value)}let n=e.reduce((r,o)=>r+o/e.length,0);return{mode:t,message:i,value:n}}var im=Ue(kt(),1),tm=Ue(bu(),1);function Qf(s){let e=Math.floor(s/3600)%24,t=Math.floor(s/60)%60,i=Math.floor(s%60);return{hours:e,minutes:t,seconds:i}}function em(s){let e=Qf(s),t=e.hours===0?"":`${e.hours}h`,i=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,n=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${t}${i}${n}`}var dL="\xB7",Lw=()=>` ${dL} `;function kw(s){let{newFiles:e,isUploadStarted:t,recoveredState:i,i18n:n,uploadState:r,isSomeGhost:o,startUpload:a}=s,l=(0,im.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":r===ri.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),c=e&&t&&!i?n("uploadXNewFiles",{smart_count:e}):n("uploadXFiles",{smart_count:e});return m("button",{type:"button",className:l,"aria-label":n("uploadXFiles",{smart_count:e}),onClick:a,disabled:o,"data-uppy-super-focusable":!0},c)}function Dw(s){let{i18n:e,uppy:t}=s;return m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry"},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},m("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),e("retry"))}function Iw(s){let{i18n:e,uppy:t}=s;return m("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},m("g",{fill:"none",fillRule:"evenodd"},m("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),m("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function Fw(s){let{isAllPaused:e,i18n:t,isAllComplete:i,resumableUploads:n,uppy:r}=s,o=t(e?"resume":"pause");function a(){if(!i){if(!n){r.cancelAll();return}if(e){r.resumeAll();return}r.pauseAll()}}return m("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:a,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},m("g",{fill:"none",fillRule:"evenodd"},m("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),m("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function Rw(s){let{i18n:e,doneButtonHandler:t}=s;return m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0},e("done"))}function Nw(){return m("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},m("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function Bw(s){let{progress:e}=s,{value:t,mode:i,message:n}=e;return m("div",{className:"uppy-StatusBar-content"},m(Nw,null),i==="determinate"?`${Math.round(t*100)}% \xB7 `:"",n)}function hL(s){let{numUploads:e,complete:t,totalUploadedSize:i,totalSize:n,totalETA:r,i18n:o}=s,a=e>1;return m("div",{className:"uppy-StatusBar-statusSecondary"},a&&o("filesUploadedOfTotal",{complete:t,smart_count:e}),m("span",{className:"uppy-StatusBar-additionalInfo"},a&&Lw(),o("dataUploadedOfTotal",{complete:(0,tm.default)(i),total:(0,tm.default)(n)}),Lw(),o("xTimeLeft",{time:em(r)})))}function zw(s){let{i18n:e,complete:t,numUploads:i}=s;return m("div",{className:"uppy-StatusBar-statusSecondary"},e("filesUploadedOfTotal",{complete:t,smart_count:i}))}function pL(s){let{i18n:e,newFiles:t,startUpload:i}=s,n=(0,im.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return m("div",{className:"uppy-StatusBar-statusSecondary"},m("div",{className:"uppy-StatusBar-statusSecondaryHint"},e("xMoreFilesAdded",{smart_count:t})),m("button",{type:"button",className:n,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:i},e("upload")))}function $w(s){let{i18n:e,supportsUploadProgress:t,totalProgress:i,showProgressDetails:n,isUploadStarted:r,isAllComplete:o,isAllPaused:a,newFiles:l,numUploads:c,complete:u,totalUploadedSize:h,totalSize:f,totalETA:p,startUpload:g}=s,y=l&&r;if(!r||o)return null;let A=e(a?"paused":"uploading");function S(){return!a&&!y&&n?t?m(hL,{numUploads:c,complete:u,totalUploadedSize:h,totalSize:f,totalETA:p,i18n:e}):m(zw,{i18n:e,complete:u,numUploads:c}):null}return m("div",{className:"uppy-StatusBar-content","aria-label":A,title:A},a?null:m(Nw,null),m("div",{className:"uppy-StatusBar-status"},m("div",{className:"uppy-StatusBar-statusPrimary"},t?`${A}: ${i}%`:A),S(),y?m(pL,{i18n:e,newFiles:l,startUpload:g}):null))}function Hw(s){let{i18n:e}=s;return m("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete")},m("div",{className:"uppy-StatusBar-status"},m("div",{className:"uppy-StatusBar-statusPrimary"},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},m("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),e("complete"))))}function Uw(s){let{error:e,i18n:t,complete:i,numUploads:n}=s;function r(){let o=`${t("uploadFailed")} 

 ${e}`;alert(o)}return m("div",{className:"uppy-StatusBar-content",title:t("uploadFailed")},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},m("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),m("div",{className:"uppy-StatusBar-status"},m("div",{className:"uppy-StatusBar-statusPrimary"},t("uploadFailed"),m("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:r,type:"button"},"?")),m(zw,{i18n:t,complete:i,numUploads:n})))}var{STATE_ERROR:jw,STATE_WAITING:Vw,STATE_PREPROCESSING:sm,STATE_UPLOADING:Ou,STATE_POSTPROCESSING:nm,STATE_COMPLETE:Mu}=ri;function om(s){let{newFiles:e,allowNewUpload:t,isUploadInProgress:i,isAllPaused:n,resumableUploads:r,error:o,hideUploadButton:a=void 0,hidePauseResumeButton:l=!1,hideCancelButton:c=!1,hideRetryButton:u=!1,recoveredState:h,uploadState:f,totalProgress:p,files:g,supportsUploadProgress:y,hideAfterFinish:A=!1,isSomeGhost:S,doneButtonHandler:O=void 0,isUploadStarted:I,i18n:F,startUpload:H,uppy:U,isAllComplete:W,showProgressDetails:J=void 0,numUploads:oe,complete:G,totalSize:ae,totalETA:pe,totalUploadedSize:ue}=s;function te(){switch(f){case nm:case sm:{let Be=Ra(g);return Be.mode==="determinate"?Be.value*100:p}case jw:return null;case Ou:return y?p:null;default:return p}}function $(){switch(f){case nm:case sm:{let{mode:Be}=Ra(g);return Be==="indeterminate"}case Ou:return!y;default:return!1}}function T(){if(h)return!1;switch(f){case Vw:return a||e===0;case Mu:return A;default:return!1}}let D=te(),k=T(),K=D??100,Z=!o&&e&&!i&&!n&&t&&!a,re=!c&&f!==Vw&&f!==Mu,ve=r&&!l&&f===Ou,_e=o&&!W&&!u,Ne=O&&f===Mu,Ke=(0,rm.default)("uppy-StatusBar-progress",{"is-indeterminate":$()}),Se=(0,rm.default)("uppy-StatusBar",`is-${f}`,{"has-ghosts":S});return m("div",{className:Se,"aria-hidden":k},m("div",{className:Ke,style:{width:`${K}%`},role:"progressbar","aria-label":`${K}%`,"aria-valuetext":`${K}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":D}),(()=>{switch(f){case sm:case nm:return m(Bw,{progress:Ra(g)});case Mu:return m(Hw,{i18n:F});case jw:return m(Uw,{error:o,i18n:F,numUploads:oe,complete:G});case Ou:return m($w,{i18n:F,supportsUploadProgress:y,totalProgress:p,showProgressDetails:J,isUploadStarted:I,isAllComplete:W,isAllPaused:n,newFiles:e,numUploads:oe,complete:G,totalUploadedSize:ue,totalSize:ae,totalETA:pe,startUpload:H});default:return null}})(),m("div",{className:"uppy-StatusBar-actions"},h||Z?m(kw,{newFiles:e,isUploadStarted:I,recoveredState:h,i18n:F,isSomeGhost:S,startUpload:H,uploadState:f}):null,_e?m(Dw,{i18n:F,uppy:U}):null,ve?m(Fw,{isAllPaused:n,i18n:F,isAllComplete:W,resumableUploads:r,uppy:U}):null,re?m(Iw,{i18n:F,uppy:U}):null,Ne?m(Rw,{i18n:F,doneButtonHandler:O}):null))}var qw={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function Ge(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var fL=0;function oo(s){return"__private_"+fL+++"_"+s}var mL={version:"4.0.0"},gL=2e3,vL=2e3;function bL(s,e,t,i){if(s)return ri.STATE_ERROR;if(e)return ri.STATE_COMPLETE;if(t)return ri.STATE_WAITING;let n=ri.STATE_WAITING,r=Object.keys(i);for(let o=0;o<r.length;o++){let{progress:a}=i[r[o]];if(a.uploadStarted&&!a.uploadComplete)return ri.STATE_UPLOADING;a.preprocess&&(n=ri.STATE_PREPROCESSING),a.postprocess&&n!==ri.STATE_PREPROCESSING&&(n=ri.STATE_POSTPROCESSING)}return n}var yL={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null},xi=oo("lastUpdateTime"),Fi=oo("previousUploadedBytes"),Ss=oo("previousSpeed"),oi=oo("previousETA"),am=oo("computeSmoothETA"),Na=oo("onUploadStart"),Gn=class extends Ii{constructor(e,t){super(e,{...yL,...t}),Object.defineProperty(this,am,{value:wL}),Object.defineProperty(this,xi,{writable:!0,value:void 0}),Object.defineProperty(this,Fi,{writable:!0,value:void 0}),Object.defineProperty(this,Ss,{writable:!0,value:void 0}),Object.defineProperty(this,oi,{writable:!0,value:void 0}),this.startUpload=()=>this.uppy.upload().catch(()=>{}),Object.defineProperty(this,Na,{writable:!0,value:()=>{let{recoveredState:i}=this.uppy.getState();if(Ge(this,Ss)[Ss]=null,Ge(this,oi)[oi]=null,i){Ge(this,Fi)[Fi]=Object.values(i.files).reduce((n,r)=>{let{progress:o}=r;return n+o.bytesUploaded},0),this.uppy.emit("restore-confirmed");return}Ge(this,xi)[xi]=performance.now(),Ge(this,Fi)[Fi]=0}}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=qw,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(e){let{capabilities:t,files:i,allowNewUpload:n,totalProgress:r,error:o,recoveredState:a}=e,{newFiles:l,startedFiles:c,completeFiles:u,isUploadStarted:h,isAllComplete:f,isAllPaused:p,isUploadInProgress:g,isSomeGhost:y}=this.uppy.getObjectOfFilesPerState(),A=a?Object.values(i):l,S=!!t.resumableUploads,O=t.uploadProgress!==!1,I=0,F=0;c.forEach(U=>{I+=U.progress.bytesTotal||0,F+=U.progress.bytesUploaded||0});let H=Ge(this,am)[am]({uploaded:F,total:I,remaining:I-F});return om({error:o,uploadState:bL(o,f,a,e.files||{}),allowNewUpload:n,totalProgress:r,totalSize:I,totalUploadedSize:F,isAllComplete:!1,isAllPaused:p,isUploadStarted:h,isUploadInProgress:g,isSomeGhost:y,recoveredState:a,complete:u.length,newFiles:A.length,numUploads:c.length,totalETA:H,files:i,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:S,supportsUploadProgress:O,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){let e=this.el;Cu(e)||(e.dir="ltr")}install(){let{target:e}=this.opts;e&&this.mount(e,this),this.uppy.on("upload",Ge(this,Na)[Na]),Ge(this,xi)[xi]=performance.now(),Ge(this,Fi)[Fi]=this.uppy.getFiles().reduce((t,i)=>t+i.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",Ge(this,Na)[Na])}};function wL(s){var e,t;if(s.total===0||s.remaining===0)return 0;(t=(e=Ge(this,xi))[xi])!=null||(e[xi]=performance.now());let i=performance.now()-Ge(this,xi)[xi];if(i===0){var n;return Math.round(((n=Ge(this,oi)[oi])!=null?n:0)/100)/10}let r=s.uploaded-Ge(this,Fi)[Fi];if(Ge(this,Fi)[Fi]=s.uploaded,r<=0){var o;return Math.round(((o=Ge(this,oi)[oi])!=null?o:0)/100)/10}let a=r/i,l=Ge(this,Ss)[Ss]==null?a:Pu(a,Ge(this,Ss)[Ss],gL,i);Ge(this,Ss)[Ss]=l;let c=s.remaining/l,u=Math.max(Ge(this,oi)[oi]-i,0),h=Ge(this,oi)[oi]==null?c:Pu(c,u,vL,i);return Ge(this,oi)[oi]=h,Ge(this,xi)[xi]=performance.now(),Math.round(h/100)/10}Gn.VERSION=mL.version;var Ww=300,Ba=class extends _t{constructor(){super(...arguments),this.ref=Tw()}componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,Ww)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,Ww)}render(){let{children:e}=this.props;return m("div",{className:"uppy-Informer-animated",ref:this.ref},e)}};function EL(s,e){return Object.assign(s,e)}function SL(s,e){var t;return(t=s?.key)!=null?t:e}function AL(s,e){let t=s._ptgLinkedRefs||(s._ptgLinkedRefs={});return t[e]||(t[e]=i=>{s.refs[e]=i})}function za(s){let e={};for(let t=0;t<s.length;t++)if(s[t]!=null){let i=SL(s[t],t.toString(36));e[i]=s[t]}return e}function TL(s,e){s=s||{},e=e||{};let t=o=>e.hasOwnProperty(o)?e[o]:s[o],i={},n=[];for(let o in s)e.hasOwnProperty(o)?n.length&&(i[o]=n,n=[]):n.push(o);let r={};for(let o in e){if(i.hasOwnProperty(o))for(let a=0;a<i[o].length;a++){let l=i[o][a];r[i[o][a]]=t(l)}r[o]=t(o)}for(let o=0;o<n.length;o++)r[n[o]]=t(n[o]);return r}var xL=s=>s,Lu=class extends _t{constructor(e,t){super(e,t),this.refs={},this.state={children:za(Ji(Ji(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){let e=this.state.children;for(let t in e)e[t]&&this.performAppear(t)}componentWillReceiveProps(e){let t=za(Ji(e.children)||[]),i=this.state.children;this.setState(r=>({children:TL(r.children,t)}));let n;for(n in t)if(t.hasOwnProperty(n)){let r=i&&i.hasOwnProperty(n);t[n]&&r&&this.currentlyTransitioningKeys[n]?(this.keysToEnter.push(n),this.keysToAbortLeave.push(n)):t[n]&&!r&&!this.currentlyTransitioningKeys[n]&&this.keysToEnter.push(n)}for(n in i)if(i.hasOwnProperty(n)){let r=t&&t.hasOwnProperty(n);i[n]&&!r&&!this.currentlyTransitioningKeys[n]&&this.keysToLeave.push(n)}}componentDidUpdate(){let{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);let{keysToLeave:t}=this;this.keysToLeave=[],t.forEach(this.performLeave)}_finishAbort(e){let t=this.keysToAbortLeave.indexOf(e);t!==-1&&this.keysToAbortLeave.splice(t,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;let t=this.refs[e];t!=null&&t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){let t=this.refs[e];t!=null&&t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);let i=za(Ji(this.props.children)||[]);(!i||!i.hasOwnProperty(e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;let t=this.refs[e];t!=null&&t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){let t=this.refs[e];t!=null&&t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);let i=za(Ji(this.props.children)||[]);(!i||!i.hasOwnProperty(e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;let i=this.refs[e];i!=null&&i.componentWillLeave?i.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;let i=this.refs[e];i!=null&&i.componentDidLeave&&i.componentDidLeave(),delete this.currentlyTransitioningKeys[e];let n=za(Ji(this.props.children)||[]);if(n&&n.hasOwnProperty(e))this.performEnter(e);else{let r=EL({},this.state.children);delete r[e],this.setState({children:r})}}render(e,t){let{childFactory:i,transitionLeave:n,transitionName:r,transitionAppear:o,transitionEnter:a,transitionLeaveTimeout:l,transitionEnterTimeout:c,transitionAppearTimeout:u,component:h,...f}=e,{children:p}=t,g=Object.entries(p).map(y=>{let[A,S]=y;if(!S)return;let O=AL(this,A);return xu(i(S),{ref:O,key:A})}).filter(Boolean);return m(h,f,g)}};Lu.defaultProps={component:"span",childFactory:xL};var Gw=Lu;var CL={version:"4.0.0"},Yn=class extends Ii{constructor(e,t){super(e,t),this.render=i=>m("div",{className:"uppy uppy-Informer"},m(Gw,null,i.info.map(n=>m(Ba,{key:n.message},m("p",{role:"alert"},n.message," ",n.details&&m("span",{"aria-label":n.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${n.message} 

 ${n.details}`)},"?")))))),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){let{target:e}=this.opts;e&&this.mount(e,this)}};Yn.VERSION=CL.version;var PL=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function _L(s,e,t){var i,n;let r=PL.exec(s),o=(i=(n=e.mimeType)!=null?n:r?.[1])!=null?i:"plain/text",a;if(r?.[2]!=null){let l=atob(decodeURIComponent(r[3])),c=new Uint8Array(l.length);for(let u=0;u<l.length;u++)c[u]=l.charCodeAt(u);a=[c]}else r?.[3]!=null&&(a=[decodeURIComponent(r[3])]);return t?new File(a,e.name||"",{type:o}):new Blob(a,{type:o})}var Yw=_L;function ku(s){return s.startsWith("blob:")}function Du(s){return s?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(s):!1}function Ie(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}var sE=typeof self<"u"?self:global,ja=typeof navigator<"u",OL=ja&&typeof HTMLImageElement>"u",Xw=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),nE=sE.Buffer,rE=!!nE,ML=s=>s!==void 0;function oE(s){return s===void 0||(s instanceof Map?s.size===0:Object.values(s).filter(ML).length===0)}function bt(s){let e=new Error(s);throw delete e.stack,e}function Kw(s){let e=function(t){let i=0;return t.ifd0.enabled&&(i+=1024),t.exif.enabled&&(i+=2048),t.makerNote&&(i+=2048),t.userComment&&(i+=1024),t.gps.enabled&&(i+=512),t.interop.enabled&&(i+=100),t.ifd1.enabled&&(i+=1024),i+2048}(s);return s.jfif.enabled&&(e+=50),s.xmp.enabled&&(e+=2e4),s.iptc.enabled&&(e+=14e3),s.icc.enabled&&(e+=6e3),e}var lm=s=>String.fromCharCode.apply(null,s),Jw=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0,Kn=class s{static from(e,t){return e instanceof this&&e.le===t?e:new s(e,void 0,void 0,t)}constructor(e,t=0,i,n){if(typeof n=="boolean"&&(this.le=n),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){i===void 0&&(i=e.byteLength-t);let r=new DataView(e,t,i);this._swapDataView(r)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof s){i===void 0&&(i=e.byteLength-t),(t+=e.byteOffset)+i>e.byteOffset+e.byteLength&&bt("Creating view outside of available memory in ArrayBuffer");let r=new DataView(e.buffer,t,i);this._swapDataView(r)}else if(typeof e=="number"){let r=new DataView(new ArrayBuffer(e));this._swapDataView(r)}else bt("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,i=s){return e instanceof DataView||e instanceof s?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||bt("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new i(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new s(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return n=this.getUint8Array(e,t),Jw?Jw.decode(n):rE?Buffer.from(n).toString("utf8"):decodeURIComponent(escape(lm(n)));var n}getLatin1String(e=0,t=this.byteLength){let i=this.getUint8Array(e,t);return lm(i)}getUnicodeString(e=0,t=this.byteLength){let i=[];for(let n=0;n<t&&e+n<this.byteLength;n+=2)i.push(this.getUint16(e+n));return lm(i)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,i){switch(t){case 1:return this.getUint8(e,i);case 2:return this.getUint16(e,i);case 4:return this.getUint32(e,i);case 8:return this.getUint64&&this.getUint64(e,i)}}getUint(e,t,i){switch(t){case 8:return this.getUint8(e,i);case 16:return this.getUint16(e,i);case 32:return this.getUint32(e,i);case 64:return this.getUint64&&this.getUint64(e,i)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}};function um(s,e){bt(`${s} '${e}' was not loaded, try using full build of exifr.`)}var Va=class extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||um(this.kind,e),t&&(e in t||function(i,n){bt(`Unknown ${i} '${n}'.`)}(this.kind,e),t[e].enabled||um(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}},Bu=new Va("file parser"),ai=new Va("segment parser"),Ga=new Va("file reader"),LL=sE.fetch;function Zw(s,e){return(t=s).startsWith("data:")||t.length>1e4?hm(s,e,"base64"):Xw&&s.includes("://")?dm(s,e,"url",Iu):Xw?hm(s,e,"fs"):ja?dm(s,e,"url",Iu):void bt("Invalid input argument");var t}async function dm(s,e,t,i){return Ga.has(t)?hm(s,e,t):i?async function(n,r){let o=await r(n);return new Kn(o)}(s,i):void bt(`Parser ${t} is not loaded`)}async function hm(s,e,t){let i=new(Ga.get(t))(s,e);return await i.read(),i}var Iu=s=>LL(s).then(e=>e.arrayBuffer()),qa=s=>new Promise((e,t)=>{let i=new FileReader;i.onloadend=()=>e(i.result||new ArrayBuffer),i.onerror=t,i.readAsArrayBuffer(s)}),pm=class extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}};function aE(s,e,t){let i=new pm;for(let[n,r]of t)i.set(n,r);if(Array.isArray(e))for(let n of e)s.set(n,i);else s.set(e,i);return i}function lE(s,e,t){let i,n=s.get(e);for(i of t)n.set(i[0],i[1])}var Ya=new Map,bm=new Map,ym=new Map,ao=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],zu=["jfif","xmp","icc","iptc","ihdr"],Wa=["tiff",...zu],dt=["ifd0","ifd1","exif","gps","interop"],lo=[...Wa,...dt],co=["makerNote","userComment"],$u=["translateKeys","translateValues","reviveValues","multiSegment"],uo=[...$u,"sanitize","mergeOutput","silentErrors"],Fu=class{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}},Xn=class extends Fu{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,i,n){if(super(),Ie(this,"enabled",!1),Ie(this,"skip",new Set),Ie(this,"pick",new Set),Ie(this,"deps",new Set),Ie(this,"translateKeys",!1),Ie(this,"translateValues",!1),Ie(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=dt.includes(e),this.canBeFiltered&&(this.dict=Ya.get(e)),i!==void 0)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(typeof i=="object"){if(this.enabled=!0,this.parse=i.parse!==!1,this.canBeFiltered){let{pick:r,skip:o}=i;r&&r.length>0&&this.translateTagSet(r,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(i)}else i===!0||i===!1?this.parse=this.enabled=i:bt(`Invalid options argument: ${i}`)}applyInheritables(e){let t,i;for(t of $u)i=e[t],i!==void 0&&(this[t]=i)}translateTagSet(e,t){if(this.dict){let i,n,{tagKeys:r,tagValues:o}=this.dict;for(i of e)typeof i=="string"?(n=o.indexOf(i),n===-1&&(n=r.indexOf(Number(i))),n!==-1&&t.add(Number(r[n]))):t.add(i)}else for(let i of e)t.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Ru(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Ru(this.pick,this.deps)}},Dt={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Qw=new Map,Jn=class extends Fu{static useCached(e){let t=Qw.get(e);return t!==void 0||(t=new this(e),Qw.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):bt(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=ja?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of ao)this[e]=Dt[e];for(e of uo)this[e]=Dt[e];for(e of co)this[e]=Dt[e];for(e of lo)this[e]=new Xn(e,Dt[e],void 0,this)}setupFromTrue(){let e;for(e of ao)this[e]=Dt[e];for(e of uo)this[e]=Dt[e];for(e of co)this[e]=!0;for(e of lo)this[e]=new Xn(e,!0,void 0,this)}setupFromArray(e){let t;for(t of ao)this[t]=Dt[t];for(t of uo)this[t]=Dt[t];for(t of co)this[t]=Dt[t];for(t of lo)this[t]=new Xn(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,dt)}setupFromObject(e){let t;for(t of(dt.ifd0=dt.ifd0||dt.image,dt.ifd1=dt.ifd1||dt.thumbnail,Object.assign(this,e),ao))this[t]=cm(e[t],Dt[t]);for(t of uo)this[t]=cm(e[t],Dt[t]);for(t of co)this[t]=cm(e[t],Dt[t]);for(t of Wa)this[t]=new Xn(t,Dt[t],e[t],this);for(t of dt)this[t]=new Xn(t,Dt[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,dt,lo),e.tiff===!0?this.batchEnableWithBool(dt,!0):e.tiff===!1?this.batchEnableWithUserValue(dt,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,dt):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,dt)}batchEnableWithBool(e,t){for(let i of e)this[i].enabled=t}batchEnableWithUserValue(e,t){for(let i of e){let n=t[i];this[i].enabled=n!==!1&&n!==void 0}}setupGlobalFilters(e,t,i,n=i){if(e&&e.length){for(let o of n)this[o].enabled=!1;let r=eE(e,i);for(let[o,a]of r)Ru(this[o].pick,a),this[o].enabled=!0}else if(t&&t.length){let r=eE(t,i);for(let[o,a]of r)Ru(this[o].skip,a)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:i,iptc:n,icc:r}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),i.enabled||e.skip.add(700),n.enabled||e.skip.add(33723),r.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:i,interop:n}=this;n.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=dt.some(r=>this[r].enabled===!0)||this.makerNote||this.userComment;for(let r of dt)this[r].finalizeFilters()}get onlyTiff(){return!zu.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of Wa)this[e].enabled&&!ai.has(e)&&um("segment parser",e)}};function eE(s,e){let t,i,n,r,o=[];for(n of e){for(r of(t=Ya.get(n),i=[],t))(s.includes(r[0])||s.includes(r[1]))&&i.push(r[0]);i.length&&o.push([n,i])}return o}function cm(s,e){return s!==void 0?s:e!==void 0?e:void 0}function Ru(s,e){for(let t of e)s.add(t)}Ie(Jn,"default",Dt);var ho=class{constructor(e){Ie(this,"parsers",{}),Ie(this,"output",{}),Ie(this,"errors",[]),Ie(this,"pushToErrors",t=>this.errors.push(t)),this.options=Jn.useCached(e)}async read(e){this.file=await function(t,i){return typeof t=="string"?Zw(t,i):ja&&!OL&&t instanceof HTMLImageElement?Zw(t.src,i):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new Kn(t):ja&&t instanceof Blob?dm(t,i,"blob",qa):void bt("Invalid input argument")}(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[i,n]of Bu)if(n.canHandle(e,t))return this.fileParser=new n(this.options,this.file,this.parsers),e[i]=!0;this.file.close&&this.file.close(),bt("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),oE(i=e)?void 0:i;var i}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map(async i=>{let n=await i.parse();i.assignToOutput(e,n)});this.options.silentErrors&&(t=t.map(i=>i.catch(this.pushToErrors))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,i=ai.get("tiff",e);var n;if(t.tiff?n={start:0,type:"tiff"}:t.jpeg&&(n=await this.fileParser.getOrFindSegment("tiff")),n===void 0)return;let r=await this.fileParser.ensureSegmentChunk(n),o=this.parsers.tiff=new i(r,e,t),a=await o.extractThumbnail();return t.close&&t.close(),a}};async function cE(s,e){let t=new ho(e);return await t.read(s),t.parse()}var kL=Object.freeze({__proto__:null,parse:cE,Exifr:ho,fileParsers:Bu,segmentParsers:ai,fileReaders:Ga,tagKeys:Ya,tagValues:bm,tagRevivers:ym,createDictionary:aE,extendDictionary:lE,fetchUrlAsArrayBuffer:Iu,readBlobAsArrayBuffer:qa,chunkedProps:ao,otherSegments:zu,segments:Wa,tiffBlocks:dt,segmentsAndBlocks:lo,tiffExtractables:co,inheritables:$u,allFormatters:uo,Options:Jn}),tn=class{static findPosition(e,t){let i=e.getUint16(t+2)+2,n=typeof this.headerLength=="function"?this.headerLength(e,t,i):this.headerLength,r=t+n,o=i-n;return{offset:t,length:i,headerLength:n,start:r,size:o,end:r+o}}static parse(e,t={}){return new this(e,new Jn({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof Kn?e:new Kn(e)}constructor(e,t={},i){Ie(this,"errors",[]),Ie(this,"raw",new Map),Ie(this,"handleError",n=>{if(!this.options.silentErrors)throw n;this.errors.push(n.message)}),this.chunk=this.normalizeInput(e),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let i=ym.get(t),n=bm.get(t),r=Ya.get(t),o=this.options[t],a=o.reviveValues&&!!i,l=o.translateValues&&!!n,c=o.translateKeys&&!!r,u={};for(let[h,f]of e)a&&i.has(h)?f=i.get(h)(f):l&&n.has(h)&&(f=this.translateValue(f,n.get(h))),c&&r.has(h)&&(h=r.get(h)||h),u[h]=f;return u}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,i){if(this.globalOptions.mergeOutput)return Object.assign(e,i);e[t]?Object.assign(e[t],i):e[t]=i}};Ie(tn,"headerLength",4),Ie(tn,"type",void 0),Ie(tn,"multiSegment",!1),Ie(tn,"canHandle",()=>!1);function DL(s){return s===192||s===194||s===196||s===219||s===221||s===218||s===254}function IL(s){return s>=224&&s<=239}function FL(s,e,t){for(let[i,n]of ai)if(n.canHandle(s,e,t))return i}var Nu=class extends class{constructor(e,t,i){Ie(this,"errors",[]),Ie(this,"ensureSegmentChunk",async n=>{let r=n.start,o=n.size||65536;if(this.file.chunked)if(this.file.available(r,o))n.chunk=this.file.subarray(r,o);else try{n.chunk=await this.file.readChunk(r,o)}catch(a){bt(`Couldn't read segment: ${JSON.stringify(n)}. ${a.message}`)}else this.file.byteLength>r+o?n.chunk=this.file.subarray(r,o):n.size===void 0?n.chunk=this.file.subarray(r):bt("Segment unreachable: "+JSON.stringify(n));return n.chunk}),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=i}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let i=new(ai.get(e))(t,this.options,this.file);return this.parsers[e]=i}createParsers(e){for(let t of e){let{type:i,chunk:n}=t,r=this.options[i];if(r&&r.enabled){let o=this.parsers[i];o&&o.append||o||this.createParser(i,n)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...e){super(...e),Ie(this,"appSegments",[]),Ie(this,"jpegSegments",[]),Ie(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(ai.keyList())):(e=e===void 0?ai.keyList().filter(t=>this.options[t].enabled):e.filter(t=>this.options[t].enabled&&ai.has(t)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:i,findAll:n,wanted:r,remaining:o}=this;if(!n&&this.file.chunked&&(n=Array.from(r).some(a=>{let l=ai.get(a),c=this.options[a];return l.multiSegment&&c.multiSegment}),n&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,i.byteLength),!this.options.onlyTiff&&i.chunked){let a=!1;for(;o.size>0&&!a&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=i,c=this.appSegments.some(u=>!this.file.available(u.offset||u.start,u.length||u.size));if(a=e>l&&!c?!await i.readNextChunk(e):!await i.readNextChunk(l),(e=this.findAppSegmentsInRange(e,i.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let i,n,r,o,a,l,{file:c,findAll:u,wanted:h,remaining:f,options:p}=this;for(;e<t;e++)if(c.getUint8(e)===255){if(i=c.getUint8(e+1),IL(i)){if(n=c.getUint16(e+2),r=FL(c,e,n),r&&h.has(r)&&(o=ai.get(r),a=o.findPosition(c,e),l=p[r],a.type=r,this.appSegments.push(a),!u&&(o.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||f.delete(r)):f.delete(r),f.size===0)))break;p.recordUnknownSegments&&(a=tn.findPosition(c,e),a.marker=i,this.unknownSegments.push(a)),e+=n+1}else if(DL(i)){if(n=c.getUint16(e+2),i===218&&p.stopAfterSos!==!1)return;p.recordJpegSegments&&this.jpegSegments.push({offset:e,length:n,marker:i}),e+=n+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(t=>t.multiSegment))return;let e=function(t,i){let n,r,o,a=new Map;for(let l=0;l<t.length;l++)n=t[l],r=n[i],a.has(r)?o=a.get(r):a.set(r,o=[]),o.push(n);return Array.from(a)}(this.appSegments,"type");this.mergedAppSegments=e.map(([t,i])=>{let n=ai.get(t,this.options);return n.handleMultiSegments?{type:t,chunk:n.handleMultiSegments(i)}:i[0]})}getSegment(e){return this.appSegments.find(t=>t.type===e)}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}};Ie(Nu,"type","jpeg"),Bu.set("jpeg",Nu);var RL=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],fm=class extends tn{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,i=new Map){let{pick:n,skip:r}=this.options[t];n=new Set(n);let o=n.size>0,a=r.size===0,l=this.chunk.getUint16(e);e+=2;for(let c=0;c<l;c++){let u=this.chunk.getUint16(e);if(o){if(n.has(u)&&(i.set(u,this.parseTag(e,u,t)),n.delete(u),n.size===0))break}else!a&&r.has(u)||i.set(u,this.parseTag(e,u,t));e+=12}return i}parseTag(e,t,i){let{chunk:n}=this,r=n.getUint16(e+2),o=n.getUint32(e+4),a=RL[r];if(a*o<=4?e+=8:e=n.getUint32(e+8),(r<1||r>13)&&bt(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${r}, offset ${e}`),e>n.byteLength&&bt(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${r}, offset ${e} is outside of chunk size ${n.byteLength}`),r===1)return n.getUint8Array(e,o);if(r===2)return(l=function(c){for(;c.endsWith("\0");)c=c.slice(0,-1);return c}(l=n.getString(e,o)).trim())===""?void 0:l;var l;if(r===7)return n.getUint8Array(e,o);if(o===1)return this.parseTagValue(r,e);{let c=new(function(h){switch(h){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(r))(o),u=a;for(let h=0;h<o;h++)c[h]=this.parseTagValue(r,e),e+=u;return c}}parseTagValue(e,t){let{chunk:i}=this;switch(e){case 1:return i.getUint8(t);case 3:return i.getUint16(t);case 4:return i.getUint32(t);case 5:return i.getUint32(t)/i.getUint32(t+4);case 6:return i.getInt8(t);case 8:return i.getInt16(t);case 9:return i.getInt32(t);case 10:return i.getInt32(t)/i.getInt32(t+4);case 11:return i.getFloat(t);case 12:return i.getDouble(t);case 13:return i.getUint32(t);default:bt(`Invalid tiff type ${e}`)}}},Ua=class extends fm{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let i=new Map;return this[t]=i,this.parseTags(e,t,i),i}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&bt("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&bt(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,Kw(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Kw(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let i=e.get(t);i&&i.length===1&&e.set(t,i[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",tE(...e.get(2),e.get(1))),e.set("longitude",tE(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,i,n={};for(t of dt)if(e=this[t],!oE(e))if(i=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(n,i)}else n[t]=i;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[i,n]of Object.entries(t))this.assignObjectToOutput(e,i,n)}};function tE(s,e,t,i){var n=s+e/60+t/3600;return i!=="S"&&i!=="W"||(n*=-1),n}Ie(Ua,"type","tiff"),Ie(Ua,"headerLength",10),ai.set("tiff",Ua);var y3=Object.freeze({__proto__:null,default:kL,Exifr:ho,fileParsers:Bu,segmentParsers:ai,fileReaders:Ga,tagKeys:Ya,tagValues:bm,tagRevivers:ym,createDictionary:aE,extendDictionary:lE,fetchUrlAsArrayBuffer:Iu,readBlobAsArrayBuffer:qa,chunkedProps:ao,otherSegments:zu,segments:Wa,tiffBlocks:dt,segmentsAndBlocks:lo,tiffExtractables:co,inheritables:$u,allFormatters:uo,Options:Jn,parse:cE}),wm={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},w3=Object.assign({},wm,{firstChunkSize:4e4,gps:[1,2,3,4]});var E3=Object.assign({},wm,{tiff:!1,ifd1:!0,mergeOutput:!1});var NL=Object.assign({},wm,{firstChunkSize:4e4,ifd0:[274]});async function BL(s){let e=new ho(NL);await e.read(s);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}var zL=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}}),$a=!0,Ha=!0;if(typeof navigator=="object"){let s=navigator.userAgent;if(s.includes("iPad")||s.includes("iPhone")){let e=s.match(/OS (\d+)_(\d+)/);if(e){let[,t,i]=e;$a=Number(t)+.1*Number(i)<13.4,Ha=!1}}else if(s.includes("OS X 10")){let[,e]=s.match(/OS X 10[_.](\d+)/);$a=Ha=Number(e)<15}if(s.includes("Chrome/")){let[,e]=s.match(/Chrome\/(\d+)/);$a=Ha=Number(e)<81}else if(s.includes("Firefox/")){let[,e]=s.match(/Firefox\/(\d+)/);$a=Ha=Number(e)<77}}async function uE(s){let e=await BL(s);return Object.assign({canvas:$a,css:Ha},zL[e])}var mm=class extends Kn{constructor(...e){super(...e),Ie(this,"ranges",new gm),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,i){if(e===0&&this.byteLength===0&&i){let n=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(n)}else{let n=e+t;if(n>this.byteLength){let{dataView:r}=this._extend(n);this._swapDataView(r)}}}_extend(e){let t;t=rE?nE.allocUnsafe(e):new Uint8Array(e);let i=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:i}}subarray(e,t,i=!1){return t=t||this._lengthToEnd(e),i&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,i=!1){i&&this._tryExtend(t,e.byteLength,e);let n=super.set(e,t);return this.ranges.add(t,n.byteLength),n}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}},gm=class{constructor(){Ie(this,"list",[])}get length(){return this.list.length}add(e,t,i=0){let n=e+t,r=this.list.filter(o=>iE(e,o.offset,n)||iE(e,o.end,n));if(r.length>0){e=Math.min(e,...r.map(a=>a.offset)),n=Math.max(n,...r.map(a=>a.end)),t=n-e;let o=r.shift();o.offset=e,o.length=t,o.end=n,this.list=this.list.filter(a=>!r.includes(a))}else this.list.push({offset:e,length:t,end:n})}available(e,t){let i=e+t;return this.list.some(n=>n.offset<=e&&i<=n.end)}};function iE(s,e,t){return s<=e&&e<=t}var vm=class extends mm{constructor(e,t){super(0),Ie(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,i=await this.readChunk(e,t);return!!i&&i.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}};Ga.set("blob",class extends vm{async readWhole(){this.chunked=!1;let s=await qa(this.input);this._swapArrayBuffer(s)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(s,e){let t=e?s+e:void 0,i=this.input.slice(s,t),n=await qa(i);return this.set(n,s,!0)}});var dE={strings:{generatingThumbnails:"Generating thumbnails..."}};var $L={version:"4.0.0"};function HL(s,e,t){try{s.getContext("2d").getImageData(0,0,1,1)}catch(i){if(i.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return s.toBlob?new Promise(i=>{s.toBlob(i,e,t)}).then(i=>{if(i===null)throw new Error("cannot read image, probably an svg with external resources");return i}):Promise.resolve().then(()=>Yw(s.toDataURL(e,t),{})).then(i=>{if(i===null)throw new Error("could not extract blob, probably an old browser");return i})}function UL(s,e){let t=s.width,i=s.height;(e.deg===90||e.deg===270)&&(t=s.height,i=s.width);let n=document.createElement("canvas");n.width=t,n.height=i;let r=n.getContext("2d");return r.translate(t/2,i/2),e.canvas&&(r.rotate(e.rad),r.scale(e.scaleX,e.scaleY)),r.drawImage(s,-s.width/2,-s.height/2,s.width,s.height),n}function jL(s){let e=s.width/s.height,t=5e6,i=4096,n=Math.floor(Math.sqrt(t*e)),r=Math.floor(t/Math.sqrt(t*e));if(n>i&&(n=i,r=Math.round(n/e)),r>i&&(r=i,n=Math.round(e*r)),s.width>n){let o=document.createElement("canvas");return o.width=n,o.height=r,o.getContext("2d").drawImage(s,0,0,n,r),o}return s}var VL={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1},po=class extends Ii{constructor(e,t){if(super(e,{...VL,...t}),this.onFileAdded=i=>{!i.preview&&i.data&&Du(i.type)&&!i.isRemote&&this.addToQueue(i.id)},this.onCancelRequest=i=>{let n=this.queue.indexOf(i.id);n!==-1&&this.queue.splice(n,1)},this.onFileRemoved=i=>{let n=this.queue.indexOf(i.id);n!==-1&&this.queue.splice(n,1),i.preview&&ku(i.preview)&&URL.revokeObjectURL(i.preview)},this.onRestored=()=>{this.uppy.getFiles().filter(n=>n.isRestored).forEach(n=>{(!n.preview||ku(n.preview))&&this.addToQueue(n.id)})},this.onAllFilesRemoved=()=>{this.queue=[]},this.waitUntilAllProcessed=i=>{i.forEach(r=>{let o=this.uppy.getFile(r);this.uppy.emit("preprocess-progress",o,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});let n=()=>{i.forEach(r=>{let o=this.uppy.getFile(r);this.uppy.emit("preprocess-complete",o)})};return new Promise(r=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{n(),r()}):(n(),r())})},this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=dE,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,t,i){let n=URL.createObjectURL(e.data),r=new Promise((a,l)=>{let c=new Image;c.src=n,c.addEventListener("load",()=>{URL.revokeObjectURL(n),a(c)}),c.addEventListener("error",u=>{URL.revokeObjectURL(n),l(u.error||new Error("Could not create thumbnail"))})}),o=uE(e.data).catch(()=>1);return Promise.all([r,o]).then(a=>{let[l,c]=a,u=this.getProportionalDimensions(l,t,i,c.deg),h=UL(l,c),f=this.resizeImage(h,u.width,u.height);return HL(f,this.thumbnailType,80)}).then(a=>URL.createObjectURL(a))}getProportionalDimensions(e,t,i,n){let r=e.width/e.height;return(n===90||n===270)&&(r=e.height/e.width),t!=null?{width:t,height:Math.round(t/r)}:i!=null?{width:Math.round(i*r),height:i}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/r)}}resizeImage(e,t,i){let n=jL(e),r=Math.ceil(Math.log2(n.width/t));r<1&&(r=1);let o=t*2**(r-1),a=i*2**(r-1),l=2;for(;r--;){let c=document.createElement("canvas");c.width=o,c.height=a,c.getContext("2d").drawImage(n,0,0,o,a),n=c,o=Math.round(o/l),a=Math.round(a/l)}return n}setPreviewURL(e,t){this.uppy.setFileState(e,{preview:t})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){let e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return Du(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(t=>{this.setPreviewURL(e.id,t),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),t)}).catch(t=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(t,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),t)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}};po.VERSION=$L.version;function qL(s){if(typeof s=="string"){let e=document.querySelectorAll(s);return e.length===0?null:Array.from(e)}return typeof s=="object"&&Ia(s)?[s]:null}var Em=qL;var sn=Array.from;function Hu(s,e,t,i){let{onSuccess:n}=i;s.readEntries(r=>{let o=[...e,...r];r.length?queueMicrotask(()=>{Hu(s,o,t,{onSuccess:n})}):n(o)},r=>{t(r),n(e)})}function hE(s,e){return s==null?s:{kind:s.isFile?"file":s.isDirectory?"directory":void 0,name:s.name,getFile(){return new Promise((t,i)=>s.file(t,i))},async*values(){let t=s.createReader();yield*await new Promise(n=>{Hu(t,[],e,{onSuccess:r=>n(r.map(o=>hE(o,e)))})})},isSameEntry:void 0}}function pE(s,e,t){try{return t===void 0&&(t=void 0),async function*(){let i=()=>`${e}/${s.name}`;if(s.kind==="file"){let n=await s.getFile();n!=null?(n.relativePath=e?i():null,yield n):t!=null&&(yield t)}else if(s.kind==="directory")for await(let n of s.values())yield*pE(n,e?i():s.name);else t!=null&&(yield t)}()}catch(i){return Promise.reject(i)}}async function*Sm(s,e){let t=await Promise.all(Array.from(s.items,async i=>{var n;let r,o=()=>typeof i.getAsEntry=="function"?i.getAsEntry():i.webkitGetAsEntry();return(n=r)!=null||(r=hE(o(),e)),{fileSystemHandle:r,lastResortFile:i.getAsFile()}}));for(let{lastResortFile:i,fileSystemHandle:n}of t)if(n!=null)try{yield*pE(n,"",i)}catch(r){i!=null?yield i:e(r)}else i!=null&&(yield i)}function Am(s){let e=sn(s.files);return Promise.resolve(e)}async function Tm(s,e){var t;let i=(t=e?.logDropError)!=null?t:Function.prototype;try{let n=[];for await(let r of Sm(s,i))n.push(r);return n}catch{return Am(s)}}var jE=Ue(kt(),1);function Xa(s){return{...s,type:s.mimeType,extension:s.name?$n(s.name).extension:null}}var Ka,nt,xm,fE,Ja=0,SE=[],ht=qe,mE=ht.__b,gE=ht.__r,vE=ht.diffed,bE=ht.__c,yE=ht.unmount,wE=ht.__;function Pm(s,e){ht.__h&&ht.__h(nt,s,Ja||e),Ja=0;var t=nt.__H||(nt.__H={__:[],__h:[]});return s>=t.__.length&&t.__.push({}),t.__[s]}function Zi(s){return Ja=1,WL(TE,s)}function WL(s,e,t){var i=Pm(Ka++,2);if(i.t=s,!i.__c&&(i.__=[t?t(e):TE(void 0,e),function(a){var l=i.__N?i.__N[0]:i.__[0],c=i.t(l,a);l!==c&&(i.__N=[c,i.__[1]],i.__c.setState({}))}],i.__c=nt,!nt.u)){var n=function(a,l,c){if(!i.__c.__H)return!0;var u=i.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!r||r.call(this,a,l,c);var h=!1;return u.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(h=!0)}}),!(!h&&i.__c.props===a)&&(!r||r.call(this,a,l,c))};nt.u=!0;var r=nt.shouldComponentUpdate,o=nt.componentWillUpdate;nt.componentWillUpdate=function(a,l,c){if(this.__e){var u=r;r=void 0,n(a,l,c),r=u}o&&o.call(this,a,l,c)},nt.shouldComponentUpdate=n}return i.__N||i.__}function As(s,e){var t=Pm(Ka++,3);!ht.__s&&AE(t.__H,e)&&(t.__=s,t.i=e,nt.__H.__h.push(t))}function ju(s){return Ja=5,Zn(function(){return{current:s}},[])}function Zn(s,e){var t=Pm(Ka++,7);return AE(t.__H,e)&&(t.__=s(),t.__H=e,t.__h=s),t.__}function fo(s,e){return Ja=8,Zn(function(){return s},e)}function GL(){for(var s;s=SE.shift();)if(s.__P&&s.__H)try{s.__H.__h.forEach(Uu),s.__H.__h.forEach(Cm),s.__H.__h=[]}catch(e){s.__H.__h=[],ht.__e(e,s.__v)}}ht.__b=function(s){nt=null,mE&&mE(s)},ht.__=function(s,e){s&&e.__k&&e.__k.__m&&(s.__m=e.__k.__m),wE&&wE(s,e)},ht.__r=function(s){gE&&gE(s),Ka=0;var e=(nt=s.__c).__H;e&&(xm===nt?(e.__h=[],nt.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.i=t.__N=void 0})):(e.__h.forEach(Uu),e.__h.forEach(Cm),e.__h=[],Ka=0)),xm=nt},ht.diffed=function(s){vE&&vE(s);var e=s.__c;e&&e.__H&&(e.__H.__h.length&&(SE.push(e)!==1&&fE===ht.requestAnimationFrame||((fE=ht.requestAnimationFrame)||YL)(GL)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.i=void 0})),xm=nt=null},ht.__c=function(s,e){e.some(function(t){try{t.__h.forEach(Uu),t.__h=t.__h.filter(function(i){return!i.__||Cm(i)})}catch(i){e.some(function(n){n.__h&&(n.__h=[])}),e=[],ht.__e(i,t.__v)}}),bE&&bE(s,e)},ht.unmount=function(s){yE&&yE(s);var e,t=s.__c;t&&t.__H&&(t.__H.__.forEach(function(i){try{Uu(i)}catch(n){e=n}}),t.__H=void 0,e&&ht.__e(e,t.__v))};var EE=typeof requestAnimationFrame=="function";function YL(s){var e,t=function(){clearTimeout(i),EE&&cancelAnimationFrame(e),setTimeout(s)},i=setTimeout(t,100);EE&&(e=requestAnimationFrame(t))}function Uu(s){var e=nt,t=s.__c;typeof t=="function"&&(s.__c=void 0,t()),nt=e}function Cm(s){var e=nt;s.__c=s.__(),nt=e}function AE(s,e){return!s||s.length!==e.length||e.some(function(t,i){return t!==s[i]})}function TE(s,e){return typeof e=="function"?e(s):e}function XL(){return m("svg",{width:"26",height:"26",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg"},m("g",{fill:"none","fill-rule":"evenodd"},m("circle",{fill:"#FFF",cx:"13",cy:"13",r:"13"}),m("path",{d:"M21.64 13.205c0-.639-.057-1.252-.164-1.841H13v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4","fill-rule":"nonzero"}),m("path",{d:"M13 22c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H4.957v2.332A8.997 8.997 0 0013 22z",fill:"#34A853","fill-rule":"nonzero"}),m("path",{d:"M7.964 14.71A5.41 5.41 0 017.682 13c0-.593.102-1.17.282-1.71V8.958H4.957A8.996 8.996 0 004 13c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05","fill-rule":"nonzero"}),m("path",{d:"M13 7.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C17.463 4.891 15.426 4 13 4a8.997 8.997 0 00-8.043 4.958l3.007 2.332C8.672 9.163 10.656 7.58 13 7.58z",fill:"#EA4335","fill-rule":"nonzero"}),m("path",{d:"M4 4h18v18H4z"})))}function KL(s){let{pluginName:e,i18n:t,onAuth:i}=s,n=e==="Google Drive",r=fo(o=>{o.preventDefault(),i()},[i]);return m("form",{onSubmit:r},n?m("button",{type:"submit",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn uppy-Provider-btn-google","data-uppy-super-focusable":!0},m(XL,null),t("signInWithGoogle")):m("button",{type:"submit",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn","data-uppy-super-focusable":!0},t("authenticateWith",{pluginName:e})))}var JL=s=>{let{pluginName:e,i18n:t,onAuth:i}=s;return m(KL,{pluginName:e,i18n:t,onAuth:i})};function _m(s){let{loading:e,pluginName:t,pluginIcon:i,i18n:n,handleAuth:r,renderForm:o=JL}=s;return m("div",{className:"uppy-Provider-auth"},m("div",{className:"uppy-Provider-authIcon"},i()),m("div",{className:"uppy-Provider-authTitle"},n("authenticateWithTitle",{pluginName:t})),m("div",{className:"uppy-Provider-authForm"},o({pluginName:t,i18n:n,loading:e,onAuth:r})))}var xE=Ue(kt(),1);function Om(s){let{i18n:e,logout:t,username:i}=s;return m(Yt,null,i&&m("span",{className:"uppy-ProviderBrowser-user",key:"username"},i),m("button",{type:"button",onClick:t,className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowser-userLogout",key:"logout"},e("logOut")))}function Mm(s){let{openFolder:e,title:t,breadcrumbsIcon:i,breadcrumbs:n,i18n:r}=s;return m("div",{className:"uppy-Provider-breadcrumbs"},m("div",{className:"uppy-Provider-breadcrumbsIcon"},i),n.map((o,a)=>{var l;return m(Yt,null,m("button",{key:o.id,type:"button",className:"uppy-u-reset uppy-c-btn",onClick:()=>e(o.id)},o.type==="root"?t:(l=o.data.name)!=null?l:r("unnamed")),n.length===a+1?"":" / ")}))}function Lm(s){return m("div",{className:"uppy-ProviderBrowser-header"},m("div",{className:(0,xE.default)("uppy-ProviderBrowser-headerBar",!s.showBreadcrumbs&&"uppy-ProviderBrowser-headerBar--simple")},s.showBreadcrumbs&&m(Mm,{openFolder:s.openFolder,breadcrumbs:s.breadcrumbs,breadcrumbsIcon:s.pluginIcon&&s.pluginIcon(),title:s.title,i18n:s.i18n}),m(Om,{logout:s.logout,username:s.username,i18n:s.i18n})))}function km(){return km=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},km.apply(null,arguments)}var ZL={position:"relative",width:"100%",minHeight:"100%"},QL={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"},Dm=class extends _t{constructor(e){super(e),this.handleScroll=()=>{this.setState({offset:this.base.scrollTop})},this.handleResize=()=>{this.resize()},this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){let{height:e}=this.state;e!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render(e){let{data:t,rowHeight:i,renderRow:n,overscanCount:r=10,...o}=e,{offset:a,height:l}=this.state,c=Math.floor(a/i),u=Math.floor(l/i);r&&(c=Math.max(0,c-c%r),u+=r);let h=c+u+4,f=t.slice(c,h),p={...ZL,height:t.length*i},g={...QL,top:c*i};return m("div",km({onScroll:this.handleScroll},o),m("div",{role:"presentation",style:p},m("div",{role:"presentation",style:g},f.map(n))))}},Vu=Dm;var CE=Ue(kt(),1);function ek(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:11,height:14.5,viewBox:"0 0 44 58"},m("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}))}function tk(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",style:{minWidth:16,marginRight:3},viewBox:"0 0 276.157 276.157"},m("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"}))}function ik(){return m("svg",{"aria-hidden":"true",focusable:"false",style:{width:16,marginRight:4},viewBox:"0 0 58 58"},m("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),m("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}))}function mo(s){let{itemIconString:e,alt:t=void 0}=s;if(e===null)return null;switch(e){case"file":return m(ek,null);case"folder":return m(tk,null);case"video":return m(ik,null);default:return m("img",{src:e,alt:t,referrerPolicy:"no-referrer",loading:"lazy",width:16,height:16})}}function sk(s){var e,t;let{file:i,toggleCheckbox:n,className:r,isDisabled:o,restrictionError:a,showTitles:l,children:c=null,i18n:u}=s;return m("li",{className:r,title:o&&a?a:void 0},m("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox uppy-ProviderBrowserItem-checkbox--grid",onChange:n,name:"listitem",id:i.id,checked:i.status==="checked",disabled:o,"data-uppy-super-focusable":!0}),m("label",{htmlFor:i.id,"aria-label":(e=i.data.name)!=null?e:u("unnamed"),className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},m(mo,{itemIconString:i.data.thumbnail||i.data.icon}),l&&((t=i.data.name)!=null?t:u("unnamed")),c))}var Im=sk;function Fm(s){var e,t,i;let{file:n,openFolder:r,className:o,isDisabled:a,restrictionError:l,toggleCheckbox:c,showTitles:u,i18n:h}=s;return m("li",{className:o,title:n.status!=="checked"&&l?l:void 0},m("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox",onChange:c,name:"listitem",id:n.id,checked:n.status==="checked","aria-label":n.data.isFolder?h("allFilesFromFolderNamed",{name:(e=n.data.name)!=null?e:h("unnamed")}):null,disabled:a,"data-uppy-super-focusable":!0}),n.data.isFolder?m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner",onClick:()=>r(n.id),"aria-label":h("openFolderNamed",{name:(t=n.data.name)!=null?t:h("unnamed")})},m("div",{className:"uppy-ProviderBrowserItem-iconWrap"},m(mo,{itemIconString:n.data.icon})),u&&n.data.name?m("span",null,n.data.name):h("unnamed")):m("label",{htmlFor:n.id,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},m("div",{className:"uppy-ProviderBrowserItem-iconWrap"},m(mo,{itemIconString:n.data.icon})),u&&((i=n.data.name)!=null?i:h("unnamed"))))}function Rm(s){let{viewType:e,toggleCheckbox:t,showTitles:i,i18n:n,openFolder:r,file:o}=s,a=o.type==="folder"?null:o.restrictionError,l=!!a&&o.status!=="checked",c={file:o,openFolder:r,toggleCheckbox:t,i18n:n,viewType:e,showTitles:i,className:(0,CE.default)("uppy-ProviderBrowserItem",{"uppy-ProviderBrowserItem--disabled":l},{"uppy-ProviderBrowserItem--noPreview":o.data.icon==="video"},{"uppy-ProviderBrowserItem--is-checked":o.status==="checked"},{"uppy-ProviderBrowserItem--is-partial":o.status==="partial"}),isDisabled:l,restrictionError:a};switch(e){case"grid":return m(Im,c);case"list":return m(Fm,c);case"unsplash":return m(Im,c,m("a",{href:`${o.data.author.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",className:"uppy-ProviderBrowserItem-author",tabIndex:-1},o.data.author.name));default:throw new Error(`There is no such type ${e}`)}}function nk(s){let{displayedPartialTree:e,viewType:t,toggleCheckbox:i,handleScroll:n,showTitles:r,i18n:o,isLoading:a,openFolder:l,noResultsLabel:c,virtualList:u}=s,[h,f]=Zi(!1);if(As(()=>{let g=A=>{A.key==="Shift"&&f(!1)},y=A=>{A.key==="Shift"&&f(!0)};return document.addEventListener("keyup",g),document.addEventListener("keydown",y),()=>{document.removeEventListener("keyup",g),document.removeEventListener("keydown",y)}},[]),a)return m("div",{className:"uppy-Provider-loading"},typeof a=="string"?a:o("loading"));if(e.length===0)return m("div",{className:"uppy-Provider-empty"},c);let p=g=>m(Rm,{viewType:t,toggleCheckbox:y=>{var A;y.stopPropagation(),y.preventDefault(),(A=document.getSelection())==null||A.removeAllRanges(),i(g,h)},showTitles:r,i18n:o,openFolder:l,file:g});return u?m("div",{className:"uppy-ProviderBrowser-body"},m("ul",{className:"uppy-ProviderBrowser-list"},m(Vu,{data:e,renderRow:p,rowHeight:31}))):m("div",{className:"uppy-ProviderBrowser-body"},m("ul",{className:"uppy-ProviderBrowser-list",onScroll:n,role:"listbox",tabIndex:-1},e.map(p)))}var qu=nk;var rk=(s,e,t,i,n)=>{let r=e.filter(p=>p.isFolder===!0),o=e.filter(p=>p.isFolder===!1),a=t.type==="folder"&&t.status==="checked",l=r.map(p=>({type:"folder",id:p.requestPath,cached:!1,nextPagePath:null,status:a?"checked":"unchecked",parentId:t.id,data:p})),c=o.map(p=>{let g=n(p);return{type:"file",id:p.requestPath,restrictionError:g,status:a&&!g?"checked":"unchecked",parentId:t.id,data:p}}),u={...t,cached:!0,nextPagePath:i};return[...s.map(p=>p.id===u.id?u:p),...l,...c]},PE=rk;var ok=(s,e,t,i,n)=>{let r=s.find(g=>g.id===e),o=t.filter(g=>g.isFolder===!0),a=t.filter(g=>g.isFolder===!1),l={...r,nextPagePath:i},c=s.map(g=>g.id===l.id?l:g),u=l.type==="folder"&&l.status==="checked",h=o.map(g=>({type:"folder",id:g.requestPath,cached:!1,nextPagePath:null,status:u?"checked":"unchecked",parentId:l.id,data:g})),f=a.map(g=>{let y=n(g);return{type:"file",id:g.requestPath,restrictionError:y,status:u&&!y?"checked":"unchecked",parentId:l.id,data:g}});return[...c,...h,...f]},_E=ok;var ak=s=>s.map(e=>({...e})),Wu=ak;var Nm=(s,e,t)=>{s.filter(n=>n.type!=="root"&&n.parentId===e).forEach(n=>{n.status=t&&!(n.type==="file"&&n.restrictionError)?"checked":"unchecked",Nm(s,n.id,t)})},Bm=(s,e)=>{let t=s.find(o=>o.id===e);if(t.type==="root")return;let i=s.filter(o=>o.type!=="root"&&o.parentId===t.id&&!(o.type==="file"&&o.restrictionError)),n=i.every(o=>o.status==="checked"),r=i.every(o=>o.status==="unchecked");n?t.status="checked":r?t.status="unchecked":t.status="partial",Bm(s,t.parentId)},lk=(s,e)=>{let t=Wu(s);if(e.length>=2){let i=t.filter(n=>n.type!=="root"&&e.includes(n.id));i.forEach(n=>{n.type==="file"?n.status=n.restrictionError?"unchecked":"checked":n.status="checked"}),i.forEach(n=>{Nm(t,n.id,!0)}),Bm(t,i[0].parentId)}else{let i=t.find(n=>n.id===e[0]);i.status=i.status==="checked"?"unchecked":"checked",Nm(t,i.id,i.status==="checked"),Bm(t,i.parentId)}return t},OE=lk;var $m=Ue(LE(),1);var Qa=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Hm=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},kE=s=>globalThis.DOMException===void 0?new Hm(s):new DOMException(s),DE=s=>{let e=s.reason===void 0?kE("This operation was aborted."):s.reason;return e instanceof Error?e:kE(e)};function Um(s,e){let{milliseconds:t,fallback:i,message:n,customTimers:r={setTimeout,clearTimeout}}=e,o,l=new Promise((c,u)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(e.signal){let{signal:f}=e;f.aborted&&u(DE(f)),f.addEventListener("abort",()=>{u(DE(f))})}if(t===Number.POSITIVE_INFINITY){s.then(c,u);return}let h=new Qa;o=r.setTimeout.call(void 0,()=>{if(i){try{c(i())}catch(f){u(f)}return}typeof s.cancel=="function"&&s.cancel(),n===!1?c():n instanceof Error?u(n):(h.message=n??`Promise timed out after ${t} milliseconds`,u(h))},t),(async()=>{try{c(await s)}catch(f){u(f)}})()}).finally(()=>{l.clear()});return l.clear=()=>{r.clearTimeout.call(void 0,o),o=void 0},l}function jm(s,e,t){let i=0,n=s.length;for(;n>0;){let r=Math.trunc(n/2),o=i+r;t(s[o],e)<=0?(i=++o,n-=r+1):n=r}return i}var el=class{#e=[];enqueue(e,t){t={priority:0,...t};let i={priority:t.priority,run:e};if(this.size&&this.#e[this.size-1].priority>=t.priority){this.#e.push(i);return}let n=jm(this.#e,i,(r,o)=>o.priority-r.priority);this.#e.splice(n,0,i)}dequeue(){return this.#e.shift()?.run}filter(e){return this.#e.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this.#e.length}};var tl=class extends $m.default{#e;#t;#i=0;#a;#l;#o=0;#s;#c;#n;#p;#r=0;#d;#u;#f;timeout;constructor(e){if(super(),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:el,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#e=e.carryoverConcurrencyCount,this.#t=e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,this.#a=e.intervalCap,this.#l=e.interval,this.#n=new e.queueClass,this.#p=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#f=e.throwOnTimeout===!0,this.#u=e.autoStart===!1}get#h(){return this.#t||this.#i<this.#a}get#y(){return this.#r<this.#d}#m(){this.#r--,this.#v(),this.emit("next")}#b(){this.#A(),this.#S(),this.#c=void 0}get#g(){let e=Date.now();if(this.#s===void 0){let t=this.#o-e;if(t<0)this.#i=this.#e?this.#r:0;else return this.#c===void 0&&(this.#c=setTimeout(()=>{this.#b()},t)),!0}return!1}#v(){if(this.#n.size===0)return this.#s&&clearInterval(this.#s),this.#s=void 0,this.emit("empty"),this.#r===0&&this.emit("idle"),!1;if(!this.#u){let e=!this.#g;if(this.#h&&this.#y){let t=this.#n.dequeue();return t?(this.emit("active"),t(),e&&this.#S(),!0):!1}}return!1}#S(){this.#t||this.#s!==void 0||(this.#s=setInterval(()=>{this.#A()},this.#l),this.#o=Date.now()+this.#l)}#A(){this.#i===0&&this.#r===0&&this.#s&&(clearInterval(this.#s),this.#s=void 0),this.#i=this.#e?this.#r:0,this.#w()}#w(){for(;this.#v(););}get concurrency(){return this.#d}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#d=e,this.#w()}async#T(e){return new Promise((t,i)=>{e.addEventListener("abort",()=>{i(e.reason)},{once:!0})})}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:this.#f,...t},new Promise((i,n)=>{this.#n.enqueue(async()=>{this.#r++,this.#i++;try{t.signal?.throwIfAborted();let r=e({signal:t.signal});t.timeout&&(r=Um(Promise.resolve(r),{milliseconds:t.timeout})),t.signal&&(r=Promise.race([r,this.#T(t.signal)]));let o=await r;i(o),this.emit("completed",o)}catch(r){if(r instanceof Qa&&!t.throwOnTimeout){i();return}n(r),this.emit("error",r)}finally{this.#m()}},t),this.emit("add"),this.#v()})}async addAll(e,t){return Promise.all(e.map(async i=>this.add(i,t)))}start(){return this.#u?(this.#u=!1,this.#w(),this):this}pause(){this.#u=!0}clear(){this.#n=new this.#p}async onEmpty(){this.#n.size!==0&&await this.#E("empty")}async onSizeLessThan(e){this.#n.size<e||await this.#E("next",()=>this.#n.size<e)}async onIdle(){this.#r===0&&this.#n.size===0||await this.#E("idle")}async#E(e,t){return new Promise(i=>{let n=()=>{t&&!t()||(this.off(e,n),i())};this.on(e,n)})}get size(){return this.#n.size}sizeBy(e){return this.#n.filter(e).length}get pending(){return this.#r}get isPaused(){return this.#u}};var IE=async(s,e,t,i,n)=>{let r=[],o=t.cached?t.nextPagePath:t.id;for(;o;){let h=await i(o);r=r.concat(h.items),o=h.nextPagePath}let a=r.filter(h=>h.isFolder===!0),l=r.filter(h=>h.isFolder===!1),c=a.map(h=>({type:"folder",id:h.requestPath,cached:!1,nextPagePath:null,status:"checked",parentId:t.id,data:h})),u=l.map(h=>{let f=n(h);return{type:"file",id:h.requestPath,restrictionError:f,status:f?"unchecked":"checked",parentId:t.id,data:h}});t.cached=!0,t.nextPagePath=null,e.push(...u,...c),c.forEach(async h=>{s.add(()=>IE(s,e,h,i,n))})},dk=async(s,e,t,i)=>{let n=new tl({concurrency:6}),r=Wu(s);return r.filter(a=>a.type==="folder"&&a.status==="checked"&&(a.cached===!1||a.nextPagePath)).forEach(a=>{n.add(()=>IE(n,r,a,e,t))}),n.on("completed",()=>{let a=r.filter(l=>l.type==="file"&&l.status==="checked").length;i(a)}),await n.onIdle(),r},FE=dk;var Qn={afterOpenFolder:PE,afterScrollFolder:_E,afterToggleCheckbox:OE,afterFill:FE};var hk=s=>{let{scrollHeight:e,scrollTop:t,offsetHeight:i}=s.target;return e-(t+i)<50},Yu=hk;var pk=s=>e=>{if(!e.isAuthError){if(e.name==="AbortError"){s.log("Aborting request","warning");return}s.log(e,"error"),e.name==="UserFacingApiError"&&s.info({message:s.i18n("companionError"),details:s.i18n(e.message)},"warning",5e3)}},Ts=pk;var fk=(s,e,t,i)=>{let n=e.findIndex(r=>r.id===i);if(n!==-1&&t){let r=e.findIndex(a=>a.id===s);return e.slice(Math.min(n,r),Math.max(n,r)+1).map(a=>a.id)}return[s]},Xu=fk;function mk(s){let{searchString:e,setSearchString:t,submitSearchString:i,wrapperClassName:n,inputClassName:r,inputLabel:o,clearSearchLabel:a="",showButton:l=!1,buttonLabel:c="",buttonCSSClassName:u=""}=s,h=g=>{t(g.target.value)},f=fo(g=>{g.preventDefault(),i()},[i]),[p]=Zi(()=>{let g=document.createElement("form");return g.setAttribute("tabindex","-1"),g.id=en(),g});return As(()=>(document.body.appendChild(p),p.addEventListener("submit",f),()=>{p.removeEventListener("submit",f),document.body.removeChild(p)}),[p,f]),m("section",{className:n},m("input",{className:`uppy-u-reset ${r}`,type:"search","aria-label":o,placeholder:o,value:e,onInput:h,form:p.id,"data-uppy-super-focusable":!0}),!l&&m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-ProviderBrowser-searchFilterIcon",width:"12",height:"12",viewBox:"0 0 12 12"},m("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})),!l&&e&&m("button",{className:"uppy-u-reset uppy-ProviderBrowser-searchFilterReset",type:"button","aria-label":a,title:a,onClick:()=>t("")},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",viewBox:"0 0 19 19"},m("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))),l&&m("button",{className:`uppy-u-reset uppy-c-btn uppy-c-btn-primary ${u}`,type:"submit",form:p.id},c))}var il=mk;var NE=Ue(kt(),1);var gk=s=>s.filter(t=>t.type==="file"&&t.status==="checked"?!0:t.type==="folder"&&t.status==="checked"?!s.some(n=>n.type!=="root"&&n.parentId===t.id):!1).length,RE=gk;function sl(s){let{cancelSelection:e,donePicking:t,i18n:i,partialTree:n,validateAggregateRestrictions:r}=s,o=Zn(()=>r(n),[n,r]),a=Zn(()=>RE(n),[n]);return a===0?null:m("div",{className:"uppy-ProviderBrowser-footer"},m("div",{className:"uppy-ProviderBrowser-footer-buttons"},m("button",{className:(0,NE.default)("uppy-u-reset uppy-c-btn uppy-c-btn-primary",{"uppy-c-btn--disabled":o}),disabled:!!o,onClick:t,type:"button"},i("selectX",{smart_count:a})),m("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link",onClick:e,type:"button"},i("cancel"))),o&&m("div",{className:"uppy-ProviderBrowser-footer-error"},o))}var vk=(s,e,t)=>{var i,n;return{id:s.id,source:e.id,name:s.name||s.id,type:s.mimeType,isRemote:!0,data:s,preview:s.thumbnail||void 0,meta:{authorName:(i=s.author)==null?void 0:i.name,authorUrl:(n=s.author)==null?void 0:n.url,relativePath:s.relDirPath||null,absolutePath:s.absDirPath},body:{fileId:s.id},remote:{companionUrl:e.opts.companionUrl,url:`${t.fileUrl(s.requestPath)}`,body:{fileId:s.id},providerName:t.name,provider:t.provider,requestClientId:t.provider}}},BE=vk;var bk=(s,e,t)=>{let i=s.map(o=>BE(o,e,t)),n=[],r=[];i.forEach(o=>{e.uppy.checkIfFileAlreadyExists(vu(o,e.uppy.getID()))?r.push(o):n.push(o)}),n.length>0&&e.uppy.info(e.uppy.i18n("addedNumFiles",{numFiles:n.length})),r.length>0&&e.uppy.info(`Not adding ${r.length} files because they already exist`),e.uppy.addFiles(n)},Ku=bk;var zE=(s,e,t)=>{let i=e===null?"null":e;if(t[i])return t[i];let n=s.find(o=>o.id===e);if(n.type==="root")return[];let r=[...zE(s,n.parentId,t),n];return t[i]=r,r},yk=s=>{let e=Object.create(null);return s.filter(n=>n.type==="file"&&n.status==="checked").map(n=>{let r=zE(s,n.id,e),o=r.findIndex(u=>u.type==="folder"&&u.status==="checked"),a=r.slice(o),l=`/${r.map(u=>u.data.name).join("/")}`,c=a.length===1?void 0:a.map(u=>u.data.name).join("/");return{...n.data,absDirPath:l,relDirPath:c}})},Ju=yk;var wk=(s,e)=>{let t=s.find(n=>n.id===e),i=[];for(;i=[t,...i],t.type!=="root";){let n=t.parentId;t=s.find(r=>r.id===n)}return i},$E=wk;function nn(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var Ek=0;function UE(s){return"__private_"+Ek+++"_"+s}var Sk={version:"4.0.0"};function nl(){return m("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},m("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}var HE=s=>({authenticated:void 0,partialTree:[{type:"root",id:s,cached:!1,nextPagePath:null}],currentFolderId:s,searchString:"",didFirstRender:!1,username:null,loading:!1}),er=UE("abortController"),Ri=UE("withAbort"),go=class{constructor(e,t){Object.defineProperty(this,Ri,{value:Ak}),this.isHandlingScroll=!1,this.lastCheckbox=null,Object.defineProperty(this,er,{writable:!0,value:void 0}),this.validateSingleFile=n=>{let r=Xa(n);return this.plugin.uppy.validateSingleFile(r)},this.getDisplayedPartialTree=()=>{let{partialTree:n,currentFolderId:r,searchString:o}=this.plugin.getPluginState(),a=n.filter(c=>c.type!=="root"&&c.parentId===r);return o===""?a:a.filter(c=>{var u;return((u=c.data.name)!=null?u:this.plugin.uppy.i18n("unnamed")).toLowerCase().indexOf(o.toLowerCase())!==-1})},this.validateAggregateRestrictions=n=>{let o=n.filter(a=>a.type==="file"&&a.status==="checked").map(a=>a.data);return this.plugin.uppy.validateAggregateRestrictions(o)},this.plugin=e,this.provider=t.provider;let i={viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0,loadAllFiles:!1,virtualList:!1};this.opts={...i,...t},this.openFolder=this.openFolder.bind(this),this.logout=this.logout.bind(this),this.handleAuth=this.handleAuth.bind(this),this.handleScroll=this.handleScroll.bind(this),this.resetPluginState=this.resetPluginState.bind(this),this.donePicking=this.donePicking.bind(this),this.render=this.render.bind(this),this.cancelSelection=this.cancelSelection.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.resetPluginState(),this.plugin.uppy.on("dashboard:close-panel",this.resetPluginState),this.plugin.uppy.registerRequestClient(this.provider.provider,this.provider)}resetPluginState(){this.plugin.setPluginState(HE(this.plugin.rootFolderId))}tearDown(){}setLoading(e){this.plugin.setPluginState({loading:e})}cancelSelection(){let{partialTree:e}=this.plugin.getPluginState(),t=e.map(i=>i.type==="root"?i:{...i,status:"unchecked"});this.plugin.setPluginState({partialTree:t})}async openFolder(e){this.lastCheckbox=null;let{partialTree:t}=this.plugin.getPluginState(),i=t.find(n=>n.id===e);if(i.cached){this.plugin.setPluginState({currentFolderId:e,searchString:""});return}this.setLoading(!0),await nn(this,Ri)[Ri](async n=>{let r=e,o=[];do{let{username:l,nextPagePath:c,items:u}=await this.provider.list(r,{signal:n});this.plugin.setPluginState({username:l}),r=c,o=o.concat(u),this.setLoading(this.plugin.uppy.i18n("loadedXFiles",{numFiles:o.length}))}while(this.opts.loadAllFiles&&r);let a=Qn.afterOpenFolder(t,o,i,r,this.validateSingleFile);this.plugin.setPluginState({partialTree:a,currentFolderId:e,searchString:""})}).catch(Ts(this.plugin.uppy)),this.setLoading(!1)}async logout(){await nn(this,Ri)[Ri](async e=>{let t=await this.provider.logout({signal:e});if(t.ok){if(!t.revoked){let i=this.plugin.uppy.i18n("companionUnauthorizeHint",{provider:this.plugin.title,url:t.manual_revoke_url});this.plugin.uppy.info(i,"info",7e3)}this.plugin.setPluginState({...HE(this.plugin.rootFolderId),authenticated:!1})}}).catch(Ts(this.plugin.uppy))}async handleAuth(e){await nn(this,Ri)[Ri](async t=>{this.setLoading(!0),await this.provider.login({authFormData:e,signal:t}),this.plugin.setPluginState({authenticated:!0}),await Promise.all([this.provider.fetchPreAuthToken(),this.openFolder(this.plugin.rootFolderId)])}).catch(Ts(this.plugin.uppy)),this.setLoading(!1)}async handleScroll(e){let{partialTree:t,currentFolderId:i}=this.plugin.getPluginState(),n=t.find(r=>r.id===i);Yu(e)&&!this.isHandlingScroll&&n.nextPagePath&&(this.isHandlingScroll=!0,await nn(this,Ri)[Ri](async r=>{let{nextPagePath:o,items:a}=await this.provider.list(n.nextPagePath,{signal:r}),l=Qn.afterScrollFolder(t,i,a,o,this.validateSingleFile);this.plugin.setPluginState({partialTree:l})}).catch(Ts(this.plugin.uppy)),this.isHandlingScroll=!1)}async donePicking(){let{partialTree:e}=this.plugin.getPluginState();this.setLoading(!0),await nn(this,Ri)[Ri](async t=>{let i=await Qn.afterFill(e,o=>this.provider.list(o,{signal:t}),this.validateSingleFile,o=>{this.setLoading(this.plugin.uppy.i18n("addedNumFiles",{numFiles:o}))});if(this.validateAggregateRestrictions(i)){this.plugin.setPluginState({partialTree:i});return}let r=Ju(i);Ku(r,this.plugin,this.provider),this.resetPluginState()}).catch(Ts(this.plugin.uppy)),this.setLoading(!1)}toggleCheckbox(e,t){let{partialTree:i}=this.plugin.getPluginState(),n=Xu(e.id,this.getDisplayedPartialTree(),t,this.lastCheckbox),r=Qn.afterToggleCheckbox(i,n);this.plugin.setPluginState({partialTree:r}),this.lastCheckbox=e.id}render(e,t){t===void 0&&(t={});let{didFirstRender:i}=this.plugin.getPluginState(),{i18n:n}=this.plugin.uppy;i||(this.plugin.setPluginState({didFirstRender:!0}),this.provider.fetchPreAuthToken(),this.openFolder(this.plugin.rootFolderId));let r={...this.opts,...t},{authenticated:o,loading:a}=this.plugin.getPluginState(),l=this.plugin.icon||nl;if(o===!1)return m(_m,{pluginName:this.plugin.title,pluginIcon:l,handleAuth:this.handleAuth,i18n:this.plugin.uppy.i18nArray,renderForm:r.renderAuthForm,loading:a});let{partialTree:c,currentFolderId:u,username:h,searchString:f}=this.plugin.getPluginState(),p=$E(c,u);return m("div",{className:(0,jE.default)("uppy-ProviderBrowser",`uppy-ProviderBrowser-viewType--${r.viewType}`)},m(Lm,{showBreadcrumbs:r.showBreadcrumbs,openFolder:this.openFolder,breadcrumbs:p,pluginIcon:l,title:this.plugin.title,logout:this.logout,username:h,i18n:n}),r.showFilter&&m(il,{searchString:f,setSearchString:g=>{this.plugin.setPluginState({searchString:g})},submitSearchString:()=>{},inputLabel:n("filter"),clearSearchLabel:n("resetFilter"),wrapperClassName:"uppy-ProviderBrowser-searchFilter",inputClassName:"uppy-ProviderBrowser-searchFilterInput"}),m(qu,{toggleCheckbox:this.toggleCheckbox,displayedPartialTree:this.getDisplayedPartialTree(),openFolder:this.openFolder,virtualList:r.virtualList,noResultsLabel:n("noFilesFound"),handleScroll:this.handleScroll,viewType:r.viewType,showTitles:r.showTitles,i18n:this.plugin.uppy.i18n,isLoading:a}),m(sl,{partialTree:c,donePicking:this.donePicking,cancelSelection:this.cancelSelection,i18n:n,validateAggregateRestrictions:this.validateAggregateRestrictions}))}};async function Ak(s){var e;(e=nn(this,er)[er])==null||e.abort();let t=new AbortController;nn(this,er)[er]=t;let i=()=>{t.abort()};try{this.plugin.uppy.on("dashboard:close-panel",i),this.plugin.uppy.on("cancel-all",i),await s(t.signal)}finally{this.plugin.uppy.off("dashboard:close-panel",i),this.plugin.uppy.off("cancel-all",i),nn(this,er)[er]=void 0}}go.VERSION=Sk.version;var VE=Ue(kt(),1);var Tk={version:"4.0.0"},xk={loading:!1,searchString:"",partialTree:[{type:"root",id:null,cached:!1,nextPagePath:null}],currentFolderId:null,isInputMode:!0},vo=class{constructor(e,t){this.isHandlingScroll=!1,this.lastCheckbox=null,this.validateSingleFile=n=>{let r=Xa(n);return this.plugin.uppy.validateSingleFile(r)},this.getDisplayedPartialTree=()=>{let{partialTree:n}=this.plugin.getPluginState();return n.filter(r=>r.type!=="root")},this.setSearchString=n=>{this.plugin.setPluginState({searchString:n}),n===""&&this.plugin.setPluginState({partialTree:[]})},this.validateAggregateRestrictions=n=>{let o=n.filter(a=>a.type==="file"&&a.status==="checked").map(a=>a.data);return this.plugin.uppy.validateAggregateRestrictions(o)},this.plugin=e,this.provider=t.provider;let i={viewType:"grid",showTitles:!0,showFilter:!0};this.opts={...i,...t},this.setSearchString=this.setSearchString.bind(this),this.search=this.search.bind(this),this.resetPluginState=this.resetPluginState.bind(this),this.handleScroll=this.handleScroll.bind(this),this.donePicking=this.donePicking.bind(this),this.cancelSelection=this.cancelSelection.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.render=this.render.bind(this),this.resetPluginState(),this.plugin.uppy.on("dashboard:close-panel",this.resetPluginState),this.plugin.uppy.registerRequestClient(this.provider.provider,this.provider)}tearDown(){}setLoading(e){this.plugin.setPluginState({loading:e})}resetPluginState(){this.plugin.setPluginState(xk)}cancelSelection(){let{partialTree:e}=this.plugin.getPluginState(),t=e.map(i=>i.type==="root"?i:{...i,status:"unchecked"});this.plugin.setPluginState({partialTree:t})}async search(){let{searchString:e}=this.plugin.getPluginState();if(e!==""){this.setLoading(!0);try{let t=await this.provider.search(e),i=[{type:"root",id:null,cached:!1,nextPagePath:t.nextPageQuery},...t.items.map(n=>({type:"file",id:n.requestPath,status:"unchecked",parentId:null,data:n}))];this.plugin.setPluginState({partialTree:i,isInputMode:!1})}catch(t){Ts(this.plugin.uppy)(t)}this.setLoading(!1)}}async handleScroll(e){let{partialTree:t,searchString:i}=this.plugin.getPluginState(),n=t.find(r=>r.type==="root");if(Yu(e)&&!this.isHandlingScroll&&n.nextPagePath){this.isHandlingScroll=!0;try{let r=await this.provider.search(i,n.nextPagePath),o={...n,nextPagePath:r.nextPageQuery},a=t.filter(c=>c.type!=="root"),l=[o,...a,...r.items.map(c=>({type:"file",id:c.requestPath,status:"unchecked",parentId:null,data:c}))];this.plugin.setPluginState({partialTree:l})}catch(r){Ts(this.plugin.uppy)(r)}this.isHandlingScroll=!1}}async donePicking(){let{partialTree:e}=this.plugin.getPluginState(),t=Ju(e);Ku(t,this.plugin,this.provider),this.resetPluginState()}toggleCheckbox(e,t){let{partialTree:i}=this.plugin.getPluginState(),n=Xu(e.id,this.getDisplayedPartialTree(),t,this.lastCheckbox),r=Qn.afterToggleCheckbox(i,n);this.plugin.setPluginState({partialTree:r}),this.lastCheckbox=e.id}render(e,t){t===void 0&&(t={});let{isInputMode:i,searchString:n,loading:r,partialTree:o}=this.plugin.getPluginState(),{i18n:a}=this.plugin.uppy,l={...this.opts,...t};return i?m(il,{searchString:n,setSearchString:this.setSearchString,submitSearchString:this.search,inputLabel:a("enterTextToSearch"),buttonLabel:a("searchImages"),wrapperClassName:"uppy-SearchProvider",inputClassName:"uppy-c-textInput uppy-SearchProvider-input",showButton:!0,buttonCSSClassName:"uppy-SearchProvider-searchButton"}):m("div",{className:(0,VE.default)("uppy-ProviderBrowser",`uppy-ProviderBrowser-viewType--${l.viewType}`)},l.showFilter&&m(il,{searchString:n,setSearchString:this.setSearchString,submitSearchString:this.search,inputLabel:a("search"),clearSearchLabel:a("resetSearch"),wrapperClassName:"uppy-ProviderBrowser-searchFilter",inputClassName:"uppy-ProviderBrowser-searchFilterInput"}),m(qu,{toggleCheckbox:this.toggleCheckbox,displayedPartialTree:this.getDisplayedPartialTree(),handleScroll:this.handleScroll,openFolder:async()=>{},noResultsLabel:a("noSearchResults"),viewType:l.viewType,showTitles:l.showTitles,isLoading:r,i18n:a,virtualList:!1}),m(sl,{partialTree:o,donePicking:this.donePicking,cancelSelection:this.cancelSelection,i18n:a,validateAggregateRestrictions:this.validateAggregateRestrictions}))}};vo.VERSION=Tk.version;var qE=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Ck(s,e){return!!(s===e||qE(s)&&qE(e))}function Pk(s,e){if(s.length!==e.length)return!1;for(var t=0;t<s.length;t++)if(!Ck(s[t],e[t]))return!1;return!0}function Vm(s,e){e===void 0&&(e=Pk);var t=null;function i(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t&&t.lastThis===this&&e(n,t.lastArgs))return t.lastResult;var o=s.apply(this,n);return t={lastResult:o,lastArgs:n,lastThis:this},o}return i.clear=function(){t=null},i}var Zu=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function rl(s,e){if(e){let t=s.querySelector(`[data-uppy-paneltype="${e}"]`);if(t)return t}return s}function WE(s,e){let t=e[0];t&&(t.focus(),s.preventDefault())}function _k(s,e){let t=e[e.length-1];t&&(t.focus(),s.preventDefault())}function Ok(s){return s.contains(document.activeElement)}function qm(s,e,t){let i=rl(t,e),n=sn(i.querySelectorAll(Zu)),r=n.indexOf(document.activeElement);Ok(i)?s.shiftKey&&r===0?_k(s,n):!s.shiftKey&&r===n.length-1&&WE(s,n):WE(s,n)}function GE(s,e,t){e===null||qm(s,e,t)}var YE=Ue(Df(),1);function Wm(){let s=!1;return(0,YE.default)((t,i)=>{let n=rl(t,i),r=n.contains(document.activeElement);if(r&&s)return;let o=n.querySelector("[data-uppy-super-focusable]");if(!(r&&!o))if(o)o.focus({preventScroll:!0}),s=!0;else{let a=n.querySelector(Zu);a?.focus({preventScroll:!0}),s=!1}},260)}var h1=Ue(kt(),1);function Gm(){let s=document.body;return!(!("draggable"in s)||!("ondragstart"in s&&"ondrop"in s)||!("FormData"in window)||!("FileReader"in window))}var ZE=Ue(kt(),1);function XE(s,e){if(s===e)return!0;if(!s||!e)return!1;let t=Object.keys(s),i=Object.keys(e),n=t.length;if(i.length!==n)return!1;for(let r=0;r<n;r++){let o=t[r];if(s[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}function Lk(){return m("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},m("g",{fill:"#686DE0",fillRule:"evenodd"},m("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),m("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),m("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))}function kk(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},m("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))}function Dk(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},m("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))}function Ik(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},m("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))}function Fk(){return m("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},m("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}function Rk(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},m("g",{fill:"#A7AFB7",fillRule:"nonzero"},m("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),m("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))}function Nk(){return m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},m("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))}function tr(s){let e={color:"#838999",icon:Rk()};if(!s)return e;let t=s.split("/")[0],i=s.split("/")[1];return t==="text"?{color:"#5a5e69",icon:Nk()}:t==="image"?{color:"#686de0",icon:Lk()}:t==="audio"?{color:"#068dbb",icon:kk()}:t==="video"?{color:"#19af67",icon:Dk()}:t==="application"&&i==="pdf"?{color:"#e25149",icon:Ik()}:t==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(i)!==-1?{color:"#00C469",icon:Fk()}:e}function ol(s){let{file:e}=s;if(e.preview)return m("img",{className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});let{color:t,icon:i}=tr(e.type);return m("div",{className:"uppy-Dashboard-Item-previewIconWrap"},m("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:t}},i),m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},m("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}var Bk=(s,e)=>(typeof e=="function"?e():e).filter(n=>n.id===s)[0].name;function al(s){let{file:e,toggleFileCard:t,i18n:i,metaFields:n}=s,{missingRequiredMetaFields:r}=e;if(!(r!=null&&r.length))return null;let o=r.map(a=>Bk(a,n)).join(", ");return m("div",{className:"uppy-Dashboard-Item-errorMessage"},i("missingRequiredMetaFields",{smart_count:r.length,fields:o})," ",m("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>t(!0,e.id)},i("editFile")))}function Ym(s){let{file:e,i18n:t,toggleFileCard:i,metaFields:n,showLinkToFileUploadResult:r}=s,a=e.preview?"rgba(255, 255, 255, 0.5)":tr(e.type).color;return m("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:a}},r&&e.uploadURL&&m("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name},m("span",{hidden:!0},e.meta.name)),m(ol,{file:e}),m(al,{file:e,i18n:t,toggleFileCard:i,metaFields:n}))}function zk(s){if(!s.isUploaded){if(s.error&&!s.hideRetryButton){s.uppy.retryUpload(s.file.id);return}s.resumableUploads&&!s.hidePauseResumeButton?s.uppy.pauseResume(s.file.id):s.individualCancellation&&!s.hideCancelButton&&s.uppy.removeFile(s.file.id)}}function KE(s){return s.isUploaded?s.i18n("uploadComplete"):s.error?s.i18n("retryUpload"):s.resumableUploads?s.file.isPaused?s.i18n("resumeUpload"):s.i18n("pauseUpload"):s.individualCancellation?s.i18n("cancelUpload"):""}function Xm(s){return m("div",{className:"uppy-Dashboard-Item-progress"},m("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":KE(s),title:KE(s),onClick:()=>zk(s)},s.children))}function Qu(s){let{children:e}=s;return m("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},e)}function Km(s){let{progress:e}=s,t=2*Math.PI*15;return m("g",null,m("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),m("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":t,"stroke-dashoffset":t-t/100*e}))}function Jm(s){if(!s.file.progress.uploadStarted)return null;if(s.isUploaded)return m("div",{className:"uppy-Dashboard-Item-progress"},m("div",{className:"uppy-Dashboard-Item-progressIndicator"},m(Qu,null,m("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),m("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"}))));if(!s.recoveredState)return s.error&&!s.hideRetryButton?m(Xm,s,m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},m("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),m("path",{d:"M7.9 3H10v2H7.9z"}),m("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),m("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):s.resumableUploads&&!s.hidePauseResumeButton?m(Xm,s,m(Qu,null,m(Km,{progress:s.file.progress.percentage}),s.file.isPaused?m("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):m("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},m("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),m("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):!s.resumableUploads&&s.individualCancellation&&!s.hideCancelButton?m(Xm,s,m(Qu,null,m(Km,{progress:s.file.progress.percentage}),m("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):m("div",{className:"uppy-Dashboard-Item-progress"},m("div",{className:"uppy-Dashboard-Item-progressIndicator"},m(Qu,null,m(Km,{progress:s.file.progress.percentage}))))}var JE=Ue(bu(),1);var Zm="...";function ed(s,e){if(e===0)return"";if(s.length<=e)return s;if(e<=Zm.length+1)return`${s.slice(0,e-1)}\u2026`;let t=e-Zm.length,i=Math.ceil(t/2),n=Math.floor(t/2);return s.slice(0,i)+Zm+s.slice(-n)}var $k=s=>{let{author:e,name:t}=s.file.meta;function i(){return s.isSingleFile&&s.containerHeight>=350?90:s.containerWidth<=352?35:s.containerWidth<=576?60:e?20:30}return m("div",{className:"uppy-Dashboard-Item-name",title:t},ed(t,i()))},Hk=s=>{var e;let{author:t}=s.file.meta,i=(e=s.file.remote)==null?void 0:e.providerName,n="\xB7";return t?m("div",{className:"uppy-Dashboard-Item-author"},m("a",{href:`${t.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer"},ed(t.name,13)),i?m(Yt,null,` ${n} `,i,` ${n} `):null):null},Uk=s=>s.file.size&&m("div",{className:"uppy-Dashboard-Item-statusSize"},(0,JE.default)(s.file.size)),jk=s=>s.file.isGhost&&m("span",null," \u2022 ",m("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:s.toggleAddFilesPanel},s.i18n("reSelect"))),Vk=s=>{let{file:e,onClick:t}=s;return e.error?m("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:t,type:"button"},"?"):null};function Qm(s){let{file:e}=s;return m("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source},m("div",{className:"uppy-Dashboard-Item-fileName"},$k(s),m(Vk,{file:s.file,onClick:()=>alert(s.file.error)})),m("div",{className:"uppy-Dashboard-Item-status"},Hk(s),Uk(s),jk(s)),m(al,{file:s.file,i18n:s.i18n,toggleFileCard:s.toggleFileCard,metaFields:s.metaFields}))}function eg(s,e){return e===void 0&&(e="Copy the URL below"),new Promise(t=>{let i=document.createElement("textarea");i.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),i.value=s,document.body.appendChild(i),i.select();let n=()=>{document.body.removeChild(i),window.prompt(e,s),t()};try{return document.execCommand("copy")?(document.body.removeChild(i),t()):n()}catch{return document.body.removeChild(i),n()}})}function qk(s){let{file:e,uploadInProgressOrComplete:t,metaFields:i,canEditFile:n,i18n:r,onClick:o}=s;return!t&&i&&i.length>0||!t&&n(e)?m("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":r("editFileWithFilename",{file:e.meta.name}),title:r("editFileWithFilename",{file:e.meta.name}),onClick:()=>o()},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},m("g",{fillRule:"evenodd"},m("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),m("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),m("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function Wk(s){let{i18n:e,onClick:t,file:i}=s;return m("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:i.meta.name}),title:e("removeFile",{file:i.meta.name}),onClick:()=>t()},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},m("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),m("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}var Gk=(s,e)=>{eg(e.file.uploadURL,e.i18n("copyLinkToClipboardFallback")).then(()=>{e.uppy.log("Link copied to clipboard."),e.uppy.info(e.i18n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.uppy.log).then(()=>s.target.focus({preventScroll:!0}))};function Yk(s){let{i18n:e}=s;return m("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":e("copyLink"),title:e("copyLink"),onClick:t=>Gk(t,s)},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},m("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function tg(s){let{uppy:e,file:t,uploadInProgressOrComplete:i,canEditFile:n,metaFields:r,showLinkToFileUploadResult:o,showRemoveButton:a,i18n:l,toggleFileCard:c,openFileEditor:u}=s;return m("div",{className:"uppy-Dashboard-Item-actionWrapper"},m(qk,{i18n:l,file:t,uploadInProgressOrComplete:i,canEditFile:n,metaFields:r,onClick:()=>{r&&r.length>0?c(!0,t.id):u(t)}}),o&&t.uploadURL?m(Yk,{file:t,uppy:e,i18n:l}):null,a?m(Wk,{i18n:l,file:t,uppy:e,onClick:()=>e.removeFile(t.id,"removed-by-user")}):null)}var ll=class extends _t{componentDidMount(){let{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!XE(this.props,e)}componentDidUpdate(){let{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){let{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){let{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,i=e.progress.uploadComplete&&!t&&!e.error,n=e.progress.uploadStarted||t,r=e.progress.uploadStarted&&!e.progress.uploadComplete||t,o=e.error||!1,{isGhost:a}=e,l=(this.props.individualCancellation||!r)&&!i;i&&this.props.showRemoveButtonAfterComplete&&(l=!0);let c=(0,ZE.default)({"uppy-Dashboard-Item":!0,"is-inprogress":r&&!this.props.recoveredState,"is-processing":t,"is-complete":i,"is-error":!!o,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":a});return m("div",{className:c,id:`uppy_${e.id}`,role:this.props.role},m("div",{className:"uppy-Dashboard-Item-preview"},m(Ym,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),m(Jm,{uppy:this.props.uppy,file:e,error:o,isUploaded:i,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,showRemoveButtonAfterComplete:this.props.showRemoveButtonAfterComplete,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),m("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},m(Qm,{file:e,id:this.props.id,acquirers:this.props.acquirers,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),m(tg,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:l,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:n,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}};function Xk(s,e){let t=[],i=[];return s.forEach(n=>{i.length<e?i.push(n):(t.push(i),i=[n])}),i.length&&t.push(i),t}function ig(s){let{id:e,error:t,i18n:i,uppy:n,files:r,acquirers:o,resumableUploads:a,hideRetryButton:l,hidePauseResumeButton:c,hideCancelButton:u,showLinkToFileUploadResult:h,showRemoveButtonAfterComplete:f,isWide:p,metaFields:g,isSingleFile:y,toggleFileCard:A,handleRequestThumbnail:S,handleCancelThumbnail:O,recoveredState:I,individualCancellation:F,itemsPerRow:H,openFileEditor:U,canEditFile:W,toggleAddFilesPanel:J,containerWidth:oe,containerHeight:G}=s,ae=H===1?71:200,pe=Zn(()=>{let te=(T,D)=>r[D].isGhost-r[T].isGhost,$=Object.keys(r);return I&&$.sort(te),Xk($,H)},[r,H,I]),ue=te=>m("div",{class:"uppy-Dashboard-filesInner",role:"presentation",key:te[0]},te.map($=>m(ll,{key:$,uppy:n,id:e,error:t,i18n:i,acquirers:o,resumableUploads:a,individualCancellation:F,hideRetryButton:l,hidePauseResumeButton:c,hideCancelButton:u,showLinkToFileUploadResult:h,showRemoveButtonAfterComplete:f,isWide:p,metaFields:g,recoveredState:I,isSingleFile:y,containerWidth:oe,containerHeight:G,toggleFileCard:A,handleRequestThumbnail:S,handleCancelThumbnail:O,role:"listitem",openFileEditor:U,canEditFile:W,toggleAddFilesPanel:J,file:r[$]})));return y?m("div",{class:"uppy-Dashboard-files"},ue(pe[0])):m(Vu,{class:"uppy-Dashboard-files",role:"list",data:pe,renderRow:ue,rowHeight:ae})}var sg=class extends _t{constructor(){super(...arguments),this.triggerFileInputClick=()=>{this.fileInput.click()},this.triggerFolderInputClick=()=>{this.folderInput.click()},this.triggerVideoCameraInputClick=()=>{this.mobileVideoFileInput.click()},this.triggerPhotoCameraInputClick=()=>{this.mobilePhotoFileInput.click()},this.onFileInputChange=e=>{this.props.handleInputChange(e),e.target.value=null},this.renderHiddenInput=(e,t)=>m("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes,ref:t}),this.renderHiddenCameraInput=(e,t,i)=>{let r={photo:"image/*",video:"video/*"}[e];return m("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:t,accept:r,ref:i})},this.renderMyDeviceAcquirer=()=>m("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick},m("div",{className:"uppy-DashboardTab-inner"},m("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},m("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"}))),m("div",{className:"uppy-DashboardTab-name"},this.props.i18n("myDevice")))),this.renderPhotoCamera=()=>m("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera"},m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick},m("div",{className:"uppy-DashboardTab-inner"},m("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},m("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"}))),m("div",{className:"uppy-DashboardTab-name"},this.props.i18n("takePictureBtn")))),this.renderVideoCamera=()=>m("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera"},m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick},m("div",{className:"uppy-DashboardTab-inner"},m("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32"},m("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "}))),m("div",{className:"uppy-DashboardTab-name"},this.props.i18n("recordVideoBtn")))),this.renderBrowseButton=(e,t)=>{let i=this.props.acquirers.length;return m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:t,"data-uppy-super-focusable":i===0},e)},this.renderDropPasteBrowseTagline=e=>{let t=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),i=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),n=this.props.fileManagerSelectionType,r=n.charAt(0).toUpperCase()+n.slice(1);return m("div",{class:"uppy-Dashboard-AddFiles-title"},this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${r}`,{browseFiles:t,browseFolders:i,browse:t}):this.props.i18nArray(`dropPaste${r}`,{browseFiles:t,browseFolders:i,browse:t}))},this.renderAcquirer=e=>{var t;return m("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id},m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":((t=this.props.activePickerPanel)==null?void 0:t.id)===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id)},m("div",{className:"uppy-DashboardTab-inner"},e.icon()),m("div",{className:"uppy-DashboardTab-name"},e.name)))},this.renderAcquirers=e=>{let t=[...e],i=t.splice(e.length-2,e.length);return m(Yt,null,t.map(n=>this.renderAcquirer(n)),m("span",{role:"presentation",style:{"white-space":"nowrap"}},i.map(n=>this.renderAcquirer(n))))},this.renderSourcesList=(e,t)=>{let{showNativePhotoCameraButton:i,showNativeVideoCameraButton:n}=this.props,r=[],o="myDevice";t||r.push({key:o,elements:this.renderMyDeviceAcquirer()}),i&&r.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),n&&r.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),r.push(...e.map(h=>({key:h.id,elements:this.renderAcquirer(h)}))),r.length===1&&r[0].key===o&&(r=[]);let l=[...r],c=l.splice(r.length-2,r.length),u=h=>h.map(f=>{let{key:p,elements:g}=f;return m(Yt,{key:p},g)});return m(Yt,null,this.renderDropPasteBrowseTagline(r.length),m("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},u(l),m("span",{role:"presentation",style:{"white-space":"nowrap"}},u(c))))}}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){let{i18nArray:e}=this.props,t=m("span",null,m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},m("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),m("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy")),i=e("poweredBy",{uppy:t});return m("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},i)}render(){let{showNativePhotoCameraButton:e,showNativeVideoCameraButton:t,nativeCameraFacingMode:i}=this.props;return m("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,n=>{this.fileInput=n}),this.renderHiddenInput(!0,n=>{this.folderInput=n}),e&&this.renderHiddenCameraInput("photo",i,n=>{this.mobilePhotoFileInput=n}),t&&this.renderHiddenCameraInput("video",i,n=>{this.mobileVideoFileInput=n}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),m("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&m("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy(this.props)))}},td=sg;var QE=Ue(kt(),1);var Kk=s=>m("div",{className:(0,QE.default)("uppy-Dashboard-AddFilesPanel",s.className),"data-uppy-panelType":"AddFiles","aria-hidden":!s.showAddFilesPanel},m("div",{className:"uppy-DashboardContent-bar"},m("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},s.i18n("addingMoreFiles")),m("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>s.toggleAddFilesPanel(!1)},s.i18n("back"))),m(td,s)),e1=Kk;var t1=Ue(kt(),1);function Jk(s){let{tagName:e}=s.target;if(e==="INPUT"||e==="TEXTAREA"){s.stopPropagation();return}s.preventDefault(),s.stopPropagation()}var Qi=Jk;function Zk(s){let{activePickerPanel:e,className:t,hideAllPanels:i,i18n:n,state:r,uppy:o}=s;return m("div",{className:(0,t1.default)("uppy-DashboardContent-panel",t),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${e.id}`,onDragOver:Qi,onDragLeave:Qi,onDrop:Qi,onPaste:Qi},m("div",{className:"uppy-DashboardContent-bar"},m("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},n("importFrom",{name:e.name})),m("button",{className:"uppy-DashboardContent-back",type:"button",onClick:i},n("cancel"))),m("div",{className:"uppy-DashboardContent-panelBody"},o.getPlugin(e.id).render(r)))}var i1=Zk;var s1=Ue(kt(),1);function Qk(s){let e=s.files[s.fileCardFor],t=()=>{s.uppy.emit("file-editor:cancel",e),s.closeFileEditor()};return m("div",{className:(0,s1.default)("uppy-DashboardContent-panel",s.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},m("div",{className:"uppy-DashboardContent-bar"},m("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},s.i18nArray("editing",{file:m("span",{className:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),m("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t},s.i18n("cancel")),m("button",{className:"uppy-DashboardContent-save",type:"button",onClick:s.saveFileEditor},s.i18n("save"))),m("div",{className:"uppy-DashboardContent-panelBody"},s.editors.map(i=>s.uppy.getPlugin(i.id).render(s.state))))}var n1=Qk;var es={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function eD(s,e,t,i){if(i===void 0&&(i={}),s)return es.STATE_ERROR;if(e)return es.STATE_COMPLETE;if(t)return es.STATE_PAUSED;let n=es.STATE_WAITING,r=Object.keys(i);for(let o=0;o<r.length;o++){let{progress:a}=i[r[o]];if(a.uploadStarted&&!a.uploadComplete)return es.STATE_UPLOADING;a.preprocess&&n!==es.STATE_UPLOADING&&(n=es.STATE_PREPROCESSING),a.postprocess&&n!==es.STATE_UPLOADING&&n!==es.STATE_PREPROCESSING&&(n=es.STATE_POSTPROCESSING)}return n}function tD(s){let{files:e,i18n:t,isAllComplete:i,isAllErrored:n,isAllPaused:r,inProgressNotPausedFiles:o,newFiles:a,processingFiles:l}=s;switch(eD(n,i,r,e)){case"uploading":return t("uploadingXFiles",{smart_count:o.length});case"preprocessing":case"postprocessing":return t("processingXFiles",{smart_count:l.length});case"paused":return t("uploadPaused");case"waiting":return t("xFilesSelected",{smart_count:a.length});case"complete":return t("uploadComplete");case"error":return t("error");default:}}function iD(s){let{i18n:e,isAllComplete:t,hideCancelButton:i,maxNumberOfFiles:n,toggleAddFilesPanel:r,uppy:o}=s,{allowNewUpload:a}=s;return a&&n&&(a=s.totalFileCount<s.maxNumberOfFiles),m("div",{className:"uppy-DashboardContent-bar"},!t&&!i?m("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>o.cancelAll()},e("cancel")):m("div",null),m("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},m(tD,s)),a?m("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>r(!0)},m("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},m("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),m("span",{className:"uppy-DashboardContent-addMoreCaption"},e("addMore"))):m("div",null))}var r1=iD;var o1=Ue(kt(),1);function ng(s){let{computedMetaFields:e,requiredMetaFields:t,updateMeta:i,form:n,formState:r}=s,o={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(a=>{let l=`uppy-Dashboard-FileCard-input-${a.id}`,c=t.includes(a.id);return m("fieldset",{key:a.id,className:"uppy-Dashboard-FileCard-fieldset"},m("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:l},a.name),a.render!==void 0?a.render({value:r[a.id],onChange:u=>i(u,a.id),fieldCSSClasses:o,required:c,form:n.id},m):m("input",{className:o.text,id:l,form:n.id,type:a.type||"text",required:c,value:r[a.id],placeholder:a.placeholder,onInput:u=>i(u.target.value,a.id),"data-uppy-super-focusable":!0}))})}function rg(s){var e;let{files:t,fileCardFor:i,toggleFileCard:n,saveFileCard:r,metaFields:o,requiredMetaFields:a,openFileEditor:l,i18n:c,i18nArray:u,className:h,canEditFile:f}=s,p=()=>typeof o=="function"?o(t[i]):o,g=t[i],y=(e=p())!=null?e:[],A=f(g),S={};y.forEach(J=>{var oe;S[J.id]=(oe=g.meta[J.id])!=null?oe:""});let[O,I]=Zi(S),F=fo(J=>{J.preventDefault(),r(O,i)},[r,O,i]),H=(J,oe)=>{I({...O,[oe]:J})},U=()=>{n(!1)},[W]=Zi(()=>{let J=document.createElement("form");return J.setAttribute("tabindex","-1"),J.id=en(),J});return As(()=>(document.body.appendChild(W),W.addEventListener("submit",F),()=>{W.removeEventListener("submit",F),document.body.removeChild(W)}),[W,F]),m("div",{className:(0,o1.default)("uppy-Dashboard-FileCard",h),"data-uppy-panelType":"FileCard",onDragOver:Qi,onDragLeave:Qi,onDrop:Qi,onPaste:Qi},m("div",{className:"uppy-DashboardContent-bar"},m("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},u("editing",{file:m("span",{className:"uppy-DashboardContent-titleFile"},g.meta?g.meta.name:g.name)})),m("button",{className:"uppy-DashboardContent-back",type:"button",form:W.id,title:c("finishEditingFile"),onClick:U},c("cancel"))),m("div",{className:"uppy-Dashboard-FileCard-inner"},m("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:tr(g.type).color}},m(ol,{file:g}),A&&m("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:J=>{F(J),l(g)}},c("editImage"))),m("div",{className:"uppy-Dashboard-FileCard-info"},m(ng,{computedMetaFields:y,requiredMetaFields:a,updateMeta:H,form:W,formState:O})),m("div",{className:"uppy-Dashboard-FileCard-actions"},m("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:W.id},c("saveChanges")),m("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:U,form:W.id},c("cancel")))))}var l1=Ue(kt(),1),bo="uppy-transition-slideDownUp",a1=250;function sD(s){let{children:e}=s,[t,i]=Zi(null),[n,r]=Zi(""),o=ju(),a=ju(),l=ju(),c=()=>{r(`${bo}-enter`),cancelAnimationFrame(l.current),clearTimeout(a.current),a.current=void 0,l.current=requestAnimationFrame(()=>{r(`${bo}-enter ${bo}-enter-active`),o.current=setTimeout(()=>{r("")},a1)})},u=()=>{r(`${bo}-leave`),cancelAnimationFrame(l.current),clearTimeout(o.current),o.current=void 0,l.current=requestAnimationFrame(()=>{r(`${bo}-leave ${bo}-leave-active`),a.current=setTimeout(()=>{i(null),r("")},a1)})};return As(()=>{let h=Ji(e)[0];t!==h&&(h&&!t?c():t&&!h&&!a.current&&u(),i(h))},[e,t]),As(()=>()=>{clearTimeout(o.current),clearTimeout(a.current),cancelAnimationFrame(l.current)},[]),t?xu(t,{className:(0,l1.default)(n,t.props.className)}):null}var cl=sD;function ir(){return ir=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(s[i]=t[i])}return s},ir.apply(null,arguments)}var c1=900,u1=700,og=576,d1=330;function ag(s){let e=s.totalFileCount===0,t=s.totalFileCount===1,i=s.containerWidth>og,n=s.containerHeight>d1,r=(0,h1.default)({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":s.disabled,"uppy-Dashboard--animateOpenClose":s.animateOpenClose,"uppy-Dashboard--isClosing":s.isClosing,"uppy-Dashboard--isDraggingOver":s.isDraggingOver,"uppy-Dashboard--modal":!s.inline,"uppy-size--md":s.containerWidth>og,"uppy-size--lg":s.containerWidth>u1,"uppy-size--xl":s.containerWidth>c1,"uppy-size--height-md":s.containerHeight>d1,"uppy-Dashboard--isAddFilesPanelVisible":s.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":s.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":s.singleFileFullScreen&&t&&n}),o=1;s.containerWidth>c1?o=5:s.containerWidth>u1?o=4:s.containerWidth>og&&(o=3);let a=s.showSelectedFiles&&!e,l=s.recoveredState?Object.keys(s.recoveredState.files).length:null,c=s.files?Object.keys(s.files).filter(f=>s.files[f].isGhost).length:null,u=()=>c>0?s.i18n("recoveredXFiles",{smart_count:c}):s.i18n("recoveredAllFiles");return m("div",{className:r,"data-uppy-theme":s.theme,"data-uppy-num-acquirers":s.acquirers.length,"data-uppy-drag-drop-supported":!s.disableLocalFiles&&Gm(),"aria-hidden":s.inline?"false":s.isHidden,"aria-disabled":s.disabled,"aria-label":s.inline?s.i18n("dashboardTitle"):s.i18n("dashboardWindowTitle"),onPaste:s.handlePaste,onDragOver:s.handleDragOver,onDragLeave:s.handleDragLeave,onDrop:s.handleDrop},m("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:s.handleClickOutside}),m("div",{className:"uppy-Dashboard-inner","aria-modal":!s.inline&&"true",role:s.inline?void 0:"dialog",style:{width:s.inline&&s.width?s.width:"",height:s.inline&&s.height?s.height:""}},s.inline?null:m("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":s.i18n("closeModal"),title:s.i18n("closeModal"),onClick:s.closeModal},m("span",{"aria-hidden":"true"},"\xD7")),m("div",{className:"uppy-Dashboard-innerWrap"},m("div",{className:"uppy-Dashboard-dropFilesHereHint"},s.i18n("dropHint")),a&&m(r1,s),l&&m("div",{className:"uppy-Dashboard-serviceMsg"},m("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},m("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},m("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),m("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),m("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),m("strong",{className:"uppy-Dashboard-serviceMsg-title"},s.i18n("sessionRestored")),m("div",{className:"uppy-Dashboard-serviceMsg-text"},u())),a?m(ig,{id:s.id,error:s.error,i18n:s.i18n,uppy:s.uppy,files:s.files,acquirers:s.acquirers,resumableUploads:s.resumableUploads,hideRetryButton:s.hideRetryButton,hidePauseResumeButton:s.hidePauseResumeButton,hideCancelButton:s.hideCancelButton,showLinkToFileUploadResult:s.showLinkToFileUploadResult,showRemoveButtonAfterComplete:s.showRemoveButtonAfterComplete,isWide:s.isWide,metaFields:s.metaFields,toggleFileCard:s.toggleFileCard,handleRequestThumbnail:s.handleRequestThumbnail,handleCancelThumbnail:s.handleCancelThumbnail,recoveredState:s.recoveredState,individualCancellation:s.individualCancellation,openFileEditor:s.openFileEditor,canEditFile:s.canEditFile,toggleAddFilesPanel:s.toggleAddFilesPanel,isSingleFile:t,itemsPerRow:o}):m(td,ir({},s,{isSizeMD:i})),m(cl,null,s.showAddFilesPanel?m(e1,ir({key:"AddFiles"},s,{isSizeMD:i})):null),m(cl,null,s.fileCardFor?m(rg,ir({key:"FileCard"},s)):null),m(cl,null,s.activePickerPanel?m(i1,ir({key:"Picker"},s)):null),m(cl,null,s.showFileEditor?m(n1,ir({key:"Editor"},s)):null),m("div",{className:"uppy-Dashboard-progressindicators"},s.progressindicators.map(f=>s.uppy.getPlugin(f.id).render(s.state))))))}var p1={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}};function Me(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var nD=0;function Tt(s){return"__private_"+nD+++"_"+s}var rD={version:"4.0.1"},lg=Vm.default||Vm,f1=9,oD=27;function m1(){let s={};return s.promise=new Promise((e,t)=>{s.resolve=e,s.reject=t}),s}var aD={target:"body",metaFields:[],inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:nl,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,doneButtonHandler:void 0,onRequestCloseModal:null},sr=Tt("disabledNodes"),xs=Tt("generateLargeThumbnailIfSingleFile"),ul=Tt("openFileEditorWhenFilesAdded"),nr=Tt("attachRenderFunctionToTarget"),cg=Tt("isTargetSupported"),ug=Tt("getAcquirers"),dg=Tt("getProgressIndicators"),Cs=Tt("getEditors"),hg=Tt("addSpecifiedPluginsFromOptions"),pg=Tt("autoDiscoverPlugins"),rr=Tt("addSupportedPluginIfNoTarget"),dl=Tt("getStatusBarOpts"),hl=Tt("getThumbnailGeneratorOpts"),fg=Tt("getInformerOpts"),pl=Tt("getStatusBarId"),fl=Tt("getThumbnailGeneratorId"),mg=Tt("getInformerId"),or=class extends Ii{constructor(e,t){var i,n,r;let o=(i=t?.autoOpen)!=null?i:null;super(e,{...aD,...t,autoOpen:o}),Object.defineProperty(this,mg,{value:pD}),Object.defineProperty(this,fl,{value:hD}),Object.defineProperty(this,pl,{value:dD}),Object.defineProperty(this,fg,{value:uD}),Object.defineProperty(this,hl,{value:cD}),Object.defineProperty(this,dl,{value:lD}),Object.defineProperty(this,sr,{writable:!0,value:void 0}),this.modalName=`uppy-Dashboard-${en()}`,this.superFocus=Wm(),this.ifFocusedOnUppyRecently=!1,this.removeTarget=a=>{let c=this.getPluginState().targets.filter(u=>u.id!==a.id);this.setPluginState({targets:c})},this.addTarget=a=>{let l=a.id||a.constructor.name,c=a.title||l,u=a.type;if(u!=="acquirer"&&u!=="progressindicator"&&u!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;let h={id:l,name:c,type:u},p=this.getPluginState().targets.slice();return p.push(h),this.setPluginState({targets:p}),this.el},this.hideAllPanels=()=>{var a;let l=this.getPluginState(),c={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};l.activePickerPanel===c.activePickerPanel&&l.showAddFilesPanel===c.showAddFilesPanel&&l.showFileEditor===c.showFileEditor&&l.activeOverlayType===c.activeOverlayType||(this.setPluginState(c),this.uppy.emit("dashboard:close-panel",(a=l.activePickerPanel)==null?void 0:a.id))},this.showPanel=a=>{let{targets:l}=this.getPluginState(),c=l.find(u=>u.type==="acquirer"&&u.id===a);this.setPluginState({activePickerPanel:c,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",a)},this.canEditFile=a=>{let{targets:l}=this.getPluginState();return Me(this,Cs)[Cs](l).some(u=>this.uppy.getPlugin(u.id).canEditFile(a))},this.openFileEditor=a=>{let{targets:l}=this.getPluginState(),c=Me(this,Cs)[Cs](l);this.setPluginState({showFileEditor:!0,fileCardFor:a.id||null,activeOverlayType:"FileEditor"}),c.forEach(u=>{this.uppy.getPlugin(u.id).selectFile(a)})},this.closeFileEditor=()=>{let{metaFields:a}=this.getPluginState();a&&a.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})},this.saveFileEditor=()=>{let{targets:a}=this.getPluginState();Me(this,Cs)[Cs](a).forEach(c=>{this.uppy.getPlugin(c.id).save()}),this.closeFileEditor()},this.openModal=()=>{let{promise:a,resolve:l}=m1();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){let c=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",c,!1),l()};this.el.addEventListener("animationend",c,!1)}else this.setPluginState({isHidden:!1}),l();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),a},this.closeModal=a=>{var l;let c=(l=a?.manualClose)!=null?l:!0,{isHidden:u,isClosing:h}=this.getPluginState();if(u||h)return;let{promise:f,resolve:p}=m1();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});let y=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",y,!1),p()};this.el.addEventListener("animationend",y,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),p();if(document.removeEventListener("keydown",this.handleKeyDownInModal),c&&this.opts.browserBackButtonClose){var g;(g=history.state)!=null&&g[this.modalName]&&history.back()}return this.uppy.emit("dashboard:modal-closed"),f},this.isModalOpen=()=>!this.getPluginState().isHidden||!1,this.requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal(),this.setDarkModeCapability=a=>{let{capabilities:l}=this.uppy.getState();this.uppy.setState({capabilities:{...l,darkMode:a}})},this.handleSystemDarkModeChange=a=>{let l=a.matches;this.uppy.log(`[Dashboard] Dark mode is ${l?"on":"off"}`),this.setDarkModeCapability(l)},this.toggleFileCard=(a,l)=>{let c=this.uppy.getFile(l);a?this.uppy.emit("dashboard:file-edit-start",c):this.uppy.emit("dashboard:file-edit-complete",c),this.setPluginState({fileCardFor:a?l:null,activeOverlayType:a?"FileCard":null})},this.toggleAddFilesPanel=a=>{this.setPluginState({showAddFilesPanel:a,activeOverlayType:a?"AddFiles":null})},this.addFiles=a=>{let l=a.map(c=>({source:this.id,name:c.name,type:c.type,data:c,meta:{relativePath:c.relativePath||c.webkitRelativePath||null}}));try{this.uppy.addFiles(l)}catch(c){this.uppy.log(c)}},this.startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(a=>{let l=a[0],{width:c,height:u}=l.contentRect;this.setPluginState({containerWidth:c,containerHeight:u,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{let a=this.getPluginState(),l=!this.opts.inline&&a.isHidden;!a.areInsidesReadyToBeVisible&&!l&&(this.uppy.log("[Dashboard] resize event didn\u2019t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)},this.stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)},this.recordIfFocusedOnUppyRecently=a=>{this.el.contains(a.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())},this.disableInteractiveElements=a=>{var l;let c=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],u=(l=Me(this,sr)[sr])!=null?l:sn(this.el.querySelectorAll(c)).filter(h=>!h.classList.contains("uppy-Dashboard-close"));for(let h of u)h.tagName==="A"?h.setAttribute("aria-disabled",a):h.disabled=a;a?Me(this,sr)[sr]=u:Me(this,sr)[sr]=null,this.dashboardIsDisabled=a},this.updateBrowserHistory=()=>{var a;(a=history.state)!=null&&a[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)},this.handlePopState=a=>{var l;this.isModalOpen()&&(!a.state||!a.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&(l=a.state)!=null&&l[this.modalName]&&history.back()},this.handleKeyDownInModal=a=>{a.keyCode===oD&&this.requestCloseModal(),a.keyCode===f1&&qm(a,this.getPluginState().activeOverlayType,this.el)},this.handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()},this.handlePaste=a=>{this.uppy.iteratePlugins(c=>{c.type==="acquirer"&&(c.handleRootPaste==null||c.handleRootPaste(a))});let l=sn(a.clipboardData.files);l.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(l))},this.handleInputChange=a=>{a.preventDefault();let l=sn(a.target.files);l.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(l))},this.handleDragOver=a=>{var l,c;a.preventDefault(),a.stopPropagation();let u=()=>{let g=!0;return this.uppy.iteratePlugins(y=>{y.canHandleRootDrop!=null&&y.canHandleRootDrop(a)&&(g=!0)}),g},h=()=>{let{types:g}=a.dataTransfer;return g.some(y=>y==="Files")},f=u(),p=h();if(!f&&!p||this.opts.disabled||this.opts.disableLocalFiles&&(p||!f)||!this.uppy.getState().allowNewUpload){a.dataTransfer.dropEffect="none";return}a.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),(l=(c=this.opts).onDragOver)==null||l.call(c,a)},this.handleDragLeave=a=>{var l,c;a.preventDefault(),a.stopPropagation(),this.setPluginState({isDraggingOver:!1}),(l=(c=this.opts).onDragLeave)==null||l.call(c,a)},this.handleDrop=async a=>{var l,c;a.preventDefault(),a.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(p=>{p.type==="acquirer"&&(p.handleRootDrop==null||p.handleRootDrop(a))});let u=!1,h=p=>{this.uppy.log(p,"error"),u||(this.uppy.info(p.message,"error"),u=!0)};this.uppy.log("[Dashboard] Processing dropped files");let f=await Tm(a.dataTransfer,{logDropError:h});f.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(f)),(l=(c=this.opts).onDrop)==null||l.call(c,a)},this.handleRequestThumbnail=a=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",a)},this.handleCancelThumbnail=a=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",a)},this.handleKeyDownInInline=a=>{a.keyCode===f1&&GE(a,this.getPluginState().activeOverlayType,this.el)},this.handlePasteOnBody=a=>{this.el.contains(document.activeElement)&&this.handlePaste(a)},this.handleComplete=a=>{let{failed:l}=a;this.opts.closeAfterFinish&&!(l!=null&&l.length)&&this.requestCloseModal()},this.handleCancelRestore=()=>{this.uppy.emit("restore-canceled")},Object.defineProperty(this,xs,{writable:!0,value:()=>{if(this.opts.disableThumbnailGenerator)return;let a=600,l=this.uppy.getFiles();if(l.length===1){let c=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);c?.setOptions({thumbnailWidth:a});let u={...l[0],preview:void 0};c?.requestThumbnail(u).then(()=>{c?.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}}}),Object.defineProperty(this,ul,{writable:!0,value:a=>{let l=a[0],{metaFields:c}=this.getPluginState(),u=c&&c.length>0,h=this.canEditFile(l);u&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,l.id):h&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(l)}}),this.initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){let a=Em(this.opts.trigger);a?a.forEach(l=>l.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",Me(this,rr)[rr]),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",Me(this,xs)[xs]),this.uppy.on("file-removed",Me(this,xs)[xs]),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",Me(this,ul)[ul])},this.removeEvents=()=>{let a=Em(this.opts.trigger);!this.opts.inline&&a&&a.forEach(l=>l.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",Me(this,rr)[rr]),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",Me(this,xs)[xs]),this.uppy.off("file-removed",Me(this,xs)[xs]),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",Me(this,ul)[ul])},this.superFocusOnEachUpdate=()=>{let a=this.el.contains(document.activeElement),l=document.activeElement===document.body||document.activeElement===null,c=this.uppy.getState().info.length===0,u=!this.opts.inline;c&&(u||a||l&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()},this.afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()},this.saveFileCard=(a,l)=>{this.uppy.setFileMeta(l,a),this.toggleFileCard(!1,l)},Object.defineProperty(this,nr,{writable:!0,value:a=>{let l=this.uppy.getPlugin(a.id);return{...a,icon:l.icon||this.opts.defaultPickerIcon,render:l.render}}}),Object.defineProperty(this,cg,{writable:!0,value:a=>{let l=this.uppy.getPlugin(a.id);return typeof l.isSupported!="function"?!0:l.isSupported()}}),Object.defineProperty(this,ug,{writable:!0,value:lg(a=>a.filter(l=>l.type==="acquirer"&&Me(this,cg)[cg](l)).map(Me(this,nr)[nr]))}),Object.defineProperty(this,dg,{writable:!0,value:lg(a=>a.filter(l=>l.type==="progressindicator").map(Me(this,nr)[nr]))}),Object.defineProperty(this,Cs,{writable:!0,value:lg(a=>a.filter(l=>l.type==="editor").map(Me(this,nr)[nr]))}),this.render=a=>{let l=this.getPluginState(),{files:c,capabilities:u,allowNewUpload:h}=a,{newFiles:f,uploadStartedFiles:p,completeFiles:g,erroredFiles:y,inProgressFiles:A,inProgressNotPausedFiles:S,processingFiles:O,isUploadStarted:I,isAllComplete:F,isAllPaused:H}=this.uppy.getObjectOfFilesPerState(),U=Me(this,ug)[ug](l.targets),W=Me(this,dg)[dg](l.targets),J=Me(this,Cs)[Cs](l.targets),oe;return this.opts.theme==="auto"?oe=u.darkMode?"dark":"light":oe=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),ag({state:a,isHidden:l.isHidden,files:c,newFiles:f,uploadStartedFiles:p,completeFiles:g,erroredFiles:y,inProgressFiles:A,inProgressNotPausedFiles:S,processingFiles:O,isUploadStarted:I,isAllComplete:F,isAllPaused:H,totalFileCount:Object.keys(c).length,totalProgress:a.totalProgress,allowNewUpload:h,acquirers:U,theme:oe,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:l.activePickerPanel,showFileEditor:l.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:l.isClosing,progressindicators:W,editors:J,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:a.recoveredState,metaFields:l.metaFields,resumableUploads:u.resumableUploads||!1,individualCancellation:u.individualCancellation,isMobileDevice:u.isMobileDevice,fileCardFor:l.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:l.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:l.containerWidth,containerHeight:l.containerHeight,areInsidesReadyToBeVisible:l.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:l.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})},Object.defineProperty(this,hg,{writable:!0,value:()=>{(this.opts.plugins||[]).forEach(l=>{let c=this.uppy.getPlugin(l);c?c.mount(this,c):this.uppy.log(`[Uppy] Dashboard could not find plugin '${l}', make sure to uppy.use() the plugins you are specifying`,"warning")})}}),Object.defineProperty(this,pg,{writable:!0,value:()=>{this.uppy.iteratePlugins(Me(this,rr)[rr])}}),Object.defineProperty(this,rr,{writable:!0,value:a=>{var l;let c=["acquirer","editor"];a&&!((l=a.opts)!=null&&l.target)&&c.includes(a.type)&&(this.getPluginState().targets.some(h=>a.id===h.id)||a.mount(this,a))}}),this.install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});let{inline:a,closeAfterFinish:l}=this.opts;if(a&&l)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");let{allowMultipleUploads:c,allowMultipleUploadBatches:u}=this.uppy.opts;(c||u)&&l&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");let{target:h}=this.opts;h&&this.mount(h,this),this.opts.disableStatusBar||this.uppy.use(Gn,{id:Me(this,pl)[pl](),target:this,...Me(this,dl)[dl]()}),this.opts.disableInformer||this.uppy.use(Yn,{id:Me(this,mg)[mg](),target:this,...Me(this,fg)[fg]()}),this.opts.disableThumbnailGenerator||this.uppy.use(po,{id:Me(this,fl)[fl](),...Me(this,hl)[hl]()}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;let f=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;if(this.uppy.log(`[Dashboard] Dark mode is ${f?"on":"off"}`),this.setDarkModeCapability(f),this.opts.theme==="auto"){var p;(p=this.darkModeMediaQuery)==null||p.addListener(this.handleSystemDarkModeChange)}Me(this,hg)[hg](),Me(this,pg)[pg](),this.initEvents()},this.uninstall=()=>{if(!this.opts.disableInformer){let c=this.uppy.getPlugin(`${this.id}:Informer`);c&&this.uppy.removePlugin(c)}if(!this.opts.disableStatusBar){let c=this.uppy.getPlugin(`${this.id}:StatusBar`);c&&this.uppy.removePlugin(c)}if(!this.opts.disableThumbnailGenerator){let c=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);c&&this.uppy.removePlugin(c)}if((this.opts.plugins||[]).forEach(c=>{let u=this.uppy.getPlugin(c);u&&u.unmount()}),this.opts.theme==="auto"){var l;(l=this.darkModeMediaQuery)==null||l.removeListener(this.handleSystemDarkModeChange)}this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()},this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=p1,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),(r=(n=this.opts).onRequestCloseModal)!=null||(n.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}setOptions(e){var t,i;super.setOptions(e),(t=this.uppy.getPlugin(Me(this,pl)[pl]()))==null||t.setOptions(Me(this,dl)[dl]()),(i=this.uppy.getPlugin(Me(this,fl)[fl]()))==null||i.setOptions(Me(this,hl)[hl]())}};function lD(){let{hideUploadButton:s,hideRetryButton:e,hidePauseResumeButton:t,hideCancelButton:i,showProgressDetails:n,hideProgressAfterFinish:r,locale:o,doneButtonHandler:a}=this.opts;return{hideUploadButton:s,hideRetryButton:e,hidePauseResumeButton:t,hideCancelButton:i,showProgressDetails:n,hideAfterFinish:r,locale:o,doneButtonHandler:a}}function cD(){let{thumbnailWidth:s,thumbnailHeight:e,thumbnailType:t,waitForThumbnailsBeforeUpload:i}=this.opts;return{thumbnailWidth:s,thumbnailHeight:e,thumbnailType:t,waitForThumbnailsBeforeUpload:i,lazy:!i}}function uD(){return{}}function dD(){return`${this.id}:StatusBar`}function hD(){return`${this.id}:ThumbnailGenerator`}function pD(){return`${this.id}:Informer`}or.VERSION=rD.version;var E1=Ue(g1(),1);function fD(s,e){let t=s.width/e.width,i=s.height/e.height,n=Math.min(t,i),r=e.width*n,o=e.height*n,a=(s.width-r)/2,l=(s.height-o)/2;return{width:r,height:o,left:a,top:l}}var v1=fD;function mD(s){return s*(Math.PI/180)}function gD(s,e,t){let i=Math.abs(mD(t));return Math.max((Math.sin(i)*s+Math.cos(i)*e)/e,(Math.sin(i)*e+Math.cos(i)*s)/s)}var b1=gD;function vD(s,e,t){return e.left<s.left?{left:s.left,width:t.width}:e.top<s.top?{top:s.top,height:t.height}:e.left+e.width>s.left+s.width?{left:s.left+s.width-t.width,width:t.width}:e.top+e.height>s.top+s.height?{top:s.top+s.height-t.height,height:t.height}:null}var y1=vD;function bD(s,e,t){return e.left<s.left?{left:s.left,width:t.left+t.width-s.left}:e.top<s.top?{top:s.top,height:t.top+t.height-s.top}:e.left+e.width>s.left+s.width?{left:t.left,width:s.left+s.width-t.left}:e.top+e.height>s.top+s.height?{top:t.top,height:s.top+s.height-t.top}:null}var w1=bD;var ml=class extends _t{constructor(e){super(e),this.onRotate90Deg=()=>{let{angle90Deg:t}=this.state,i=t-90;this.setState({angle90Deg:i,angleGranular:0}),this.cropper.scale(1),this.cropper.rotateTo(i);let n=this.cropper.getCanvasData(),r=this.cropper.getContainerData(),o=v1(r,n);this.cropper.setCanvasData(o),this.cropper.setCropBoxData(o)},this.onRotateGranular=t=>{let i=Number(t.target.value);this.setState({angleGranular:i});let{angle90Deg:n}=this.state,r=n+i;this.cropper.rotateTo(r);let o=this.cropper.getImageData(),a=b1(o.naturalWidth,o.naturalHeight,i),l=this.cropper.getImageData().scaleX<0?-a:a;this.cropper.scale(l,a)},this.state={angle90Deg:0,angleGranular:0,prevCropboxData:null},this.storePrevCropboxData=this.storePrevCropboxData.bind(this),this.limitCropboxMovement=this.limitCropboxMovement.bind(this)}componentDidMount(){let{opts:e,storeCropperInstance:t}=this.props;this.cropper=new E1.default(this.imgElement,e.cropperOptions),this.imgElement.addEventListener("cropstart",this.storePrevCropboxData),this.imgElement.addEventListener("cropend",this.limitCropboxMovement),t(this.cropper)}componentWillUnmount(){this.cropper.destroy(),this.imgElement.removeEventListener("cropstart",this.storePrevCropboxData),this.imgElement.removeEventListener("cropend",this.limitCropboxMovement)}storePrevCropboxData(){this.setState({prevCropboxData:this.cropper.getCropBoxData()})}limitCropboxMovement(e){let t=this.cropper.getCanvasData(),i=this.cropper.getCropBoxData(),{prevCropboxData:n}=this.state;if(e.detail.action==="all"){let r=y1(t,i,n);r&&this.cropper.setCropBoxData(r)}else{let r=w1(t,i,n);r&&this.cropper.setCropBoxData(r)}}renderGranularRotate(){let{i18n:e}=this.props,{angleGranular:t}=this.state;return m("label",{role:"tooltip","aria-label":`${t}\xBA`,"data-microtip-position":"top",className:"uppy-ImageCropper-rangeWrapper"},m("input",{className:"uppy-ImageCropper-range uppy-u-reset",type:"range",onInput:this.onRotateGranular,onChange:this.onRotateGranular,value:t,min:"-45",max:"45","aria-label":e("rotate")}))}renderRevert(){let{i18n:e,opts:t}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("revert"),onClick:()=>{this.cropper.reset(),this.cropper.setAspectRatio(t.cropperOptions.initialAspectRatio),this.setState({angle90Deg:0,angleGranular:0})}},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M0 0h24v24H0z",fill:"none"}),m("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})))}renderRotate(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("rotate"),onClick:this.onRotate90Deg},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"}),m("path",{d:"M14 10a2 2 0 012 2v7a2 2 0 01-2 2H6a2 2 0 01-2-2v-7a2 2 0 012-2h8zm0 1.75H6a.25.25 0 00-.243.193L5.75 12v7a.25.25 0 00.193.243L6 19.25h8a.25.25 0 00.243-.193L14.25 19v-7a.25.25 0 00-.193-.243L14 11.75zM12 .76V4c2.3 0 4.61.88 6.36 2.64a8.95 8.95 0 012.634 6.025L21 13a1 1 0 01-1.993.117L19 13h-.003a6.979 6.979 0 00-2.047-4.95 6.97 6.97 0 00-4.652-2.044L12 6v3.24L7.76 5 12 .76z"})))}renderFlip(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("flipHorizontal"),onClick:()=>this.cropper.scaleX(-this.cropper.getData().scaleX||-1)},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M0 0h24v24H0z",fill:"none"}),m("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"})))}renderZoomIn(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("zoomIn"),onClick:()=>this.cropper.zoom(.1)},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",height:"24",viewBox:"0 0 24 24",width:"24"},m("path",{d:"M0 0h24v24H0V0z",fill:"none"}),m("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),m("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})))}renderZoomOut(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("zoomOut"),onClick:()=>this.cropper.zoom(-.1)},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M0 0h24v24H0V0z",fill:"none"}),m("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})))}renderCropSquare(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("aspectRatioSquare"),onClick:()=>this.cropper.setAspectRatio(1)},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M0 0h24v24H0z",fill:"none"}),m("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})))}renderCropWidescreen(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("aspectRatioLandscape"),onClick:()=>this.cropper.setAspectRatio(16/9)},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M 19,4.9999992 V 17.000001 H 4.9999998 V 6.9999992 H 19 m 0,-2 H 4.9999998 c -1.0999999,0 -1.9999999,0.9000001 -1.9999999,2 V 17.000001 c 0,1.1 0.9,2 1.9999999,2 H 19 c 1.1,0 2,-0.9 2,-2 V 6.9999992 c 0,-1.0999999 -0.9,-2 -2,-2 z"}),m("path",{fill:"none",d:"M0 0h24v24H0z"})))}renderCropWidescreenVertical(){let{i18n:e}=this.props;return m("button",{role:"button tooltip","data-microtip-position":"top",type:"button","aria-label":e("aspectRatioPortrait"),className:"uppy-u-reset uppy-c-btn",onClick:()=>this.cropper.setAspectRatio(9/16)},m("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},m("path",{d:"M 19.000001,19 H 6.999999 V 5 h 10.000002 v 14 m 2,0 V 5 c 0,-1.0999999 -0.9,-1.9999999 -2,-1.9999999 H 6.999999 c -1.1,0 -2,0.9 -2,1.9999999 v 14 c 0,1.1 0.9,2 2,2 h 10.000002 c 1.1,0 2,-0.9 2,-2 z"}),m("path",{d:"M0 0h24v24H0z",fill:"none"})))}render(){let{currentImage:e,opts:t}=this.props,{actions:i}=t,n=URL.createObjectURL(e.data);return m("div",{className:"uppy-ImageCropper"},m("div",{className:"uppy-ImageCropper-container"},m("img",{className:"uppy-ImageCropper-image",alt:e.name,src:n,ref:r=>{this.imgElement=r}})),m("div",{className:"uppy-ImageCropper-controls"},i.revert&&this.renderRevert(),i.rotate&&this.renderRotate(),i.granularRotate&&this.renderGranularRotate(),i.flip&&this.renderFlip(),i.zoomIn&&this.renderZoomIn(),i.zoomOut&&this.renderZoomOut(),i.cropSquare&&this.renderCropSquare(),i.cropWidescreen&&this.renderCropWidescreen(),i.cropWidescreenVertical&&this.renderCropWidescreenVertical()))}};var S1={strings:{revert:"Reset",rotate:"Rotate 90\xB0",zoomIn:"Zoom in",zoomOut:"Zoom out",flipHorizontal:"Flip horizontally",aspectRatioSquare:"Crop square",aspectRatioLandscape:"Crop landscape (16:9)",aspectRatioPortrait:"Crop portrait (9:16)"}};var yD={version:"3.0.0"},A1={viewMode:0,background:!1,autoCropArea:1,responsive:!0,minCropBoxWidth:70,minCropBoxHeight:70,croppedCanvasOptions:{},initialAspectRatio:0},T1={revert:!0,rotate:!0,granularRotate:!0,flip:!0,zoomIn:!0,zoomOut:!0,cropSquare:!0,cropWidescreen:!0,cropWidescreenVertical:!0},wD={quality:.8,actions:T1,cropperOptions:A1},ar=class extends Ii{constructor(e,t){super(e,{...wD,...t,actions:{...T1,...t?.actions},cropperOptions:{...A1,...t?.cropperOptions}}),this.save=()=>{let i=o=>{var a;let{currentImage:l}=this.getPluginState();this.uppy.setFileState(l.id,{data:new File([o],(a=l.name)!=null?a:this.i18n("unnamed"),{type:o.type}),size:o.size,preview:void 0});let c=this.uppy.getFile(l.id);this.uppy.emit("thumbnail:request",c),this.setPluginState({currentImage:c}),this.uppy.emit("file-editor:complete",c)},{currentImage:n}=this.getPluginState(),r=this.cropper.getCroppedCanvas({});r.width%2!==0&&this.cropper.setData({width:r.width-1}),r.height%2!==0&&this.cropper.setData({height:r.height-1}),this.cropper.getCroppedCanvas(this.opts.cropperOptions.croppedCanvasOptions).toBlob(i,n.type,this.opts.quality)},this.storeCropperInstance=i=>{this.cropper=i},this.selectFile=i=>{this.uppy.emit("file-editor:start",i),this.setPluginState({currentImage:i})},this.id=this.opts.id||"ImageEditor",this.title="Image Editor",this.type="editor",this.defaultLocale=S1,this.i18nInit()}canEditFile(e){if(!e.type||e.isRemote)return!1;let t=e.type.split("/")[1];return!!/^(jpe?g|gif|png|bmp|webp)$/.test(t)}install(){this.setPluginState({currentImage:null});let{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){let{currentImage:e}=this.getPluginState();if(e){let t=this.uppy.getFile(e.id);this.uppy.emit("file-editor:cancel",t)}this.unmount()}render(){let{currentImage:e}=this.getPluginState();return e===null||e.isRemote?null:m(ml,{currentImage:e,storeCropperInstance:this.storeCropperInstance,save:this.save,opts:this.opts,i18n:this.i18n})}};ar.VERSION=yD.version;function Ps(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var ED=0;function x1(s){return"__private_"+ED+++"_"+s}var Ft=x1("uppy"),gl=x1("events"),vl=class{constructor(e){Object.defineProperty(this,Ft,{writable:!0,value:void 0}),Object.defineProperty(this,gl,{writable:!0,value:[]}),Ps(this,Ft)[Ft]=e}on(e,t){return Ps(this,gl)[gl].push([e,t]),Ps(this,Ft)[Ft].on(e,t)}remove(){for(let[e,t]of Ps(this,gl)[gl].splice(0))Ps(this,Ft)[Ft].off(e,t)}onFilePause(e,t){this.on("upload-pause",(i,n)=>{e===i?.id&&t(n)})}onFileRemove(e,t){this.on("file-removed",i=>{e===i.id&&t(i.id)})}onPause(e,t){this.on("upload-pause",(i,n)=>{e===i?.id&&t(n)})}onRetry(e,t){this.on("upload-retry",i=>{e===i?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{Ps(this,Ft)[Ft].getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{Ps(this,Ft)[Ft].getFile(e)&&t()})}onCancelAll(e,t){var i=this;this.on("cancel-all",function(){Ps(i,Ft)[Ft].getFile(e)&&t(...arguments)})}onResumeAll(e,t){this.on("resume-all",()=>{Ps(this,Ft)[Ft].getFile(e)&&t()})}};function be(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var SD=0;function Xt(s){return"__private_"+SD+++"_"+s}function AD(s){return new Error("Cancelled",{cause:s})}function C1(s){if(s!=null){var e;let t=()=>this.abort(s.reason);s.addEventListener("abort",t,{once:!0});let i=()=>{s.removeEventListener("abort",t)};(e=this.then)==null||e.call(this,i,i)}return this}var ci=Xt("activeRequests"),Nt=Xt("queuedHandlers"),li=Xt("paused"),lr=Xt("pauseTimer"),Rt=Xt("downLimit"),cr=Xt("upperLimit"),_s=Xt("rateLimitingTimer"),bl=Xt("call"),Os=Xt("queueNext"),wg=Xt("next"),bg=Xt("queue"),Eg=Xt("dequeue"),yg=Xt("resume"),ur=Xt("increaseLimit"),id=class{constructor(e){Object.defineProperty(this,Eg,{value:_D}),Object.defineProperty(this,bg,{value:PD}),Object.defineProperty(this,wg,{value:CD}),Object.defineProperty(this,Os,{value:xD}),Object.defineProperty(this,bl,{value:TD}),Object.defineProperty(this,ci,{writable:!0,value:0}),Object.defineProperty(this,Nt,{writable:!0,value:[]}),Object.defineProperty(this,li,{writable:!0,value:!1}),Object.defineProperty(this,lr,{writable:!0,value:void 0}),Object.defineProperty(this,Rt,{writable:!0,value:1}),Object.defineProperty(this,cr,{writable:!0,value:void 0}),Object.defineProperty(this,_s,{writable:!0,value:void 0}),Object.defineProperty(this,yg,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,ur,{writable:!0,value:()=>{if(be(this,li)[li]){be(this,_s)[_s]=setTimeout(be(this,ur)[ur],0);return}be(this,Rt)[Rt]=this.limit,this.limit=Math.ceil((be(this,cr)[cr]+be(this,Rt)[Rt])/2);for(let t=be(this,Rt)[Rt];t<=this.limit;t++)be(this,Os)[Os]();be(this,cr)[cr]-be(this,Rt)[Rt]>3?be(this,_s)[_s]=setTimeout(be(this,ur)[ur],2e3):be(this,Rt)[Rt]=Math.floor(be(this,Rt)[Rt]/2)}}),typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,t){return!be(this,li)[li]&&be(this,ci)[ci]<this.limit?be(this,bl)[bl](e):be(this,bg)[bg](e,t)}wrapSyncFunction(e,t){var i=this;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];let a=i.run(()=>(e(...r),queueMicrotask(()=>a.done()),()=>{}),t);return{abortOn:C1,abort(){a.abort()}}}}wrapPromiseFunction(e,t){var i=this;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];let a,l=new Promise((c,u)=>{a=i.run(()=>{let h,f;try{f=Promise.resolve(e(...r))}catch(p){f=Promise.reject(p)}return f.then(p=>{h?u(h):(a.done(),c(p))},p=>{h?u(h):(a.done(),u(p))}),p=>{h=AD(p)}},t)});return l.abort=c=>{a.abort(c)},l.abortOn=C1,l}}resume(){be(this,li)[li]=!1,clearTimeout(be(this,lr)[lr]);for(let e=0;e<this.limit;e++)be(this,Os)[Os]()}pause(e){e===void 0&&(e=null),be(this,li)[li]=!0,clearTimeout(be(this,lr)[lr]),e!=null&&(be(this,lr)[lr]=setTimeout(be(this,yg)[yg],e))}rateLimit(e){clearTimeout(be(this,_s)[_s]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(be(this,cr)[cr]=this.limit-1,this.limit=be(this,Rt)[Rt],be(this,_s)[_s]=setTimeout(be(this,ur)[ur],e))}get isPaused(){return be(this,li)[li]}};function TD(s){be(this,ci)[ci]+=1;let e=!1,t;try{t=s()}catch(i){throw be(this,ci)[ci]-=1,i}return{abort:i=>{e||(e=!0,be(this,ci)[ci]-=1,t?.(i),be(this,Os)[Os]())},done:()=>{e||(e=!0,be(this,ci)[ci]-=1,be(this,Os)[Os]())}}}function xD(){queueMicrotask(()=>be(this,wg)[wg]())}function CD(){if(be(this,li)[li]||be(this,ci)[ci]>=this.limit||be(this,Nt)[Nt].length===0)return;let s=be(this,Nt)[Nt].shift();if(s==null)throw new Error("Invariant violation: next is null");let e=be(this,bl)[bl](s.fn);s.abort=e.abort,s.done=e.done}function PD(s,e){let t={fn:s,priority:e?.priority||0,abort:()=>{be(this,Eg)[Eg](t)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},i=be(this,Nt)[Nt].findIndex(n=>t.priority>n.priority);return i===-1?be(this,Nt)[Nt].push(t):be(this,Nt)[Nt].splice(i,0,t),t}function _D(s){let e=be(this,Nt)[Nt].indexOf(s);e!==-1&&be(this,Nt)[Nt].splice(e,1)}var sd=Symbol("__queue");var Sg=class extends Error{constructor(e,t){t===void 0&&(t=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}},yo=Sg;function OD(s){return s?s.readyState!==0&&s.readyState!==4||s.status===0:!1}var P1=OD;function Ci(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var MD=0;function nd(s){return"__private_"+MD+++"_"+s}var Ms=nd("aliveTimer"),dr=nd("isDone"),yl=nd("onTimedOut"),hr=nd("timeout"),Ag=class{constructor(e,t){Object.defineProperty(this,Ms,{writable:!0,value:void 0}),Object.defineProperty(this,dr,{writable:!0,value:!1}),Object.defineProperty(this,yl,{writable:!0,value:void 0}),Object.defineProperty(this,hr,{writable:!0,value:void 0}),Ci(this,hr)[hr]=e,Ci(this,yl)[yl]=()=>t(e)}progress(){Ci(this,dr)[dr]||Ci(this,hr)[hr]>0&&(clearTimeout(Ci(this,Ms)[Ms]),Ci(this,Ms)[Ms]=setTimeout(Ci(this,yl)[yl],Ci(this,hr)[hr]))}done(){Ci(this,dr)[dr]||(clearTimeout(Ci(this,Ms)[Ms]),Ci(this,Ms)[Ms]=void 0,Ci(this,dr)[dr]=!0)}},_1=Ag;var rd=()=>{};function O1(s,e){e===void 0&&(e={});let{body:t=null,headers:i={},method:n="GET",onBeforeRequest:r=rd,onUploadProgress:o=rd,shouldRetry:a=()=>!0,onAfterResponse:l=rd,onTimeout:c=rd,responseType:u,retries:h=3,signal:f=null,timeout:p=3e4,withCredentials:g=!1}=e,y=O=>.3*2**(O-1)*1e3,A=new _1(p,c);function S(O){return O===void 0&&(O=0),new Promise(async(I,F)=>{let H=new XMLHttpRequest;H.open(n,s,!0),H.withCredentials=g,u&&(H.responseType=u),f?.addEventListener("abort",()=>{H.abort(),F(new DOMException("Aborted","AbortError"))}),H.onload=async()=>{await l(H,O),H.status>=200&&H.status<300?(A.done(),I(H)):a(H)&&O<h?setTimeout(()=>{S(O+1).then(I,F)},y(O)):(A.done(),F(new yo(H.statusText,H)))},H.onerror=()=>{a(H)&&O<h?setTimeout(()=>{S(O+1).then(I,F)},y(O)):(A.done(),F(new yo(H.statusText,H)))},H.upload.onprogress=U=>{A.progress(),o(U)},i&&Object.keys(i).forEach(U=>{H.setRequestHeader(U,i[U])}),await r(H,O),H.send(t)})}return S()}function M1(s){let e=t=>"error"in t&&!!t.error;return s.filter(t=>!e(t))}function L1(s){return s.filter(e=>{var t;return!((t=e.progress)!=null&&t.uploadStarted)||!e.isRestored})}function od(s,e){return s===!0?Object.keys(e):Array.isArray(s)?s:[]}var k1={strings:{uploadStalled:"Upload has not made any progress for %{seconds} seconds. You may want to retry it."}};function Ls(s,e){if(!{}.hasOwnProperty.call(s,e))throw new TypeError("attempted to use private field on non-instance");return s}var LD=0;function Eo(s){return"__private_"+LD+++"_"+s}var kD={version:"4.0.2"};function DD(s,e){let t=e;return t||(t=new Error("Upload error")),typeof t=="string"&&(t=new Error(t)),t instanceof Error||(t=Object.assign(new Error("Upload error"),{data:t})),P1(s)?(t=new yo(t,s),t):(t.request=s,t)}function D1(s){return s.data.slice(0,s.data.size,s.meta.type)}var ID={formData:!0,fieldName:"file",method:"post",allowedMetaFields:!0,bundle:!1,headers:{},timeout:30*1e3,limit:5,withCredentials:!1,responseType:""},pr=Eo("getFetcher"),Cg=Eo("uploadLocalFile"),Tg=Eo("uploadBundle"),Pg=Eo("getCompanionClientArgs"),xg=Eo("uploadFiles"),wl=Eo("handleUpload"),wo=class extends Wn{constructor(e,t){if(super(e,{...ID,fieldName:t.bundle?"files[]":"file",...t}),Object.defineProperty(this,xg,{value:BD}),Object.defineProperty(this,Pg,{value:ND}),Object.defineProperty(this,Tg,{value:RD}),Object.defineProperty(this,Cg,{value:FD}),Object.defineProperty(this,pr,{writable:!0,value:void 0}),Object.defineProperty(this,wl,{writable:!0,value:async i=>{if(i.length===0){this.uppy.log("[XHRUpload] No files to upload!");return}this.opts.limit===0&&!this.opts[sd]&&this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");let n=this.uppy.getFilesByIds(i),r=M1(n),o=L1(r);if(this.uppy.emit("upload-start",o),this.opts.bundle){if(r.some(l=>l.isRemote))throw new Error("Can\u2019t upload remote files when the `bundle: true` option is set");if(typeof this.opts.headers=="function")throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");await Ls(this,Tg)[Tg](r)}else await Ls(this,xg)[xg](r)}}),this.type="uploader",this.id=this.opts.id||"XHRUpload",this.defaultLocale=k1,this.i18nInit(),sd in this.opts?this.requests=this.opts[sd]:this.requests=new id(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");if(this.opts.bundle&&typeof this.opts.headers=="function")throw new Error("`opts.headers` can not be a function when the `bundle: true` option is set.");if(t?.allowedMetaFields===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.uploaderEvents=Object.create(null),Ls(this,pr)[pr]=i=>async(n,r)=>{try{var o,a,l;let u=await O1(n,{...r,onBeforeRequest:this.opts.onBeforeRequest,shouldRetry:this.opts.shouldRetry,onAfterResponse:this.opts.onAfterResponse,onTimeout:p=>{let g=Math.ceil(p/1e3),y=new Error(this.i18n("uploadStalled",{seconds:g}));this.uppy.emit("upload-stalled",y,i)},onUploadProgress:p=>{if(p.lengthComputable)for(let y of i){var g;this.uppy.emit("upload-progress",y,{uploadStarted:(g=y.progress.uploadStarted)!=null?g:0,bytesUploaded:p.loaded/p.total*y.size,bytesTotal:y.size})}}}),h=await((o=(a=this.opts).getResponseData)==null?void 0:o.call(a,u));try{var c;(c=h)!=null||(h=JSON.parse(u.responseText))}catch(p){throw new Error("@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.",{cause:p})}let f=typeof((l=h)==null?void 0:l.url)=="string"?h.url:void 0;for(let p of i)this.uppy.emit("upload-success",p,{status:u.status,body:h,uploadURL:f});return u}catch(u){if(u.name==="AbortError")return;if(u instanceof yo){let h=u.request;for(let f of i)this.uppy.emit("upload-error",f,DD(h,u))}throw u}}}getOptions(e){let t=this.uppy.getState().xhrUpload,{headers:i}=this.opts,n={...this.opts,...t||{},...e.xhrUpload||{},headers:{}};return typeof i=="function"?n.headers=i(e):Object.assign(n.headers,this.opts.headers),t&&Object.assign(n.headers,t.headers),e.xhrUpload&&Object.assign(n.headers,e.xhrUpload.headers),n}addMetadata(e,t,i){od(i.allowedMetaFields,t).forEach(r=>{let o=t[r];Array.isArray(o)?o.forEach(a=>e.append(r,a)):e.append(r,o)})}createFormDataUpload(e,t){let i=new FormData;this.addMetadata(i,e.meta,t);let n=D1(e);return e.name?i.append(t.fieldName,n,e.meta.name):i.append(t.fieldName,n),i}createBundledUpload(e,t){let i=new FormData,{meta:n}=this.uppy.getState();return this.addMetadata(i,n,t),e.forEach(r=>{let o=this.getOptions(r),a=D1(r);r.name?i.append(o.fieldName,a,r.name):i.append(o.fieldName,a)}),i}install(){if(this.opts.bundle){let{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!1}})}this.uppy.addUploader(Ls(this,wl)[wl])}uninstall(){if(this.opts.bundle){let{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!0}})}this.uppy.removeUploader(Ls(this,wl)[wl])}};async function FD(s){let e=new vl(this.uppy),t=new AbortController,i=this.requests.wrapPromiseFunction(async()=>{let n=this.getOptions(s),r=Ls(this,pr)[pr]([s]),o=n.formData?this.createFormDataUpload(s,n):s.data;return r(n.endpoint,{...n,body:o,signal:t.signal})});e.onFileRemove(s.id,()=>t.abort()),e.onCancelAll(s.id,()=>{t.abort()});try{await i().abortOn(t.signal)}catch(n){if(n.message!=="Cancelled")throw n}finally{e.remove()}}async function RD(s){let e=new AbortController,t=this.requests.wrapPromiseFunction(async()=>{var n;let r=(n=this.uppy.getState().xhrUpload)!=null?n:{},o=Ls(this,pr)[pr](s),a=this.createBundledUpload(s,{...this.opts,...r});return o(this.opts.endpoint,{...this.opts,body:a,signal:e.signal})});function i(){e.abort()}this.uppy.once("cancel-all",i);try{await t().abortOn(e.signal)}catch(n){if(n.message!=="Cancelled")throw n}finally{this.uppy.off("cancel-all",i)}}function ND(s){var e;let t=this.getOptions(s),i=od(t.allowedMetaFields,s.meta);return{...(e=s.remote)==null?void 0:e.body,protocol:"multipart",endpoint:t.endpoint,size:s.data.size,fieldname:t.fieldName,metadata:Object.fromEntries(i.map(n=>[n,s.meta[n]])),httpMethod:t.method,useFormData:t.formData,headers:t.headers}}async function BD(s){await Promise.allSettled(s.map(e=>{if(e.isRemote){let t=()=>this.requests,i=new AbortController,n=o=>{o.id===e.id&&i.abort()};this.uppy.on("file-removed",n);let r=this.uppy.getRequestClientForFile(e).uploadRemoteFile(e,Ls(this,Pg)[Pg](e),{signal:i.signal,getQueue:t});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",n)},{priority:-1})(),r}return Ls(this,Cg)[Cg](e)}))}wo.VERSION=kD.version;var ad=class extends Oe{static targets=["dashboard","preview","imageUrl"];connect(){this.initializeUppy()}initializeUppy(){this.uppy=new jf({id:"uppy",autoProceed:!1,restrictions:{maxFileSize:5e6,maxNumberOfFiles:1,minNumberOfFiles:1,allowedFileTypes:["image/*"]}}).use(or,{inline:!0,target:this.dashboardTarget,showProgressDetails:!0,height:500}).use(ar,{quality:.8}).use(wo,{endpoint:"/upload",formData:!0,fieldName:"image_layer[layer]"}),this.uppy.on("file-added",s=>{this.updatePreview(s)}),this.uppy.on("upload-success",(s,e)=>{this.imageUrlTarget.value=e.body.url,console.log("Upload successful:",e)})}updatePreview(s){let e=new FileReader;e.onload=()=>{let t=this.previewTarget.querySelector("img");t.src=e.result},e.readAsDataURL(s.data)}};var ld=class extends Oe{static values={noImageUrl:String};connect(){this.noImageUrlValue=window.location.origin+window.noimage_url,this.processImages()}processImages(){this.element.querySelectorAll(".game-img").forEach(e=>{let t=new Image;t.src=e.style.backgroundImage.replace(/^url\(["']?/,"").replace(/["']?\)$/,""),t.addEventListener("error",()=>this.handleImageError(e))})}handleImageError(s){s.style.backgroundImage=`url(${this.noImageUrlValue})`}};var cd=class extends Oe{connect(){this.scroller()}showLeftBar(s){let e=s.target.parentElement.parentElement;e.style.transform==""?e.style.transform="rotate(180deg)":e.style.transform="",document.querySelector(".left-bar").classList.toggle("hidden-left-bar")}showMainMenu(){document.querySelector(".navbar-toggler").click()}up(){window.scrollTo({top:0,behavior:"smooth"})}scroller(){window.addEventListener("scroll",()=>{let s=document.getElementById("scroller");window.scrollY>300?(s.style.visibility="visible",s.style.opacity=1):(s.style.opacity=0,setTimeout(()=>{s.style.visibility="hidden"},400))})}};var ud=class extends Oe{connect(){this.element.scrollTop=this.element.scrollHeight}};Et.register("confirm",Mc);Et.register("btn_preloader",Lc);Et.register("notices",kc);Et.register("clear-form",Dc);Et.register("fancybox",su);Et.register("pagy-initializer",nu);Et.register("map",ru);Et.register("swiper",uu);Et.register("expand_text",du);Et.register("collapse",hu);Et.register("layer",ad);Et.register("no_image",ld);Et.register("mobile-bar",cd);Et.register("auto-scroll-down",ud);var i6=Ue(qp());var zD="2.1.3",gr="[data-trix-attachment]",ov={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}},zt={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,htmlAttributes:["language"],text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test(s){return I1(s.parentNode)===zt[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test(s){return I1(s.parentNode)===zt[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}},I1=s=>{var e;return s==null||(e=s.tagName)===null||e===void 0?void 0:e.toLowerCase()},F1=navigator.userAgent.match(/android\s([0-9]+.*Chrome)/i),_g=F1&&parseInt(F1[1]),Dl={composesExistingText:/Android.*Chrome/.test(navigator.userAgent),recentAndroid:_g&&_g>12,samsungAndroid:_g&&navigator.userAgent.match(/Android.*SM-/),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:typeof InputEvent<"u"&&["data","getTargetRanges","inputType"].every(s=>s in InputEvent.prototype)},ye={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"},$D=[ye.bytes,ye.KB,ye.MB,ye.GB,ye.TB,ye.PB],aS={prefix:"IEC",precision:2,formatter(s){switch(s){case 0:return"0 ".concat(ye.bytes);case 1:return"1 ".concat(ye.byte);default:let e;this.prefix==="SI"?e=1e3:this.prefix==="IEC"&&(e=1024);let t=Math.floor(Math.log(s)/Math.log(e)),i=(s/Math.pow(e,t)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"");return"".concat(i," ").concat($D[t])}}},Nd="\uFEFF",on="\xA0",lS=function(s){for(let e in s){let t=s[e];this[e]=t}return this},av=document.documentElement,HD=av.matches,Xe=function(s){let{onElement:e,matchingSelector:t,withCallback:i,inPhase:n,preventDefault:r,times:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e||av,l=t,c=n==="capturing",u=function(h){o!=null&&--o==0&&u.destroy();let f=ln(h.target,{matchingSelector:l});f!=null&&(i?.call(f,h,f),r&&h.preventDefault())};return u.destroy=()=>a.removeEventListener(s,u,c),a.addEventListener(s,u,c),u},Tl=function(s){let{onElement:e,bubbles:t,cancelable:i,attributes:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e??av;t=t!==!1,i=i!==!1;let o=document.createEvent("Events");return o.initEvent(s,t,i),n!=null&&lS.call(o,n),r.dispatchEvent(o)},cS=function(s,e){if(s?.nodeType===1)return HD.call(s,e)},ln=function(s){let{matchingSelector:e,untilNode:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(;s&&s.nodeType!==Node.ELEMENT_NODE;)s=s.parentNode;if(s!=null){if(e==null)return s;if(s.closest&&t==null)return s.closest(e);for(;s&&s!==t;){if(cS(s,e))return s;s=s.parentNode}}},lv=s=>document.activeElement!==s&&mr(s,document.activeElement),mr=function(s,e){if(s&&e)for(;e;){if(e===s)return!0;e=e.parentNode}},Og=function(s){var e;if((e=s)===null||e===void 0||!e.parentNode)return;let t=0;for(s=s.previousSibling;s;)t++,s=s.previousSibling;return t},cn=s=>{var e;return s==null||(e=s.parentNode)===null||e===void 0?void 0:e.removeChild(s)},md=function(s){let{onlyNodesOfType:e,usingFilter:t,expandEntityReferences:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=(()=>{switch(e){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}})();return document.createTreeWalker(s,n,t??null,i===!0)},Bt=s=>{var e;return s==null||(e=s.tagName)===null||e===void 0?void 0:e.toLowerCase()},Ce=function(s){let e,t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof s=="object"?(i=s,s=i.tagName):i={attributes:i};let n=document.createElement(s);if(i.editable!=null&&(i.attributes==null&&(i.attributes={}),i.attributes.contenteditable=i.editable),i.attributes)for(e in i.attributes)t=i.attributes[e],n.setAttribute(e,t);if(i.style)for(e in i.style)t=i.style[e],n.style[e]=t;if(i.data)for(e in i.data)t=i.data[e],n.dataset[e]=t;return i.className&&i.className.split(" ").forEach(r=>{n.classList.add(r)}),i.textContent&&(n.textContent=i.textContent),i.childNodes&&[].concat(i.childNodes).forEach(r=>{n.appendChild(r)}),n},El,xl=function(){if(El!=null)return El;El=[];for(let s in zt){let e=zt[s];e.tagName&&El.push(e.tagName)}return El},Mg=s=>Ao(s?.firstChild),R1=function(s){let{strict:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{strict:!0};return e?Ao(s):Ao(s)||!Ao(s.firstChild)&&function(t){return xl().includes(Bt(t))&&!xl().includes(Bt(t.firstChild))}(s)},Ao=s=>UD(s)&&s?.data==="block",UD=s=>s?.nodeType===Node.COMMENT_NODE,To=function(s){let{name:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s)return Cl(s)?s.data===Nd?!e||s.parentNode.dataset.trixCursorTarget===e:void 0:To(s.firstChild)},vr=s=>cS(s,gr),uS=s=>Cl(s)&&s?.data==="",Cl=s=>s?.nodeType===Node.TEXT_NODE,cv={level2Enabled:!0,getLevel(){return this.level2Enabled&&Dl.supportsInputEvents?2:0},pickFiles(s){let e=Ce("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId});e.addEventListener("change",()=>{s(e.files),cn(e)}),cn(document.getElementById(this.fileInputId)),document.body.appendChild(e),e.click()}},pd={removeBlankTableCells:!1,tableCellSeparator:" | ",tableRowSeparator:`
`},wr={bold:{tagName:"strong",inheritable:!0,parser(s){let e=window.getComputedStyle(s);return e.fontWeight==="bold"||e.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:s=>window.getComputedStyle(s).fontStyle==="italic"},href:{groupTagName:"a",parser(s){let e="a:not(".concat(gr,")"),t=s.closest(e);if(t)return t.getAttribute("href")}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}},dS={getDefaultHTML:()=>`<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="`.concat(ye.bold,'" tabindex="-1">').concat(ye.bold,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="`).concat(ye.italic,'" tabindex="-1">').concat(ye.italic,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="`).concat(ye.strike,'" tabindex="-1">').concat(ye.strike,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="`).concat(ye.link,'" tabindex="-1">').concat(ye.link,`</button>
      </span>

      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="`).concat(ye.heading1,'" tabindex="-1">').concat(ye.heading1,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="`).concat(ye.quote,'" tabindex="-1">').concat(ye.quote,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="`).concat(ye.code,'" tabindex="-1">').concat(ye.code,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="`).concat(ye.bullets,'" tabindex="-1">').concat(ye.bullets,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="`).concat(ye.numbers,'" tabindex="-1">').concat(ye.numbers,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="`).concat(ye.outdent,'" tabindex="-1">').concat(ye.outdent,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="`).concat(ye.indent,'" tabindex="-1">').concat(ye.indent,`</button>
      </span>

      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="`).concat(ye.attachFiles,'" tabindex="-1">').concat(ye.attachFiles,`</button>
      </span>

      <span class="trix-button-group-spacer"></span>

      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="`).concat(ye.undo,'" tabindex="-1">').concat(ye.undo,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="`).concat(ye.redo,'" tabindex="-1">').concat(ye.redo,`</button>
      </span>
    </div>

    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="`).concat(ye.urlPlaceholder,'" aria-label="').concat(ye.url,`" required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(ye.link,`" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(ye.unlink,`" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`)},Wg={interval:5e3},Il=Object.freeze({__proto__:null,attachments:ov,blockAttributes:zt,browser:Dl,css:{attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"},fileSize:aS,input:cv,keyNames:{8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},lang:ye,parser:pd,textAttributes:wr,toolbar:dS,undo:Wg}),tt=class{static proxyMethod(e){let{name:t,toMethod:i,toProperty:n,optional:r}=jD(e);this.prototype[t]=function(){let o,a;var l,c;return i?a=r?(l=this[i])===null||l===void 0?void 0:l.call(this):this[i]():n&&(a=this[n]),r?(o=(c=a)===null||c===void 0?void 0:c[t],o?N1.call(o,a,arguments):void 0):(o=a[t],N1.call(o,a,arguments))}}},jD=function(s){let e=s.match(VD);if(!e)throw new Error("can't parse @proxyMethod expression: ".concat(s));let t={name:e[4]};return e[2]!=null?t.toMethod=e[1]:t.toProperty=e[1],e[3]!=null&&(t.optional=!0),t},{apply:N1}=Function.prototype,VD=new RegExp("^(.+?)(\\(\\))?(\\?)?\\.(.+?)$"),Lg,kg,Dg,Er=class extends tt{static box(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e instanceof this?e:this.fromUCS2String(e?.toString())}static fromUCS2String(e){return new this(e,Gg(e))}static fromCodepoints(e){return new this(Yg(e),e)}constructor(e,t){super(...arguments),this.ucs2String=e,this.codepoints=t,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}offsetToUCS2Offset(e){return Yg(this.codepoints.slice(0,Math.max(0,e))).length}offsetFromUCS2Offset(e){return Gg(this.ucs2String.slice(0,Math.max(0,e))).length}slice(){return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))}charAt(e){return this.slice(e,e+1)}isEqualTo(e){return this.constructor.box(e).ucs2String===this.ucs2String}toJSON(){return this.ucs2String}getCacheKey(){return this.ucs2String}toString(){return this.ucs2String}},qD=((Lg=Array.from)===null||Lg===void 0?void 0:Lg.call(Array,"\u{1F47C}").length)===1,WD=((kg=" ".codePointAt)===null||kg===void 0?void 0:kg.call(" ",0))!=null,GD=((Dg=String.fromCodePoint)===null||Dg===void 0?void 0:Dg.call(String,32,128124))===" \u{1F47C}",Gg,Yg;Gg=qD&&WD?s=>Array.from(s).map(e=>e.codePointAt(0)):function(s){let e=[],t=0,{length:i}=s;for(;t<i;){let n=s.charCodeAt(t++);if(55296<=n&&n<=56319&&t<i){let r=s.charCodeAt(t++);(64512&r)==56320?n=((1023&n)<<10)+(1023&r)+65536:t--}e.push(n)}return e},Yg=GD?s=>String.fromCodePoint(...Array.from(s||[])):function(s){return(()=>{let e=[];return Array.from(s).forEach(t=>{let i="";t>65535&&(t-=65536,i+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e.push(i+String.fromCharCode(t))}),e})().join("")};var YD=0,Is=class extends tt{static fromJSONString(e){return this.fromJSON(JSON.parse(e))}constructor(){super(...arguments),this.id=++YD}hasSameConstructorAs(e){return this.constructor===e?.constructor}isEqualTo(e){return this===e}inspect(){let e=[],t=this.contentsForInspection()||{};for(let i in t){let n=t[i];e.push("".concat(i,"=").concat(n))}return"#<".concat(this.constructor.name,":").concat(this.id).concat(e.length?" ".concat(e.join(", ")):"",">")}contentsForInspection(){}toJSONString(){return JSON.stringify(this)}toUTF16String(){return Er.box(this)}getCacheKey(){return this.id.toString()}},Sr=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(s.length!==e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!==e[t])return!1;return!0},uv=function(s){let e=s.slice(0);for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.splice(...i),e},XD=/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,KD=function(){let s=Ce("input",{dir:"auto",name:"x",dirName:"x.dir"}),e=Ce("textarea",{dir:"auto",name:"y",dirName:"y.dir"}),t=Ce("form");t.appendChild(s),t.appendChild(e);let i=function(){try{return new FormData(t).has(e.dirName)}catch{return!1}}(),n=function(){try{return s.matches(":dir(ltr),:dir(rtl)")}catch{return!1}}();return i?function(r){return e.value=r,new FormData(t).get(e.dirName)}:n?function(r){return s.value=r,s.matches(":dir(rtl)")?"rtl":"ltr"}:function(r){let o=r.trim().charAt(0);return XD.test(o)?"rtl":"ltr"}}(),Ig=null,Fg=null,Rg=null,dd=null,Xg=()=>(Ig||(Ig=ZD().concat(JD())),Ig),rt=s=>zt[s],JD=()=>(Fg||(Fg=Object.keys(zt)),Fg),Kg=s=>wr[s],ZD=()=>(Rg||(Rg=Object.keys(wr)),Rg),hS=function(s,e){QD(s).textContent=e.replace(/%t/g,s)},QD=function(s){let e=document.createElement("style");e.setAttribute("type","text/css"),e.setAttribute("data-tag-name",s.toLowerCase());let t=eI();return t&&e.setAttribute("nonce",t),document.head.insertBefore(e,document.head.firstChild),e},eI=function(){let s=B1("trix-csp-nonce")||B1("csp-nonce");if(s)return s.getAttribute("content")},B1=s=>document.head.querySelector("meta[name=".concat(s,"]")),z1={"application/x-trix-feature-detection":"test"},pS=function(s){let e=s.getData("text/plain"),t=s.getData("text/html");if(!e||!t)return e?.length;{let{body:i}=new DOMParser().parseFromString(t,"text/html");if(i.textContent===e)return!i.querySelector("*")}},fS=/Mac|^iP/.test(navigator.platform)?s=>s.metaKey:s=>s.ctrlKey,dv=s=>setTimeout(s,1),mS=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={};for(let t in s){let i=s[t];e[t]=i}return e},Lo=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object.keys(s).length!==Object.keys(e).length)return!1;for(let t in s)if(s[t]!==e[t])return!1;return!0},Re=function(s){if(s!=null)return Array.isArray(s)||(s=[s,s]),[$1(s[0]),$1(s[1]!=null?s[1]:s[0])]},Ds=function(s){if(s==null)return;let[e,t]=Re(s);return Jg(e,t)},gd=function(s,e){if(s==null||e==null)return;let[t,i]=Re(s),[n,r]=Re(e);return Jg(t,n)&&Jg(i,r)},$1=function(s){return typeof s=="number"?s:mS(s)},Jg=function(s,e){return typeof s=="number"?s===e:Lo(s,e)},vd=class extends tt{constructor(){super(...arguments),this.update=this.update.bind(this),this.selectionManagers=[]}start(){this.started||(this.started=!0,document.addEventListener("selectionchange",this.update,!0))}stop(){if(this.started)return this.started=!1,document.removeEventListener("selectionchange",this.update,!0)}registerSelectionManager(e){if(!this.selectionManagers.includes(e))return this.selectionManagers.push(e),this.start()}unregisterSelectionManager(e){if(this.selectionManagers=this.selectionManagers.filter(t=>t!==e),this.selectionManagers.length===0)return this.stop()}notifySelectionManagersOfSelectionChange(){return this.selectionManagers.map(e=>e.selectionDidChange())}update(){this.notifySelectionManagersOfSelectionChange()}reset(){this.update()}},Ar=new vd,gS=function(){let s=window.getSelection();if(s.rangeCount>0)return s},Pl=function(){var s;let e=(s=gS())===null||s===void 0?void 0:s.getRangeAt(0);if(e&&!tI(e))return e},vS=function(s){let e=window.getSelection();return e.removeAllRanges(),e.addRange(s),Ar.update()},tI=s=>H1(s.startContainer)||H1(s.endContainer),H1=s=>!Object.getPrototypeOf(s),Al=s=>s.replace(new RegExp("".concat(Nd),"g"),"").replace(new RegExp("".concat(on),"g")," "),hv=new RegExp("[^\\S".concat(on,"]")),pv=s=>s.replace(new RegExp("".concat(hv.source),"g")," ").replace(/\ {2,}/g," "),U1=function(s,e){if(s.isEqualTo(e))return["",""];let t=Ng(s,e),{length:i}=t.utf16String,n;if(i){let{offset:r}=t,o=s.codepoints.slice(0,r).concat(s.codepoints.slice(r+i));n=Ng(e,Er.fromCodepoints(o))}else n=Ng(e,s);return[t.utf16String.toString(),n.utf16String.toString()]},Ng=function(s,e){let t=0,i=s.length,n=e.length;for(;t<i&&s.charAt(t).isEqualTo(e.charAt(t));)t++;for(;i>t+1&&s.charAt(i-1).isEqualTo(e.charAt(n-1));)i--,n--;return{utf16String:s.slice(t,i),offset:t}},Bi=class s extends Is{static fromCommonAttributesOfObjects(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(!e.length)return new this;let t=Sl(e[0]),i=t.getKeys();return e.slice(1).forEach(n=>{i=t.getKeysCommonToHash(Sl(n)),t=t.slice(i)}),t}static box(e){return Sl(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(...arguments),this.values=fd(e)}add(e,t){return this.merge(iI(e,t))}remove(e){return new s(fd(this.values,e))}get(e){return this.values[e]}has(e){return e in this.values}merge(e){return new s(sI(this.values,nI(e)))}slice(e){let t={};return Array.from(e).forEach(i=>{this.has(i)&&(t[i]=this.values[i])}),new s(t)}getKeys(){return Object.keys(this.values)}getKeysCommonToHash(e){return e=Sl(e),this.getKeys().filter(t=>this.values[t]===e.values[t])}isEqualTo(e){return Sr(this.toArray(),Sl(e).toArray())}isEmpty(){return this.getKeys().length===0}toArray(){if(!this.array){let e=[];for(let t in this.values){let i=this.values[t];e.push(e.push(t,i))}this.array=e.slice(0)}return this.array}toObject(){return fd(this.values)}toJSON(){return this.toObject()}contentsForInspection(){return{values:JSON.stringify(this.values)}}},iI=function(s,e){let t={};return t[s]=e,t},sI=function(s,e){let t=fd(s);for(let i in e){let n=e[i];t[i]=n}return t},fd=function(s,e){let t={};return Object.keys(s).sort().forEach(i=>{i!==e&&(t[i]=s[i])}),t},Sl=function(s){return s instanceof Bi?s:new Bi(s)},nI=function(s){return s instanceof Bi?s.values:s},_l=class{static groupObjects(){let e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:i,asTree:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};n&&i==null&&(i=0);let r=[];return Array.from(t).forEach(o=>{var a;if(e){var l,c,u;if((l=o.canBeGrouped)!==null&&l!==void 0&&l.call(o,i)&&(c=(u=e[e.length-1]).canBeGroupedWith)!==null&&c!==void 0&&c.call(u,o,i))return void e.push(o);r.push(new this(e,{depth:i,asTree:n})),e=null}(a=o.canBeGrouped)!==null&&a!==void 0&&a.call(o,i)?e=[o]:r.push(o)}),e&&r.push(new this(e,{depth:i,asTree:n})),r}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:t,asTree:i}=arguments.length>1?arguments[1]:void 0;this.objects=e,i&&(this.depth=t,this.objects=this.constructor.groupObjects(this.objects,{asTree:i,depth:this.depth+1}))}getObjects(){return this.objects}getDepth(){return this.depth}getCacheKey(){let e=["objectGroup"];return Array.from(this.getObjects()).forEach(t=>{e.push(t.getCacheKey())}),e.join("/")}},Zg=class extends tt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects={},Array.from(e).forEach(t=>{let i=JSON.stringify(t);this.objects[i]==null&&(this.objects[i]=t)})}find(e){let t=JSON.stringify(e);return this.objects[t]}},Qg=class{constructor(e){this.reset(e)}add(e){let t=j1(e);this.elements[t]=e}remove(e){let t=j1(e),i=this.elements[t];if(i)return delete this.elements[t],i}reset(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this.elements={},Array.from(e).forEach(t=>{this.add(t)}),e}},j1=s=>s.dataset.trixStoreKey,xo=class extends tt{isPerforming(){return this.performing===!0}hasPerformed(){return this.performed===!0}hasSucceeded(){return this.performed&&this.succeeded}hasFailed(){return this.performed&&!this.succeeded}getPromise(){return this.promise||(this.promise=new Promise((e,t)=>(this.performing=!0,this.perform((i,n)=>{this.succeeded=i,this.performing=!1,this.performed=!0,this.succeeded?e(n):t(n)})))),this.promise}perform(e){return e(!1)}release(){var e,t;(e=this.promise)===null||e===void 0||(t=e.cancel)===null||t===void 0||t.call(e),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null}};xo.proxyMethod("getPromise().then"),xo.proxyMethod("getPromise().catch");var Fs=class extends tt{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.object=e,this.options=t,this.childViews=[],this.rootView=this}getNodes(){return this.nodes||(this.nodes=this.createNodes()),this.nodes.map(e=>e.cloneNode(!0))}invalidate(){var e;return this.nodes=null,this.childViews=[],(e=this.parentView)===null||e===void 0?void 0:e.invalidate()}invalidateViewForObject(e){var t;return(t=this.findViewForObject(e))===null||t===void 0?void 0:t.invalidate()}findOrCreateCachedChildView(e,t,i){let n=this.getCachedViewForObject(t);return n?this.recordChildView(n):(n=this.createChildView(...arguments),this.cacheViewForObject(n,t)),n}createChildView(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};t instanceof _l&&(i.viewClass=e,e=ev);let n=new e(t,i);return this.recordChildView(n)}recordChildView(e){return e.parentView=this,e.rootView=this.rootView,this.childViews.push(e),e}getAllChildViews(){let e=[];return this.childViews.forEach(t=>{e.push(t),e=e.concat(t.getAllChildViews())}),e}findElement(){return this.findElementForObject(this.object)}findElementForObject(e){let t=e?.id;if(t)return this.rootView.element.querySelector("[data-trix-id='".concat(t,"']"))}findViewForObject(e){for(let t of this.getAllChildViews())if(t.object===e)return t}getViewCache(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?(this.viewCache||(this.viewCache={}),this.viewCache):void 0}isViewCachingEnabled(){return this.shouldCacheViews!==!1}enableViewCaching(){this.shouldCacheViews=!0}disableViewCaching(){this.shouldCacheViews=!1}getCachedViewForObject(e){var t;return(t=this.getViewCache())===null||t===void 0?void 0:t[e.getCacheKey()]}cacheViewForObject(e,t){let i=this.getViewCache();i&&(i[t.getCacheKey()]=e)}garbageCollectCachedViews(){let e=this.getViewCache();if(e){let t=this.getAllChildViews().concat(this).map(i=>i.object.getCacheKey());for(let i in e)t.includes(i)||delete e[i]}}},ev=class extends Fs{constructor(){super(...arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}getChildViews(){return this.childViews.length||Array.from(this.objectGroup.getObjects()).forEach(e=>{this.findOrCreateCachedChildView(this.viewClass,e,this.options)}),this.childViews}createNodes(){let e=this.createContainerElement();return this.getChildViews().forEach(t=>{Array.from(t.getNodes()).forEach(i=>{e.appendChild(i)})}),[e]}createContainerElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.objectGroup.getDepth();return this.getChildViews()[0].createContainerElement(e)}},{css:rn}=Il,Ol=class extends Fs{constructor(){super(...arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}createContentNodes(){return[]}createNodes(){let e,t=e=Ce({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),i=this.getHref();return i&&(e=Ce({tagName:"a",editable:!1,attributes:{href:i,tabindex:-1}}),t.appendChild(e)),this.attachment.hasContent()?e.innerHTML=this.attachment.getContent():this.createContentNodes().forEach(n=>{e.appendChild(n)}),e.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=Ce({tagName:"progress",attributes:{class:rn.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),t.appendChild(this.progressElement)),[V1("left"),t,V1("right")]}createCaptionElement(){let e=Ce({tagName:"figcaption",className:rn.attachmentCaption}),t=this.attachmentPiece.getCaption();if(t)e.classList.add("".concat(rn.attachmentCaption,"--edited")),e.textContent=t;else{let i,n,r=this.getCaptionConfig();if(r.name&&(i=this.attachment.getFilename()),r.size&&(n=this.attachment.getFormattedFilesize()),i){let o=Ce({tagName:"span",className:rn.attachmentName,textContent:i});e.appendChild(o)}if(n){i&&e.appendChild(document.createTextNode(" "));let o=Ce({tagName:"span",className:rn.attachmentSize,textContent:n});e.appendChild(o)}}return e}getClassName(){let e=[rn.attachment,"".concat(rn.attachment,"--").concat(this.attachment.getType())],t=this.attachment.getExtension();return t&&e.push("".concat(rn.attachment,"--").concat(t)),e.join(" ")}getData(){let e={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},{attributes:t}=this.attachmentPiece;return t.isEmpty()||(e.trixAttributes=JSON.stringify(t)),this.attachment.isPending()&&(e.trixSerialize=!1),e}getHref(){if(!rI(this.attachment.getContent(),"a"))return this.attachment.getHref()}getCaptionConfig(){var e;let t=this.attachment.getType(),i=mS((e=ov[t])===null||e===void 0?void 0:e.caption);return t==="file"&&(i.name=!0),i}findProgressElement(){var e;return(e=this.findElement())===null||e===void 0?void 0:e.querySelector("progress")}attachmentDidChangeUploadProgress(){let e=this.attachment.getUploadProgress(),t=this.findProgressElement();t&&(t.value=e)}},V1=s=>Ce({tagName:"span",textContent:Nd,data:{trixCursorTarget:s,trixSerialize:!1}}),rI=function(s,e){let t=Ce("div");return t.innerHTML=s||"",t.querySelector(e)},bd=class extends Ol{constructor(){super(...arguments),this.attachment.previewDelegate=this}createContentNodes(){return this.image=Ce({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]}createCaptionElement(){let e=super.createCaptionElement(...arguments);return e.textContent||e.setAttribute("data-trix-placeholder",ye.captionPlaceholder),e}refresh(e){var t;if(e||(e=(t=this.findElement())===null||t===void 0?void 0:t.querySelector("img")),e)return this.updateAttributesForImage(e)}updateAttributesForImage(e){let t=this.attachment.getURL(),i=this.attachment.getPreviewURL();if(e.src=i||t,i===t)e.removeAttribute("data-trix-serialized-attributes");else{let a=JSON.stringify({src:t});e.setAttribute("data-trix-serialized-attributes",a)}let n=this.attachment.getWidth(),r=this.attachment.getHeight();n!=null&&(e.width=n),r!=null&&(e.height=r);let o=["imageElement",this.attachment.id,e.src,e.width,e.height].join("/");e.dataset.trixStoreKey=o}attachmentDidChangeAttributes(){return this.refresh(this.image),this.refresh()}},yd=class extends Fs{constructor(){super(...arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),this.textConfig=this.options.textConfig,this.context=this.options.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}createNodes(){let e=this.attachment?this.createAttachmentNodes():this.createStringNodes(),t=this.createElement();if(t){let i=function(n){for(;(r=n)!==null&&r!==void 0&&r.firstElementChild;){var r;n=n.firstElementChild}return n}(t);Array.from(e).forEach(n=>{i.appendChild(n)}),e=[t]}return e}createAttachmentNodes(){let e=this.attachment.isPreviewable()?bd:Ol;return this.createChildView(e,this.piece.attachment,{piece:this.piece}).getNodes()}createStringNodes(){var e;if((e=this.textConfig)!==null&&e!==void 0&&e.plaintext)return[document.createTextNode(this.string)];{let t=[],i=this.string.split(`
`);for(let n=0;n<i.length;n++){let r=i[n];if(n>0){let o=Ce("br");t.push(o)}if(r.length){let o=document.createTextNode(this.preserveSpaces(r));t.push(o)}}return t}}createElement(){let e,t,i,n={};for(t in this.attributes){i=this.attributes[t];let o=Kg(t);if(o){if(o.tagName){var r;let a=Ce(o.tagName);r?(r.appendChild(a),r=a):e=r=a}if(o.styleProperty&&(n[o.styleProperty]=i),o.style)for(t in o.style)i=o.style[t],n[t]=i}}if(Object.keys(n).length)for(t in e||(e=Ce("span")),n)i=n[t],e.style[t]=i;return e}createContainerElement(){for(let e in this.attributes){let t=this.attributes[e],i=Kg(e);if(i&&i.groupTagName){let n={};return n[e]=t,Ce(i.groupTagName,n)}}}preserveSpaces(e){return this.context.isLast&&(e=e.replace(/\ $/,on)),e=e.replace(/(\S)\ {3}(\S)/g,"$1 ".concat(on," $2")).replace(/\ {2}/g,"".concat(on," ")).replace(/\ {2}/g," ".concat(on)),(this.context.isFirst||this.context.followsWhitespace)&&(e=e.replace(/^\ /,on)),e}},wd=class extends Fs{constructor(){super(...arguments),this.text=this.object,this.textConfig=this.options.textConfig}createNodes(){let e=[],t=_l.groupObjects(this.getPieces()),i=t.length-1;for(let r=0;r<t.length;r++){let o=t[r],a={};r===0&&(a.isFirst=!0),r===i&&(a.isLast=!0),oI(n)&&(a.followsWhitespace=!0);let l=this.findOrCreateCachedChildView(yd,o,{textConfig:this.textConfig,context:a});e.push(...Array.from(l.getNodes()||[]));var n=o}return e}getPieces(){return Array.from(this.text.getPieces()).filter(e=>!e.hasAttribute("blockBreak"))}},oI=s=>/\s$/.test(s?.toString()),{css:q1}=Il,Ed=class extends Fs{constructor(){super(...arguments),this.block=this.object,this.attributes=this.block.getAttributes()}createNodes(){let e=[document.createComment("block")];if(this.block.isEmpty())e.push(Ce("br"));else{var t;let i=(t=rt(this.block.getLastAttribute()))===null||t===void 0?void 0:t.text,n=this.findOrCreateCachedChildView(wd,this.block.text,{textConfig:i});e.push(...Array.from(n.getNodes()||[])),this.shouldAddExtraNewlineElement()&&e.push(Ce("br"))}if(this.attributes.length)return e;{let i,{tagName:n}=zt.default;this.block.isRTL()&&(i={dir:"rtl"});let r=Ce({tagName:n,attributes:i});return e.forEach(o=>r.appendChild(o)),[r]}}createContainerElement(e){let t={},i,n=this.attributes[e],{tagName:r,htmlAttributes:o=[]}=rt(n);if(e===0&&this.block.isRTL()&&Object.assign(t,{dir:"rtl"}),n==="attachmentGallery"){let a=this.block.getBlockBreakPosition();i="".concat(q1.attachmentGallery," ").concat(q1.attachmentGallery,"--").concat(a)}return Object.entries(this.block.htmlAttributes).forEach(a=>{let[l,c]=a;o.includes(l)&&(t[l]=c)}),Ce({tagName:r,className:i,attributes:t})}shouldAddExtraNewlineElement(){return/\n\n$/.test(this.block.toString())}},Co=class extends Fs{static render(e){let t=Ce("div"),i=new this(e,{element:t});return i.render(),i.sync(),t}constructor(){super(...arguments),this.element=this.options.element,this.elementStore=new Qg,this.setDocument(this.object)}setDocument(e){e.isEqualTo(this.document)||(this.document=this.object=e)}render(){if(this.childViews=[],this.shadowElement=Ce("div"),!this.document.isEmpty()){let e=_l.groupObjects(this.document.getBlocks(),{asTree:!0});Array.from(e).forEach(t=>{let i=this.findOrCreateCachedChildView(Ed,t);Array.from(i.getNodes()).map(n=>this.shadowElement.appendChild(n))})}}isSynced(){return aI(this.shadowElement,this.element)}sync(){let e=this.createDocumentFragmentForSync();for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(e),this.didSync()}didSync(){return this.elementStore.reset(W1(this.element)),dv(()=>this.garbageCollectCachedViews())}createDocumentFragmentForSync(){let e=document.createDocumentFragment();return Array.from(this.shadowElement.childNodes).forEach(t=>{e.appendChild(t.cloneNode(!0))}),Array.from(W1(e)).forEach(t=>{let i=this.elementStore.remove(t);i&&t.parentNode.replaceChild(i,t)}),e}},W1=s=>s.querySelectorAll("[data-trix-store-key]"),aI=(s,e)=>G1(s.innerHTML)===G1(e.innerHTML),G1=s=>s.replace(/&nbsp;/g," ");function hd(s){var e,t;function i(r,o){try{var a=s[r](o),l=a.value,c=l instanceof lI;Promise.resolve(c?l.v:l).then(function(u){if(c){var h=r==="return"?"return":"next";if(!l.k||u.done)return i(h,u);u=s[h](u).value}n(a.done?"return":"normal",u)},function(u){i("throw",u)})}catch(u){n("throw",u)}}function n(r,o){switch(r){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(r,o){return new Promise(function(a,l){var c={key:r,arg:o,resolve:a,reject:l,next:null};t?t=t.next=c:(e=t=c,i(r,o))})},typeof s.return!="function"&&(this.return=void 0)}function lI(s,e){this.v=s,this.k=e}function di(s,e,t){return(e=cI(e))in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function cI(s){var e=function(t,i){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,i||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}(s,"string");return typeof e=="symbol"?e:String(e)}hd.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},hd.prototype.next=function(s){return this._invoke("next",s)},hd.prototype.throw=function(s){return this._invoke("throw",s)},hd.prototype.return=function(s){return this._invoke("return",s)};var Rs=class extends Is{static registerType(e,t){t.type=e,this.types[e]=t}static fromJSON(e){let t=this.types[e.type];if(t)return t.fromJSON(e)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.attributes=Bi.box(t)}copyWithAttributes(e){return new this.constructor(this.getValue(),e)}copyWithAdditionalAttributes(e){return this.copyWithAttributes(this.attributes.merge(e))}copyWithoutAttribute(e){return this.copyWithAttributes(this.attributes.remove(e))}copy(){return this.copyWithAttributes(this.attributes)}getAttribute(e){return this.attributes.get(e)}getAttributesHash(){return this.attributes}getAttributes(){return this.attributes.toObject()}hasAttribute(e){return this.attributes.has(e)}hasSameStringValueAsPiece(e){return e&&this.toString()===e.toString()}hasSameAttributesAsPiece(e){return e&&(this.attributes===e.attributes||this.attributes.isEqualTo(e.attributes))}isBlockBreak(){return!1}isEqualTo(e){return super.isEqualTo(...arguments)||this.hasSameConstructorAs(e)&&this.hasSameStringValueAsPiece(e)&&this.hasSameAttributesAsPiece(e)}isEmpty(){return this.length===0}isSerializable(){return!0}toJSON(){return{type:this.constructor.type,attributes:this.getAttributes()}}contentsForInspection(){return{type:this.constructor.type,attributes:this.attributes.inspect()}}canBeGrouped(){return this.hasAttribute("href")}canBeGroupedWith(e){return this.getAttribute("href")===e.getAttribute("href")}getLength(){return this.length}canBeConsolidatedWith(e){return!1}};di(Rs,"types",{});var Sd=class extends xo{constructor(e){super(...arguments),this.url=e}perform(e){let t=new Image;t.onload=()=>(t.width=this.width=t.naturalWidth,t.height=this.height=t.naturalHeight,e(!0,t)),t.onerror=()=>e(!1),t.src=this.url}},Po=class s extends Is{static attachmentForFile(e){let t=new this(this.attributesForFile(e));return t.setFile(e),t}static attributesForFile(e){return new Bi({filename:e.name,filesize:e.size,contentType:e.type})}static fromJSON(e){return new this(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.releaseFile=this.releaseFile.bind(this),this.attributes=Bi.box(e),this.didChangeAttributes()}getAttribute(e){return this.attributes.get(e)}hasAttribute(e){return this.attributes.has(e)}getAttributes(){return this.attributes.toObject()}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.attributes.merge(e);var i,n,r,o;if(!this.attributes.isEqualTo(t))return this.attributes=t,this.didChangeAttributes(),(i=this.previewDelegate)===null||i===void 0||(n=i.attachmentDidChangeAttributes)===null||n===void 0||n.call(i,this),(r=this.delegate)===null||r===void 0||(o=r.attachmentDidChangeAttributes)===null||o===void 0?void 0:o.call(r,this)}didChangeAttributes(){if(this.isPreviewable())return this.preloadURL()}isPending(){return this.file!=null&&!(this.getURL()||this.getHref())}isPreviewable(){return this.attributes.has("previewable")?this.attributes.get("previewable"):s.previewablePattern.test(this.getContentType())}getType(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"}getURL(){return this.attributes.get("url")}getHref(){return this.attributes.get("href")}getFilename(){return this.attributes.get("filename")||""}getFilesize(){return this.attributes.get("filesize")}getFormattedFilesize(){let e=this.attributes.get("filesize");return typeof e=="number"?aS.formatter(e):""}getExtension(){var e;return(e=this.getFilename().match(/\.(\w+)$/))===null||e===void 0?void 0:e[1].toLowerCase()}getContentType(){return this.attributes.get("contentType")}hasContent(){return this.attributes.has("content")}getContent(){return this.attributes.get("content")}getWidth(){return this.attributes.get("width")}getHeight(){return this.attributes.get("height")}getFile(){return this.file}setFile(e){if(this.file=e,this.isPreviewable())return this.preloadFile()}releaseFile(){this.releasePreloadedFile(),this.file=null}getUploadProgress(){return this.uploadProgress!=null?this.uploadProgress:0}setUploadProgress(e){var t,i;if(this.uploadProgress!==e)return this.uploadProgress=e,(t=this.uploadProgressDelegate)===null||t===void 0||(i=t.attachmentDidChangeUploadProgress)===null||i===void 0?void 0:i.call(t,this)}toJSON(){return this.getAttributes()}getCacheKey(){return[super.getCacheKey(...arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")}getPreviewURL(){return this.previewURL||this.preloadingURL}setPreviewURL(e){var t,i,n,r;if(e!==this.getPreviewURL())return this.previewURL=e,(t=this.previewDelegate)===null||t===void 0||(i=t.attachmentDidChangeAttributes)===null||i===void 0||i.call(t,this),(n=this.delegate)===null||n===void 0||(r=n.attachmentDidChangePreviewURL)===null||r===void 0?void 0:r.call(n,this)}preloadURL(){return this.preload(this.getURL(),this.releaseFile)}preloadFile(){if(this.file)return this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)}releasePreloadedFile(){this.fileObjectURL&&(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null)}preload(e,t){if(e&&e!==this.getPreviewURL())return this.preloadingURL=e,new Sd(e).then(i=>{let{width:n,height:r}=i;return this.getWidth()&&this.getHeight()||this.setAttributes({width:n,height:r}),this.preloadingURL=null,this.setPreviewURL(e),t?.()}).catch(()=>(this.preloadingURL=null,t?.()))}};di(Po,"previewablePattern",/^image(\/(gif|png|webp|jpe?g)|$)/);var _o=class s extends Rs{static fromJSON(e){return new this(Po.fromJSON(e.attachment),e.attributes)}constructor(e){super(...arguments),this.attachment=e,this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}ensureAttachmentExclusivelyHasAttribute(e){this.hasAttribute(e)&&(this.attachment.hasAttribute(e)||this.attachment.setAttributes(this.attributes.slice([e])),this.attributes=this.attributes.remove(e))}removeProhibitedAttributes(){let e=this.attributes.slice(s.permittedAttributes);e.isEqualTo(this.attributes)||(this.attributes=e)}getValue(){return this.attachment}isSerializable(){return!this.attachment.isPending()}getCaption(){return this.attributes.get("caption")||""}isEqualTo(e){var t;return super.isEqualTo(e)&&this.attachment.id===(e==null||(t=e.attachment)===null||t===void 0?void 0:t.id)}toString(){return"\uFFFC"}toJSON(){let e=super.toJSON(...arguments);return e.attachment=this.attachment,e}getCacheKey(){return[super.getCacheKey(...arguments),this.attachment.getCacheKey()].join("/")}toConsole(){return JSON.stringify(this.toString())}};di(_o,"permittedAttributes",["caption","presentation"]),Rs.registerType("attachment",_o);var Ml=class extends Rs{static fromJSON(e){return new this(e.string,e.attributes)}constructor(e){super(...arguments),this.string=(t=>t.replace(/\r\n?/g,`
`))(e),this.length=this.string.length}getValue(){return this.string}toString(){return this.string.toString()}isBlockBreak(){return this.toString()===`
`&&this.getAttribute("blockBreak")===!0}toJSON(){let e=super.toJSON(...arguments);return e.string=this.string,e}canBeConsolidatedWith(e){return e&&this.hasSameConstructorAs(e)&&this.hasSameAttributesAsPiece(e)}consolidateWith(e){return new this.constructor(this.toString()+e.toString(),this.attributes)}splitAtOffset(e){let t,i;return e===0?(t=null,i=this):e===this.length?(t=this,i=null):(t=new this.constructor(this.string.slice(0,e),this.attributes),i=new this.constructor(this.string.slice(e),this.attributes)),[t,i]}toConsole(){let{string:e}=this;return e.length>15&&(e=e.slice(0,14)+"\u2026"),JSON.stringify(e.toString())}};Rs.registerType("string",Ml);var Oo=class extends Is{static box(e){return e instanceof this?e:new this(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects=e.slice(0),this.length=this.objects.length}indexOf(e){return this.objects.indexOf(e)}splice(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new this.constructor(uv(this.objects,...t))}eachObject(e){return this.objects.map((t,i)=>e(t,i))}insertObjectAtIndex(e,t){return this.splice(t,0,e)}insertSplittableListAtIndex(e,t){return this.splice(t,0,...e.objects)}insertSplittableListAtPosition(e,t){let[i,n]=this.splitObjectAtPosition(t);return new this.constructor(i).insertSplittableListAtIndex(e,n)}editObjectAtIndex(e,t){return this.replaceObjectAtIndex(t(this.objects[e]),e)}replaceObjectAtIndex(e,t){return this.splice(t,1,e)}removeObjectAtIndex(e){return this.splice(e,1)}getObjectAtIndex(e){return this.objects[e]}getSplittableListInRange(e){let[t,i,n]=this.splitObjectsAtRange(e);return new this.constructor(t.slice(i,n+1))}selectSplittableList(e){let t=this.objects.filter(i=>e(i));return new this.constructor(t)}removeObjectsInRange(e){let[t,i,n]=this.splitObjectsAtRange(e);return new this.constructor(t).splice(i,n-i+1)}transformObjectsInRange(e,t){let[i,n,r]=this.splitObjectsAtRange(e),o=i.map((a,l)=>n<=l&&l<=r?t(a):a);return new this.constructor(o)}splitObjectsAtRange(e){let t,[i,n,r]=this.splitObjectAtPosition(dI(e));return[i,t]=new this.constructor(i).splitObjectAtPosition(hI(e)+r),[i,n,t-1]}getObjectAtPosition(e){let{index:t}=this.findIndexAndOffsetAtPosition(e);return this.objects[t]}splitObjectAtPosition(e){let t,i,{index:n,offset:r}=this.findIndexAndOffsetAtPosition(e),o=this.objects.slice(0);if(n!=null)if(r===0)t=n,i=0;else{let a=this.getObjectAtIndex(n),[l,c]=a.splitAtOffset(r);o.splice(n,1,l,c),t=n+1,i=l.getLength()-r}else t=o.length,i=0;return[o,t,i]}consolidate(){let e=[],t=this.objects[0];return this.objects.slice(1).forEach(i=>{var n,r;(n=(r=t).canBeConsolidatedWith)!==null&&n!==void 0&&n.call(r,i)?t=t.consolidateWith(i):(e.push(t),t=i)}),t&&e.push(t),new this.constructor(e)}consolidateFromIndexToIndex(e,t){let i=this.objects.slice(0).slice(e,t+1),n=new this.constructor(i).consolidate().toArray();return this.splice(e,i.length,...n)}findIndexAndOffsetAtPosition(e){let t,i=0;for(t=0;t<this.objects.length;t++){let n=i+this.objects[t].getLength();if(i<=e&&e<n)return{index:t,offset:e-i};i=n}return{index:null,offset:null}}findPositionAtIndexAndOffset(e,t){let i=0;for(let n=0;n<this.objects.length;n++){let r=this.objects[n];if(n<e)i+=r.getLength();else if(n===e){i+=t;break}}return i}getEndPosition(){return this.endPosition==null&&(this.endPosition=0,this.objects.forEach(e=>this.endPosition+=e.getLength())),this.endPosition}toString(){return this.objects.join("")}toArray(){return this.objects.slice(0)}toJSON(){return this.toArray()}isEqualTo(e){return super.isEqualTo(...arguments)||uI(this.objects,e?.objects)}contentsForInspection(){return{objects:"[".concat(this.objects.map(e=>e.inspect()).join(", "),"]")}}},uI=function(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(s.length!==e.length)return!1;let t=!0;for(let i=0;i<s.length;i++){let n=s[i];t&&!n.isEqualTo(e[i])&&(t=!1)}return t},dI=s=>s[0],hI=s=>s[1],ui=class extends Is{static textForAttachmentWithAttributes(e,t){return new this([new _o(e,t)])}static textForStringWithAttributes(e,t){return new this([new Ml(e,t)])}static fromJSON(e){return new this(Array.from(e).map(t=>Rs.fromJSON(t)))}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments);let t=e.filter(i=>!i.isEmpty());this.pieceList=new Oo(t)}copy(){return this.copyWithPieceList(this.pieceList)}copyWithPieceList(e){return new this.constructor(e.consolidate().toArray())}copyUsingObjectMap(e){let t=this.getPieces().map(i=>e.find(i)||i);return new this.constructor(t)}appendText(e){return this.insertTextAtPosition(e,this.getLength())}insertTextAtPosition(e,t){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(e.pieceList,t))}removeTextAtRange(e){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(e))}replaceTextAtRange(e,t){return this.removeTextAtRange(t).insertTextAtPosition(e,t[0])}moveTextFromRangeToPosition(e,t){if(e[0]<=t&&t<=e[1])return;let i=this.getTextAtRange(e),n=i.getLength();return e[0]<t&&(t-=n),this.removeTextAtRange(e).insertTextAtPosition(i,t)}addAttributeAtRange(e,t,i){let n={};return n[e]=t,this.addAttributesAtRange(n,i)}addAttributesAtRange(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,i=>i.copyWithAdditionalAttributes(e)))}removeAttributeAtRange(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,i=>i.copyWithoutAttribute(e)))}setAttributesAtRange(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,i=>i.copyWithAttributes(e)))}getAttributesAtPosition(e){var t;return((t=this.pieceList.getObjectAtPosition(e))===null||t===void 0?void 0:t.getAttributes())||{}}getCommonAttributes(){let e=Array.from(this.pieceList.toArray()).map(t=>t.getAttributes());return Bi.fromCommonAttributesOfObjects(e).toObject()}getCommonAttributesAtRange(e){return this.getTextAtRange(e).getCommonAttributes()||{}}getExpandedRangeForAttributeAtOffset(e,t){let i,n=i=t,r=this.getLength();for(;n>0&&this.getCommonAttributesAtRange([n-1,i])[e];)n--;for(;i<r&&this.getCommonAttributesAtRange([t,i+1])[e];)i++;return[n,i]}getTextAtRange(e){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(e))}getStringAtRange(e){return this.pieceList.getSplittableListInRange(e).toString()}getStringAtPosition(e){return this.getStringAtRange([e,e+1])}startsWithString(e){return this.getStringAtRange([0,e.length])===e}endsWithString(e){let t=this.getLength();return this.getStringAtRange([t-e.length,t])===e}getAttachmentPieces(){return this.pieceList.toArray().filter(e=>!!e.attachment)}getAttachments(){return this.getAttachmentPieces().map(e=>e.attachment)}getAttachmentAndPositionById(e){let t=0;for(let n of this.pieceList.toArray()){var i;if(((i=n.attachment)===null||i===void 0?void 0:i.id)===e)return{attachment:n.attachment,position:t};t+=n.length}return{attachment:null,position:null}}getAttachmentById(e){let{attachment:t}=this.getAttachmentAndPositionById(e);return t}getRangeOfAttachment(e){let t=this.getAttachmentAndPositionById(e.id),i=t.position;if(e=t.attachment)return[i,i+1]}updateAttributesForAttachment(e,t){let i=this.getRangeOfAttachment(t);return i?this.addAttributesAtRange(e,i):this}getLength(){return this.pieceList.getEndPosition()}isEmpty(){return this.getLength()===0}isEqualTo(e){var t;return super.isEqualTo(e)||(e==null||(t=e.pieceList)===null||t===void 0?void 0:t.isEqualTo(this.pieceList))}isBlockBreak(){return this.getLength()===1&&this.pieceList.getObjectAtIndex(0).isBlockBreak()}eachPiece(e){return this.pieceList.eachObject(e)}getPieces(){return this.pieceList.toArray()}getPieceAtPosition(e){return this.pieceList.getObjectAtPosition(e)}contentsForInspection(){return{pieceList:this.pieceList.inspect()}}toSerializableText(){let e=this.pieceList.selectSplittableList(t=>t.isSerializable());return this.copyWithPieceList(e)}toString(){return this.pieceList.toString()}toJSON(){return this.pieceList.toJSON()}toConsole(){return JSON.stringify(this.pieceList.toArray().map(e=>JSON.parse(e.toConsole())))}getDirection(){return KD(this.toString())}isRTL(){return this.getDirection()==="rtl"}},an=class s extends Is{static fromJSON(e){return new this(ui.fromJSON(e.text),e.attributes,e.htmlAttributes)}constructor(e,t,i){super(...arguments),this.text=pI(e||new ui),this.attributes=t||[],this.htmlAttributes=i||{}}isEmpty(){return this.text.isBlockBreak()}isEqualTo(e){return!!super.isEqualTo(e)||this.text.isEqualTo(e?.text)&&Sr(this.attributes,e?.attributes)&&Lo(this.htmlAttributes,e?.htmlAttributes)}copyWithText(e){return new s(e,this.attributes,this.htmlAttributes)}copyWithoutText(){return this.copyWithText(null)}copyWithAttributes(e){return new s(this.text,e,this.htmlAttributes)}copyWithoutAttributes(){return this.copyWithAttributes(null)}copyUsingObjectMap(e){let t=e.find(this.text);return t?this.copyWithText(t):this.copyWithText(this.text.copyUsingObjectMap(e))}addAttribute(e){let t=this.attributes.concat(Y1(e));return this.copyWithAttributes(t)}addHTMLAttribute(e,t){let i=Object.assign({},this.htmlAttributes,{[e]:t});return new s(this.text,this.attributes,i)}removeAttribute(e){let{listAttribute:t}=rt(e),i=K1(K1(this.attributes,e),t);return this.copyWithAttributes(i)}removeLastAttribute(){return this.removeAttribute(this.getLastAttribute())}getLastAttribute(){return X1(this.attributes)}getAttributes(){return this.attributes.slice(0)}getAttributeLevel(){return this.attributes.length}getAttributeAtLevel(e){return this.attributes[e-1]}hasAttribute(e){return this.attributes.includes(e)}hasAttributes(){return this.getAttributeLevel()>0}getLastNestableAttribute(){return X1(this.getNestableAttributes())}getNestableAttributes(){return this.attributes.filter(e=>rt(e).nestable)}getNestingLevel(){return this.getNestableAttributes().length}decreaseNestingLevel(){let e=this.getLastNestableAttribute();return e?this.removeAttribute(e):this}increaseNestingLevel(){let e=this.getLastNestableAttribute();if(e){let t=this.attributes.lastIndexOf(e),i=uv(this.attributes,t+1,0,...Y1(e));return this.copyWithAttributes(i)}return this}getListItemAttributes(){return this.attributes.filter(e=>rt(e).listAttribute)}isListItem(){var e;return(e=rt(this.getLastAttribute()))===null||e===void 0?void 0:e.listAttribute}isTerminalBlock(){var e;return(e=rt(this.getLastAttribute()))===null||e===void 0?void 0:e.terminal}breaksOnReturn(){var e;return(e=rt(this.getLastAttribute()))===null||e===void 0?void 0:e.breakOnReturn}findLineBreakInDirectionFromPosition(e,t){let i=this.toString(),n;switch(e){case"forward":n=i.indexOf(`
`,t);break;case"backward":n=i.slice(0,t).lastIndexOf(`
`)}if(n!==-1)return n}contentsForInspection(){return{text:this.text.inspect(),attributes:this.attributes}}toString(){return this.text.toString()}toJSON(){return{text:this.text,attributes:this.attributes,htmlAttributes:this.htmlAttributes}}getDirection(){return this.text.getDirection()}isRTL(){return this.text.isRTL()}getLength(){return this.text.getLength()}canBeConsolidatedWith(e){return!this.hasAttributes()&&!e.hasAttributes()&&this.getDirection()===e.getDirection()}consolidateWith(e){let t=ui.textForStringWithAttributes(`
`),i=this.getTextWithoutBlockBreak().appendText(t);return this.copyWithText(i.appendText(e.text))}splitAtOffset(e){let t,i;return e===0?(t=null,i=this):e===this.getLength()?(t=this,i=null):(t=this.copyWithText(this.text.getTextAtRange([0,e])),i=this.copyWithText(this.text.getTextAtRange([e,this.getLength()]))),[t,i]}getBlockBreakPosition(){return this.text.getLength()-1}getTextWithoutBlockBreak(){return bS(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()}canBeGrouped(e){return this.attributes[e]}canBeGroupedWith(e,t){let i=e.getAttributes(),n=i[t],r=this.attributes[t];return r===n&&!(rt(r).group===!1&&!(()=>{if(!dd){dd=[];for(let o in zt){let{listAttribute:a}=zt[o];a!=null&&dd.push(a)}}return dd})().includes(i[t+1]))&&(this.getDirection()===e.getDirection()||e.isEmpty())}},pI=function(s){return s=fI(s),s=gI(s)},fI=function(s){let e=!1,t=s.getPieces(),i=t.slice(0,t.length-1),n=t[t.length-1];return n?(i=i.map(r=>r.isBlockBreak()?(e=!0,vI(r)):r),e?new ui([...i,n]):s):s},mI=ui.textForStringWithAttributes(`
`,{blockBreak:!0}),gI=function(s){return bS(s)?s:s.appendText(mI)},bS=function(s){let e=s.getLength();return e===0?!1:s.getTextAtRange([e-1,e]).isBlockBreak()},vI=s=>s.copyWithoutAttribute("blockBreak"),Y1=function(s){let{listAttribute:e}=rt(s);return e?[e,s]:[s]},X1=s=>s.slice(-1)[0],K1=function(s,e){let t=s.lastIndexOf(e);return t===-1?s:uv(s,t,1)},Kt=class extends Is{static fromJSON(e){return new this(Array.from(e).map(t=>an.fromJSON(t)))}static fromString(e,t){let i=ui.textForStringWithAttributes(e,t);return new this([new an(i)])}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),e.length===0&&(e=[new an]),this.blockList=Oo.box(e)}isEmpty(){let e=this.getBlockAtIndex(0);return this.blockList.length===1&&e.isEmpty()&&!e.hasAttributes()}copy(){let e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray();return new this.constructor(e)}copyUsingObjectsFromDocument(e){let t=new Zg(e.getObjects());return this.copyUsingObjectMap(t)}copyUsingObjectMap(e){let t=this.getBlocks().map(i=>e.find(i)||i.copyUsingObjectMap(e));return new this.constructor(t)}copyWithBaseBlockAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.getBlocks().map(i=>{let n=e.concat(i.getAttributes());return i.copyWithAttributes(n)});return new this.constructor(t)}replaceBlock(e,t){let i=this.blockList.indexOf(e);return i===-1?this:new this.constructor(this.blockList.replaceObjectAtIndex(t,i))}insertDocumentAtRange(e,t){let{blockList:i}=e;t=Re(t);let[n]=t,{index:r,offset:o}=this.locationFromPosition(n),a=this,l=this.getBlockAtPosition(n);return Ds(t)&&l.isEmpty()&&!l.hasAttributes()?a=new this.constructor(a.blockList.removeObjectAtIndex(r)):l.getBlockBreakPosition()===o&&n++,a=a.removeTextAtRange(t),new this.constructor(a.blockList.insertSplittableListAtPosition(i,n))}mergeDocumentAtRange(e,t){let i,n;t=Re(t);let[r]=t,o=this.locationFromPosition(r),a=this.getBlockAtIndex(o.index).getAttributes(),l=e.getBaseBlockAttributes(),c=a.slice(-l.length);if(Sr(l,c)){let f=a.slice(0,-l.length);i=e.copyWithBaseBlockAttributes(f)}else i=e.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(a);let u=i.getBlockCount(),h=i.getBlockAtIndex(0);if(Sr(a,h.getAttributes())){let f=h.getTextWithoutBlockBreak();if(n=this.insertTextAtRange(f,t),u>1){i=new this.constructor(i.getBlocks().slice(1));let p=r+f.getLength();n=n.insertDocumentAtRange(i,p)}}else n=this.insertDocumentAtRange(i,t);return n}insertTextAtRange(e,t){t=Re(t);let[i]=t,{index:n,offset:r}=this.locationFromPosition(i),o=this.removeTextAtRange(t);return new this.constructor(o.blockList.editObjectAtIndex(n,a=>a.copyWithText(a.text.insertTextAtPosition(e,r))))}removeTextAtRange(e){let t;e=Re(e);let[i,n]=e;if(Ds(e))return this;let[r,o]=Array.from(this.locationRangeFromRange(e)),a=r.index,l=r.offset,c=this.getBlockAtIndex(a),u=o.index,h=o.offset,f=this.getBlockAtIndex(u);if(n-i==1&&c.getBlockBreakPosition()===l&&f.getBlockBreakPosition()!==h&&f.text.getStringAtPosition(h)===`
`)t=this.blockList.editObjectAtIndex(u,p=>p.copyWithText(p.text.removeTextAtRange([h,h+1])));else{let p,g=c.text.getTextAtRange([0,l]),y=f.text.getTextAtRange([h,f.getLength()]),A=g.appendText(y);p=a!==u&&l===0&&c.getAttributeLevel()>=f.getAttributeLevel()?f.copyWithText(A):c.copyWithText(A);let S=u+1-a;t=this.blockList.splice(a,S,p)}return new this.constructor(t)}moveTextFromRangeToPosition(e,t){let i;e=Re(e);let[n,r]=e;if(n<=t&&t<=r)return this;let o=this.getDocumentAtRange(e),a=this.removeTextAtRange(e),l=n<t;l&&(t-=o.getLength());let[c,...u]=o.getBlocks();return u.length===0?(i=c.getTextWithoutBlockBreak(),l&&(t+=1)):i=c.text,a=a.insertTextAtRange(i,t),u.length===0?a:(o=new this.constructor(u),t+=i.getLength(),a.insertDocumentAtRange(o,t))}addAttributeAtRange(e,t,i){let{blockList:n}=this;return this.eachBlockAtRange(i,(r,o,a)=>n=n.editObjectAtIndex(a,function(){return rt(e)?r.addAttribute(e,t):o[0]===o[1]?r:r.copyWithText(r.text.addAttributeAtRange(e,t,o))})),new this.constructor(n)}addAttribute(e,t){let{blockList:i}=this;return this.eachBlock((n,r)=>i=i.editObjectAtIndex(r,()=>n.addAttribute(e,t))),new this.constructor(i)}removeAttributeAtRange(e,t){let{blockList:i}=this;return this.eachBlockAtRange(t,function(n,r,o){rt(e)?i=i.editObjectAtIndex(o,()=>n.removeAttribute(e)):r[0]!==r[1]&&(i=i.editObjectAtIndex(o,()=>n.copyWithText(n.text.removeAttributeAtRange(e,r))))}),new this.constructor(i)}updateAttributesForAttachment(e,t){let i=this.getRangeOfAttachment(t),[n]=Array.from(i),{index:r}=this.locationFromPosition(n),o=this.getTextAtIndex(r);return new this.constructor(this.blockList.editObjectAtIndex(r,a=>a.copyWithText(o.updateAttributesForAttachment(e,t))))}removeAttributeForAttachment(e,t){let i=this.getRangeOfAttachment(t);return this.removeAttributeAtRange(e,i)}setHTMLAttributeAtPosition(e,t,i){let n=this.getBlockAtPosition(e),r=n.addHTMLAttribute(t,i);return this.replaceBlock(n,r)}insertBlockBreakAtRange(e){let t;e=Re(e);let[i]=e,{offset:n}=this.locationFromPosition(i),r=this.removeTextAtRange(e);return n===0&&(t=[new an]),new this.constructor(r.blockList.insertSplittableListAtPosition(new Oo(t),i))}applyBlockAttributeAtRange(e,t,i){let n=this.expandRangeToLineBreaksAndSplitBlocks(i),r=n.document;i=n.range;let o=rt(e);if(o.listAttribute){r=r.removeLastListAttributeAtRange(i,{exceptAttributeName:e});let a=r.convertLineBreaksToBlockBreaksInRange(i);r=a.document,i=a.range}else r=o.exclusive?r.removeBlockAttributesAtRange(i):o.terminal?r.removeLastTerminalAttributeAtRange(i):r.consolidateBlocksAtRange(i);return r.addAttributeAtRange(e,t,i)}removeLastListAttributeAtRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{blockList:i}=this;return this.eachBlockAtRange(e,function(n,r,o){let a=n.getLastAttribute();a&&rt(a).listAttribute&&a!==t.exceptAttributeName&&(i=i.editObjectAtIndex(o,()=>n.removeAttribute(a)))}),new this.constructor(i)}removeLastTerminalAttributeAtRange(e){let{blockList:t}=this;return this.eachBlockAtRange(e,function(i,n,r){let o=i.getLastAttribute();o&&rt(o).terminal&&(t=t.editObjectAtIndex(r,()=>i.removeAttribute(o)))}),new this.constructor(t)}removeBlockAttributesAtRange(e){let{blockList:t}=this;return this.eachBlockAtRange(e,function(i,n,r){i.hasAttributes()&&(t=t.editObjectAtIndex(r,()=>i.copyWithoutAttributes()))}),new this.constructor(t)}expandRangeToLineBreaksAndSplitBlocks(e){let t;e=Re(e);let[i,n]=e,r=this.locationFromPosition(i),o=this.locationFromPosition(n),a=this,l=a.getBlockAtIndex(r.index);if(r.offset=l.findLineBreakInDirectionFromPosition("backward",r.offset),r.offset!=null&&(t=a.positionFromLocation(r),a=a.insertBlockBreakAtRange([t,t+1]),o.index+=1,o.offset-=a.getBlockAtIndex(r.index).getLength(),r.index+=1),r.offset=0,o.offset===0&&o.index>r.index)o.index-=1,o.offset=a.getBlockAtIndex(o.index).getBlockBreakPosition();else{let c=a.getBlockAtIndex(o.index);c.text.getStringAtRange([o.offset-1,o.offset])===`
`?o.offset-=1:o.offset=c.findLineBreakInDirectionFromPosition("forward",o.offset),o.offset!==c.getBlockBreakPosition()&&(t=a.positionFromLocation(o),a=a.insertBlockBreakAtRange([t,t+1]))}return i=a.positionFromLocation(r),n=a.positionFromLocation(o),{document:a,range:e=Re([i,n])}}convertLineBreaksToBlockBreaksInRange(e){e=Re(e);let[t]=e,i=this.getStringAtRange(e).slice(0,-1),n=this;return i.replace(/.*?\n/g,function(r){t+=r.length,n=n.insertBlockBreakAtRange([t-1,t])}),{document:n,range:e}}consolidateBlocksAtRange(e){e=Re(e);let[t,i]=e,n=this.locationFromPosition(t).index,r=this.locationFromPosition(i).index;return new this.constructor(this.blockList.consolidateFromIndexToIndex(n,r))}getDocumentAtRange(e){e=Re(e);let t=this.blockList.getSplittableListInRange(e).toArray();return new this.constructor(t)}getStringAtRange(e){let t,i=e=Re(e);return i[i.length-1]!==this.getLength()&&(t=-1),this.getDocumentAtRange(e).toString().slice(0,t)}getBlockAtIndex(e){return this.blockList.getObjectAtIndex(e)}getBlockAtPosition(e){let{index:t}=this.locationFromPosition(e);return this.getBlockAtIndex(t)}getTextAtIndex(e){var t;return(t=this.getBlockAtIndex(e))===null||t===void 0?void 0:t.text}getTextAtPosition(e){let{index:t}=this.locationFromPosition(e);return this.getTextAtIndex(t)}getPieceAtPosition(e){let{index:t,offset:i}=this.locationFromPosition(e);return this.getTextAtIndex(t).getPieceAtPosition(i)}getCharacterAtPosition(e){let{index:t,offset:i}=this.locationFromPosition(e);return this.getTextAtIndex(t).getStringAtRange([i,i+1])}getLength(){return this.blockList.getEndPosition()}getBlocks(){return this.blockList.toArray()}getBlockCount(){return this.blockList.length}getEditCount(){return this.editCount}eachBlock(e){return this.blockList.eachObject(e)}eachBlockAtRange(e,t){let i,n;e=Re(e);let[r,o]=e,a=this.locationFromPosition(r),l=this.locationFromPosition(o);if(a.index===l.index)return i=this.getBlockAtIndex(a.index),n=[a.offset,l.offset],t(i,n,a.index);for(let c=a.index;c<=l.index;c++)if(i=this.getBlockAtIndex(c),i){switch(c){case a.index:n=[a.offset,i.text.getLength()];break;case l.index:n=[0,l.offset];break;default:n=[0,i.text.getLength()]}t(i,n,c)}}getCommonAttributesAtRange(e){e=Re(e);let[t]=e;if(Ds(e))return this.getCommonAttributesAtPosition(t);{let i=[],n=[];return this.eachBlockAtRange(e,function(r,o){if(o[0]!==o[1])return i.push(r.text.getCommonAttributesAtRange(o)),n.push(J1(r))}),Bi.fromCommonAttributesOfObjects(i).merge(Bi.fromCommonAttributesOfObjects(n)).toObject()}}getCommonAttributesAtPosition(e){let t,i,{index:n,offset:r}=this.locationFromPosition(e),o=this.getBlockAtIndex(n);if(!o)return{};let a=J1(o),l=o.text.getAttributesAtPosition(r),c=o.text.getAttributesAtPosition(r-1),u=Object.keys(wr).filter(h=>wr[h].inheritable);for(t in c)i=c[t],(i===l[t]||u.includes(t))&&(a[t]=i);return a}getRangeOfCommonAttributeAtPosition(e,t){let{index:i,offset:n}=this.locationFromPosition(t),r=this.getTextAtIndex(i),[o,a]=Array.from(r.getExpandedRangeForAttributeAtOffset(e,n)),l=this.positionFromLocation({index:i,offset:o}),c=this.positionFromLocation({index:i,offset:a});return Re([l,c])}getBaseBlockAttributes(){let e=this.getBlockAtIndex(0).getAttributes();for(let t=1;t<this.getBlockCount();t++){let i=this.getBlockAtIndex(t).getAttributes(),n=Math.min(e.length,i.length);e=(()=>{let r=[];for(let o=0;o<n&&i[o]===e[o];o++)r.push(i[o]);return r})()}return e}getAttachmentById(e){for(let t of this.getAttachments())if(t.id===e)return t}getAttachmentPieces(){let e=[];return this.blockList.eachObject(t=>{let{text:i}=t;return e=e.concat(i.getAttachmentPieces())}),e}getAttachments(){return this.getAttachmentPieces().map(e=>e.attachment)}getRangeOfAttachment(e){let t=0,i=this.blockList.toArray();for(let n=0;n<i.length;n++){let{text:r}=i[n],o=r.getRangeOfAttachment(e);if(o)return Re([t+o[0],t+o[1]]);t+=r.getLength()}}getLocationRangeOfAttachment(e){let t=this.getRangeOfAttachment(e);return this.locationRangeFromRange(t)}getAttachmentPieceForAttachment(e){for(let t of this.getAttachmentPieces())if(t.attachment===e)return t}findRangesForBlockAttribute(e){let t=0,i=[];return this.getBlocks().forEach(n=>{let r=n.getLength();n.hasAttribute(e)&&i.push([t,t+r]),t+=r}),i}findRangesForTextAttribute(e){let{withValue:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=0,n=[],r=[];return this.getPieces().forEach(o=>{let a=o.getLength();(function(l){return t?l.getAttribute(e)===t:l.hasAttribute(e)})(o)&&(n[1]===i?n[1]=i+a:r.push(n=[i,i+a])),i+=a}),r}locationFromPosition(e){let t=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,e));if(t.index!=null)return t;{let i=this.getBlocks();return{index:i.length-1,offset:i[i.length-1].getLength()}}}positionFromLocation(e){return this.blockList.findPositionAtIndexAndOffset(e.index,e.offset)}locationRangeFromPosition(e){return Re(this.locationFromPosition(e))}locationRangeFromRange(e){if(!(e=Re(e)))return;let[t,i]=Array.from(e),n=this.locationFromPosition(t),r=this.locationFromPosition(i);return Re([n,r])}rangeFromLocationRange(e){let t;e=Re(e);let i=this.positionFromLocation(e[0]);return Ds(e)||(t=this.positionFromLocation(e[1])),Re([i,t])}isEqualTo(e){return this.blockList.isEqualTo(e?.blockList)}getTexts(){return this.getBlocks().map(e=>e.text)}getPieces(){let e=[];return Array.from(this.getTexts()).forEach(t=>{e.push(...Array.from(t.getPieces()||[]))}),e}getObjects(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())}toSerializableDocument(){let e=[];return this.blockList.eachObject(t=>e.push(t.copyWithText(t.text.toSerializableText()))),new this.constructor(e)}toString(){return this.blockList.toString()}toJSON(){return this.blockList.toJSON()}toConsole(){return JSON.stringify(this.blockList.toArray().map(e=>JSON.parse(e.text.toConsole())))}},J1=function(s){let e={},t=s.getLastAttribute();return t&&(e[t]=!0),e},bI="style href src width height language class".split(" "),yI="javascript:".split(" "),wI="script iframe form noscript".split(" "),Ll=class extends tt{static sanitize(e,t){let i=new this(e,t);return i.sanitize(),i}constructor(e){let{allowedAttributes:t,forbiddenProtocols:i,forbiddenElements:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.allowedAttributes=t||bI,this.forbiddenProtocols=i||yI,this.forbiddenElements=n||wI,this.body=EI(e)}sanitize(){return this.sanitizeElements(),this.normalizeListElementNesting()}getHTML(){return this.body.innerHTML}getBody(){return this.body}sanitizeElements(){let e=md(this.body),t=[];for(;e.nextNode();){let i=e.currentNode;switch(i.nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(i)?t.push(i):this.sanitizeElement(i);break;case Node.COMMENT_NODE:t.push(i)}}return t.forEach(i=>cn(i)),this.body}sanitizeElement(e){return e.hasAttribute("href")&&this.forbiddenProtocols.includes(e.protocol)&&e.removeAttribute("href"),Array.from(e.attributes).forEach(t=>{let{name:i}=t;this.allowedAttributes.includes(i)||i.indexOf("data-trix")===0||e.removeAttribute(i)}),e}normalizeListElementNesting(){return Array.from(this.body.querySelectorAll("ul,ol")).forEach(e=>{let t=e.previousElementSibling;t&&Bt(t)==="li"&&t.appendChild(e)}),this.body}elementIsRemovable(e){if(e?.nodeType===Node.ELEMENT_NODE)return this.elementIsForbidden(e)||this.elementIsntSerializable(e)}elementIsForbidden(e){return this.forbiddenElements.includes(Bt(e))}elementIsntSerializable(e){return e.getAttribute("data-trix-serialize")==="false"&&!vr(e)}},EI=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";s=s.replace(/<\/html[^>]*>[^]*$/i,"</html>");let e=document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=s,Array.from(e.head.querySelectorAll("style")).forEach(t=>{e.body.appendChild(t)}),e.body},Bg=function(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{string:s=Al(s),attributes:e,type:"string"}},Z1=(s,e)=>{try{let t=JSON.parse(s.getAttribute("data-trix-".concat(e)));return t.contentType==="text/html"&&t.content&&(t.content=Ll.sanitize(t.content).getHTML()),t}catch{return{}}},Tr=class extends tt{static parse(e,t){let i=new this(e,t);return i.parse(),i}constructor(e){let{referenceElement:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.html=e,this.referenceElement=t,this.blocks=[],this.blockElements=[],this.processedElements=[]}getDocument(){return Kt.fromJSON(this.blocks)}parse(){try{this.createHiddenContainer();let e=Ll.sanitize(this.html).getHTML();this.containerElement.innerHTML=e;let t=md(this.containerElement,{usingFilter:AI});for(;t.nextNode();)this.processNode(t.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}}createHiddenContainer(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=Ce({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))}removeHiddenContainer(){return cn(this.containerElement)}processNode(e){switch(e.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(e))return this.appendBlockForTextNode(e),this.processTextNode(e);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(e),this.processElement(e)}}appendBlockForTextNode(e){let t=e.parentNode;if(t===this.currentBlockElement&&this.isBlockElement(e.previousSibling))return this.appendStringWithAttributes(`
`);if(t===this.containerElement||this.isBlockElement(t)){var i;let n=this.getBlockAttributes(t),r=this.getBlockHTMLAttributes(t);Sr(n,(i=this.currentBlock)===null||i===void 0?void 0:i.attributes)||(this.currentBlock=this.appendBlockForAttributesWithElement(n,t,r),this.currentBlockElement=t)}}appendBlockForElement(e){let t=this.isBlockElement(e),i=mr(this.currentBlockElement,e);if(t&&!this.isBlockElement(e.firstChild)){if(!this.isInsignificantTextNode(e.firstChild)||!this.isBlockElement(e.firstElementChild)){let n=this.getBlockAttributes(e),r=this.getBlockHTMLAttributes(e);if(e.firstChild){if(i&&Sr(n,this.currentBlock.attributes))return this.appendStringWithAttributes(`
`);this.currentBlock=this.appendBlockForAttributesWithElement(n,e,r),this.currentBlockElement=e}}}else if(this.currentBlockElement&&!i&&!t){let n=this.findParentBlockElement(e);if(n)return this.appendBlockForElement(n);this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null}}findParentBlockElement(e){let{parentElement:t}=e;for(;t&&t!==this.containerElement;){if(this.isBlockElement(t)&&this.blockElements.includes(t))return t;t=t.parentElement}return null}processTextNode(e){let t=e.data;var i;return Q1(e.parentNode)||(t=pv(t),yS((i=e.previousSibling)===null||i===void 0?void 0:i.textContent)&&(t=TI(t))),this.appendStringWithAttributes(t,this.getTextAttributes(e.parentNode))}processElement(e){let t;if(vr(e)){if(t=Z1(e,"attachment"),Object.keys(t).length){let i=this.getTextAttributes(e);this.appendAttachmentWithAttributes(t,i),e.innerHTML=""}return this.processedElements.push(e)}switch(Bt(e)){case"br":return this.isExtraBR(e)||this.isBlockElement(e.nextSibling)||this.appendStringWithAttributes(`
`,this.getTextAttributes(e)),this.processedElements.push(e);case"img":t={url:e.getAttribute("src"),contentType:"image"};let i=(n=>{let r=n.getAttribute("width"),o=n.getAttribute("height"),a={};return r&&(a.width=parseInt(r,10)),o&&(a.height=parseInt(o,10)),a})(e);for(let n in i){let r=i[n];t[n]=r}return this.appendAttachmentWithAttributes(t,this.getTextAttributes(e)),this.processedElements.push(e);case"tr":if(this.needsTableSeparator(e))return this.appendStringWithAttributes(pd.tableRowSeparator);break;case"td":if(this.needsTableSeparator(e))return this.appendStringWithAttributes(pd.tableCellSeparator)}}appendBlockForAttributesWithElement(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.blockElements.push(t);let n=function(){return{text:[],attributes:arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},htmlAttributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}}}(e,i);return this.blocks.push(n),n}appendEmptyBlock(){return this.appendBlockForAttributesWithElement([],null)}appendStringWithAttributes(e,t){return this.appendPiece(Bg(e,t))}appendAttachmentWithAttributes(e,t){return this.appendPiece(function(i){return{attachment:i,attributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},type:"attachment"}}(e,t))}appendPiece(e){return this.blocks.length===0&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(e)}appendStringToTextAtIndex(e,t){let{text:i}=this.blocks[t],n=i[i.length-1];if(n?.type!=="string")return i.push(Bg(e));n.string+=e}prependStringToTextAtIndex(e,t){let{text:i}=this.blocks[t],n=i[0];if(n?.type!=="string")return i.unshift(Bg(e));n.string=e+n.string}getTextAttributes(e){let t,i={};for(let n in wr){let r=wr[n];if(r.tagName&&ln(e,{matchingSelector:r.tagName,untilNode:this.containerElement}))i[n]=!0;else if(r.parser){if(t=r.parser(e),t){let o=!1;for(let a of this.findBlockElementAncestors(e))if(r.parser(a)===t){o=!0;break}o||(i[n]=t)}}else r.styleProperty&&(t=e.style[r.styleProperty],t&&(i[n]=t))}if(vr(e)){let n=Z1(e,"attributes");for(let r in n)t=n[r],i[r]=t}return i}getBlockAttributes(e){let t=[];for(;e&&e!==this.containerElement;){for(let n in zt){let r=zt[n];var i;r.parse!==!1&&Bt(e)===r.tagName&&((i=r.test)!==null&&i!==void 0&&i.call(r,e)||!r.test)&&(t.push(n),r.listAttribute&&t.push(r.listAttribute))}e=e.parentNode}return t.reverse()}getBlockHTMLAttributes(e){let t={},i=Object.values(zt).find(n=>n.tagName===Bt(e));return(i?.htmlAttributes||[]).forEach(n=>{e.hasAttribute(n)&&(t[n]=e.getAttribute(n))}),t}findBlockElementAncestors(e){let t=[];for(;e&&e!==this.containerElement;){let i=Bt(e);xl().includes(i)&&t.push(e),e=e.parentNode}return t}isBlockElement(e){if(e?.nodeType===Node.ELEMENT_NODE&&!vr(e)&&!ln(e,{matchingSelector:"td",untilNode:this.containerElement}))return xl().includes(Bt(e))||window.getComputedStyle(e).display==="block"}isInsignificantTextNode(e){if(e?.nodeType!==Node.TEXT_NODE||!xI(e.data))return;let{parentNode:t,previousSibling:i,nextSibling:n}=e;return SI(t.previousSibling)&&!this.isBlockElement(t.previousSibling)||Q1(t)?void 0:!i||this.isBlockElement(i)||!n||this.isBlockElement(n)}isExtraBR(e){return Bt(e)==="br"&&this.isBlockElement(e.parentNode)&&e.parentNode.lastChild===e}needsTableSeparator(e){if(pd.removeBlankTableCells){var t;let i=(t=e.previousSibling)===null||t===void 0?void 0:t.textContent;return i&&/\S/.test(i)}return e.previousSibling}translateBlockElementMarginsToNewlines(){let e=this.getMarginOfDefaultBlockElement();for(let t=0;t<this.blocks.length;t++){let i=this.getMarginOfBlockElementAtIndex(t);i&&(i.top>2*e.top&&this.prependStringToTextAtIndex(`
`,t),i.bottom>2*e.bottom&&this.appendStringToTextAtIndex(`
`,t))}}getMarginOfBlockElementAtIndex(e){let t=this.blockElements[e];if(t&&t.textContent&&!xl().includes(Bt(t))&&!this.processedElements.includes(t))return eS(t)}getMarginOfDefaultBlockElement(){let e=Ce(zt.default.tagName);return this.containerElement.appendChild(e),eS(e)}},Q1=function(s){let{whiteSpace:e}=window.getComputedStyle(s);return["pre","pre-wrap","pre-line"].includes(e)},SI=s=>s&&!yS(s.textContent),eS=function(s){let e=window.getComputedStyle(s);if(e.display==="block")return{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}},AI=function(s){return Bt(s)==="style"?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},TI=s=>s.replace(new RegExp("^".concat(hv.source,"+")),""),xI=s=>new RegExp("^".concat(hv.source,"*$")).test(s),yS=s=>/\s$/.test(s),CI=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],tv="data-trix-serialized-attributes",PI="[".concat(tv,"]"),_I=new RegExp("<!--block-->","g"),OI={"application/json":function(s){let e;if(s instanceof Kt)e=s;else{if(!(s instanceof HTMLElement))throw new Error("unserializable object");e=Tr.parse(s.innerHTML).getDocument()}return e.toSerializableDocument().toJSONString()},"text/html":function(s){let e;if(s instanceof Kt)e=Co.render(s);else{if(!(s instanceof HTMLElement))throw new Error("unserializable object");e=s.cloneNode(!0)}return Array.from(e.querySelectorAll("[data-trix-serialize=false]")).forEach(t=>{cn(t)}),CI.forEach(t=>{Array.from(e.querySelectorAll("[".concat(t,"]"))).forEach(i=>{i.removeAttribute(t)})}),Array.from(e.querySelectorAll(PI)).forEach(t=>{try{let i=JSON.parse(t.getAttribute(tv));t.removeAttribute(tv);for(let n in i){let r=i[n];t.setAttribute(n,r)}}catch{}}),e.innerHTML.replace(_I,"")}},MI=Object.freeze({__proto__:null}),Ye=class extends tt{constructor(e,t){super(...arguments),this.attachmentManager=e,this.attachment=t,this.id=this.attachment.id,this.file=this.attachment.file}remove(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)}};Ye.proxyMethod("attachment.getAttribute"),Ye.proxyMethod("attachment.hasAttribute"),Ye.proxyMethod("attachment.setAttribute"),Ye.proxyMethod("attachment.getAttributes"),Ye.proxyMethod("attachment.setAttributes"),Ye.proxyMethod("attachment.isPending"),Ye.proxyMethod("attachment.isPreviewable"),Ye.proxyMethod("attachment.getURL"),Ye.proxyMethod("attachment.getHref"),Ye.proxyMethod("attachment.getFilename"),Ye.proxyMethod("attachment.getFilesize"),Ye.proxyMethod("attachment.getFormattedFilesize"),Ye.proxyMethod("attachment.getExtension"),Ye.proxyMethod("attachment.getContentType"),Ye.proxyMethod("attachment.getFile"),Ye.proxyMethod("attachment.setFile"),Ye.proxyMethod("attachment.releaseFile"),Ye.proxyMethod("attachment.getUploadProgress"),Ye.proxyMethod("attachment.setUploadProgress");var Ad=class extends tt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.managedAttachments={},Array.from(e).forEach(t=>{this.manageAttachment(t)})}getAttachments(){let e=[];for(let t in this.managedAttachments){let i=this.managedAttachments[t];e.push(i)}return e}manageAttachment(e){return this.managedAttachments[e.id]||(this.managedAttachments[e.id]=new Ye(this,e)),this.managedAttachments[e.id]}attachmentIsManaged(e){return e.id in this.managedAttachments}requestRemovalOfAttachment(e){var t,i;if(this.attachmentIsManaged(e))return(t=this.delegate)===null||t===void 0||(i=t.attachmentManagerDidRequestRemovalOfAttachment)===null||i===void 0?void 0:i.call(t,e)}unmanageAttachment(e){let t=this.managedAttachments[e.id];return delete this.managedAttachments[e.id],t}},Td=class{constructor(e){this.composition=e,this.document=this.composition.document;let t=this.composition.getSelectedRange();this.startPosition=t[0],this.endPosition=t[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}shouldInsertBlockBreak(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?this.startLocation.offset!==0:this.breaksOnReturn&&this.nextCharacter!==`
`}shouldBreakFormattedBlock(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&this.nextCharacter===`
`||this.previousCharacter===`
`)}shouldDecreaseListLevel(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()}shouldPrependListItem(){return this.block.isListItem()&&this.startLocation.offset===0&&!this.block.isEmpty()}shouldRemoveLastBlockAttribute(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()}},is=class extends tt{constructor(){super(...arguments),this.document=new Kt,this.attachments=[],this.currentAttributes={},this.revision=0}setDocument(e){var t,i;if(!e.isEqualTo(this.document))return this.document=e,this.refreshAttachments(),this.revision++,(t=this.delegate)===null||t===void 0||(i=t.compositionDidChangeDocument)===null||i===void 0?void 0:i.call(t,e)}getSnapshot(){return{document:this.document,selectedRange:this.getSelectedRange()}}loadSnapshot(e){var t,i,n,r;let{document:o,selectedRange:a}=e;return(t=this.delegate)===null||t===void 0||(i=t.compositionWillLoadSnapshot)===null||i===void 0||i.call(t),this.setDocument(o??new Kt),this.setSelection(a??[0,0]),(n=this.delegate)===null||n===void 0||(r=n.compositionDidLoadSnapshot)===null||r===void 0?void 0:r.call(n)}insertText(e){let{updatePosition:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{updatePosition:!0},i=this.getSelectedRange();this.setDocument(this.document.insertTextAtRange(e,i));let n=i[0],r=n+e.getLength();return t&&this.setSelection(r),this.notifyDelegateOfInsertionAtRange([n,r])}insertBlock(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new an,t=new Kt([e]);return this.insertDocument(t)}insertDocument(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Kt,t=this.getSelectedRange();this.setDocument(this.document.insertDocumentAtRange(e,t));let i=t[0],n=i+e.getLength();return this.setSelection(n),this.notifyDelegateOfInsertionAtRange([i,n])}insertString(e,t){let i=this.getCurrentTextAttributes(),n=ui.textForStringWithAttributes(e,i);return this.insertText(n,t)}insertBlockBreak(){let e=this.getSelectedRange();this.setDocument(this.document.insertBlockBreakAtRange(e));let t=e[0],i=t+1;return this.setSelection(i),this.notifyDelegateOfInsertionAtRange([t,i])}insertLineBreak(){let e=new Td(this);if(e.shouldDecreaseListLevel())return this.decreaseListLevel(),this.setSelection(e.startPosition);if(e.shouldPrependListItem()){let t=new Kt([e.block.copyWithoutText()]);return this.insertDocument(t)}return e.shouldInsertBlockBreak()?this.insertBlockBreak():e.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():e.shouldBreakFormattedBlock()?this.breakFormattedBlock(e):this.insertString(`
`)}insertHTML(e){let t=Tr.parse(e).getDocument(),i=this.getSelectedRange();this.setDocument(this.document.mergeDocumentAtRange(t,i));let n=i[0],r=n+t.getLength()-1;return this.setSelection(r),this.notifyDelegateOfInsertionAtRange([n,r])}replaceHTML(e){let t=Tr.parse(e).getDocument().copyUsingObjectsFromDocument(this.document),i=this.getLocationRange({strict:!1}),n=this.document.rangeFromLocationRange(i);return this.setDocument(t),this.setSelection(n)}insertFile(e){return this.insertFiles([e])}insertFiles(e){let t=[];return Array.from(e).forEach(i=>{var n;if((n=this.delegate)!==null&&n!==void 0&&n.compositionShouldAcceptFile(i)){let r=Po.attachmentForFile(i);t.push(r)}}),this.insertAttachments(t)}insertAttachment(e){return this.insertAttachments([e])}insertAttachments(e){let t=new ui;return Array.from(e).forEach(i=>{var n;let r=i.getType(),o=(n=ov[r])===null||n===void 0?void 0:n.presentation,a=this.getCurrentTextAttributes();o&&(a.presentation=o);let l=ui.textForAttachmentWithAttributes(i,a);t=t.appendText(l)}),this.insertText(t)}shouldManageDeletingInDirection(e){let t=this.getLocationRange();if(Ds(t)){if(e==="backward"&&t[0].offset===0||this.shouldManageMovingCursorInDirection(e))return!0}else if(t[0].index!==t[1].index)return!0;return!1}deleteInDirection(e){let t,i,n,{length:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.getLocationRange(),a=this.getSelectedRange(),l=Ds(a);if(l?i=e==="backward"&&o[0].offset===0:n=o[0].index!==o[1].index,i&&this.canDecreaseBlockAttributeLevel()){let c=this.getBlock();if(c.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(a[0]),c.isEmpty())return!1}return l&&(a=this.getExpandedRangeInDirection(e,{length:r}),e==="backward"&&(t=this.getAttachmentAtRange(a))),t?(this.editAttachment(t),!1):(this.setDocument(this.document.removeTextAtRange(a)),this.setSelection(a[0]),!i&&!n&&void 0)}moveTextFromRange(e){let[t]=Array.from(this.getSelectedRange());return this.setDocument(this.document.moveTextFromRangeToPosition(e,t)),this.setSelection(t)}removeAttachment(e){let t=this.document.getRangeOfAttachment(e);if(t)return this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(t)),this.setSelection(t[0])}removeLastBlockAttribute(){let[e,t]=Array.from(this.getSelectedRange()),i=this.document.getBlockAtPosition(t);return this.removeCurrentAttribute(i.getLastAttribute()),this.setSelection(e)}insertPlaceholder(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")}selectPlaceholder(){if(this.placeholderPosition!=null)return this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+1]),this.getSelectedRange()}forgetPlaceholder(){this.placeholderPosition=null}hasCurrentAttribute(e){let t=this.currentAttributes[e];return t!=null&&t!==!1}toggleCurrentAttribute(e){let t=!this.currentAttributes[e];return t?this.setCurrentAttribute(e,t):this.removeCurrentAttribute(e)}canSetCurrentAttribute(e){return rt(e)?this.canSetCurrentBlockAttribute(e):this.canSetCurrentTextAttribute(e)}canSetCurrentTextAttribute(e){let t=this.getSelectedDocument();if(t){for(let i of Array.from(t.getAttachments()))if(!i.hasContent())return!1;return!0}}canSetCurrentBlockAttribute(e){let t=this.getBlock();if(t)return!t.isTerminalBlock()}setCurrentAttribute(e,t){return rt(e)?this.setBlockAttribute(e,t):(this.setTextAttribute(e,t),this.currentAttributes[e]=t,this.notifyDelegateOfCurrentAttributesChange())}setHTMLAtributeAtPosition(e,t,i){var n;let r=this.document.getBlockAtPosition(e),o=(n=rt(r.getLastAttribute()))===null||n===void 0?void 0:n.htmlAttributes;if(r&&o!=null&&o.includes(t)){let a=this.document.setHTMLAttributeAtPosition(e,t,i);this.setDocument(a)}}setTextAttribute(e,t){let i=this.getSelectedRange();if(!i)return;let[n,r]=Array.from(i);if(n!==r)return this.setDocument(this.document.addAttributeAtRange(e,t,i));if(e==="href"){let o=ui.textForStringWithAttributes(t,{href:t});return this.insertText(o)}}setBlockAttribute(e,t){let i=this.getSelectedRange();if(this.canSetCurrentAttribute(e))return this.setDocument(this.document.applyBlockAttributeAtRange(e,t,i)),this.setSelection(i)}removeCurrentAttribute(e){return rt(e)?(this.removeBlockAttribute(e),this.updateCurrentAttributes()):(this.removeTextAttribute(e),delete this.currentAttributes[e],this.notifyDelegateOfCurrentAttributesChange())}removeTextAttribute(e){let t=this.getSelectedRange();if(t)return this.setDocument(this.document.removeAttributeAtRange(e,t))}removeBlockAttribute(e){let t=this.getSelectedRange();if(t)return this.setDocument(this.document.removeAttributeAtRange(e,t))}canDecreaseNestingLevel(){var e;return((e=this.getBlock())===null||e===void 0?void 0:e.getNestingLevel())>0}canIncreaseNestingLevel(){var e;let t=this.getBlock();if(t){if((e=rt(t.getLastNestableAttribute()))===null||e===void 0||!e.listAttribute)return t.getNestingLevel()>0;{let i=this.getPreviousBlock();if(i)return function(){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Sr((arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).slice(0,n.length),n)}(i.getListItemAttributes(),t.getListItemAttributes())}}}decreaseNestingLevel(){let e=this.getBlock();if(e)return this.setDocument(this.document.replaceBlock(e,e.decreaseNestingLevel()))}increaseNestingLevel(){let e=this.getBlock();if(e)return this.setDocument(this.document.replaceBlock(e,e.increaseNestingLevel()))}canDecreaseBlockAttributeLevel(){var e;return((e=this.getBlock())===null||e===void 0?void 0:e.getAttributeLevel())>0}decreaseBlockAttributeLevel(){var e;let t=(e=this.getBlock())===null||e===void 0?void 0:e.getLastAttribute();if(t)return this.removeCurrentAttribute(t)}decreaseListLevel(){let[e]=Array.from(this.getSelectedRange()),{index:t}=this.document.locationFromPosition(e),i=t,n=this.getBlock().getAttributeLevel(),r=this.document.getBlockAtIndex(i+1);for(;r&&r.isListItem()&&!(r.getAttributeLevel()<=n);)i++,r=this.document.getBlockAtIndex(i+1);e=this.document.positionFromLocation({index:t,offset:0});let o=this.document.positionFromLocation({index:i,offset:0});return this.setDocument(this.document.removeLastListAttributeAtRange([e,o]))}updateCurrentAttributes(){let e=this.getSelectedRange({ignoreLock:!0});if(e){let t=this.document.getCommonAttributesAtRange(e);if(Array.from(Xg()).forEach(i=>{t[i]||this.canSetCurrentAttribute(i)||(t[i]=!1)}),!Lo(t,this.currentAttributes))return this.currentAttributes=t,this.notifyDelegateOfCurrentAttributesChange()}}getCurrentAttributes(){return lS.call({},this.currentAttributes)}getCurrentTextAttributes(){let e={};for(let t in this.currentAttributes){let i=this.currentAttributes[t];i!==!1&&Kg(t)&&(e[t]=i)}return e}freezeSelection(){return this.setCurrentAttribute("frozen",!0)}thawSelection(){return this.removeCurrentAttribute("frozen")}hasFrozenSelection(){return this.hasCurrentAttribute("frozen")}setSelection(e){var t;let i=this.document.locationRangeFromRange(e);return(t=this.delegate)===null||t===void 0?void 0:t.compositionDidRequestChangingSelectionToLocationRange(i)}getSelectedRange(){let e=this.getLocationRange();if(e)return this.document.rangeFromLocationRange(e)}setSelectedRange(e){let t=this.document.locationRangeFromRange(e);return this.getSelectionManager().setLocationRange(t)}getPosition(){let e=this.getLocationRange();if(e)return this.document.positionFromLocation(e[0])}getLocationRange(e){return this.targetLocationRange?this.targetLocationRange:this.getSelectionManager().getLocationRange(e)||Re({index:0,offset:0})}withTargetLocationRange(e,t){let i;this.targetLocationRange=e;try{i=t()}finally{this.targetLocationRange=null}return i}withTargetRange(e,t){let i=this.document.locationRangeFromRange(e);return this.withTargetLocationRange(i,t)}withTargetDOMRange(e,t){let i=this.createLocationRangeFromDOMRange(e,{strict:!1});return this.withTargetLocationRange(i,t)}getExpandedRangeInDirection(e){let{length:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},[i,n]=Array.from(this.getSelectedRange());return e==="backward"?t?i-=t:i=this.translateUTF16PositionFromOffset(i,-1):t?n+=t:n=this.translateUTF16PositionFromOffset(n,1),Re([i,n])}shouldManageMovingCursorInDirection(e){if(this.editingAttachment)return!0;let t=this.getExpandedRangeInDirection(e);return this.getAttachmentAtRange(t)!=null}moveCursorInDirection(e){let t,i;if(this.editingAttachment)i=this.document.getRangeOfAttachment(this.editingAttachment);else{let n=this.getSelectedRange();i=this.getExpandedRangeInDirection(e),t=!gd(n,i)}if(e==="backward"?this.setSelectedRange(i[0]):this.setSelectedRange(i[1]),t){let n=this.getAttachmentAtRange(i);if(n)return this.editAttachment(n)}}expandSelectionInDirection(e){let{length:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getExpandedRangeInDirection(e,{length:t});return this.setSelectedRange(i)}expandSelectionForEditing(){if(this.hasCurrentAttribute("href"))return this.expandSelectionAroundCommonAttribute("href")}expandSelectionAroundCommonAttribute(e){let t=this.getPosition(),i=this.document.getRangeOfCommonAttributeAtPosition(e,t);return this.setSelectedRange(i)}selectionContainsAttachments(){var e;return((e=this.getSelectedAttachments())===null||e===void 0?void 0:e.length)>0}selectionIsInCursorTarget(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())}positionIsCursorTarget(e){let t=this.document.locationFromPosition(e);if(t)return this.locationIsCursorTarget(t)}positionIsBlockBreak(e){var t;return(t=this.document.getPieceAtPosition(e))===null||t===void 0?void 0:t.isBlockBreak()}getSelectedDocument(){let e=this.getSelectedRange();if(e)return this.document.getDocumentAtRange(e)}getSelectedAttachments(){var e;return(e=this.getSelectedDocument())===null||e===void 0?void 0:e.getAttachments()}getAttachments(){return this.attachments.slice(0)}refreshAttachments(){let e=this.document.getAttachments(),{added:t,removed:i}=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=[],a=[],l=new Set;n.forEach(u=>{l.add(u)});let c=new Set;return r.forEach(u=>{c.add(u),l.has(u)||o.push(u)}),n.forEach(u=>{c.has(u)||a.push(u)}),{added:o,removed:a}}(this.attachments,e);return this.attachments=e,Array.from(i).forEach(n=>{var r,o;n.delegate=null,(r=this.delegate)===null||r===void 0||(o=r.compositionDidRemoveAttachment)===null||o===void 0||o.call(r,n)}),(()=>{let n=[];return Array.from(t).forEach(r=>{var o,a;r.delegate=this,n.push((o=this.delegate)===null||o===void 0||(a=o.compositionDidAddAttachment)===null||a===void 0?void 0:a.call(o,r))}),n})()}attachmentDidChangeAttributes(e){var t,i;return this.revision++,(t=this.delegate)===null||t===void 0||(i=t.compositionDidEditAttachment)===null||i===void 0?void 0:i.call(t,e)}attachmentDidChangePreviewURL(e){var t,i;return this.revision++,(t=this.delegate)===null||t===void 0||(i=t.compositionDidChangeAttachmentPreviewURL)===null||i===void 0?void 0:i.call(t,e)}editAttachment(e,t){var i,n;if(e!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=e,(i=this.delegate)===null||i===void 0||(n=i.compositionDidStartEditingAttachment)===null||n===void 0?void 0:n.call(i,this.editingAttachment,t)}stopEditingAttachment(){var e,t;this.editingAttachment&&((e=this.delegate)===null||e===void 0||(t=e.compositionDidStopEditingAttachment)===null||t===void 0||t.call(e,this.editingAttachment),this.editingAttachment=null)}updateAttributesForAttachment(e,t){return this.setDocument(this.document.updateAttributesForAttachment(e,t))}removeAttributeForAttachment(e,t){return this.setDocument(this.document.removeAttributeForAttachment(e,t))}breakFormattedBlock(e){let{document:t}=e,{block:i}=e,n=e.startPosition,r=[n-1,n];i.getBlockBreakPosition()===e.startLocation.offset?(i.breaksOnReturn()&&e.nextCharacter===`
`?n+=1:t=t.removeTextAtRange(r),r=[n,n]):e.nextCharacter===`
`?e.previousCharacter===`
`?r=[n-1,n+1]:(r=[n,n+1],n+=1):e.startLocation.offset-1!=0&&(n+=1);let o=new Kt([i.removeLastAttribute().copyWithoutText()]);return this.setDocument(t.insertDocumentAtRange(o,r)),this.setSelection(n)}getPreviousBlock(){let e=this.getLocationRange();if(e){let{index:t}=e[0];if(t>0)return this.document.getBlockAtIndex(t-1)}}getBlock(){let e=this.getLocationRange();if(e)return this.document.getBlockAtIndex(e[0].index)}getAttachmentAtRange(e){let t=this.document.getDocumentAtRange(e);if(t.toString()==="".concat("\uFFFC",`
`))return t.getAttachments()[0]}notifyDelegateOfCurrentAttributesChange(){var e,t;return(e=this.delegate)===null||e===void 0||(t=e.compositionDidChangeCurrentAttributes)===null||t===void 0?void 0:t.call(e,this.currentAttributes)}notifyDelegateOfInsertionAtRange(e){var t,i;return(t=this.delegate)===null||t===void 0||(i=t.compositionDidPerformInsertionAtRange)===null||i===void 0?void 0:i.call(t,e)}translateUTF16PositionFromOffset(e,t){let i=this.document.toUTF16String(),n=i.offsetFromUCS2Offset(e);return i.offsetToUCS2Offset(n+t)}};is.proxyMethod("getSelectionManager().getPointRange"),is.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),is.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),is.proxyMethod("getSelectionManager().locationIsCursorTarget"),is.proxyMethod("getSelectionManager().selectionIsExpanded"),is.proxyMethod("delegate?.getSelectionManager");var kl=class extends tt{constructor(e){super(...arguments),this.composition=e,this.undoEntries=[],this.redoEntries=[]}recordUndoEntry(e){let{context:t,consolidatable:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.undoEntries.slice(-1)[0];if(!i||!LI(n,e,t)){let r=this.createEntry({description:e,context:t});this.undoEntries.push(r),this.redoEntries=[]}}undo(){let e=this.undoEntries.pop();if(e){let t=this.createEntry(e);return this.redoEntries.push(t),this.composition.loadSnapshot(e.snapshot)}}redo(){let e=this.redoEntries.pop();if(e){let t=this.createEntry(e);return this.undoEntries.push(t),this.composition.loadSnapshot(e.snapshot)}}canUndo(){return this.undoEntries.length>0}canRedo(){return this.redoEntries.length>0}createEntry(){let{description:e,context:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{description:e?.toString(),context:JSON.stringify(t),snapshot:this.composition.getSnapshot()}}},LI=(s,e,t)=>s?.description===e?.toString()&&s?.context===JSON.stringify(t),zg="attachmentGallery",xd=class{constructor(e){this.document=e.document,this.selectedRange=e.selectedRange}perform(){return this.removeBlockAttribute(),this.applyBlockAttribute()}getSnapshot(){return{document:this.document,selectedRange:this.selectedRange}}removeBlockAttribute(){return this.findRangesOfBlocks().map(e=>this.document=this.document.removeAttributeAtRange(zg,e))}applyBlockAttribute(){let e=0;this.findRangesOfPieces().forEach(t=>{t[1]-t[0]>1&&(t[0]+=e,t[1]+=e,this.document.getCharacterAtPosition(t[1])!==`
`&&(this.document=this.document.insertBlockBreakAtRange(t[1]),t[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),t[1]++,e++),t[0]!==0&&this.document.getCharacterAtPosition(t[0]-1)!==`
`&&(this.document=this.document.insertBlockBreakAtRange(t[0]),t[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),t[0]++,e++),this.document=this.document.applyBlockAttributeAtRange(zg,!0,t))})}findRangesOfBlocks(){return this.document.findRangesForBlockAttribute(zg)}findRangesOfPieces(){return this.document.findRangesForTextAttribute("presentation",{withValue:"gallery"})}moveSelectedRangeForward(){this.selectedRange[0]+=1,this.selectedRange[1]+=1}},wS=function(s){let e=new xd(s);return e.perform(),e.getSnapshot()},kI=[wS],Cd=class{constructor(e,t,i){this.insertFiles=this.insertFiles.bind(this),this.composition=e,this.selectionManager=t,this.element=i,this.undoManager=new kl(this.composition),this.filters=kI.slice(0)}loadDocument(e){return this.loadSnapshot({document:e,selectedRange:[0,0]})}loadHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=Tr.parse(e,{referenceElement:this.element}).getDocument();return this.loadDocument(t)}loadJSON(e){let{document:t,selectedRange:i}=e;return t=Kt.fromJSON(t),this.loadSnapshot({document:t,selectedRange:i})}loadSnapshot(e){return this.undoManager=new kl(this.composition),this.composition.loadSnapshot(e)}getDocument(){return this.composition.document}getSelectedDocument(){return this.composition.getSelectedDocument()}getSnapshot(){return this.composition.getSnapshot()}toJSON(){return this.getSnapshot()}deleteInDirection(e){return this.composition.deleteInDirection(e)}insertAttachment(e){return this.composition.insertAttachment(e)}insertAttachments(e){return this.composition.insertAttachments(e)}insertDocument(e){return this.composition.insertDocument(e)}insertFile(e){return this.composition.insertFile(e)}insertFiles(e){return this.composition.insertFiles(e)}insertHTML(e){return this.composition.insertHTML(e)}insertString(e){return this.composition.insertString(e)}insertText(e){return this.composition.insertText(e)}insertLineBreak(){return this.composition.insertLineBreak()}getSelectedRange(){return this.composition.getSelectedRange()}getPosition(){return this.composition.getPosition()}getClientRectAtPosition(e){let t=this.getDocument().locationRangeFromRange([e,e+1]);return this.selectionManager.getClientRectAtLocationRange(t)}expandSelectionInDirection(e){return this.composition.expandSelectionInDirection(e)}moveCursorInDirection(e){return this.composition.moveCursorInDirection(e)}setSelectedRange(e){return this.composition.setSelectedRange(e)}activateAttribute(e){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return this.composition.setCurrentAttribute(e,t)}attributeIsActive(e){return this.composition.hasCurrentAttribute(e)}canActivateAttribute(e){return this.composition.canSetCurrentAttribute(e)}deactivateAttribute(e){return this.composition.removeCurrentAttribute(e)}setHTMLAtributeAtPosition(e,t,i){this.composition.setHTMLAtributeAtPosition(e,t,i)}canDecreaseNestingLevel(){return this.composition.canDecreaseNestingLevel()}canIncreaseNestingLevel(){return this.composition.canIncreaseNestingLevel()}decreaseNestingLevel(){if(this.canDecreaseNestingLevel())return this.composition.decreaseNestingLevel()}increaseNestingLevel(){if(this.canIncreaseNestingLevel())return this.composition.increaseNestingLevel()}canRedo(){return this.undoManager.canRedo()}canUndo(){return this.undoManager.canUndo()}recordUndoEntry(e){let{context:t,consolidatable:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.undoManager.recordUndoEntry(e,{context:t,consolidatable:i})}redo(){if(this.canRedo())return this.undoManager.redo()}undo(){if(this.canUndo())return this.undoManager.undo()}},Pd=class{constructor(e){this.element=e}findLocationFromContainerAndOffset(e,t){let{strict:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{strict:!0},n=0,r=!1,o={index:0,offset:0},a=this.findAttachmentElementParentForNode(e);a&&(e=a.parentNode,t=Og(a));let l=md(this.element,{usingFilter:ES});for(;l.nextNode();){let c=l.currentNode;if(c===e&&Cl(e)){To(c)||(o.offset+=t);break}if(c.parentNode===e){if(n++===t)break}else if(!mr(e,c)&&n>0)break;R1(c,{strict:i})?(r&&o.index++,o.offset=0,r=!0):o.offset+=$g(c)}return o}findContainerAndOffsetFromLocation(e){let t,i;if(e.index===0&&e.offset===0){for(t=this.element,i=0;t.firstChild;)if(t=t.firstChild,Mg(t)){i=1;break}return[t,i]}let[n,r]=this.findNodeAndOffsetFromLocation(e);if(n){if(Cl(n))$g(n)===0?(t=n.parentNode.parentNode,i=Og(n.parentNode),To(n,{name:"right"})&&i++):(t=n,i=e.offset-r);else{if(t=n.parentNode,!R1(n.previousSibling)&&!Mg(t))for(;n===t.lastChild&&(n=t,t=t.parentNode,!Mg(t)););i=Og(n),e.offset!==0&&i++}return[t,i]}}findNodeAndOffsetFromLocation(e){let t,i,n=0;for(let r of this.getSignificantNodesForIndex(e.index)){let o=$g(r);if(e.offset<=n+o)if(Cl(r)){if(t=r,i=n,e.offset===i&&To(t))break}else t||(t=r,i=n);if(n+=o,n>e.offset)break}return[t,i]}findAttachmentElementParentForNode(e){for(;e&&e!==this.element;){if(vr(e))return e;e=e.parentNode}}getSignificantNodesForIndex(e){let t=[],i=md(this.element,{usingFilter:DI}),n=!1;for(;i.nextNode();){let o=i.currentNode;var r;if(Ao(o)){if(r!=null?r++:r=0,r===e)n=!0;else if(n)break}else n&&t.push(o)}return t}},$g=function(s){return s.nodeType===Node.TEXT_NODE?To(s)?0:s.textContent.length:Bt(s)==="br"||vr(s)?1:0},DI=function(s){return II(s)===NodeFilter.FILTER_ACCEPT?ES(s):NodeFilter.FILTER_REJECT},II=function(s){return uS(s)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},ES=function(s){return vr(s.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},_d=class{createDOMRangeFromPoint(e){let t,{x:i,y:n}=e;if(document.caretPositionFromPoint){let{offsetNode:r,offset:o}=document.caretPositionFromPoint(i,n);return t=document.createRange(),t.setStart(r,o),t}if(document.caretRangeFromPoint)return document.caretRangeFromPoint(i,n);if(document.body.createTextRange){let r=Pl();try{let o=document.body.createTextRange();o.moveToPoint(i,n),o.select()}catch{}return t=Pl(),vS(r),t}}getClientRectsForDOMRange(e){let t=Array.from(e.getClientRects());return[t[0],t[t.length-1]]}},ks=class extends tt{constructor(e){super(...arguments),this.didMouseDown=this.didMouseDown.bind(this),this.selectionDidChange=this.selectionDidChange.bind(this),this.element=e,this.locationMapper=new Pd(this.element),this.pointMapper=new _d,this.lockCount=0,Xe("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}getLocationRange(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.strict===!1?this.createLocationRangeFromDOMRange(Pl()):e.ignoreLock?this.currentLocationRange:this.lockedLocationRange?this.lockedLocationRange:this.currentLocationRange}setLocationRange(e){if(this.lockedLocationRange)return;e=Re(e);let t=this.createDOMRangeFromLocationRange(e);t&&(vS(t),this.updateCurrentLocationRange(e))}setLocationRangeFromPointRange(e){e=Re(e);let t=this.getLocationAtPoint(e[0]),i=this.getLocationAtPoint(e[1]);this.setLocationRange([t,i])}getClientRectAtLocationRange(e){let t=this.createDOMRangeFromLocationRange(e);if(t)return this.getClientRectsForDOMRange(t)[1]}locationIsCursorTarget(e){let t=Array.from(this.findNodeAndOffsetFromLocation(e))[0];return To(t)}lock(){this.lockCount++==0&&(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange())}unlock(){if(--this.lockCount==0){let{lockedLocationRange:e}=this;if(this.lockedLocationRange=null,e!=null)return this.setLocationRange(e)}}clearSelection(){var e;return(e=gS())===null||e===void 0?void 0:e.removeAllRanges()}selectionIsCollapsed(){var e;return((e=Pl())===null||e===void 0?void 0:e.collapsed)===!0}selectionIsExpanded(){return!this.selectionIsCollapsed()}createLocationRangeFromDOMRange(e,t){if(e==null||!this.domRangeWithinElement(e))return;let i=this.findLocationFromContainerAndOffset(e.startContainer,e.startOffset,t);if(!i)return;let n=e.collapsed?void 0:this.findLocationFromContainerAndOffset(e.endContainer,e.endOffset,t);return Re([i,n])}didMouseDown(){return this.pauseTemporarily()}pauseTemporarily(){let e;this.paused=!0;let t=()=>{if(this.paused=!1,clearTimeout(i),Array.from(e).forEach(n=>{n.destroy()}),mr(document,this.element))return this.selectionDidChange()},i=setTimeout(t,200);e=["mousemove","keydown"].map(n=>Xe(n,{onElement:document,withCallback:t}))}selectionDidChange(){if(!this.paused&&!lv(this.element))return this.updateCurrentLocationRange()}updateCurrentLocationRange(e){var t,i;if((e??(e=this.createLocationRangeFromDOMRange(Pl())))&&!gd(e,this.currentLocationRange))return this.currentLocationRange=e,(t=this.delegate)===null||t===void 0||(i=t.locationRangeDidChange)===null||i===void 0?void 0:i.call(t,this.currentLocationRange.slice(0))}createDOMRangeFromLocationRange(e){let t=this.findContainerAndOffsetFromLocation(e[0]),i=Ds(e)?t:this.findContainerAndOffsetFromLocation(e[1])||t;if(t!=null&&i!=null){let n=document.createRange();return n.setStart(...Array.from(t||[])),n.setEnd(...Array.from(i||[])),n}}getLocationAtPoint(e){let t=this.createDOMRangeFromPoint(e);var i;if(t)return(i=this.createLocationRangeFromDOMRange(t))===null||i===void 0?void 0:i[0]}domRangeWithinElement(e){return e.collapsed?mr(this.element,e.startContainer):mr(this.element,e.startContainer)&&mr(this.element,e.endContainer)}};ks.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),ks.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),ks.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),ks.proxyMethod("pointMapper.createDOMRangeFromPoint"),ks.proxyMethod("pointMapper.getClientRectsForDOMRange");var SS=Object.freeze({__proto__:null,Attachment:Po,AttachmentManager:Ad,AttachmentPiece:_o,Block:an,Composition:is,Document:Kt,Editor:Cd,HTMLParser:Tr,HTMLSanitizer:Ll,LineBreakInsertion:Td,LocationMapper:Pd,ManagedAttachment:Ye,Piece:Rs,PointMapper:_d,SelectionManager:ks,SplittableList:Oo,StringPiece:Ml,Text:ui,UndoManager:kl}),FI=Object.freeze({__proto__:null,ObjectView:Fs,AttachmentView:Ol,BlockView:Ed,DocumentView:Co,PieceView:yd,PreviewableAttachmentView:bd,TextView:wd}),{lang:Hg,css:fr,keyNames:RI}=Il,Ug=function(s){return function(){let e=s.apply(this,arguments);e.do(),this.undos||(this.undos=[]),this.undos.push(e.undo)}},Od=class extends tt{constructor(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(...arguments),di(this,"makeElementMutable",Ug(()=>({do:()=>{this.element.dataset.trixMutable=!0},undo:()=>delete this.element.dataset.trixMutable}))),di(this,"addToolbar",Ug(()=>{let r=Ce({tagName:"div",className:fr.attachmentToolbar,data:{trixMutable:!0},childNodes:Ce({tagName:"div",className:"trix-button-row",childNodes:Ce({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:Ce({tagName:"button",className:"trix-button trix-button--remove",textContent:Hg.remove,attributes:{title:Hg.remove},data:{trixAction:"remove"}})})})});return this.attachment.isPreviewable()&&r.appendChild(Ce({tagName:"div",className:fr.attachmentMetadataContainer,childNodes:Ce({tagName:"span",className:fr.attachmentMetadata,childNodes:[Ce({tagName:"span",className:fr.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),Ce({tagName:"span",className:fr.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),Xe("click",{onElement:r,withCallback:this.didClickToolbar}),Xe("click",{onElement:r,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),Tl("trix-attachment-before-toolbar",{onElement:this.element,attributes:{toolbar:r,attachment:this.attachment}}),{do:()=>this.element.appendChild(r),undo:()=>cn(r)}})),di(this,"installCaptionEditor",Ug(()=>{let r=Ce({tagName:"textarea",className:fr.attachmentCaptionEditor,attributes:{placeholder:Hg.captionPlaceholder},data:{trixMutable:!0}});r.value=this.attachmentPiece.getCaption();let o=r.cloneNode();o.classList.add("trix-autoresize-clone"),o.tabIndex=-1;let a=function(){o.value=r.value,r.style.height=o.scrollHeight+"px"};Xe("input",{onElement:r,withCallback:a}),Xe("input",{onElement:r,withCallback:this.didInputCaption}),Xe("keydown",{onElement:r,withCallback:this.didKeyDownCaption}),Xe("change",{onElement:r,withCallback:this.didChangeCaption}),Xe("blur",{onElement:r,withCallback:this.didBlurCaption});let l=this.element.querySelector("figcaption"),c=l.cloneNode();return{do:()=>{if(l.style.display="none",c.appendChild(r),c.appendChild(o),c.classList.add("".concat(fr.attachmentCaption,"--editing")),l.parentElement.insertBefore(c,l),a(),this.options.editCaption)return dv(()=>r.focus())},undo(){cn(c),l.style.display=null}}})),this.didClickToolbar=this.didClickToolbar.bind(this),this.didClickActionButton=this.didClickActionButton.bind(this),this.didKeyDownCaption=this.didKeyDownCaption.bind(this),this.didInputCaption=this.didInputCaption.bind(this),this.didChangeCaption=this.didChangeCaption.bind(this),this.didBlurCaption=this.didBlurCaption.bind(this),this.attachmentPiece=e,this.element=t,this.container=i,this.options=n,this.attachment=this.attachmentPiece.attachment,Bt(this.element)==="a"&&(this.element=this.element.firstChild),this.install()}install(){this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()&&this.installCaptionEditor()}uninstall(){var e;let t=this.undos.pop();for(this.savePendingCaption();t;)t(),t=this.undos.pop();(e=this.delegate)===null||e===void 0||e.didUninstallAttachmentEditor(this)}savePendingCaption(){if(this.pendingCaption!=null){let r=this.pendingCaption;var e,t,i,n;this.pendingCaption=null,r?(e=this.delegate)===null||e===void 0||(t=e.attachmentEditorDidRequestUpdatingAttributesForAttachment)===null||t===void 0||t.call(e,{caption:r},this.attachment):(i=this.delegate)===null||i===void 0||(n=i.attachmentEditorDidRequestRemovingAttributeForAttachment)===null||n===void 0||n.call(i,"caption",this.attachment)}}didClickToolbar(e){return e.preventDefault(),e.stopPropagation()}didClickActionButton(e){var t;if(e.target.getAttribute("data-trix-action")==="remove")return(t=this.delegate)===null||t===void 0?void 0:t.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)}didKeyDownCaption(e){var t,i;if(RI[e.keyCode]==="return")return e.preventDefault(),this.savePendingCaption(),(t=this.delegate)===null||t===void 0||(i=t.attachmentEditorDidRequestDeselectingAttachment)===null||i===void 0?void 0:i.call(t,this.attachment)}didInputCaption(e){this.pendingCaption=e.target.value.replace(/\s/g," ").trim()}didChangeCaption(e){return this.savePendingCaption()}didBlurCaption(e){return this.savePendingCaption()}},Md=class extends tt{constructor(e,t){super(...arguments),this.didFocus=this.didFocus.bind(this),this.didBlur=this.didBlur.bind(this),this.didClickAttachment=this.didClickAttachment.bind(this),this.element=e,this.composition=t,this.documentView=new Co(this.composition.document,{element:this.element}),Xe("focus",{onElement:this.element,withCallback:this.didFocus}),Xe("blur",{onElement:this.element,withCallback:this.didBlur}),Xe("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),Xe("mousedown",{onElement:this.element,matchingSelector:gr,withCallback:this.didClickAttachment}),Xe("click",{onElement:this.element,matchingSelector:"a".concat(gr),preventDefault:!0})}didFocus(e){var t;let i=()=>{var n,r;if(!this.focused)return this.focused=!0,(n=this.delegate)===null||n===void 0||(r=n.compositionControllerDidFocus)===null||r===void 0?void 0:r.call(n)};return((t=this.blurPromise)===null||t===void 0?void 0:t.then(i))||i()}didBlur(e){this.blurPromise=new Promise(t=>dv(()=>{var i,n;return lv(this.element)||(this.focused=null,(i=this.delegate)===null||i===void 0||(n=i.compositionControllerDidBlur)===null||n===void 0||n.call(i)),this.blurPromise=null,t()}))}didClickAttachment(e,t){var i,n;let r=this.findAttachmentForElement(t),o=!!ln(e.target,{matchingSelector:"figcaption"});return(i=this.delegate)===null||i===void 0||(n=i.compositionControllerDidSelectAttachment)===null||n===void 0?void 0:n.call(i,r,{editCaption:o})}getSerializableElement(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element}render(){var e,t,i,n,r,o;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&((i=this.delegate)===null||i===void 0||(n=i.compositionControllerWillSyncDocumentView)===null||n===void 0||n.call(i),this.documentView.sync(),(r=this.delegate)===null||r===void 0||(o=r.compositionControllerDidSyncDocumentView)===null||o===void 0||o.call(r)),(e=this.delegate)===null||e===void 0||(t=e.compositionControllerDidRender)===null||t===void 0?void 0:t.call(e)}rerenderViewForObject(e){return this.invalidateViewForObject(e),this.render()}invalidateViewForObject(e){return this.documentView.invalidateViewForObject(e)}isViewCachingEnabled(){return this.documentView.isViewCachingEnabled()}enableViewCaching(){return this.documentView.enableViewCaching()}disableViewCaching(){return this.documentView.disableViewCaching()}refreshViewCache(){return this.documentView.garbageCollectCachedViews()}isEditingAttachment(){return!!this.attachmentEditor}installAttachmentEditorForAttachment(e,t){var i;if(((i=this.attachmentEditor)===null||i===void 0?void 0:i.attachment)===e)return;let n=this.documentView.findElementForObject(e);if(!n)return;this.uninstallAttachmentEditor();let r=this.composition.document.getAttachmentPieceForAttachment(e);this.attachmentEditor=new Od(r,n,this.element,t),this.attachmentEditor.delegate=this}uninstallAttachmentEditor(){var e;return(e=this.attachmentEditor)===null||e===void 0?void 0:e.uninstall()}didUninstallAttachmentEditor(){return this.attachmentEditor=null,this.render()}attachmentEditorDidRequestUpdatingAttributesForAttachment(e,t){var i,n;return(i=this.delegate)===null||i===void 0||(n=i.compositionControllerWillUpdateAttachment)===null||n===void 0||n.call(i,t),this.composition.updateAttributesForAttachment(e,t)}attachmentEditorDidRequestRemovingAttributeForAttachment(e,t){var i,n;return(i=this.delegate)===null||i===void 0||(n=i.compositionControllerWillUpdateAttachment)===null||n===void 0||n.call(i,t),this.composition.removeAttributeForAttachment(e,t)}attachmentEditorDidRequestRemovalOfAttachment(e){var t,i;return(t=this.delegate)===null||t===void 0||(i=t.compositionControllerDidRequestRemovalOfAttachment)===null||i===void 0?void 0:i.call(t,e)}attachmentEditorDidRequestDeselectingAttachment(e){var t,i;return(t=this.delegate)===null||t===void 0||(i=t.compositionControllerDidRequestDeselectingAttachment)===null||i===void 0?void 0:i.call(t,e)}canSyncDocumentView(){return!this.isEditingAttachment()}findAttachmentForElement(e){return this.composition.document.getAttachmentById(parseInt(e.dataset.trixId,10))}},Ld=class extends tt{},AS="data-trix-mutable",NI="[".concat(AS,"]"),BI={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},kd=class extends tt{constructor(e){super(e),this.didMutate=this.didMutate.bind(this),this.element=e,this.observer=new window.MutationObserver(this.didMutate),this.start()}start(){return this.reset(),this.observer.observe(this.element,BI)}stop(){return this.observer.disconnect()}didMutate(e){var t,i;if(this.mutations.push(...Array.from(this.findSignificantMutations(e)||[])),this.mutations.length)return(t=this.delegate)===null||t===void 0||(i=t.elementDidMutate)===null||i===void 0||i.call(t,this.getMutationSummary()),this.reset()}reset(){this.mutations=[]}findSignificantMutations(e){return e.filter(t=>this.mutationIsSignificant(t))}mutationIsSignificant(e){if(this.nodeIsMutable(e.target))return!1;for(let t of Array.from(this.nodesModifiedByMutation(e)))if(this.nodeIsSignificant(t))return!0;return!1}nodeIsSignificant(e){return e!==this.element&&!this.nodeIsMutable(e)&&!uS(e)}nodeIsMutable(e){return ln(e,{matchingSelector:NI})}nodesModifiedByMutation(e){let t=[];switch(e.type){case"attributes":e.attributeName!==AS&&t.push(e.target);break;case"characterData":t.push(e.target.parentNode),t.push(e.target);break;case"childList":t.push(...Array.from(e.addedNodes||[])),t.push(...Array.from(e.removedNodes||[]))}return t}getMutationSummary(){return this.getTextMutationSummary()}getTextMutationSummary(){let{additions:e,deletions:t}=this.getTextChangesFromCharacterData(),i=this.getTextChangesFromChildList();Array.from(i.additions).forEach(a=>{Array.from(e).includes(a)||e.push(a)}),t.push(...Array.from(i.deletions||[]));let n={},r=e.join("");r&&(n.textAdded=r);let o=t.join("");return o&&(n.textDeleted=o),n}getMutationsByType(e){return Array.from(this.mutations).filter(t=>t.type===e)}getTextChangesFromChildList(){let e,t,i=[],n=[];return Array.from(this.getMutationsByType("childList")).forEach(r=>{i.push(...Array.from(r.addedNodes||[])),n.push(...Array.from(r.removedNodes||[]))}),i.length===0&&n.length===1&&Ao(n[0])?(e=[],t=[`
`]):(e=iv(i),t=iv(n)),{additions:e.filter((r,o)=>r!==t[o]).map(Al),deletions:t.filter((r,o)=>r!==e[o]).map(Al)}}getTextChangesFromCharacterData(){let e,t,i=this.getMutationsByType("characterData");if(i.length){let n=i[0],r=i[i.length-1],o=function(a,l){let c,u;return a=Er.box(a),(l=Er.box(l)).length<a.length?[u,c]=U1(a,l):[c,u]=U1(l,a),{added:c,removed:u}}(Al(n.oldValue),Al(r.target.data));e=o.added,t=o.removed}return{additions:e?[e]:[],deletions:t?[t]:[]}}},iv=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=[];for(let t of Array.from(s))switch(t.nodeType){case Node.TEXT_NODE:e.push(t.data);break;case Node.ELEMENT_NODE:Bt(t)==="br"?e.push(`
`):e.push(...Array.from(iv(t.childNodes)||[]))}return e},Dd=class extends xo{constructor(e){super(...arguments),this.file=e}perform(e){let t=new FileReader;return t.onerror=()=>e(!1),t.onload=()=>{t.onerror=null;try{t.abort()}catch{}return e(!0,this.file)},t.readAsArrayBuffer(this.file)}},sv=class{constructor(e){this.element=e}shouldIgnore(e){return!!Dl.samsungAndroid&&(this.previousEvent=this.event,this.event=e,this.checkSamsungKeyboardBuggyModeStart(),this.checkSamsungKeyboardBuggyModeEnd(),this.buggyMode)}checkSamsungKeyboardBuggyModeStart(){this.insertingLongTextAfterUnidentifiedChar()&&zI(this.element.innerText,this.event.data)&&(this.buggyMode=!0,this.event.preventDefault())}checkSamsungKeyboardBuggyModeEnd(){this.buggyMode&&this.event.inputType!=="insertText"&&(this.buggyMode=!1)}insertingLongTextAfterUnidentifiedChar(){var e;return this.isBeforeInputInsertText()&&this.previousEventWasUnidentifiedKeydown()&&((e=this.event.data)===null||e===void 0?void 0:e.length)>50}isBeforeInputInsertText(){return this.event.type==="beforeinput"&&this.event.inputType==="insertText"}previousEventWasUnidentifiedKeydown(){var e,t;return((e=this.previousEvent)===null||e===void 0?void 0:e.type)==="keydown"&&((t=this.previousEvent)===null||t===void 0?void 0:t.key)==="Unidentified"}},zI=(s,e)=>tS(s)===tS(e),$I=new RegExp("(".concat("\uFFFC","|").concat(Nd,"|").concat(on,"|\\s)+"),"g"),tS=s=>s.replace($I," ").trim(),Mo=class extends tt{constructor(e){super(...arguments),this.element=e,this.mutationObserver=new kd(this.element),this.mutationObserver.delegate=this,this.flakyKeyboardDetector=new sv(this.element);for(let t in this.constructor.events)Xe(t,{onElement:this.element,withCallback:this.handlerFor(t)})}elementDidMutate(e){}editorWillSyncDocumentView(){return this.mutationObserver.stop()}editorDidSyncDocumentView(){return this.mutationObserver.start()}requestRender(){var e,t;return(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidRequestRender)===null||t===void 0?void 0:t.call(e)}requestReparse(){var e,t;return(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidRequestReparse)===null||t===void 0||t.call(e),this.requestRender()}attachFiles(e){let t=Array.from(e).map(i=>new Dd(i));return Promise.all(t).then(i=>{this.handleInput(function(){var n,r;return(n=this.delegate)===null||n===void 0||n.inputControllerWillAttachFiles(),(r=this.responder)===null||r===void 0||r.insertFiles(i),this.requestRender()})})}handlerFor(e){return t=>{t.defaultPrevented||this.handleInput(()=>{if(!lv(this.element)){if(this.flakyKeyboardDetector.shouldIgnore(t))return;this.eventName=e,this.constructor.events[e].call(this,t)}})}}handleInput(e){try{var t;(t=this.delegate)===null||t===void 0||t.inputControllerWillHandleInput(),e.call(this)}finally{var i;(i=this.delegate)===null||i===void 0||i.inputControllerDidHandleInput()}}createLinkHTML(e,t){let i=document.createElement("a");return i.href=e,i.textContent=t||e,i.outerHTML}},jg;di(Mo,"events",{});var{browser:HI,keyNames:TS}=Il,UI=0,Ni=class extends Mo{constructor(){super(...arguments),this.resetInputSummary()}setInputSummary(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.inputSummary.eventName=this.eventName;for(let t in e){let i=e[t];this.inputSummary[t]=i}return this.inputSummary}resetInputSummary(){this.inputSummary={}}reset(){return this.resetInputSummary(),Ar.reset()}elementDidMutate(e){var t,i;return this.isComposing()?(t=this.delegate)===null||t===void 0||(i=t.inputControllerDidAllowUnhandledInput)===null||i===void 0?void 0:i.call(t):this.handleInput(function(){return this.mutationIsSignificant(e)&&(this.mutationIsExpected(e)?this.requestRender():this.requestReparse()),this.reset()})}mutationIsExpected(e){let{textAdded:t,textDeleted:i}=e;if(this.inputSummary.preferDocument)return!0;let n=t!=null?t===this.inputSummary.textAdded:!this.inputSummary.textAdded,r=i!=null?this.inputSummary.didDelete:!this.inputSummary.didDelete,o=[`
`,` 
`].includes(t)&&!n,a=i===`
`&&!r;if(o&&!a||a&&!o){let c=this.getSelectedRange();if(c){var l;let u=o?t.replace(/\n$/,"").length||-1:t?.length||1;if((l=this.responder)!==null&&l!==void 0&&l.positionIsBlockBreak(c[1]+u))return!0}}return n&&r}mutationIsSignificant(e){var t;let i=Object.keys(e).length>0,n=((t=this.compositionInput)===null||t===void 0?void 0:t.getEndData())==="";return i||!n}getCompositionInput(){if(this.isComposing())return this.compositionInput;this.compositionInput=new ts(this)}isComposing(){return this.compositionInput&&!this.compositionInput.isEnded()}deleteInDirection(e,t){var i;return((i=this.responder)===null||i===void 0?void 0:i.deleteInDirection(e))!==!1?this.setInputSummary({didDelete:!0}):t?(t.preventDefault(),this.requestRender()):void 0}serializeSelectionToDataTransfer(e){var t;if(!function(n){if(n==null||!n.setData)return!1;for(let r in z1){let o=z1[r];try{if(n.setData(r,o),!n.getData(r)===o)return!1}catch{return!1}}return!0}(e))return;let i=(t=this.responder)===null||t===void 0?void 0:t.getSelectedDocument().toSerializableDocument();return e.setData("application/x-trix-document",JSON.stringify(i)),e.setData("text/html",Co.render(i).innerHTML),e.setData("text/plain",i.toString().replace(/\n$/,"")),!0}canAcceptDataTransfer(e){let t={};return Array.from(e?.types||[]).forEach(i=>{t[i]=!0}),t.Files||t["application/x-trix-document"]||t["text/html"]||t["text/plain"]}getPastedHTMLUsingHiddenElement(e){let t=this.getSelectedRange(),i={position:"absolute",left:"".concat(window.pageXOffset,"px"),top:"".concat(window.pageYOffset,"px"),opacity:0},n=Ce({style:i,tagName:"div",editable:!0});return document.body.appendChild(n),n.focus(),requestAnimationFrame(()=>{let r=n.innerHTML;return cn(n),this.setSelectedRange(t),e(r)})}};di(Ni,"events",{keydown(s){this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0;let e=TS[s.keyCode];if(e){var t;let n=this.keys;["ctrl","alt","shift","meta"].forEach(r=>{var o;s["".concat(r,"Key")]&&(r==="ctrl"&&(r="control"),n=(o=n)===null||o===void 0?void 0:o[r])}),((t=n)===null||t===void 0?void 0:t[e])!=null&&(this.setInputSummary({keyName:e}),Ar.reset(),n[e].call(this,s))}if(fS(s)){let n=String.fromCharCode(s.keyCode).toLowerCase();if(n){var i;let r=["alt","shift"].map(o=>{if(s["".concat(o,"Key")])return o}).filter(o=>o);r.push(n),(i=this.delegate)!==null&&i!==void 0&&i.inputControllerDidReceiveKeyboardCommand(r)&&s.preventDefault()}}},keypress(s){if(this.inputSummary.eventName!=null||s.metaKey||s.ctrlKey&&!s.altKey)return;let e=qI(s);var t,i;return e?((t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(i=this.responder)===null||i===void 0||i.insertString(e),this.setInputSummary({textAdded:e,didDelete:this.selectionIsExpanded()})):void 0},textInput(s){let{data:e}=s,{textAdded:t}=this.inputSummary;if(t&&t!==e&&t.toUpperCase()===e){var i;let n=this.getSelectedRange();return this.setSelectedRange([n[0],n[1]+t.length]),(i=this.responder)===null||i===void 0||i.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(n)}},dragenter(s){s.preventDefault()},dragstart(s){var e,t;return this.serializeSelectionToDataTransfer(s.dataTransfer),this.draggedRange=this.getSelectedRange(),(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidStartDrag)===null||t===void 0?void 0:t.call(e)},dragover(s){if(this.draggedRange||this.canAcceptDataTransfer(s.dataTransfer)){s.preventDefault();let i={x:s.clientX,y:s.clientY};var e,t;if(!Lo(i,this.draggingPoint))return this.draggingPoint=i,(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidReceiveDragOverPoint)===null||t===void 0?void 0:t.call(e,this.draggingPoint)}},dragend(s){var e,t;(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidCancelDrag)===null||t===void 0||t.call(e),this.draggedRange=null,this.draggingPoint=null},drop(s){var e,t;s.preventDefault();let i=(e=s.dataTransfer)===null||e===void 0?void 0:e.files,n=s.dataTransfer.getData("application/x-trix-document"),r={x:s.clientX,y:s.clientY};if((t=this.responder)===null||t===void 0||t.setLocationRangeFromPointRange(r),i!=null&&i.length)this.attachFiles(i);else if(this.draggedRange){var o,a;(o=this.delegate)===null||o===void 0||o.inputControllerWillMoveText(),(a=this.responder)===null||a===void 0||a.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()}else if(n){var l;let c=Kt.fromJSONString(n);(l=this.responder)===null||l===void 0||l.insertDocument(c),this.requestRender()}this.draggedRange=null,this.draggingPoint=null},cut(s){var e,t;if((e=this.responder)!==null&&e!==void 0&&e.selectionIsExpanded()&&(this.serializeSelectionToDataTransfer(s.clipboardData)&&s.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillCutText(),this.deleteInDirection("backward"),s.defaultPrevented))return this.requestRender()},copy(s){var e;(e=this.responder)!==null&&e!==void 0&&e.selectionIsExpanded()&&this.serializeSelectionToDataTransfer(s.clipboardData)&&s.preventDefault()},paste(s){let e=s.clipboardData||s.testClipboardData,t={clipboard:e};if(!e||WI(s))return void this.getPastedHTMLUsingHiddenElement(F=>{var H,U,W;return t.type="text/html",t.html=F,(H=this.delegate)===null||H===void 0||H.inputControllerWillPaste(t),(U=this.responder)===null||U===void 0||U.insertHTML(t.html),this.requestRender(),(W=this.delegate)===null||W===void 0?void 0:W.inputControllerDidPaste(t)});let i=e.getData("URL"),n=e.getData("text/html"),r=e.getData("public.url-name");if(i){var o,a,l;let F;t.type="text/html",F=r?pv(r).trim():i,t.html=this.createLinkHTML(i,F),(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(t),this.setInputSummary({textAdded:F,didDelete:this.selectionIsExpanded()}),(a=this.responder)===null||a===void 0||a.insertHTML(t.html),this.requestRender(),(l=this.delegate)===null||l===void 0||l.inputControllerDidPaste(t)}else if(pS(e)){var c,u,h;t.type="text/plain",t.string=e.getData("text/plain"),(c=this.delegate)===null||c===void 0||c.inputControllerWillPaste(t),this.setInputSummary({textAdded:t.string,didDelete:this.selectionIsExpanded()}),(u=this.responder)===null||u===void 0||u.insertString(t.string),this.requestRender(),(h=this.delegate)===null||h===void 0||h.inputControllerDidPaste(t)}else if(n){var f,p,g;t.type="text/html",t.html=n,(f=this.delegate)===null||f===void 0||f.inputControllerWillPaste(t),(p=this.responder)===null||p===void 0||p.insertHTML(t.html),this.requestRender(),(g=this.delegate)===null||g===void 0||g.inputControllerDidPaste(t)}else if(Array.from(e.types).includes("Files")){var y,A;let F=(y=e.items)===null||y===void 0||(y=y[0])===null||y===void 0||(A=y.getAsFile)===null||A===void 0?void 0:A.call(y);if(F){var S,O,I;let H=jI(F);!F.name&&H&&(F.name="pasted-file-".concat(++UI,".").concat(H)),t.type="File",t.file=F,(S=this.delegate)===null||S===void 0||S.inputControllerWillAttachFiles(),(O=this.responder)===null||O===void 0||O.insertFile(t.file),this.requestRender(),(I=this.delegate)===null||I===void 0||I.inputControllerDidPaste(t)}}s.preventDefault()},compositionstart(s){return this.getCompositionInput().start(s.data)},compositionupdate(s){return this.getCompositionInput().update(s.data)},compositionend(s){return this.getCompositionInput().end(s.data)},beforeinput(s){this.inputSummary.didInput=!0},input(s){return this.inputSummary.didInput=!0,s.stopPropagation()}}),di(Ni,"keys",{backspace(s){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",s)},delete(s){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",s)},return(s){var e,t;return this.setInputSummary({preferDocument:!0}),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0?void 0:t.insertLineBreak()},tab(s){var e,t;(e=this.responder)!==null&&e!==void 0&&e.canIncreaseNestingLevel()&&((t=this.responder)===null||t===void 0||t.increaseNestingLevel(),this.requestRender(),s.preventDefault())},left(s){var e;if(this.selectionIsInCursorTarget())return s.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("backward")},right(s){var e;if(this.selectionIsInCursorTarget())return s.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("forward")},control:{d(s){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",s)},h(s){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",s)},o(s){var e,t;return s.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0||t.insertString(`
`,{updatePosition:!1}),this.requestRender()}},shift:{return(s){var e,t;(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0||t.insertString(`
`),this.requestRender(),s.preventDefault()},tab(s){var e,t;(e=this.responder)!==null&&e!==void 0&&e.canDecreaseNestingLevel()&&((t=this.responder)===null||t===void 0||t.decreaseNestingLevel(),this.requestRender(),s.preventDefault())},left(s){if(this.selectionIsInCursorTarget())return s.preventDefault(),this.expandSelectionInDirection("backward")},right(s){if(this.selectionIsInCursorTarget())return s.preventDefault(),this.expandSelectionInDirection("forward")}},alt:{backspace(s){var e;return this.setInputSummary({preferDocument:!1}),(e=this.delegate)===null||e===void 0?void 0:e.inputControllerWillPerformTyping()}},meta:{backspace(s){var e;return this.setInputSummary({preferDocument:!1}),(e=this.delegate)===null||e===void 0?void 0:e.inputControllerWillPerformTyping()}}}),Ni.proxyMethod("responder?.getSelectedRange"),Ni.proxyMethod("responder?.setSelectedRange"),Ni.proxyMethod("responder?.expandSelectionInDirection"),Ni.proxyMethod("responder?.selectionIsInCursorTarget"),Ni.proxyMethod("responder?.selectionIsExpanded");var jI=s=>{var e;return(e=s.type)===null||e===void 0||(e=e.match(/\/(\w+)$/))===null||e===void 0?void 0:e[1]},VI=!((jg=" ".codePointAt)===null||jg===void 0||!jg.call(" ",0)),qI=function(s){if(s.key&&VI&&s.key.codePointAt(0)===s.keyCode)return s.key;{let e;if(s.which===null?e=s.keyCode:s.which!==0&&s.charCode!==0&&(e=s.charCode),e!=null&&TS[e]!=="escape")return Er.fromCodepoints([e]).toString()}},WI=function(s){let e=s.clipboardData;if(e){if(e.types.includes("text/html")){for(let t of e.types){let i=/^CorePasteboardFlavorType/.test(t),n=/^dyn\./.test(t)&&e.getData(t);if(i||n)return!0}return!1}{let t=e.types.includes("com.apple.webarchive"),i=e.types.includes("com.apple.flat-rtfd");return t||i}}},ts=class extends tt{constructor(e){super(...arguments),this.inputController=e,this.responder=this.inputController.responder,this.delegate=this.inputController.delegate,this.inputSummary=this.inputController.inputSummary,this.data={}}start(e){if(this.data.start=e,this.isSignificant()){var t,i;this.inputSummary.eventName==="keypress"&&this.inputSummary.textAdded&&((i=this.responder)===null||i===void 0||i.deleteInDirection("left")),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=(t=this.responder)===null||t===void 0?void 0:t.getSelectedRange()}}update(e){if(this.data.update=e,this.isSignificant()){let t=this.selectPlaceholder();t&&(this.forgetPlaceholder(),this.range=t)}}end(e){return this.data.end=e,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(i=this.responder)===null||i===void 0||i.setSelectedRange(this.range),(n=this.responder)===null||n===void 0||n.insertString(this.data.end),(r=this.responder)===null||r===void 0?void 0:r.setSelectedRange(this.range[0]+this.data.end.length)):this.data.start!=null||this.data.update!=null?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset();var t,i,n,r}getEndData(){return this.data.end}isEnded(){return this.getEndData()!=null}isSignificant(){return!HI.composesExistingText||this.inputSummary.didInput}canApplyToDocument(){var e,t;return((e=this.data.start)===null||e===void 0?void 0:e.length)===0&&((t=this.data.end)===null||t===void 0?void 0:t.length)>0&&this.range}};ts.proxyMethod("inputController.setInputSummary"),ts.proxyMethod("inputController.requestRender"),ts.proxyMethod("inputController.requestReparse"),ts.proxyMethod("responder?.selectionIsExpanded"),ts.proxyMethod("responder?.insertPlaceholder"),ts.proxyMethod("responder?.selectPlaceholder"),ts.proxyMethod("responder?.forgetPlaceholder");var br=class extends Mo{constructor(){super(...arguments),this.render=this.render.bind(this)}elementDidMutate(){return this.scheduledRender?this.composing?(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidAllowUnhandledInput)===null||t===void 0?void 0:t.call(e):void 0:this.reparse();var e,t}scheduleRender(){return this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)}render(){var e,t;cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||(t=this.delegate)===null||t===void 0||t.render(),(e=this.afterRender)===null||e===void 0||e.call(this),this.afterRender=null}reparse(){var e;return(e=this.delegate)===null||e===void 0?void 0:e.reparse()}insertString(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var n;return(n=this.responder)===null||n===void 0?void 0:n.insertString(t,i)})}toggleAttributeIfSupported(e){var t;if(Xg().includes(e))return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformFormatting(e),this.withTargetDOMRange(function(){var i;return(i=this.responder)===null||i===void 0?void 0:i.toggleCurrentAttribute(e)})}activateAttributeIfSupported(e,t){var i;if(Xg().includes(e))return(i=this.delegate)===null||i===void 0||i.inputControllerWillPerformFormatting(e),this.withTargetDOMRange(function(){var n;return(n=this.responder)===null||n===void 0?void 0:n.setCurrentAttribute(e,t)})}deleteInDirection(e){let{recordUndoEntry:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{recordUndoEntry:!0};var i;t&&((i=this.delegate)===null||i===void 0||i.inputControllerWillPerformTyping());let n=()=>{var o;return(o=this.responder)===null||o===void 0?void 0:o.deleteInDirection(e)},r=this.getTargetDOMRange({minLength:this.composing?1:2});return r?this.withTargetDOMRange(r,n):n()}withTargetDOMRange(e,t){var i;return typeof e=="function"&&(t=e,e=this.getTargetDOMRange()),e?(i=this.responder)===null||i===void 0?void 0:i.withTargetDOMRange(e,t.bind(this)):(Ar.reset(),t.call(this))}getTargetDOMRange(){var e,t;let{minLength:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{minLength:0},n=(e=(t=this.event).getTargetRanges)===null||e===void 0?void 0:e.call(t);if(n&&n.length){let r=GI(n[0]);if(i===0||r.toString().length>=i)return r}}withEvent(e,t){let i;this.event=e;try{i=t.call(this)}finally{this.event=null}return i}};di(br,"events",{keydown(s){if(fS(s)){var e;let t=KI(s);(e=this.delegate)!==null&&e!==void 0&&e.inputControllerDidReceiveKeyboardCommand(t)&&s.preventDefault()}else{let t=s.key;s.altKey&&(t+="+Alt"),s.shiftKey&&(t+="+Shift");let i=this.constructor.keys[t];if(i)return this.withEvent(s,i)}},paste(s){var e;let t,i=(e=s.clipboardData)===null||e===void 0?void 0:e.getData("URL");return xS(s)?(s.preventDefault(),this.attachFiles(s.clipboardData.files)):XI(s)?(s.preventDefault(),t={type:"text/plain",string:s.clipboardData.getData("text/plain")},(n=this.delegate)===null||n===void 0||n.inputControllerWillPaste(t),(r=this.responder)===null||r===void 0||r.insertString(t.string),this.render(),(o=this.delegate)===null||o===void 0?void 0:o.inputControllerDidPaste(t)):i?(s.preventDefault(),t={type:"text/html",html:this.createLinkHTML(i)},(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(t),(l=this.responder)===null||l===void 0||l.insertHTML(t.html),this.render(),(c=this.delegate)===null||c===void 0?void 0:c.inputControllerDidPaste(t)):void 0;var n,r,o,a,l,c},beforeinput(s){let e=this.constructor.inputTypes[s.inputType];e&&(this.withEvent(s,e),this.scheduleRender())},input(s){Ar.reset()},dragstart(s){var e,t;(e=this.responder)!==null&&e!==void 0&&e.selectionContainsAttachments()&&(s.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:(t=this.responder)===null||t===void 0?void 0:t.getSelectedRange(),point:qg(s)})},dragenter(s){Vg(s)&&s.preventDefault()},dragover(s){if(this.dragging){s.preventDefault();let t=qg(s);var e;if(!Lo(t,this.dragging.point))return this.dragging.point=t,(e=this.responder)===null||e===void 0?void 0:e.setLocationRangeFromPointRange(t)}else Vg(s)&&s.preventDefault()},drop(s){var e,t;if(this.dragging)return s.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillMoveText(),(t=this.responder)===null||t===void 0||t.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender();if(Vg(s)){var i;s.preventDefault();let n=qg(s);return(i=this.responder)===null||i===void 0||i.setLocationRangeFromPointRange(n),this.attachFiles(s.dataTransfer.files)}},dragend(){var s;this.dragging&&((s=this.responder)===null||s===void 0||s.setSelectedRange(this.dragging.range),this.dragging=null)},compositionend(s){this.composing&&(this.composing=!1,Dl.recentAndroid||this.scheduleRender())}}),di(br,"keys",{ArrowLeft(){var s,e;if((s=this.responder)!==null&&s!==void 0&&s.shouldManageMovingCursorInDirection("backward"))return this.event.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("backward")},ArrowRight(){var s,e;if((s=this.responder)!==null&&s!==void 0&&s.shouldManageMovingCursorInDirection("forward"))return this.event.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("forward")},Backspace(){var s,e,t;if((s=this.responder)!==null&&s!==void 0&&s.shouldManageDeletingInDirection("backward"))return this.event.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0||t.deleteInDirection("backward"),this.render()},Tab(){var s,e;if((s=this.responder)!==null&&s!==void 0&&s.canIncreaseNestingLevel())return this.event.preventDefault(),(e=this.responder)===null||e===void 0||e.increaseNestingLevel(),this.render()},"Tab+Shift"(){var s,e;if((s=this.responder)!==null&&s!==void 0&&s.canDecreaseNestingLevel())return this.event.preventDefault(),(e=this.responder)===null||e===void 0||e.decreaseNestingLevel(),this.render()}}),di(br,"inputTypes",{deleteByComposition(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut(){return this.deleteInDirection("backward")},deleteByDrag(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var s;this.deleteByDragRange=(s=this.responder)===null||s===void 0?void 0:s.getSelectedRange()})},deleteCompositionText(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent(){return this.deleteInDirection("backward")},deleteContentBackward(){return this.deleteInDirection("backward")},deleteContentForward(){return this.deleteInDirection("forward")},deleteEntireSoftLine(){return this.deleteInDirection("forward")},deleteHardLineBackward(){return this.deleteInDirection("backward")},deleteHardLineForward(){return this.deleteInDirection("forward")},deleteSoftLineBackward(){return this.deleteInDirection("backward")},deleteSoftLineForward(){return this.deleteInDirection("forward")},deleteWordBackward(){return this.deleteInDirection("backward")},deleteWordForward(){return this.deleteInDirection("forward")},formatBackColor(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold(){return this.toggleAttributeIfSupported("bold")},formatFontColor(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent(){var s;if((s=this.responder)!==null&&s!==void 0&&s.canIncreaseNestingLevel())return this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.increaseNestingLevel()})},formatItalic(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent(){var s;if((s=this.responder)!==null&&s!==void 0&&s.canDecreaseNestingLevel())return this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.decreaseNestingLevel()})},formatRemove(){this.withTargetDOMRange(function(){for(let t in(s=this.responder)===null||s===void 0?void 0:s.getCurrentAttributes()){var s,e;(e=this.responder)===null||e===void 0||e.removeCurrentAttribute(t)}})},formatSetBlockTextDirection(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough(){return this.toggleAttributeIfSupported("strike")},formatSubscript(){return this.toggleAttributeIfSupported("sub")},formatSuperscript(){return this.toggleAttributeIfSupported("sup")},formatUnderline(){return this.toggleAttributeIfSupported("underline")},historyRedo(){var s;return(s=this.delegate)===null||s===void 0?void 0:s.inputControllerWillPerformRedo()},historyUndo(){var s;return(s=this.delegate)===null||s===void 0?void 0:s.inputControllerWillPerformUndo()},insertCompositionText(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop(){let s=this.deleteByDragRange;var e;if(s)return this.deleteByDragRange=null,(e=this.delegate)===null||e===void 0||e.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.moveTextFromRange(s)})},insertFromPaste(){let{dataTransfer:s}=this.event,e={dataTransfer:s},t=s.getData("URL"),i=s.getData("text/html");if(t){var n;let l;this.event.preventDefault(),e.type="text/html";let c=s.getData("public.url-name");l=c?pv(c).trim():t,e.html=this.createLinkHTML(t,l),(n=this.delegate)===null||n===void 0||n.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var u;return(u=this.responder)===null||u===void 0?void 0:u.insertHTML(e.html)}),this.afterRender=()=>{var u;return(u=this.delegate)===null||u===void 0?void 0:u.inputControllerDidPaste(e)}}else if(pS(s)){var r;e.type="text/plain",e.string=s.getData("text/plain"),(r=this.delegate)===null||r===void 0||r.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertString(e.string)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(e)}}else if(YI(this.event)){var o;e.type="File",e.file=s.files[0],(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertFile(e.file)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(e)}}else if(i){var a;this.event.preventDefault(),e.type="text/html",e.html=i,(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertHTML(e.html)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(e)}}},insertFromYank(){return this.insertString(this.event.data)},insertLineBreak(){return this.insertString(`
`)},insertLink(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList(){return this.toggleAttributeIfSupported("number")},insertParagraph(){var s;return(s=this.delegate)===null||s===void 0||s.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.insertLineBreak()})},insertReplacementText(){let s=this.event.dataTransfer.getData("text/plain"),e=this.event.getTargetRanges()[0];this.withTargetDOMRange(e,()=>{this.insertString(s,{updatePosition:!1})})},insertText(){var s;return this.insertString(this.event.data||((s=this.event.dataTransfer)===null||s===void 0?void 0:s.getData("text/plain")))},insertTranspose(){return this.insertString(this.event.data)},insertUnorderedList(){return this.toggleAttributeIfSupported("bullet")}});var GI=function(s){let e=document.createRange();return e.setStart(s.startContainer,s.startOffset),e.setEnd(s.endContainer,s.endOffset),e},Vg=s=>{var e;return Array.from(((e=s.dataTransfer)===null||e===void 0?void 0:e.types)||[]).includes("Files")},YI=s=>{var e;return((e=s.dataTransfer.files)===null||e===void 0?void 0:e[0])&&!xS(s)&&!(t=>{let{dataTransfer:i}=t;return i.types.includes("Files")&&i.types.includes("text/html")&&i.getData("text/html").includes("urn:schemas-microsoft-com:office:office")})(s)},xS=function(s){let e=s.clipboardData;if(e)return Array.from(e.types).filter(t=>t.match(/file/i)).length===e.types.length&&e.files.length>=1},XI=function(s){let e=s.clipboardData;if(e)return e.types.includes("text/plain")&&e.types.length===1},KI=function(s){let e=[];return s.altKey&&e.push("alt"),s.shiftKey&&e.push("shift"),e.push(s.key),e},qg=s=>({x:s.clientX,y:s.clientY}),nv="[data-trix-attribute]",rv="[data-trix-action]",JI="".concat(nv,", ").concat(rv),Bd="[data-trix-dialog]",ZI="".concat(Bd,"[data-trix-active]"),QI="".concat(Bd," [data-trix-method]"),iS="".concat(Bd," [data-trix-input]"),sS=(s,e)=>(e||(e=So(s)),s.querySelector("[data-trix-input][name='".concat(e,"']"))),nS=s=>s.getAttribute("data-trix-action"),So=s=>s.getAttribute("data-trix-attribute")||s.getAttribute("data-trix-dialog-attribute"),Id=class extends tt{constructor(e){super(e),this.didClickActionButton=this.didClickActionButton.bind(this),this.didClickAttributeButton=this.didClickAttributeButton.bind(this),this.didClickDialogButton=this.didClickDialogButton.bind(this),this.didKeyDownDialogInput=this.didKeyDownDialogInput.bind(this),this.element=e,this.attributes={},this.actions={},this.resetDialogInputs(),Xe("mousedown",{onElement:this.element,matchingSelector:rv,withCallback:this.didClickActionButton}),Xe("mousedown",{onElement:this.element,matchingSelector:nv,withCallback:this.didClickAttributeButton}),Xe("click",{onElement:this.element,matchingSelector:JI,preventDefault:!0}),Xe("click",{onElement:this.element,matchingSelector:QI,withCallback:this.didClickDialogButton}),Xe("keydown",{onElement:this.element,matchingSelector:iS,withCallback:this.didKeyDownDialogInput})}didClickActionButton(e,t){var i;(i=this.delegate)===null||i===void 0||i.toolbarDidClickButton(),e.preventDefault();let n=nS(t);return this.getDialog(n)?this.toggleDialog(n):(r=this.delegate)===null||r===void 0?void 0:r.toolbarDidInvokeAction(n,t);var r}didClickAttributeButton(e,t){var i;(i=this.delegate)===null||i===void 0||i.toolbarDidClickButton(),e.preventDefault();let n=So(t);var r;return this.getDialog(n)?this.toggleDialog(n):(r=this.delegate)===null||r===void 0||r.toolbarDidToggleAttribute(n),this.refreshAttributeButtons()}didClickDialogButton(e,t){let i=ln(t,{matchingSelector:Bd});return this[t.getAttribute("data-trix-method")].call(this,i)}didKeyDownDialogInput(e,t){if(e.keyCode===13){e.preventDefault();let i=t.getAttribute("name"),n=this.getDialog(i);this.setAttribute(n)}if(e.keyCode===27)return e.preventDefault(),this.hideDialog()}updateActions(e){return this.actions=e,this.refreshActionButtons()}refreshActionButtons(){return this.eachActionButton((e,t)=>{e.disabled=this.actions[t]===!1})}eachActionButton(e){return Array.from(this.element.querySelectorAll(rv)).map(t=>e(t,nS(t)))}updateAttributes(e){return this.attributes=e,this.refreshAttributeButtons()}refreshAttributeButtons(){return this.eachAttributeButton((e,t)=>(e.disabled=this.attributes[t]===!1,this.attributes[t]||this.dialogIsVisible(t)?(e.setAttribute("data-trix-active",""),e.classList.add("trix-active")):(e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"))))}eachAttributeButton(e){return Array.from(this.element.querySelectorAll(nv)).map(t=>e(t,So(t)))}applyKeyboardCommand(e){let t=JSON.stringify(e.sort());for(let i of Array.from(this.element.querySelectorAll("[data-trix-key]"))){let n=i.getAttribute("data-trix-key").split("+");if(JSON.stringify(n.sort())===t)return Tl("mousedown",{onElement:i}),!0}return!1}dialogIsVisible(e){let t=this.getDialog(e);if(t)return t.hasAttribute("data-trix-active")}toggleDialog(e){return this.dialogIsVisible(e)?this.hideDialog():this.showDialog(e)}showDialog(e){var t,i;this.hideDialog(),(t=this.delegate)===null||t===void 0||t.toolbarWillShowDialog();let n=this.getDialog(e);n.setAttribute("data-trix-active",""),n.classList.add("trix-active"),Array.from(n.querySelectorAll("input[disabled]")).forEach(o=>{o.removeAttribute("disabled")});let r=So(n);if(r){let o=sS(n,e);o&&(o.value=this.attributes[r]||"",o.select())}return(i=this.delegate)===null||i===void 0?void 0:i.toolbarDidShowDialog(e)}setAttribute(e){let t=So(e),i=sS(e,t);return i.willValidate&&!i.checkValidity()?(i.setAttribute("data-trix-validate",""),i.classList.add("trix-validate"),i.focus()):((n=this.delegate)===null||n===void 0||n.toolbarDidUpdateAttribute(t,i.value),this.hideDialog());var n}removeAttribute(e){var t;let i=So(e);return(t=this.delegate)===null||t===void 0||t.toolbarDidRemoveAttribute(i),this.hideDialog()}hideDialog(){let e=this.element.querySelector(ZI);var t;if(e)return e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"),this.resetDialogInputs(),(t=this.delegate)===null||t===void 0?void 0:t.toolbarDidHideDialog((i=>i.getAttribute("data-trix-dialog"))(e))}resetDialogInputs(){Array.from(this.element.querySelectorAll(iS)).forEach(e=>{e.setAttribute("disabled","disabled"),e.removeAttribute("data-trix-validate"),e.classList.remove("trix-validate")})}getDialog(e){return this.element.querySelector("[data-trix-dialog=".concat(e,"]"))}},yr=class extends Ld{constructor(e){let{editorElement:t,document:i,html:n}=e;super(...arguments),this.editorElement=t,this.selectionManager=new ks(this.editorElement),this.selectionManager.delegate=this,this.composition=new is,this.composition.delegate=this,this.attachmentManager=new Ad(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=cv.getLevel()===2?new br(this.editorElement):new Ni(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new Md(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new Id(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new Cd(this.composition,this.selectionManager,this.editorElement),i?this.editor.loadDocument(i):this.editor.loadHTML(n)}registerSelectionManager(){return Ar.registerSelectionManager(this.selectionManager)}unregisterSelectionManager(){return Ar.unregisterSelectionManager(this.selectionManager)}render(){return this.compositionController.render()}reparse(){return this.composition.replaceHTML(this.editorElement.innerHTML)}compositionDidChangeDocument(e){if(this.notifyEditorElement("document-change"),!this.handlingInput)return this.render()}compositionDidChangeCurrentAttributes(e){return this.currentAttributes=e,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})}compositionDidPerformInsertionAtRange(e){this.pasting&&(this.pastedRange=e)}compositionShouldAcceptFile(e){return this.notifyEditorElement("file-accept",{file:e})}compositionDidAddAttachment(e){let t=this.attachmentManager.manageAttachment(e);return this.notifyEditorElement("attachment-add",{attachment:t})}compositionDidEditAttachment(e){this.compositionController.rerenderViewForObject(e);let t=this.attachmentManager.manageAttachment(e);return this.notifyEditorElement("attachment-edit",{attachment:t}),this.notifyEditorElement("change")}compositionDidChangeAttachmentPreviewURL(e){return this.compositionController.invalidateViewForObject(e),this.notifyEditorElement("change")}compositionDidRemoveAttachment(e){let t=this.attachmentManager.unmanageAttachment(e);return this.notifyEditorElement("attachment-remove",{attachment:t})}compositionDidStartEditingAttachment(e,t){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(e),this.compositionController.installAttachmentEditorForAttachment(e,t),this.selectionManager.setLocationRange(this.attachmentLocationRange)}compositionDidStopEditingAttachment(e){this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null}compositionDidRequestChangingSelectionToLocationRange(e){if(!this.loadingSnapshot||this.isFocused())return this.requestedLocationRange=e,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()}compositionWillLoadSnapshot(){this.loadingSnapshot=!0}compositionDidLoadSnapshot(){this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1}getSelectionManager(){return this.selectionManager}attachmentManagerDidRequestRemovalOfAttachment(e){return this.removeAttachment(e)}compositionControllerWillSyncDocumentView(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()}compositionControllerDidSyncDocumentView(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")}compositionControllerDidRender(){this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision}compositionControllerDidFocus(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")}compositionControllerDidBlur(){return this.notifyEditorElement("blur")}compositionControllerDidSelectAttachment(e,t){return this.toolbarController.hideDialog(),this.composition.editAttachment(e,t)}compositionControllerDidRequestDeselectingAttachment(e){let t=this.attachmentLocationRange||this.composition.document.getLocationRangeOfAttachment(e);return this.selectionManager.setLocationRange(t[1])}compositionControllerWillUpdateAttachment(e){return this.editor.recordUndoEntry("Edit Attachment",{context:e.id,consolidatable:!0})}compositionControllerDidRequestRemovalOfAttachment(e){return this.removeAttachment(e)}inputControllerWillHandleInput(){this.handlingInput=!0,this.requestedRender=!1}inputControllerDidRequestRender(){this.requestedRender=!0}inputControllerDidHandleInput(){if(this.handlingInput=!1,this.requestedRender)return this.requestedRender=!1,this.render()}inputControllerDidAllowUnhandledInput(){return this.notifyEditorElement("change")}inputControllerDidRequestReparse(){return this.reparse()}inputControllerWillPerformTyping(){return this.recordTypingUndoEntry()}inputControllerWillPerformFormatting(e){return this.recordFormattingUndoEntry(e)}inputControllerWillCutText(){return this.editor.recordUndoEntry("Cut")}inputControllerWillPaste(e){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:e})}inputControllerDidPaste(e){return e.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:e})}inputControllerWillMoveText(){return this.editor.recordUndoEntry("Move")}inputControllerWillAttachFiles(){return this.editor.recordUndoEntry("Drop Files")}inputControllerWillPerformUndo(){return this.editor.undo()}inputControllerWillPerformRedo(){return this.editor.redo()}inputControllerDidReceiveKeyboardCommand(e){return this.toolbarController.applyKeyboardCommand(e)}inputControllerDidStartDrag(){this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()}inputControllerDidReceiveDragOverPoint(e){return this.selectionManager.setLocationRangeFromPointRange(e)}inputControllerDidCancelDrag(){this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null}locationRangeDidChange(e){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!gd(this.attachmentLocationRange,e)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")}toolbarDidClickButton(){if(!this.getLocationRange())return this.setLocationRange({index:0,offset:0})}toolbarDidInvokeAction(e,t){return this.invokeAction(e,t)}toolbarDidToggleAttribute(e){if(this.recordFormattingUndoEntry(e),this.composition.toggleCurrentAttribute(e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidUpdateAttribute(e,t){if(this.recordFormattingUndoEntry(e),this.composition.setCurrentAttribute(e,t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidRemoveAttribute(e){if(this.recordFormattingUndoEntry(e),this.composition.removeCurrentAttribute(e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarWillShowDialog(e){return this.composition.expandSelectionForEditing(),this.freezeSelection()}toolbarDidShowDialog(e){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:e})}toolbarDidHideDialog(e){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:e})}freezeSelection(){if(!this.selectionFrozen)return this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render()}thawSelection(){if(this.selectionFrozen)return this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()}canInvokeAction(e){return!!this.actionIsExternal(e)||!((t=this.actions[e])===null||t===void 0||(t=t.test)===null||t===void 0||!t.call(this));var t}invokeAction(e,t){return this.actionIsExternal(e)?this.notifyEditorElement("action-invoke",{actionName:e,invokingElement:t}):(i=this.actions[e])===null||i===void 0||(i=i.perform)===null||i===void 0?void 0:i.call(this);var i}actionIsExternal(e){return/^x-./.test(e)}getCurrentActions(){let e={};for(let t in this.actions)e[t]=this.canInvokeAction(t);return e}updateCurrentActions(){let e=this.getCurrentActions();if(!Lo(e,this.currentActions))return this.currentActions=e,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions})}runEditorFilters(){let e=this.composition.getSnapshot();if(Array.from(this.editor.filters).forEach(n=>{let{document:r,selectedRange:o}=e;e=n.call(this.editor,e)||{},e.document||(e.document=r),e.selectedRange||(e.selectedRange=o)}),t=e,i=this.composition.getSnapshot(),!gd(t.selectedRange,i.selectedRange)||!t.document.isEqualTo(i.document))return this.composition.loadSnapshot(e);var t,i}updateInputElement(){let e=function(t,i){let n=OI[i];if(n)return n(t);throw new Error("unknown content type: ".concat(i))}(this.compositionController.getSerializableElement(),"text/html");return this.editorElement.setInputElementValue(e)}notifyEditorElement(e,t){switch(e){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(e,t)}removeAttachment(e){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(e),this.render()}recordFormattingUndoEntry(e){let t=rt(e),i=this.selectionManager.getLocationRange();if(t||!Ds(i))return this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})}recordTypingUndoEntry(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})}getUndoContext(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return[this.getLocationContext(),this.getTimeContext(),...Array.from(t)]}getLocationContext(){let e=this.selectionManager.getLocationRange();return Ds(e)?e[0].index:e}getTimeContext(){return Wg.interval>0?Math.floor(new Date().getTime()/Wg.interval):0}isFocused(){var e;return this.editorElement===((e=this.editorElement.ownerDocument)===null||e===void 0?void 0:e.activeElement)}isFocusedInvisibly(){return this.isFocused()&&!this.getLocationRange()}get actions(){return this.constructor.actions}};di(yr,"actions",{undo:{test(){return this.editor.canUndo()},perform(){return this.editor.undo()}},redo:{test(){return this.editor.canRedo()},perform(){return this.editor.redo()}},link:{test(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test(){return this.editor.canIncreaseNestingLevel()},perform(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test(){return this.editor.canDecreaseNestingLevel()},perform(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:()=>!0,perform(){return cv.pickFiles(this.editor.insertFiles)}}}),yr.proxyMethod("getSelectionManager().setLocationRange"),yr.proxyMethod("getSelectionManager().getLocationRange");var eF=Object.freeze({__proto__:null,AttachmentEditorController:Od,CompositionController:Md,Controller:Ld,EditorController:yr,InputController:Mo,Level0InputController:Ni,Level2InputController:br,ToolbarController:Id}),tF=Object.freeze({__proto__:null,MutationObserver:kd,SelectionChangeObserver:vd}),iF=Object.freeze({__proto__:null,FileVerificationOperation:Dd,ImagePreloadOperation:Sd});hS("trix-toolbar",`%t {
  display: block;
}

%t {
  white-space: nowrap;
}

%t [data-trix-dialog] {
  display: none;
}

%t [data-trix-dialog][data-trix-active] {
  display: block;
}

%t [data-trix-dialog] [data-trix-validate]:invalid {
  background-color: #ffdddd;
}`);var Fd=class extends HTMLElement{connectedCallback(){this.innerHTML===""&&(this.innerHTML=dS.getDefaultHTML())}},sF=0,nF=function(s){if(!s.hasAttribute("contenteditable"))return s.setAttribute("contenteditable",""),function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.times=1,Xe(e,t)}("focus",{onElement:s,withCallback:()=>rF(s)})},rF=function(s){return oF(s),aF(s)},oF=function(s){var e,t;if((e=(t=document).queryCommandSupported)!==null&&e!==void 0&&e.call(t,"enableObjectResizing"))return document.execCommand("enableObjectResizing",!1,!1),Xe("mscontrolselect",{onElement:s,preventDefault:!0})},aF=function(s){var e,t;if((e=(t=document).queryCommandSupported)!==null&&e!==void 0&&e.call(t,"DefaultParagraphSeparator")){let{tagName:i}=zt.default;if(["div","p"].includes(i))return document.execCommand("DefaultParagraphSeparator",!1,i)}},rS=Dl.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"};hS("trix-editor",`%t {
    display: block;
}

%t:empty:not(:focus)::before {
    content: attr(placeholder);
    color: graytext;
    cursor: text;
    pointer-events: none;
    white-space: pre-line;
}

%t a[contenteditable=false] {
    cursor: text;
}

%t img {
    max-width: 100%;
    height: auto;
}

%t `.concat(gr,` figcaption textarea {
    resize: none;
}

%t `).concat(gr,` figcaption textarea.trix-autoresize-clone {
    position: absolute;
    left: -9999px;
    max-height: 0px;
}

%t `).concat(gr,` figcaption[data-trix-placeholder]:empty::before {
    content: attr(data-trix-placeholder);
    color: graytext;
}

%t [data-trix-cursor-target] {
    display: `).concat(rS.display,` !important;
    width: `).concat(rS.width,` !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

%t [data-trix-cursor-target=left] {
    vertical-align: top !important;
    margin-left: -1px !important;
}

%t [data-trix-cursor-target=right] {
    vertical-align: bottom !important;
    margin-right: -1px !important;
}`));var Rd=class extends HTMLElement{get trixId(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++sF),this.trixId)}get labels(){let e=[];this.id&&this.ownerDocument&&e.push(...Array.from(this.ownerDocument.querySelectorAll("label[for='".concat(this.id,"']"))||[]));let t=ln(this,{matchingSelector:"label"});return t&&[this,null].includes(t.control)&&e.push(t),e}get toolbarElement(){var e;if(this.hasAttribute("toolbar"))return(e=this.ownerDocument)===null||e===void 0?void 0:e.getElementById(this.getAttribute("toolbar"));if(this.parentNode){let t="trix-toolbar-".concat(this.trixId);this.setAttribute("toolbar",t);let i=Ce("trix-toolbar",{id:t});return this.parentNode.insertBefore(i,this),i}}get form(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.form}get inputElement(){var e;if(this.hasAttribute("input"))return(e=this.ownerDocument)===null||e===void 0?void 0:e.getElementById(this.getAttribute("input"));if(this.parentNode){let t="trix-input-".concat(this.trixId);this.setAttribute("input",t);let i=Ce("input",{type:"hidden",id:t});return this.parentNode.insertBefore(i,this.nextElementSibling),i}}get editor(){var e;return(e=this.editorController)===null||e===void 0?void 0:e.editor}get name(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.name}get value(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.value}set value(e){var t;this.defaultValue=e,(t=this.editor)===null||t===void 0||t.loadHTML(this.defaultValue)}notify(e,t){if(this.editorController)return Tl("trix-".concat(e),{onElement:this,attributes:t})}setInputElementValue(e){this.inputElement&&(this.inputElement.value=e)}connectedCallback(){this.hasAttribute("data-trix-internal")||(nF(this),function(e){e.hasAttribute("role")||e.setAttribute("role","textbox")}(this),function(e){if(e.hasAttribute("aria-label")||e.hasAttribute("aria-labelledby"))return;let t=function(){let i=Array.from(e.labels).map(r=>{if(!r.contains(e))return r.textContent}).filter(r=>r),n=i.join(" ");return n?e.setAttribute("aria-label",n):e.removeAttribute("aria-label")};t(),Xe("focus",{onElement:e,withCallback:t})}(this),this.editorController||(Tl("trix-before-initialize",{onElement:this}),this.editorController=new yr({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame(()=>Tl("trix-initialize",{onElement:this}))),this.editorController.registerSelectionManager(),this.registerResetListener(),this.registerClickListener(),function(e){!document.querySelector(":focus")&&e.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===e&&e.focus()}(this))}disconnectedCallback(){var e;return(e=this.editorController)===null||e===void 0||e.unregisterSelectionManager(),this.unregisterResetListener(),this.unregisterClickListener()}registerResetListener(){return this.resetListener=this.resetBubbled.bind(this),window.addEventListener("reset",this.resetListener,!1)}unregisterResetListener(){return window.removeEventListener("reset",this.resetListener,!1)}registerClickListener(){return this.clickListener=this.clickBubbled.bind(this),window.addEventListener("click",this.clickListener,!1)}unregisterClickListener(){return window.removeEventListener("click",this.clickListener,!1)}resetBubbled(e){if(!e.defaultPrevented&&e.target===this.form)return this.reset()}clickBubbled(e){if(e.defaultPrevented||this.contains(e.target))return;let t=ln(e.target,{matchingSelector:"label"});return t&&Array.from(this.labels).includes(t)?this.focus():void 0}reset(){this.value=this.defaultValue}},oS={VERSION:zD,config:Il,core:MI,models:SS,views:FI,controllers:eF,observers:tF,operations:iF,elements:Object.freeze({__proto__:null,TrixEditorElement:Rd,TrixToolbarElement:Fd}),filters:Object.freeze({__proto__:null,Filter:xd,attachmentGalleryFilter:wS})};Object.assign(oS,SS),window.Trix=oS,setTimeout(function(){customElements.get("trix-toolbar")||customElements.define("trix-toolbar",Fd),customElements.get("trix-editor")||customElements.define("trix-editor",Rd)},0);(function(s){typeof define=="function"&&define.amd?define(s):s()})(function(){"use strict";var s={exports:{}};(function(te,$){(function(T){te.exports=T()})(function(T){var D=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function k(Q,j){var L=Q[0],P=Q[1],z=Q[2],R=Q[3];L+=(P&z|~P&R)+j[0]-680876936|0,L=(L<<7|L>>>25)+P|0,R+=(L&P|~L&z)+j[1]-389564586|0,R=(R<<12|R>>>20)+L|0,z+=(R&L|~R&P)+j[2]+606105819|0,z=(z<<17|z>>>15)+R|0,P+=(z&R|~z&L)+j[3]-1044525330|0,P=(P<<22|P>>>10)+z|0,L+=(P&z|~P&R)+j[4]-176418897|0,L=(L<<7|L>>>25)+P|0,R+=(L&P|~L&z)+j[5]+1200080426|0,R=(R<<12|R>>>20)+L|0,z+=(R&L|~R&P)+j[6]-1473231341|0,z=(z<<17|z>>>15)+R|0,P+=(z&R|~z&L)+j[7]-45705983|0,P=(P<<22|P>>>10)+z|0,L+=(P&z|~P&R)+j[8]+1770035416|0,L=(L<<7|L>>>25)+P|0,R+=(L&P|~L&z)+j[9]-1958414417|0,R=(R<<12|R>>>20)+L|0,z+=(R&L|~R&P)+j[10]-42063|0,z=(z<<17|z>>>15)+R|0,P+=(z&R|~z&L)+j[11]-1990404162|0,P=(P<<22|P>>>10)+z|0,L+=(P&z|~P&R)+j[12]+1804603682|0,L=(L<<7|L>>>25)+P|0,R+=(L&P|~L&z)+j[13]-40341101|0,R=(R<<12|R>>>20)+L|0,z+=(R&L|~R&P)+j[14]-1502002290|0,z=(z<<17|z>>>15)+R|0,P+=(z&R|~z&L)+j[15]+1236535329|0,P=(P<<22|P>>>10)+z|0,L+=(P&R|z&~R)+j[1]-165796510|0,L=(L<<5|L>>>27)+P|0,R+=(L&z|P&~z)+j[6]-1069501632|0,R=(R<<9|R>>>23)+L|0,z+=(R&P|L&~P)+j[11]+643717713|0,z=(z<<14|z>>>18)+R|0,P+=(z&L|R&~L)+j[0]-373897302|0,P=(P<<20|P>>>12)+z|0,L+=(P&R|z&~R)+j[5]-701558691|0,L=(L<<5|L>>>27)+P|0,R+=(L&z|P&~z)+j[10]+38016083|0,R=(R<<9|R>>>23)+L|0,z+=(R&P|L&~P)+j[15]-660478335|0,z=(z<<14|z>>>18)+R|0,P+=(z&L|R&~L)+j[4]-405537848|0,P=(P<<20|P>>>12)+z|0,L+=(P&R|z&~R)+j[9]+568446438|0,L=(L<<5|L>>>27)+P|0,R+=(L&z|P&~z)+j[14]-1019803690|0,R=(R<<9|R>>>23)+L|0,z+=(R&P|L&~P)+j[3]-187363961|0,z=(z<<14|z>>>18)+R|0,P+=(z&L|R&~L)+j[8]+1163531501|0,P=(P<<20|P>>>12)+z|0,L+=(P&R|z&~R)+j[13]-1444681467|0,L=(L<<5|L>>>27)+P|0,R+=(L&z|P&~z)+j[2]-51403784|0,R=(R<<9|R>>>23)+L|0,z+=(R&P|L&~P)+j[7]+1735328473|0,z=(z<<14|z>>>18)+R|0,P+=(z&L|R&~L)+j[12]-1926607734|0,P=(P<<20|P>>>12)+z|0,L+=(P^z^R)+j[5]-378558|0,L=(L<<4|L>>>28)+P|0,R+=(L^P^z)+j[8]-2022574463|0,R=(R<<11|R>>>21)+L|0,z+=(R^L^P)+j[11]+1839030562|0,z=(z<<16|z>>>16)+R|0,P+=(z^R^L)+j[14]-35309556|0,P=(P<<23|P>>>9)+z|0,L+=(P^z^R)+j[1]-1530992060|0,L=(L<<4|L>>>28)+P|0,R+=(L^P^z)+j[4]+1272893353|0,R=(R<<11|R>>>21)+L|0,z+=(R^L^P)+j[7]-155497632|0,z=(z<<16|z>>>16)+R|0,P+=(z^R^L)+j[10]-1094730640|0,P=(P<<23|P>>>9)+z|0,L+=(P^z^R)+j[13]+681279174|0,L=(L<<4|L>>>28)+P|0,R+=(L^P^z)+j[0]-358537222|0,R=(R<<11|R>>>21)+L|0,z+=(R^L^P)+j[3]-722521979|0,z=(z<<16|z>>>16)+R|0,P+=(z^R^L)+j[6]+76029189|0,P=(P<<23|P>>>9)+z|0,L+=(P^z^R)+j[9]-640364487|0,L=(L<<4|L>>>28)+P|0,R+=(L^P^z)+j[12]-421815835|0,R=(R<<11|R>>>21)+L|0,z+=(R^L^P)+j[15]+530742520|0,z=(z<<16|z>>>16)+R|0,P+=(z^R^L)+j[2]-995338651|0,P=(P<<23|P>>>9)+z|0,L+=(z^(P|~R))+j[0]-198630844|0,L=(L<<6|L>>>26)+P|0,R+=(P^(L|~z))+j[7]+1126891415|0,R=(R<<10|R>>>22)+L|0,z+=(L^(R|~P))+j[14]-1416354905|0,z=(z<<15|z>>>17)+R|0,P+=(R^(z|~L))+j[5]-57434055|0,P=(P<<21|P>>>11)+z|0,L+=(z^(P|~R))+j[12]+1700485571|0,L=(L<<6|L>>>26)+P|0,R+=(P^(L|~z))+j[3]-1894986606|0,R=(R<<10|R>>>22)+L|0,z+=(L^(R|~P))+j[10]-1051523|0,z=(z<<15|z>>>17)+R|0,P+=(R^(z|~L))+j[1]-2054922799|0,P=(P<<21|P>>>11)+z|0,L+=(z^(P|~R))+j[8]+1873313359|0,L=(L<<6|L>>>26)+P|0,R+=(P^(L|~z))+j[15]-30611744|0,R=(R<<10|R>>>22)+L|0,z+=(L^(R|~P))+j[6]-1560198380|0,z=(z<<15|z>>>17)+R|0,P+=(R^(z|~L))+j[13]+1309151649|0,P=(P<<21|P>>>11)+z|0,L+=(z^(P|~R))+j[4]-145523070|0,L=(L<<6|L>>>26)+P|0,R+=(P^(L|~z))+j[11]-1120210379|0,R=(R<<10|R>>>22)+L|0,z+=(L^(R|~P))+j[2]+718787259|0,z=(z<<15|z>>>17)+R|0,P+=(R^(z|~L))+j[9]-343485551|0,P=(P<<21|P>>>11)+z|0,Q[0]=L+Q[0]|0,Q[1]=P+Q[1]|0,Q[2]=z+Q[2]|0,Q[3]=R+Q[3]|0}function K(Q){var j=[],L;for(L=0;L<64;L+=4)j[L>>2]=Q.charCodeAt(L)+(Q.charCodeAt(L+1)<<8)+(Q.charCodeAt(L+2)<<16)+(Q.charCodeAt(L+3)<<24);return j}function Z(Q){var j=[],L;for(L=0;L<64;L+=4)j[L>>2]=Q[L]+(Q[L+1]<<8)+(Q[L+2]<<16)+(Q[L+3]<<24);return j}function re(Q){var j=Q.length,L=[1732584193,-271733879,-1732584194,271733878],P,z,R,He,fe,pt;for(P=64;P<=j;P+=64)k(L,K(Q.substring(P-64,P)));for(Q=Q.substring(P-64),z=Q.length,R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P=0;P<z;P+=1)R[P>>2]|=Q.charCodeAt(P)<<(P%4<<3);if(R[P>>2]|=128<<(P%4<<3),P>55)for(k(L,R),P=0;P<16;P+=1)R[P]=0;return He=j*8,He=He.toString(16).match(/(.*?)(.{0,8})$/),fe=parseInt(He[2],16),pt=parseInt(He[1],16)||0,R[14]=fe,R[15]=pt,k(L,R),L}function ve(Q){var j=Q.length,L=[1732584193,-271733879,-1732584194,271733878],P,z,R,He,fe,pt;for(P=64;P<=j;P+=64)k(L,Z(Q.subarray(P-64,P)));for(Q=P-64<j?Q.subarray(P-64):new Uint8Array(0),z=Q.length,R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P=0;P<z;P+=1)R[P>>2]|=Q[P]<<(P%4<<3);if(R[P>>2]|=128<<(P%4<<3),P>55)for(k(L,R),P=0;P<16;P+=1)R[P]=0;return He=j*8,He=He.toString(16).match(/(.*?)(.{0,8})$/),fe=parseInt(He[2],16),pt=parseInt(He[1],16)||0,R[14]=fe,R[15]=pt,k(L,R),L}function _e(Q){var j="",L;for(L=0;L<4;L+=1)j+=D[Q>>L*8+4&15]+D[Q>>L*8&15];return j}function Ne(Q){var j;for(j=0;j<Q.length;j+=1)Q[j]=_e(Q[j]);return Q.join("")}Ne(re("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function Q(j,L){return j=j|0||0,j<0?Math.max(j+L,0):Math.min(j,L)}ArrayBuffer.prototype.slice=function(j,L){var P=this.byteLength,z=Q(j,P),R=P,He,fe,pt,xt;return L!==T&&(R=Q(L,P)),z>R?new ArrayBuffer(0):(He=R-z,fe=new ArrayBuffer(He),pt=new Uint8Array(fe),xt=new Uint8Array(this,z,He),pt.set(xt),fe)}}();function Ke(Q){return/[\u0080-\uFFFF]/.test(Q)&&(Q=unescape(encodeURIComponent(Q))),Q}function Se(Q,j){var L=Q.length,P=new ArrayBuffer(L),z=new Uint8Array(P),R;for(R=0;R<L;R+=1)z[R]=Q.charCodeAt(R);return j?z:P}function Be(Q){return String.fromCharCode.apply(null,new Uint8Array(Q))}function Je(Q,j,L){var P=new Uint8Array(Q.byteLength+j.byteLength);return P.set(new Uint8Array(Q)),P.set(new Uint8Array(j),Q.byteLength),L?P:P.buffer}function X(Q){var j=[],L=Q.length,P;for(P=0;P<L-1;P+=2)j.push(parseInt(Q.substr(P,2),16));return String.fromCharCode.apply(String,j)}function Pe(){this.reset()}return Pe.prototype.append=function(Q){return this.appendBinary(Ke(Q)),this},Pe.prototype.appendBinary=function(Q){this._buff+=Q,this._length+=Q.length;var j=this._buff.length,L;for(L=64;L<=j;L+=64)k(this._hash,K(this._buff.substring(L-64,L)));return this._buff=this._buff.substring(L-64),this},Pe.prototype.end=function(Q){var j=this._buff,L=j.length,P,z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R;for(P=0;P<L;P+=1)z[P>>2]|=j.charCodeAt(P)<<(P%4<<3);return this._finish(z,L),R=Ne(this._hash),Q&&(R=X(R)),this.reset(),R},Pe.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},Pe.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},Pe.prototype.setState=function(Q){return this._buff=Q.buff,this._length=Q.length,this._hash=Q.hash,this},Pe.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},Pe.prototype._finish=function(Q,j){var L=j,P,z,R;if(Q[L>>2]|=128<<(L%4<<3),L>55)for(k(this._hash,Q),L=0;L<16;L+=1)Q[L]=0;P=this._length*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),z=parseInt(P[2],16),R=parseInt(P[1],16)||0,Q[14]=z,Q[15]=R,k(this._hash,Q)},Pe.hash=function(Q,j){return Pe.hashBinary(Ke(Q),j)},Pe.hashBinary=function(Q,j){var L=re(Q),P=Ne(L);return j?X(P):P},Pe.ArrayBuffer=function(){this.reset()},Pe.ArrayBuffer.prototype.append=function(Q){var j=Je(this._buff.buffer,Q,!0),L=j.length,P;for(this._length+=Q.byteLength,P=64;P<=L;P+=64)k(this._hash,Z(j.subarray(P-64,P)));return this._buff=P-64<L?new Uint8Array(j.buffer.slice(P-64)):new Uint8Array(0),this},Pe.ArrayBuffer.prototype.end=function(Q){var j=this._buff,L=j.length,P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],z,R;for(z=0;z<L;z+=1)P[z>>2]|=j[z]<<(z%4<<3);return this._finish(P,L),R=Ne(this._hash),Q&&(R=X(R)),this.reset(),R},Pe.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},Pe.ArrayBuffer.prototype.getState=function(){var Q=Pe.prototype.getState.call(this);return Q.buff=Be(Q.buff),Q},Pe.ArrayBuffer.prototype.setState=function(Q){return Q.buff=Se(Q.buff,!0),Pe.prototype.setState.call(this,Q)},Pe.ArrayBuffer.prototype.destroy=Pe.prototype.destroy,Pe.ArrayBuffer.prototype._finish=Pe.prototype._finish,Pe.ArrayBuffer.hash=function(Q,j){var L=ve(new Uint8Array(Q)),P=Ne(L);return j?X(P):P},Pe})})(s);var e=s.exports;let t=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice;class i{static create($,T){new i($).create(T)}constructor($){this.file=$,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}create($){this.callback=$,this.md5Buffer=new e.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",T=>this.fileReaderDidLoad(T)),this.fileReader.addEventListener("error",T=>this.fileReaderDidError(T)),this.readNextChunk()}fileReaderDidLoad($){if(this.md5Buffer.append($.target.result),!this.readNextChunk()){let T=this.md5Buffer.end(!0),D=btoa(T);this.callback(null,D)}}fileReaderDidError($){this.callback(`Error reading ${this.file.name}`)}readNextChunk(){if(this.chunkIndex<this.chunkCount||this.chunkIndex==0&&this.chunkCount==0){let $=this.chunkIndex*this.chunkSize,T=Math.min($+this.chunkSize,this.file.size),D=t.call(this.file,$,T);return this.fileReader.readAsArrayBuffer(D),this.chunkIndex++,!0}else return!1}}function n(te){let $=o(document.head,`meta[name="${te}"]`);if($)return $.getAttribute("content")}function r(te,$){typeof te=="string"&&($=te,te=document);let T=te.querySelectorAll($);return l(T)}function o(te,$){return typeof te=="string"&&($=te,te=document),te.querySelector($)}function a(te,$,T={}){let{disabled:D}=te,{bubbles:k,cancelable:K,detail:Z}=T,re=document.createEvent("Event");re.initEvent($,k||!0,K||!0),re.detail=Z||{};try{te.disabled=!1,te.dispatchEvent(re)}finally{te.disabled=D}return re}function l(te){return Array.isArray(te)?te:Array.from?Array.from(te):[].slice.call(te)}class c{constructor($,T,D,k={}){this.file=$,this.attributes={filename:$.name,content_type:$.type||"application/octet-stream",byte_size:$.size,checksum:T},this.xhr=new XMLHttpRequest,this.xhr.open("POST",D,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(k).forEach(Z=>{this.xhr.setRequestHeader(Z,k[Z])});let K=n("csrf-token");K!=null&&this.xhr.setRequestHeader("X-CSRF-Token",K),this.xhr.addEventListener("load",Z=>this.requestDidLoad(Z)),this.xhr.addEventListener("error",Z=>this.requestDidError(Z))}get status(){return this.xhr.status}get response(){let{responseType:$,response:T}=this.xhr;return $=="json"?T:JSON.parse(T)}create($){this.callback=$,this.xhr.send(JSON.stringify({blob:this.attributes}))}requestDidLoad($){if(this.status>=200&&this.status<300){let{response:T}=this,{direct_upload:D}=T;delete T.direct_upload,this.attributes=T,this.directUploadData=D,this.callback(null,this.toJSON())}else this.requestDidError($)}requestDidError($){this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`)}toJSON(){let $={};for(let T in this.attributes)$[T]=this.attributes[T];return $}}class u{constructor($){this.blob=$,this.file=$.file;let{url:T,headers:D}=$.directUploadData;this.xhr=new XMLHttpRequest,this.xhr.open("PUT",T,!0),this.xhr.responseType="text";for(let k in D)this.xhr.setRequestHeader(k,D[k]);this.xhr.addEventListener("load",k=>this.requestDidLoad(k)),this.xhr.addEventListener("error",k=>this.requestDidError(k))}create($){this.callback=$,this.xhr.send(this.file.slice())}requestDidLoad($){let{status:T,response:D}=this.xhr;T>=200&&T<300?this.callback(null,D):this.requestDidError($)}requestDidError($){this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`)}}let h=0;class f{constructor($,T,D,k={}){this.id=++h,this.file=$,this.url=T,this.delegate=D,this.customHeaders=k}create($){i.create(this.file,(T,D)=>{if(T){$(T);return}let k=new c(this.file,D,this.url,this.customHeaders);p(this.delegate,"directUploadWillCreateBlobWithXHR",k.xhr),k.create(K=>{if(K)$(K);else{let Z=new u(k);p(this.delegate,"directUploadWillStoreFileWithXHR",Z.xhr),Z.create(re=>{re?$(re):$(null,k.toJSON())})}})})}}function p(te,$,...T){if(te&&typeof te[$]=="function")return te[$](...T)}class g{constructor($,T){this.input=$,this.file=T,this.directUpload=new f(this.file,this.url,this),this.dispatch("initialize")}start($){let T=document.createElement("input");T.type="hidden",T.name=this.input.name,this.input.insertAdjacentElement("beforebegin",T),this.dispatch("start"),this.directUpload.create((D,k)=>{D?(T.parentNode.removeChild(T),this.dispatchError(D)):T.value=k.signed_id,this.dispatch("end"),$(D)})}uploadRequestDidProgress($){let T=$.loaded/$.total*100;T&&this.dispatch("progress",{progress:T})}get url(){return this.input.getAttribute("data-direct-upload-url")}dispatch($,T={}){return T.file=this.file,T.id=this.directUpload.id,a(this.input,`direct-upload:${$}`,{detail:T})}dispatchError($){this.dispatch("error",{error:$}).defaultPrevented||alert($)}directUploadWillCreateBlobWithXHR($){this.dispatch("before-blob-request",{xhr:$})}directUploadWillStoreFileWithXHR($){this.dispatch("before-storage-request",{xhr:$}),$.upload.addEventListener("progress",T=>this.uploadRequestDidProgress(T))}}let y="input[type=file][data-direct-upload-url]:not([disabled])";class A{constructor($){this.form=$,this.inputs=r($,y).filter(T=>T.files.length)}start($){let T=this.createDirectUploadControllers(),D=()=>{let k=T.shift();k?k.start(K=>{K?($(K),this.dispatch("end")):D()}):($(),this.dispatch("end"))};this.dispatch("start"),D()}createDirectUploadControllers(){let $=[];return this.inputs.forEach(T=>{l(T.files).forEach(D=>{let k=new g(T,D);$.push(k)})}),$}dispatch($,T={}){return a(this.form,`direct-uploads:${$}`,{detail:T})}}let S="data-direct-uploads-processing",O=new WeakMap,I=!1;function F(){I||(I=!0,document.addEventListener("click",H,!0),document.addEventListener("submit",U,!0),document.addEventListener("ajax:before",W))}function H(te){let $=te.target.closest("button, input");$&&$.type==="submit"&&$.form&&O.set($.form,$)}function U(te){J(te)}function W(te){te.target.tagName=="FORM"&&J(te)}function J(te){let $=te.target;if($.hasAttribute(S)){te.preventDefault();return}let T=new A($),{inputs:D}=T;D.length&&(te.preventDefault(),$.setAttribute(S,""),D.forEach(G),T.start(k=>{$.removeAttribute(S),k?D.forEach(ae):oe($)}))}function oe(te){let $=O.get(te)||o(te,"input[type=submit], button[type=submit]");if($){let{disabled:T}=$;$.disabled=!1,$.focus(),$.click(),$.disabled=T}else $=document.createElement("input"),$.type="submit",$.style.display="none",te.appendChild($),$.click(),te.removeChild($);O.delete(te)}function G(te){te.disabled=!0}function ae(te){te.disabled=!1}function pe(){window.ActiveStorage&&F()}setTimeout(pe,1);class ue{constructor($,T){this.attachment=$,this.element=T,this.directUpload=new f($.file,this.directUploadUrl,this)}start(){this.directUpload.create(this.directUploadDidComplete.bind(this))}directUploadWillStoreFileWithXHR($){$.upload.addEventListener("progress",T=>{let D=T.loaded/T.total*100;this.attachment.setUploadProgress(D)})}directUploadDidComplete($,T){if($)throw new Error(`Direct upload failed: ${$}`);this.attachment.setAttributes({sgid:T.attachable_sgid,url:this.createBlobUrl(T.signed_id,T.filename)})}createBlobUrl($,T){return this.blobUrlTemplate.replace(":signed_id",$).replace(":filename",encodeURIComponent(T))}get directUploadUrl(){return this.element.dataset.directUploadUrl}get blobUrlTemplate(){return this.element.dataset.blobUrlTemplate}}addEventListener("trix-attachment-add",te=>{let{attachment:$,target:T}=te;$.file&&new ue($,T).start()})});})();
/*! Bundled license information:

bootstrap/dist/js/bootstrap.js:
  (*!
    * Bootstrap v5.3.3 (https://getbootstrap.com/)
    * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
    *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

cropperjs/dist/cropper.js:
  (*!
   * Cropper.js v1.5.7
   * https://fengyuanchen.github.io/cropperjs
   *
   * Copyright 2015-present Chen Fengyuan
   * Released under the MIT license
   *
   * Date: 2020-05-23T05:23:00.081Z
   *)

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.3
  Copyright © 2024 37signals LLC
   *)

@uppy/utils/lib/Translator.js:
  (**
   * Takes a string with placeholder variables like `%{smart_count} file selected`
   * and replaces it with values from options `{smart_count: 5}`
   *
   * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
   * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
   *
   * @param phrase that needs interpolation, with placeholders
   * @param options with values that will be used to replace placeholders
   *)
*/
//# sourceMappingURL=/assets/application.js.map
