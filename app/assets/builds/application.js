(()=>{var pb=Object.create;var na=Object.defineProperty;var mb=Object.getOwnPropertyDescriptor;var gb=Object.getOwnPropertyNames;var vb=Object.getPrototypeOf,bb=Object.prototype.hasOwnProperty;var bt=(n,e)=>()=>(n&&(e=n(n=0)),e);var su=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),ru=(n,e)=>{for(var t in e)na(n,t,{get:e[t],enumerable:!0})},yb=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of gb(e))!bb.call(n,s)&&s!==t&&na(n,s,{get:()=>e[s],enumerable:!(i=mb(e,s))||i.enumerable});return n};var ou=(n,e,t)=>(t=n!=null?pb(vb(n)):{},yb(e||!n||!n.__esModule?na(t,"default",{value:n,enumerable:!0}):t,n));var Xt,dr=bt(()=>{Xt={logger:typeof console<"u"?console:void 0,WebSocket:typeof WebSocket<"u"?WebSocket:void 0}});var ue,nn=bt(()=>{dr();ue={log(...n){this.enabled&&(n.push(Date.now()),Xt.logger.log("[ActionCable]",...n))}}});var qn,ur,Un,hr,ja=bt(()=>{nn();qn=()=>new Date().getTime(),ur=n=>(qn()-n)/1e3,Un=class{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=qn(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),ue.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=qn(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),ue.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordMessage(){this.pingedAt=qn()}recordConnect(){this.reconnectAttempts=0,delete this.disconnectedAt,ue.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=qn(),ue.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:e,reconnectionBackoffRate:t}=this.constructor,i=Math.pow(1+t,Math.min(this.reconnectAttempts,10)),r=(this.reconnectAttempts===0?1:t)*Math.random();return e*1e3*i*(1+r)}reconnectIfStale(){this.connectionIsStale()&&(ue.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${ur(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?ue.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${ur(this.disconnectedAt)} s`):(ue.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return ur(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&ur(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(ue.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};Un.staleThreshold=6;Un.reconnectionBackoffRate=.15;hr=Un});var Yn,Wa=bt(()=>{Yn={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart",remote:"remote"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]}});var Gn,qa,Oy,zu,Xn,fr,Ua=bt(()=>{dr();ja();Wa();nn();({message_types:Gn,protocols:qa}=Yn),Oy=qa.slice(0,qa.length-1),zu=[].indexOf,Xn=class{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new hr(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){if(this.isActive())return ue.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1;{let e=[...qa,...this.consumer.subprotocols||[]];return ue.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${e}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new Xt.WebSocket(this.consumer.url,e),this.installEventHandlers(),this.monitor.start(),!0}}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(ue.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){ue.log("Failed to reopen WebSocket",e)}finally{ue.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}triedToReconnect(){return this.monitor.reconnectAttempts>0}isProtocolSupported(){return zu.call(Oy,this.getProtocol())>=0}isState(...e){return zu.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in Xt.WebSocket)if(Xt.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){let t=this.events[e].bind(this);this.webSocket[`on${e}`]=t}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}};Xn.reopenDelay=500;Xn.prototype.events={message(n){if(!this.isProtocolSupported())return;let{identifier:e,message:t,reason:i,reconnect:s,type:r}=JSON.parse(n.data);switch(this.monitor.recordMessage(),r){case Gn.welcome:return this.triedToReconnect()&&(this.reconnectAttempted=!0),this.monitor.recordConnect(),this.subscriptions.reload();case Gn.disconnect:return ue.log(`Disconnecting. Reason: ${i}`),this.close({allowReconnect:s});case Gn.ping:return null;case Gn.confirmation:return this.subscriptions.confirmSubscription(e),this.reconnectAttempted?(this.reconnectAttempted=!1,this.subscriptions.notify(e,"connected",{reconnected:!0})):this.subscriptions.notify(e,"connected",{reconnected:!1});case Gn.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",t)}},open(){if(ue.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return ue.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(n){if(ue.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){ue.log("WebSocket onerror event")}};fr=Xn});var _y,gi,Ya=bt(()=>{_y=function(n,e){if(e!=null)for(let t in e){let i=e[t];n[t]=i}return n},gi=class{constructor(e,t={},i){this.consumer=e,this.identifier=JSON.stringify(t),_y(this,i)}perform(e,t={}){return t.action=e,this.send(t)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}});var Ga,pr,Xa=bt(()=>{nn();Ga=class{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(ue.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):ue.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){ue.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(t=>t!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{ue.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}},pr=Ga});var vi,Ka=bt(()=>{Ya();Xa();nn();vi=class{constructor(e){this.consumer=e,this.guarantor=new pr(this),this.subscriptions=[]}create(e,t){let i=e,s=typeof i=="object"?i:{channel:i},r=new gi(this.consumer,s,t);return this.add(r)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(t=>(this.forget(t),this.notify(t,"rejected"),t))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(t=>t!==e),e}findAll(e){return this.subscriptions.filter(t=>t.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...t){return this.subscriptions.map(i=>this.notify(i,e,...t))}notify(e,t,...i){let s;return typeof e=="string"?s=this.findAll(e):s=[e],s.map(r=>typeof r[t]=="function"?r[t](...i):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){ue.log(`Subscription confirmed ${e}`),this.findAll(e).map(t=>this.guarantor.forget(t))}sendCommand(e,t){let{identifier:i}=e;return this.consumer.send({command:t,identifier:i})}}});function Ja(n){if(typeof n=="function"&&(n=n()),n&&!/^wss?:/i.test(n)){let e=document.createElement("a");return e.href=n,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return n}var sn,Hu=bt(()=>{Ua();Ka();sn=class{constructor(e){this._url=e,this.subscriptions=new vi(this),this.connection=new fr(this),this.subprotocols=[]}get url(){return Ja(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}addSubProtocol(e){this.subprotocols=[...this.subprotocols,e]}}});var ju={};ru(ju,{Connection:()=>fr,ConnectionMonitor:()=>hr,Consumer:()=>sn,INTERNAL:()=>Yn,Subscription:()=>gi,SubscriptionGuarantor:()=>pr,Subscriptions:()=>vi,adapters:()=>Xt,createConsumer:()=>Ry,createWebSocketURL:()=>Ja,getConfig:()=>Vu,logger:()=>ue});function Ry(n=Vu("url")||Yn.default_mount_path){return new sn(n)}function Vu(n){let e=document.head.querySelector(`meta[name='action-cable-${n}']`);if(e)return e.getAttribute("content")}var Wu=bt(()=>{Ua();ja();Hu();Wa();Ya();Ka();Xa();dr();nn()});var Rh=su(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});function Xe(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function yi(n){var e=Xe(n).Element;return n instanceof e||n instanceof Element}function st(n){var e=Xe(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function xl(n){if(typeof ShadowRoot>"u")return!1;var e=Xe(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}var bi=Math.max,Tr=Math.min,rn=Math.round;function Al(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function vh(){return!/^((?!chrome|android).)*safari/i.test(Al())}function on(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=n.getBoundingClientRect(),s=1,r=1;e&&st(n)&&(s=n.offsetWidth>0&&rn(i.width)/n.offsetWidth||1,r=n.offsetHeight>0&&rn(i.height)/n.offsetHeight||1);var o=yi(n)?Xe(n):window,a=o.visualViewport,l=!vh()&&t,d=(i.left+(l&&a?a.offsetLeft:0))/s,u=(i.top+(l&&a?a.offsetTop:0))/r,h=i.width/s,m=i.height/r;return{width:h,height:m,top:u,right:d+h,bottom:u+m,left:d,x:d,y:u}}function Cl(n){var e=Xe(n),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function M0(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function P0(n){return n===Xe(n)||!st(n)?Cl(n):M0(n)}function Et(n){return n?(n.nodeName||"").toLowerCase():null}function Kt(n){return((yi(n)?n.ownerDocument:n.document)||window.document).documentElement}function Ll(n){return on(Kt(n)).left+Cl(n).scrollLeft}function Ot(n){return Xe(n).getComputedStyle(n)}function Ml(n){var e=Ot(n),t=e.overflow,i=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+i)}function O0(n){var e=n.getBoundingClientRect(),t=rn(e.width)/n.offsetWidth||1,i=rn(e.height)/n.offsetHeight||1;return t!==1||i!==1}function _0(n,e,t){t===void 0&&(t=!1);var i=st(e),s=st(e)&&O0(e),r=Kt(e),o=on(n,s,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((Et(e)!=="body"||Ml(r))&&(a=P0(e)),st(e)?(l=on(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=Ll(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Pl(n){var e=on(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function xr(n){return Et(n)==="html"?n:n.assignedSlot||n.parentNode||(xl(n)?n.host:null)||Kt(n)}function bh(n){return["html","body","#document"].indexOf(Et(n))>=0?n.ownerDocument.body:st(n)&&Ml(n)?n:bh(xr(n))}function ts(n,e){var t;e===void 0&&(e=[]);var i=bh(n),s=i===((t=n.ownerDocument)==null?void 0:t.body),r=Xe(i),o=s?[r].concat(r.visualViewport||[],Ml(i)?i:[]):i,a=e.concat(o);return s?a:a.concat(ts(xr(o)))}function R0(n){return["table","td","th"].indexOf(Et(n))>=0}function lh(n){return!st(n)||Ot(n).position==="fixed"?null:n.offsetParent}function k0(n){var e=/firefox/i.test(Al()),t=/Trident/i.test(Al());if(t&&st(n)){var i=Ot(n);if(i.position==="fixed")return null}var s=xr(n);for(xl(s)&&(s=s.host);st(s)&&["html","body"].indexOf(Et(s))<0;){var r=Ot(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function ss(n){for(var e=Xe(n),t=lh(n);t&&R0(t)&&Ot(t).position==="static";)t=lh(t);return t&&(Et(t)==="html"||Et(t)==="body"&&Ot(t).position==="static")?e:t||k0(n)||e}var He="top",rt="bottom",ot="right",Ve="left",Ol="auto",rs=[He,rt,ot,Ve],an="start",ns="end",D0="clippingParents",yh="viewport",es="popper",I0="reference",ch=rs.reduce(function(n,e){return n.concat([e+"-"+an,e+"-"+ns])},[]),Eh=[].concat(rs,[Ol]).reduce(function(n,e){return n.concat([e,e+"-"+an,e+"-"+ns])},[]),N0="beforeRead",F0="read",B0="afterRead",$0="beforeMain",z0="main",H0="afterMain",V0="beforeWrite",j0="write",W0="afterWrite",q0=[N0,F0,B0,$0,z0,H0,V0,j0,W0];function U0(n){var e=new Map,t=new Set,i=[];n.forEach(function(r){e.set(r.name,r)});function s(r){t.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&s(l)}}),i.push(r)}return n.forEach(function(r){t.has(r.name)||s(r)}),i}function Y0(n){var e=U0(n);return q0.reduce(function(t,i){return t.concat(e.filter(function(s){return s.phase===i}))},[])}function G0(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function X0(n){var e=n.reduce(function(t,i){var s=t[i.name];return t[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}function K0(n,e){var t=Xe(n),i=Kt(n),s=t.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var d=vh();(d||!d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+Ll(n),y:l}}function J0(n){var e,t=Kt(n),i=Cl(n),s=(e=n.ownerDocument)==null?void 0:e.body,r=bi(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=bi(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+Ll(n),l=-i.scrollTop;return Ot(s||t).direction==="rtl"&&(a+=bi(t.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function wh(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&xl(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Tl(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Z0(n,e){var t=on(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function dh(n,e,t){return e===yh?Tl(K0(n,t)):yi(e)?Z0(e,t):Tl(J0(Kt(n)))}function Q0(n){var e=ts(xr(n)),t=["absolute","fixed"].indexOf(Ot(n).position)>=0,i=t&&st(n)?ss(n):n;return yi(i)?e.filter(function(s){return yi(s)&&wh(s,i)&&Et(s)!=="body"}):[]}function eE(n,e,t,i){var s=e==="clippingParents"?Q0(n):[].concat(e),r=[].concat(s,[t]),o=r[0],a=r.reduce(function(l,d){var u=dh(n,d,i);return l.top=bi(u.top,l.top),l.right=Tr(u.right,l.right),l.bottom=Tr(u.bottom,l.bottom),l.left=bi(u.left,l.left),l},dh(n,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function yt(n){return n.split("-")[0]}function ln(n){return n.split("-")[1]}function _l(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Sh(n){var e=n.reference,t=n.element,i=n.placement,s=i?yt(i):null,r=i?ln(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(s){case He:l={x:o,y:e.y-t.height};break;case rt:l={x:o,y:e.y+e.height};break;case ot:l={x:e.x+e.width,y:a};break;case Ve:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var d=s?_l(s):null;if(d!=null){var u=d==="y"?"height":"width";switch(r){case an:l[d]=l[d]-(e[u]/2-t[u]/2);break;case ns:l[d]=l[d]+(e[u]/2-t[u]/2);break}}return l}function Ah(){return{top:0,right:0,bottom:0,left:0}}function Th(n){return Object.assign({},Ah(),n)}function xh(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}function cn(n,e){e===void 0&&(e={});var t=e,i=t.placement,s=i===void 0?n.placement:i,r=t.strategy,o=r===void 0?n.strategy:r,a=t.boundary,l=a===void 0?D0:a,d=t.rootBoundary,u=d===void 0?yh:d,h=t.elementContext,m=h===void 0?es:h,p=t.altBoundary,g=p===void 0?!1:p,v=t.padding,w=v===void 0?0:v,y=Th(typeof w!="number"?w:xh(w,rs)),P=m===es?I0:es,O=n.rects.popper,R=n.elements[g?P:m],D=eE(yi(R)?R:R.contextElement||Kt(n.elements.popper),l,u,o),H=on(n.elements.reference),q=Sh({reference:H,element:O,strategy:"absolute",placement:s}),G=Tl(Object.assign({},O,q)),ee=m===es?G:H,V={top:D.top-ee.top+y.top,bottom:ee.bottom-D.bottom+y.bottom,left:D.left-ee.left+y.left,right:ee.right-D.right+y.right},K=n.modifiersData.offset;if(m===es&&K){var J=K[s];Object.keys(V).forEach(function(j){var z=[ot,rt].indexOf(j)>=0?1:-1,_=[He,rt].indexOf(j)>=0?"y":"x";V[j]+=J[_]*z})}return V}var uh={placement:"bottom",modifiers:[],strategy:"absolute"};function hh(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Rl(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,i=t===void 0?[]:t,s=e.defaultOptions,r=s===void 0?uh:s;return function(a,l,d){d===void 0&&(d=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},uh,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],m=!1,p={state:u,setOptions:function(y){var P=typeof y=="function"?y(u.options):y;v(),u.options=Object.assign({},r,u.options,P),u.scrollParents={reference:yi(a)?ts(a):a.contextElement?ts(a.contextElement):[],popper:ts(l)};var O=Y0(X0([].concat(i,u.options.modifiers)));return u.orderedModifiers=O.filter(function(R){return R.enabled}),g(),p.update()},forceUpdate:function(){if(!m){var y=u.elements,P=y.reference,O=y.popper;if(hh(P,O)){u.rects={reference:_0(P,ss(O),u.options.strategy==="fixed"),popper:Pl(O)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(V){return u.modifiersData[V.name]=Object.assign({},V.data)});for(var R=0;R<u.orderedModifiers.length;R++){if(u.reset===!0){u.reset=!1,R=-1;continue}var D=u.orderedModifiers[R],H=D.fn,q=D.options,G=q===void 0?{}:q,ee=D.name;typeof H=="function"&&(u=H({state:u,options:G,name:ee,instance:p})||u)}}}},update:G0(function(){return new Promise(function(w){p.forceUpdate(),w(u)})}),destroy:function(){v(),m=!0}};if(!hh(a,l))return p;p.setOptions(d).then(function(w){!m&&d.onFirstUpdate&&d.onFirstUpdate(w)});function g(){u.orderedModifiers.forEach(function(w){var y=w.name,P=w.options,O=P===void 0?{}:P,R=w.effect;if(typeof R=="function"){var D=R({state:u,name:y,instance:p,options:O}),H=function(){};h.push(D||H)}})}function v(){h.forEach(function(w){return w()}),h=[]}return p}}var Sr={passive:!0};function tE(n){var e=n.state,t=n.instance,i=n.options,s=i.scroll,r=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=Xe(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&d.forEach(function(u){u.addEventListener("scroll",t.update,Sr)}),a&&l.addEventListener("resize",t.update,Sr),function(){r&&d.forEach(function(u){u.removeEventListener("scroll",t.update,Sr)}),a&&l.removeEventListener("resize",t.update,Sr)}}var kl={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:tE,data:{}};function iE(n){var e=n.state,t=n.name;e.modifiersData[t]=Sh({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Dl={name:"popperOffsets",enabled:!0,phase:"read",fn:iE,data:{}},nE={top:"auto",right:"auto",bottom:"auto",left:"auto"};function sE(n,e){var t=n.x,i=n.y,s=e.devicePixelRatio||1;return{x:rn(t*s)/s||0,y:rn(i*s)/s||0}}function fh(n){var e,t=n.popper,i=n.popperRect,s=n.placement,r=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,d=n.adaptive,u=n.roundOffsets,h=n.isFixed,m=o.x,p=m===void 0?0:m,g=o.y,v=g===void 0?0:g,w=typeof u=="function"?u({x:p,y:v}):{x:p,y:v};p=w.x,v=w.y;var y=o.hasOwnProperty("x"),P=o.hasOwnProperty("y"),O=Ve,R=He,D=window;if(d){var H=ss(t),q="clientHeight",G="clientWidth";if(H===Xe(t)&&(H=Kt(t),Ot(H).position!=="static"&&a==="absolute"&&(q="scrollHeight",G="scrollWidth")),H=H,s===He||(s===Ve||s===ot)&&r===ns){R=rt;var ee=h&&H===D&&D.visualViewport?D.visualViewport.height:H[q];v-=ee-i.height,v*=l?1:-1}if(s===Ve||(s===He||s===rt)&&r===ns){O=ot;var V=h&&H===D&&D.visualViewport?D.visualViewport.width:H[G];p-=V-i.width,p*=l?1:-1}}var K=Object.assign({position:a},d&&nE),J=u===!0?sE({x:p,y:v},Xe(t)):{x:p,y:v};if(p=J.x,v=J.y,l){var j;return Object.assign({},K,(j={},j[R]=P?"0":"",j[O]=y?"0":"",j.transform=(D.devicePixelRatio||1)<=1?"translate("+p+"px, "+v+"px)":"translate3d("+p+"px, "+v+"px, 0)",j))}return Object.assign({},K,(e={},e[R]=P?v+"px":"",e[O]=y?p+"px":"",e.transform="",e))}function rE(n){var e=n.state,t=n.options,i=t.gpuAcceleration,s=i===void 0?!0:i,r=t.adaptive,o=r===void 0?!0:r,a=t.roundOffsets,l=a===void 0?!0:a,d={placement:yt(e.placement),variation:ln(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,fh(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,fh(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Il={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:rE,data:{}};function oE(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},s=e.attributes[t]||{},r=e.elements[t];!st(r)||!Et(r)||(Object.assign(r.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function aE(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var s=e.elements[i],r=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=o.reduce(function(l,d){return l[d]="",l},{});!st(s)||!Et(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}var Nl={name:"applyStyles",enabled:!0,phase:"write",fn:oE,effect:aE,requires:["computeStyles"]};function lE(n,e,t){var i=yt(n),s=[Ve,He].indexOf(i)>=0?-1:1,r=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[Ve,ot].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function cE(n){var e=n.state,t=n.options,i=n.name,s=t.offset,r=s===void 0?[0,0]:s,o=Eh.reduce(function(u,h){return u[h]=lE(h,e.rects,r),u},{}),a=o[e.placement],l=a.x,d=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=d),e.modifiersData[i]=o}var Ch={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:cE},dE={left:"right",right:"left",bottom:"top",top:"bottom"};function Ar(n){return n.replace(/left|right|bottom|top/g,function(e){return dE[e]})}var uE={start:"end",end:"start"};function ph(n){return n.replace(/start|end/g,function(e){return uE[e]})}function hE(n,e){e===void 0&&(e={});var t=e,i=t.placement,s=t.boundary,r=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,d=l===void 0?Eh:l,u=ln(i),h=u?a?ch:ch.filter(function(g){return ln(g)===u}):rs,m=h.filter(function(g){return d.indexOf(g)>=0});m.length===0&&(m=h);var p=m.reduce(function(g,v){return g[v]=cn(n,{placement:v,boundary:s,rootBoundary:r,padding:o})[yt(v)],g},{});return Object.keys(p).sort(function(g,v){return p[g]-p[v]})}function fE(n){if(yt(n)===Ol)return[];var e=Ar(n);return[ph(n),e,ph(e)]}function pE(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var s=t.mainAxis,r=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,d=t.padding,u=t.boundary,h=t.rootBoundary,m=t.altBoundary,p=t.flipVariations,g=p===void 0?!0:p,v=t.allowedAutoPlacements,w=e.options.placement,y=yt(w),P=y===w,O=l||(P||!g?[Ar(w)]:fE(w)),R=[w].concat(O).reduce(function(pe,_e){return pe.concat(yt(_e)===Ol?hE(e,{placement:_e,boundary:u,rootBoundary:h,padding:d,flipVariations:g,allowedAutoPlacements:v}):_e)},[]),D=e.rects.reference,H=e.rects.popper,q=new Map,G=!0,ee=R[0],V=0;V<R.length;V++){var K=R[V],J=yt(K),j=ln(K)===an,z=[He,rt].indexOf(J)>=0,_=z?"width":"height",b=cn(e,{placement:K,boundary:u,rootBoundary:h,altBoundary:m,padding:d}),C=z?j?ot:Ve:j?rt:He;D[_]>H[_]&&(C=Ar(C));var x=Ar(C),F=[];if(r&&F.push(b[J]<=0),a&&F.push(b[C]<=0,b[x]<=0),F.every(function(pe){return pe})){ee=K,G=!1;break}q.set(K,F)}if(G)for(var $=g?3:1,U=function(_e){var ae=R.find(function(xe){var Ce=q.get(xe);if(Ce)return Ce.slice(0,_e).every(function(N){return N})});if(ae)return ee=ae,"break"},te=$;te>0;te--){var de=U(te);if(de==="break")break}e.placement!==ee&&(e.modifiersData[i]._skip=!0,e.placement=ee,e.reset=!0)}}var Lh={name:"flip",enabled:!0,phase:"main",fn:pE,requiresIfExists:["offset"],data:{_skip:!1}};function mE(n){return n==="x"?"y":"x"}function is(n,e,t){return bi(n,Tr(e,t))}function gE(n,e,t){var i=is(n,e,t);return i>t?t:i}function vE(n){var e=n.state,t=n.options,i=n.name,s=t.mainAxis,r=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,d=t.rootBoundary,u=t.altBoundary,h=t.padding,m=t.tether,p=m===void 0?!0:m,g=t.tetherOffset,v=g===void 0?0:g,w=cn(e,{boundary:l,rootBoundary:d,padding:h,altBoundary:u}),y=yt(e.placement),P=ln(e.placement),O=!P,R=_l(y),D=mE(R),H=e.modifiersData.popperOffsets,q=e.rects.reference,G=e.rects.popper,ee=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,V=typeof ee=="number"?{mainAxis:ee,altAxis:ee}:Object.assign({mainAxis:0,altAxis:0},ee),K=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,J={x:0,y:0};if(H){if(r){var j,z=R==="y"?He:Ve,_=R==="y"?rt:ot,b=R==="y"?"height":"width",C=H[R],x=C+w[z],F=C-w[_],$=p?-G[b]/2:0,U=P===an?q[b]:G[b],te=P===an?-G[b]:-q[b],de=e.elements.arrow,pe=p&&de?Pl(de):{width:0,height:0},_e=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Ah(),ae=_e[z],xe=_e[_],Ce=is(0,q[b],pe[b]),N=O?q[b]/2-$-Ce-ae-V.mainAxis:U-Ce-ae-V.mainAxis,oe=O?-q[b]/2+$+Ce+xe+V.mainAxis:te+Ce+xe+V.mainAxis,B=e.elements.arrow&&ss(e.elements.arrow),k=B?R==="y"?B.clientTop||0:B.clientLeft||0:0,T=(j=K?.[R])!=null?j:0,S=C+N-T-k,M=C+oe-T,L=is(p?Tr(x,S):x,C,p?bi(F,M):F);H[R]=L,J[R]=L-C}if(a){var be,Z=R==="x"?He:Ve,Fe=R==="x"?rt:ot,Qe=H[D],On=D==="y"?"height":"width",_n=Qe+w[Z],Rs=Qe-w[Fe],Rn=[He,Ve].indexOf(y)!==-1,ks=(be=K?.[D])!=null?be:0,Ds=Rn?_n:Qe-q[On]-G[On]-ks+V.altAxis,Ht=Rn?Qe+q[On]+G[On]-ks-V.altAxis:Rs,Is=p&&Rn?gE(Ds,Qe,Ht):is(p?Ds:_n,Qe,p?Ht:Rs);H[D]=Is,J[D]=Is-Qe}e.modifiersData[i]=J}}var Mh={name:"preventOverflow",enabled:!0,phase:"main",fn:vE,requiresIfExists:["offset"]},bE=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Th(typeof e!="number"?e:xh(e,rs))};function yE(n){var e,t=n.state,i=n.name,s=n.options,r=t.elements.arrow,o=t.modifiersData.popperOffsets,a=yt(t.placement),l=_l(a),d=[Ve,ot].indexOf(a)>=0,u=d?"height":"width";if(!(!r||!o)){var h=bE(s.padding,t),m=Pl(r),p=l==="y"?He:Ve,g=l==="y"?rt:ot,v=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],w=o[l]-t.rects.reference[l],y=ss(r),P=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,O=v/2-w/2,R=h[p],D=P-m[u]-h[g],H=P/2-m[u]/2+O,q=is(R,H,D),G=l;t.modifiersData[i]=(e={},e[G]=q,e.centerOffset=q-H,e)}}function EE(n){var e=n.state,t=n.options,i=t.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||wh(e.elements.popper,s)&&(e.elements.arrow=s))}var Ph={name:"arrow",enabled:!0,phase:"main",fn:yE,effect:EE,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function mh(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function gh(n){return[He,ot,rt,Ve].some(function(e){return n[e]>=0})}function wE(n){var e=n.state,t=n.name,i=e.rects.reference,s=e.rects.popper,r=e.modifiersData.preventOverflow,o=cn(e,{elementContext:"reference"}),a=cn(e,{altBoundary:!0}),l=mh(o,i),d=mh(a,s,r),u=gh(l),h=gh(d);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}var Oh={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:wE},SE=[kl,Dl,Il,Nl],AE=Rl({defaultModifiers:SE}),_h=[kl,Dl,Il,Nl,Ch,Lh,Mh,Ph,Oh],TE=Rl({defaultModifiers:_h});De.applyStyles=Nl;De.arrow=Ph;De.computeStyles=Il;De.createPopper=TE;De.createPopperLite=AE;De.defaultModifiers=_h;De.detectOverflow=cn;De.eventListeners=kl;De.flip=Lh;De.hide=Oh;De.offset=Ch;De.popperGenerator=Rl;De.popperOffsets=Dl;De.preventOverflow=Mh});var $l=su((Fl,Bl)=>{(function(n,e){typeof Fl=="object"&&typeof Bl<"u"?Bl.exports=e(Rh()):typeof define=="function"&&define.amd?define(["@popperjs/core"],e):(n=typeof globalThis<"u"?globalThis:n||self,n.bootstrap=e(n.Popper))})(Fl,function(n){"use strict";function e(E){let c=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(E){for(let f in E)if(f!=="default"){let A=Object.getOwnPropertyDescriptor(E,f);Object.defineProperty(c,f,A.get?A:{enumerable:!0,get:()=>E[f]})}}return c.default=E,Object.freeze(c)}let t=e(n),i=new Map,s={set(E,c,f){i.has(E)||i.set(E,new Map);let A=i.get(E);if(!A.has(c)&&A.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(A.keys())[0]}.`);return}A.set(c,f)},get(E,c){return i.has(E)&&i.get(E).get(c)||null},remove(E,c){if(!i.has(E))return;let f=i.get(E);f.delete(c),f.size===0&&i.delete(E)}},r=1e6,o=1e3,a="transitionend",l=E=>(E&&window.CSS&&window.CSS.escape&&(E=E.replace(/#([^\s"#']+)/g,(c,f)=>`#${CSS.escape(f)}`)),E),d=E=>E==null?`${E}`:Object.prototype.toString.call(E).match(/\s([a-z]+)/i)[1].toLowerCase(),u=E=>{do E+=Math.floor(Math.random()*r);while(document.getElementById(E));return E},h=E=>{if(!E)return 0;let{transitionDuration:c,transitionDelay:f}=window.getComputedStyle(E),A=Number.parseFloat(c),I=Number.parseFloat(f);return!A&&!I?0:(c=c.split(",")[0],f=f.split(",")[0],(Number.parseFloat(c)+Number.parseFloat(f))*o)},m=E=>{E.dispatchEvent(new Event(a))},p=E=>!E||typeof E!="object"?!1:(typeof E.jquery<"u"&&(E=E[0]),typeof E.nodeType<"u"),g=E=>p(E)?E.jquery?E[0]:E:typeof E=="string"&&E.length>0?document.querySelector(l(E)):null,v=E=>{if(!p(E)||E.getClientRects().length===0)return!1;let c=getComputedStyle(E).getPropertyValue("visibility")==="visible",f=E.closest("details:not([open])");if(!f)return c;if(f!==E){let A=E.closest("summary");if(A&&A.parentNode!==f||A===null)return!1}return c},w=E=>!E||E.nodeType!==Node.ELEMENT_NODE||E.classList.contains("disabled")?!0:typeof E.disabled<"u"?E.disabled:E.hasAttribute("disabled")&&E.getAttribute("disabled")!=="false",y=E=>{if(!document.documentElement.attachShadow)return null;if(typeof E.getRootNode=="function"){let c=E.getRootNode();return c instanceof ShadowRoot?c:null}return E instanceof ShadowRoot?E:E.parentNode?y(E.parentNode):null},P=()=>{},O=E=>{E.offsetHeight},R=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,D=[],H=E=>{document.readyState==="loading"?(D.length||document.addEventListener("DOMContentLoaded",()=>{for(let c of D)c()}),D.push(E)):E()},q=()=>document.documentElement.dir==="rtl",G=E=>{H(()=>{let c=R();if(c){let f=E.NAME,A=c.fn[f];c.fn[f]=E.jQueryInterface,c.fn[f].Constructor=E,c.fn[f].noConflict=()=>(c.fn[f]=A,E.jQueryInterface)}})},ee=(E,c=[],f=E)=>typeof E=="function"?E(...c):f,V=(E,c,f=!0)=>{if(!f){ee(E);return}let I=h(c)+5,Y=!1,W=({target:ne})=>{ne===c&&(Y=!0,c.removeEventListener(a,W),ee(E))};c.addEventListener(a,W),setTimeout(()=>{Y||m(c)},I)},K=(E,c,f,A)=>{let I=E.length,Y=E.indexOf(c);return Y===-1?!f&&A?E[I-1]:E[0]:(Y+=f?1:-1,A&&(Y=(Y+I)%I),E[Math.max(0,Math.min(Y,I-1))])},J=/[^.]*(?=\..*)\.|.*/,j=/\..*/,z=/::\d+$/,_={},b=1,C={mouseenter:"mouseover",mouseleave:"mouseout"},x=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function F(E,c){return c&&`${c}::${b++}`||E.uidEvent||b++}function $(E){let c=F(E);return E.uidEvent=c,_[c]=_[c]||{},_[c]}function U(E,c){return function f(A){return oe(A,{delegateTarget:E}),f.oneOff&&N.off(E,A.type,c),c.apply(E,[A])}}function te(E,c,f){return function A(I){let Y=E.querySelectorAll(c);for(let{target:W}=I;W&&W!==this;W=W.parentNode)for(let ne of Y)if(ne===W)return oe(I,{delegateTarget:W}),A.oneOff&&N.off(E,I.type,c,f),f.apply(W,[I])}}function de(E,c,f=null){return Object.values(E).find(A=>A.callable===c&&A.delegationSelector===f)}function pe(E,c,f){let A=typeof c=="string",I=A?f:c||f,Y=Ce(E);return x.has(Y)||(Y=E),[A,I,Y]}function _e(E,c,f,A,I){if(typeof c!="string"||!E)return;let[Y,W,ne]=pe(c,f,A);c in C&&(W=(fb=>function(Yi){if(!Yi.relatedTarget||Yi.relatedTarget!==Yi.delegateTarget&&!Yi.delegateTarget.contains(Yi.relatedTarget))return fb.call(this,Yi)})(W));let ze=$(E),tt=ze[ne]||(ze[ne]={}),Le=de(tt,W,Y?f:null);if(Le){Le.oneOff=Le.oneOff&&I;return}let vt=F(W,c.replace(J,"")),ft=Y?te(E,f,W):U(E,W);ft.delegationSelector=Y?f:null,ft.callable=W,ft.oneOff=I,ft.uidEvent=vt,tt[vt]=ft,E.addEventListener(ne,ft,Y)}function ae(E,c,f,A,I){let Y=de(c[f],A,I);Y&&(E.removeEventListener(f,Y,!!I),delete c[f][Y.uidEvent])}function xe(E,c,f,A){let I=c[f]||{};for(let[Y,W]of Object.entries(I))Y.includes(A)&&ae(E,c,f,W.callable,W.delegationSelector)}function Ce(E){return E=E.replace(j,""),C[E]||E}let N={on(E,c,f,A){_e(E,c,f,A,!1)},one(E,c,f,A){_e(E,c,f,A,!0)},off(E,c,f,A){if(typeof c!="string"||!E)return;let[I,Y,W]=pe(c,f,A),ne=W!==c,ze=$(E),tt=ze[W]||{},Le=c.startsWith(".");if(typeof Y<"u"){if(!Object.keys(tt).length)return;ae(E,ze,W,Y,I?f:null);return}if(Le)for(let vt of Object.keys(ze))xe(E,ze,vt,c.slice(1));for(let[vt,ft]of Object.entries(tt)){let Ys=vt.replace(z,"");(!ne||c.includes(Ys))&&ae(E,ze,W,ft.callable,ft.delegationSelector)}},trigger(E,c,f){if(typeof c!="string"||!E)return null;let A=R(),I=Ce(c),Y=c!==I,W=null,ne=!0,ze=!0,tt=!1;Y&&A&&(W=A.Event(c,f),A(E).trigger(W),ne=!W.isPropagationStopped(),ze=!W.isImmediatePropagationStopped(),tt=W.isDefaultPrevented());let Le=oe(new Event(c,{bubbles:ne,cancelable:!0}),f);return tt&&Le.preventDefault(),ze&&E.dispatchEvent(Le),Le.defaultPrevented&&W&&W.preventDefault(),Le}};function oe(E,c={}){for(let[f,A]of Object.entries(c))try{E[f]=A}catch{Object.defineProperty(E,f,{configurable:!0,get(){return A}})}return E}function B(E){if(E==="true")return!0;if(E==="false")return!1;if(E===Number(E).toString())return Number(E);if(E===""||E==="null")return null;if(typeof E!="string")return E;try{return JSON.parse(decodeURIComponent(E))}catch{return E}}function k(E){return E.replace(/[A-Z]/g,c=>`-${c.toLowerCase()}`)}let T={setDataAttribute(E,c,f){E.setAttribute(`data-bs-${k(c)}`,f)},removeDataAttribute(E,c){E.removeAttribute(`data-bs-${k(c)}`)},getDataAttributes(E){if(!E)return{};let c={},f=Object.keys(E.dataset).filter(A=>A.startsWith("bs")&&!A.startsWith("bsConfig"));for(let A of f){let I=A.replace(/^bs/,"");I=I.charAt(0).toLowerCase()+I.slice(1,I.length),c[I]=B(E.dataset[A])}return c},getDataAttribute(E,c){return B(E.getAttribute(`data-bs-${k(c)}`))}};class S{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(c){return c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c}_mergeConfigObj(c,f){let A=p(f)?T.getDataAttribute(f,"config"):{};return{...this.constructor.Default,...typeof A=="object"?A:{},...p(f)?T.getDataAttributes(f):{},...typeof c=="object"?c:{}}}_typeCheckConfig(c,f=this.constructor.DefaultType){for(let[A,I]of Object.entries(f)){let Y=c[A],W=p(Y)?"element":d(Y);if(!new RegExp(I).test(W))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${A}" provided type "${W}" but expected type "${I}".`)}}}let M="5.3.3";class L extends S{constructor(c,f){super(),c=g(c),c&&(this._element=c,this._config=this._getConfig(f),s.set(this._element,this.constructor.DATA_KEY,this))}dispose(){s.remove(this._element,this.constructor.DATA_KEY),N.off(this._element,this.constructor.EVENT_KEY);for(let c of Object.getOwnPropertyNames(this))this[c]=null}_queueCallback(c,f,A=!0){V(c,f,A)}_getConfig(c){return c=this._mergeConfigObj(c,this._element),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}static getInstance(c){return s.get(g(c),this.DATA_KEY)}static getOrCreateInstance(c,f={}){return this.getInstance(c)||new this(c,typeof f=="object"?f:null)}static get VERSION(){return M}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(c){return`${c}${this.EVENT_KEY}`}}let be=E=>{let c=E.getAttribute("data-bs-target");if(!c||c==="#"){let f=E.getAttribute("href");if(!f||!f.includes("#")&&!f.startsWith("."))return null;f.includes("#")&&!f.startsWith("#")&&(f=`#${f.split("#")[1]}`),c=f&&f!=="#"?f.trim():null}return c?c.split(",").map(f=>l(f)).join(","):null},Z={find(E,c=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(c,E))},findOne(E,c=document.documentElement){return Element.prototype.querySelector.call(c,E)},children(E,c){return[].concat(...E.children).filter(f=>f.matches(c))},parents(E,c){let f=[],A=E.parentNode.closest(c);for(;A;)f.push(A),A=A.parentNode.closest(c);return f},prev(E,c){let f=E.previousElementSibling;for(;f;){if(f.matches(c))return[f];f=f.previousElementSibling}return[]},next(E,c){let f=E.nextElementSibling;for(;f;){if(f.matches(c))return[f];f=f.nextElementSibling}return[]},focusableChildren(E){let c=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(f=>`${f}:not([tabindex^="-"])`).join(",");return this.find(c,E).filter(f=>!w(f)&&v(f))},getSelectorFromElement(E){let c=be(E);return c&&Z.findOne(c)?c:null},getElementFromSelector(E){let c=be(E);return c?Z.findOne(c):null},getMultipleElementsFromSelector(E){let c=be(E);return c?Z.find(c):[]}},Fe=(E,c="hide")=>{let f=`click.dismiss${E.EVENT_KEY}`,A=E.NAME;N.on(document,f,`[data-bs-dismiss="${A}"]`,function(I){if(["A","AREA"].includes(this.tagName)&&I.preventDefault(),w(this))return;let Y=Z.getElementFromSelector(this)||this.closest(`.${A}`);E.getOrCreateInstance(Y)[c]()})},Qe="alert",_n=".bs.alert",Rs=`close${_n}`,Rn=`closed${_n}`,ks="fade",Ds="show";class Ht extends L{static get NAME(){return Qe}close(){if(N.trigger(this._element,Rs).defaultPrevented)return;this._element.classList.remove(Ds);let f=this._element.classList.contains(ks);this._queueCallback(()=>this._destroyElement(),this._element,f)}_destroyElement(){this._element.remove(),N.trigger(this._element,Rn),this.dispose()}static jQueryInterface(c){return this.each(function(){let f=Ht.getOrCreateInstance(this);if(typeof c=="string"){if(f[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);f[c](this)}})}}Fe(Ht,"close"),G(Ht);let Is="button",kp=".bs.button",Dp=".data-api",Ip="active",gd='[data-bs-toggle="button"]',Np=`click${kp}${Dp}`;class kn extends L{static get NAME(){return Is}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Ip))}static jQueryInterface(c){return this.each(function(){let f=kn.getOrCreateInstance(this);c==="toggle"&&f[c]()})}}N.on(document,Np,gd,E=>{E.preventDefault();let c=E.target.closest(gd);kn.getOrCreateInstance(c).toggle()}),G(kn);let Fp="swipe",$i=".bs.swipe",Bp=`touchstart${$i}`,$p=`touchmove${$i}`,zp=`touchend${$i}`,Hp=`pointerdown${$i}`,Vp=`pointerup${$i}`,jp="touch",Wp="pen",qp="pointer-event",Up=40,Yp={endCallback:null,leftCallback:null,rightCallback:null},Gp={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ns extends S{constructor(c,f){super(),this._element=c,!(!c||!Ns.isSupported())&&(this._config=this._getConfig(f),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Yp}static get DefaultType(){return Gp}static get NAME(){return Fp}dispose(){N.off(this._element,$i)}_start(c){if(!this._supportPointerEvents){this._deltaX=c.touches[0].clientX;return}this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX)}_end(c){this._eventIsPointerPenTouch(c)&&(this._deltaX=c.clientX-this._deltaX),this._handleSwipe(),ee(this._config.endCallback)}_move(c){this._deltaX=c.touches&&c.touches.length>1?0:c.touches[0].clientX-this._deltaX}_handleSwipe(){let c=Math.abs(this._deltaX);if(c<=Up)return;let f=c/this._deltaX;this._deltaX=0,f&&ee(f>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(N.on(this._element,Hp,c=>this._start(c)),N.on(this._element,Vp,c=>this._end(c)),this._element.classList.add(qp)):(N.on(this._element,Bp,c=>this._start(c)),N.on(this._element,$p,c=>this._move(c)),N.on(this._element,zp,c=>this._end(c)))}_eventIsPointerPenTouch(c){return this._supportPointerEvents&&(c.pointerType===Wp||c.pointerType===jp)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}let Xp="carousel",Vt=".bs.carousel",vd=".data-api",Kp="ArrowLeft",Jp="ArrowRight",Zp=500,Dn="next",zi="prev",Hi="left",Fs="right",Qp=`slide${Vt}`,jo=`slid${Vt}`,em=`keydown${Vt}`,tm=`mouseenter${Vt}`,im=`mouseleave${Vt}`,nm=`dragstart${Vt}`,sm=`load${Vt}${vd}`,rm=`click${Vt}${vd}`,bd="carousel",Bs="active",om="slide",am="carousel-item-end",lm="carousel-item-start",cm="carousel-item-next",dm="carousel-item-prev",yd=".active",Ed=".carousel-item",um=yd+Ed,hm=".carousel-item img",fm=".carousel-indicators",pm="[data-bs-slide], [data-bs-slide-to]",mm='[data-bs-ride="carousel"]',gm={[Kp]:Fs,[Jp]:Hi},vm={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},bm={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Vi extends L{constructor(c,f){super(c,f),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Z.findOne(fm,this._element),this._addEventListeners(),this._config.ride===bd&&this.cycle()}static get Default(){return vm}static get DefaultType(){return bm}static get NAME(){return Xp}next(){this._slide(Dn)}nextWhenVisible(){!document.hidden&&v(this._element)&&this.next()}prev(){this._slide(zi)}pause(){this._isSliding&&m(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){N.one(this._element,jo,()=>this.cycle());return}this.cycle()}}to(c){let f=this._getItems();if(c>f.length-1||c<0)return;if(this._isSliding){N.one(this._element,jo,()=>this.to(c));return}let A=this._getItemIndex(this._getActive());if(A===c)return;let I=c>A?Dn:zi;this._slide(I,f[c])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(c){return c.defaultInterval=c.interval,c}_addEventListeners(){this._config.keyboard&&N.on(this._element,em,c=>this._keydown(c)),this._config.pause==="hover"&&(N.on(this._element,tm,()=>this.pause()),N.on(this._element,im,()=>this._maybeEnableCycle())),this._config.touch&&Ns.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let A of Z.find(hm,this._element))N.on(A,nm,I=>I.preventDefault());let f={leftCallback:()=>this._slide(this._directionToOrder(Hi)),rightCallback:()=>this._slide(this._directionToOrder(Fs)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Zp+this._config.interval))}};this._swipeHelper=new Ns(this._element,f)}_keydown(c){if(/input|textarea/i.test(c.target.tagName))return;let f=gm[c.key];f&&(c.preventDefault(),this._slide(this._directionToOrder(f)))}_getItemIndex(c){return this._getItems().indexOf(c)}_setActiveIndicatorElement(c){if(!this._indicatorsElement)return;let f=Z.findOne(yd,this._indicatorsElement);f.classList.remove(Bs),f.removeAttribute("aria-current");let A=Z.findOne(`[data-bs-slide-to="${c}"]`,this._indicatorsElement);A&&(A.classList.add(Bs),A.setAttribute("aria-current","true"))}_updateInterval(){let c=this._activeElement||this._getActive();if(!c)return;let f=Number.parseInt(c.getAttribute("data-bs-interval"),10);this._config.interval=f||this._config.defaultInterval}_slide(c,f=null){if(this._isSliding)return;let A=this._getActive(),I=c===Dn,Y=f||K(this._getItems(),A,I,this._config.wrap);if(Y===A)return;let W=this._getItemIndex(Y),ne=Ys=>N.trigger(this._element,Ys,{relatedTarget:Y,direction:this._orderToDirection(c),from:this._getItemIndex(A),to:W});if(ne(Qp).defaultPrevented||!A||!Y)return;let tt=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(W),this._activeElement=Y;let Le=I?lm:am,vt=I?cm:dm;Y.classList.add(vt),O(Y),A.classList.add(Le),Y.classList.add(Le);let ft=()=>{Y.classList.remove(Le,vt),Y.classList.add(Bs),A.classList.remove(Bs,vt,Le),this._isSliding=!1,ne(jo)};this._queueCallback(ft,A,this._isAnimated()),tt&&this.cycle()}_isAnimated(){return this._element.classList.contains(om)}_getActive(){return Z.findOne(um,this._element)}_getItems(){return Z.find(Ed,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(c){return q()?c===Hi?zi:Dn:c===Hi?Dn:zi}_orderToDirection(c){return q()?c===zi?Hi:Fs:c===zi?Fs:Hi}static jQueryInterface(c){return this.each(function(){let f=Vi.getOrCreateInstance(this,c);if(typeof c=="number"){f.to(c);return}if(typeof c=="string"){if(f[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);f[c]()}})}}N.on(document,rm,pm,function(E){let c=Z.getElementFromSelector(this);if(!c||!c.classList.contains(bd))return;E.preventDefault();let f=Vi.getOrCreateInstance(c),A=this.getAttribute("data-bs-slide-to");if(A){f.to(A),f._maybeEnableCycle();return}if(T.getDataAttribute(this,"slide")==="next"){f.next(),f._maybeEnableCycle();return}f.prev(),f._maybeEnableCycle()}),N.on(window,sm,()=>{let E=Z.find(mm);for(let c of E)Vi.getOrCreateInstance(c)}),G(Vi);let ym="collapse",In=".bs.collapse",Em=".data-api",wm=`show${In}`,Sm=`shown${In}`,Am=`hide${In}`,Tm=`hidden${In}`,xm=`click${In}${Em}`,Wo="show",ji="collapse",$s="collapsing",Cm="collapsed",Lm=`:scope .${ji} .${ji}`,Mm="collapse-horizontal",Pm="width",Om="height",_m=".collapse.show, .collapse.collapsing",qo='[data-bs-toggle="collapse"]',Rm={parent:null,toggle:!0},km={parent:"(null|element)",toggle:"boolean"};class Wi extends L{constructor(c,f){super(c,f),this._isTransitioning=!1,this._triggerArray=[];let A=Z.find(qo);for(let I of A){let Y=Z.getSelectorFromElement(I),W=Z.find(Y).filter(ne=>ne===this._element);Y!==null&&W.length&&this._triggerArray.push(I)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Rm}static get DefaultType(){return km}static get NAME(){return ym}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let c=[];if(this._config.parent&&(c=this._getFirstLevelChildren(_m).filter(ne=>ne!==this._element).map(ne=>Wi.getOrCreateInstance(ne,{toggle:!1}))),c.length&&c[0]._isTransitioning||N.trigger(this._element,wm).defaultPrevented)return;for(let ne of c)ne.hide();let A=this._getDimension();this._element.classList.remove(ji),this._element.classList.add($s),this._element.style[A]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let I=()=>{this._isTransitioning=!1,this._element.classList.remove($s),this._element.classList.add(ji,Wo),this._element.style[A]="",N.trigger(this._element,Sm)},W=`scroll${A[0].toUpperCase()+A.slice(1)}`;this._queueCallback(I,this._element,!0),this._element.style[A]=`${this._element[W]}px`}hide(){if(this._isTransitioning||!this._isShown()||N.trigger(this._element,Am).defaultPrevented)return;let f=this._getDimension();this._element.style[f]=`${this._element.getBoundingClientRect()[f]}px`,O(this._element),this._element.classList.add($s),this._element.classList.remove(ji,Wo);for(let I of this._triggerArray){let Y=Z.getElementFromSelector(I);Y&&!this._isShown(Y)&&this._addAriaAndCollapsedClass([I],!1)}this._isTransitioning=!0;let A=()=>{this._isTransitioning=!1,this._element.classList.remove($s),this._element.classList.add(ji),N.trigger(this._element,Tm)};this._element.style[f]="",this._queueCallback(A,this._element,!0)}_isShown(c=this._element){return c.classList.contains(Wo)}_configAfterMerge(c){return c.toggle=!!c.toggle,c.parent=g(c.parent),c}_getDimension(){return this._element.classList.contains(Mm)?Pm:Om}_initializeChildren(){if(!this._config.parent)return;let c=this._getFirstLevelChildren(qo);for(let f of c){let A=Z.getElementFromSelector(f);A&&this._addAriaAndCollapsedClass([f],this._isShown(A))}}_getFirstLevelChildren(c){let f=Z.find(Lm,this._config.parent);return Z.find(c,this._config.parent).filter(A=>!f.includes(A))}_addAriaAndCollapsedClass(c,f){if(c.length)for(let A of c)A.classList.toggle(Cm,!f),A.setAttribute("aria-expanded",f)}static jQueryInterface(c){let f={};return typeof c=="string"&&/show|hide/.test(c)&&(f.toggle=!1),this.each(function(){let A=Wi.getOrCreateInstance(this,f);if(typeof c=="string"){if(typeof A[c]>"u")throw new TypeError(`No method named "${c}"`);A[c]()}})}}N.on(document,xm,qo,function(E){(E.target.tagName==="A"||E.delegateTarget&&E.delegateTarget.tagName==="A")&&E.preventDefault();for(let c of Z.getMultipleElementsFromSelector(this))Wi.getOrCreateInstance(c,{toggle:!1}).toggle()}),G(Wi);let wd="dropdown",ri=".bs.dropdown",Uo=".data-api",Dm="Escape",Sd="Tab",Im="ArrowUp",Ad="ArrowDown",Nm=2,Fm=`hide${ri}`,Bm=`hidden${ri}`,$m=`show${ri}`,zm=`shown${ri}`,Td=`click${ri}${Uo}`,xd=`keydown${ri}${Uo}`,Hm=`keyup${ri}${Uo}`,qi="show",Vm="dropup",jm="dropend",Wm="dropstart",qm="dropup-center",Um="dropdown-center",oi='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ym=`${oi}.${qi}`,zs=".dropdown-menu",Gm=".navbar",Xm=".navbar-nav",Km=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Jm=q()?"top-end":"top-start",Zm=q()?"top-start":"top-end",Qm=q()?"bottom-end":"bottom-start",eg=q()?"bottom-start":"bottom-end",tg=q()?"left-start":"right-start",ig=q()?"right-start":"left-start",ng="top",sg="bottom",rg={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},og={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ht extends L{constructor(c,f){super(c,f),this._popper=null,this._parent=this._element.parentNode,this._menu=Z.next(this._element,zs)[0]||Z.prev(this._element,zs)[0]||Z.findOne(zs,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return rg}static get DefaultType(){return og}static get NAME(){return wd}toggle(){return this._isShown()?this.hide():this.show()}show(){if(w(this._element)||this._isShown())return;let c={relatedTarget:this._element};if(!N.trigger(this._element,$m,c).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Xm))for(let A of[].concat(...document.body.children))N.on(A,"mouseover",P);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(qi),this._element.classList.add(qi),N.trigger(this._element,zm,c)}}hide(){if(w(this._element)||!this._isShown())return;let c={relatedTarget:this._element};this._completeHide(c)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(c){if(!N.trigger(this._element,Fm,c).defaultPrevented){if("ontouchstart"in document.documentElement)for(let A of[].concat(...document.body.children))N.off(A,"mouseover",P);this._popper&&this._popper.destroy(),this._menu.classList.remove(qi),this._element.classList.remove(qi),this._element.setAttribute("aria-expanded","false"),T.removeDataAttribute(this._menu,"popper"),N.trigger(this._element,Bm,c)}}_getConfig(c){if(c=super._getConfig(c),typeof c.reference=="object"&&!p(c.reference)&&typeof c.reference.getBoundingClientRect!="function")throw new TypeError(`${wd.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return c}_createPopper(){if(typeof t>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let c=this._element;this._config.reference==="parent"?c=this._parent:p(this._config.reference)?c=g(this._config.reference):typeof this._config.reference=="object"&&(c=this._config.reference);let f=this._getPopperConfig();this._popper=t.createPopper(c,this._menu,f)}_isShown(){return this._menu.classList.contains(qi)}_getPlacement(){let c=this._parent;if(c.classList.contains(jm))return tg;if(c.classList.contains(Wm))return ig;if(c.classList.contains(qm))return ng;if(c.classList.contains(Um))return sg;let f=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return c.classList.contains(Vm)?f?Zm:Jm:f?eg:Qm}_detectNavbar(){return this._element.closest(Gm)!==null}_getOffset(){let{offset:c}=this._config;return typeof c=="string"?c.split(",").map(f=>Number.parseInt(f,10)):typeof c=="function"?f=>c(f,this._element):c}_getPopperConfig(){let c={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(T.setDataAttribute(this._menu,"popper","static"),c.modifiers=[{name:"applyStyles",enabled:!1}]),{...c,...ee(this._config.popperConfig,[c])}}_selectMenuItem({key:c,target:f}){let A=Z.find(Km,this._menu).filter(I=>v(I));A.length&&K(A,f,c===Ad,!A.includes(f)).focus()}static jQueryInterface(c){return this.each(function(){let f=ht.getOrCreateInstance(this,c);if(typeof c=="string"){if(typeof f[c]>"u")throw new TypeError(`No method named "${c}"`);f[c]()}})}static clearMenus(c){if(c.button===Nm||c.type==="keyup"&&c.key!==Sd)return;let f=Z.find(Ym);for(let A of f){let I=ht.getInstance(A);if(!I||I._config.autoClose===!1)continue;let Y=c.composedPath(),W=Y.includes(I._menu);if(Y.includes(I._element)||I._config.autoClose==="inside"&&!W||I._config.autoClose==="outside"&&W||I._menu.contains(c.target)&&(c.type==="keyup"&&c.key===Sd||/input|select|option|textarea|form/i.test(c.target.tagName)))continue;let ne={relatedTarget:I._element};c.type==="click"&&(ne.clickEvent=c),I._completeHide(ne)}}static dataApiKeydownHandler(c){let f=/input|textarea/i.test(c.target.tagName),A=c.key===Dm,I=[Im,Ad].includes(c.key);if(!I&&!A||f&&!A)return;c.preventDefault();let Y=this.matches(oi)?this:Z.prev(this,oi)[0]||Z.next(this,oi)[0]||Z.findOne(oi,c.delegateTarget.parentNode),W=ht.getOrCreateInstance(Y);if(I){c.stopPropagation(),W.show(),W._selectMenuItem(c);return}W._isShown()&&(c.stopPropagation(),W.hide(),Y.focus())}}N.on(document,xd,oi,ht.dataApiKeydownHandler),N.on(document,xd,zs,ht.dataApiKeydownHandler),N.on(document,Td,ht.clearMenus),N.on(document,Hm,ht.clearMenus),N.on(document,Td,oi,function(E){E.preventDefault(),ht.getOrCreateInstance(this).toggle()}),G(ht);let Cd="backdrop",ag="fade",Ld="show",Md=`mousedown.bs.${Cd}`,lg={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},cg={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Pd extends S{constructor(c){super(),this._config=this._getConfig(c),this._isAppended=!1,this._element=null}static get Default(){return lg}static get DefaultType(){return cg}static get NAME(){return Cd}show(c){if(!this._config.isVisible){ee(c);return}this._append();let f=this._getElement();this._config.isAnimated&&O(f),f.classList.add(Ld),this._emulateAnimation(()=>{ee(c)})}hide(c){if(!this._config.isVisible){ee(c);return}this._getElement().classList.remove(Ld),this._emulateAnimation(()=>{this.dispose(),ee(c)})}dispose(){this._isAppended&&(N.off(this._element,Md),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let c=document.createElement("div");c.className=this._config.className,this._config.isAnimated&&c.classList.add(ag),this._element=c}return this._element}_configAfterMerge(c){return c.rootElement=g(c.rootElement),c}_append(){if(this._isAppended)return;let c=this._getElement();this._config.rootElement.append(c),N.on(c,Md,()=>{ee(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(c){V(c,this._getElement(),this._config.isAnimated)}}let dg="focustrap",Hs=".bs.focustrap",ug=`focusin${Hs}`,hg=`keydown.tab${Hs}`,fg="Tab",pg="forward",Od="backward",mg={autofocus:!0,trapElement:null},gg={autofocus:"boolean",trapElement:"element"};class _d extends S{constructor(c){super(),this._config=this._getConfig(c),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return mg}static get DefaultType(){return gg}static get NAME(){return dg}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),N.off(document,Hs),N.on(document,ug,c=>this._handleFocusin(c)),N.on(document,hg,c=>this._handleKeydown(c)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,N.off(document,Hs))}_handleFocusin(c){let{trapElement:f}=this._config;if(c.target===document||c.target===f||f.contains(c.target))return;let A=Z.focusableChildren(f);A.length===0?f.focus():this._lastTabNavDirection===Od?A[A.length-1].focus():A[0].focus()}_handleKeydown(c){c.key===fg&&(this._lastTabNavDirection=c.shiftKey?Od:pg)}}let Rd=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",kd=".sticky-top",Vs="padding-right",Dd="margin-right";class Yo{constructor(){this._element=document.body}getWidth(){let c=document.documentElement.clientWidth;return Math.abs(window.innerWidth-c)}hide(){let c=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Vs,f=>f+c),this._setElementAttributes(Rd,Vs,f=>f+c),this._setElementAttributes(kd,Dd,f=>f-c)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Vs),this._resetElementAttributes(Rd,Vs),this._resetElementAttributes(kd,Dd)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(c,f,A){let I=this.getWidth(),Y=W=>{if(W!==this._element&&window.innerWidth>W.clientWidth+I)return;this._saveInitialAttribute(W,f);let ne=window.getComputedStyle(W).getPropertyValue(f);W.style.setProperty(f,`${A(Number.parseFloat(ne))}px`)};this._applyManipulationCallback(c,Y)}_saveInitialAttribute(c,f){let A=c.style.getPropertyValue(f);A&&T.setDataAttribute(c,f,A)}_resetElementAttributes(c,f){let A=I=>{let Y=T.getDataAttribute(I,f);if(Y===null){I.style.removeProperty(f);return}T.removeDataAttribute(I,f),I.style.setProperty(f,Y)};this._applyManipulationCallback(c,A)}_applyManipulationCallback(c,f){if(p(c)){f(c);return}for(let A of Z.find(c,this._element))f(A)}}let vg="modal",et=".bs.modal",bg=".data-api",yg="Escape",Eg=`hide${et}`,wg=`hidePrevented${et}`,Id=`hidden${et}`,Nd=`show${et}`,Sg=`shown${et}`,Ag=`resize${et}`,Tg=`click.dismiss${et}`,xg=`mousedown.dismiss${et}`,Cg=`keydown.dismiss${et}`,Lg=`click${et}${bg}`,Fd="modal-open",Mg="fade",Bd="show",Go="modal-static",Pg=".modal.show",Og=".modal-dialog",_g=".modal-body",Rg='[data-bs-toggle="modal"]',kg={backdrop:!0,focus:!0,keyboard:!0},Dg={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ai extends L{constructor(c,f){super(c,f),this._dialog=Z.findOne(Og,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Yo,this._addEventListeners()}static get Default(){return kg}static get DefaultType(){return Dg}static get NAME(){return vg}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){this._isShown||this._isTransitioning||N.trigger(this._element,Nd,{relatedTarget:c}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Fd),this._adjustDialog(),this._backdrop.show(()=>this._showElement(c)))}hide(){!this._isShown||this._isTransitioning||N.trigger(this._element,Eg).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Bd),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){N.off(window,et),N.off(this._dialog,et),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Pd({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new _d({trapElement:this._element})}_showElement(c){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let f=Z.findOne(_g,this._dialog);f&&(f.scrollTop=0),O(this._element),this._element.classList.add(Bd);let A=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,N.trigger(this._element,Sg,{relatedTarget:c})};this._queueCallback(A,this._dialog,this._isAnimated())}_addEventListeners(){N.on(this._element,Cg,c=>{if(c.key===yg){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),N.on(window,Ag,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),N.on(this._element,xg,c=>{N.one(this._element,Tg,f=>{if(!(this._element!==c.target||this._element!==f.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Fd),this._resetAdjustments(),this._scrollBar.reset(),N.trigger(this._element,Id)})}_isAnimated(){return this._element.classList.contains(Mg)}_triggerBackdropTransition(){if(N.trigger(this._element,wg).defaultPrevented)return;let f=this._element.scrollHeight>document.documentElement.clientHeight,A=this._element.style.overflowY;A==="hidden"||this._element.classList.contains(Go)||(f||(this._element.style.overflowY="hidden"),this._element.classList.add(Go),this._queueCallback(()=>{this._element.classList.remove(Go),this._queueCallback(()=>{this._element.style.overflowY=A},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let c=this._element.scrollHeight>document.documentElement.clientHeight,f=this._scrollBar.getWidth(),A=f>0;if(A&&!c){let I=q()?"paddingLeft":"paddingRight";this._element.style[I]=`${f}px`}if(!A&&c){let I=q()?"paddingRight":"paddingLeft";this._element.style[I]=`${f}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(c,f){return this.each(function(){let A=ai.getOrCreateInstance(this,c);if(typeof c=="string"){if(typeof A[c]>"u")throw new TypeError(`No method named "${c}"`);A[c](f)}})}}N.on(document,Lg,Rg,function(E){let c=Z.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&E.preventDefault(),N.one(c,Nd,I=>{I.defaultPrevented||N.one(c,Id,()=>{v(this)&&this.focus()})});let f=Z.findOne(Pg);f&&ai.getInstance(f).hide(),ai.getOrCreateInstance(c).toggle(this)}),Fe(ai),G(ai);let Ig="offcanvas",Ct=".bs.offcanvas",$d=".data-api",Ng=`load${Ct}${$d}`,Fg="Escape",zd="show",Hd="showing",Vd="hiding",Bg="offcanvas-backdrop",jd=".offcanvas.show",$g=`show${Ct}`,zg=`shown${Ct}`,Hg=`hide${Ct}`,Wd=`hidePrevented${Ct}`,qd=`hidden${Ct}`,Vg=`resize${Ct}`,jg=`click${Ct}${$d}`,Wg=`keydown.dismiss${Ct}`,qg='[data-bs-toggle="offcanvas"]',Ug={backdrop:!0,keyboard:!0,scroll:!1},Yg={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Lt extends L{constructor(c,f){super(c,f),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ug}static get DefaultType(){return Yg}static get NAME(){return Ig}toggle(c){return this._isShown?this.hide():this.show(c)}show(c){if(this._isShown||N.trigger(this._element,$g,{relatedTarget:c}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Yo().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Hd);let A=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(zd),this._element.classList.remove(Hd),N.trigger(this._element,zg,{relatedTarget:c})};this._queueCallback(A,this._element,!0)}hide(){if(!this._isShown||N.trigger(this._element,Hg).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Vd),this._backdrop.hide();let f=()=>{this._element.classList.remove(zd,Vd),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Yo().reset(),N.trigger(this._element,qd)};this._queueCallback(f,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let c=()=>{if(this._config.backdrop==="static"){N.trigger(this._element,Wd);return}this.hide()},f=!!this._config.backdrop;return new Pd({className:Bg,isVisible:f,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:f?c:null})}_initializeFocusTrap(){return new _d({trapElement:this._element})}_addEventListeners(){N.on(this._element,Wg,c=>{if(c.key===Fg){if(this._config.keyboard){this.hide();return}N.trigger(this._element,Wd)}})}static jQueryInterface(c){return this.each(function(){let f=Lt.getOrCreateInstance(this,c);if(typeof c=="string"){if(f[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);f[c](this)}})}}N.on(document,jg,qg,function(E){let c=Z.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&E.preventDefault(),w(this))return;N.one(c,qd,()=>{v(this)&&this.focus()});let f=Z.findOne(jd);f&&f!==c&&Lt.getInstance(f).hide(),Lt.getOrCreateInstance(c).toggle(this)}),N.on(window,Ng,()=>{for(let E of Z.find(jd))Lt.getOrCreateInstance(E).show()}),N.on(window,Vg,()=>{for(let E of Z.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(E).position!=="fixed"&&Lt.getOrCreateInstance(E).hide()}),Fe(Lt),G(Lt);let Ud={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Gg=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Xg=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Kg=(E,c)=>{let f=E.nodeName.toLowerCase();return c.includes(f)?Gg.has(f)?!!Xg.test(E.nodeValue):!0:c.filter(A=>A instanceof RegExp).some(A=>A.test(f))};function Jg(E,c,f){if(!E.length)return E;if(f&&typeof f=="function")return f(E);let I=new window.DOMParser().parseFromString(E,"text/html"),Y=[].concat(...I.body.querySelectorAll("*"));for(let W of Y){let ne=W.nodeName.toLowerCase();if(!Object.keys(c).includes(ne)){W.remove();continue}let ze=[].concat(...W.attributes),tt=[].concat(c["*"]||[],c[ne]||[]);for(let Le of ze)Kg(Le,tt)||W.removeAttribute(Le.nodeName)}return I.body.innerHTML}let Zg="TemplateFactory",Qg={allowList:Ud,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},ev={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},tv={entry:"(string|element|function|null)",selector:"(string|element)"};class iv extends S{constructor(c){super(),this._config=this._getConfig(c)}static get Default(){return Qg}static get DefaultType(){return ev}static get NAME(){return Zg}getContent(){return Object.values(this._config.content).map(c=>this._resolvePossibleFunction(c)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(c){return this._checkContent(c),this._config.content={...this._config.content,...c},this}toHtml(){let c=document.createElement("div");c.innerHTML=this._maybeSanitize(this._config.template);for(let[I,Y]of Object.entries(this._config.content))this._setContent(c,Y,I);let f=c.children[0],A=this._resolvePossibleFunction(this._config.extraClass);return A&&f.classList.add(...A.split(" ")),f}_typeCheckConfig(c){super._typeCheckConfig(c),this._checkContent(c.content)}_checkContent(c){for(let[f,A]of Object.entries(c))super._typeCheckConfig({selector:f,entry:A},tv)}_setContent(c,f,A){let I=Z.findOne(A,c);if(I){if(f=this._resolvePossibleFunction(f),!f){I.remove();return}if(p(f)){this._putElementInTemplate(g(f),I);return}if(this._config.html){I.innerHTML=this._maybeSanitize(f);return}I.textContent=f}}_maybeSanitize(c){return this._config.sanitize?Jg(c,this._config.allowList,this._config.sanitizeFn):c}_resolvePossibleFunction(c){return ee(c,[this])}_putElementInTemplate(c,f){if(this._config.html){f.innerHTML="",f.append(c);return}f.textContent=c.textContent}}let nv="tooltip",sv=new Set(["sanitize","allowList","sanitizeFn"]),Xo="fade",rv="modal",js="show",ov=".tooltip-inner",Yd=`.${rv}`,Gd="hide.bs.modal",Nn="hover",Ko="focus",av="click",lv="manual",cv="hide",dv="hidden",uv="show",hv="shown",fv="inserted",pv="click",mv="focusin",gv="focusout",vv="mouseenter",bv="mouseleave",yv={AUTO:"auto",TOP:"top",RIGHT:q()?"left":"right",BOTTOM:"bottom",LEFT:q()?"right":"left"},Ev={allowList:Ud,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},wv={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class li extends L{constructor(c,f){if(typeof t>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(c,f),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Ev}static get DefaultType(){return wv}static get NAME(){return nv}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),N.off(this._element.closest(Yd),Gd,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let c=N.trigger(this._element,this.constructor.eventName(uv)),A=(y(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(c.defaultPrevented||!A)return;this._disposePopper();let I=this._getTipElement();this._element.setAttribute("aria-describedby",I.getAttribute("id"));let{container:Y}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(Y.append(I),N.trigger(this._element,this.constructor.eventName(fv))),this._popper=this._createPopper(I),I.classList.add(js),"ontouchstart"in document.documentElement)for(let ne of[].concat(...document.body.children))N.on(ne,"mouseover",P);let W=()=>{N.trigger(this._element,this.constructor.eventName(hv)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(W,this.tip,this._isAnimated())}hide(){if(!this._isShown()||N.trigger(this._element,this.constructor.eventName(cv)).defaultPrevented)return;if(this._getTipElement().classList.remove(js),"ontouchstart"in document.documentElement)for(let I of[].concat(...document.body.children))N.off(I,"mouseover",P);this._activeTrigger[av]=!1,this._activeTrigger[Ko]=!1,this._activeTrigger[Nn]=!1,this._isHovered=null;let A=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),N.trigger(this._element,this.constructor.eventName(dv)))};this._queueCallback(A,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(c){let f=this._getTemplateFactory(c).toHtml();if(!f)return null;f.classList.remove(Xo,js),f.classList.add(`bs-${this.constructor.NAME}-auto`);let A=u(this.constructor.NAME).toString();return f.setAttribute("id",A),this._isAnimated()&&f.classList.add(Xo),f}setContent(c){this._newContent=c,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(c){return this._templateFactory?this._templateFactory.changeContent(c):this._templateFactory=new iv({...this._config,content:c,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[ov]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(c){return this.constructor.getOrCreateInstance(c.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Xo)}_isShown(){return this.tip&&this.tip.classList.contains(js)}_createPopper(c){let f=ee(this._config.placement,[this,c,this._element]),A=yv[f.toUpperCase()];return t.createPopper(this._element,c,this._getPopperConfig(A))}_getOffset(){let{offset:c}=this._config;return typeof c=="string"?c.split(",").map(f=>Number.parseInt(f,10)):typeof c=="function"?f=>c(f,this._element):c}_resolvePossibleFunction(c){return ee(c,[this._element])}_getPopperConfig(c){let f={placement:c,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:A=>{this._getTipElement().setAttribute("data-popper-placement",A.state.placement)}}]};return{...f,...ee(this._config.popperConfig,[f])}}_setListeners(){let c=this._config.trigger.split(" ");for(let f of c)if(f==="click")N.on(this._element,this.constructor.eventName(pv),this._config.selector,A=>{this._initializeOnDelegatedTarget(A).toggle()});else if(f!==lv){let A=f===Nn?this.constructor.eventName(vv):this.constructor.eventName(mv),I=f===Nn?this.constructor.eventName(bv):this.constructor.eventName(gv);N.on(this._element,A,this._config.selector,Y=>{let W=this._initializeOnDelegatedTarget(Y);W._activeTrigger[Y.type==="focusin"?Ko:Nn]=!0,W._enter()}),N.on(this._element,I,this._config.selector,Y=>{let W=this._initializeOnDelegatedTarget(Y);W._activeTrigger[Y.type==="focusout"?Ko:Nn]=W._element.contains(Y.relatedTarget),W._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},N.on(this._element.closest(Yd),Gd,this._hideModalHandler)}_fixTitle(){let c=this._element.getAttribute("title");c&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",c),this._element.setAttribute("data-bs-original-title",c),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(c,f){clearTimeout(this._timeout),this._timeout=setTimeout(c,f)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(c){let f=T.getDataAttributes(this._element);for(let A of Object.keys(f))sv.has(A)&&delete f[A];return c={...f,...typeof c=="object"&&c?c:{}},c=this._mergeConfigObj(c),c=this._configAfterMerge(c),this._typeCheckConfig(c),c}_configAfterMerge(c){return c.container=c.container===!1?document.body:g(c.container),typeof c.delay=="number"&&(c.delay={show:c.delay,hide:c.delay}),typeof c.title=="number"&&(c.title=c.title.toString()),typeof c.content=="number"&&(c.content=c.content.toString()),c}_getDelegateConfig(){let c={};for(let[f,A]of Object.entries(this._config))this.constructor.Default[f]!==A&&(c[f]=A);return c.selector=!1,c.trigger="manual",c}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(c){return this.each(function(){let f=li.getOrCreateInstance(this,c);if(typeof c=="string"){if(typeof f[c]>"u")throw new TypeError(`No method named "${c}"`);f[c]()}})}}G(li);let Sv="popover",Av=".popover-header",Tv=".popover-body",xv={...li.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Cv={...li.DefaultType,content:"(null|string|element|function)"};class Ws extends li{static get Default(){return xv}static get DefaultType(){return Cv}static get NAME(){return Sv}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Av]:this._getTitle(),[Tv]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(c){return this.each(function(){let f=Ws.getOrCreateInstance(this,c);if(typeof c=="string"){if(typeof f[c]>"u")throw new TypeError(`No method named "${c}"`);f[c]()}})}}G(Ws);let Lv="scrollspy",Jo=".bs.scrollspy",Mv=".data-api",Pv=`activate${Jo}`,Xd=`click${Jo}`,Ov=`load${Jo}${Mv}`,_v="dropdown-item",Ui="active",Rv='[data-bs-spy="scroll"]',Zo="[href]",kv=".nav, .list-group",Kd=".nav-link",Dv=`${Kd}, .nav-item > ${Kd}, .list-group-item`,Iv=".dropdown",Nv=".dropdown-toggle",Fv={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Bv={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Fn extends L{constructor(c,f){super(c,f),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Fv}static get DefaultType(){return Bv}static get NAME(){return Lv}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let c of this._observableSections.values())this._observer.observe(c)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(c){return c.target=g(c.target)||document.body,c.rootMargin=c.offset?`${c.offset}px 0px -30%`:c.rootMargin,typeof c.threshold=="string"&&(c.threshold=c.threshold.split(",").map(f=>Number.parseFloat(f))),c}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(N.off(this._config.target,Xd),N.on(this._config.target,Xd,Zo,c=>{let f=this._observableSections.get(c.target.hash);if(f){c.preventDefault();let A=this._rootElement||window,I=f.offsetTop-this._element.offsetTop;if(A.scrollTo){A.scrollTo({top:I,behavior:"smooth"});return}A.scrollTop=I}}))}_getNewObserver(){let c={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(f=>this._observerCallback(f),c)}_observerCallback(c){let f=W=>this._targetLinks.get(`#${W.target.id}`),A=W=>{this._previousScrollData.visibleEntryTop=W.target.offsetTop,this._process(f(W))},I=(this._rootElement||document.documentElement).scrollTop,Y=I>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=I;for(let W of c){if(!W.isIntersecting){this._activeTarget=null,this._clearActiveClass(f(W));continue}let ne=W.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(Y&&ne){if(A(W),!I)return;continue}!Y&&!ne&&A(W)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let c=Z.find(Zo,this._config.target);for(let f of c){if(!f.hash||w(f))continue;let A=Z.findOne(decodeURI(f.hash),this._element);v(A)&&(this._targetLinks.set(decodeURI(f.hash),f),this._observableSections.set(f.hash,A))}}_process(c){this._activeTarget!==c&&(this._clearActiveClass(this._config.target),this._activeTarget=c,c.classList.add(Ui),this._activateParents(c),N.trigger(this._element,Pv,{relatedTarget:c}))}_activateParents(c){if(c.classList.contains(_v)){Z.findOne(Nv,c.closest(Iv)).classList.add(Ui);return}for(let f of Z.parents(c,kv))for(let A of Z.prev(f,Dv))A.classList.add(Ui)}_clearActiveClass(c){c.classList.remove(Ui);let f=Z.find(`${Zo}.${Ui}`,c);for(let A of f)A.classList.remove(Ui)}static jQueryInterface(c){return this.each(function(){let f=Fn.getOrCreateInstance(this,c);if(typeof c=="string"){if(f[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);f[c]()}})}}N.on(window,Ov,()=>{for(let E of Z.find(Rv))Fn.getOrCreateInstance(E)}),G(Fn);let $v="tab",ci=".bs.tab",zv=`hide${ci}`,Hv=`hidden${ci}`,Vv=`show${ci}`,jv=`shown${ci}`,Wv=`click${ci}`,qv=`keydown${ci}`,Uv=`load${ci}`,Yv="ArrowLeft",Jd="ArrowRight",Gv="ArrowUp",Zd="ArrowDown",Qo="Home",Qd="End",di="active",eu="fade",ea="show",Xv="dropdown",tu=".dropdown-toggle",Kv=".dropdown-menu",ta=`:not(${tu})`,Jv='.list-group, .nav, [role="tablist"]',Zv=".nav-item, .list-group-item",Qv=`.nav-link${ta}, .list-group-item${ta}, [role="tab"]${ta}`,iu='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ia=`${Qv}, ${iu}`,eb=`.${di}[data-bs-toggle="tab"], .${di}[data-bs-toggle="pill"], .${di}[data-bs-toggle="list"]`;class ui extends L{constructor(c){super(c),this._parent=this._element.closest(Jv),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),N.on(this._element,qv,f=>this._keydown(f)))}static get NAME(){return $v}show(){let c=this._element;if(this._elemIsActive(c))return;let f=this._getActiveElem(),A=f?N.trigger(f,zv,{relatedTarget:c}):null;N.trigger(c,Vv,{relatedTarget:f}).defaultPrevented||A&&A.defaultPrevented||(this._deactivate(f,c),this._activate(c,f))}_activate(c,f){if(!c)return;c.classList.add(di),this._activate(Z.getElementFromSelector(c));let A=()=>{if(c.getAttribute("role")!=="tab"){c.classList.add(ea);return}c.removeAttribute("tabindex"),c.setAttribute("aria-selected",!0),this._toggleDropDown(c,!0),N.trigger(c,jv,{relatedTarget:f})};this._queueCallback(A,c,c.classList.contains(eu))}_deactivate(c,f){if(!c)return;c.classList.remove(di),c.blur(),this._deactivate(Z.getElementFromSelector(c));let A=()=>{if(c.getAttribute("role")!=="tab"){c.classList.remove(ea);return}c.setAttribute("aria-selected",!1),c.setAttribute("tabindex","-1"),this._toggleDropDown(c,!1),N.trigger(c,Hv,{relatedTarget:f})};this._queueCallback(A,c,c.classList.contains(eu))}_keydown(c){if(![Yv,Jd,Gv,Zd,Qo,Qd].includes(c.key))return;c.stopPropagation(),c.preventDefault();let f=this._getChildren().filter(I=>!w(I)),A;if([Qo,Qd].includes(c.key))A=f[c.key===Qo?0:f.length-1];else{let I=[Jd,Zd].includes(c.key);A=K(f,c.target,I,!0)}A&&(A.focus({preventScroll:!0}),ui.getOrCreateInstance(A).show())}_getChildren(){return Z.find(ia,this._parent)}_getActiveElem(){return this._getChildren().find(c=>this._elemIsActive(c))||null}_setInitialAttributes(c,f){this._setAttributeIfNotExists(c,"role","tablist");for(let A of f)this._setInitialAttributesOnChild(A)}_setInitialAttributesOnChild(c){c=this._getInnerElement(c);let f=this._elemIsActive(c),A=this._getOuterElement(c);c.setAttribute("aria-selected",f),A!==c&&this._setAttributeIfNotExists(A,"role","presentation"),f||c.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(c,"role","tab"),this._setInitialAttributesOnTargetPanel(c)}_setInitialAttributesOnTargetPanel(c){let f=Z.getElementFromSelector(c);f&&(this._setAttributeIfNotExists(f,"role","tabpanel"),c.id&&this._setAttributeIfNotExists(f,"aria-labelledby",`${c.id}`))}_toggleDropDown(c,f){let A=this._getOuterElement(c);if(!A.classList.contains(Xv))return;let I=(Y,W)=>{let ne=Z.findOne(Y,A);ne&&ne.classList.toggle(W,f)};I(tu,di),I(Kv,ea),A.setAttribute("aria-expanded",f)}_setAttributeIfNotExists(c,f,A){c.hasAttribute(f)||c.setAttribute(f,A)}_elemIsActive(c){return c.classList.contains(di)}_getInnerElement(c){return c.matches(ia)?c:Z.findOne(ia,c)}_getOuterElement(c){return c.closest(Zv)||c}static jQueryInterface(c){return this.each(function(){let f=ui.getOrCreateInstance(this);if(typeof c=="string"){if(f[c]===void 0||c.startsWith("_")||c==="constructor")throw new TypeError(`No method named "${c}"`);f[c]()}})}}N.on(document,Wv,iu,function(E){["A","AREA"].includes(this.tagName)&&E.preventDefault(),!w(this)&&ui.getOrCreateInstance(this).show()}),N.on(window,Uv,()=>{for(let E of Z.find(eb))ui.getOrCreateInstance(E)}),G(ui);let tb="toast",jt=".bs.toast",ib=`mouseover${jt}`,nb=`mouseout${jt}`,sb=`focusin${jt}`,rb=`focusout${jt}`,ob=`hide${jt}`,ab=`hidden${jt}`,lb=`show${jt}`,cb=`shown${jt}`,db="fade",nu="hide",qs="show",Us="showing",ub={animation:"boolean",autohide:"boolean",delay:"number"},hb={animation:!0,autohide:!0,delay:5e3};class Bn extends L{constructor(c,f){super(c,f),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return hb}static get DefaultType(){return ub}static get NAME(){return tb}show(){if(N.trigger(this._element,lb).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(db);let f=()=>{this._element.classList.remove(Us),N.trigger(this._element,cb),this._maybeScheduleHide()};this._element.classList.remove(nu),O(this._element),this._element.classList.add(qs,Us),this._queueCallback(f,this._element,this._config.animation)}hide(){if(!this.isShown()||N.trigger(this._element,ob).defaultPrevented)return;let f=()=>{this._element.classList.add(nu),this._element.classList.remove(Us,qs),N.trigger(this._element,ab)};this._element.classList.add(Us),this._queueCallback(f,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(qs),super.dispose()}isShown(){return this._element.classList.contains(qs)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(c,f){switch(c.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=f;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=f;break}}if(f){this._clearTimeout();return}let A=c.relatedTarget;this._element===A||this._element.contains(A)||this._maybeScheduleHide()}_setListeners(){N.on(this._element,ib,c=>this._onInteraction(c,!0)),N.on(this._element,nb,c=>this._onInteraction(c,!1)),N.on(this._element,sb,c=>this._onInteraction(c,!0)),N.on(this._element,rb,c=>this._onInteraction(c,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(c){return this.each(function(){let f=Bn.getOrCreateInstance(this,c);if(typeof c=="string"){if(typeof f[c]>"u")throw new TypeError(`No method named "${c}"`);f[c](this)}})}}return Fe(Bn),G(Bn),{Alert:Ht,Button:kn,Carousel:Vi,Collapse:Wi,Dropdown:ht,Modal:ai,Offcanvas:Lt,Popover:Ws,ScrollSpy:Fn,Tab:ui,Toast:Bn,Tooltip:li}})});var Va={};ru(Va,{FetchEnctype:()=>qt,FetchMethod:()=>Ge,FetchRequest:()=>Yt,FetchResponse:()=>Zi,FrameElement:()=>nt,FrameLoadingStyle:()=>fi,FrameRenderer:()=>en,PageRenderer:()=>tn,PageSnapshot:()=>it,StreamActions:()=>Ha,StreamElement:()=>or,StreamSourceElement:()=>ar,cache:()=>_u,clearCache:()=>Nu,config:()=>Te,connectStreamSource:()=>jn,disconnectStreamSource:()=>Wn,fetch:()=>Ba,fetchEnctypeFromString:()=>Cu,fetchMethodFromString:()=>lr,isSafe:()=>cr,navigator:()=>Ru,registerAdapter:()=>ku,renderStreamMessage:()=>Iu,session:()=>ye,setConfirmMethod:()=>Bu,setFormMode:()=>$u,setProgressBarDelay:()=>Fu,start:()=>za,visit:()=>Du});(function(n){if(typeof n.requestSubmit=="function")return;n.requestSubmit=function(i){i?(e(i,this),i.click()):(i=document.createElement("input"),i.type="submit",i.hidden=!0,this.appendChild(i),i.click(),this.removeChild(i))};function e(i,s){i instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),i.type=="submit"||t(TypeError,"The specified element is not a submit button"),i.form==s||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}function t(i,s,r){throw new i("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+s+".",r)}})(HTMLFormElement.prototype);var pu=new WeakMap;function Eb(n){let e=n instanceof Element?n:n instanceof Node?n.parentElement:null,t=e?e.closest("input, button"):null;return t?.type=="submit"?t:null}function wb(n){let e=Eb(n.target);e&&e.form&&pu.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let n=window.Event.prototype;if("SubmitEvent"in window){let e=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in e))n=e;else return}addEventListener("click",wb,!0),Object.defineProperty(n,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return pu.get(this.target)}})})();var fi={eager:"eager",lazy:"lazy"},nt=class n extends HTMLElement{static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return["disabled","loading","src"]}constructor(){super(),this.delegate=new n.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="src"?this.delegate.sourceURLChanged():e=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(e){e?this.setAttribute("refresh",e):this.removeAttribute("refresh")}get shouldReloadWithMorph(){return this.src&&this.refresh==="morph"}get loading(){return Sb(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};function Sb(n){switch(n.toLowerCase()){case"lazy":return fi.lazy;default:return fi.eager}}var Ab={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set([".7z",".aac",".apk",".avi",".bmp",".bz2",".css",".csv",".deb",".dmg",".doc",".docx",".exe",".gif",".gz",".heic",".heif",".ico",".iso",".jpeg",".jpg",".js",".json",".m4a",".mkv",".mov",".mp3",".mp4",".mpeg",".mpg",".msi",".ogg",".ogv",".pdf",".pkg",".png",".ppt",".pptx",".rar",".rtf",".svg",".tar",".tif",".tiff",".txt",".wav",".webm",".webp",".wma",".wmv",".xls",".xlsx",".xml",".zip"])};function zn(n){if(n.getAttribute("data-turbo-eval")=="false")return n;{let e=document.createElement("script"),t=Eu();return t&&(e.nonce=t),e.textContent=n.textContent,e.async=!1,Tb(e,n),e}}function Tb(n,e){for(let{name:t,value:i}of e.attributes)n.setAttribute(t,i)}function xb(n){let e=document.createElement("template");return e.innerHTML=n,e.content}function me(n,{target:e,cancelable:t,detail:i}={}){let s=new CustomEvent(n,{cancelable:t,bubbles:!0,composed:!0,detail:i});return e&&e.isConnected?e.dispatchEvent(s):document.documentElement.dispatchEvent(s),s}function au(n){n.preventDefault(),n.stopImmediatePropagation()}function $n(){return document.visibilityState==="hidden"?gu():mu()}function mu(){return new Promise(n=>requestAnimationFrame(()=>n()))}function gu(){return new Promise(n=>setTimeout(()=>n(),0))}function Cb(){return Promise.resolve()}function vu(n=""){return new DOMParser().parseFromString(n,"text/html")}function bu(n,...e){let t=Lb(n,e).replace(/^\n/,"").split(`
`),i=t[0].match(/^\s+/),s=i?i[0].length:0;return t.map(r=>r.slice(s)).join(`
`)}function Lb(n,e){return n.reduce((t,i,s)=>{let r=e[s]==null?"":e[s];return t+i+r},"")}function Ut(){return Array.from({length:36}).map((n,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function Ks(n,...e){for(let t of e.map(i=>i?.getAttribute(n)))if(typeof t=="string")return t;return null}function Mb(n,...e){return e.some(t=>t&&t.hasAttribute(n))}function Js(...n){for(let e of n)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function Zs(...n){for(let e of n)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function Pb(n,e=2e3){return new Promise(t=>{let i=()=>{n.removeEventListener("error",i),n.removeEventListener("load",i),t()};n.addEventListener("load",i,{once:!0}),n.addEventListener("error",i,{once:!0}),setTimeout(t,e)})}function yu(n){switch(n){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function Ob(n){return n=="advance"||n=="replace"||n=="restore"}function pi(...n){let e=Ks("data-turbo-action",...n);return Ob(e)?e:null}function Ia(n){return document.querySelector(`meta[name="${n}"]`)}function Qs(n){let e=Ia(n);return e&&e.content}function Eu(){let n=Ia("csp-nonce");if(n){let{nonce:e,content:t}=n;return e==""?t:e}}function _b(n,e){let t=Ia(n);return t||(t=document.createElement("meta"),t.setAttribute("name",n),document.head.appendChild(t)),t.setAttribute("content",e),t}function Ki(n,e){if(n instanceof Element)return n.closest(e)||Ki(n.assignedSlot||n.getRootNode()?.host,e)}function Na(n){return!!n&&n.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof n.focus=="function"}function wu(n){return Array.from(n.querySelectorAll("[autofocus]")).find(Na)}async function Rb(n,e){let t=e();n(),await mu();let i=e();return[t,i]}function Su(n){if(n==="_blank")return!1;if(n){for(let e of document.getElementsByName(n))if(e instanceof HTMLIFrameElement)return!1;return!0}else return!0}function Au(n){return Ki(n,"a[href]:not([target^=_]):not([download])")}function Tu(n){return Me(n.getAttribute("href")||"")}function kb(n,e){let t=null;return(...i)=>{let s=()=>n.apply(this,i);clearTimeout(t),t=setTimeout(s,e)}}var Db={"aria-disabled":{beforeSubmit:n=>{n.setAttribute("aria-disabled","true"),n.addEventListener("click",au)},afterSubmit:n=>{n.removeAttribute("aria-disabled"),n.removeEventListener("click",au)}},disabled:{beforeSubmit:n=>n.disabled=!0,afterSubmit:n=>n.disabled=!1}},sa=class{#e=null;constructor(e){Object.assign(this,e)}get submitter(){return this.#e}set submitter(e){this.#e=Db[e]||e}},Ib=new sa({mode:"on",submitter:"disabled"}),Te={drive:Ab,forms:Ib};function Me(n){return new URL(n.toString(),document.baseURI)}function mi(n){let e;if(n.hash)return n.hash.slice(1);if(e=n.href.match(/#(.*)$/))return e[1]}function Fa(n,e){let t=e?.getAttribute("formaction")||n.getAttribute("action")||n.action;return Me(t)}function Nb(n){return(zb(n).match(/\.[^.]*$/)||[])[0]||""}function Fb(n,e){let t=Hb(e);return n.href===Me(t).href||n.href.startsWith(t)}function Wt(n,e){return Fb(n,e)&&!Te.drive.unvisitableExtensions.has(Nb(n))}function ra(n){let e=mi(n);return e!=null?n.href.slice(0,-(e.length+1)):n.href}function Gs(n){return ra(n)}function Bb(n,e){return Me(n).href==Me(e).href}function $b(n){return n.pathname.split("/").slice(1)}function zb(n){return $b(n).slice(-1)[0]}function Hb(n){return Vb(n.origin+n.pathname)}function Vb(n){return n.endsWith("/")?n:n+"/"}var Zi=class{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return Me(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}},oa=class extends Set{constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){let i=this.values().next().value;this.delete(i)}super.add(e)}},xu=new oa(20),jb=window.fetch;function Ba(n,e={}){let t=new Headers(e.headers||{}),i=Ut();return xu.add(i),t.append("X-Turbo-Request-Id",i),jb(n,{...e,headers:t})}function lr(n){switch(n.toLowerCase()){case"get":return Ge.get;case"post":return Ge.post;case"put":return Ge.put;case"patch":return Ge.patch;case"delete":return Ge.delete}}var Ge={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function Cu(n){switch(n.toLowerCase()){case qt.multipart:return qt.multipart;case qt.plain:return qt.plain;default:return qt.urlEncoded}}var qt={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},Yt=class{abortController=new AbortController;#e=e=>{};constructor(e,t,i,s=new URLSearchParams,r=null,o=qt.urlEncoded){let[a,l]=lu(Me(i),t,s,o);this.delegate=e,this.url=a,this.target=r,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:t.toUpperCase(),headers:{...this.defaultHeaders},body:l,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=o}get method(){return this.fetchOptions.method}set method(e){let t=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,i=lr(e)||Ge.get;this.url.search="";let[s,r]=lu(this.url,i,t,this.enctype);this.url=s,this.fetchOptions.body=r,this.fetchOptions.method=i.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this);let t=await this.#t(e);try{this.delegate.requestStarted(this),t.detail.fetchRequest?this.response=t.detail.fetchRequest.response:this.response=Ba(this.url.href,e);let i=await this.response;return await this.receive(i)}catch(i){if(i.name!=="AbortError")throw this.#i(i)&&this.delegate.requestErrored(this,i),i}finally{this.delegate.requestFinished(this)}}async receive(e){let t=new Zi(e);return me("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return cr(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}async#t(e){let t=new Promise(s=>this.#e=s),i=me("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.#e},target:this.target});return this.url=i.detail.url,i.defaultPrevented&&await t,i}#i(e){return!me("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}};function cr(n){return lr(n)==Ge.get}function lu(n,e,t,i){let s=Array.from(t).length>0?new URLSearchParams(Lu(t)):n.searchParams;return cr(e)?[Wb(n,s),null]:i==qt.urlEncoded?[n,s]:[n,t]}function Lu(n){let e=[];for(let[t,i]of n)i instanceof File||e.push([t,i]);return e}function Wb(n,e){let t=new URLSearchParams(Lu(e));return n.search=t.toString(),n}var aa=class{started=!1;constructor(e,t){this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}intersect=e=>{e.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}},Gt=class{static contentType="text/vnd.turbo-stream.html";static wrap(e){return typeof e=="string"?new this(xb(e)):e}constructor(e){this.fragment=qb(e)}};function qb(n){for(let e of n.querySelectorAll("turbo-stream")){let t=document.importNode(e,!0);for(let i of t.templateElement.content.querySelectorAll("script"))i.replaceWith(zn(i));e.replaceWith(t)}return n}var Ub=100,la=class{#e=null;#t=null;get(e){if(this.#t&&this.#t.url===e&&this.#t.expire>Date.now())return this.#t.request}setLater(e,t,i){this.clear(),this.#e=setTimeout(()=>{t.perform(),this.set(e,t,i),this.#e=null},Ub)}set(e,t,i){this.#t={url:e,request:t,expire:new Date(new Date().getTime()+i)}}clear(){this.#e&&clearTimeout(this.#e),this.#t=null}},Yb=10*1e3,Xi=new la,Gi={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},er=class n{state=Gi.initialized;static confirmMethod(e){return Promise.resolve(confirm(e))}constructor(e,t,i,s=!1){let r=Qb(t,i),o=Zb(Jb(t,i),r),a=Gb(t,i),l=ey(t,i);this.delegate=e,this.formElement=t,this.submitter=i,this.fetchRequest=new Yt(this,r,o,a,t,l),this.mustRedirect=s}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=Me(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:e,requesting:t}=Gi,i=Ks("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof i=="string"&&!await(typeof Te.forms.confirm=="function"?Te.forms.confirm:n.confirmMethod)(i,this.formElement,this.submitter))&&this.state==e)return this.state=t,this.fetchRequest.perform()}stop(){let{stopping:e,stopped:t}=Gi;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let t=Xb(Qs("csrf-param"))||Qs("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(Gt.contentType)}requestStarted(e){this.state=Gi.waiting,this.submitter&&Te.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),Js(this.formElement),me("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){Xi.clear(),this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError){this.delegate.formSubmissionFailedWithResponse(this,t);return}if(Xi.clear(),this.requestMustRedirect(e)&&Kb(t)){let i=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,i)}else this.state=Gi.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){this.state=Gi.stopped,this.submitter&&Te.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),Zs(this.formElement),me("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||Mb("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function Gb(n,e){let t=new FormData(n),i=e?.getAttribute("name"),s=e?.getAttribute("value");return i&&t.append(i,s||""),t}function Xb(n){if(n!=null){let t=(document.cookie?document.cookie.split("; "):[]).find(i=>i.startsWith(n));if(t){let i=t.split("=").slice(1).join("=");return i?decodeURIComponent(i):void 0}}}function Kb(n){return n.statusCode==200&&!n.redirected}function Jb(n,e){let t=typeof n.action=="string"?n.action:null;return e?.hasAttribute("formaction")?e.getAttribute("formaction")||"":n.getAttribute("action")||t||""}function Zb(n,e){let t=Me(n);return cr(e)&&(t.search=""),t}function Qb(n,e){let t=e?.getAttribute("formmethod")||n.getAttribute("method")||"";return lr(t.toLowerCase())||Ge.get}function ey(n,e){return Cu(e?.getAttribute("formenctype")||n.enctype)}var Qi=class{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return wu(this.element)}get permanentElements(){return Pu(this.element)}getPermanentElementById(e){return Mu(this.element,e)}getPermanentElementMapForSnapshot(e){let t={};for(let i of this.permanentElements){let{id:s}=i,r=e.getPermanentElementById(s);r&&(t[s]=[i,r])}return t}};function Mu(n,e){return n.querySelector(`#${e}[data-turbo-permanent]`)}function Pu(n){return n.querySelectorAll("[id][data-turbo-permanent]")}var Hn=class{started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)};submitBubbled=e=>{if(!e.defaultPrevented){let t=e.target instanceof HTMLFormElement?e.target:void 0,i=e.submitter||void 0;t&&ty(t,i)&&iy(t,i)&&this.delegate.willSubmitForm(t,i)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(t,i))}}};function ty(n,e){return(e?.getAttribute("formmethod")||n.getAttribute("method"))!="dialog"}function iy(n,e){let t=e?.getAttribute("formtarget")||n.getAttribute("target");return Su(t)}var tr=class{#e=e=>{};#t=e=>{};constructor(e,t){this.delegate=e,this.element=t}scrollToAnchor(e){let t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(mi(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){let{isPreview:t,shouldRender:i,willRender:s,newSnapshot:r}=e,o=s;if(i)try{this.renderPromise=new Promise(u=>this.#e=u),this.renderer=e,await this.prepareToRenderSnapshot(e);let a=new Promise(u=>this.#t=u),l={resume:this.#t,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(r,l)||await a,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(r,t,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.#e(void 0),delete this.renderPromise}else o&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}},ca=class extends tr{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Qi(this.element)}},ir=class{constructor(e,t){this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickBubbled=e=>{this.clickEventIsSignificant(e)?this.clickEvent=e:delete this.clickEvent};linkClicked=e=>{this.clickEvent&&this.clickEventIsSignificant(e)&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent};willVisit=e=>{delete this.clickEvent};clickEventIsSignificant(e){let t=e.composed?e.target?.parentElement:e.target,i=Au(t)||t;return i instanceof Element&&i.closest("turbo-frame, html")==this.element}},nr=class{started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)};clickBubbled=e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){let t=e.composedPath&&e.composedPath()[0]||e.target,i=Au(t);if(i&&Su(i.target)){let s=Tu(i);this.delegate.willFollowLinkToLocation(i,s,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(i,s))}}};clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}},sr=class{constructor(e,t){this.delegate=e,this.linkInterceptor=new nr(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,t){return!1}prefetchAndCacheRequestToLocation(e,t){}willFollowLinkToLocation(e,t,i){return this.delegate.willSubmitFormLinkToLocation(e,t,i)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,t){let i=document.createElement("form"),s="hidden";for(let[h,m]of t.searchParams)i.append(Object.assign(document.createElement("input"),{type:s,name:h,value:m}));let r=Object.assign(t,{search:""});i.setAttribute("data-turbo","true"),i.setAttribute("action",r.href),i.setAttribute("hidden","");let o=e.getAttribute("data-turbo-method");o&&i.setAttribute("method",o);let a=e.getAttribute("data-turbo-frame");a&&i.setAttribute("data-turbo-frame",a);let l=pi(e);l&&i.setAttribute("data-turbo-action",l);let d=e.getAttribute("data-turbo-confirm");d&&i.setAttribute("data-turbo-confirm",d),e.hasAttribute("data-turbo-stream")&&i.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,i),document.body.appendChild(i),i.addEventListener("turbo:submit-end",()=>i.remove(),{once:!0}),requestAnimationFrame(()=>i.requestSubmit())}},rr=class{static async preservingPermanentElements(e,t,i){let s=new this(e,t);s.enter(),await i(),s.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(let e in this.permanentElementMap){let[t,i]=this.permanentElementMap[e];this.delegate.enteringBardo(t,i),this.replaceNewPermanentElementWithPlaceholder(i)}}leave(){for(let e in this.permanentElementMap){let[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){let t=ny(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){let t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){this.getPlaceholderById(e.id)?.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function ny(n){let e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",n.id),e}var Vn=class{#e=null;static renderElement(e,t){}constructor(e,t,i,s=!0){this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=i,this.willRender=s,this.renderElement=this.constructor.renderElement,this.promise=new Promise((r,o)=>this.resolvingFunctions={resolve:r,reject:o})}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await rr.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){let e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}}enteringBardo(e){this.#e||e.contains(this.currentSnapshot.activeElement)&&(this.#e=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.#e)&&this.#e instanceof HTMLElement&&(this.#e.focus(),this.#e=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}},en=class extends Vn{static renderElement(e,t){let i=document.createRange();i.selectNodeContents(e),i.deleteContents();let s=t,r=s.ownerDocument?.createRange();r&&(r.selectNodeContents(s),e.appendChild(r.extractContents()))}constructor(e,t,i,s,r,o=!0){super(t,i,s,r,o),this.delegate=e}get shouldRender(){return!0}async render(){await $n(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await $n(),this.focusFirstAutofocusableElement(),await $n(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,t=sy(this.currentElement.getAttribute("data-autoscroll-block"),"end"),i=ry(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:i}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let t=zn(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function sy(n,e){return n=="end"||n=="start"||n=="center"||n=="nearest"?n:e}function ry(n,e){return n=="auto"||n=="smooth"?n:e}var oy=function(){let n=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:m,afterNodeAdded:m,beforeNodeMorphed:m,afterNodeMorphed:m,beforeNodeRemoved:m,afterNodeRemoved:m,beforeAttributeUpdated:m},head:{style:"merge",shouldPreserve:function(b){return b.getAttribute("im-preserve")==="true"},shouldReAppend:function(b){return b.getAttribute("im-re-append")==="true"},shouldRemove:m,afterHeadMorphed:m}};function t(b,C,x={}){b instanceof Document&&(b=b.documentElement),typeof C=="string"&&(C=R(C));let F=D(C),$=g(b,F,x);return i(b,F,$)}function i(b,C,x){if(x.head.block){let F=b.querySelector("head"),$=C.querySelector("head");if(F&&$){let U=h($,F,x);Promise.all(U).then(function(){i(b,C,Object.assign(x,{head:{block:!1,ignore:!0}}))});return}}if(x.morphStyle==="innerHTML")return o(C,b,x),b.children;if(x.morphStyle==="outerHTML"||x.morphStyle==null){let F=q(C,b,x),$=F?.previousSibling,U=F?.nextSibling,te=r(b,F,x);return F?H($,te,U):[]}else throw"Do not understand how to morph style "+x.morphStyle}function s(b,C){return C.ignoreActiveValue&&b===document.activeElement&&b!==document.body}function r(b,C,x){if(!(x.ignoreActive&&b===document.activeElement))return C==null?x.callbacks.beforeNodeRemoved(b)===!1?b:(b.remove(),x.callbacks.afterNodeRemoved(b),null):w(b,C)?(x.callbacks.beforeNodeMorphed(b,C)===!1||(b instanceof HTMLHeadElement&&x.head.ignore||(b instanceof HTMLHeadElement&&x.head.style!=="morph"?h(C,b,x):(l(C,b,x),s(b,x)||o(C,b,x))),x.callbacks.afterNodeMorphed(b,C)),b):x.callbacks.beforeNodeRemoved(b)===!1||x.callbacks.beforeNodeAdded(C)===!1?b:(b.parentElement.replaceChild(C,b),x.callbacks.afterNodeAdded(C),x.callbacks.afterNodeRemoved(b),C)}function o(b,C,x){let F=b.firstChild,$=C.firstChild,U;for(;F;){if(U=F,F=U.nextSibling,$==null){if(x.callbacks.beforeNodeAdded(U)===!1)return;C.appendChild(U),x.callbacks.afterNodeAdded(U),J(x,U);continue}if(v(U,$,x)){r($,U,x),$=$.nextSibling,J(x,U);continue}let te=P(b,C,U,$,x);if(te){$=y($,te,x),r(te,U,x),J(x,U);continue}let de=O(b,C,U,$,x);if(de){$=y($,de,x),r(de,U,x),J(x,U);continue}if(x.callbacks.beforeNodeAdded(U)===!1)return;C.insertBefore(U,$),x.callbacks.afterNodeAdded(U),J(x,U)}for(;$!==null;){let te=$;$=$.nextSibling,ee(te,x)}}function a(b,C,x,F){return b==="value"&&F.ignoreActiveValue&&C===document.activeElement?!0:F.callbacks.beforeAttributeUpdated(b,C,x)===!1}function l(b,C,x){let F=b.nodeType;if(F===1){let $=b.attributes,U=C.attributes;for(let te of $)a(te.name,C,"update",x)||C.getAttribute(te.name)!==te.value&&C.setAttribute(te.name,te.value);for(let te=U.length-1;0<=te;te--){let de=U[te];a(de.name,C,"remove",x)||b.hasAttribute(de.name)||C.removeAttribute(de.name)}}(F===8||F===3)&&C.nodeValue!==b.nodeValue&&(C.nodeValue=b.nodeValue),s(C,x)||u(b,C,x)}function d(b,C,x,F){if(b[x]!==C[x]){let $=a(x,C,"update",F);$||(C[x]=b[x]),b[x]?$||C.setAttribute(x,b[x]):a(x,C,"remove",F)||C.removeAttribute(x)}}function u(b,C,x){if(b instanceof HTMLInputElement&&C instanceof HTMLInputElement&&b.type!=="file"){let F=b.value,$=C.value;d(b,C,"checked",x),d(b,C,"disabled",x),b.hasAttribute("value")?F!==$&&(a("value",C,"update",x)||(C.setAttribute("value",F),C.value=F)):a("value",C,"remove",x)||(C.value="",C.removeAttribute("value"))}else if(b instanceof HTMLOptionElement)d(b,C,"selected",x);else if(b instanceof HTMLTextAreaElement&&C instanceof HTMLTextAreaElement){let F=b.value,$=C.value;if(a("value",C,"update",x))return;F!==$&&(C.value=F),C.firstChild&&C.firstChild.nodeValue!==F&&(C.firstChild.nodeValue=F)}}function h(b,C,x){let F=[],$=[],U=[],te=[],de=x.head.style,pe=new Map;for(let ae of b.children)pe.set(ae.outerHTML,ae);for(let ae of C.children){let xe=pe.has(ae.outerHTML),Ce=x.head.shouldReAppend(ae),N=x.head.shouldPreserve(ae);xe||N?Ce?$.push(ae):(pe.delete(ae.outerHTML),U.push(ae)):de==="append"?Ce&&($.push(ae),te.push(ae)):x.head.shouldRemove(ae)!==!1&&$.push(ae)}te.push(...pe.values());let _e=[];for(let ae of te){let xe=document.createRange().createContextualFragment(ae.outerHTML).firstChild;if(x.callbacks.beforeNodeAdded(xe)!==!1){if(xe.href||xe.src){let Ce=null,N=new Promise(function(oe){Ce=oe});xe.addEventListener("load",function(){Ce()}),_e.push(N)}C.appendChild(xe),x.callbacks.afterNodeAdded(xe),F.push(xe)}}for(let ae of $)x.callbacks.beforeNodeRemoved(ae)!==!1&&(C.removeChild(ae),x.callbacks.afterNodeRemoved(ae));return x.head.afterHeadMorphed(C,{added:F,kept:U,removed:$}),_e}function m(){}function p(b){let C={};return Object.assign(C,e),Object.assign(C,b),C.callbacks={},Object.assign(C.callbacks,e.callbacks),Object.assign(C.callbacks,b.callbacks),C.head={},Object.assign(C.head,e.head),Object.assign(C.head,b.head),C}function g(b,C,x){return x=p(x),{target:b,newContent:C,config:x,morphStyle:x.morphStyle,ignoreActive:x.ignoreActive,ignoreActiveValue:x.ignoreActiveValue,idMap:_(b,C),deadIds:new Set,callbacks:x.callbacks,head:x.head}}function v(b,C,x){return b==null||C==null?!1:b.nodeType===C.nodeType&&b.tagName===C.tagName?b.id!==""&&b.id===C.id?!0:j(x,b,C)>0:!1}function w(b,C){return b==null||C==null?!1:b.nodeType===C.nodeType&&b.tagName===C.tagName}function y(b,C,x){for(;b!==C;){let F=b;b=b.nextSibling,ee(F,x)}return J(x,C),C.nextSibling}function P(b,C,x,F,$){let U=j($,x,C),te=null;if(U>0){let de=F,pe=0;for(;de!=null;){if(v(x,de,$))return de;if(pe+=j($,de,b),pe>U)return null;de=de.nextSibling}}return te}function O(b,C,x,F,$){let U=F,te=x.nextSibling,de=0;for(;U!=null;){if(j($,U,b)>0)return null;if(w(x,U))return U;if(w(te,U)&&(de++,te=te.nextSibling,de>=2))return null;U=U.nextSibling}return U}function R(b){let C=new DOMParser,x=b.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(x.match(/<\/html>/)||x.match(/<\/head>/)||x.match(/<\/body>/)){let F=C.parseFromString(b,"text/html");if(x.match(/<\/html>/))return F.generatedByIdiomorph=!0,F;{let $=F.firstChild;return $?($.generatedByIdiomorph=!0,$):null}}else{let $=C.parseFromString("<body><template>"+b+"</template></body>","text/html").body.querySelector("template").content;return $.generatedByIdiomorph=!0,$}}function D(b){if(b==null)return document.createElement("div");if(b.generatedByIdiomorph)return b;if(b instanceof Node){let C=document.createElement("div");return C.append(b),C}else{let C=document.createElement("div");for(let x of[...b])C.append(x);return C}}function H(b,C,x){let F=[],$=[];for(;b!=null;)F.push(b),b=b.previousSibling;for(;F.length>0;){let U=F.pop();$.push(U),C.parentElement.insertBefore(U,C)}for($.push(C);x!=null;)F.push(x),$.push(x),x=x.nextSibling;for(;F.length>0;)C.parentElement.insertBefore(F.pop(),C.nextSibling);return $}function q(b,C,x){let F;F=b.firstChild;let $=F,U=0;for(;F;){let te=G(F,C,x);te>U&&($=F,U=te),F=F.nextSibling}return $}function G(b,C,x){return w(b,C)?.5+j(x,b,C):0}function ee(b,C){J(C,b),C.callbacks.beforeNodeRemoved(b)!==!1&&(b.remove(),C.callbacks.afterNodeRemoved(b))}function V(b,C){return!b.deadIds.has(C)}function K(b,C,x){return(b.idMap.get(x)||n).has(C)}function J(b,C){let x=b.idMap.get(C)||n;for(let F of x)b.deadIds.add(F)}function j(b,C,x){let F=b.idMap.get(C)||n,$=0;for(let U of F)V(b,U)&&K(b,U,x)&&++$;return $}function z(b,C){let x=b.parentElement,F=b.querySelectorAll("[id]");for(let $ of F){let U=$;for(;U!==x&&U!=null;){let te=C.get(U);te==null&&(te=new Set,C.set(U,te)),te.add($.id),U=U.parentElement}}}function _(b,C){let x=new Map;return z(b,x),z(C,x),x}return{morph:t,defaults:e}}();function $a(n,e,{callbacks:t,...i}={}){oy.morph(n,e,{...i,callbacks:new da(t)})}function Ou(n,e){$a(n,e.children,{morphStyle:"innerHTML"})}var da=class{#e;constructor({beforeNodeMorphed:e}={}){this.#e=e||(()=>!0)}beforeNodeAdded=e=>!(e.id&&e.hasAttribute("data-turbo-permanent")&&document.getElementById(e.id));beforeNodeMorphed=(e,t)=>{if(e instanceof Element)return!e.hasAttribute("data-turbo-permanent")&&this.#e(e,t)?!me("turbo:before-morph-element",{cancelable:!0,target:e,detail:{currentElement:e,newElement:t}}).defaultPrevented:!1};beforeAttributeUpdated=(e,t,i)=>!me("turbo:before-morph-attribute",{cancelable:!0,target:t,detail:{attributeName:e,mutationType:i}}).defaultPrevented;beforeNodeRemoved=e=>this.beforeNodeMorphed(e);afterNodeMorphed=(e,t)=>{e instanceof Element&&me("turbo:morph-element",{target:e,detail:{currentElement:e,newElement:t}})}},ua=class extends en{static renderElement(e,t){me("turbo:before-frame-morph",{target:e,detail:{currentElement:e,newElement:t}}),Ou(e,t)}async preservingPermanentElements(e){return await e()}},ha=class n{static animationDuration=300;static get defaultCSS(){return bu`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${n.animationDuration}ms ease-out,
          opacity ${n.animationDuration/2}ms ${n.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,n.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,n.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let e=document.createElement("style");e.type="text/css",e.textContent=n.defaultCSS;let t=Eu();return t&&(e.nonce=t),e}createProgressElement(){let e=document.createElement("div");return e.className="turbo-progress-bar",e}},fa=class extends Qi{detailsByOuterHTML=this.children.filter(e=>!dy(e)).map(e=>fy(e)).reduce((e,t)=>{let{outerHTML:i}=t,s=i in e?e[i]:{type:ay(t),tracked:ly(t),elements:[]};return{...e,[i]:{...s,elements:[...s.elements,t]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,t){return Object.keys(this.detailsByOuterHTML).filter(i=>!(i in t.detailsByOuterHTML)).map(i=>this.detailsByOuterHTML[i]).filter(({type:i})=>i==e).map(({elements:[i]})=>i)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,t)=>{let{type:i,tracked:s,elements:r}=this.detailsByOuterHTML[t];return i==null&&!s?[...e,...r]:r.length>1?[...e,...r.slice(1)]:e},[])}getMetaValue(e){let t=this.findMetaElementByName(e);return t?t.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((t,i)=>{let{elements:[s]}=this.detailsByOuterHTML[i];return hy(s,e)?s:t},void 0|void 0)}};function ay(n){if(cy(n))return"script";if(uy(n))return"stylesheet"}function ly(n){return n.getAttribute("data-turbo-track")=="reload"}function cy(n){return n.localName=="script"}function dy(n){return n.localName=="noscript"}function uy(n){let e=n.localName;return e=="style"||e=="link"&&n.getAttribute("rel")=="stylesheet"}function hy(n,e){return n.localName=="meta"&&n.getAttribute("name")==e}function fy(n){return n.hasAttribute("nonce")&&n.setAttribute("nonce",""),n}var it=class n extends Qi{static fromHTMLString(e=""){return this.fromDocument(vu(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:t,head:i}){return new this(e,t,new fa(i))}constructor(e,t,i){super(t),this.documentElement=e,this.headSnapshot=i}clone(){let e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),i=e.querySelectorAll("select");for(let[s,r]of t.entries()){let o=i[s];for(let a of o.selectedOptions)a.selected=!1;for(let a of r.selectedOptions)o.options[a.index].selected=!0}for(let s of e.querySelectorAll('input[type="password"]'))s.value="";return new n(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){let e=this.getSetting("root")??"/";return Me(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},pa=class{#e=!1;#t=Promise.resolve();renderChange(e,t){return e&&this.viewTransitionsAvailable&&!this.#e?(this.#e=!0,this.#t=this.#t.then(async()=>{await document.startViewTransition(t).finished})):this.#t=this.#t.then(t),this.#t}get viewTransitionsAvailable(){return document.startViewTransition}},py={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},Xs={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},Mt={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},Ji={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},my={advance:"forward",restore:"back",replace:"none"},ma=class{identifier=Ut();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=Mt.initialized;viewTransitioner=new pa;constructor(e,t,i,s={}){this.delegate=e,this.location=t,this.restorationIdentifier=i||Ut();let{action:r,historyChanged:o,referrer:a,snapshot:l,snapshotHTML:d,response:u,visitCachedSnapshot:h,willRender:m,updateHistory:p,shouldCacheSnapshot:g,acceptsStreamResponse:v,direction:w}={...py,...s};this.action=r,this.historyChanged=o,this.referrer=a,this.snapshot=l,this.snapshotHTML=d,this.response=u,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=h,this.willRender=m,this.updateHistory=p,this.scrolled=!m,this.shouldCacheSnapshot=g,this.acceptsStreamResponse=v,this.direction=w||my[r]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==Mt.initialized&&(this.recordTimingMetric(Xs.visitStart),this.state=Mt.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==Mt.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=Mt.canceled)}complete(){this.state==Mt.started&&(this.recordTimingMetric(Xs.visitEnd),this.adapter.visitCompleted(this),this.state=Mt.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==Mt.started&&(this.state=Mt.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let e=this.location.href===this.referrer?.href?"replace":this.action,t=yu(e);this.history.update(t,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Yt(this,Ge.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(Xs.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:t}=e;cu(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(Xs.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:t}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,cu(e)&&t!=null){let i=it.fromHTMLString(t);await this.renderPageSnapshot(i,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(it.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!mi(this.location)||e.hasAnchor(mi(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return it.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let t=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,t),this.adapter.visitRendered(this),t||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(Gt.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){let i=await t.responseHTML,{redirected:s,statusCode:r}=t;i==null?this.recordResponse({statusCode:Ji.contentTypeMismatch,redirected:s}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:r,responseHTML:i,redirected:s}))}async requestFailedWithResponse(e,t){let i=await t.responseHTML,{redirected:s,statusCode:r}=t;i==null?this.recordResponse({statusCode:Ji.contentTypeMismatch,redirected:s}):this.recordResponse({statusCode:r,responseHTML:i,redirected:s})}requestErrored(e,t){this.recordResponse({statusCode:Ji.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=mi(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),await new Promise(t=>{this.frame=document.visibilityState==="hidden"?setTimeout(()=>t(),0):requestAnimationFrame(()=>t())}),await e(),delete this.frame}async renderPageSnapshot(e,t){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,t,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function cu(n){return n>=200&&n<300}var ga=class{progressBar=new ha;constructor(e){this.session=e}visitProposedToLocation(e,t){Wt(e,this.navigator.rootLocation)?this.navigator.startVisit(e,t?.restorationIdentifier||Ut(),t):window.location.href=e.toString()}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case Ji.networkFailure:case Ji.timeoutFailure:case Ji.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}showProgressBar=()=>{this.progressBar.show()};reload(e){me("turbo:reload",{detail:e}),window.location.href=this.location?.toString()||window.location.href}get navigator(){return this.session.navigator}},va=class{selector="[data-turbo-temporary]";deprecatedSelector="[data-turbo-cache=false]";started=!1;start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}removeTemporaryElements=e=>{for(let t of this.temporaryElements)t.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}},ba=class{constructor(e,t){this.session=e,this.element=t,this.linkInterceptor=new ir(this,t),this.formSubmitObserver=new Hn(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,i){return this.#t(e)}linkClickIntercepted(e,t,i){let s=this.#i(e);s&&s.delegate.linkClickIntercepted(e,t,i)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&this.#e(e,t)&&this.#t(e,t)}formSubmitted(e,t){let i=this.#i(e,t);i&&i.delegate.formSubmitted(e,t)}#e(e,t){let i=Fa(e,t),s=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),r=Me(s?.content??"/");return this.#t(e,t)&&Wt(i,r)}#t(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){let s=this.#i(e,t);return s?s!=e.closest("turbo-frame"):!1}else return!1}#i(e,t){let i=t?.getAttribute("data-turbo-frame")||e.getAttribute("data-turbo-frame");if(i&&i!="_top"){let s=this.element.querySelector(`#${i}:not([disabled])`);if(s instanceof nt)return s}}},ya=class{location;restorationIdentifier=Ut();restorationData={};started=!1;pageLoaded=!1;currentIndex=0;constructor(e){this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,i=Ut()){e===history.pushState&&++this.currentIndex;let s={turbo:{restorationIdentifier:i,restorationIndex:this.currentIndex}};e.call(history,s,"",t.href),this.location=t,this.restorationIdentifier=i}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:t}=this,i=this.restorationData[t];this.restorationData[t]={...i,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}onPopState=e=>{if(this.shouldHandlePopState()){let{turbo:t}=e.state||{};if(t){this.location=new URL(window.location.href);let{restorationIdentifier:i,restorationIndex:s}=t;this.restorationIdentifier=i;let r=s>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,i,r),this.currentIndex=s}}};onPageLoad=async e=>{await Cb(),this.pageLoaded=!0};shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},Ea=class{started=!1;#e=null;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",this.#t,{once:!0}):this.#t())}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",this.#i,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",this.#r,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",this.#s,!0),this.started=!1)}#t=()=>{this.eventTarget.addEventListener("mouseenter",this.#i,{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",this.#r,{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",this.#s,!0),this.started=!0};#i=e=>{if(Qs("turbo-prefetch")==="false")return;let t=e.target;if(t.matches&&t.matches("a[href]:not([target^=_]):not([download])")&&this.#l(t)){let s=t,r=Tu(s);if(this.delegate.canPrefetchRequestToLocation(s,r)){this.#e=s;let o=new Yt(this,Ge.get,r,new URLSearchParams,t);Xi.setLater(r.toString(),o,this.#n)}}};#r=e=>{e.target===this.#e&&this.#o()};#o=()=>{Xi.clear(),this.#e=null};#s=e=>{if(e.target.tagName!=="FORM"&&e.detail.fetchOptions.method==="GET"){let t=Xi.get(e.detail.url.toString());t&&(e.detail.fetchRequest=t),Xi.clear()}};prepareRequest(e){let t=e.target;e.headers["X-Sec-Purpose"]="prefetch";let i=t.closest("turbo-frame"),s=t.getAttribute("data-turbo-frame")||i?.getAttribute("target")||i?.id;s&&s!=="_top"&&(e.headers["Turbo-Frame"]=s)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}get#n(){return Number(Qs("turbo-prefetch-cache-time"))||Yb}#l(e){return!(!e.getAttribute("href")||gy(e)||vy(e)||by(e)||yy(e)||wy(e))}},gy=n=>n.origin!==document.location.origin||!["http:","https:"].includes(n.protocol)||n.hasAttribute("target"),vy=n=>n.pathname+n.search===document.location.pathname+document.location.search||n.href.startsWith("#"),by=n=>{if(n.getAttribute("data-turbo-prefetch")==="false"||n.getAttribute("data-turbo")==="false")return!0;let e=Ki(n,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},yy=n=>{let e=n.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||Ey(n)||n.hasAttribute("data-turbo-confirm")||n.hasAttribute("data-turbo-stream"))},Ey=n=>n.hasAttribute("data-remote")||n.hasAttribute("data-behavior")||n.hasAttribute("data-confirm")||n.hasAttribute("data-method"),wy=n=>me("turbo:before-prefetch",{target:n,cancelable:!0}).defaultPrevented,wa=class{constructor(e){this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&this.delegate.visitProposedToLocation(e,t)}startVisit(e,t,i={}){this.stop(),this.currentVisit=new ma(this,Me(e),t,{referrer:this.location,...i}),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new er(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){let i=await t.responseHTML;if(i){let s=e.isSafe;s||this.view.clearSnapshotCache();let{statusCode:r,redirected:o}=t,l={action:this.#e(e,t),shouldCacheSnapshot:s,response:{statusCode:r,responseHTML:i,redirected:o}};this.proposeVisit(t.location,l)}}}async formSubmissionFailedWithResponse(e,t){let i=await t.responseHTML;if(i){let s=it.fromHTMLString(i);t.serverError?await this.view.renderError(s,this.currentVisit):await this.view.renderPage(s,!1,!0,this.currentVisit),s.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e),delete this.currentVisit}locationWithActionIsSamePage(e,t){let i=mi(e),s=mi(this.view.lastRenderedLocation),r=t==="restore"&&typeof i>"u";return t!=="replace"&&ra(e)===ra(this.view.lastRenderedLocation)&&(r||i!=null&&i!==s)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#e(e,t){let{submitter:i,formElement:s}=e;return pi(i,s)||this.#t(t)}#t(e){return e.redirected&&e.location.href===this.location?.href?"replace":"advance"}},hi={initial:0,loading:1,interactive:2,complete:3},Sa=class{stage=hi.initial;started=!1;constructor(e){this.delegate=e}start(){this.started||(this.stage==hi.initial&&(this.stage=hi.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}interpretReadyState=()=>{let{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()};pageIsInteractive(){this.stage==hi.loading&&(this.stage=hi.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==hi.interactive&&(this.stage=hi.complete,this.delegate.pageLoaded())}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}},Aa=class{started=!1;constructor(e){this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(e){this.delegate.scrollPositionChanged(e)}},Ta=class{render({fragment:e}){rr.preservingPermanentElements(this,Sy(e),()=>{Ay(e,()=>{Ty(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function Sy(n){let e=Pu(document.documentElement),t={};for(let i of e){let{id:s}=i;for(let r of n.querySelectorAll("turbo-stream")){let o=Mu(r.templateElement.content,s);o&&(t[s]=[i,o])}}return t}async function Ay(n,e){let t=`turbo-stream-autofocus-${Ut()}`,i=n.querySelectorAll("turbo-stream"),s=xy(i),r=null;if(s&&(s.id?r=s.id:r=t,s.id=r),e(),await $n(),(document.activeElement==null||document.activeElement==document.body)&&r){let a=document.getElementById(r);Na(a)&&a.focus(),a&&a.id==t&&a.removeAttribute("id")}}async function Ty(n){let[e,t]=await Rb(n,()=>document.activeElement),i=e&&e.id;if(i){let s=document.getElementById(i);Na(s)&&s!=t&&s.focus()}}function xy(n){for(let e of n){let t=wu(e.templateElement.content);if(t)return t}return null}var xa=class{sources=new Set;#e=!1;constructor(e){this.delegate=e}start(){this.#e||(this.#e=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.#e&&(this.#e=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}inspectFetchResponse=e=>{let t=Cy(e);t&&Ly(t)&&(e.preventDefault(),this.receiveMessageResponse(t))};receiveMessageEvent=e=>{this.#e&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)};async receiveMessageResponse(e){let t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(Gt.wrap(e))}};function Cy(n){let e=n.detail?.fetchResponse;if(e instanceof Zi)return e}function Ly(n){return(n.contentType??"").startsWith(Gt.contentType)}var Ca=class extends Vn{static renderElement(e,t){let{documentElement:i,body:s}=document;i.replaceChild(t,s)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let t=e.parentNode;if(t){let i=zn(e);t.replaceChild(i,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},tn=class extends Vn{static renderElement(e,t){document.body&&t instanceof HTMLBodyElement?document.body.replaceWith(t):document.documentElement.appendChild(t)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){this.#e(),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#e(){let{documentElement:e}=this.currentSnapshot,{lang:t}=this.newSnapshot;t?e.setAttribute("lang",t):e.removeAttribute("lang")}async mergeHead(){let e=this.mergeProvisionalElements(),t=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await t,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let t of this.newHeadStylesheetElements)e.push(Pb(t)),document.head.appendChild(t);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(zn(e))}removeUnusedDynamicStylesheetElements(){for(let e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let t of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(t,e)||document.head.removeChild(t);for(let t of e)document.head.appendChild(t)}isCurrentElementInElementList(e,t){for(let[i,s]of t.entries()){if(e.tagName=="TITLE"){if(s.tagName!="TITLE")continue;if(e.innerHTML==s.innerHTML)return t.splice(i,1),!0}if(s.isEqualNode(e))return t.splice(i,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let t=zn(e);e.replaceWith(t)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},La=class extends tn{static renderElement(e,t){$a(e,t,{callbacks:{beforeNodeMorphed:i=>!du(i)}});for(let i of e.querySelectorAll("turbo-frame"))du(i)&&i.reload();me("turbo:morph",{detail:{currentElement:e,newElement:t}})}async preservingPermanentElements(e){return await e()}get renderMethod(){return"morph"}get shouldAutofocus(){return!1}};function du(n){return n instanceof nt&&n.src&&n.refresh==="morph"&&!n.closest("[data-turbo-permanent]")}var Ma=class{keys=[];snapshots={};constructor(e){this.size=e}has(e){return Gs(e)in this.snapshots}get(e){if(this.has(e)){let t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[Gs(e)]}write(e,t){this.snapshots[Gs(e)]=t}touch(e){let t=Gs(e),i=this.keys.indexOf(t);i>-1&&this.keys.splice(i,1),this.keys.unshift(t),this.trim()}trim(){for(let e of this.keys.splice(this.size))delete this.snapshots[e]}},Pa=class extends tr{snapshotCache=new Ma(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,t=!1,i=!0,s){let o=this.isPageRefresh(s)&&this.snapshot.shouldMorphPage?La:tn,a=new o(this.snapshot,e,t,i);return a.shouldRender?s?.changeHistory():this.forceReloaded=!0,this.render(a)}renderError(e,t){t?.changeHistory();let i=new Ca(this.snapshot,e,!1);return this.render(i)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:t}=this;await gu();let i=e.clone();return this.snapshotCache.put(t,i),i}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action==="replace"}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return it.fromElement(this.element)}},Oa=class{selector="a[data-turbo-preload]";constructor(e,t){this.delegate=e,this.snapshotCache=t}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this.#e):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",this.#e)}preloadOnLoadLinksForView(e){for(let t of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(t)&&this.preloadURL(t)}async preloadURL(e){let t=new URL(e.href);if(this.snapshotCache.has(t))return;await new Yt(this,Ge.get,t,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,t){try{let i=await t.responseHTML,s=it.fromHTMLString(i);this.snapshotCache.put(e.url,s)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}#e=()=>{this.preloadOnLoadLinksForView(document.body)}},_a=class{constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.#e("")}exemptPageFromCache(){this.#e("no-cache")}exemptPageFromPreview(){this.#e("no-preview")}#e(e){_b("turbo-cache-control",e)}},Ra=class{navigator=new wa(this);history=new ya(this);view=new Pa(this,document.documentElement);adapter=new ga(this);pageObserver=new Sa(this);cacheObserver=new va;linkPrefetchObserver=new Ea(this,document);linkClickObserver=new nr(this,window);formSubmitObserver=new Hn(this,document);scrollObserver=new Aa(this);streamObserver=new xa(this);formLinkClickObserver=new sr(this,document.documentElement);frameRedirector=new ba(this,document.documentElement);streamMessageRenderer=new Ta;cache=new _a(this);enabled=!0;started=!1;#e=150;constructor(e){this.recentRequests=e,this.preloader=new Oa(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){let i=t.frame?document.getElementById(t.frame):null;if(i instanceof nt){let s=t.action||pi(i);i.delegate.proposeVisitIfNavigatedWithAction(i,s),i.src=e.toString()}else this.navigator.proposeVisit(Me(e),t)}refresh(e,t){!(t&&this.recentRequests.has(t))&&!this.navigator.currentVisit&&this.visit(e,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(Gt.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=e}set progressBarDelay(e){Te.drive.progressBarDelay=e}get progressBarDelay(){return Te.drive.progressBarDelay}set drive(e){Te.drive.enabled=e}get drive(){return Te.drive.enabled}set formMode(e){Te.forms.mode=e}get formMode(){return Te.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#e}set pageRefreshDebouncePeriod(e){this.refresh=kb(this.debouncedRefresh.bind(this),e),this.#e=e}shouldPreloadLink(e){let t=e.hasAttribute("data-turbo-method"),i=e.hasAttribute("data-turbo-stream"),s=e.getAttribute("data-turbo-frame"),r=s=="_top"?null:document.getElementById(s)||Ki(e,"turbo-frame:not([disabled])");if(t||i||r instanceof nt)return!1;{let o=new URL(e.href);return this.elementIsNavigatable(e)&&Wt(o,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,t,i){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0,direction:i}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&Wt(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,t){return this.elementIsNavigatable(e)&&Wt(t,this.snapshot.rootLocation)}willFollowLinkToLocation(e,t,i){return this.elementIsNavigatable(e)&&Wt(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,i)}followedLinkToLocation(e,t){let i=this.getActionForLink(e),s=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:i,acceptsStreamResponse:s})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){uu(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||(Js(document.documentElement),this.view.markVisitDirection(e.direction)),uu(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),Zs(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){let i=Fa(e,t);return this.submissionIsNavigatable(e,t)&&Wt(Me(i),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){this.navigator.currentVisit?.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){let i=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:s,detail:{render:r}}=i;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!s}viewRenderedSnapshot(e,t,i){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(i)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,i){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,i).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,i){return me("turbo:click",{target:e,detail:{url:t.href,originalEvent:i},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return me("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return me("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return me("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return me("turbo:before-render",{detail:{newBody:e,...t},cancelable:!0})}notifyApplicationAfterRender(e){return me("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return me("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return me("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return me("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(Te.forms.mode=="off")return!1;{let i=t?this.elementIsNavigatable(t):!0;return Te.forms.mode=="optin"?i&&e.closest('[data-turbo="true"]')!=null:i&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let t=Ki(e,"[data-turbo]"),i=Ki(e,"turbo-frame");return Te.drive.enabled||i?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return pi(e)||"advance"}get snapshot(){return this.view.snapshot}};function uu(n){Object.defineProperties(n,My)}var My={absoluteURL:{get(){return this.toString()}}},ye=new Ra(xu),{cache:_u,navigator:Ru}=ye;function za(){ye.start()}function ku(n){ye.registerAdapter(n)}function Du(n,e){ye.visit(n,e)}function jn(n){ye.connectStreamSource(n)}function Wn(n){ye.disconnectStreamSource(n)}function Iu(n){ye.renderStreamMessage(n)}function Nu(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),ye.clearCache()}function Fu(n){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Te.drive.progressBarDelay=n}function Bu(n){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Te.forms.confirm=n}function $u(n){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Te.forms.mode=n}var Py=Object.freeze({__proto__:null,navigator:Ru,session:ye,cache:_u,PageRenderer:tn,PageSnapshot:it,FrameRenderer:en,fetch:Ba,config:Te,start:za,registerAdapter:ku,visit:Du,connectStreamSource:jn,disconnectStreamSource:Wn,renderStreamMessage:Iu,clearCache:Nu,setProgressBarDelay:Fu,setConfirmMethod:Bu,setFormMode:$u}),ka=class extends Error{},Da=class{fetchResponseLoaded=e=>Promise.resolve();#e=null;#t=()=>{};#i=!1;#r=!1;#o=new Set;#s=!1;action=null;constructor(e){this.element=e,this.view=new ca(this,this.element),this.appearanceObserver=new aa(this,this.element),this.formLinkClickObserver=new sr(this,this.element),this.linkInterceptor=new ir(this,this.element),this.restorationIdentifier=Ut(),this.formSubmitObserver=new Hn(this,this.element)}connect(){this.#i||(this.#i=!0,this.loadingStyle==fi.lazy?this.appearanceObserver.start():this.#n(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.#i&&(this.#i=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==fi.eager&&this.#n()}sourceURLChanged(){this.#b("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==fi.eager||this.#r)&&this.#n())}sourceURLReloaded(){let{refresh:e,src:t}=this.element;return this.#s=t&&e==="morph",this.element.removeAttribute("complete"),this.element.src=null,this.element.src=t,this.element.loaded}loadingStyleChanged(){this.loadingStyle==fi.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.#n())}async#n(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.#u(Me(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#r=!0)}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let t=await e.responseHTML;if(t){let i=vu(t);it.fromDocument(i).isVisitable?await this.#l(e,i):await this.#f(e)}}finally{this.#s=!1,this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,pi(e)),this.#n()}willSubmitFormLinkToLocation(e){return this.#c(e)}submittedFormLinkToLocation(e,t,i){let s=this.#a(e);s&&i.setAttribute("data-turbo-frame",s.id)}shouldInterceptLinkClick(e,t,i){return this.#c(e)}linkClickIntercepted(e,t){this.#h(e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&this.#c(e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new er(this,e,t);let{fetchRequest:i}=this.formSubmission;this.prepareRequest(i),this.formSubmission.start()}prepareRequest(e){e.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&e.acceptResponseType(Gt.contentType)}requestStarted(e){Js(this.element)}requestPreventedHandlingResponse(e,t){this.#t()}async requestSucceededWithResponse(e,t){await this.loadResponse(t),this.#t()}async requestFailedWithResponse(e,t){await this.loadResponse(t),this.#t()}requestErrored(e,t){console.error(t),this.#t()}requestFinished(e){Zs(this.element)}formSubmissionStarted({formElement:e}){Js(e,this.#a(e))}formSubmissionSucceededWithResponse(e,t){let i=this.#a(e.formElement,e.submitter);i.delegate.proposeVisitIfNavigatedWithAction(i,pi(e.submitter,e.formElement,i)),i.delegate.loadResponse(t),e.isSafe||ye.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),ye.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){Zs(e,this.#a(e))}allowsImmediateRender({element:e},t){let i=me("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...t},cancelable:!0}),{defaultPrevented:s,detail:{render:r}}=i;return this.view.renderer&&r&&(this.view.renderer.renderElement=r),!s}viewRenderedSnapshot(e,t,i){}preloadOnLoadLinksForView(e){ye.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}visitCachedSnapshot=({element:e})=>{let t=e.querySelector("#"+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement};async#l(e,t){let i=await this.extractForeignFrameElement(t.body),s=this.#s?ua:en;if(i){let r=new Qi(i),o=new s(this,this.view.snapshot,r,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(o),this.complete=!0,ye.frameRendered(e,this.element),ye.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else this.#p(e)&&this.#m(e)}async#u(e){let t=new Yt(this,Ge.get,e,new URLSearchParams,this.element);return this.#e?.cancel(),this.#e=t,new Promise(i=>{this.#t=()=>{this.#t=()=>{},this.#e=null,i()},t.perform()})}#h(e,t,i){let s=this.#a(e,i);s.delegate.proposeVisitIfNavigatedWithAction(s,pi(i,e,s)),this.#E(e,()=>{s.src=t})}proposeVisitIfNavigatedWithAction(e,t=null){if(this.action=t,this.action){let i=it.fromElement(e).clone(),{visitCachedSnapshot:s}=e.delegate;e.delegate.fetchResponseLoaded=async r=>{if(e.src){let{statusCode:o,redirected:a}=r,l=await r.responseHTML,u={response:{statusCode:o,redirected:a,responseHTML:l},visitCachedSnapshot:s,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:i};this.action&&(u.action=this.action),ye.visit(e.src,u)}}}}changeHistory(){if(this.action){let e=yu(this.action);ye.history.update(e,Me(this.element.src||""),this.restorationIdentifier)}}async#f(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#d(e.response)}#p(e){this.element.setAttribute("complete","");let t=e.response,i=async(r,o)=>{r instanceof Response?this.#d(r):ye.visit(r,o)};return!me("turbo:frame-missing",{target:this.element,detail:{response:t,visit:i},cancelable:!0}).defaultPrevented}#m(e){this.view.missing(),this.#g(e)}#g(e){let t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new ka(t)}async#d(e){let t=new Zi(e),i=await t.responseHTML,{location:s,redirected:r,statusCode:o}=t;return ye.visit(s,{response:{redirected:r,statusCode:o,responseHTML:i}})}#a(e,t){let i=Ks("data-turbo-frame",t,e)||this.element.getAttribute("target");return hu(i)??this.element}async extractForeignFrameElement(e){let t,i=CSS.escape(this.id);try{if(t=fu(e.querySelector(`turbo-frame#${i}`),this.sourceURL),t)return t;if(t=fu(e.querySelector(`turbo-frame[src][recurse~=${i}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(s){return console.error(s),new nt}return null}#v(e,t){let i=Fa(e,t);return Wt(Me(i),this.rootLocation)}#c(e,t){let i=Ks("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.#v(e,t)||!this.enabled||i=="_top")return!1;if(i){let s=hu(i);if(s)return!s.disabled}return!(!ye.elementIsNavigatable(e)||t&&!ye.elementIsNavigatable(t))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.#y("src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#t()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&this.#i}get rootLocation(){let t=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return Me(t)}#b(e){return this.#o.has(e)}#y(e,t){this.#o.add(e),t(),this.#o.delete(e)}#E(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement}};function hu(n){if(n!=null){let e=document.getElementById(n);if(e instanceof nt)return e}}function fu(n,e){if(n){let t=n.getAttribute("src");if(t!=null&&e!=null&&Bb(t,e))throw new Error(`Matching <turbo-frame id="${n.id}"> element has a source URL which references itself`);if(n.ownerDocument!==document&&(n=document.importNode(n,!0)),n instanceof nt)return n.connectedCallback(),n.disconnectedCallback(),n}}var Ha={after(){this.targetElements.forEach(n=>n.parentElement?.insertBefore(this.templateContent,n.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.append(this.templateContent))},before(){this.targetElements.forEach(n=>n.parentElement?.insertBefore(this.templateContent,n))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(n=>n.prepend(this.templateContent))},remove(){this.targetElements.forEach(n=>n.remove())},replace(){let n=this.getAttribute("method");this.targetElements.forEach(e=>{n==="morph"?$a(e,this.templateContent):e.replaceWith(this.templateContent)})},update(){let n=this.getAttribute("method");this.targetElements.forEach(e=>{n==="morph"?Ou(e,this.templateContent):(e.innerHTML="",e.append(this.templateContent))})},refresh(){ye.refresh(this.baseURI,this.requestId)}},or=class n extends HTMLElement{static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{let e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await $n(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){let e=this.targetElements.flatMap(i=>[...i.children]).filter(i=>!!i.id),t=[...this.templateContent?.children||[]].filter(i=>!!i.id).map(i=>i.id);return e.filter(i=>t.includes(i.id))}get performAction(){if(this.action){let e=Ha[this.action];if(e)return e;this.#e("unknown action")}this.#e("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.#e("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#e("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}#e(e){throw new Error(`${this.description}: ${e}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:n.renderElement}})}get targetElementsById(){let e=this.ownerDocument?.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){let e=this.ownerDocument?.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}},ar=class extends HTMLElement{streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),jn(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),Wn(this.streamSource))}get src(){return this.getAttribute("src")||""}};nt.delegateConstructor=Da;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",nt);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",or);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",ar);(()=>{let n=document.currentScript;if(n&&!n.hasAttribute("data-turbo-suppress-warning"))for(n=n.parentElement;n;){if(n==document.body)return console.warn(bu`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,n.outerHTML);n=n.parentElement}})();window.Turbo={...Py,StreamActions:Ha};za();var Uu;async function ky(){return Uu||qu(Dy().then(qu))}function qu(n){return Uu=n}async function Dy(){let{createConsumer:n}=await Promise.resolve().then(()=>(Wu(),ju));return n()}async function Yu(n,e){let{subscriptions:t}=await ky();return t.create(n,e)}function Kn(n){return!n||typeof n!="object"||n instanceof Date||n instanceof RegExp?n:Array.isArray(n)?n.map(Kn):Object.keys(n).reduce(function(e,t){var i=t[0].toLowerCase()+t.slice(1).replace(/([A-Z]+)/g,function(s,r){return"_"+r.toLowerCase()});return e[i]=Kn(n[t]),e},{})}var Za=class extends HTMLElement{static observedAttributes=["channel","signed-stream-name"];async connectedCallback(){jn(this),this.subscription=await Yu(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){Wn(this),this.subscription&&this.subscription.unsubscribe(),this.subscriptionDisconnected()}attributeChangedCallback(){this.subscription&&(this.disconnectedCallback(),this.connectedCallback())}dispatchMessageEvent(e){let t=new MessageEvent("message",{data:e});return this.dispatchEvent(t)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){let e=this.getAttribute("channel"),t=this.getAttribute("signed-stream-name");return{channel:e,signed_stream_name:t,...Kn({...this.dataset})}}};customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",Za);function Gu(n){if(n.target instanceof HTMLFormElement){let{target:e,detail:{fetchOptions:t}}=n;e.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:i}}})=>{let s=By(t.body)?t.body:new URLSearchParams,r=Ny(i,s,e);/get/i.test(r)||(/post/i.test(r)?s.delete("_method"):s.set("_method",r),t.method="post")},{once:!0})}}function Ny(n,e,t){let i=Fy(n),s=e.get("_method"),r=t.getAttribute("method")||"get";return typeof i=="string"?i:typeof s=="string"?s:r}function Fy(n){return n instanceof HTMLButtonElement||n instanceof HTMLInputElement?n.name==="_method"?n.value:n.hasAttribute("formmethod")?n.formMethod:null:null}function By(n){return n instanceof FormData||n instanceof URLSearchParams}window.Turbo=Va;addEventListener("turbo:before-fetch-request",Gu);var Qa=class{constructor(e,t,i){this.eventTarget=e,this.eventName=t,this.eventOptions=i,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let t=$y(e);for(let i of this.bindings){if(t.immediatePropagationStopped)break;i.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{let i=e.index,s=t.index;return i<s?-1:i>s?1:0})}};function $y(n){if("immediatePropagationStopped"in n)return n;{let{stopImmediatePropagation:e}=n;return Object.assign(n,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}var el=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,i={}){this.application.handleError(e,`Error ${t}`,i)}clearEventListenersForBinding(e){let t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){let{eventTarget:t,eventName:i,eventOptions:s}=e,r=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(i,s);r.delete(o),r.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){let{eventTarget:t,eventName:i,eventOptions:s}=e;return this.fetchEventListener(t,i,s)}fetchEventListener(e,t,i){let s=this.fetchEventListenerMapForEventTarget(e),r=this.cacheKey(t,i),o=s.get(r);return o||(o=this.createEventListener(e,t,i),s.set(r,o)),o}createEventListener(e,t,i){let s=new Qa(e,t,i);return this.started&&s.connect(),s}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){let i=[e];return Object.keys(t).sort().forEach(s=>{i.push(`${t[s]?"":"!"}${s}`)}),i.join(":")}},zy={stop({event:n,value:e}){return e&&n.stopPropagation(),!0},prevent({event:n,value:e}){return e&&n.preventDefault(),!0},self({event:n,value:e,element:t}){return e?t===n.target:!0}},Hy=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Vy(n){let t=n.trim().match(Hy)||[],i=t[2],s=t[3];return s&&!["keydown","keyup","keypress"].includes(i)&&(i+=`.${s}`,s=""),{eventTarget:jy(t[4]),eventName:i,eventOptions:t[7]?Wy(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||s}}function jy(n){if(n=="window")return window;if(n=="document")return document}function Wy(n){return n.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function qy(n){if(n==window)return"window";if(n==document)return"document"}function Sl(n){return n.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function tl(n){return Sl(n.replace(/--/g,"-").replace(/__/g,"_"))}function Zn(n){return n.charAt(0).toUpperCase()+n.slice(1)}function sh(n){return n.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function Uy(n){return n.match(/[^\s]+/g)||[]}function Xu(n){return n!=null}function il(n,e){return Object.prototype.hasOwnProperty.call(n,e)}var Ku=["meta","ctrl","alt","shift"],nl=class{constructor(e,t,i,s){this.element=e,this.index=t,this.eventTarget=i.eventTarget||e,this.eventName=i.eventName||Yy(e)||mr("missing event name"),this.eventOptions=i.eventOptions||{},this.identifier=i.identifier||mr("missing identifier"),this.methodName=i.methodName||mr("missing method name"),this.keyFilter=i.keyFilter||"",this.schema=s}static forToken(e,t){return new this(e.element,e.index,Vy(e.content),t)}toString(){let e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;let t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;let i=t.filter(s=>!Ku.includes(s))[0];return i?(il(this.keyMappings,i)||mr(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[i].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;let t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){let e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:i,value:s}of Array.from(this.element.attributes)){let r=i.match(t),o=r&&r[1];o&&(e[Sl(o)]=Gy(s))}return e}get eventTargetName(){return qy(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){let[i,s,r,o]=Ku.map(a=>t.includes(a));return e.metaKey!==i||e.ctrlKey!==s||e.altKey!==r||e.shiftKey!==o}},Ju={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:n=>n.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function Yy(n){let e=n.tagName.toLowerCase();if(e in Ju)return Ju[e](n)}function mr(n){throw new Error(n)}function Gy(n){try{return JSON.parse(n)}catch{return n}}var sl=class{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){let t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){let{element:t}=this.action,{actionDescriptorFilters:i}=this.context.application,{controller:s}=this.context,r=!0;for(let[o,a]of Object.entries(this.eventOptions))if(o in i){let l=i[o];r=r&&l({name:o,value:a,event:e,element:t,controller:s})}else continue;return r}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){let{target:t,currentTarget:i}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:i,action:this.methodName})}catch(s){let{identifier:r,controller:o,element:a,index:l}=this,d={identifier:r,controller:o,element:a,index:l,event:e};this.context.handleError(s,`invoking action "${this.action}"`,d)}}willBeInvokedByEvent(e){let t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},gr=class{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(let t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(let t of Array.from(e)){let i=this.elementFromNode(t);i&&this.processTree(i,this.removeElement)}}processAddedNodes(e){for(let t of Array.from(e)){let i=this.elementFromNode(t);i&&this.elementIsActive(i)&&this.processTree(i,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(let i of this.matchElementsInTree(e))t.call(this,i)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},vr=class{constructor(e,t,i){this.attributeName=t,this.delegate=i,this.elementObserver=new gr(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(this.selector));return t.concat(i)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}};function Xy(n,e,t){rh(n,e).add(t)}function Ky(n,e,t){rh(n,e).delete(t),Jy(n,e)}function rh(n,e){let t=n.get(e);return t||(t=new Set,n.set(e,t)),t}function Jy(n,e){let t=n.get(e);t!=null&&t.size==0&&n.delete(e)}var Pt=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t.concat(Array.from(i)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,i)=>t+i.size,0)}add(e,t){Xy(this.valuesByKey,e,t)}delete(e,t){Ky(this.valuesByKey,e,t)}has(e,t){let i=this.valuesByKey.get(e);return i!=null&&i.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(i=>i.has(e))}getValuesForKey(e){let t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,i])=>i.has(e)).map(([t,i])=>t)}};var rl=class{constructor(e,t,i,s){this._selector=t,this.details=s,this.elementObserver=new gr(e,this),this.delegate=i,this.matchesByElement=new Pt}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){let{selector:t}=this;if(t){let i=e.matches(t);return this.delegate.selectorMatchElement?i&&this.delegate.selectorMatchElement(e,this.details):i}else return!1}matchElementsInTree(e){let{selector:t}=this;if(t){let i=this.matchElement(e)?[e]:[],s=Array.from(e.querySelectorAll(t)).filter(r=>this.matchElement(r));return i.concat(s)}else return[]}elementMatched(e){let{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){let t=this.matchesByElement.getKeysForValue(e);for(let i of t)this.selectorUnmatched(e,i)}elementAttributeChanged(e,t){let{selector:i}=this;if(i){let s=this.matchElement(e),r=this.matchesByElement.has(i,e);s&&!r?this.selectorMatched(e,i):!s&&r&&this.selectorUnmatched(e,i)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}},ol=class{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(i=>this.processMutations(i))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){let t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){let i=this.delegate.getStringMapKeyForAttribute(e);if(i!=null){this.stringMap.has(e)||this.stringMapKeyAdded(i,e);let s=this.element.getAttribute(e);if(this.stringMap.get(e)!=s&&this.stringMapValueChanged(s,i,t),s==null){let r=this.stringMap.get(e);this.stringMap.delete(e),r&&this.stringMapKeyRemoved(i,e,r)}else this.stringMap.set(e,s)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,i){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,i)}stringMapKeyRemoved(e,t,i){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,i)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},br=class{constructor(e,t,i){this.attributeObserver=new vr(e,t,this),this.delegate=i,this.tokensByElement=new Pt}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[t,i]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(i)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let t=this.tokensByElement.getValuesForKey(e),i=this.readTokensForElement(e),s=Qy(t,i).findIndex(([r,o])=>!e0(r,o));return s==-1?[[],[]]:[t.slice(s),i.slice(s)]}readTokensForElement(e){let t=this.attributeName,i=e.getAttribute(t)||"";return Zy(i,e,t)}};function Zy(n,e,t){return n.trim().split(/\s+/).filter(i=>i.length).map((i,s)=>({element:e,attributeName:t,content:i,index:s}))}function Qy(n,e){let t=Math.max(n.length,e.length);return Array.from({length:t},(i,s)=>[n[s],e[s]])}function e0(n,e){return n&&e&&n.index==e.index&&n.content==e.content}var yr=class{constructor(e,t,i){this.tokenListObserver=new br(e,t,this),this.delegate=i,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).set(e,i),this.delegate.elementMatchedValue(t,i))}tokenUnmatched(e){let{element:t}=e,{value:i}=this.fetchParseResultForToken(e);i&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,i))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}},al=class{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new yr(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let t=new sl(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){let t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){let t=nl.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}},ll=class{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new ol(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){let i=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,i.writer(this.receiver[e]),i.writer(i.defaultValue))}stringMapValueChanged(e,t,i){let s=this.valueDescriptorNameMap[t];e!==null&&(i===null&&(i=s.writer(s.defaultValue)),this.invokeChangedCallback(t,e,i))}stringMapKeyRemoved(e,t,i){let s=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,s.writer(this.receiver[e]),i):this.invokeChangedCallback(e,s.writer(s.defaultValue),i)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:t,defaultValue:i,writer:s}of this.valueDescriptors)i!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,s(i),void 0)}invokeChangedCallback(e,t,i){let s=`${e}Changed`,r=this.receiver[s];if(typeof r=="function"){let o=this.valueDescriptorNameMap[e];try{let a=o.reader(t),l=i;i&&(l=o.reader(i)),r.call(this.receiver,a,l)}catch(a){throw a instanceof TypeError&&(a.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${a.message}`),a}}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{let i=this.valueDescriptorMap[t];e[i.name]=i}),e}hasValue(e){let t=this.valueDescriptorNameMap[e],i=`has${Zn(t.name)}`;return this.receiver[i]}},cl=class{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new Pt}start(){this.tokenListObserver||(this.tokenListObserver=new br(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var i;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var i;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(i=this.tokenListObserver)===null||i===void 0||i.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function Qn(n,e){let t=oh(n);return Array.from(t.reduce((i,s)=>(i0(s,e).forEach(r=>i.add(r)),i),new Set))}function t0(n,e){return oh(n).reduce((i,s)=>(i.push(...n0(s,e)),i),[])}function oh(n){let e=[];for(;n;)e.push(n),n=Object.getPrototypeOf(n);return e.reverse()}function i0(n,e){let t=n[e];return Array.isArray(t)?t:[]}function n0(n,e){let t=n[e];return t?Object.keys(t).map(i=>[i,t[i]]):[]}var dl=class{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new Pt,this.outletElementsByName=new Pt,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:i}){let s=this.getOutlet(e,i);s&&this.connectOutlet(s,e,i)}selectorUnmatched(e,t,{outletName:i}){let s=this.getOutletFromMap(e,i);s&&this.disconnectOutlet(s,e,i)}selectorMatchElement(e,{outletName:t}){let i=this.selector(t),s=this.hasOutlet(e,t),r=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return i?s&&r&&e.matches(i):!1}elementMatchedAttribute(e,t){let i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}elementAttributeValueChanged(e,t){let i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}elementUnmatchedAttribute(e,t){let i=this.getOutletNameFromOutletAttributeName(t);i&&this.updateSelectorObserverForOutlet(i)}connectOutlet(e,t,i){var s;this.outletElementsByName.has(i,t)||(this.outletsByName.add(i,e),this.outletElementsByName.add(i,t),(s=this.selectorObserverMap.get(i))===null||s===void 0||s.pause(()=>this.delegate.outletConnected(e,t,i)))}disconnectOutlet(e,t,i){var s;this.outletElementsByName.has(i,t)&&(this.outletsByName.delete(i,e),this.outletElementsByName.delete(i,t),(s=this.selectorObserverMap.get(i))===null||s===void 0||s.pause(()=>this.delegate.outletDisconnected(e,t,i)))}disconnectAllOutlets(){for(let e of this.outletElementsByName.keys)for(let t of this.outletElementsByName.getValuesForKey(e))for(let i of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(i,t,e)}updateSelectorObserverForOutlet(e){let t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){let t=this.selector(e),i=new rl(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,i),i.start()}setupAttributeObserverForOutlet(e){let t=this.attributeNameForOutletName(e),i=new vr(this.scope.element,t,this);this.attributeObserverMap.set(e,i),i.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){let e=new Pt;return this.router.modules.forEach(t=>{let i=t.definition.controllerConstructor;Qn(i,"outlets").forEach(r=>e.add(r,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(i=>i.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},ul=class{constructor(e,t){this.logDebugActivity=(i,s={})=>{let{identifier:r,controller:o,element:a}=this;s=Object.assign({identifier:r,controller:o,element:a},s),this.application.logDebugActivity(this.identifier,i,s)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new al(this,this.dispatcher),this.valueObserver=new ll(this,this.controller),this.targetObserver=new cl(this,this),this.outletObserver=new dl(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(i){this.handleError(i,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,i={}){let{identifier:s,controller:r,element:o}=this;i=Object.assign({identifier:s,controller:r,element:o},i),this.application.handleError(e,`Error ${t}`,i)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,i){this.invokeControllerMethod(`${tl(i)}OutletConnected`,e,t)}outletDisconnected(e,t,i){this.invokeControllerMethod(`${tl(i)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){let i=this.controller;typeof i[e]=="function"&&i[e](...t)}};function s0(n){return r0(n,o0(n))}function r0(n,e){let t=d0(n),i=a0(n.prototype,e);return Object.defineProperties(t.prototype,i),t}function o0(n){return Qn(n,"blessings").reduce((t,i)=>{let s=i(n);for(let r in s){let o=t[r]||{};t[r]=Object.assign(o,s[r])}return t},{})}function a0(n,e){return c0(e).reduce((t,i)=>{let s=l0(n,e,i);return s&&Object.assign(t,{[i]:s}),t},{})}function l0(n,e,t){let i=Object.getOwnPropertyDescriptor(n,t);if(!(i&&"value"in i)){let r=Object.getOwnPropertyDescriptor(e,t).value;return i&&(r.get=i.get||r.get,r.set=i.set||r.set),r}}var c0=typeof Object.getOwnPropertySymbols=="function"?n=>[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)]:Object.getOwnPropertyNames,d0=(()=>{function n(t){function i(){return Reflect.construct(t,arguments,new.target)}return i.prototype=Object.create(t.prototype,{constructor:{value:i}}),Reflect.setPrototypeOf(i,t),i}function e(){let i=n(function(){this.a.call(this)});return i.prototype.a=function(){},new i}try{return e(),n}catch{return i=>class extends i{}}})();function u0(n){return{identifier:n.identifier,controllerConstructor:s0(n.controllerConstructor)}}var hl=class{constructor(e,t){this.application=e,this.definition=u0(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){let t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new ul(this,e),this.contextsByScope.set(e,t)),t}},fl=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){let t=this.data.get(this.getDataKey(e))||"";return Uy(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},pl=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){let i=this.getAttributeNameForKey(e);return this.element.setAttribute(i,t),this.get(e)}has(e){let t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){let t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${sh(e)}`}},ml=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,i){let s=this.warnedKeysByObject.get(e);s||(s=new Set,this.warnedKeysByObject.set(e,s)),s.has(t)||(s.add(t),this.logger.warn(i,e))}};function gl(n,e){return`[${n}~="${e}"]`}var vl=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findTarget(i)||this.findLegacyTarget(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllTargets(i),...this.findAllLegacyTargets(i)],[])}findTarget(e){let t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){let t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){let t=this.schema.targetAttributeForScope(this.identifier);return gl(t,e)}findLegacyTarget(e){let t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){let t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(i=>this.deprecate(i,e))}getLegacySelectorForTargetName(e){let t=`${this.identifier}.${e}`;return gl(this.schema.targetAttribute,t)}deprecate(e,t){if(e){let{identifier:i}=this,s=this.schema.targetAttribute,r=this.schema.targetAttributeForScope(i);this.guide.warn(e,`target:${t}`,`Please replace ${s}="${i}.${t}" with ${r}="${t}". The ${s} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},bl=class{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,i)=>t||this.findOutlet(i),void 0)}findAll(...e){return e.reduce((t,i)=>[...t,...this.findAllOutlets(i)],[])}getSelectorForOutletName(e){let t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){let t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){let t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(s=>this.matchesElement(s,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(s=>this.matchesElement(s,e,t))}matchesElement(e,t,i){let s=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&s.split(" ").includes(i)}},yl=class n{constructor(e,t,i,s){this.targets=new vl(this),this.classes=new fl(this),this.data=new pl(this),this.containsElement=r=>r.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=i,this.guide=new ml(s),this.outlets=new bl(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return gl(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new n(this.schema,document.documentElement,this.identifier,this.guide.logger)}},El=class{constructor(e,t,i){this.element=e,this.schema=t,this.delegate=i,this.valueListObserver=new yr(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:t,content:i}=e;return this.parseValueForElementAndIdentifier(t,i)}parseValueForElementAndIdentifier(e,t){let i=this.fetchScopesByIdentifierForElement(e),s=i.get(t);return s||(s=this.delegate.createScopeForElementAndIdentifier(e,t),i.set(t,s)),s}elementMatchedValue(e,t){let i=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,i),i==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){let i=this.scopeReferenceCounts.get(t);i&&(this.scopeReferenceCounts.set(t,i-1),i==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}},wl=class{constructor(e){this.application=e,this.scopeObserver=new El(this.element,this.schema,this),this.scopesByIdentifier=new Pt,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let t=new hl(this.application,e);this.connectModule(t);let i=e.controllerConstructor.afterLoad;i&&i.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){let t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){let i=this.modulesByIdentifier.get(t);if(i)return i.contexts.find(s=>s.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){let i=this.scopeObserver.parseValueForElementAndIdentifier(e,t);i?this.scopeObserver.elementMatchedValue(i.element,i):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,i){this.application.handleError(e,t,i)}createScopeForElementAndIdentifier(e,t){return new yl(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.connectContextForScope(i))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(i=>e.disconnectContextForScope(i))}},h0={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:n=>`data-${n}-target`,outletAttributeForScope:(n,e)=>`data-${n}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Zu("abcdefghijklmnopqrstuvwxyz".split("").map(n=>[n,n]))),Zu("0123456789".split("").map(n=>[n,n])))};function Zu(n){return n.reduce((e,[t,i])=>Object.assign(Object.assign({},e),{[t]:i}),{})}var Er=class{constructor(e=document.documentElement,t=h0){this.logger=console,this.debug=!1,this.logDebugActivity=(i,s,r={})=>{this.debug&&this.logFormattedMessage(i,s,r)},this.element=e,this.schema=t,this.dispatcher=new el(this),this.router=new wl(this),this.actionDescriptorFilters=Object.assign({},zy)}static start(e,t){let i=new this(e,t);return i.start(),i}async start(){await f0(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(s=>{s.controllerConstructor.shouldLoad&&this.router.loadDefinition(s)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(s=>this.router.unloadIdentifier(s))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){let i=this.router.getContextForElementAndIdentifier(e,t);return i?i.controller:null}handleError(e,t,i){var s;this.logger.error(`%s

%o

%o`,t,e,i),(s=window.onerror)===null||s===void 0||s.call(window,t,"",0,0,e)}logFormattedMessage(e,t,i={}){i=Object.assign({application:this},i),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},i)),this.logger.groupEnd()}};function f0(){return new Promise(n=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>n()):n()})}function p0(n){return Qn(n,"classes").reduce((t,i)=>Object.assign(t,m0(i)),{})}function m0(n){return{[`${n}Class`]:{get(){let{classes:e}=this;if(e.has(n))return e.get(n);{let t=e.getAttributeName(n);throw new Error(`Missing attribute "${t}"`)}}},[`${n}Classes`]:{get(){return this.classes.getAll(n)}},[`has${Zn(n)}Class`]:{get(){return this.classes.has(n)}}}}function g0(n){return Qn(n,"outlets").reduce((t,i)=>Object.assign(t,v0(i)),{})}function Qu(n,e,t){return n.application.getControllerForElementAndIdentifier(e,t)}function eh(n,e,t){let i=Qu(n,e,t);if(i||(n.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),i=Qu(n,e,t),i))return i}function v0(n){let e=tl(n);return{[`${e}Outlet`]:{get(){let t=this.outlets.find(n),i=this.outlets.getSelectorForOutletName(n);if(t){let s=eh(this,t,n);if(s)return s;throw new Error(`The provided outlet element is missing an outlet controller "${n}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${n}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${e}Outlets`]:{get(){let t=this.outlets.findAll(n);return t.length>0?t.map(i=>{let s=eh(this,i,n);if(s)return s;console.warn(`The provided outlet element is missing an outlet controller "${n}" instance for host controller "${this.identifier}"`,i)}).filter(i=>i):[]}},[`${e}OutletElement`]:{get(){let t=this.outlets.find(n),i=this.outlets.getSelectorForOutletName(n);if(t)return t;throw new Error(`Missing outlet element "${n}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${i}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(n)}},[`has${Zn(e)}Outlet`]:{get(){return this.outlets.has(n)}}}}function b0(n){return Qn(n,"targets").reduce((t,i)=>Object.assign(t,y0(i)),{})}function y0(n){return{[`${n}Target`]:{get(){let e=this.targets.find(n);if(e)return e;throw new Error(`Missing target element "${n}" for "${this.identifier}" controller`)}},[`${n}Targets`]:{get(){return this.targets.findAll(n)}},[`has${Zn(n)}Target`]:{get(){return this.targets.has(n)}}}}function E0(n){let e=t0(n,"values"),t={valueDescriptorMap:{get(){return e.reduce((i,s)=>{let r=ah(s,this.identifier),o=this.data.getAttributeNameForKey(r.key);return Object.assign(i,{[o]:r})},{})}}};return e.reduce((i,s)=>Object.assign(i,w0(s)),t)}function w0(n,e){let t=ah(n,e),{key:i,name:s,reader:r,writer:o}=t;return{[s]:{get(){let a=this.data.get(i);return a!==null?r(a):t.defaultValue},set(a){a===void 0?this.data.delete(i):this.data.set(i,o(a))}},[`has${Zn(s)}`]:{get(){return this.data.has(i)||t.hasCustomDefaultValue}}}}function ah([n,e],t){return x0({controller:t,token:n,typeDefinition:e})}function wr(n){switch(n){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Jn(n){switch(typeof n){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(n))return"array";if(Object.prototype.toString.call(n)==="[object Object]")return"object"}function S0(n){let{controller:e,token:t,typeObject:i}=n,s=Xu(i.type),r=Xu(i.default),o=s&&r,a=s&&!r,l=!s&&r,d=wr(i.type),u=Jn(n.typeObject.default);if(a)return d;if(l)return u;if(d!==u){let h=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${h}" must match the defined type "${d}". The provided default value of "${i.default}" is of type "${u}".`)}if(o)return d}function A0(n){let{controller:e,token:t,typeDefinition:i}=n,r=S0({controller:e,token:t,typeObject:i}),o=Jn(i),a=wr(i),l=r||o||a;if(l)return l;let d=e?`${e}.${i}`:t;throw new Error(`Unknown value type "${d}" for "${t}" value`)}function T0(n){let e=wr(n);if(e)return th[e];let t=il(n,"default"),i=il(n,"type"),s=n;if(t)return s.default;if(i){let{type:r}=s,o=wr(r);if(o)return th[o]}return n}function x0(n){let{token:e,typeDefinition:t}=n,i=`${sh(e)}-value`,s=A0(n);return{type:s,key:i,name:Sl(i),get defaultValue(){return T0(t)},get hasCustomDefaultValue(){return Jn(t)!==void 0},reader:C0[s],writer:ih[s]||ih.default}}var th={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},C0={array(n){let e=JSON.parse(n);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${n}" of type "${Jn(e)}"`);return e},boolean(n){return!(n=="0"||String(n).toLowerCase()=="false")},number(n){return Number(n.replace(/_/g,""))},object(n){let e=JSON.parse(n);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${n}" of type "${Jn(e)}"`);return e},string(n){return n}},ih={default:L0,array:nh,object:nh};function nh(n){return JSON.stringify(n)}function L0(n){return`${n}`}var re=class{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:i={},prefix:s=this.identifier,bubbles:r=!0,cancelable:o=!0}={}){let a=s?`${s}:${e}`:e,l=new CustomEvent(a,{detail:i,bubbles:r,cancelable:o});return t.dispatchEvent(l),l}};re.blessings=[p0,b0,E0,g0];re.targets=[];re.outlets=[];re.values={};var Re=Er.start();Re.debug=!1;window.Stimulus=Re;var kh=ou($l()),Cr=class extends re{connect(){}call(n){let e=this.element.getAttribute("data-confirm");confirm(e)||n.preventDefault()}newCall(n){let e=document.getElementById("mainModal"),t=e.querySelector("#mainModalCompleteBtn"),i=new kh.Modal(e),s=this.element.getAttribute("data-confirm");if(n.target.hasAttribute("data-confirmed"))return console.log(n.target),n.target.removeAttribute("data-confirmed");n.preventDefault(),e.querySelector(".modal-body").textContent=s;let r=s.toLowerCase().includes("\u0443\u0434\u0430\u043B");t.textContent=r?"\u0423\u0434\u0430\u043B\u0438\u0442\u044C":"\u041E\u041A",e.querySelector("#mainModalTitle").textContent="\u0412\u043D\u0438\u043C\u0430\u043D\u0438\u0435!",t.classList.remove("btn-primary"),t.classList.add("btn-danger"),i.show(),t.addEventListener("click",()=>{i.hide(),n.target.setAttribute("data-confirmed","true"),n.target.click(),setTimeout(()=>{n.target.removeAttribute("data-confirmed")},0)})}};var Lr=class extends re{call(n){this.element.insertAdjacentHTML("afterbegin",'<div id="loader" class="loader"></div>'),setTimeout(()=>{this.element.querySelector("#loader").remove()},1e3)}};var Mr=class extends re{connect(){this.startTimer()}startTimer(){this.timer=setInterval(()=>{this.fadeOutAndRemove()},7e3)}fadeOutAndRemove(){this.element.classList.add("fade-out"),setTimeout(()=>{this.element.remove()},1e3)}close(){clearInterval(this.timer),this.fadeOutAndRemove()}};var Pr=class extends re{clearForm(n){n.detail.success&&this.element.reset()}};var X=(n,e=1e4)=>(n=parseFloat(n+"")||0,Math.round((n+Number.EPSILON)*e)/e),ic=function(n){if(!(n&&n instanceof Element&&n.offsetParent))return!1;let e=n.scrollHeight>n.clientHeight,t=window.getComputedStyle(n).overflowY,i=t.indexOf("hidden")!==-1,s=t.indexOf("visible")!==-1;return e&&!i&&!s},Vr=function(n,e=void 0){return!(!n||n===document.body||e&&n===e)&&(ic(n)?n:Vr(n.parentElement,e))},St=function(n){var e=new DOMParser().parseFromString(n,"text/html").body;if(e.childElementCount>1){for(var t=document.createElement("div");e.firstChild;)t.appendChild(e.firstChild);return t}return e.firstChild},oc=n=>`${n||""}`.split(" ").filter(e=>!!e),At=(n,e,t)=>{n&&oc(e).forEach(i=>{n.classList.toggle(i,t||!1)})},Zt=class{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}},dn={passive:!1},nc=class{constructor(e,{start:t=()=>!0,move:i=()=>{},end:s=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=t,this.moveCallback=i,this.endCallback=s;for(let r of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[r]=this[r].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,dn),this.element.addEventListener("touchstart",this.onTouchStart,dn),this.element.addEventListener("touchmove",this.onMove,dn),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(!e.buttons||e.button!==0)return;let t=new Zt(e);this.currentPointers.some(i=>i.id===t.id)||this.triggerPointerStart(t,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(e){for(let t of Array.from(e.changedTouches||[]))this.triggerPointerStart(new Zt(t),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){let t=this.currentPointers.slice(),i="changedTouches"in e?Array.from(e.changedTouches||[]).map(r=>new Zt(r)):[new Zt(e)],s=[];for(let r of i){let o=this.currentPointers.findIndex(a=>a.id===r.id);o<0||(s.push(r),this.currentPointers[o]=r)}s.length&&this.moveCallback(e,this.currentPointers.slice(),t)}onPointerEnd(e){e.buttons>0&&e.button!==0||(this.triggerPointerEnd(e,new Zt(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(let t of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new Zt(t))}triggerPointerStart(e,t){return!!this.startCallback(t,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,t){let i=this.currentPointers.findIndex(s=>s.id===t.id);i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(e,t,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){let e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,dn),this.element.removeEventListener("touchstart",this.onTouchStart,dn),this.element.removeEventListener("touchmove",this.onMove,dn),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}};function Dh(n,e){return e?Math.sqrt(Math.pow(e.clientX-n.clientX,2)+Math.pow(e.clientY-n.clientY,2)):0}function Ih(n,e){return e?{clientX:(n.clientX+e.clientX)/2,clientY:(n.clientY+e.clientY)/2}:n}var sc=n=>typeof n=="object"&&n!==null&&n.constructor===Object&&Object.prototype.toString.call(n)==="[object Object]",We=(n,...e)=>{let t=e.length;for(let i=0;i<t;i++){let s=e[i]||{};Object.entries(s).forEach(([r,o])=>{let a=Array.isArray(o)?[]:{};n[r]||Object.assign(n,{[r]:a}),sc(o)?Object.assign(n[r],We(a,o)):Array.isArray(o)?Object.assign(n,{[r]:[...o]}):Object.assign(n,{[r]:o})})}return n},zl=function(n,e){return n.split(".").reduce((t,i)=>typeof t=="object"?t[i]:void 0,e)},gn=class{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(let t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}setOptions(e){this.options=e?We({},this.constructor.defaults,e):{};for(let[t,i]of Object.entries(this.option("on")||{}))this.on(t,i)}option(e,...t){let i=zl(e,this.options);return i&&typeof i=="function"&&(i=i.call(this,this,...t)),i}optionFor(e,t,i,...s){let r=zl(t,e);var o;typeof(o=r)!="string"||isNaN(o)||isNaN(parseFloat(o))||(r=parseFloat(r)),r==="true"&&(r=!0),r==="false"&&(r=!1),r&&typeof r=="function"&&(r=r.call(this,this,e,...s));let a=zl(t,this.options);return a&&typeof a=="function"?r=a.call(this,this,e,...s,r):r===void 0&&(r=a),r===void 0?i:r}cn(e){let t=this.options.classes;return t&&t[e]||""}localize(e,t=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(i,s,r)=>{let o="";return r?o=this.option(`${s[0]+s.toLowerCase().substring(1)}.l10n.${r}`):s&&(o=this.option(`l10n.${s}`)),o||(o=i),o});for(let i=0;i<t.length;i++)e=e.split(t[i][0]).join(t[i][1]);return e=e.replace(/\{\{(.*?)\}\}/g,(i,s)=>s)}on(e,t){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),this.events||(this.events=new Map),i.forEach(s=>{let r=this.events.get(s);r||(this.events.set(s,[]),r=[]),r.includes(t)||r.push(t),this.events.set(s,r)})}off(e,t){let i=[];typeof e=="string"?i=e.split(" "):Array.isArray(e)&&(i=e),i.forEach(s=>{let r=this.events.get(s);if(Array.isArray(r)){let o=r.indexOf(t);o>-1&&r.splice(o,1)}})}emit(e,...t){[...this.events.get(e)||[]].forEach(i=>i(this,...t)),e!=="*"&&this.emit("*",e,...t)}};Object.defineProperty(gn,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(gn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});var ds=class extends gn{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){let t=new Map;for(let[i,s]of Object.entries(e)){let r=this.option(i),o=this.plugins[i];o||r===!1?o&&r===!1&&(o.detach(),delete this.plugins[i]):t.set(i,new s(this,r||{}))}for(let[i,s]of t)this.plugins[i]=s,s.attach()}detachPlugins(e){e=e||Object.keys(this.plugins);for(let t of e){let i=this.plugins[t];i&&i.detach(),delete this.plugins[t]}return this.emit("detachPlugins"),this}},ce;(function(n){n[n.Init=0]="Init",n[n.Error=1]="Error",n[n.Ready=2]="Ready",n[n.Panning=3]="Panning",n[n.Mousemove=4]="Mousemove",n[n.Destroy=5]="Destroy"})(ce||(ce={}));var _t=["a","b","c","d","e","f"],df={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},xE={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:df},Nh='<circle cx="25" cy="25" r="20"></circle>',ac='<div class="f-spinner"><svg viewBox="0 0 50 50">'+Nh+Nh+"</svg></div>",je=n=>n&&n!==null&&n instanceof Element&&"nodeType"in n,le=(n,e)=>{n&&oc(e).forEach(t=>{n.classList.remove(t)})},Q=(n,e)=>{n&&oc(e).forEach(t=>{n.classList.add(t)})},Or={a:1,b:0,c:0,d:1,e:0,f:0},CE=1e5,_r=1e4,at="mousemove",Fh="drag",Bh="content",lt="auto",Hl=null,Vl=null,xi=class n extends ds{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return Vl===null&&(Vl=window.matchMedia("(hover: none)").matches),Vl}get isMobile(){return Hl===null&&(Hl=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),Hl}get panMode(){return this.options.panMode!==at||this.isTouchDevice?Fh:at}get panOnlyZoomed(){let e=this.options.panOnlyZoomed;return e===lt?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){let{a:e,b:t}=this.current;return Math.sqrt(e*e+t*t)||1}get targetScale(){let{a:e,b:t}=this.target;return Math.sqrt(e*e+t*t)||1}get minScale(){return this.option("minScale")||1}get fullScale(){let{contentRect:e}=this;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){let{containerRect:e,contentRect:t}=this,i=Math.max(e.height/t.fitHeight,e.width/t.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){let e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(let e of _t){let t=e=="e"||e==="f"?1e-4:1e-5;if(Math.abs(this.target[e]-this.current[e])>t)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,t={},i={}){var s;if(super(t),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ce.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Or)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},Or)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},n.Plugins),i)),this.emit("attachPlugins"),this.emit("init");let r=this.content;if(r.addEventListener("load",this.onLoad),r.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){e.classList.add(this.cn("isLoading"));let o=St(ac);!e.contains(r)||r.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(o):this.spinner=((s=r.parentElement)===null||s===void 0?void 0:s.insertBefore(o,r))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){let{container:e}=this,t=this.cn(Bh),i=this.option(Bh)||e.querySelector(`.${t}`);if(i||(i=e.querySelector("img,picture")||e.firstElementChild,i&&Q(i,t)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){let{spinner:e,container:t,state:i}=this;e&&(e.remove(),this.spinner=null),this.option("spinner")&&t.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===ce.Init?this.enable():this.updateMetrics()}onError(){this.state!==ce.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=ce.Error,this.emit("error"))}getNextScale(e){let{fullScale:t,targetScale:i,coverScale:s,maxScale:r,minScale:o}=this,a=o;switch(e){case"toggleMax":a=i-o<.5*(r-o)?r:o;break;case"toggleCover":a=i-o<.5*(s-o)?s:o;break;case"toggleZoom":a=i-o<.5*(t-o)?t:o;break;case"iterateZoom":let l=[1,t,r].sort((u,h)=>u-h),d=l.findIndex(u=>u>i+1e-5);a=l[d]||1}return a}attachObserver(){var e;let t=()=>{let{container:i,containerRect:s}=this;return Math.abs(s.width-i.getBoundingClientRect().width)>.1||Math.abs(s.height-i.getBoundingClientRect().height)>.1};this.resizeObserver||window.ResizeObserver===void 0||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(t()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{t()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),(e=this.resizeObserver)===null||e===void 0||e.observe(this.container)}detachObserver(){var e;(e=this.resizeObserver)===null||e===void 0||e.disconnect()}attachEvents(){let{container:e}=this;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new nc(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(at,this.onMouseMove)}detachEvents(){var e;let{container:t}=this;t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("wheel",this.onWheel,{passive:!1}),(e=this.pointerTracker)===null||e===void 0||e.stop(),this.pointerTracker=null,document.removeEventListener(at,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();let e=this.friction,t=this.option("maxVelocity");for(let i of _t)e?(this.velocity[i]*=1-e,t&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],t),-1*t)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(let e of _t)e==="e"&&this.isBouncingX||e==="f"&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,t=0){let{current:i}=this,s=i.e+e,r=i.f+t,o=this.getBounds(),{x:a,y:l}=o,d=a.min,u=a.max,h=l.min,m=l.max,p=0,g=0;return d!==1/0&&s<d?p=d-s:u!==1/0&&s>u&&(p=u-s),h!==1/0&&r<h?g=h-r:m!==1/0&&r>m&&(g=m-r),Math.abs(p)<1e-4&&(p=0),Math.abs(g)<1e-4&&(g=0),Object.assign(Object.assign({},o),{xDiff:p,yDiff:g,inBounds:!p&&!g})}clampTargetBounds(){let{target:e}=this,{x:t,y:i}=this.getBounds();t.min!==1/0&&(e.e=Math.max(e.e,t.min)),t.max!==1/0&&(e.e=Math.min(e.e,t.max)),i.min!==1/0&&(e.f=Math.max(e.f,i.min)),i.max!==1/0&&(e.f=Math.min(e.f,i.max))}calculateContentDim(e=this.current){let{content:t,contentRect:i}=this,{fitWidth:s,fitHeight:r,fullWidth:o,fullHeight:a}=i,l=o,d=a;if(this.option("zoom")||this.angle!==0){let u=!(t instanceof HTMLImageElement)&&(window.getComputedStyle(t).maxWidth==="none"||window.getComputedStyle(t).maxHeight==="none"),h=u?o:s,m=u?a:r,p=this.getMatrix(e),g=new DOMPoint(0,0).matrixTransform(p),v=new DOMPoint(0+h,0).matrixTransform(p),w=new DOMPoint(0+h,0+m).matrixTransform(p),y=new DOMPoint(0,0+m).matrixTransform(p),P=Math.abs(w.x-g.x),O=Math.abs(w.y-g.y),R=Math.abs(y.x-v.x),D=Math.abs(y.y-v.y);l=Math.max(P,R),d=Math.max(O,D)}return{contentWidth:l,contentHeight:d}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===at||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);let{target:e}=this,{x:t,y:i,xDiff:s,yDiff:r}=this.checkBounds(),o=this.option("maxVelocity"),a=this.velocity.e,l=this.velocity.f;s!==0?(this.isBouncingX=!0,s*a<=0?a+=.14*s:(a=.14*s,t.min!==1/0&&(this.target.e=Math.max(e.e,t.min)),t.max!==1/0&&(this.target.e=Math.min(e.e,t.max))),o&&(a=Math.max(Math.min(a,o),-1*o))):this.isBouncingX=!1,r!==0?(this.isBouncingY=!0,r*l<=0?l+=.14*r:(l=.14*r,i.min!==1/0&&(this.target.f=Math.max(e.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(e.f,i.max))),o&&(l=Math.max(Math.min(l,o),-1*o))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=a),this.isBouncingY&&(this.velocity.f=l)}enable(){let{content:e}=this,t=new DOMMatrixReadOnly(window.getComputedStyle(e).transform);for(let i of _t)this.current[i]=this.target[i]=t[i];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=ce.Ready,this.emit("ready")}onClick(e){var t;e.type==="click"&&e.detail===0&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&((t=this.pointerTracker)===null||t===void 0||t.clear(),this.trackingPoints=[],this.startDecelAnim());let i=e.target;if(!i||e.defaultPrevented)return;if(i.hasAttribute("disabled"))return e.preventDefault(),void e.stopPropagation();if((()=>{let p=window.getSelection();return p&&p.type==="Range"})()&&!i.closest("button"))return;let s=i.closest("[data-panzoom-action]"),r=i.closest("[data-panzoom-change]"),o=s||r,a=o&&je(o)?o.dataset:null;if(a){let p=a.panzoomChange,g=a.panzoomAction;if((p||g)&&e.preventDefault(),p){let v={};try{v=JSON.parse(p)}catch{console&&console.warn("The given data was not valid JSON")}return void this.applyChange(v)}if(g)return void(this[g]&&this[g]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return e.preventDefault(),void e.stopPropagation();if(i.closest("[data-fancybox]"))return;let l=this.content.getBoundingClientRect(),d=this.dragStart;if(d.time&&!this.canZoomOut()&&(Math.abs(l.x-d.x)>2||Math.abs(l.y-d.y)>2))return;this.dragStart.time=0;let u=p=>{this.option("zoom",e)&&p&&typeof p=="string"&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(p)&&typeof this[p]=="function"&&(e.preventDefault(),this[p]({event:e}))},h=this.option("click",e),m=this.option("dblClick",e);m?(this.clicks++,this.clicks==1&&(this.clickTimer=setTimeout(()=>{this.clicks===1?(this.emit("click",e),!e.defaultPrevented&&h&&u(h)):(this.emit("dblClick",e),e.defaultPrevented||u(m)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",e),!e.defaultPrevented&&h&&u(h))}addTrackingPoint(e){let t=this.trackingPoints.filter(i=>i.time>Date.now()-100);t.push(e),this.trackingPoints=t}onPointerDown(e,t,i){var s;if(this.option("touch",e)===!1)return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];let r=this.content.getBoundingClientRect();if(this.dragStart={x:r.x,y:r.y,top:r.top,left:r.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===at&&this.targetScale>1)return e.preventDefault(),e.stopPropagation(),!1;let o=e.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(o.nodeName)||o.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;(s=window.getSelection())===null||s===void 0||s.removeAllRanges()}if(e.type==="mousedown")["A","BUTTON"].includes(o.nodeName)||e.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(t),this.emit("touchStart",e)),!0}onPointerMove(e,t,i){if(this.option("touch",e)===!1||!this.isDragging||t.length<2&&this.panOnlyZoomed&&X(this.targetScale)<=X(this.minScale)||(this.emit("touchMove",e),e.defaultPrevented))return;this.addTrackingPoint(t[0]);let{content:s}=this,r=Ih(i[0],i[1]),o=Ih(t[0],t[1]),a=0,l=0;if(t.length>1){let O=s.getBoundingClientRect();a=r.clientX-O.left-.5*O.width,l=r.clientY-O.top-.5*O.height}let d=Dh(i[0],i[1]),u=Dh(t[0],t[1]),h=d?u/d:1,m=o.clientX-r.clientX,p=o.clientY-r.clientY;this.dragOffset.x+=m,this.dragOffset.y+=p,this.dragOffset.time=Date.now()-this.dragStart.time;let g=X(this.targetScale)===X(this.minScale)&&this.option("lockAxis");if(g&&!this.lockedAxis)if(g==="xy"||g==="y"||e.type==="touchmove"){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();let O=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=O>45&&O<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,m=0,p=0}else this.lockedAxis=g;if(Vr(e.target,this.content)&&(g="x",this.dragOffset.y=0),g&&g!=="xy"&&this.lockedAxis!==g&&X(this.targetScale)===X(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));let v=this.checkBounds(m,p);this.option("rubberband")?(this.isInfinite!=="x"&&(v.xDiff>0&&m<0||v.xDiff<0&&m>0)&&(m*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*v.xDiff))),this.isInfinite!=="y"&&(v.yDiff>0&&p<0||v.yDiff<0&&p>0)&&(p*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*v.yDiff)))):(v.xDiff&&(m=0),v.yDiff&&(p=0));let w=this.targetScale,y=this.minScale,P=this.maxScale;w<.5*y&&(h=Math.max(h,y)),w>1.5*P&&(h=Math.min(h,P)),this.lockedAxis==="y"&&X(w)===X(y)&&(m=0),this.lockedAxis==="x"&&X(w)===X(y)&&(p=0),this.applyChange({originX:a,originY:l,panX:m,panY:p,scale:h,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(e,t,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(t),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),Vr(e.target,this.content)&&this.lockedAxis==="y"&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==ce.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;let t=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(let O of _t)this.velocity[O]=0;this.target.e=this.current.e,this.target.f=this.current.f,le(this.container,"is-scaling"),le(this.container,"is-animating"),this.isTicking=!1;let{trackingPoints:i}=this,s=i[0],r=i[i.length-1],o=0,a=0,l=0;r&&s&&(o=r.clientX-s.clientX,a=r.clientY-s.clientY,l=r.time-s.time);let d=((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1;d!==1&&(o*=d,a*=d);let u=0,h=0,m=0,p=0,g=this.option("decelFriction"),v=this.targetScale;if(l>0){m=Math.abs(o)>3?o/(l/30):0,p=Math.abs(a)>3?a/(l/30):0;let O=this.option("maxVelocity");O&&(m=Math.max(Math.min(m,O),-1*O),p=Math.max(Math.min(p,O),-1*O))}m&&(u=m/(1/(1-g)-1)),p&&(h=p/(1/(1-g)-1)),(this.option("lockAxis")==="y"||this.option("lockAxis")==="xy"&&this.lockedAxis==="y"&&X(v)===this.minScale)&&(u=m=0),(this.option("lockAxis")==="x"||this.option("lockAxis")==="xy"&&this.lockedAxis==="x"&&X(v)===this.minScale)&&(h=p=0);let w=this.dragOffset.x,y=this.dragOffset.y,P=this.option("dragMinThreshold")||0;Math.abs(w)<P&&Math.abs(y)<P&&(u=h=0,m=p=0),(this.option("zoom")&&(v<this.minScale-1e-5||v>this.maxScale+1e-5)||t&&!u&&!h)&&(g=.35),this.applyChange({panX:u,panY:h,friction:g}),this.emit("decel",m,p,w,y)}onWheel(e){var t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(r,o){return Math.abs(o)>Math.abs(r)?o:r});let i=Math.max(-1,Math.min(1,t));if(this.emit("wheel",e,i),this.panMode===at||e.defaultPrevented)return;let s=this.option("wheel");s==="pan"?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):s==="zoom"&&this.option("zoom")!==!1&&this.zoomWithWheel(e)}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){e.key==="Escape"&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");let{current:e,target:t,content:i,contentRect:s}=this,r=Object.assign({},Or);for(let w of _t){let y=w=="e"||w==="f"?_r:CE;r[w]=X(e[w],y),Math.abs(t[w]-e[w])<(w=="e"||w==="f"?.51:.001)&&(e[w]=t[w])}let{a:o,b:a,c:l,d,e:u,f:h}=r,m=`matrix(${o}, ${a}, ${l}, ${d}, ${u}, ${h})`,p=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;if(this.option("transformParent")&&(p=p.parentElement||p),p.style.transform===m)return;p.style.transform=m;let{contentWidth:g,contentHeight:v}=this.calculateContentDim();s.width=g,s.height=v,this.emit("afterTransform")}updateMetrics(e=!1){var t;if(!this||this.state===ce.Destroy||this.isContentLoading)return;let i=Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1),{container:s,content:r}=this,o=r instanceof HTMLImageElement,a=s.getBoundingClientRect(),l=getComputedStyle(this.container),d=a.width*i,u=a.height*i,h=parseFloat(l.paddingTop)+parseFloat(l.paddingBottom),m=d-(parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),p=u-h;this.containerRect={width:d,height:u,innerWidth:m,innerHeight:p};let g=parseFloat(r.dataset.width||"")||(j=>{let z=0;return z=j instanceof HTMLImageElement?j.naturalWidth:j instanceof SVGElement?j.width.baseVal.value:Math.max(j.offsetWidth,j.scrollWidth),z||0})(r),v=parseFloat(r.dataset.height||"")||(j=>{let z=0;return z=j instanceof HTMLImageElement?j.naturalHeight:j instanceof SVGElement?j.height.baseVal.value:Math.max(j.offsetHeight,j.scrollHeight),z||0})(r),w=this.option("width",g)||lt,y=this.option("height",v)||lt,P=w===lt,O=y===lt;typeof w!="number"&&(w=g),typeof y!="number"&&(y=v),P&&(w=g*(y/v)),O&&(y=v/(g/w));let R=r.parentElement instanceof HTMLPictureElement?r.parentElement:r;this.option("transformParent")&&(R=R.parentElement||R);let D=R.getAttribute("style")||"";R.style.setProperty("transform","none","important"),o&&(R.style.width="",R.style.height=""),R.offsetHeight;let H=r.getBoundingClientRect(),q=H.width*i,G=H.height*i,ee=q,V=G;q=Math.min(q,w),G=Math.min(G,y),o?{width:q,height:G}=((j,z,_,b)=>{let C=_/j,x=b/z,F=Math.min(C,x);return{width:j*=F,height:z*=F}})(w,y,q,G):(q=Math.min(q,w),G=Math.min(G,y));let K=.5*(V-G),J=.5*(ee-q);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:H.top-a.top+K,bottom:a.bottom-H.bottom+K,left:H.left-a.left+J,right:a.right-H.right+J,fitWidth:q,fitHeight:G,width:q,height:G,fullWidth:w,fullHeight:y}),R.style.cssText=D,o&&(R.style.width=`${q}px`,R.style.height=`${G}px`),this.setTransform(),e!==!0&&this.emit("refresh"),this.ignoreBounds||(X(this.targetScale)<X(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===ce.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){let{contentWidth:e,contentHeight:t}=this.calculateContentDim(this.target),{targetScale:i,lockedAxis:s}=this,{fitWidth:r,fitHeight:o}=this.contentRect,a=0,l=0,d=0,u=0,h=this.option("infinite");if(h===!0||s&&h===s)a=-1/0,d=1/0,l=-1/0,u=1/0;else{let{containerRect:m,contentRect:p}=this,g=X(r*i,_r),v=X(o*i,_r),{innerWidth:w,innerHeight:y}=m;if(m.width===g&&(w=m.width),m.width===v&&(y=m.height),e>w){d=.5*(e-w),a=-1*d;let P=.5*(p.right-p.left);a+=P,d+=P}if(r>w&&e<w&&(a-=.5*(r-w),d-=.5*(r-w)),t>y){u=.5*(t-y),l=-1*u;let P=.5*(p.bottom-p.top);l+=P,u+=P}o>y&&t<y&&(a-=.5*(o-y),d-=.5*(o-y))}return{x:{min:a,max:d},y:{min:l,max:u}}}getBounds(){let e=this.option("bounds");return e!==lt?e:this.calculateBounds()}updateControls(){let e=this,t=e.container,{panMode:i,contentRect:s,targetScale:r,minScale:o}=e,a=o,l=e.option("click")||!1;l&&(a=e.getNextScale(l));let d=e.canZoomIn(),u=e.canZoomOut(),h=i===Fh&&!!this.option("touch"),m=u&&h;if(h&&(X(r)<X(o)&&!this.panOnlyZoomed&&(m=!0),(X(s.width,1)>X(s.fitWidth,1)||X(s.height,1)>X(s.fitHeight,1))&&(m=!0)),X(s.width*r,1)<X(s.fitWidth,1)&&(m=!1),i===at&&(m=!1),At(t,this.cn("isDraggable"),m),!this.option("zoom"))return;let p=d&&X(a)>X(r),g=!p&&!m&&u&&X(a)<X(r);At(t,this.cn("canZoomIn"),p),At(t,this.cn("canZoomOut"),g);for(let v of t.querySelectorAll("[data-panzoom-action]")){let w=!1,y=!1;switch(v.dataset.panzoomAction){case"zoomIn":d?w=!0:y=!0;break;case"zoomOut":u?w=!0:y=!0;break;case"toggleZoom":case"iterateZoom":d||u?w=!0:y=!0;let P=v.querySelector("g");P&&(P.style.display=d?"":"none")}w?(v.removeAttribute("disabled"),v.removeAttribute("tabindex")):y&&(v.setAttribute("disabled",""),v.setAttribute("tabindex","-1"))}}panTo({x:e=this.target.e,y:t=this.target.f,scale:i=this.targetScale,friction:s=this.option("friction"),angle:r=0,originX:o=0,originY:a=0,flipX:l=!1,flipY:d=!1,ignoreBounds:u=!1}){this.state!==ce.Destroy&&this.applyChange({panX:e-this.target.e,panY:t-this.target.f,scale:i/this.targetScale,angle:r,originX:o,originY:a,friction:s,flipX:l,flipY:d,ignoreBounds:u})}applyChange({panX:e=0,panY:t=0,scale:i=1,angle:s=0,originX:r=-this.current.e,originY:o=-this.current.f,friction:a=this.option("friction"),flipX:l=!1,flipY:d=!1,ignoreBounds:u=!1,bounce:h=this.option("bounce")}){let m=this.state;if(m===ce.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=a||0,this.ignoreBounds=u;let{current:p}=this,g=p.e,v=p.f,w=this.getMatrix(this.target),y=new DOMMatrix().translate(g,v).translate(r,o).translate(e,t);if(this.option("zoom")){if(!u){let P=this.targetScale,O=this.minScale,R=this.maxScale;P*i<O&&(i=O/P),P*i>R&&(i=R/P)}y=y.scale(i)}y=y.translate(-r,-o).translate(-g,-v).multiply(w),s&&(y=y.rotate(s)),l&&(y=y.scale(-1,1)),d&&(y=y.scale(1,-1));for(let P of _t)P!=="e"&&P!=="f"&&(y[P]>this.minScale+1e-5||y[P]<this.minScale-1e-5)?this.target[P]=y[P]:this.target[P]=X(y[P],_r);(this.targetScale<this.scale||Math.abs(i-1)>.1||this.panMode===at||h===!1)&&!u&&this.clampTargetBounds(),m===ce.Init?this.animate():this.isResting||(this.state=ce.Panning,this.requestTick())}stop(e=!1){if(this.state===ce.Init||this.state===ce.Destroy)return;let t=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(let i of _t)this.velocity[i]=0,e==="current"?this.current[i]=this.target[i]:e==="target"&&(this.target[i]=this.current[i]);this.setTransform(),le(this.container,"is-scaling"),le(this.container,"is-animating"),this.isTicking=!1,this.state=ce.Ready,t&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),Q(this.container,"is-animating"),this.isScaling&&Q(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(e,t=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==at||!e||X(this.targetScale)<=X(this.minScale))return;this.emit("mouseMove",e);let{container:i,containerRect:s,contentRect:r}=this,o=s.width,a=s.height,l=i.getBoundingClientRect(),d=(e.clientX||0)-l.left,u=(e.clientY||0)-l.top,{contentWidth:h,contentHeight:m}=this.calculateContentDim(this.target),p=this.option("mouseMoveFactor");p>1&&(h!==o&&(h*=p),m!==a&&(m*=p));let g=.5*(h-o)-d/o*100/100*(h-o);g+=.5*(r.right-r.left);let v=.5*(m-a)-u/a*100/100*(m-a);v+=.5*(r.bottom-r.top),this.applyChange({panX:g-this.target.e,panY:v-this.target.f,friction:t})}zoomWithWheel(e){if(this.state===ce.Destroy||this.state===ce.Init)return;let t=Date.now();if(t-this.pwt<45)return void e.preventDefault();this.pwt=t;var i=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(d,u){return Math.abs(u)>Math.abs(d)?u:d});let s=Math.max(-1,Math.min(1,i)),{targetScale:r,maxScale:o,minScale:a}=this,l=r*(100+45*s)/100;X(l)<X(a)&&X(r)<=X(a)?(this.cwd+=Math.abs(s),l=a):X(l)>X(o)&&X(r)>=X(o)?(this.cwd+=Math.abs(s),l=o):(this.cwd=0,l=Math.max(Math.min(l,o),a)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),X(l)!==X(r)&&this.zoomTo(l,{event:e}))}canZoomIn(){return this.option("zoom")&&(X(this.contentRect.width,1)<X(this.contentRect.fitWidth,1)||X(this.targetScale)<X(this.maxScale))}canZoomOut(){return this.option("zoom")&&X(this.targetScale)>X(this.minScale)}zoomIn(e=1.25,t){this.zoomTo(this.targetScale*e,t)}zoomOut(e=.8,t){this.zoomTo(this.targetScale*e,t)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.getNextScale("toggleZoom"),e)}toggleMax(e){this.zoomTo(this.getNextScale("toggleMax"),e)}toggleCover(e){this.zoomTo(this.getNextScale("toggleCover"),e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(e=1,{friction:t=lt,originX:i=lt,originY:s=lt,event:r}={}){if(this.isContentLoading||this.state===ce.Destroy)return;let{targetScale:o,fullScale:a,maxScale:l,coverScale:d}=this;if(this.stop(),this.panMode===at&&(r=this.pmme||r),r||i===lt||s===lt){let h=this.content.getBoundingClientRect(),m=this.container.getBoundingClientRect(),p=r?r.clientX:m.left+.5*m.width,g=r?r.clientY:m.top+.5*m.height;i=p-h.left-.5*h.width,s=g-h.top-.5*h.height}let u=1;typeof e=="number"?u=e:e==="full"?u=a:e==="cover"?u=d:e==="max"?u=l:e==="fit"?u=1:e==="next"&&(u=this.getNextScale("iterateZoom")),u=u/o||1,t=t===lt?u>1?.15:.25:t,this.applyChange({scale:u,originX:i,originY:s,friction:t}),r&&this.panMode===at&&this.panWithMouse(r,t)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");let{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.height-(t.top+.5*t.fitHeight)-i.f,scale:e.width/t.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");let{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.innerHeight-(t.top+.5*t.fitHeight)-i.f,scale:e.height/t.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){let{container:e}=this,t=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");e.classList.toggle(t);let s=e.classList.contains(t);s?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(s?"enterFS":"exitFS")}getMatrix(e=this.current){let{a:t,b:i,c:s,d:r,e:o,f:a}=e;return new DOMMatrix([t,i,s,r,o,a])}reset(e){if(this.state!==ce.Init&&this.state!==ce.Destroy){this.stop("current");for(let t of _t)this.target[t]=Or[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=e===void 0?this.option("friction"):e,this.state=ce.Panning,this.requestTick())}}destroy(){this.stop(),this.state=ce.Destroy,this.detachEvents(),this.detachObserver();let{container:e,content:t}=this,i=this.option("classes")||{};for(let s of Object.values(i))e.classList.remove(s+"");t&&(t.removeEventListener("load",this.onLoad),t.removeEventListener("error",this.onError)),this.detachPlugins()}};Object.defineProperty(xi,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:xE}),Object.defineProperty(xi,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});var $h=function(n,e){let t=!0;return(...i)=>{t&&(t=!1,n(...i),setTimeout(()=>{t=!0},e))}},zh=(n,e)=>{let t=[];return n.childNodes.forEach(i=>{i.nodeType!==Node.ELEMENT_NODE||e&&!i.matches(e)||t.push(i)}),t},LE={viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}},Se;(function(n){n[n.Init=0]="Init",n[n.Ready=1]="Ready",n[n.Destroy=2]="Destroy"})(Se||(Se={}));var jl=n=>{if(typeof n=="string"||n instanceof HTMLElement)n={html:n};else{let e=n.thumb;e!==void 0&&(typeof e=="string"&&(n.thumbSrc=e),e instanceof HTMLImageElement&&(n.thumbEl=e,n.thumbElSrc=e.src,n.thumbSrc=e.src),delete n.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},n)},ME=(n={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},n),Ke=class extends gn{constructor(e,t){super(t),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}},PE={classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2},jr=class extends Ke{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list;if(!e){e=document.createElement("ul"),Q(e,this.cn("list")),e.setAttribute("role","tablist");let t=this.instance.container;t.appendChild(e),Q(t,this.cn("hasDots")),this.list=e}return e}refresh(){var e;let t=this.instance.pages.length,i=Math.min(2,this.option("minCount")),s=Math.max(2e3,this.option("maxCount")),r=this.option("dynamicFrom");if(t<i||t>s)return void this.cleanup();let o=typeof r=="number"&&t>5&&t>=r,a=!this.list||this.isDynamic!==o||this.list.children.length!==t;a&&this.cleanup();let l=this.build();if(At(l,this.cn("isDynamic"),!!o),a)for(let h=0;h<t;h++)l.append(this.createItem(h));let d,u=0;for(let h of[...l.children]){let m=u===this.instance.page;m&&(d=h),At(h,this.cn("isCurrent"),m),(e=h.children[0])===null||e===void 0||e.setAttribute("aria-selected",m?"true":"false");for(let p of["isBeforePrev","isPrev","isNext","isAfterNext"])le(h,this.cn(p));u++}if(d=d||l.firstChild,o&&d){let h=d.previousElementSibling,m=h&&h.previousElementSibling;Q(h,this.cn("isPrev")),Q(m,this.cn("isBeforePrev"));let p=d.nextElementSibling,g=p&&p.nextElementSibling;Q(p,this.cn("isNext")),Q(g,this.cn("isAfterNext"))}this.isDynamic=o}createItem(e=0){var t;let i=document.createElement("li");i.setAttribute("role","presentation");let s=St(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return i.appendChild(s),(t=i.children[0])===null||t===void 0||t.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,le(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(jr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:PE});var Rr="disabled",kr="next",Hh="prev",Wr=class extends Ke{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){let e=this.instance,t=e.pages.length,i=e.page;if(t<2)return void this.cleanup();this.build();let s=this.prev,r=this.next;s&&r&&(s.removeAttribute(Rr),r.removeAttribute(Rr),e.isInfinite||(i<=0&&s.setAttribute(Rr,""),i>=t-1&&r.setAttribute(Rr,"")))}addBtn(e){var t;let i=this.instance,s=document.createElement("button");s.setAttribute("tabindex","0"),s.setAttribute("title",i.localize(`{{${e.toUpperCase()}}}`)),Q(s,this.cn("button")+" "+this.cn(e===kr?"isNext":"isPrev"));let r=i.isRTL?e===kr?Hh:kr:e;var o;return s.innerHTML=i.localize(this.option(`${r}Tpl`)),s.dataset[`carousel${o=e,o?o.match("^[a-z]")?o.charAt(0).toUpperCase()+o.substring(1):o:""}`]="true",(t=this.container)===null||t===void 0||t.appendChild(s),s}build(){let e=this.instance.container,t=this.cn("container"),{container:i,prev:s,next:r}=this;i||(i=e.querySelector("."+t),this.isDom=!!i),i||(i=document.createElement("div"),Q(i,t),e.appendChild(i)),this.container=i,r||(r=i.querySelector("[data-carousel-next]")),r||(r=this.addBtn(kr)),this.next=r,s||(s=i.querySelector("[data-carousel-prev]")),s||(s=this.addBtn(Hh)),this.prev=s}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(Wr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});var qr=class extends Ke{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){let{nav:e,target:t}=this;e&&t&&(e.options.initialSlide=t.options.initialPage,e.state===Se.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),t.state===Se.Ready?this.onTargetReady(t):t.on("ready",this.onTargetReady))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,t,i){this.onNavTouch(e,e.panzoom,i)}onNavTouch(e,t,i){var s,r;if(Math.abs(t.dragOffset.x)>3||Math.abs(t.dragOffset.y)>3)return;let o=i.target,{nav:a,target:l}=this;if(!a||!l||!o)return;let d=o.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!d)return;let u=parseInt(d.dataset.index||"",10)||0,h=l.getPageForSlide(u),m=a.getPageForSlide(u);a.slideTo(m),l.slideTo(h,{friction:((r=(s=this.nav)===null||s===void 0?void 0:s.plugins)===null||r===void 0?void 0:r.Sync.option("friction"))||0}),this.markSelectedSlide(u)}onNavCreateSlide(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}onTargetChange(){var e,t;let{target:i,nav:s}=this;if(!i||!s||s.state!==Se.Ready||i.state!==Se.Ready)return;let r=(t=(e=i.pages[i.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index,o=s.getPageForSlide(r);this.markSelectedSlide(r),s.slideTo(o,s.prevPage===null&&i.prevPage===null?{friction:0}:void 0)}markSelectedSlide(e){let t=this.nav;t&&t.state===Se.Ready&&(this.selectedIndex=e,[...t.slides].map(i=>{i.el&&i.el.classList[i.index===e?"add":"remove"]("is-nav-selected")}))}attach(){let e=this,t=e.options.target,i=e.options.nav;t?e.addAsNavFor(t):i&&e.addAsTargetFor(i)}detach(){let e=this,t=e.nav,i=e.target;t&&(t.off("ready",e.onNavReady),t.off("createSlide",e.onNavCreateSlide),t.off("Panzoom.click",e.onNavClick),t.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,i&&(i.off("ready",e.onTargetReady),i.off("refresh",e.onTargetChange),i.off("change",e.onTargetChange)),e.target=null}};Object.defineProperty(qr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});var OE={Navigation:Wr,Dots:jr,Sync:qr},Dr="animationend",Vh="isSelected",Ir="slide",mn=class n extends ds{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===Se.Ready}get isInfinite(){let e=!1,{contentDim:t,viewportDim:i,pages:s,slides:r}=this,o=r[0];return s.length>=2&&o&&t+o.dim>=i&&(e=this.option("infinite")),e}get isRTL(){return this.option("direction")==="rtl"}get isHorizontal(){return this.option("axis")==="x"}constructor(e,t={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Se.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),typeof e=="string"&&(e=document.querySelector(e)),!e||!je(e))throw new Error("No Element found");this.container=e,this.slideNext=$h(this.slideNext.bind(this),150),this.slidePrev=$h(this.slidePrev.bind(this),150),this.userOptions=t,this.userPlugins=i,queueMicrotask(()=>{this.processOptions()})}processOptions(){var e,t;let i=We({},n.defaults,this.userOptions),s="",r=i.breakpoints;if(r&&sc(r))for(let[o,a]of Object.entries(r))window.matchMedia(o).matches&&sc(a)&&(s+=o,We(i,a));s===this.bp&&this.state!==Se.Init||(this.bp=s,this.state===Se.Ready&&(i.initialSlide=((t=(e=this.pages[this.page])===null||e===void 0?void 0:e.slides[0])===null||t===void 0?void 0:t.index)||0),this.state!==Se.Init&&this.destroy(),super.setOptions(i),this.option("enabled")===!1?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=Se.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},n.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=Se.Ready,this.emit("ready")}initLayout(){let{container:e}=this,t=this.option("classes");Q(e,this.cn("container")),At(e,t.isLTR,!this.isRTL),At(e,t.isRTL,this.isRTL),At(e,t.isVertical,!this.isHorizontal),At(e,t.isHorizontal,this.isHorizontal);let i=this.option("viewport")||e.querySelector(`.${t.viewport}`);i||(i=document.createElement("div"),Q(i,t.viewport),i.append(...zh(e,`.${t.slide}`)),e.prepend(i)),i.addEventListener("scroll",this.onScroll);let s=this.option("track")||e.querySelector(`.${t.track}`);s||(s=document.createElement("div"),Q(s,t.track),s.append(...Array.from(i.childNodes))),s.setAttribute("aria-live","polite"),i.contains(s)||i.prepend(s),this.viewport=i,this.track=s,this.emit("initLayout")}initSlides(){let{track:e}=this;if(!e)return;let t=[...this.slides],i=[];[...zh(e,`.${this.cn(Ir)}`)].forEach(s=>{if(je(s)){let r=jl({el:s,isDom:!0,index:this.slides.length});i.push(r)}});for(let s of[...this.option("slides",[])||[],...t])i.push(jl(s));this.slides=i;for(let s=0;s<this.slides.length;s++)this.slides[s].index=s;for(let s of i)this.emit("beforeInitSlide",s,s.index),this.emit("initSlide",s,s.index);this.emit("initSlides")}setInitialPage(){let e=this.option("initialSlide");this.page=typeof e=="number"?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){let{track:e,pages:t,isHorizontal:i}=this;if(!e||!t.length)return;let s=this.page;t[s]||(this.page=s=0);let r=(t[s].pos||0)*(this.isRTL&&i?1:-1),o=i?`${r}px`:"0",a=i?"0":`${r}px`;e.style.transform=`translate3d(${o}, ${a}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);let e=this.option("Panzoom")||{};this.panzoom=new xi(this.viewport,We({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:t=>!(this.pages.length<2&&!t.options.infinite),bounds:()=>this.getBounds(),maxVelocity:t=>Math.abs(t.target[this.axis]-t.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",(t,i,...s)=>{this.emit(`Panzoom.${i}`,t,...s)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){let e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let e=[],{contentDim:t,viewportDim:i}=this,s=this.option("slidesPerPage");s=(s==="auto"||t<=i)&&this.option("fill")!==!1?1/0:parseFloat(s+"");let r=0,o=0,a=0;for(let l of this.slides)(!e.length||o+l.dim-i>.05||a>=s)&&(e.push(ME()),r=e.length-1,o=0,a=0),e[r].slides.push(l),o+=l.dim+l.gap,a++;return e}processPages(){let e=this.pages,{contentDim:t,viewportDim:i,isInfinite:s}=this,r=this.option("center"),o=this.option("fill"),a=o&&r&&t>i&&!s;if(e.forEach((u,h)=>{var m;u.index=h,u.pos=((m=u.slides[0])===null||m===void 0?void 0:m.pos)||0,u.dim=0;for(let[p,g]of u.slides.entries())u.dim+=g.dim,p<u.slides.length-1&&(u.dim+=g.gap);a&&u.pos+.5*u.dim<.5*i?u.pos=0:a&&u.pos+.5*u.dim>=t-.5*i?u.pos=t-i:r&&(u.pos+=-.5*(i-u.dim))}),e.forEach(u=>{o&&!s&&t>i&&(u.pos=Math.max(u.pos,0),u.pos=Math.min(u.pos,t-i)),u.pos=X(u.pos,1e3),u.dim=X(u.dim,1e3),Math.abs(u.pos)<=.1&&(u.pos=0)}),s)return e;let l=[],d;return e.forEach(u=>{let h=Object.assign({},u);d&&h.pos===d.pos?(d.dim+=h.dim,d.slides=[...d.slides,...h.slides]):(h.index=l.length,d=h,l.push(h))}),l}getPageFromIndex(e=0){let t=this.pages.length,i;return e=parseInt((e||0).toString())||0,i=this.isInfinite?(e%t+t)%t:Math.max(Math.min(e,t-1),0),i}getSlideMetrics(e){var t,i;let s=this.isHorizontal?"width":"height",r=0,o=0,a=e.el,l=!(!a||a.parentNode);if(a?r=parseFloat(a.dataset[s]||"")||0:(a=document.createElement("div"),a.style.visibility="hidden",(this.track||document.body).prepend(a)),Q(a,this.cn(Ir)+" "+e.class+" "+e.customClass),r)a.style[s]=`${r}px`,a.style[s==="width"?"height":"width"]="";else{l&&(this.track||document.body).prepend(a),r=a.getBoundingClientRect()[s]*Math.max(1,((t=window.visualViewport)===null||t===void 0?void 0:t.scale)||1);let u=a[this.isHorizontal?"offsetWidth":"offsetHeight"];u-1>r&&(r=u)}let d=getComputedStyle(a);return d.boxSizing==="content-box"&&(this.isHorizontal?(r+=parseFloat(d.paddingLeft)||0,r+=parseFloat(d.paddingRight)||0):(r+=parseFloat(d.paddingTop)||0,r+=parseFloat(d.paddingBottom)||0)),o=parseFloat(d[this.isHorizontal?"marginRight":"marginBottom"])||0,l?(i=a.parentElement)===null||i===void 0||i.removeChild(a):e.el||a.remove(),{dim:X(r,1e3),gap:X(o,1e3)}}getBounds(){let{isInfinite:e,isRTL:t,isHorizontal:i,pages:s}=this,r={min:0,max:0};if(e)r={min:-1/0,max:1/0};else if(s.length){let o=s[0].pos,a=s[s.length-1].pos;r=t&&i?{min:o,max:a}:{min:-1*a,max:-1*o}}return{x:i?r:{min:0,max:0},y:i?{min:0,max:0}:r}}repositionSlides(){let e,{isHorizontal:t,isRTL:i,isInfinite:s,viewport:r,viewportDim:o,contentDim:a,page:l,pages:d,slides:u,panzoom:h}=this,m=0,p=0,g=0,v=0;h?v=-1*h.current[this.axis]:d[l]&&(v=d[l].pos||0),e=t?i?"right":"left":"top",i&&t&&(v*=-1);for(let O of u){let R=O.el;R?(e==="top"?(R.style.right="",R.style.left=""):R.style.top="",O.index!==m?R.style[e]=p===0?"":`${X(p,1e3)}px`:R.style[e]="",g+=O.dim+O.gap,m++):p+=O.dim+O.gap}if(s&&g&&r){let O=getComputedStyle(r),R="padding",D=t?"Right":"Bottom",H=parseFloat(O[R+(t?"Left":"Top")]);v-=H,o+=H,o+=parseFloat(O[R+D]);for(let q of u)q.el&&(X(q.pos)<X(o)&&X(q.pos+q.dim+q.gap)<X(v)&&X(v)>X(a-o)&&(q.el.style[e]=`${X(p+g,1e3)}px`),X(q.pos+q.gap)>=X(a-o)&&X(q.pos)>X(v+o)&&X(v)<X(o)&&(q.el.style[e]=`-${X(g,1e3)}px`))}let w,y,P=[...this.inTransition];if(P.length>1&&(w=d[P[0]],y=d[P[1]]),w&&y){let O=0;for(let R of u)R.el?this.inTransition.has(R.index)&&w.slides.indexOf(R)<0&&(R.el.style[e]=`${X(O+(w.pos-y.pos),1e3)}px`):O+=R.dim+R.gap}}createSlideEl(e){let{track:t,slides:i}=this;if(!t||!e||e.el&&e.el.parentNode)return;let s=e.el||document.createElement("div");Q(s,this.cn(Ir)),Q(s,e.class),Q(s,e.customClass);let r=e.html;r&&(r instanceof HTMLElement?s.appendChild(r):s.innerHTML=e.html+"");let o=[];i.forEach((u,h)=>{u.el&&o.push(h)});let a=e.index,l=null;o.length&&(l=i[o.reduce((u,h)=>Math.abs(h-a)<Math.abs(u-a)?h:u)]);let d=l&&l.el&&l.el.parentNode?l.index<e.index?l.el.nextSibling:l.el:null;t.insertBefore(s,t.contains(d)?d:null),e.el=s,this.emit("createSlide",e)}removeSlideEl(e,t=!1){let i=e?.el;if(!i||!i.parentNode)return;let s=this.cn(Vh);if(i.classList.contains(s)&&(le(i,s),this.emit("unselectSlide",e)),e.isDom&&!t)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",e);let r=new CustomEvent(Dr);i.dispatchEvent(r),e.el&&(e.el.remove(),e.el=null)}transitionTo(e=0,t=this.option("transition")){var i,s,r,o;if(!t)return!1;let a=this.page,{pages:l,panzoom:d}=this;e=parseInt((e||0).toString())||0;let u=this.getPageFromIndex(e);if(!d||!l[u]||l.length<2||Math.abs((((s=(i=l[a])===null||i===void 0?void 0:i.slides[0])===null||s===void 0?void 0:s.dim)||0)-this.viewportDim)>1)return!1;let h=e>a?1:-1;this.isInfinite&&(a===0&&e===l.length-1&&(h=-1),a===l.length-1&&e===0&&(h=1));let m=l[u].pos*(this.isRTL?1:-1);if(a===u&&Math.abs(m-d.target[this.axis])<1)return!1;this.clearTransitions();let p=d.isResting;Q(this.container,this.cn("inTransition"));let g=((r=l[a])===null||r===void 0?void 0:r.slides[0])||null,v=((o=l[u])===null||o===void 0?void 0:o.slides[0])||null;this.inTransition.add(v.index),this.createSlideEl(v);let w=g.el,y=v.el;p||t===Ir||(t="fadeFast",w=null);let P=this.isRTL?"next":"prev",O=this.isRTL?"prev":"next";return w&&(this.inTransition.add(g.index),g.transition=t,w.addEventListener(Dr,this.onAnimationEnd),w.classList.add(`f-${t}Out`,`to-${h>0?O:P}`)),y&&(v.transition=t,y.addEventListener(Dr,this.onAnimationEnd),y.classList.add(`f-${t}In`,`from-${h>0?P:O}`)),d.current[this.axis]=m,d.target[this.axis]=m,d.requestTick(),this.onChange(u),!0}manageSlideVisiblity(){let e=new Set,t=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(let s of this.slides)i.has(s)?e.add(s):t.add(s);for(let s of this.inTransition)e.add(this.slides[s]);for(let s of e)this.createSlideEl(s),this.lazyLoadSlide(s);for(let s of t)e.has(s)||this.removeSlideEl(s);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;let e="aria-hidden",t=this.cn(Vh);if(t)for(let i of this.slides){let s=i.el;s&&(s.dataset.index=`${i.index}`,s.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?s.removeAttribute(e):s.setAttribute(e,"true"):this.pages[this.page].slides.includes(i)?(s.classList.contains(t)||(Q(s,t),this.emit("selectSlide",i)),s.removeAttribute(e)):(s.classList.contains(t)&&(le(s,t),this.emit("unselectSlide",i)),s.setAttribute(e,"true")))}}flipInfiniteTrack(){let{axis:e,isHorizontal:t,isInfinite:i,isRTL:s,viewportDim:r,contentDim:o}=this,a=this.panzoom;if(!a||!i)return;let l=a.current[e],d=a.target[e]-l,u=0,h=.5*r;s&&t?(l<-h&&(u=-1,l+=o),l>o-h&&(u=1,l-=o)):(l>h&&(u=1,l-=o),l<-o+h&&(u=-1,l+=o)),u&&(a.current[e]=l,a.target[e]=l+d)}lazyLoadImg(e,t){let i=this,s="f-fadeIn",r="is-preloading",o=!1,a=null,l=()=>{o||(o=!0,a&&(a.remove(),a=null),le(t,r),t.complete&&(Q(t,s),setTimeout(()=>{le(t,s)},350)),this.option("adaptiveHeight")&&e.el&&this.pages[this.page].slides.indexOf(e)>-1&&(i.updateMetrics(),i.setViewportHeight()),this.emit("load",e))};Q(t,r),t.src=t.dataset.lazySrcset||t.dataset.lazySrc||"",delete t.dataset.lazySrc,delete t.dataset.lazySrcset,t.addEventListener("error",()=>{l()}),t.addEventListener("load",()=>{l()}),setTimeout(()=>{let d=t.parentNode;d&&e.el&&(t.complete?l():o||(a=St(ac),d.insertBefore(a,t)))},300)}lazyLoadSlide(e){let t=e&&e.el;if(!t)return;let i=new Set,s=Array.from(t.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));t.dataset.lazySrc&&s.push(t),s.map(r=>{r instanceof HTMLImageElement?i.add(r):r instanceof HTMLElement&&r.dataset.lazySrc&&(r.style.backgroundImage=`url('${r.dataset.lazySrc}')`,delete r.dataset.lazySrc)});for(let r of i)this.lazyLoadImg(e,r)}onAnimationEnd(e){var t;let i=e.target,s=i?parseInt(i.dataset.index||"",10)||0:-1,r=this.slides[s],o=e.animationName;if(!i||!r||!o)return;let a=!!this.inTransition.has(s)&&r.transition;a&&o.substring(0,a.length+2)===`f-${a}`&&this.inTransition.delete(s),this.inTransition.size||this.clearTransitions(),s===this.page&&(!((t=this.panzoom)===null||t===void 0)&&t.isResting)&&this.emit("settle")}onDecel(e,t=0,i=0,s=0,r=0){if(this.option("dragFree"))return void this.setPageFromPosition();let{isRTL:o,isHorizontal:a,axis:l,pages:d}=this,u=d.length,h=Math.abs(Math.atan2(i,t)/(Math.PI/180)),m=0;if(m=h>45&&h<135?a?0:i:a?t:0,!u)return;let p=this.page,g=o&&a?1:-1,v=e.current[l]*g,{pageIndex:w}=this.getPageFromPosition(v);Math.abs(m)>5?(d[p].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(p=w),p=o&&a?m<0?p-1:p+1:m<0?p+1:p-1):p=s===0&&r===0?p:w,this.slideTo(p,{transition:!1,friction:e.option("decelFriction")})}onClick(e){let t=e.target,i=t&&je(t)?t.dataset:null,s,r;i&&(i.carouselPage!==void 0?(r="slideTo",s=i.carouselPage):i.carouselNext!==void 0?r="slideNext":i.carouselPrev!==void 0&&(r="slidePrev")),r?(e.preventDefault(),e.stopPropagation(),t&&!t.hasAttribute("disabled")&&this[r](s)):this.emit("click",e)}onSlideTo(e){let t=e.detail||0;this.slideTo(this.getPageForSlide(t),{friction:0})}onChange(e,t=0){let i=this.page;this.prevPage=i,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==i&&(this.markSelectedSlides(),this.emit("change",e,i,t))}onRefresh(){let e=this.contentDim,t=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===t||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var e;(e=this.viewport)===null||e===void 0||e.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,t=null){this.destroy(),this.state=Se.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=t||this.userPlugins,this.processOptions()}slideTo(e=0,{friction:t=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===Se.Destroy)return;e=parseInt((e||0).toString())||0;let s=this.getPageFromIndex(e),{axis:r,isHorizontal:o,isRTL:a,pages:l,panzoom:d}=this,u=l.length,h=a&&o?1:-1;if(!d||!u)return;if(this.page!==s){let p=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",p,e),p.defaultPrevented)return}if(this.transitionTo(e,i))return;let m=l[s].pos;if(this.isInfinite){let p=this.contentDim,g=d.target[r]*h;u===2?m+=p*Math.floor(parseFloat(e+"")/2):m=[m,m-p,m+p].reduce(function(v,w){return Math.abs(w-g)<Math.abs(v-g)?w:v})}m*=h,Math.abs(d.target[r]-m)<1||(d.panTo({x:o?m:0,y:o?0:m,friction:t}),this.onChange(s))}slideToClosest(e){if(this.panzoom){let{pageIndex:t}=this.getPageFromPosition();this.slideTo(t,e)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),le(this.container,this.cn("inTransition"));let e=["to-prev","to-next","from-prev","from-next"];for(let t of this.slides){let i=t.el;if(i){i.removeEventListener(Dr,this.onAnimationEnd),i.classList.remove(...e);let s=t.transition;s&&i.classList.remove(`f-${s}Out`,`f-${s}In`)}}this.manageSlideVisiblity()}addSlide(e,t){var i,s,r,o;let a=this.panzoom,l=((i=this.pages[this.page])===null||i===void 0?void 0:i.pos)||0,d=((s=this.pages[this.page])===null||s===void 0?void 0:s.dim)||0,u=this.contentDim<this.viewportDim,h=Array.isArray(t)?t:[t],m=[];for(let p of h)m.push(jl(p));this.slides.splice(e,0,...m);for(let p=0;p<this.slides.length;p++)this.slides[p].index=p;for(let p of m)this.emit("beforeInitSlide",p,p.index);if(this.page>=e&&(this.page+=m.length),this.updateMetrics(),a){let p=((r=this.pages[this.page])===null||r===void 0?void 0:r.pos)||0,g=((o=this.pages[this.page])===null||o===void 0?void 0:o.dim)||0,v=this.pages.length||1,w=this.isRTL?d-g:g-d,y=this.isRTL?l-p:p-l;u&&v===1?(e<=this.page&&(a.current[this.axis]-=w,a.target[this.axis]-=w),a.panTo({[this.isHorizontal?"x":"y"]:-1*p})):y&&e<=this.page&&(a.target[this.axis]-=y,a.current[this.axis]-=y,a.requestTick())}for(let p of m)this.emit("initSlide",p,p.index)}prependSlide(e){this.addSlide(0,e)}appendSlide(e){this.addSlide(this.slides.length,e)}removeSlide(e){let t=this.slides.length;e=(e%t+t)%t;let i=this.slides[e];if(i){this.removeSlideEl(i,!0),this.slides.splice(e,1);for(let s=0;s<this.slides.length;s++)this.slides[s].index=s;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",i)}}updateMetrics(){let{panzoom:e,viewport:t,track:i,slides:s,isHorizontal:r,isInfinite:o}=this;if(!i)return;let a=r?"width":"height",l=r?"offsetWidth":"offsetHeight";if(t){let h=Math.max(t[l],X(t.getBoundingClientRect()[a],1e3)),m=getComputedStyle(t),p="padding",g=r?"Right":"Bottom";h-=parseFloat(m[p+(r?"Left":"Top")])+parseFloat(m[p+g]),this.viewportDim=h}let d,u=0;for(let[h,m]of s.entries()){let p=0,g=0;!m.el&&d?(p=d.dim,g=d.gap):({dim:p,gap:g}=this.getSlideMetrics(m),d=m),p=X(p,1e3),g=X(g,1e3),m.dim=p,m.gap=g,m.pos=u,u+=p,(o||h<s.length-1)&&(u+=g)}u=X(u,1e3),this.contentDim=u,e&&(e.contentRect[a]=u,e.contentRect[r?"fullWidth":"fullHeight"]=u),this.pages=this.createPages(),this.pages=this.processPages(),this.state===Se.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,t=!1,i=!1){e===void 0&&(e=this.page);let s=this,r=s.panzoom,o=s.contentDim,a=s.pages[e]||0;if(!a||!r)return e>this.page?-1:1;let l=-1*r.current.e,d=X((l-a.pos)/(1*a.dim),1e3),u=d,h=d;this.isInfinite&&i!==!0&&(u=X((l-a.pos+o)/(1*a.dim),1e3),h=X((l-a.pos-o)/(1*a.dim),1e3));let m=[d,u,h].reduce(function(p,g){return Math.abs(g)<Math.abs(p)?g:p});return t?m:m>1?1:m<-1?-1:m}setViewportHeight(){let{page:e,pages:t,viewport:i,isHorizontal:s}=this;if(!i||!t[e])return;let r=0;s&&this.track&&(this.track.style.height="auto",t[e].slides.forEach(o=>{o.el&&(r=Math.max(r,o.el.offsetHeight))})),i.style.height=r?`${r}px`:""}getPageForSlide(e){for(let t of this.pages)for(let i of t.slides)if(i.index===e)return t.index;return-1}getVisibleSlides(e=0){var t;let i=new Set,{panzoom:s,contentDim:r,viewportDim:o,pages:a,page:l}=this;if(o){r=r+((t=this.slides[this.slides.length-1])===null||t===void 0?void 0:t.gap)||0;let d=0;d=s&&s.state!==ce.Init&&s.state!==ce.Destroy?-1*s.current[this.axis]:a[l]&&a[l].pos||0,this.isInfinite&&(d-=Math.floor(d/r)*r),this.isRTL&&this.isHorizontal&&(d*=-1);let u=d-o*e,h=d+o*(e+1),m=this.isInfinite?[-1,0,1]:[0];for(let p of this.slides)for(let g of m){let v=p.pos+g*r,w=v+p.dim+p.gap;v<h&&w>u&&i.add(p)}}return i}getPageFromPosition(e){let{viewportDim:t,contentDim:i,slides:s,pages:r,panzoom:o}=this,a=r.length,l=s.length,d=s[0],u=s[l-1],h=this.option("center"),m=0,p=0,g=0,v=e===void 0?-1*(o?.target[this.axis]||0):e;h&&(v+=.5*t),this.isInfinite?(v<d.pos-.5*u.gap&&(v-=i,g=-1),v>u.pos+u.dim+.5*u.gap&&(v-=i,g=1)):v=Math.max(d.pos||0,Math.min(v,u.pos));let w=u,y=s.find(P=>{let O=P.pos-.5*w.gap,R=P.pos+P.dim+.5*P.gap;return w=P,v>=O&&v<R});return y||(y=u),p=this.getPageForSlide(y.index),m=p+g*a,{page:m,pageIndex:p}}setPageFromPosition(){let{pageIndex:e}=this.getPageFromPosition();this.onChange(e)}destroy(){if([Se.Destroy].includes(this.state))return;this.state=Se.Destroy;let{container:e,viewport:t,track:i,slides:s,panzoom:r}=this,o=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),r&&(r.destroy(),this.panzoom=null),s&&s.forEach(l=>{this.removeSlideEl(l)}),this.detachPlugins(),t&&(t.removeEventListener("scroll",this.onScroll),t.offsetParent&&i&&i.offsetParent&&t.replaceWith(...i.childNodes));for(let[l,d]of Object.entries(o))l!=="container"&&d&&e.classList.remove(d);this.track=null,this.viewport=null,this.page=0,this.slides=[];let a=this.events.get("ready");this.events=new Map,a&&this.events.set("ready",a)}};Object.defineProperty(mn,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:xi}),Object.defineProperty(mn,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:LE}),Object.defineProperty(mn,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:OE});var uf=function(n){if(!je(n))return 0;let e=window.scrollY,t=window.innerHeight,i=e+t,s=n.getBoundingClientRect(),r=s.y+e,o=s.height,a=r+o;if(e>a||i<r)return 0;if(e<r&&i>a||r<e&&a>i)return 100;let l=o;r<e&&(l-=e-r),a>i&&(l-=a-i);let d=l/t*100;return Math.round(d)},cs=!(typeof window>"u"||!window.document||!window.document.createElement),Wl,ql=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),jh=n=>{if(n&&cs){Wl===void 0&&document.createElement("div").focus({get preventScroll(){return Wl=!0,!1}});try{if(Wl)n.focus({preventScroll:!0});else{let e=window.scrollY||document.body.scrollTop,t=window.scrollX||document.body.scrollLeft;n.focus(),document.body.scrollTo({top:e,left:t,behavior:"auto"})}}catch{}}},hf=()=>{let n=document,e,t="",i="",s="";return n.fullscreenEnabled?(t="requestFullscreen",i="exitFullscreen",s="fullscreenElement"):n.webkitFullscreenEnabled&&(t="webkitRequestFullscreen",i="webkitExitFullscreen",s="webkitFullscreenElement"),t&&(e={request:function(r=n.documentElement){return t==="webkitRequestFullscreen"?r[t](Element.ALLOW_KEYBOARD_INPUT):r[t]()},exit:function(){return n[s]&&n[i]()},isFullscreen:function(){return n[s]}}),e},rc={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},df),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:`<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">
    <div class="fancybox__backdrop"></div>
    <div class="fancybox__carousel"></div>
    <div class="fancybox__footer"></div>
  </div>`},trapFocus:!0,wheel:"zoom"},Pe,Ie;(function(n){n[n.Init=0]="Init",n[n.Ready=1]="Ready",n[n.Closing=2]="Closing",n[n.CustomClosing=3]="CustomClosing",n[n.Destroy=4]="Destroy"})(Pe||(Pe={})),function(n){n[n.Loading=0]="Loading",n[n.Opening=1]="Opening",n[n.Ready=2]="Ready",n[n.Closing=3]="Closing"}(Ie||(Ie={}));var Wh="",ls=!1,Nr=!1,Ai=null,ff=()=>{let n="",e="",t=ut.getInstance();if(t){let i=t.carousel,s=t.getSlide();if(i&&s){let r=s.slug||void 0,o=s.triggerEl||void 0;e=r||t.option("slug")||"",!e&&o&&o.dataset&&(e=o.dataset.fancybox||""),e&&e!=="true"&&(n="#"+e+(!r&&i.slides.length>1?"-"+(s.index+1):""))}}return{hash:n,slug:e,index:1}},Ur=()=>{let n=new URL(document.URL).hash,e=n.slice(1).split("-"),t=e[e.length-1],i=t&&/^\+?\d+$/.test(t)&&parseInt(e.pop()||"1",10)||1;return{hash:n,slug:e.join("-"),index:i}},pf=()=>{let{slug:n,index:e}=Ur();if(!n)return;let t=document.querySelector(`[data-slug="${n}"]`);if(t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),ut.getInstance())return;let i=document.querySelectorAll(`[data-fancybox="${n}"]`);i.length&&(t=i[e-1],t&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},mf=()=>{if(ut.defaults.Hash===!1)return;let n=ut.getInstance();if(n?.options.Hash===!1)return;let{slug:e,index:t}=Ur(),{slug:i}=ff();n&&(e===i?n.jumpTo(t-1):(ls=!0,n.close())),pf()},gf=()=>{Ai&&clearTimeout(Ai),queueMicrotask(()=>{mf()})},qh=()=>{window.addEventListener("hashchange",gf,!1),setTimeout(()=>{mf()},500)};cs&&(/complete|interactive|loaded/.test(document.readyState)?qh():document.addEventListener("DOMContentLoaded",qh));var Fr="is-zooming-in",Yr=class extends Ke{onCreateSlide(e,t,i){let s=this.instance.optionFor(i,"src")||"";i.el&&i.type==="image"&&typeof s=="string"&&this.setImage(i,s)}onRemoveSlide(e,t,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(e,t,i,s){le(this.instance.container,Fr);for(let r of t.slides){let o=r.panzoom;o&&r.index!==i&&o.reset(.35)}}onClose(){var e;let t=this.instance,i=t.container,s=t.getSlide();if(!i||!i.parentElement||!s)return;let{el:r,contentEl:o,panzoom:a,thumbElSrc:l}=s;if(!r||!l||!o||!a||a.isContentLoading||a.state===ce.Init||a.state===ce.Destroy)return;a.updateMetrics();let d=this.getZoomInfo(s);if(!d)return;this.instance.state=Pe.CustomClosing,i.classList.remove(Fr),i.classList.add("is-zooming-out"),o.style.backgroundImage=`url('${l}')`;let u=i.getBoundingClientRect();(((e=window.visualViewport)===null||e===void 0?void 0:e.scale)||1)===1&&Object.assign(i.style,{position:"absolute",top:`${i.offsetTop+window.scrollY}px`,left:`${i.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${u.width}px`,height:`${u.height}px`,overflow:"hidden"});let{x:h,y:m,scale:p,opacity:g}=d;if(g){let v=((w,y,P,O)=>{let R=y-w,D=O-P;return H=>P+((H-w)/R*D||0)})(a.scale,p,1,0);a.on("afterTransform",()=>{o.style.opacity=v(a.scale)+""})}a.on("endAnimation",()=>{t.destroy()}),a.target.a=p,a.target.b=0,a.target.c=0,a.target.d=p,a.panTo({x:h,y:m,scale:p,friction:g?.2:.33,ignoreBounds:!0}),a.isResting&&t.destroy()}setImage(e,t){let i=this.instance;e.src=t,this.process(e,t).then(s=>{let{contentEl:r,imageEl:o,thumbElSrc:a,el:l}=e;if(i.isClosing()||!r||!o)return;r.offsetHeight;let d=!!i.isOpeningSlide(e)&&this.getZoomInfo(e);if(this.option("protected")&&l){l.addEventListener("contextmenu",m=>{m.preventDefault()});let h=document.createElement("div");Q(h,"fancybox-protected"),r.appendChild(h)}if(a&&d){let h=s.contentRect,m=Math.max(h.fullWidth,h.fullHeight),p=null;!d.opacity&&m>1200&&(p=document.createElement("img"),Q(p,"fancybox-ghost"),p.src=a,r.appendChild(p));let g=()=>{p&&(Q(p,"f-fadeFastOut"),setTimeout(()=>{p&&(p.remove(),p=null)},200))};(u=a,new Promise((v,w)=>{let y=new Image;y.onload=v,y.onerror=w,y.src=u})).then(()=>{i.hideLoading(e),e.state=Ie.Opening,this.instance.emit("reveal",e),this.zoomIn(e).then(()=>{g(),this.instance.done(e)},()=>{}),p&&setTimeout(()=>{g()},m>2500?800:200)},()=>{i.hideLoading(e),i.revealContent(e)})}else{let h=this.optionFor(e,"initialSize"),m=this.optionFor(e,"zoom"),p={event:i.prevMouseMoveEvent||i.options.event,friction:m?.12:0},g=i.optionFor(e,"showClass")||void 0,v=!0;i.isOpeningSlide(e)&&(h==="full"?s.zoomToFull(p):h==="cover"?s.zoomToCover(p):h==="max"?s.zoomToMax(p):v=!1,s.stop("current")),v&&g&&(g=s.isDragging?"f-fadeIn":""),i.hideLoading(e),i.revealContent(e,g)}var u},()=>{i.setError(e,"{{IMAGE_ERROR}}")})}process(e,t){return new Promise((i,s)=>{var r;let o=this.instance,a=e.el;o.clearContent(e),o.showLoading(e);let l=this.optionFor(e,"content");if(typeof l=="string"&&(l=St(l)),!l||!je(l)){if(l=document.createElement("img"),l instanceof HTMLImageElement){let d="",u=e.caption;d=typeof u=="string"&&u?u.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${e.index+1} of ${((r=o.carousel)===null||r===void 0?void 0:r.pages.length)||1}`,l.src=t||"",l.alt=d,l.draggable=!1,e.srcset&&l.setAttribute("srcset",e.srcset),this.instance.isOpeningSlide(e)&&(l.fetchPriority="high")}e.sizes&&l.setAttribute("sizes",e.sizes)}Q(l,"fancybox-image"),e.imageEl=l,o.setContent(e,l,!1),e.panzoom=new xi(a,We({transformParent:!0},this.option("Panzoom")||{},{content:l,width:(d,u)=>o.optionFor(e,"width","auto",u)||"auto",height:(d,u)=>o.optionFor(e,"height","auto",u)||"auto",wheel:()=>{let d=o.option("wheel");return(d==="zoom"||d=="pan")&&d},click:(d,u)=>{var h,m;if(o.isCompact||o.isClosing()||e.index!==((h=o.getSlide())===null||h===void 0?void 0:h.index))return!1;if(u){let g=u.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(g.nodeName))return!1}let p=!u||u.target&&((m=e.contentEl)===null||m===void 0?void 0:m.contains(u.target));return o.option(p?"contentClick":"backdropClick")||!1},dblClick:()=>o.isCompact?"toggleZoom":o.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:d=>{i(d)},error:()=>{s()},destroy:()=>{s()}}}))})}zoomIn(e){return new Promise((t,i)=>{let s=this.instance,r=s.container,{panzoom:o,contentEl:a,el:l}=e;o&&o.updateMetrics();let d=this.getZoomInfo(e);if(!(d&&l&&a&&o&&r))return void i();let{x:u,y:h,scale:m,opacity:p}=d,g=()=>{e.state!==Ie.Closing&&(p&&(a.style.opacity=Math.max(Math.min(1,1-(1-o.scale)/(1-m)),0)+""),o.scale>=1&&o.scale>o.targetScale-.1&&t(o))},v=P=>{(P.scale<.99||P.scale>1.01)&&!P.isDragging||(le(r,Fr),a.style.opacity="",P.off("endAnimation",v),P.off("touchStart",v),P.off("afterTransform",g),t(P))};o.on("endAnimation",v),o.on("touchStart",v),o.on("afterTransform",g),o.on(["error","destroy"],()=>{i()}),o.panTo({x:u,y:h,scale:m,friction:0,ignoreBounds:!0}),o.stop("current");let w={event:o.panMode==="mousemove"?s.prevMouseMoveEvent||s.options.event:void 0},y=this.optionFor(e,"initialSize");Q(r,Fr),s.hideLoading(e),y==="full"?o.zoomToFull(w):y==="cover"?o.zoomToCover(w):y==="max"?o.zoomToMax(w):o.reset(.172)})}getZoomInfo(e){let{el:t,imageEl:i,thumbEl:s,panzoom:r}=e,o=this.instance,a=o.container;if(!t||!i||!s||!r||uf(s)<3||!this.optionFor(e,"zoom")||!a||o.state===Pe.Destroy||getComputedStyle(a).getPropertyValue("--f-images-zoom")==="0")return!1;let l=window.visualViewport||null;if((l?l.scale:1)!==1)return!1;let{top:d,left:u,width:h,height:m}=s.getBoundingClientRect(),{top:p,left:g,fitWidth:v,fitHeight:w}=r.contentRect;if(!(h&&m&&v&&w))return!1;let y=r.container.getBoundingClientRect();g+=y.left,p+=y.top;let P=-1*(g+.5*v-(u+.5*h)),O=-1*(p+.5*w-(d+.5*m)),R=h/v,D=this.option("zoomOpacity")||!1;return D==="auto"&&(D=Math.abs(h/m-v/w)>.1),{x:P,y:O,scale:R,opacity:D}}attach(){let e=this,t=e.instance;t.on("Carousel.change",e.onChange),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("close",e.onClose)}detach(){let e=this,t=e.instance;t.off("Carousel.change",e.onChange),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("close",e.onClose)}};Object.defineProperty(Yr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),typeof SuppressedError=="function"&&SuppressedError;var Ul="html",Uh="image",Yl="map",Rt="youtube",Ei="vimeo",os="html5video",Yh=(n,e={})=>{let t=new URL(n),i=new URLSearchParams(t.search),s=new URLSearchParams;for(let[a,l]of[...i,...Object.entries(e)]){let d=l+"";if(a==="t"){let u=d.match(/((\d*)m)?(\d*)s?/);u&&s.set("start",60*parseInt(u[2]||"0")+parseInt(u[3]||"0")+"")}else s.set(a,d)}let r=s+"",o=n.match(/#t=((.*)?\d+s)/);return o&&(r+=`#t=${o[1]}`),r},_E={ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:`<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">
  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn't support embedded videos.</video>`,videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}},RE=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"],Gr=class extends Ke{onBeforeInitSlide(e,t,i){this.processType(i)}onCreateSlide(e,t,i){this.setContent(i)}onClearContent(e,t){t.xhr&&(t.xhr.abort(),t.xhr=null);let i=t.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",t.iframeEl=null);let s=t.contentEl,r=t.placeholderEl;if(t.type==="inline"&&s&&r)s.classList.remove("fancybox__content"),getComputedStyle(s).getPropertyValue("display")!=="none"&&(s.style.display="none"),setTimeout(()=>{r&&(s&&r.parentNode&&r.parentNode.insertBefore(s,r),r.remove())},0),t.contentEl=void 0,t.placeholderEl=void 0;else for(;t.el&&t.el.firstChild;)t.el.removeChild(t.el.firstChild)}onSelectSlide(e,t,i){i.state===Ie.Ready&&this.playVideo()}onUnselectSlide(e,t,i){var s,r;if(i.type===os){try{(r=(s=i.el)===null||s===void 0?void 0:s.querySelector("video"))===null||r===void 0||r.pause()}catch{}return}let o;i.type===Ei?o={method:"pause",value:"true"}:i.type===Rt&&(o={event:"command",func:"pauseVideo"}),o&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(o),"*"),i.poller&&clearTimeout(i.poller)}onDone(e,t){e.isCurrentSlide(t)&&!e.isClosing()&&this.playVideo()}onRefresh(e,t){t.slides.forEach(i=>{i.el&&(this.resizeIframe(i),this.setAspectRatio(i))})}onMessage(e){try{let t=JSON.parse(e.data);if(e.origin==="https://player.vimeo.com"){if(t.event==="ready")for(let i of Array.from(document.getElementsByClassName("fancybox__iframe")))i instanceof HTMLIFrameElement&&i.contentWindow===e.source&&(i.dataset.ready="true")}else if(e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&t.event==="onReady"){let i=document.getElementById(t.id);i&&(i.dataset.ready="true")}}catch{}}loadAjaxContent(e){let t=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);let i=this.instance,s=new XMLHttpRequest;i.showLoading(e),s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&i.state===Pe.Ready&&(i.hideLoading(e),s.status===200?i.setContent(e,s.responseText):i.setError(e,s.status===404?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};let r=e.ajax||null;s.open(r?"POST":"GET",t+""),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(r),e.xhr=s}setInlineContent(e){let t=null;if(je(e.src))t=e.src;else if(typeof e.src=="string"){let i=e.src.split("#",2).pop();t=i?document.getElementById(i):null}if(t){if(e.type==="clone"||t.closest(".fancybox__slide")){t=t.cloneNode(!0);let i=t.dataset.animationName;i&&(t.classList.remove(i),delete t.dataset.animationName);let s=t.getAttribute("id");s=s?`${s}--clone`:`clone-${this.instance.id}-${e.index}`,t.setAttribute("id",s)}else if(t.parentNode){let i=document.createElement("div");i.classList.add("fancybox-placeholder"),t.parentNode.insertBefore(i,t),e.placeholderEl=i}this.instance.setContent(e,t)}else this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(e){let{src:t,el:i}=e;if(!t||typeof t!="string"||!i)return;i.classList.add("is-loading");let s=this.instance,r=document.createElement("iframe");r.className="fancybox__iframe",r.setAttribute("id",`fancybox__iframe_${s.id}_${e.index}`);for(let[a,l]of Object.entries(this.optionFor(e,"iframeAttr")||{}))r.setAttribute(a,l);r.onerror=()=>{s.setError(e,"{{IFRAME_ERROR}}")},e.iframeEl=r;let o=this.optionFor(e,"preload");if(e.type!=="iframe"||o===!1)return r.setAttribute("src",e.src+""),s.setContent(e,r,!1),this.resizeIframe(e),void s.revealContent(e);s.showLoading(e),r.onload=()=>{if(!r.src.length)return;let a=r.dataset.ready!=="true";r.dataset.ready="true",this.resizeIframe(e),a?s.revealContent(e):s.hideLoading(e)},r.setAttribute("src",t),s.setContent(e,r,!1)}resizeIframe(e){let{type:t,iframeEl:i}=e;if(t===Rt||t===Ei)return;let s=i?.parentElement;if(!i||!s)return;let r=e.autoSize;r===void 0&&(r=this.optionFor(e,"autoSize"));let o=e.width||0,a=e.height||0;o&&a&&(r=!1);let l=s&&s.style;if(e.preload!==!1&&r!==!1&&l)try{let d=window.getComputedStyle(s),u=parseFloat(d.paddingLeft)+parseFloat(d.paddingRight),h=parseFloat(d.paddingTop)+parseFloat(d.paddingBottom),m=i.contentWindow;if(m){let p=m.document,g=p.getElementsByTagName(Ul)[0],v=p.body;l.width="",v.style.overflow="hidden",o=o||g.scrollWidth+u,l.width=`${o}px`,v.style.overflow="",l.flex="0 0 auto",l.height=`${v.scrollHeight}px`,a=g.scrollHeight+h}}catch{}if(o||a){let d={flex:"0 1 auto",width:"",height:""};o&&o!=="auto"&&(d.width=`${o}px`),a&&a!=="auto"&&(d.height=`${a}px`),Object.assign(l,d)}}playVideo(){let e=this.instance.getSlide();if(!e)return;let{el:t}=e;if(!t||!t.offsetParent||!this.optionFor(e,"videoAutoplay"))return;if(e.type===os)try{let s=t.querySelector("video");if(s){let r=s.play();r!==void 0&&r.then(()=>{}).catch(o=>{s.muted=!0,s.play()})}}catch{}if(e.type!==Rt&&e.type!==Ei)return;let i=()=>{if(e.iframeEl&&e.iframeEl.contentWindow){let s;if(e.iframeEl.dataset.ready==="true")return s=e.type===Rt?{event:"command",func:"playVideo"}:{method:"play",value:"true"},s&&e.iframeEl.contentWindow.postMessage(JSON.stringify(s),"*"),void(e.poller=void 0);e.type===Rt&&(s={event:"listening",id:e.iframeEl.getAttribute("id")},e.iframeEl.contentWindow.postMessage(JSON.stringify(s),"*"))}e.poller=setTimeout(i,250)};i()}processType(e){if(e.html)return e.type=Ul,e.src=e.html,void(e.html="");let t=this.instance.optionFor(e,"src","");if(!t||typeof t!="string")return;let i=e.type,s=null;if(s=t.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){let r=this.optionFor(e,Rt),{nocookie:o}=r,a=function(h,m){var p={};for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&m.indexOf(g)<0&&(p[g]=h[g]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var v=0;for(g=Object.getOwnPropertySymbols(h);v<g.length;v++)m.indexOf(g[v])<0&&Object.prototype.propertyIsEnumerable.call(h,g[v])&&(p[g[v]]=h[g[v]])}return p}(r,["nocookie"]),l=`www.youtube${o?"-nocookie":""}.com`,d=Yh(t,a),u=encodeURIComponent(s[2]);e.videoId=u,e.src=`https://${l}/embed/${u}?${d}`,e.thumbSrc=e.thumbSrc||`https://i.ytimg.com/vi/${u}/mqdefault.jpg`,i=Rt}else if(s=t.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){let r=Yh(t,this.optionFor(e,Ei)),o=encodeURIComponent(s[1]),a=s[4]||"";e.videoId=o,e.src=`https://player.vimeo.com/video/${o}?${a?`h=${a}${r?"&":""}`:""}${r}`,i=Ei}if(!i&&e.triggerEl){let r=e.triggerEl.dataset.type;RE.includes(r)&&(i=r)}i||typeof t=="string"&&(t.charAt(0)==="#"?i="inline":(s=t.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i=os,e.videoFormat=e.videoFormat||"video/"+(s[1]==="ogv"?"ogg":s[1])):t.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i=Uh:t.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),(s=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`https://maps.google.${s[1]}/?ll=${(s[2]?s[2]+"&z="+Math.floor(parseFloat(s[3]))+(s[4]?s[4].replace(/^\//,"&"):""):s[4]+"").replace(/\?/,"&")}&output=${s[4]&&s[4].indexOf("layer=c")>0?"svembed":"embed"}`,i=Yl):(s=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`https://maps.google.${s[1]}/maps?q=${s[2].replace("query=","q=").replace("api=1","")}&output=embed`,i=Yl),i=i||this.instance.option("defaultType"),e.type=i,i===Uh&&(e.thumbSrc=e.thumbSrc||e.src)}setContent(e){let t=this.instance.optionFor(e,"src")||"";if(e&&e.type&&t){switch(e.type){case Ul:this.instance.setContent(e,t);break;case os:let i=this.option("videoTpl");i&&this.instance.setContent(e,i.replace(/\{\{src\}\}/gi,t+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case Yl:case Rt:case Ei:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(e){let t=e.contentEl;if(!(e.el&&t&&e.type&&[Rt,Ei,os].includes(e.type)))return;let i,s=e.width||"auto",r=e.height||"auto";if(s==="auto"||r==="auto"){i=this.optionFor(e,"videoRatio");let d=(i+"").match(/(\d+)\s*\/\s?(\d+)/);i=d&&d.length>2?parseFloat(d[1])/parseFloat(d[2]):parseFloat(i+"")}else s&&r&&(i=s/r);if(!i)return;t.style.aspectRatio="",t.style.width="",t.style.height="",t.offsetHeight;let o=t.getBoundingClientRect(),a=o.width||1,l=o.height||1;t.style.aspectRatio=i+"",i<a/l?(r=r==="auto"?l:Math.min(l,r),t.style.width="auto",t.style.height=`${r}px`):(s=s==="auto"?a:Math.min(a,s),t.style.width=`${s}px`,t.style.height="auto")}attach(){let e=this,t=e.instance;t.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.selectSlide",e.onSelectSlide),t.on("Carousel.unselectSlide",e.onUnselectSlide),t.on("Carousel.Panzoom.refresh",e.onRefresh),t.on("done",e.onDone),t.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}detach(){let e=this,t=e.instance;t.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.selectSlide",e.onSelectSlide),t.off("Carousel.unselectSlide",e.onUnselectSlide),t.off("Carousel.Panzoom.refresh",e.onRefresh),t.off("done",e.onDone),t.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}};Object.defineProperty(Gr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:_E});var Br="play",$r="pause",as="ready",Xr=class extends Ke{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:as}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==as}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){document.visibilityState==="visible"?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,!((e=this.instance.panzoom)===null||e===void 0)&&e.isResting&&this.resume()}onTimerEnd(){let e=this.instance;this.state==="play"&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var e;if(!this.option("showProgress"))return null;this.removeProgressBar();let t=this.instance,i=((e=t.pages[t.page])===null||e===void 0?void 0:e.slides)||[],s=this.option("progressParentEl");if(s||(s=(i.length===1?i[0].el:null)||t.viewport),!s)return null;let r=document.createElement("div");return Q(r,"f-progress"),s.prepend(r),this.progressBar=r,r.offsetHeight,r}set(){let e=this,t=e.instance;if(t.pages.length<2||e.timer)return;let i=e.option("timeout");e.state=Br,Q(t.container,"has-autoplay");let s=e.createProgressBar();s&&(s.style.transitionDuration=`${i}ms`,s.style.transform="scaleX(1)"),e.timer=setTimeout(()=>{e.timer=null,e.inHover||e.onTimerEnd()},i),e.emit("set")}clear(){let e=this;e.timer&&(clearTimeout(e.timer),e.timer=null),e.removeProgressBar()}start(){let e=this;if(e.set(),e.state!==as){if(e.option("pauseOnHover")){let t=e.instance.container;t.addEventListener("mouseenter",e.onMouseEnter,!1),t.addEventListener("mouseleave",e.onMouseLeave,!1)}document.addEventListener("visibilitychange",e.onVisibilityChange,!1),e.emit("start")}}stop(){let e=this,t=e.state,i=e.instance.container;e.clear(),e.state=as,i.removeEventListener("mouseenter",e.onMouseEnter,!1),i.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),le(i,"has-autoplay"),t!==as&&e.emit("stop")}pause(){let e=this;e.state===Br&&(e.state=$r,e.clear(),e.emit($r))}resume(){let e=this,t=e.instance;if(t.isInfinite||t.page!==t.pages.length-1)if(e.state!==Br){if(e.state===$r&&!e.inHover){let i=new Event("resume",{bubbles:!0,cancelable:!0});e.emit("resume",i),i.defaultPrevented||e.set()}}else e.set();else e.stop()}toggle(){this.state===Br||this.state===$r?this.stop():this.start()}attach(){let e=this,t=e.instance;t.on("ready",e.onReady),t.on("Panzoom.startAnimation",e.onChange),t.on("Panzoom.endAnimation",e.onSettle),t.on("Panzoom.touchMove",e.onChange)}detach(){let e=this,t=e.instance;t.off("ready",e.onReady),t.off("Panzoom.startAnimation",e.onChange),t.off("Panzoom.endAnimation",e.onSettle),t.off("Panzoom.touchMove",e.onChange),e.stop()}};Object.defineProperty(Xr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});var Kr=class extends Ke{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(e){let t=e.carousel;if(!t)return;let i=e.container;i&&(t.options.Autoplay=We({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{e.emit("startSlideshow")},set:s=>{var r;i.classList.add("has-slideshow"),((r=e.getSlide())===null||r===void 0?void 0:r.state)!==Ie.Ready&&s.pause()},stop:()=>{i.classList.remove("has-slideshow"),e.isCompact||e.endIdle(),e.emit("endSlideshow")},resume:(s,r)=>{var o,a,l;!r||!r.cancelable||((o=e.getSlide())===null||o===void 0?void 0:o.state)===Ie.Ready&&(!((l=(a=e.carousel)===null||a===void 0?void 0:a.panzoom)===null||l===void 0)&&l.isResting)||r.preventDefault()}}}),t.attachPlugins({Autoplay:Xr}),this.ref=t.plugins.Autoplay)}onReady(e){let t=e.carousel,i=this.ref;i&&t&&this.option("playOnStart")&&(t.isInfinite||t.page<t.pages.length-1)&&i.start()}onDone(e,t){let i=this.ref,s=e.carousel;if(!i||!s)return;let r=t.panzoom;r&&r.on("startAnimation",()=>{e.isCurrentSlide(t)&&i.stop()}),e.isCurrentSlide(t)&&i.resume()}onKeydown(e,t){var i;let s=this.ref;s&&t===this.option("key")&&((i=document.activeElement)===null||i===void 0?void 0:i.nodeName)!=="BUTTON"&&s.toggle()}attach(){let e=this,t=e.instance;t.on("Carousel.init",e.onPrepare),t.on("Carousel.ready",e.onReady),t.on("done",e.onDone),t.on("keydown",e.onKeydown)}detach(){let e=this,t=e.instance;t.off("Carousel.init",e.onPrepare),t.off("Carousel.ready",e.onReady),t.off("done",e.onDone),t.off("keydown",e.onKeydown)}};Object.defineProperty(Kr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:n=>{var e;return((e=n.instance.container)===null||e===void 0?void 0:e.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||n.instance.container},timeout:3e3}});var vf={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"},kt;(function(n){n[n.Init=0]="Init",n[n.Ready=1]="Ready",n[n.Hidden=2]="Hidden"})(kt||(kt={}));var Gh="isResting",zr="thumbWidth",un="thumbHeight",wt="thumbClipWidth",bf=class extends Ke{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:kt.Init})}get isModern(){return this.type==="modern"}onInitSlide(n,e){let t=e.el?e.el.dataset:void 0;t&&(e.thumbSrc=t.thumbSrc||e.thumbSrc||"",e[wt]=parseFloat(t[wt]||"")||e[wt]||0,e[un]=parseFloat(t.thumbHeight||"")||e[un]||0),this.addSlide(e)}onInitSlides(){this.build()}onChange(){var n;if(!this.isModern)return;let e=this.container,t=this.instance,i=t.panzoom,s=this.carousel,r=s?s.panzoom:null,o=t.page;if(i&&s&&r){if(i.isDragging){le(e,this.cn(Gh));let a=((n=s.pages[o])===null||n===void 0?void 0:n.pos)||0;a+=t.getProgress(o)*(this[wt]+this.thumbGap);let l=r.getBounds();-1*a>l.x.min&&-1*a<l.x.max&&r.panTo({x:-1*a,friction:.12})}else At(e,this.cn(Gh),i.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(let n of this.instance.slides||[])this.resizeModernSlide(n);this.shiftModern()}isDisabled(){let n=this.option("minCount")||0;if(n){let t=this.instance,i=0;for(let s of t.slides||[])s.thumbSrc&&i++;if(i<n)return!0}let e=this.option("type");return["modern","classic"].indexOf(e)<0}getThumb(n){let e=this.option("thumbTpl")||"";return{html:this.instance.localize(e,[["%i",n.index],["%d",n.index+1],["%s",n.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(n){let e=this.carousel;e&&e.addSlide(n.index,this.getThumb(n))}getSlides(){let n=[];for(let e of this.instance.slides||[])n.push(this.getThumb(e));return n}resizeModernSlide(n){this.isModern&&(n[zr]=n[wt]&&n[un]?Math.round(this[un]*(n[wt]/n[un])):this[zr])}updateProps(){let n=this.container;if(!n)return;let e=t=>parseFloat(getComputedStyle(n).getPropertyValue("--f-thumb-"+t))||0;this.thumbGap=e("gap"),this.thumbExtraGap=e("extra-gap"),this[zr]=e("width")||40,this[wt]=e("clip-width")||40,this[un]=e("height")||40}build(){let n=this;if(n.state!==kt.Init)return;if(n.isDisabled())return void n.emit("disabled");let e=n.instance,t=e.container,i=n.getSlides(),s=n.option("type");n.type=s;let r=n.option("parentEl"),o=n.cn("container"),a=n.cn("track"),l=r?.querySelector("."+o);l||(l=document.createElement("div"),Q(l,o),r?r.appendChild(l):t.after(l)),Q(l,`is-${s}`),Q(t,n.cn("hasThumbs")),n.container=l,n.updateProps();let d=l.querySelector("."+a);d||(d=document.createElement("div"),Q(d,n.cn("track")),l.appendChild(d)),n.track=d;let u=We({},{track:d,infinite:!1,center:!0,fill:s==="classic",dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},n.option("Carousel")||{},{Sync:{target:e},slides:i}),h=new e.constructor(l,u);h.on("createSlide",(m,p)=>{n.setProps(p.index),n.emit("createSlide",p,p.el)}),h.on("ready",()=>{n.shiftModern(),n.emit("ready")}),h.on("refresh",()=>{n.shiftModern()}),h.on("Panzoom.click",(m,p,g)=>{n.onClick(g)}),n.carousel=h,n.state=kt.Ready}onClick(n){n.preventDefault(),n.stopPropagation();let e=this.instance,{pages:t,page:i}=e,s=v=>{if(v){let w=v.closest("[data-carousel-index]");if(w)return[parseInt(w.dataset.carouselIndex||"",10)||0,w]}return[-1,void 0]},r=(v,w)=>{let y=document.elementFromPoint(v,w);return y?s(y):[-1,void 0]},[o,a]=s(n.target);if(o>-1)return;let l=this[wt],d=n.clientX,u=n.clientY,[h,m]=r(d-l,u),[p,g]=r(d+l,u);m&&g?(o=Math.abs(d-m.getBoundingClientRect().right)<Math.abs(d-g.getBoundingClientRect().left)?h:p,o===i&&(o=o===h?p:h)):m?o=h:g&&(o=p),o>-1&&t[o]&&e.slideTo(o)}getShift(n){var e;let t=this,{instance:i}=t,s=t.carousel;if(!i||!s)return 0;let r=t[zr],o=t[wt],a=t.thumbGap,l=t.thumbExtraGap;if(!(!((e=s.slides[n])===null||e===void 0)&&e.el))return 0;let d=.5*(r-o),u=i.pages.length-1,h=i.getProgress(0),m=i.getProgress(u),p=i.getProgress(n,!1,!0),g=0,v=d+l+a,w=h<0&&h>-1,y=m>0&&m<1;return n===0?(g=v*Math.abs(h),y&&h===1&&(g-=v*Math.abs(m))):n===u?(g=v*Math.abs(m)*-1,w&&m===-1&&(g+=v*Math.abs(h))):w||y?(g=-1*v,g+=v*Math.abs(h),g+=v*(1-Math.abs(m))):g=v*p,g}setProps(n){var e;let t=this;if(!t.isModern)return;let{instance:i}=t,s=t.carousel;if(i&&s){let r=(e=s.slides[n])===null||e===void 0?void 0:e.el;if(r&&r.childNodes.length){let o=X(1-Math.abs(i.getProgress(n))),a=X(t.getShift(n));r.style.setProperty("--progress",o?o+"":""),r.style.setProperty("--shift",a+"")}}}shiftModern(){let n=this;if(!n.isModern)return;let{instance:e,track:t}=n,i=e.panzoom,s=n.carousel;if(!(e&&t&&i&&s)||i.state===ce.Init||i.state===ce.Destroy)return;for(let o of e.slides)n.setProps(o.index);let r=(n[wt]+n.thumbGap)*(s.slides.length||0);t.style.setProperty("--width",r+"")}cleanup(){let n=this;n.carousel&&n.carousel.destroy(),n.carousel=null,n.container&&n.container.remove(),n.container=null,n.track&&n.track.remove(),n.track=null,n.state=kt.Init,le(n.instance.container,n.cn("hasThumbs"))}attach(){let n=this,e=n.instance;e.on("initSlide",n.onInitSlide),e.state===Se.Init?e.on("initSlides",n.onInitSlides):n.onInitSlides(),e.on(["change","Panzoom.afterTransform"],n.onChange),e.on("Panzoom.refresh",n.onRefresh)}detach(){let n=this,e=n.instance;e.off("initSlide",n.onInitSlide),e.off("initSlides",n.onInitSlides),e.off(["change","Panzoom.afterTransform"],n.onChange),e.off("Panzoom.refresh",n.onRefresh),n.cleanup()}};Object.defineProperty(bf,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:vf});var kE=Object.assign(Object.assign({},vf),{key:"t",showOnStart:!0,parentEl:null}),Xh="is-masked",Kh="aria-hidden",Jr=class extends Ke{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){let e=this.ref;return e&&!e.isDisabled()}get isHidden(){return this.hidden}onClick(e,t){t.stopPropagation()}onCreateSlide(e,t){var i,s,r;let o=((r=(s=(i=this.instance)===null||i===void 0?void 0:i.carousel)===null||s===void 0?void 0:s.slides[t.index])===null||r===void 0?void 0:r.type)||"",a=t.el;if(a&&o){let l=`for-${o}`;["video","youtube","vimeo","html5video"].includes(o)&&(l+=" for-video"),Q(a,l)}}onInit(){var e;let t=this,i=t.instance,s=i.carousel;if(t.ref||!s)return;let r=t.option("parentEl")||i.footer||i.container;if(!r)return;let o=We({},t.options,{parentEl:r,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:i.option("Carousel.friction")||0}},on:{ready:a=>{let l=a.container;l&&this.hidden&&(t.refresh(),l.style.transition="none",t.hide(),l.offsetHeight,queueMicrotask(()=>{l.style.transition="",t.show()}))}}});o.Carousel=o.Carousel||{},o.Carousel.on=We(((e=t.options.Carousel)===null||e===void 0?void 0:e.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),s.options.Thumbs=o,s.attachPlugins({Thumbs:bf}),t.ref=s.plugins.Thumbs,t.option("showOnStart")||(t.ref.state=kt.Hidden,t.hidden=!0)}onResize(){var e;let t=(e=this.ref)===null||e===void 0?void 0:e.container;t&&(t.style.maxHeight="")}onKeydown(e,t){let i=this.option("key");i&&i===t&&this.toggle()}toggle(){let e=this.ref;if(e&&!e.isDisabled())return e.state===kt.Hidden?(e.state=kt.Init,void e.build()):void(this.hidden?this.show():this.hide())}show(){let e=this.ref;if(!e||e.isDisabled())return;let t=e.container;t&&(this.refresh(),t.offsetHeight,t.removeAttribute(Kh),t.classList.remove(Xh),this.hidden=!1)}hide(){let e=this.ref,t=e&&e.container;t&&(this.refresh(),t.offsetHeight,t.classList.add(Xh),t.setAttribute(Kh,"true")),this.hidden=!0}refresh(){let e=this.ref;if(!e||!e.state)return;let t=e.container,i=t?.firstChild||null;t&&i&&i.childNodes.length&&(t.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){let e=this,t=e.instance;t.state===Pe.Init?t.on("Carousel.init",e.onInit):e.onInit(),t.on("resize",e.onResize),t.on("keydown",e.onKeydown)}detach(){var e;let t=this,i=t.instance;i.off("Carousel.init",t.onInit),i.off("resize",t.onResize),i.off("keydown",t.onKeydown),(e=i.carousel)===null||e===void 0||e.detachPlugins(["Thumbs"]),t.ref=null}};Object.defineProperty(Jr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:kE});var Gl={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}},Ti;(function(n){n[n.Init=0]="Init",n[n.Ready=1]="Ready",n[n.Disabled=2]="Disabled"})(Ti||(Ti={}));var DE={absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null},IE={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Jh="has-toolbar",Xl="fancybox__toolbar",Zr=class extends Ke{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ti.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var t;if(!e.carousel)return;let i=this.option("display"),s=this.option("absolute"),r=this.option("enabled");if(r==="auto"){let d=this.instance.carousel,u=0;if(d)for(let h of d.slides)(h.panzoom||h.type==="image")&&u++;u||(r=!1)}r||(i=void 0);let o=0,a={left:[],middle:[],right:[]};if(i)for(let d of["left","middle","right"])for(let u of i[d]){let h=this.createEl(u);h&&((t=a[d])===null||t===void 0||t.push(h),o++)}let l=null;if(o&&(l=this.createContainer()),l){for(let[d,u]of Object.entries(a)){let h=document.createElement("div");Q(h,Xl+"__column is-"+d);for(let m of u)h.appendChild(m);s!=="auto"||d!=="middle"||u.length||(s=!0),l.appendChild(h)}s===!0&&Q(l,"is-absolute"),this.state=Ti.Ready,this.onRefresh()}else this.state=Ti.Disabled}onClick(e){var t,i;let s=this.instance,r=s.getSlide(),o=r?.panzoom,a=e.target,l=a&&je(a)?a.dataset:null;if(!l)return;if(l.fancyboxToggleThumbs!==void 0)return e.preventDefault(),e.stopPropagation(),void((t=s.plugins.Thumbs)===null||t===void 0||t.toggle());if(l.fancyboxToggleFullscreen!==void 0)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(l.fancyboxToggleSlideshow!==void 0){e.preventDefault(),e.stopPropagation();let h=(i=s.carousel)===null||i===void 0?void 0:i.plugins.Autoplay,m=h.isActive;return o&&o.panMode==="mousemove"&&!m&&o.reset(),void(m?h.stop():h.start())}let d=l.panzoomAction,u=l.panzoomChange;if((u||d)&&(e.preventDefault(),e.stopPropagation()),u){let h={};try{h=JSON.parse(u)}catch{}o&&o.applyChange(h)}else d&&o&&o[d]&&o[d]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;let e=this.container;if(!e)return;let t=this.instance.getSlide();if(!t||t.state!==Ie.Ready)return;let i=t&&!t.error&&t.panzoom;for(let o of e.querySelectorAll("[data-panzoom-action]"))i?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));let s=i&&i.canZoomIn(),r=i&&i.canZoomOut();for(let o of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))s?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));for(let o of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))r?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));for(let o of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){r||s?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"));let a=o.querySelector("g");a&&(a.style.display=s?"":"none")}}onDone(e,t){var i;(i=t.panzoom)===null||i===void 0||i.on("afterTransform",()=>{this.instance.isCurrentSlide(t)&&this.onRefresh()}),this.instance.isCurrentSlide(t)&&this.onRefresh()}createContainer(){let e=this.instance.container;if(!e)return null;let t=this.option("parentEl")||e,i=t.querySelector("."+Xl);return i||(i=document.createElement("div"),Q(i,Xl),t.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&Q(e,Jh),this.container=i,i}createEl(e){let t=this.instance,i=t.carousel;if(!i||e==="toggleFS"||e==="fullscreen"&&!hf())return null;let s=null,r=i.slides.length||0,o=0,a=0;for(let d of i.slides)(d.panzoom||d.type==="image")&&o++,(d.type==="image"||d.downloadSrc)&&a++;if(r<2&&["infobar","prev","next"].includes(e))return s;if(Gl[e]!==void 0&&!o||e==="download"&&!a)return null;if(e==="thumbs"){let d=t.plugins.Thumbs;if(!d||!d.isEnabled)return null}if(e==="slideshow"&&(!i.plugins.Autoplay||r<2))return null;if(Gl[e]!==void 0){let d=Gl[e];s=document.createElement("button"),s.setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),Q(s,"f-button"),d.action&&(s.dataset.panzoomAction=d.action),d.change&&(s.dataset.panzoomChange=JSON.stringify(d.change)),s.appendChild(St(this.instance.localize(d.icon)))}else{let d=(this.option("items")||[])[e];d&&(s=St(this.instance.localize(d.tpl)),typeof d.click=="function"&&s.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),typeof d.click=="function"&&d.click.call(this,this,u)}))}let l=s?.querySelector("svg");if(l)for(let[d,u]of Object.entries(IE))l.getAttribute(d)||l.setAttribute(d,String(u));return s}removeContainer(){let e=this.container;e&&e.remove(),this.container=null,this.state=Ti.Disabled;let t=this.instance.container;t&&le(t,Jh)}attach(){let e=this,t=e.instance;t.on("Carousel.initSlides",e.onReady),t.on("done",e.onDone),t.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}detach(){let e=this,t=e.instance;t.off("Carousel.initSlides",e.onReady),t.off("done",e.onDone),t.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}};Object.defineProperty(Zr,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:DE});var NE={Hash:class extends Ke{onReady(){ls=!1}onChange(n){Ai&&clearTimeout(Ai);let{hash:e}=ff(),{hash:t}=Ur(),i=n.isOpeningSlide(n.getSlide());i&&(Wh=t===e?"":t),e&&e!==t&&(Ai=setTimeout(()=>{try{if(n.state===Pe.Ready){let s="replaceState";i&&!Nr&&(s="pushState",Nr=!0),window.history[s]({},document.title,window.location.pathname+window.location.search+e)}}catch{}},300))}onClose(n){if(Ai&&clearTimeout(Ai),!ls&&Nr)return Nr=!1,ls=!1,void window.history.back();if(!ls)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(Wh||""))}catch{}}attach(){let n=this.instance;n.on("ready",this.onReady),n.on(["Carousel.ready","Carousel.change"],this.onChange),n.on("close",this.onClose)}detach(){let n=this.instance;n.off("ready",this.onReady),n.off(["Carousel.ready","Carousel.change"],this.onChange),n.off("close",this.onClose)}static parseURL(){return Ur()}static startFromUrl(){pf()}static destroy(){window.removeEventListener("hashchange",gf,!1)}},Html:Gr,Images:Yr,Slideshow:Kr,Thumbs:Jr,Toolbar:Zr},Zh="with-fancybox",Kl="hide-scrollbar",Qh="--fancybox-scrollbar-compensate",ef="--fancybox-body-margin",Jl="aria-hidden",Zl="is-using-tab",Ql="is-animated",tf="is-compact",nf="is-loading",ec="is-opening",Hr="has-caption",hn="disabled",wi="tabindex",sf="download",tc="href",fn="src",Jt=n=>typeof n=="string",rf=function(){var n=window.getSelection();return!!n&&n.type==="Range"},ct,dt=null,Si=null,of=0,af=0,lf=0,cf=0,pn=new Map,FE=0,ut=class n extends ds{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],t={},i={}){super(t),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Pe.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ct||(ct=hf()),this.id=t.id||++FE,pn.set(this.id,this),this.userSlides=e,this.userPlugins=i,queueMicrotask(()=>{this.init()})}init(){if(this.state===Pe.Destroy)return;this.state=Pe.Init,this.attachPlugins(Object.assign(Object.assign({},n.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),this.option("hideScrollbar")===!0&&(()=>{if(!cs)return;let t=document,i=t.body,s=t.documentElement;if(i.classList.contains(Kl))return;let r=window.innerWidth-s.getBoundingClientRect().width,o=parseFloat(window.getComputedStyle(i).marginRight);r<0&&(r=0),s.style.setProperty(Qh,`${r}px`),o&&i.style.setProperty(ef,`${o}px`),i.classList.add(Kl)})(),this.initLayout(),this.scale();let e=()=>{this.initCarousel(this.userSlides),this.state=Pe.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute(Jl,"false")},16)};this.option("Fullscreen.autoStart")&&ct&&!ct.isFullscreen()?ct.request().then(()=>{this.startedFs=!0,e()}).catch(()=>e()):e()}initLayout(){var e,t;let i=this.option("parentEl")||document.body,s=St(this.localize(this.option("tpl.main")||""));if(s){if(s.setAttribute("id",`fancybox-${this.id}`),s.setAttribute("aria-label",this.localize("{{MODAL}}")),s.classList.toggle(tf,this.isCompact),Q(s,this.option("mainClass")||""),Q(s,ec),this.container=s,this.footer=s.querySelector(".fancybox__footer"),i.appendChild(s),Q(document.documentElement,Zh),dt&&Si||(dt=document.createElement("span"),Q(dt,"fancybox-focus-guard"),dt.setAttribute(wi,"0"),dt.setAttribute(Jl,"true"),dt.setAttribute("aria-label","Focus guard"),Si=dt.cloneNode(),(e=s.parentElement)===null||e===void 0||e.insertBefore(dt,s),(t=s.parentElement)===null||t===void 0||t.append(Si)),s.addEventListener("mousedown",r=>{of=r.pageX,af=r.pageY,le(s,Zl)}),this.option("closeExisting"))for(let r of pn.values())r.id!==this.id&&r.close();else this.option("animated")&&(Q(s,Ql),setTimeout(()=>{this.isClosing()||le(s,Ql)},350));this.emit("initLayout")}}initCarousel(e){let t=this.container;if(!t)return;let i=t.querySelector(".fancybox__carousel");if(!i)return;let s=this.carousel=new mn(i,We({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));s.on("*",(r,o,...a)=>{this.emit(`Carousel.${o}`,r,...a)}),s.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(r,o,a)=>{this.clearContent(a),a.state=void 0}),s.on("Panzoom.touchStart",()=>{var r,o;this.isCompact||this.endIdle(),!((r=document.activeElement)===null||r===void 0)&&r.closest(".f-thumbs")&&((o=this.container)===null||o===void 0||o.focus())}),s.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(s.on("Panzoom.afterTransform",(r,o)=>{let a=this.getSlide();if(a&&ic(a.el))return;let l=this.container;if(l){let d=Math.abs(o.current.f),u=d<1?"":Math.max(.5,Math.min(1,1-d/o.contentRect.fitHeight*1.5));l.style.setProperty("--fancybox-ts",u?"0s":""),l.style.setProperty("--fancybox-opacity",u+"")}}),s.on("Panzoom.touchEnd",(r,o,a)=>{var l;let d=this.getSlide();if(d&&ic(d.el)||o.isMobile&&document.activeElement&&["TEXTAREA","INPUT"].indexOf((l=document.activeElement)===null||l===void 0?void 0:l.nodeName)!==-1)return;let u=Math.abs(o.dragOffset.y);o.lockedAxis==="y"&&(u>=200||u>=50&&o.dragOffset.time<300)&&(a&&a.cancelable&&a.preventDefault(),this.close(a,"f-throwOut"+(o.current.f<0?"Up":"Down")))})),s.on("change",r=>{var o;let a=(o=this.getSlide())===null||o===void 0?void 0:o.triggerEl;if(a){let l=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:r.page});a.dispatchEvent(l)}}),s.on(["refresh","change"],r=>{let o=this.container;if(!o)return;for(let d of o.querySelectorAll("[data-fancybox-current-index]"))d.innerHTML=r.page+1;for(let d of o.querySelectorAll("[data-fancybox-count]"))d.innerHTML=r.pages.length;if(!r.isInfinite){for(let d of o.querySelectorAll("[data-fancybox-next]"))r.page<r.pages.length-1?(d.removeAttribute(hn),d.removeAttribute(wi)):(d.setAttribute(hn,""),d.setAttribute(wi,"-1"));for(let d of o.querySelectorAll("[data-fancybox-prev]"))r.page>0?(d.removeAttribute(hn),d.removeAttribute(wi)):(d.setAttribute(hn,""),d.setAttribute(wi,"-1"))}let a=this.getSlide();if(!a)return;let l=a.downloadSrc||"";l||a.type!=="image"||a.error||!Jt(a[fn])||(l=a[fn]);for(let d of o.querySelectorAll("[data-fancybox-download]")){let u=a.downloadFilename;l?(d.removeAttribute(hn),d.removeAttribute(wi),d.setAttribute(tc,l),d.setAttribute(sf,u||l),d.setAttribute("target","_blank")):(d.setAttribute(hn,""),d.setAttribute(wi,"-1"),d.removeAttribute(tc),d.removeAttribute(sf))}}),this.emit("initCarousel")}attachEvents(){let e=this,t=e.container;if(!t)return;t.addEventListener("click",e.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize);let i=window.visualViewport;i&&(i.addEventListener("scroll",e.onResize),i.addEventListener("resize",e.onResize))}detachEvents(){let e=this,t=e.container;if(!t)return;document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize);let i=window.visualViewport;i&&(i.removeEventListener("resize",e.onResize),i.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0)}scale(){let e=this.container;if(!e)return;let t=window.visualViewport,i=Math.max(1,t?.scale||1),s="",r="",o="";if(t&&i>1){let a=`${t.offsetLeft}px`,l=`${t.offsetTop}px`;s=t.width*i+"px",r=t.height*i+"px",o=`translate3d(${a}, ${l}, 0) scale(${1/i})`}e.style.transform=o,e.style.width=s,e.style.height=r}onClick(e){var t;let{container:i,isCompact:s}=this;if(!i||this.isClosing())return;!s&&this.option("idle")&&this.resetIdle();let r=e.composedPath()[0];if(r.closest(".fancybox-spinner")||r.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(r.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(r.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if(e.type==="click"&&e.detail===0||Math.abs(e.pageX-of)>30||Math.abs(e.pageY-af)>30)return;let o=document.activeElement;if(rf()&&o&&i.contains(o))return;if(s&&((t=this.getSlide())===null||t===void 0?void 0:t.type)==="image")return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",e),e.defaultPrevented)return;let a=!1;if(r.closest(".fancybox__content")){if(o){if(o.closest("[contenteditable]"))return;r.matches(ql)||o.blur()}if(rf())return;a=this.option("contentClick")}else r.closest(".fancybox__carousel")&&!r.matches(ql)&&(a=this.option("backdropClick"));a==="close"?(e.preventDefault(),this.close(e)):a==="next"?(e.preventDefault(),this.next()):a==="prev"&&(e.preventDefault(),this.prev())}onWheel(e){let t=e.target,i=this.option("wheel",e);t.closest(".fancybox__thumbs")&&(i="slide");let s=i==="slide",r=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(l,d){return Math.abs(d)>Math.abs(l)?d:l}),o=Math.max(-1,Math.min(1,r)),a=Date.now();this.pwt&&a-this.pwt<300?s&&e.preventDefault():(this.pwt=a,this.emit("wheel",e,o),e.defaultPrevented||(i==="close"?(e.preventDefault(),this.close(e)):i==="slide"&&(Vr(t)||(e.preventDefault(),this[o>0?"prev":"next"]()))))}onScroll(){window.scrollTo(lf,cf)}onKeydown(e){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();let t=e.key,i=this.option("keyboard");if(!i)return;let s=e.composedPath()[0],r=document.activeElement&&document.activeElement.classList,o=r&&r.contains("f-button")||s.dataset.carouselPage||s.dataset.carouselIndex;if(t!=="Escape"&&!o&&je(s)&&(s.isContentEditable||["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(s.nodeName)!==-1)||(e.key==="Tab"?Q(this.container,Zl):le(this.container,Zl),e.ctrlKey||e.altKey||e.shiftKey))return;this.emit("keydown",t,e);let a=i[t];a&&typeof this[a]=="function"&&(e.preventDefault(),this[a]())}onResize(){let e=this.container;if(!e)return;let t=this.isCompact;e.classList.toggle(tf,t),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){document.visibilityState==="visible"?this.checkFocus():this.endIdle()}manageCloseBtn(e){let t=this.optionFor(e,"closeButton")||!1;if(t==="auto"){let s=this.plugins.Toolbar;if(s&&s.state===Ti.Ready)return}if(!t||!e.contentEl||e.closeBtnEl)return;let i=this.option("tpl.closeButton");if(i){let s=St(this.localize(i));e.closeBtnEl=e.contentEl.appendChild(s),e.el&&Q(e.el,"has-close-btn")}}manageCaption(e=void 0){var t,i;let s="fancybox__caption",r=this.container;if(!r)return;le(r,Hr);let o=this.isCompact||this.option("commonCaption"),a=!o;if(this.caption&&this.stop(this.caption),a&&this.caption&&(this.caption.remove(),this.caption=null),o&&!this.caption)for(let h of((t=this.carousel)===null||t===void 0?void 0:t.slides)||[])h.captionEl&&(h.captionEl.remove(),h.captionEl=void 0,le(h.el,Hr),(i=h.el)===null||i===void 0||i.removeAttribute("aria-labelledby"));if(e||(e=this.getSlide()),!e||o&&!this.isCurrentSlide(e))return;let l=e.el,d=this.optionFor(e,"caption","");if(!d)return void(o&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let u=null;if(a){if(u=e.captionEl||null,l&&!u){let h=s+`_${this.id}_${e.index}`;u=document.createElement("div"),Q(u,s),u.setAttribute("id",h),e.captionEl=l.appendChild(u),Q(l,Hr),l.setAttribute("aria-labelledby",h)}}else u=this.caption,u||(u=r.querySelector("."+s)),!u&&(u=document.createElement("div"),u.dataset.fancyboxCaption="",Q(u,s),(this.footer||r).prepend(u)),Q(r,Hr),this.caption=u;u&&(u.innerHTML="",Jt(d)||typeof d=="number"?u.innerHTML=d+"":d instanceof HTMLElement&&u.appendChild(d))}checkFocus(e){this.focus(e)}focus(e){var t;if(this.ignoreFocusChange)return;let i=document.activeElement||null,s=e?.target||null,r=this.container,o=(t=this.carousel)===null||t===void 0?void 0:t.viewport;if(!r||!o||!e&&i&&r.contains(i))return;let a=this.getSlide(),l=a&&a.state===Ie.Ready?a.el:null;if(!l||l.contains(i)||r===i)return;e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;let d=Array.from(r.querySelectorAll(ql)),u=[],h=null;for(let p of d){let g=!p.offsetParent||!!p.closest('[aria-hidden="true"]'),v=l&&l.contains(p),w=!o.contains(p);if(p===r||(v||w)&&!g){u.push(p);let y=p.dataset.origTabindex;y!==void 0&&y&&(p.tabIndex=parseFloat(y)),p.removeAttribute("data-orig-tabindex"),!p.hasAttribute("autoFocus")&&h||(h=p)}else{let y=p.dataset.origTabindex===void 0?p.getAttribute("tabindex")||"":p.dataset.origTabindex;y&&(p.dataset.origTabindex=y),p.tabIndex=-1}}let m=null;e?(!s||u.indexOf(s)<0)&&(m=h||r,u.length&&(i===Si?m=u[0]:this.lastFocus!==r&&i!==dt||(m=u[u.length-1]))):m=a&&a.type==="image"?r:h||r,m&&jh(m),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){let e=this.carousel;e&&e.pages.length>1&&e.slideNext()}prev(){let e=this.carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return((e=n.getInstance())===null||e===void 0?void 0:e.id)==this.id}animate(e=null,t="",i){if(!e||!t)return void(i&&i());this.stop(e);let s=r=>{r.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",s),delete e.dataset.animationName,i&&i(),le(e,t))};e.dataset.animationName=t,e.addEventListener("animationend",s),Q(e,t)}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(e,t="",i=!0){if(this.isClosing())return;let s=e.el;if(!s)return;let r=null;if(je(t)?r=t:(r=St(t+""),je(r)||(r=document.createElement("div"),r.innerHTML=t+"")),["img","picture","iframe","video","audio"].includes(r.nodeName.toLowerCase())){let o=document.createElement("div");o.appendChild(r),r=o}je(r)&&e.filter&&!e.error&&(r=r.querySelector(e.filter)),r&&je(r)?(Q(r,"fancybox__content"),e.id&&r.setAttribute("id",e.id),s.classList.add(`has-${e.error?"error":e.type||"unknown"}`),s.prepend(r),r.style.display==="none"&&(r.style.display=""),getComputedStyle(r).getPropertyValue("display")==="none"&&(r.style.display=e.display||this.option("defaultDisplay")||"flex"),e.contentEl=r,i&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}")}revealContent(e,t){let i=e.el,s=e.contentEl;i&&s&&(this.emit("reveal",e),this.hideLoading(e),e.state=Ie.Opening,(t=this.isOpeningSlide(e)?t===void 0?this.optionFor(e,"showClass"):t:"f-fadeIn")?this.animate(s,t,()=>{this.done(e)}):this.done(e))}done(e){this.isClosing()||(e.state=Ie.Ready,this.emit("done",e),Q(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask(()=>{var t;(t=e.panzoom)===null||t===void 0||t.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(e)&&(le(this.container,ec),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(e){let t=this.getSlide();return!(!e||!t)&&t.index===e.index}isOpeningSlide(e){var t,i;return((t=this.carousel)===null||t===void 0?void 0:t.prevPage)===null&&e&&e.index===((i=this.getSlide())===null||i===void 0?void 0:i.index)}showLoading(e){e.state=Ie.Loading;let t=e.el;t&&(Q(t,nf),this.emit("loading",e),e.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!e.spinnerEl&&e.state===Ie.Loading){let i=St(ac);Q(i,"fancybox-spinner"),e.spinnerEl=i,t.prepend(i),this.animate(i,"f-fadeIn")}},250))}hideLoading(e){let t=e.el;if(!t)return;let i=e.spinnerEl;this.isClosing()?i?.remove():(le(t,nf),i&&this.animate(i,"f-fadeOut",()=>{i.remove()}),e.state===Ie.Loading&&(this.emit("loaded",e),e.state=Ie.Ready))}setError(e,t){if(this.isClosing())return;let i=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",i,e),i.defaultPrevented)return;e.error=t,this.hideLoading(e),this.clearContent(e);let s=document.createElement("div");s.classList.add("fancybox-error"),s.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,s)}clearContent(e){if(e.state===void 0)return;this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0);let t=e.el;t&&(le(t,"has-error"),le(t,"has-unknown"),le(t,`has-${e.type||"unknown"}`)),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0}getSlide(){var e;let t=this.carousel;return((e=t?.pages[t?.page])===null||e===void 0?void 0:e.slides[0])||void 0}close(e,t){if(this.isClosing())return;let i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,e),i.defaultPrevented)return;e&&e.cancelable&&(e.preventDefault(),e.stopPropagation());let s=()=>{this.proceedClose(e,t)};this.startedFs&&ct&&ct.isFullscreen()?Promise.resolve(ct.exit()).then(()=>s()):s()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){let t=()=>{this.clearIdle(),this.idle=!0,Q(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(e)t();else{let i=this.option("idle");i&&(this.idleTimer=setTimeout(t,i))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,le(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){ct&&(ct.isFullscreen()?ct.exit():ct.request().then(()=>{this.startedFs=!0}))}isClosing(){return[Pe.Closing,Pe.CustomClosing,Pe.Destroy].includes(this.state)}proceedClose(e,t){var i,s;this.state=Pe.Closing,this.clearIdle(),this.detachEvents();let r=this.container,o=this.carousel,a=this.getSlide(),l=a&&this.option("placeFocusBack")?a.triggerEl||this.option("triggerEl"):null;if(l&&(uf(l)?jh(l):l.focus()),r&&(le(r,ec),Q(r,"is-closing"),r.setAttribute(Jl,"true"),this.option("animated")&&Q(r,Ql),r.style.pointerEvents="none"),o){o.clearTransitions(),(i=o.panzoom)===null||i===void 0||i.destroy(),(s=o.plugins.Navigation)===null||s===void 0||s.detach();for(let d of o.slides){d.state=Ie.Closing,this.hideLoading(d);let u=d.contentEl;u&&this.stop(u);let h=d?.panzoom;h&&(h.stop(),h.detachEvents(),h.detachObserver()),this.isCurrentSlide(d)||o.emit("removeSlide",d)}}lf=window.scrollX,cf=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",e),this.state!==Pe.CustomClosing?(t===void 0&&a&&(t=this.optionFor(a,"hideClass")),t&&a?(this.animate(a.contentEl,t,()=>{o&&o.emit("removeSlide",a)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var e;if(this.state===Pe.Destroy)return;window.removeEventListener("scroll",this.onScroll),this.state=Pe.Destroy,(e=this.carousel)===null||e===void 0||e.destroy();let t=this.container;t&&t.remove(),pn.delete(this.id);let i=n.getInstance();i?i.focus():(dt&&(dt.remove(),dt=null),Si&&(Si.remove(),Si=null),le(document.documentElement,Zh),(()=>{if(!cs)return;let s=document,r=s.body;r.classList.remove(Kl),r.style.setProperty(ef,""),s.documentElement.style.setProperty(Qh,"")})(),this.emit("destroy"))}static bind(e,t,i){if(!cs)return;let s,r="",o={};if(e===void 0?s=document.body:Jt(e)?(s=document.body,r=e,typeof t=="object"&&(o=t||{})):(s=e,Jt(t)&&(r=t),typeof i=="object"&&(o=i||{})),!s||!je(s))return;r=r||"[data-fancybox]";let a=n.openers.get(s)||new Map;a.set(r,o),n.openers.set(s,a),a.size===1&&s.addEventListener("click",n.fromEvent)}static unbind(e,t){let i,s="";if(Jt(e)?(i=document.body,s=e):(i=e,Jt(t)&&(s=t)),!i)return;let r=n.openers.get(i);r&&s&&r.delete(s),s&&r||(n.openers.delete(i),i.removeEventListener("click",n.fromEvent))}static destroy(){let e;for(;e=n.getInstance();)e.destroy();for(let t of n.openers.keys())t.removeEventListener("click",n.fromEvent);n.openers=new Map}static fromEvent(e){if(e.defaultPrevented||e.button&&e.button!==0||e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e.composedPath()[0],i=t.closest("[data-fancybox-trigger]");if(i){let g=i.dataset.fancyboxTrigger||"",v=document.querySelectorAll(`[data-fancybox="${g}"]`),w=parseInt(i.dataset.fancyboxIndex||"",10)||0;t=v[w]||t}if(!(t&&t instanceof Element))return;let s,r,o,a;if([...n.openers].reverse().find(([g,v])=>!(!g.contains(t)||![...v].reverse().find(([w,y])=>{let P=t.closest(w);return!!P&&(s=g,r=w,o=P,a=y,!0)}))),!s||!r||!o)return;a=a||{},e.preventDefault(),t=o;let l=[],d=We({},rc,a);d.event=e,d.triggerEl=t,d.delegate=i;let u=d.groupAll,h=d.groupAttr,m=h&&t?t.getAttribute(`${h}`):"";if((!t||m||u)&&(l=[].slice.call(s.querySelectorAll(r))),t&&!u&&(l=m?l.filter(g=>g.getAttribute(`${h}`)===m):[t]),!l.length)return;let p=n.getInstance();return p&&p.options.triggerEl&&l.indexOf(p.options.triggerEl)>-1?void 0:(t&&(d.startIndex=l.indexOf(t)),n.fromNodes(l,d))}static fromSelector(e,t,i){let s=null,r="",o={};if(Jt(e)?(s=document.body,r=e,typeof t=="object"&&(o=t||{})):e instanceof HTMLElement&&Jt(t)&&(s=e,r=t,typeof i=="object"&&(o=i||{})),!s||!r)return!1;let a=n.openers.get(s);return!!a&&(o=We({},a.get(r)||{},o),!!o&&n.fromNodes(Array.from(s.querySelectorAll(r)),o))}static fromNodes(e,t){t=We({},rc,t||{});let i=[];for(let s of e){let r=s.dataset||{},o=r[fn]||s.getAttribute(tc)||s.getAttribute("currentSrc")||s.getAttribute(fn)||void 0,a,l=t.delegate,d;l&&i.length===t.startIndex&&(a=l instanceof HTMLImageElement?l:l.querySelector("img:not([aria-hidden])")),a||(a=s instanceof HTMLImageElement?s:s.querySelector("img:not([aria-hidden])")),a&&(d=a.currentSrc||a[fn]||void 0,!d&&a.dataset&&(d=a.dataset.lazySrc||a.dataset[fn]||void 0));let u={src:o,triggerEl:s,thumbEl:a,thumbElSrc:d,thumbSrc:d};for(let h in r){let m=r[h]+"";m=m!=="false"&&(m==="true"||m),u[h]=m}i.push(u)}return new n(i,t)}static getInstance(e){return e?pn.get(e):Array.from(pn.values()).reverse().find(t=>!t.isClosing()&&t)||null}static getSlide(){var e;return((e=n.getInstance())===null||e===void 0?void 0:e.getSlide())||null}static show(e=[],t={}){return new n(e,t)}static next(){let e=n.getInstance();e&&e.next()}static prev(){let e=n.getInstance();e&&e.prev()}static close(e=!0,...t){if(e)for(let i of pn.values())i.close(...t);else{let i=n.getInstance();i&&i.close(...t)}}};Object.defineProperty(ut,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(ut,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:rc}),Object.defineProperty(ut,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:NE}),Object.defineProperty(ut,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map});var Qr=class extends re{connect(){ut.bind("[data-fancybox]")}};var BE=(()=>{let n=new ResizeObserver(o=>o.forEach(a=>a.target.querySelectorAll(".pagy-rjs").forEach(l=>l.pagyRender()))),e=(o,[a,l,d,u])=>{let h=o.parentElement??o,m=Object.keys(l).map(v=>parseInt(v)).sort((v,w)=>w-v),p=-1,g=(v,w,y)=>v.replace(/__pagy_page__/g,w).replace(/__pagy_label__/g,y);(o.pagyRender=function(){let v=m.find(O=>O<h.clientWidth)||0;if(v===p)return;let w=a.before,y=l[v.toString()],P=d?.[v.toString()]??y.map(O=>O.toString());y.forEach((O,R)=>{let D=P[R],H;typeof O=="number"?H=g(a.a,O.toString(),D):O==="gap"?H=a.gap:H=g(a.current,O,D),w+=typeof u=="string"&&O==1?r(H,u):H}),w+=a.after,o.innerHTML="",o.insertAdjacentHTML("afterbegin",w),p=v})(),o.classList.contains("pagy-rjs")&&n.observe(h)},t=(o,[a,l])=>s(o,d=>[d,a.replace(/__pagy_page__/,d)],l),i=(o,[a,l,d])=>{s(o,u=>{let h=Math.max(Math.ceil(a/parseInt(u)),1).toString(),m=l.replace(/__pagy_page__/,h).replace(/__pagy_items__/,u);return[h,m]},d)},s=(o,a,l)=>{let d=o.querySelector("input"),u=o.querySelector("a"),h=d.value,m=function(){if(d.value===h)return;let[p,g,v]=[d.min,d.value,d.max].map(P=>parseInt(P)||0);if(g<p||g>v){d.value=h,d.select();return}let[w,y]=a(d.value);typeof l=="string"&&w==="1"&&(y=r(y,l)),u.href=y,u.click()};["change","focus"].forEach(p=>d.addEventListener(p,()=>d.select())),d.addEventListener("focusout",m),d.addEventListener("keypress",p=>{p.key==="Enter"&&m()})},r=(o,a)=>o.replace(new RegExp(`[?&]${a}=1\\b(?!&)|\\b${a}=1&`),"");return{version:"8.6.3",init(o){let l=(o instanceof Element?o:document).querySelectorAll("[data-pagy]");for(let d of l)try{let u=Uint8Array.from(atob(d.getAttribute("data-pagy")),p=>p.charCodeAt(0)),[h,...m]=JSON.parse(new TextDecoder().decode(u));h==="nav"?e(d,m):h==="combo"?t(d,m):h==="selector"?i(d,m):console.warn(`Skipped Pagy.init() for: %o
Unknown keyword '%s'`,d,h)}catch(u){console.warn(`Skipped Pagy.init() for: %o
%s`,d,u)}}}})(),yf=BE;var eo=class extends re{connect(){yf.init(this.element)}};var to=class extends re{static targets=["map","addresses"];connect(){ymaps.ready(()=>{this.initMap(),this.processAddresses()})}initMap(){this.myMap=new ymaps.Map(this.mapTarget,{center:[55.753994,37.622093],zoom:10,controls:["zoomControl","fullscreenControl"]})}processAddresses(){this.addressesTarget.querySelectorAll("span").forEach(e=>{let t=e.textContent.trim();this.addCityToMap(t)})}addCityToMap(n){if(!this.myMap)return console.error("\u041A\u0430\u0440\u0442\u0430 \u0435\u0449\u0435 \u043D\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u0430");ymaps.geocode(n,{results:1}).then(e=>{let t=e.geoObjects.get(0),i=t.geometry.getCoordinates(),s=t.properties.get("boundedBy");t.options.set("preset","islands#darkBlueDotIconWithCaption"),t.properties.set("iconCaption",t.getAddressLine()),this.myMap.geoObjects.add(t),this.myMap.setBounds(this.myMap.geoObjects.getBounds(),{checkZoomRange:!0})})}};function Ef(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function lc(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:Ef(e[t])&&Ef(n[t])&&Object.keys(e[t]).length>0&&lc(n[t],e[t])})}var wf={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Oe(){let n=typeof document<"u"?document:{};return lc(n,wf),n}var $E={document:wf,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function Ae(){let n=typeof window<"u"?window:{};return lc(n,$E),n}function Sf(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function Af(n){let e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Ci(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Li(){return Date.now()}function zE(n){let e=Ae(),t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function cc(n,e){e===void 0&&(e="x");let t=Ae(),i,s,r,o=zE(n);return t.WebKitCSSMatrix?(s=o.transform||o.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(a=>a.replace(",",".")).join(", ")),r=new t.WebKitCSSMatrix(s==="none"?"":s)):(r=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=r.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?s=r.m41:i.length===16?s=parseFloat(i[12]):s=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?s=r.m42:i.length===16?s=parseFloat(i[13]):s=parseFloat(i[5])),s||0}function us(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function HE(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function qe(){let n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){let i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!HE(i)){let s=Object.keys(Object(i)).filter(r=>e.indexOf(r)<0);for(let r=0,o=s.length;r<o;r+=1){let a=s[r],l=Object.getOwnPropertyDescriptor(i,a);l!==void 0&&l.enumerable&&(us(n[a])&&us(i[a])?i[a].__swiper__?n[a]=i[a]:qe(n[a],i[a]):!us(n[a])&&us(i[a])?(n[a]={},i[a].__swiper__?n[a]=i[a]:qe(n[a],i[a])):n[a]=i[a])}}}return n}function vn(n,e,t){n.style.setProperty(e,t)}function dc(n){let{swiper:e,targetPosition:t,side:i}=n,s=Ae(),r=-e.translate,o=null,a,l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);let d=t>r?"next":"prev",u=(m,p)=>d==="next"&&m>=p||d==="prev"&&m<=p,h=()=>{a=new Date().getTime(),o===null&&(o=a);let m=Math.max(Math.min((a-o)/l,1),0),p=.5-Math.cos(m*Math.PI)/2,g=r+p*(t-r);if(u(g,t)&&(g=t),e.wrapperEl.scrollTo({[i]:g}),u(g,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:g})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(h)};h()}function ke(n,e){e===void 0&&(e="");let t=[...n.children];return n instanceof HTMLSlotElement&&t.push(...n.assignedElements()),e?t.filter(i=>i.matches(e)):t}function Tf(n,e){let t=e.contains(n);return!t&&e instanceof HTMLSlotElement?[...e.assignedElements()].includes(n):t}function hs(n){try{console.warn(n);return}catch{}}function pt(n,e){e===void 0&&(e=[]);let t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:Sf(e)),t}function xf(n,e){let t=[];for(;n.previousElementSibling;){let i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function Cf(n,e){let t=[];for(;n.nextElementSibling;){let i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function Dt(n,e){return Ae().getComputedStyle(n,null).getPropertyValue(e)}function fs(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function ps(n,e){let t=[],i=n.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function io(n,e,t){let i=Ae();return t?n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):n.offsetWidth}function Je(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}var uc;function VE(){let n=Ae(),e=Oe();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function Rf(){return uc||(uc=VE()),uc}var hc;function jE(n){let{userAgent:e}=n===void 0?{}:n,t=Rf(),i=Ae(),s=i.navigator.platform,r=e||i.navigator.userAgent,o={ios:!1,android:!1},a=i.screen.width,l=i.screen.height,d=r.match(/(Android);?[\s\/]+([\d.]+)?/),u=r.match(/(iPad).*OS\s([\d_]+)/),h=r.match(/(iPod)(.*OS\s([\d_]+))?/),m=!u&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=s==="Win32",g=s==="MacIntel",v=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&g&&t.touch&&v.indexOf(`${a}x${l}`)>=0&&(u=r.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),g=!1),d&&!p&&(o.os="android",o.android=!0),(u||m||h)&&(o.os="ios",o.ios=!0),o}function kf(n){return n===void 0&&(n={}),hc||(hc=jE(n)),hc}var fc;function WE(){let n=Ae(),e=kf(),t=!1;function i(){let a=n.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(i()){let a=String(n.navigator.userAgent);if(a.includes("Version/")){let[l,d]=a.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));t=l<16||l===16&&d<2}}let s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),r=i(),o=r||s&&e.ios;return{isSafari:t||r,needPerspectiveFix:t,need3dFix:o,isWebView:s}}function qE(){return fc||(fc=WE()),fc}function UE(n){let{swiper:e,on:t,emit:i}=n,s=Ae(),r=null,o=null,a=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(r=new ResizeObserver(h=>{o=s.requestAnimationFrame(()=>{let{width:m,height:p}=e,g=m,v=p;h.forEach(w=>{let{contentBoxSize:y,contentRect:P,target:O}=w;O&&O!==e.el||(g=P?P.width:(y[0]||y).inlineSize,v=P?P.height:(y[0]||y).blockSize)}),(g!==m||v!==p)&&a()})}),r.observe(e.el))},d=()=>{o&&s.cancelAnimationFrame(o),r&&r.unobserve&&e.el&&(r.unobserve(e.el),r=null)},u=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver<"u"){l();return}s.addEventListener("resize",a),s.addEventListener("orientationchange",u)}),t("destroy",()=>{d(),s.removeEventListener("resize",a),s.removeEventListener("orientationchange",u)})}function YE(n){let{swiper:e,extendParams:t,on:i,emit:s}=n,r=[],o=Ae(),a=function(u,h){h===void 0&&(h={});let m=o.MutationObserver||o.WebkitMutationObserver,p=new m(g=>{if(e.__preventObserver__)return;if(g.length===1){s("observerUpdate",g[0]);return}let v=function(){s("observerUpdate",g[0])};o.requestAnimationFrame?o.requestAnimationFrame(v):o.setTimeout(v,0)});p.observe(u,{attributes:typeof h.attributes>"u"?!0:h.attributes,childList:e.isElement||(typeof h.childList>"u"?!0:h).childList,characterData:typeof h.characterData>"u"?!0:h.characterData}),r.push(p)},l=()=>{if(e.params.observer){if(e.params.observeParents){let u=ps(e.hostEl);for(let h=0;h<u.length;h+=1)a(u[h])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},d=()=>{r.forEach(u=>{u.disconnect()}),r.splice(0,r.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",d)}var GE={on(n,e,t){let i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;let s=t?"unshift":"push";return n.split(" ").forEach(r=>{i.eventsListeners[r]||(i.eventsListeners[r]=[]),i.eventsListeners[r][s](e)}),i},once(n,e,t){let i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function s(){i.off(n,s),s.__emitterProxy&&delete s.__emitterProxy;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];e.apply(i,o)}return s.__emitterProxy=e,i.on(n,s,t)},onAny(n,e){let t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;let i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){let e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;let t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){let t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((s,r)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&t.eventsListeners[i].splice(r,1)})}),t},emit(){let n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return typeof r[0]=="string"||Array.isArray(r[0])?(e=r[0],t=r.slice(1,r.length),i=n):(e=r[0].events,t=r[0].data,i=r[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(d=>{d.apply(i,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(d=>{d.apply(i,t)})}),n}};function XE(){let n=this,e,t,i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(Dt(i,"padding-left")||0,10)-parseInt(Dt(i,"padding-right")||0,10),t=t-parseInt(Dt(i,"padding-top")||0,10)-parseInt(Dt(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function KE(){let n=this;function e(V,K){return parseFloat(V.getPropertyValue(n.getDirectionLabel(K))||0)}let t=n.params,{wrapperEl:i,slidesEl:s,size:r,rtlTranslate:o,wrongRTL:a}=n,l=n.virtual&&t.virtual.enabled,d=l?n.virtual.slides.length:n.slides.length,u=ke(s,`.${n.params.slideClass}, swiper-slide`),h=l?n.virtual.slides.length:u.length,m=[],p=[],g=[],v=t.slidesOffsetBefore;typeof v=="function"&&(v=t.slidesOffsetBefore.call(n));let w=t.slidesOffsetAfter;typeof w=="function"&&(w=t.slidesOffsetAfter.call(n));let y=n.snapGrid.length,P=n.slidesGrid.length,O=t.spaceBetween,R=-v,D=0,H=0;if(typeof r>"u")return;typeof O=="string"&&O.indexOf("%")>=0?O=parseFloat(O.replace("%",""))/100*r:typeof O=="string"&&(O=parseFloat(O)),n.virtualSize=-O,u.forEach(V=>{o?V.style.marginLeft="":V.style.marginRight="",V.style.marginBottom="",V.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(vn(i,"--swiper-centered-offset-before",""),vn(i,"--swiper-centered-offset-after",""));let q=t.grid&&t.grid.rows>1&&n.grid;q?n.grid.initSlides(u):n.grid&&n.grid.unsetSlides();let G,ee=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(V=>typeof t.breakpoints[V].slidesPerView<"u").length>0;for(let V=0;V<h;V+=1){G=0;let K;if(u[V]&&(K=u[V]),q&&n.grid.updateSlide(V,K,u),!(u[V]&&Dt(K,"display")==="none")){if(t.slidesPerView==="auto"){ee&&(u[V].style[n.getDirectionLabel("width")]="");let J=getComputedStyle(K),j=K.style.transform,z=K.style.webkitTransform;if(j&&(K.style.transform="none"),z&&(K.style.webkitTransform="none"),t.roundLengths)G=n.isHorizontal()?io(K,"width",!0):io(K,"height",!0);else{let _=e(J,"width"),b=e(J,"padding-left"),C=e(J,"padding-right"),x=e(J,"margin-left"),F=e(J,"margin-right"),$=J.getPropertyValue("box-sizing");if($&&$==="border-box")G=_+x+F;else{let{clientWidth:U,offsetWidth:te}=K;G=_+b+C+x+F+(te-U)}}j&&(K.style.transform=j),z&&(K.style.webkitTransform=z),t.roundLengths&&(G=Math.floor(G))}else G=(r-(t.slidesPerView-1)*O)/t.slidesPerView,t.roundLengths&&(G=Math.floor(G)),u[V]&&(u[V].style[n.getDirectionLabel("width")]=`${G}px`);u[V]&&(u[V].swiperSlideSize=G),g.push(G),t.centeredSlides?(R=R+G/2+D/2+O,D===0&&V!==0&&(R=R-r/2-O),V===0&&(R=R-r/2-O),Math.abs(R)<1/1e3&&(R=0),t.roundLengths&&(R=Math.floor(R)),H%t.slidesPerGroup===0&&m.push(R),p.push(R)):(t.roundLengths&&(R=Math.floor(R)),(H-Math.min(n.params.slidesPerGroupSkip,H))%n.params.slidesPerGroup===0&&m.push(R),p.push(R),R=R+G+O),n.virtualSize+=G+O,D=G,H+=1}}if(n.virtualSize=Math.max(n.virtualSize,r)+w,o&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${n.virtualSize+O}px`),t.setWrapperSize&&(i.style[n.getDirectionLabel("width")]=`${n.virtualSize+O}px`),q&&n.grid.updateWrapperSize(G,m),!t.centeredSlides){let V=[];for(let K=0;K<m.length;K+=1){let J=m[K];t.roundLengths&&(J=Math.floor(J)),m[K]<=n.virtualSize-r&&V.push(J)}m=V,Math.floor(n.virtualSize-r)-Math.floor(m[m.length-1])>1&&m.push(n.virtualSize-r)}if(l&&t.loop){let V=g[0]+O;if(t.slidesPerGroup>1){let K=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),J=V*t.slidesPerGroup;for(let j=0;j<K;j+=1)m.push(m[m.length-1]+J)}for(let K=0;K<n.virtual.slidesBefore+n.virtual.slidesAfter;K+=1)t.slidesPerGroup===1&&m.push(m[m.length-1]+V),p.push(p[p.length-1]+V),n.virtualSize+=V}if(m.length===0&&(m=[0]),O!==0){let V=n.isHorizontal()&&o?"marginLeft":n.getDirectionLabel("marginRight");u.filter((K,J)=>!t.cssMode||t.loop?!0:J!==u.length-1).forEach(K=>{K.style[V]=`${O}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let V=0;g.forEach(J=>{V+=J+(O||0)}),V-=O;let K=V>r?V-r:0;m=m.map(J=>J<=0?-v:J>K?K+w:J)}if(t.centerInsufficientSlides){let V=0;g.forEach(J=>{V+=J+(O||0)}),V-=O;let K=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(V+K<r){let J=(r-V-K)/2;m.forEach((j,z)=>{m[z]=j-J}),p.forEach((j,z)=>{p[z]=j+J})}}if(Object.assign(n,{slides:u,snapGrid:m,slidesGrid:p,slidesSizesGrid:g}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){vn(i,"--swiper-centered-offset-before",`${-m[0]}px`),vn(i,"--swiper-centered-offset-after",`${n.size/2-g[g.length-1]/2}px`);let V=-n.snapGrid[0],K=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(J=>J+V),n.slidesGrid=n.slidesGrid.map(J=>J+K)}if(h!==d&&n.emit("slidesLengthChange"),m.length!==y&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),p.length!==P&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){let V=`${t.containerModifierClass}backface-hidden`,K=n.el.classList.contains(V);h<=t.maxBackfaceHiddenSlides?K||n.el.classList.add(V):K&&n.el.classList.remove(V)}}function JE(n){let e=this,t=[],i=e.virtual&&e.params.virtual.enabled,s=0,r;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);let o=a=>i?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(r=0;r<Math.ceil(e.params.slidesPerView);r+=1){let a=e.activeIndex+r;if(a>e.slides.length&&!i)break;t.push(o(a))}else t.push(o(e.activeIndex));for(r=0;r<t.length;r+=1)if(typeof t[r]<"u"){let a=t[r].offsetHeight;s=a>s?a:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function ZE(){let n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}var Lf=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function QE(n){n===void 0&&(n=this&&this.translate||0);let e=this,t=e.params,{slides:i,rtlTranslate:s,snapGrid:r}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-n;s&&(o=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<i.length;l+=1){let d=i[l],u=d.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=i[0].swiperSlideOffset);let h=(o+(t.centeredSlides?e.minTranslate():0)-u)/(d.swiperSlideSize+a),m=(o-r[0]+(t.centeredSlides?e.minTranslate():0)-u)/(d.swiperSlideSize+a),p=-(o-u),g=p+e.slidesSizesGrid[l],v=p>=0&&p<=e.size-e.slidesSizesGrid[l],w=p>=0&&p<e.size-1||g>1&&g<=e.size||p<=0&&g>=e.size;w&&(e.visibleSlides.push(d),e.visibleSlidesIndexes.push(l)),Lf(d,w,t.slideVisibleClass),Lf(d,v,t.slideFullyVisibleClass),d.progress=s?-h:h,d.originalProgress=s?-m:m}}function ew(n){let e=this;if(typeof n>"u"){let u=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*u||0}let t=e.params,i=e.maxTranslate()-e.minTranslate(),{progress:s,isBeginning:r,isEnd:o,progressLoop:a}=e,l=r,d=o;if(i===0)s=0,r=!0,o=!0;else{s=(n-e.minTranslate())/i;let u=Math.abs(n-e.minTranslate())<1,h=Math.abs(n-e.maxTranslate())<1;r=u||s<=0,o=h||s>=1,u&&(s=0),h&&(s=1)}if(t.loop){let u=e.getSlideIndexByData(0),h=e.getSlideIndexByData(e.slides.length-1),m=e.slidesGrid[u],p=e.slidesGrid[h],g=e.slidesGrid[e.slidesGrid.length-1],v=Math.abs(n);v>=m?a=(v-m)/g:a=(v+g-p)/g,a>1&&(a-=1)}Object.assign(e,{progress:s,progressLoop:a,isBeginning:r,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),r&&!l&&e.emit("reachBeginning toEdge"),o&&!d&&e.emit("reachEnd toEdge"),(l&&!r||d&&!o)&&e.emit("fromEdge"),e.emit("progress",s)}var pc=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function tw(){let n=this,{slides:e,params:t,slidesEl:i,activeIndex:s}=n,r=n.virtual&&t.virtual.enabled,o=n.grid&&t.grid&&t.grid.rows>1,a=h=>ke(i,`.${t.slideClass}${h}, swiper-slide${h}`)[0],l,d,u;if(r)if(t.loop){let h=s-n.virtual.slidesBefore;h<0&&(h=n.virtual.slides.length+h),h>=n.virtual.slides.length&&(h-=n.virtual.slides.length),l=a(`[data-swiper-slide-index="${h}"]`)}else l=a(`[data-swiper-slide-index="${s}"]`);else o?(l=e.filter(h=>h.column===s)[0],u=e.filter(h=>h.column===s+1)[0],d=e.filter(h=>h.column===s-1)[0]):l=e[s];l&&(o||(u=Cf(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!u&&(u=e[0]),d=xf(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!d===0&&(d=e[e.length-1]))),e.forEach(h=>{pc(h,h===l,t.slideActiveClass),pc(h,h===u,t.slideNextClass),pc(h,h===d,t.slidePrevClass)}),n.emitSlidesClasses()}var no=(n,e)=>{if(!n||n.destroyed||!n.params)return;let t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let s=i.querySelector(`.${n.params.lazyPreloaderClass}`);!s&&n.isElement&&(i.shadowRoot?s=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(s=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},mc=(n,e)=>{if(!n.slides[e])return;let t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},bc=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext,t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);let i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),s=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){let o=s,a=[o-e];a.push(...Array.from({length:e}).map((l,d)=>o+i+d)),n.slides.forEach((l,d)=>{a.includes(l.column)&&mc(n,d)});return}let r=s+i-1;if(n.params.rewind||n.params.loop)for(let o=s-e;o<=r+e;o+=1){let a=(o%t+t)%t;(a<s||a>r)&&mc(n,a)}else for(let o=Math.max(s-e,0);o<=Math.min(r+e,t-1);o+=1)o!==s&&(o>r||o<s)&&mc(n,o)};function iw(n){let{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate,s;for(let r=0;r<e.length;r+=1)typeof e[r+1]<"u"?i>=e[r]&&i<e[r+1]-(e[r+1]-e[r])/2?s=r:i>=e[r]&&i<e[r+1]&&(s=r+1):i>=e[r]&&(s=r);return t.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function nw(n){let e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:s,activeIndex:r,realIndex:o,snapIndex:a}=e,l=n,d,u=p=>{let g=p-e.virtual.slidesBefore;return g<0&&(g=e.virtual.slides.length+g),g>=e.virtual.slides.length&&(g-=e.virtual.slides.length),g};if(typeof l>"u"&&(l=iw(e)),i.indexOf(t)>=0)d=i.indexOf(t);else{let p=Math.min(s.slidesPerGroupSkip,l);d=p+Math.floor((l-p)/s.slidesPerGroup)}if(d>=i.length&&(d=i.length-1),l===r&&!e.params.loop){d!==a&&(e.snapIndex=d,e.emit("snapIndexChange"));return}if(l===r&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=u(l);return}let h=e.grid&&s.grid&&s.grid.rows>1,m;if(e.virtual&&s.virtual.enabled&&s.loop)m=u(l);else if(h){let p=e.slides.filter(v=>v.column===l)[0],g=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(g)&&(g=Math.max(e.slides.indexOf(p),0)),m=Math.floor(g/s.grid.rows)}else if(e.slides[l]){let p=e.slides[l].getAttribute("data-swiper-slide-index");p?m=parseInt(p,10):m=l}else m=l;Object.assign(e,{previousSnapIndex:a,snapIndex:d,previousRealIndex:o,realIndex:m,previousIndex:r,activeIndex:l}),e.initialized&&bc(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==m&&e.emit("realIndexChange"),e.emit("slideChange"))}function sw(n,e){let t=this,i=t.params,s=n.closest(`.${i.slideClass}, swiper-slide`);!s&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(a=>{!s&&a.matches&&a.matches(`.${i.slideClass}, swiper-slide`)&&(s=a)});let r=!1,o;if(s){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===s){r=!0,o=a;break}}if(s&&r)t.clickedSlide=s,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var rw={updateSize:XE,updateSlides:KE,updateAutoHeight:JE,updateSlidesOffset:ZE,updateSlidesProgress:QE,updateProgress:ew,updateSlidesClasses:tw,updateActiveIndex:nw,updateClickedSlide:sw};function ow(n){n===void 0&&(n=this.isHorizontal()?"x":"y");let e=this,{params:t,rtlTranslate:i,translate:s,wrapperEl:r}=e;if(t.virtualTranslate)return i?-s:s;if(t.cssMode)return s;let o=cc(r,n);return o+=e.cssOverflowAdjustment(),i&&(o=-o),o||0}function aw(n,e){let t=this,{rtlTranslate:i,params:s,wrapperEl:r,progress:o}=t,a=0,l=0,d=0;t.isHorizontal()?a=i?-n:n:l=n,s.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,s.cssMode?r[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:s.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),r.style.transform=`translate3d(${a}px, ${l}px, ${d}px)`);let u,h=t.maxTranslate()-t.minTranslate();h===0?u=0:u=(n-t.minTranslate())/h,u!==o&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function lw(){return-this.snapGrid[0]}function cw(){return-this.snapGrid[this.snapGrid.length-1]}function dw(n,e,t,i,s){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);let r=this,{params:o,wrapperEl:a}=r;if(r.animating&&o.preventInteractionOnTransition)return!1;let l=r.minTranslate(),d=r.maxTranslate(),u;if(i&&n>l?u=l:i&&n<d?u=d:u=n,r.updateProgress(u),o.cssMode){let h=r.isHorizontal();if(e===0)a[h?"scrollLeft":"scrollTop"]=-u;else{if(!r.support.smoothScroll)return dc({swiper:r,targetPosition:-u,side:h?"left":"top"}),!0;a.scrollTo({[h?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(r.setTransition(0),r.setTranslate(u),t&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionEnd"))):(r.setTransition(e),r.setTranslate(u),t&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(m){!r||r.destroyed||m.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,r.animating=!1,t&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}var uw={getTranslate:ow,setTranslate:aw,minTranslate:lw,maxTranslate:cw,translateTo:dw};function hw(n,e){let t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function Df(n){let{swiper:e,runCallbacks:t,direction:i,step:s}=n,{activeIndex:r,previousIndex:o}=e,a=i;if(a||(r>o?a="next":r<o?a="prev":a="reset"),e.emit(`transition${s}`),t&&r!==o){if(a==="reset"){e.emit(`slideResetTransition${s}`);return}e.emit(`slideChangeTransition${s}`),a==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`)}}function fw(n,e){n===void 0&&(n=!0);let t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),Df({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function pw(n,e){n===void 0&&(n=!0);let t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),Df({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var mw={setTransition:hw,transitionStart:fw,transitionEnd:pw};function gw(n,e,t,i,s){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));let r=this,o=n;o<0&&(o=0);let{params:a,snapGrid:l,slidesGrid:d,previousIndex:u,activeIndex:h,rtlTranslate:m,wrapperEl:p,enabled:g}=r;if(!g&&!i&&!s||r.destroyed||r.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=r.params.speed);let v=Math.min(r.params.slidesPerGroupSkip,o),w=v+Math.floor((o-v)/r.params.slidesPerGroup);w>=l.length&&(w=l.length-1);let y=-l[w];if(a.normalizeSlideIndex)for(let D=0;D<d.length;D+=1){let H=-Math.floor(y*100),q=Math.floor(d[D]*100),G=Math.floor(d[D+1]*100);typeof d[D+1]<"u"?H>=q&&H<G-(G-q)/2?o=D:H>=q&&H<G&&(o=D+1):H>=q&&(o=D)}if(r.initialized&&o!==h&&(!r.allowSlideNext&&(m?y>r.translate&&y>r.minTranslate():y<r.translate&&y<r.minTranslate())||!r.allowSlidePrev&&y>r.translate&&y>r.maxTranslate()&&(h||0)!==o))return!1;o!==(u||0)&&t&&r.emit("beforeSlideChangeStart"),r.updateProgress(y);let P;o>h?P="next":o<h?P="prev":P="reset";let O=r.virtual&&r.params.virtual.enabled;if(!(O&&s)&&(m&&-y===r.translate||!m&&y===r.translate))return r.updateActiveIndex(o),a.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),a.effect!=="slide"&&r.setTranslate(y),P!=="reset"&&(r.transitionStart(t,P),r.transitionEnd(t,P)),!1;if(a.cssMode){let D=r.isHorizontal(),H=m?y:-y;if(e===0)O&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),O&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[D?"scrollLeft":"scrollTop"]=H})):p[D?"scrollLeft":"scrollTop"]=H,O&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1});else{if(!r.support.smoothScroll)return dc({swiper:r,targetPosition:H,side:D?"left":"top"}),!0;p.scrollTo({[D?"left":"top"]:H,behavior:"smooth"})}return!0}return r.setTransition(e),r.setTranslate(y),r.updateActiveIndex(o),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,i),r.transitionStart(t,P),e===0?r.transitionEnd(t,P):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(H){!r||r.destroyed||H.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(t,P))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0}function vw(n,e,t,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));let s=this;if(s.destroyed)return;typeof e>"u"&&(e=s.params.speed);let r=s.grid&&s.params.grid&&s.params.grid.rows>1,o=n;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)o=o+s.virtual.slidesBefore;else{let a;if(r){let m=o*s.params.grid.rows;a=s.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===m)[0].column}else a=s.getSlideIndexByData(o);let l=r?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:d}=s.params,u=s.params.slidesPerView;u==="auto"?u=s.slidesPerViewDynamic():(u=Math.ceil(parseFloat(s.params.slidesPerView,10)),d&&u%2===0&&(u=u+1));let h=l-a<u;if(d&&(h=h||a<Math.ceil(u/2)),i&&d&&s.params.slidesPerView!=="auto"&&!r&&(h=!1),h){let m=d?a<s.activeIndex?"prev":"next":a-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:m,slideTo:!0,activeSlideIndex:m==="next"?a+1:a-l+1,slideRealIndex:m==="next"?s.realIndex:void 0})}if(r){let m=o*s.params.grid.rows;o=s.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===m)[0].column}else o=s.getSlideIndexByData(o)}return requestAnimationFrame(()=>{s.slideTo(o,e,t,i)}),s}function bw(n,e,t){e===void 0&&(e=!0);let i=this,{enabled:s,params:r,animating:o}=i;if(!s||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);let a=r.slidesPerGroup;r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(a=Math.max(i.slidesPerViewDynamic("current",!0),1));let l=i.activeIndex<r.slidesPerGroupSkip?1:a,d=i.virtual&&r.virtual.enabled;if(r.loop){if(o&&!d&&r.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,n,e,t)}),!0}return r.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+l,n,e,t)}function yw(n,e,t){e===void 0&&(e=!0);let i=this,{params:s,snapGrid:r,slidesGrid:o,rtlTranslate:a,enabled:l,animating:d}=i;if(!l||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);let u=i.virtual&&s.virtual.enabled;if(s.loop){if(d&&!u&&s.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}let h=a?i.translate:-i.translate;function m(y){return y<0?-Math.floor(Math.abs(y)):Math.floor(y)}let p=m(h),g=r.map(y=>m(y)),v=r[g.indexOf(p)-1];if(typeof v>"u"&&s.cssMode){let y;r.forEach((P,O)=>{p>=P&&(y=O)}),typeof y<"u"&&(v=r[y>0?y-1:y])}let w=0;if(typeof v<"u"&&(w=o.indexOf(v),w<0&&(w=i.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(w=w-i.slidesPerViewDynamic("previous",!0)+1,w=Math.max(w,0))),s.rewind&&i.isBeginning){let y=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(y,n,e,t)}else if(s.loop&&i.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(w,n,e,t)}),!0;return i.slideTo(w,n,e,t)}function Ew(n,e,t){e===void 0&&(e=!0);let i=this;if(!i.destroyed)return typeof n>"u"&&(n=i.params.speed),i.slideTo(i.activeIndex,n,e,t)}function ww(n,e,t,i){e===void 0&&(e=!0),i===void 0&&(i=.5);let s=this;if(s.destroyed)return;typeof n>"u"&&(n=s.params.speed);let r=s.activeIndex,o=Math.min(s.params.slidesPerGroupSkip,r),a=o+Math.floor((r-o)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[a]){let d=s.snapGrid[a],u=s.snapGrid[a+1];l-d>(u-d)*i&&(r+=s.params.slidesPerGroup)}else{let d=s.snapGrid[a-1],u=s.snapGrid[a];l-d<=(u-d)*i&&(r-=s.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,s.slidesGrid.length-1),s.slideTo(r,n,e,t)}function Sw(){let n=this;if(n.destroyed)return;let{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView,s=n.clickedIndex,r,o=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;r=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?s<n.loopedSlides-i/2||s>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),s=n.getSlideIndex(ke(t,`${o}[data-swiper-slide-index="${r}"]`)[0]),Ci(()=>{n.slideTo(s)})):n.slideTo(s):s>n.slides.length-i?(n.loopFix(),s=n.getSlideIndex(ke(t,`${o}[data-swiper-slide-index="${r}"]`)[0]),Ci(()=>{n.slideTo(s)})):n.slideTo(s)}else n.slideTo(s)}var Aw={slideTo:gw,slideToLoop:vw,slideNext:bw,slidePrev:yw,slideReset:Ew,slideToClosest:ww,slideToClickedSlide:Sw};function Tw(n){let e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;let s=()=>{ke(i,`.${t.slideClass}, swiper-slide`).forEach((h,m)=>{h.setAttribute("data-swiper-slide-index",m)})},r=e.grid&&t.grid&&t.grid.rows>1,o=t.slidesPerGroup*(r?t.grid.rows:1),a=e.slides.length%o!==0,l=r&&e.slides.length%t.grid.rows!==0,d=u=>{for(let h=0;h<u;h+=1){let m=e.isElement?pt("swiper-slide",[t.slideBlankClass]):pt("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(m)}};if(a){if(t.loopAddBlankSlides){let u=o-e.slides.length%o;d(u),e.recalcSlides(),e.updateSlides()}else hs("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(l){if(t.loopAddBlankSlides){let u=t.grid.rows-e.slides.length%t.grid.rows;d(u),e.recalcSlides(),e.updateSlides()}else hs("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function xw(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:s,activeSlideIndex:r,byController:o,byMousewheel:a}=n===void 0?{}:n,l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");let{slides:d,allowSlidePrev:u,allowSlideNext:h,slidesEl:m,params:p}=l,{centeredSlides:g}=p;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&p.virtual.enabled){t&&(!p.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):p.centeredSlides&&l.snapIndex<p.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=u,l.allowSlideNext=h,l.emit("loopFix");return}let v=p.slidesPerView;v==="auto"?v=l.slidesPerViewDynamic():(v=Math.ceil(parseFloat(p.slidesPerView,10)),g&&v%2===0&&(v=v+1));let w=p.slidesPerGroupAuto?v:p.slidesPerGroup,y=w;y%w!==0&&(y+=w-y%w),y+=p.loopAdditionalSlides,l.loopedSlides=y;let P=l.grid&&p.grid&&p.grid.rows>1;d.length<v+y?hs("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):P&&p.grid.fill==="row"&&hs("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");let O=[],R=[],D=l.activeIndex;typeof r>"u"?r=l.getSlideIndex(d.filter(j=>j.classList.contains(p.slideActiveClass))[0]):D=r;let H=i==="next"||!i,q=i==="prev"||!i,G=0,ee=0,V=P?Math.ceil(d.length/p.grid.rows):d.length,J=(P?d[r].column:r)+(g&&typeof s>"u"?-v/2+.5:0);if(J<y){G=Math.max(y-J,w);for(let j=0;j<y-J;j+=1){let z=j-Math.floor(j/V)*V;if(P){let _=V-z-1;for(let b=d.length-1;b>=0;b-=1)d[b].column===_&&O.push(b)}else O.push(V-z-1)}}else if(J+v>V-y){ee=Math.max(J-(V-y*2),w);for(let j=0;j<ee;j+=1){let z=j-Math.floor(j/V)*V;P?d.forEach((_,b)=>{_.column===z&&R.push(b)}):R.push(z)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),q&&O.forEach(j=>{d[j].swiperLoopMoveDOM=!0,m.prepend(d[j]),d[j].swiperLoopMoveDOM=!1}),H&&R.forEach(j=>{d[j].swiperLoopMoveDOM=!0,m.append(d[j]),d[j].swiperLoopMoveDOM=!1}),l.recalcSlides(),p.slidesPerView==="auto"?l.updateSlides():P&&(O.length>0&&q||R.length>0&&H)&&l.slides.forEach((j,z)=>{l.grid.updateSlide(z,j,l.slides)}),p.watchSlidesProgress&&l.updateSlidesOffset(),t){if(O.length>0&&q){if(typeof e>"u"){let j=l.slidesGrid[D],_=l.slidesGrid[D+G]-j;a?l.setTranslate(l.translate-_):(l.slideTo(D+Math.ceil(G),0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-_,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-_))}else if(s){let j=P?O.length/p.grid.rows:O.length;l.slideTo(l.activeIndex+j,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(R.length>0&&H)if(typeof e>"u"){let j=l.slidesGrid[D],_=l.slidesGrid[D-ee]-j;a?l.setTranslate(l.translate-_):(l.slideTo(D-ee,0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-_,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-_))}else{let j=P?R.length/p.grid.rows:R.length;l.slideTo(l.activeIndex-j,0,!1,!0)}}if(l.allowSlidePrev=u,l.allowSlideNext=h,l.controller&&l.controller.control&&!o){let j={slideRealIndex:e,direction:i,setTranslate:s,activeSlideIndex:r,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(z=>{!z.destroyed&&z.params.loop&&z.loopFix({...j,slideTo:z.params.slidesPerView===p.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...j,slideTo:l.controller.control.params.slidesPerView===p.slidesPerView?t:!1})}l.emit("loopFix")}function Cw(){let n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();let i=[];n.slides.forEach(s=>{let r=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;i[r]=s}),n.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),i.forEach(s=>{t.append(s)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var Lw={loopCreate:Tw,loopFix:xw,loopDestroy:Cw};function Mw(n){let e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;let t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function Pw(){let n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var Ow={setGrabCursor:Mw,unsetGrabCursor:Pw};function _w(n,e){e===void 0&&(e=this);function t(i){if(!i||i===Oe()||i===Ae())return null;i.assignedSlot&&(i=i.assignedSlot);let s=i.closest(n);return!s&&!i.getRootNode?null:s||t(i.getRootNode().host)}return t(e)}function Mf(n,e,t){let i=Ae(),{params:s}=n,r=s.edgeSwipeDetection,o=s.edgeSwipeThreshold;return r&&(t<=o||t>=i.innerWidth-o)?r==="prevent"?(e.preventDefault(),!0):!1:!0}function Rw(n){let e=this,t=Oe(),i=n;i.originalEvent&&(i=i.originalEvent);let s=e.touchEventsData;if(i.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==i.pointerId)return;s.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(s.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){Mf(e,i,i.targetTouches[0].pageX);return}let{params:r,touches:o,enabled:a}=e;if(!a||!r.simulateTouch&&i.pointerType==="mouse"||e.animating&&r.preventInteractionOnTransition)return;!e.animating&&r.cssMode&&r.loop&&e.loopFix();let l=i.target;if(r.touchEventsTarget==="wrapper"&&!Tf(l,e.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||s.isTouched&&s.isMoved)return;let d=!!r.noSwipingClass&&r.noSwipingClass!=="",u=i.composedPath?i.composedPath():i.path;d&&i.target&&i.target.shadowRoot&&u&&(l=u[0]);let h=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,m=!!(i.target&&i.target.shadowRoot);if(r.noSwiping&&(m?_w(h,l):l.closest(h))){e.allowClick=!0;return}if(r.swipeHandler&&!l.closest(r.swipeHandler))return;o.currentX=i.pageX,o.currentY=i.pageY;let p=o.currentX,g=o.currentY;if(!Mf(e,i,p))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=g,s.touchStartTime=Li(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(s.allowThresholdMove=!1);let v=!0;l.matches(s.focusableElements)&&(v=!1,l.nodeName==="SELECT"&&(s.isTouched=!1)),t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==l&&(i.pointerType==="mouse"||i.pointerType!=="mouse"&&!l.matches(s.focusableElements))&&t.activeElement.blur();let w=v&&e.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||w)&&!l.isContentEditable&&i.preventDefault(),r.freeMode&&r.freeMode.enabled&&e.freeMode&&e.animating&&!r.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function kw(n){let e=Oe(),t=this,i=t.touchEventsData,{params:s,touches:r,rtlTranslate:o,enabled:a}=t;if(!a||!s.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let d;if(l.type==="touchmove"){if(d=[...l.changedTouches].filter(H=>H.identifier===i.touchId)[0],!d||d.identifier!==i.touchId)return}else d=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}let u=d.pageX,h=d.pageY;if(l.preventedByNestedSwiper){r.startX=u,r.startY=h;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(r,{startX:u,startY:h,currentX:u,currentY:h}),i.touchStartTime=Li());return}if(s.touchReleaseOnEdges&&!s.loop){if(t.isVertical()){if(h<r.startY&&t.translate<=t.maxTranslate()||h>r.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(u<r.startX&&t.translate<=t.maxTranslate()||u>r.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&e.activeElement.matches(i.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",l),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=u,r.currentY=h;let m=r.currentX-r.startX,p=r.currentY-r.startY;if(t.params.threshold&&Math.sqrt(m**2+p**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let H;t.isHorizontal()&&r.currentY===r.startY||t.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:m*m+p*p>=25&&(H=Math.atan2(Math.abs(p),Math.abs(m))*180/Math.PI,i.isScrolling=t.isHorizontal()?H>s.touchAngle:90-H>s.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(r.currentX!==r.startX||r.currentY!==r.startY)&&(i.startMoving=!0),i.isScrolling||l.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation();let g=t.isHorizontal()?m:p,v=t.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;s.oneWayMovement&&(g=Math.abs(g)*(o?1:-1),v=Math.abs(v)*(o?1:-1)),r.diff=g,g*=s.touchRatio,o&&(g=-g,v=-v);let w=t.touchesDirection;t.swipeDirection=g>0?"prev":"next",t.touchesDirection=v>0?"prev":"next";let y=t.params.loop&&!s.cssMode,P=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(y&&P&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){let H=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(H)}i.allowMomentumBounce=!1,s.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let O;if(new Date().getTime(),i.isMoved&&i.allowThresholdMove&&w!==t.touchesDirection&&y&&P&&Math.abs(g)>=1){Object.assign(r,{startX:u,startY:h,currentX:u,currentY:h,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=g+i.startTranslate;let R=!0,D=s.resistanceRatio;if(s.touchReleaseOnEdges&&(D=0),g>0?(y&&P&&!O&&i.allowThresholdMove&&i.currentTranslate>(s.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(R=!1,s.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+g)**D))):g<0&&(y&&P&&!O&&i.allowThresholdMove&&i.currentTranslate<(s.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(s.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(R=!1,s.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-g)**D))),R&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),s.threshold>0)if(Math.abs(g)>s.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,r.diff=t.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY;return}}else{i.currentTranslate=i.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&t.freeMode||s.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function Dw(n){let e=this,t=e.touchEventsData,i=n;i.originalEvent&&(i=i.originalEvent);let s;if(i.type==="touchend"||i.type==="touchcancel"){if(s=[...i.changedTouches].filter(D=>D.identifier===t.touchId)[0],!s||s.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;s=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;let{params:o,touches:a,rtlTranslate:l,slidesGrid:d,enabled:u}=e;if(!u||!o.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);let h=Li(),m=h-t.touchStartTime;if(e.allowClick){let D=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(D&&D[0]||i.target,D),e.emit("tap click",i),m<300&&h-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=Li(),Ci(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let p;if(o.followFinger?p=l?e.translate:-e.translate:p=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:p});return}let g=p>=-e.maxTranslate()&&!e.params.loop,v=0,w=e.slidesSizesGrid[0];for(let D=0;D<d.length;D+=D<o.slidesPerGroupSkip?1:o.slidesPerGroup){let H=D<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof d[D+H]<"u"?(g||p>=d[D]&&p<d[D+H])&&(v=D,w=d[D+H]-d[D]):(g||p>=d[D])&&(v=D,w=d[d.length-1]-d[d.length-2])}let y=null,P=null;o.rewind&&(e.isBeginning?P=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(y=0));let O=(p-d[v])/w,R=v<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(m>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(O>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?y:v+R):e.slideTo(v)),e.swipeDirection==="prev"&&(O>1-o.longSwipesRatio?e.slideTo(v+R):P!==null&&O<0&&Math.abs(O)>o.longSwipesRatio?e.slideTo(P):e.slideTo(v))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(v+R):e.slideTo(v):(e.swipeDirection==="next"&&e.slideTo(y!==null?y:v+R),e.swipeDirection==="prev"&&e.slideTo(P!==null?P:v))}}function Pf(){let n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();let{allowSlideNext:i,allowSlidePrev:s,snapGrid:r}=n,o=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();let a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!a?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!o?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=s,n.allowSlideNext=i,n.params.watchOverflow&&r!==n.snapGrid&&n.checkOverflow()}function Iw(n){let e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function Nw(){let n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let s,r=n.maxTranslate()-n.minTranslate();r===0?s=0:s=(n.translate-n.minTranslate())/r,s!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function Fw(n){let e=this;no(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function Bw(){let n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}var If=(n,e)=>{let t=Oe(),{params:i,el:s,wrapperEl:r,device:o}=n,a=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",d=e;!s||typeof s=="string"||(t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:a}),s[l]("touchstart",n.onTouchStart,{passive:!1}),s[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&s[l]("click",n.onClick,!0),i.cssMode&&r[l]("scroll",n.onScroll),i.updateOnWindowResize?n[d](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",Pf,!0):n[d]("observerUpdate",Pf,!0),s[l]("load",n.onLoad,{capture:!0}))};function $w(){let n=this,{params:e}=n;n.onTouchStart=Rw.bind(n),n.onTouchMove=kw.bind(n),n.onTouchEnd=Dw.bind(n),n.onDocumentTouchStart=Bw.bind(n),e.cssMode&&(n.onScroll=Nw.bind(n)),n.onClick=Iw.bind(n),n.onLoad=Fw.bind(n),If(n,"on")}function zw(){If(this,"off")}var Hw={attachEvents:$w,detachEvents:zw},Of=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function Vw(){let n=this,{realIndex:e,initialized:t,params:i,el:s}=n,r=i.breakpoints;if(!r||r&&Object.keys(r).length===0)return;let o=n.getBreakpoint(r,n.params.breakpointsBase,n.el);if(!o||n.currentBreakpoint===o)return;let l=(o in r?r[o]:void 0)||n.originalParams,d=Of(n,i),u=Of(n,l),h=n.params.grabCursor,m=l.grabCursor,p=i.enabled;d&&!u?(s.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!d&&u&&(s.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&s.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),h&&!m?n.unsetGrabCursor():!h&&m&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(O=>{if(typeof l[O]>"u")return;let R=i[O]&&i[O].enabled,D=l[O]&&l[O].enabled;R&&!D&&n[O].disable(),!R&&D&&n[O].enable()});let g=l.direction&&l.direction!==i.direction,v=i.loop&&(l.slidesPerView!==i.slidesPerView||g),w=i.loop;g&&t&&n.changeDirection(),qe(n.params,l);let y=n.params.enabled,P=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),p&&!y?n.disable():!p&&y&&n.enable(),n.currentBreakpoint=o,n.emit("_beforeBreakpoint",l),t&&(v?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!w&&P?(n.loopCreate(e),n.updateSlides()):w&&!P&&n.loopDestroy()),n.emit("breakpoint",l)}function jw(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1,s=Ae(),r=e==="window"?s.innerHeight:t.clientHeight,o=Object.keys(n).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){let l=parseFloat(a.substr(1));return{value:r*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){let{point:l,value:d}=o[a];e==="window"?s.matchMedia(`(min-width: ${d}px)`).matches&&(i=l):d<=t.clientWidth&&(i=l)}return i||"max"}var Ww={setBreakpoint:Vw,getBreakpoint:jw};function qw(n,e){let t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(s=>{i[s]&&t.push(e+s)}):typeof i=="string"&&t.push(e+i)}),t}function Uw(){let n=this,{classNames:e,params:t,rtl:i,el:s,device:r}=n,o=qw(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:r.android},{ios:r.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),s.classList.add(...e),n.emitContainerClasses()}function Yw(){let n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var Gw={addClasses:Uw,removeClasses:Yw};function Xw(){let n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){let s=n.slides.length-1,r=n.slidesGrid[s]+n.slidesSizesGrid[s]+i*2;n.isLocked=n.size>r}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var Kw={checkOverflow:Xw},_f={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Jw(n,e){return function(i){i===void 0&&(i={});let s=Object.keys(i)[0],r=i[s];if(typeof r!="object"||r===null){qe(e,i);return}if(n[s]===!0&&(n[s]={enabled:!0}),s==="navigation"&&n[s]&&n[s].enabled&&!n[s].prevEl&&!n[s].nextEl&&(n[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&n[s]&&n[s].enabled&&!n[s].el&&(n[s].auto=!0),!(s in n&&"enabled"in r)){qe(e,i);return}typeof n[s]=="object"&&!("enabled"in n[s])&&(n[s].enabled=!0),n[s]||(n[s]={enabled:!1}),qe(e,i)}}var gc={eventsEmitter:GE,update:rw,translate:uw,transition:mw,slide:Aw,loop:Lw,grabCursor:Ow,events:Hw,breakpoints:Ww,checkOverflow:Kw,classes:Gw},vc={},Qt=class n{constructor(){let e,t;for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?t=s[0]:[e,t]=s,t||(t={}),t=qe({},t),e&&!t.el&&(t.el=e);let o=Oe();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){let u=[];return o.querySelectorAll(t.el).forEach(h=>{let m=qe({},t,{el:h});u.push(new n(m))}),u}let a=this;a.__swiper__=!0,a.support=Rf(),a.device=kf({userAgent:t.userAgent}),a.browser=qE(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);let l={};a.modules.forEach(u=>{u({params:t,swiper:a,extendParams:Jw(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});let d=qe({},_f,l);return a.params=qe({},d,vc,t),a.originalParams=qe({},a.params),a.passedParams=qe({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(u=>{a.on(u,a.params.on[u])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){let{slidesEl:t,params:i}=this,s=ke(t,`.${i.slideClass}, swiper-slide`),r=fs(s[0]);return fs(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){let e=this,{slidesEl:t,params:i}=e;e.slides=ke(t,`.${i.slideClass}, swiper-slide`)}enable(){let e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){let e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){let i=this;e=Math.min(Math.max(e,0),1);let s=i.minTranslate(),o=(i.maxTranslate()-s)*e+s;i.translateTo(o,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){let e=this;if(!e.params._emitClasses||!e.el)return;let t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){let t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){let e=this;if(!e.params._emitClasses||!e.el)return;let t=[];e.slides.forEach(i=>{let s=e.getSlideClasses(i);t.push({slideEl:i,classNames:s}),e.emit("_slideClass",i,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);let i=this,{params:s,slides:r,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:d}=i,u=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let h=r[d]?Math.ceil(r[d].swiperSlideSize):0,m;for(let p=d+1;p<r.length;p+=1)r[p]&&!m&&(h+=Math.ceil(r[p].swiperSlideSize),u+=1,h>l&&(m=!0));for(let p=d-1;p>=0;p-=1)r[p]&&!m&&(h+=r[p].swiperSlideSize,u+=1,h>l&&(m=!0))}else if(e==="current")for(let h=d+1;h<r.length;h+=1)(t?o[h]+a[h]-o[d]<l:o[h]-o[d]<l)&&(u+=1);else for(let h=d-1;h>=0;h-=1)o[d]-o[h]<l&&(u+=1);return u}update(){let e=this;if(!e||e.destroyed)return;let{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&no(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){let o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)s(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){let o=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(o.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||s()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);let i=this,s=i.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${s}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(r=>{e==="vertical"?r.style.width="":r.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){let t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){let t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);let s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`,o=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(s()):ke(i,s())[0];return!o&&t.params.createElements&&(o=pt("div",t.params.wrapperClass),i.append(o),ke(i,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:i,wrapperEl:o,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:o,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Dt(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Dt(i,"direction")==="rtl"),wrongRTL:Dt(o,"display")==="-webkit-box"}),!0}init(e){let t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();let s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(r=>{r.complete?no(t,r):r.addEventListener("load",o=>{no(t,o.target)})}),bc(t),t.initialized=!0,bc(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);let i=this,{params:s,el:r,wrapperEl:o,slides:a}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),t&&(i.removeClasses(),r&&typeof r!="string"&&r.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),Af(i)),i.destroyed=!0),null}static extendDefaults(e){qe(vc,e)}static get extendedDefaults(){return vc}static get defaults(){return _f}static installModule(e){n.prototype.__modules__||(n.prototype.__modules__=[]);let t=n.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>n.installModule(t)),n):(n.installModule(e),n)}};Object.keys(gc).forEach(n=>{Object.keys(gc[n]).forEach(e=>{Qt.prototype[e]=gc[n][e]})});Qt.use([UE,YE]);function so(n,e,t,i){return n.params.createElements&&Object.keys(i).forEach(s=>{if(!t[s]&&t.auto===!0){let r=ke(n.el,`.${i[s]}`)[0];r||(r=pt("div",i[s]),r.className=i[s],n.el.append(r)),t[s]=r,e[s]=r}}),t}function yc(n){let{swiper:e,extendParams:t,on:i,emit:s}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function r(g){let v;return g&&typeof g=="string"&&e.isElement&&(v=e.el.querySelector(g)||e.hostEl.querySelector(g),v)?v:(g&&(typeof g=="string"&&(v=[...document.querySelectorAll(g)]),e.params.uniqueNavElements&&typeof g=="string"&&v&&v.length>1&&e.el.querySelectorAll(g).length===1?v=e.el.querySelector(g):v&&v.length===1&&(v=v[0])),g&&!v?g:v)}function o(g,v){let w=e.params.navigation;g=Je(g),g.forEach(y=>{y&&(y.classList[v?"add":"remove"](...w.disabledClass.split(" ")),y.tagName==="BUTTON"&&(y.disabled=v),e.params.watchOverflow&&e.enabled&&y.classList[e.isLocked?"add":"remove"](w.lockClass))})}function a(){let{nextEl:g,prevEl:v}=e.navigation;if(e.params.loop){o(v,!1),o(g,!1);return}o(v,e.isBeginning&&!e.params.rewind),o(g,e.isEnd&&!e.params.rewind)}function l(g){g.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),s("navigationPrev"))}function d(g){g.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),s("navigationNext"))}function u(){let g=e.params.navigation;if(e.params.navigation=so(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(g.nextEl||g.prevEl))return;let v=r(g.nextEl),w=r(g.prevEl);Object.assign(e.navigation,{nextEl:v,prevEl:w}),v=Je(v),w=Je(w);let y=(P,O)=>{P&&P.addEventListener("click",O==="next"?d:l),!e.enabled&&P&&P.classList.add(...g.lockClass.split(" "))};v.forEach(P=>y(P,"next")),w.forEach(P=>y(P,"prev"))}function h(){let{nextEl:g,prevEl:v}=e.navigation;g=Je(g),v=Je(v);let w=(y,P)=>{y.removeEventListener("click",P==="next"?d:l),y.classList.remove(...e.params.navigation.disabledClass.split(" "))};g.forEach(y=>w(y,"next")),v.forEach(y=>w(y,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?p():(u(),a())}),i("toEdge fromEdge lock unlock",()=>{a()}),i("destroy",()=>{h()}),i("enable disable",()=>{let{nextEl:g,prevEl:v}=e.navigation;if(g=Je(g),v=Je(v),e.enabled){a();return}[...g,...v].filter(w=>!!w).forEach(w=>w.classList.add(e.params.navigation.lockClass))}),i("click",(g,v)=>{let{nextEl:w,prevEl:y}=e.navigation;w=Je(w),y=Je(y);let P=v.target,O=y.includes(P)||w.includes(P);if(e.isElement&&!O){let R=v.path||v.composedPath&&v.composedPath();R&&(O=R.find(D=>w.includes(D)||y.includes(D)))}if(e.params.navigation.hideOnClick&&!O){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===P||e.pagination.el.contains(P)))return;let R;w.length?R=w[0].classList.contains(e.params.navigation.hiddenClass):y.length&&(R=y[0].classList.contains(e.params.navigation.hiddenClass)),s(R===!0?"navigationShow":"navigationHide"),[...w,...y].filter(D=>!!D).forEach(D=>D.classList.toggle(e.params.navigation.hiddenClass))}});let m=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),u(),a()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),h()};Object.assign(e.navigation,{enable:m,disable:p,update:a,init:u,destroy:h})}function Ec(n){let{swiper:e,extendParams:t,on:i,emit:s,params:r}=n;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let o,a,l=r&&r.autoplay?r.autoplay.delay:3e3,d=r&&r.autoplay?r.autoplay.delay:3e3,u,h=new Date().getTime(),m,p,g,v,w,y,P;function O(x){!e||e.destroyed||!e.wrapperEl||x.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",O),!(P||x.detail&&x.detail.bySwiperTouchMove)&&V())}let R=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?m=!0:m&&(d=u,m=!1);let x=e.autoplay.paused?u:h+d-new Date().getTime();e.autoplay.timeLeft=x,s("autoplayTimeLeft",x,x/l),a=requestAnimationFrame(()=>{R()})},D=()=>{let x;return e.virtual&&e.params.virtual.enabled?x=e.slides.filter($=>$.classList.contains("swiper-slide-active"))[0]:x=e.slides[e.activeIndex],x?parseInt(x.getAttribute("data-swiper-autoplay"),10):void 0},H=x=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(a),R();let F=typeof x>"u"?e.params.autoplay.delay:x;l=e.params.autoplay.delay,d=e.params.autoplay.delay;let $=D();!Number.isNaN($)&&$>0&&typeof x>"u"&&(F=$,l=$,d=$),u=F;let U=e.params.speed,te=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(U,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,U,!0,!0),s("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(U,!0,!0),s("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,U,!0,!0),s("autoplay")),e.params.cssMode&&(h=new Date().getTime(),requestAnimationFrame(()=>{H()})))};return F>0?(clearTimeout(o),o=setTimeout(()=>{te()},F)):requestAnimationFrame(()=>{te()}),F},q=()=>{h=new Date().getTime(),e.autoplay.running=!0,H(),s("autoplayStart")},G=()=>{e.autoplay.running=!1,clearTimeout(o),cancelAnimationFrame(a),s("autoplayStop")},ee=(x,F)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(o),x||(y=!0);let $=()=>{s("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",O):V()};if(e.autoplay.paused=!0,F){w&&(u=e.params.autoplay.delay),w=!1,$();return}u=(u||e.params.autoplay.delay)-(new Date().getTime()-h),!(e.isEnd&&u<0&&!e.params.loop)&&(u<0&&(u=0),$())},V=()=>{e.isEnd&&u<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(h=new Date().getTime(),y?(y=!1,H(u)):H(),e.autoplay.paused=!1,s("autoplayResume"))},K=()=>{if(e.destroyed||!e.autoplay.running)return;let x=Oe();x.visibilityState==="hidden"&&(y=!0,ee(!0)),x.visibilityState==="visible"&&V()},J=x=>{x.pointerType==="mouse"&&(y=!0,P=!0,!(e.animating||e.autoplay.paused)&&ee(!0))},j=x=>{x.pointerType==="mouse"&&(P=!1,e.autoplay.paused&&V())},z=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",J),e.el.addEventListener("pointerleave",j))},_=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",J),e.el.removeEventListener("pointerleave",j))},b=()=>{Oe().addEventListener("visibilitychange",K)},C=()=>{Oe().removeEventListener("visibilitychange",K)};i("init",()=>{e.params.autoplay.enabled&&(z(),b(),q())}),i("destroy",()=>{_(),C(),e.autoplay.running&&G()}),i("_freeModeStaticRelease",()=>{(g||y)&&V()}),i("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?G():ee(!0,!0)}),i("beforeTransitionStart",(x,F,$)=>{e.destroyed||!e.autoplay.running||($||!e.params.autoplay.disableOnInteraction?ee(!0,!0):G())}),i("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){G();return}p=!0,g=!1,y=!1,v=setTimeout(()=>{y=!0,g=!0,ee(!0)},200)}}),i("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!p)){if(clearTimeout(v),clearTimeout(o),e.params.autoplay.disableOnInteraction){g=!1,p=!1;return}g&&e.params.cssMode&&V(),g=!1,p=!1}}),i("slideChange",()=>{e.destroyed||!e.autoplay.running||(w=!0)}),Object.assign(e.autoplay,{start:q,stop:G,pause:ee,resume:V})}var oo=class extends re{connect(){this.swiper=new Qt(".games_swiper",{modules:[yc,Ec],slidesPerView:12,spaceBetween:5,breakpoints:{320:{slidesPerView:3,spaceBetween:3},480:{slidesPerView:4,spaceBetween:5},768:{slidesPerView:6,spaceBetween:5},992:{slidesPerView:8,spaceBetween:5},1200:{slidesPerView:10,spaceBetween:5},1440:{slidesPerView:12,spaceBetween:5}},loop:!0,autoplay:{delay:5e3},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})}};var ao=class extends re{static targets=["message","button"];connect(){this.checkTextLength(),window.addEventListener("resize",this.checkTextLength.bind(this))}disconnect(){window.removeEventListener("resize",this.checkTextLength.bind(this))}call(){this.element.classList.toggle("open")}checkTextLength(){let n=this.messageTarget.textContent.length,e=window.innerWidth;n<=200&&e>768?this.buttonTarget.style.display="none":this.buttonTarget.style.display=""}};var lo=class extends re{call(){this.element.classList.toggle("collapse-bar")}};var co=class extends re{static values={noImageUrl:String};connect(){this.noImageUrlValue=window.location.origin+window.noimage_url,this.processImages()}processImages(){this.element.querySelectorAll(".game-img").forEach(e=>{let t=new Image;t.src=e.style.backgroundImage.replace(/^url\(["']?/,"").replace(/["']?\)$/,""),t.addEventListener("error",()=>this.handleImageError(e))})}handleImageError(n){n.style.backgroundImage=`url(${this.noImageUrlValue})`}};var uo=class extends re{connect(){this.scroller()}showLeftBar(n){let e=n.target.parentElement.parentElement;e.style.transform==""?e.style.transform="rotate(180deg)":e.style.transform="",document.querySelector(".left-bar").classList.toggle("hidden-left-bar")}showMainMenu(){document.querySelector(".navbar-toggler").click()}up(){window.scrollTo({top:0,behavior:"smooth"})}scroller(){window.addEventListener("scroll",()=>{let n=document.getElementById("scroller");window.scrollY>300?(n.style.visibility="visible",n.style.opacity=1):(n.style.opacity=0,setTimeout(()=>{n.style.visibility="hidden"},400))})}};var ho=class extends re{connect(){this.element.scrollTop=this.element.scrollHeight}};var fo=class extends re{static targets=["text"];copy(){let n=this.textTarget.innerText;navigator.clipboard.writeText(n)}};Re.register("confirm",Cr);Re.register("btn_preloader",Lr);Re.register("notices",Mr);Re.register("clear-form",Pr);Re.register("fancybox",Qr);Re.register("pagy-initializer",eo);Re.register("map",to);Re.register("swiper",oo);Re.register("expand_text",ao);Re.register("collapse",lo);Re.register("no_image",co);Re.register("mobile-bar",uo);Re.register("auto-scroll-down",ho);Re.register("clipboard",fo);var yL=ou($l());var Zw="2.1.8",Oi="[data-trix-attachment]",ad={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}},$e={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,htmlAttributes:["language"],text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test(n){return $f(n.parentNode)===$e[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test(n){return $f(n.parentNode)===$e[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}},$f=n=>{var e;return n==null||(e=n.tagName)===null||e===void 0?void 0:e.toLowerCase()},zf=navigator.userAgent.match(/android\s([0-9]+.*Chrome)/i),Tc=zf&&parseInt(zf[1]),Os={composesExistingText:/Android.*Chrome/.test(navigator.userAgent),recentAndroid:Tc&&Tc>12,samsungAndroid:Tc&&navigator.userAgent.match(/Android.*SM-/),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:typeof InputEvent<"u"&&["data","getTargetRanges","inputType"].every(n=>n in InputEvent.prototype)},ie={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"},Qw=[ie.bytes,ie.KB,ie.MB,ie.GB,ie.TB,ie.PB],hp={prefix:"IEC",precision:2,formatter(n){switch(n){case 0:return"0 ".concat(ie.bytes);case 1:return"1 ".concat(ie.byte);default:let e;this.prefix==="SI"?e=1e3:this.prefix==="IEC"&&(e=1024);let t=Math.floor(Math.log(n)/Math.log(e)),i=(n/Math.pow(e,t)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"");return"".concat(i," ").concat(Qw[t])}}},Ho="\uFEFF",ti="\xA0",fp=function(n){for(let e in n){let t=n[e];this[e]=t}return this},ld=document.documentElement,eS=ld.matches,ve=function(n){let{onElement:e,matchingSelector:t,withCallback:i,inPhase:s,preventDefault:r,times:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e||ld,l=t,d=s==="capturing",u=function(h){o!=null&&--o==0&&u.destroy();let m=ni(h.target,{matchingSelector:l});m!=null&&(i?.call(m,h,m),r&&h.preventDefault())};return u.destroy=()=>a.removeEventListener(n,u,d),a.addEventListener(n,u,d),u},Es=function(n){let{onElement:e,bubbles:t,cancelable:i,attributes:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e??ld;t=t!==!1,i=i!==!1;let o=document.createEvent("Events");return o.initEvent(n,t,i),s!=null&&fp.call(o,s),r.dispatchEvent(o)},pp=function(n,e){if(n?.nodeType===1)return eS.call(n,e)},ni=function(n){let{matchingSelector:e,untilNode:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(;n&&n.nodeType!==Node.ELEMENT_NODE;)n=n.parentNode;if(n!=null){if(e==null)return n;if(n.closest&&t==null)return n.closest(e);for(;n&&n!==t;){if(pp(n,e))return n;n=n.parentNode}}},cd=n=>document.activeElement!==n&&Pi(n,document.activeElement),Pi=function(n,e){if(n&&e)for(;e;){if(e===n)return!0;e=e.parentNode}},xc=function(n){var e;if((e=n)===null||e===void 0||!e.parentNode)return;let t=0;for(n=n.previousSibling;n;)t++,n=n.previousSibling;return t},si=n=>{var e;return n==null||(e=n.parentNode)===null||e===void 0?void 0:e.removeChild(n)},Eo=function(n){let{onlyNodesOfType:e,usingFilter:t,expandEntityReferences:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=(()=>{switch(e){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}})();return document.createTreeWalker(n,s,t??null,i===!0)},Be=n=>{var e;return n==null||(e=n.tagName)===null||e===void 0?void 0:e.toLowerCase()},se=function(n){let e,t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof n=="object"?(i=n,n=i.tagName):i={attributes:i};let s=document.createElement(n);if(i.editable!=null&&(i.attributes==null&&(i.attributes={}),i.attributes.contenteditable=i.editable),i.attributes)for(e in i.attributes)t=i.attributes[e],s.setAttribute(e,t);if(i.style)for(e in i.style)t=i.style[e],s.style[e]=t;if(i.data)for(e in i.data)t=i.data[e],s.dataset[e]=t;return i.className&&i.className.split(" ").forEach(r=>{s.classList.add(r)}),i.textContent&&(s.textContent=i.textContent),i.childNodes&&[].concat(i.childNodes).forEach(r=>{s.appendChild(r)}),s},gs,ws=function(){if(gs!=null)return gs;gs=[];for(let n in $e){let e=$e[n];e.tagName&&gs.push(e.tagName)}return gs},Cc=n=>En(n?.firstChild),Hf=function(n){let{strict:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{strict:!0};return e?En(n):En(n)||!En(n.firstChild)&&function(t){return ws().includes(Be(t))&&!ws().includes(Be(t.firstChild))}(n)},En=n=>tS(n)&&n?.data==="block",tS=n=>n?.nodeType===Node.COMMENT_NODE,wn=function(n){let{name:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n)return Ss(n)?n.data===Ho?!e||n.parentNode.dataset.trixCursorTarget===e:void 0:wn(n.firstChild)},_i=n=>pp(n,Oi),mp=n=>Ss(n)&&n?.data==="",Ss=n=>n?.nodeType===Node.TEXT_NODE,dd={level2Enabled:!0,getLevel(){return this.level2Enabled&&Os.supportsInputEvents?2:0},pickFiles(n){let e=se("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId});e.addEventListener("change",()=>{n(e.files),si(e)}),si(document.getElementById(this.fileInputId)),document.body.appendChild(e),e.click()}},bo={removeBlankTableCells:!1,tableCellSeparator:" | ",tableRowSeparator:`
`},Di={bold:{tagName:"strong",inheritable:!0,parser(n){let e=window.getComputedStyle(n);return e.fontWeight==="bold"||e.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:n=>window.getComputedStyle(n).fontStyle==="italic"},href:{groupTagName:"a",parser(n){let e="a:not(".concat(Oi,")"),t=n.closest(e);if(t)return t.getAttribute("href")}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}},gp={getDefaultHTML:()=>`<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="`.concat(ie.bold,'" tabindex="-1">').concat(ie.bold,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="`).concat(ie.italic,'" tabindex="-1">').concat(ie.italic,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="`).concat(ie.strike,'" tabindex="-1">').concat(ie.strike,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="`).concat(ie.link,'" tabindex="-1">').concat(ie.link,`</button>
      </span>

      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="`).concat(ie.heading1,'" tabindex="-1">').concat(ie.heading1,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="`).concat(ie.quote,'" tabindex="-1">').concat(ie.quote,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="`).concat(ie.code,'" tabindex="-1">').concat(ie.code,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="`).concat(ie.bullets,'" tabindex="-1">').concat(ie.bullets,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="`).concat(ie.numbers,'" tabindex="-1">').concat(ie.numbers,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="`).concat(ie.outdent,'" tabindex="-1">').concat(ie.outdent,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="`).concat(ie.indent,'" tabindex="-1">').concat(ie.indent,`</button>
      </span>

      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="`).concat(ie.attachFiles,'" tabindex="-1">').concat(ie.attachFiles,`</button>
      </span>

      <span class="trix-button-group-spacer"></span>

      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="`).concat(ie.undo,'" tabindex="-1">').concat(ie.undo,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="`).concat(ie.redo,'" tabindex="-1">').concat(ie.redo,`</button>
      </span>
    </div>

    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="`).concat(ie.urlPlaceholder,'" aria-label="').concat(ie.url,`" required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(ie.link,`" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(ie.unlink,`" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`)},qc={interval:5e3},_s=Object.freeze({__proto__:null,attachments:ad,blockAttributes:$e,browser:Os,css:{attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"},fileSize:hp,input:dd,keyNames:{8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},lang:ie,parser:bo,textAttributes:Di,toolbar:gp,undo:qc}),Ee=class{static proxyMethod(e){let{name:t,toMethod:i,toProperty:s,optional:r}=iS(e);this.prototype[t]=function(){let o,a;var l,d;return i?a=r?(l=this[i])===null||l===void 0?void 0:l.call(this):this[i]():s&&(a=this[s]),r?(o=(d=a)===null||d===void 0?void 0:d[t],o?Vf.call(o,a,arguments):void 0):(o=a[t],Vf.call(o,a,arguments))}}},iS=function(n){let e=n.match(nS);if(!e)throw new Error("can't parse @proxyMethod expression: ".concat(n));let t={name:e[4]};return e[2]!=null?t.toMethod=e[1]:t.toProperty=e[1],e[3]!=null&&(t.optional=!0),t},{apply:Vf}=Function.prototype,nS=new RegExp("^(.+?)(\\(\\))?(\\?)?\\.(.+?)$"),Lc,Mc,Pc,Ii=class extends Ee{static box(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e instanceof this?e:this.fromUCS2String(e?.toString())}static fromUCS2String(e){return new this(e,Uc(e))}static fromCodepoints(e){return new this(Yc(e),e)}constructor(e,t){super(...arguments),this.ucs2String=e,this.codepoints=t,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}offsetToUCS2Offset(e){return Yc(this.codepoints.slice(0,Math.max(0,e))).length}offsetFromUCS2Offset(e){return Uc(this.ucs2String.slice(0,Math.max(0,e))).length}slice(){return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))}charAt(e){return this.slice(e,e+1)}isEqualTo(e){return this.constructor.box(e).ucs2String===this.ucs2String}toJSON(){return this.ucs2String}getCacheKey(){return this.ucs2String}toString(){return this.ucs2String}},sS=((Lc=Array.from)===null||Lc===void 0?void 0:Lc.call(Array,"\u{1F47C}").length)===1,rS=((Mc=" ".codePointAt)===null||Mc===void 0?void 0:Mc.call(" ",0))!=null,oS=((Pc=String.fromCodePoint)===null||Pc===void 0?void 0:Pc.call(String,32,128124))===" \u{1F47C}",Uc,Yc;Uc=sS&&rS?n=>Array.from(n).map(e=>e.codePointAt(0)):function(n){let e=[],t=0,{length:i}=n;for(;t<i;){let s=n.charCodeAt(t++);if(55296<=s&&s<=56319&&t<i){let r=n.charCodeAt(t++);(64512&r)==56320?s=((1023&s)<<10)+(1023&r)+65536:t--}e.push(s)}return e},Yc=oS?n=>String.fromCodePoint(...Array.from(n||[])):function(n){return(()=>{let e=[];return Array.from(n).forEach(t=>{let i="";t>65535&&(t-=65536,i+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e.push(i+String.fromCharCode(t))}),e})().join("")};var aS=0,Bt=class extends Ee{static fromJSONString(e){return this.fromJSON(JSON.parse(e))}constructor(){super(...arguments),this.id=++aS}hasSameConstructorAs(e){return this.constructor===e?.constructor}isEqualTo(e){return this===e}inspect(){let e=[],t=this.contentsForInspection()||{};for(let i in t){let s=t[i];e.push("".concat(i,"=").concat(s))}return"#<".concat(this.constructor.name,":").concat(this.id).concat(e.length?" ".concat(e.join(", ")):"",">")}contentsForInspection(){}toJSONString(){return JSON.stringify(this)}toUTF16String(){return Ii.box(this)}getCacheKey(){return this.id.toString()}},Ni=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0},ud=function(n){let e=n.slice(0);for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return e.splice(...i),e},lS=/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,cS=function(){let n=se("input",{dir:"auto",name:"x",dirName:"x.dir"}),e=se("textarea",{dir:"auto",name:"y",dirName:"y.dir"}),t=se("form");t.appendChild(n),t.appendChild(e);let i=function(){try{return new FormData(t).has(e.dirName)}catch{return!1}}(),s=function(){try{return n.matches(":dir(ltr),:dir(rtl)")}catch{return!1}}();return i?function(r){return e.value=r,new FormData(t).get(e.dirName)}:s?function(r){return n.value=r,n.matches(":dir(rtl)")?"rtl":"ltr"}:function(r){let o=r.trim().charAt(0);return lS.test(o)?"rtl":"ltr"}}(),Oc=null,_c=null,Rc=null,po=null,Gc=()=>(Oc||(Oc=uS().concat(dS())),Oc),we=n=>$e[n],dS=()=>(_c||(_c=Object.keys($e)),_c),Xc=n=>Di[n],uS=()=>(Rc||(Rc=Object.keys(Di)),Rc),vp=function(n,e){hS(n).textContent=e.replace(/%t/g,n)},hS=function(n){let e=document.createElement("style");e.setAttribute("type","text/css"),e.setAttribute("data-tag-name",n.toLowerCase());let t=fS();return t&&e.setAttribute("nonce",t),document.head.insertBefore(e,document.head.firstChild),e},fS=function(){let n=jf("trix-csp-nonce")||jf("csp-nonce");if(n){let{nonce:e,content:t}=n;return e==""?t:e}},jf=n=>document.head.querySelector("meta[name=".concat(n,"]")),Wf={"application/x-trix-feature-detection":"test"},bp=function(n){let e=n.getData("text/plain"),t=n.getData("text/html");if(!e||!t)return e?.length;{let{body:i}=new DOMParser().parseFromString(t,"text/html");if(i.textContent===e)return!i.querySelector("*")}},yp=/Mac|^iP/.test(navigator.platform)?n=>n.metaKey:n=>n.ctrlKey,hd=n=>setTimeout(n,1),Ep=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={};for(let t in n){let i=n[t];e[t]=i}return e},Pn=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object.keys(n).length!==Object.keys(e).length)return!1;for(let t in n)if(n[t]!==e[t])return!1;return!0},he=function(n){if(n!=null)return Array.isArray(n)||(n=[n,n]),[qf(n[0]),qf(n[1]!=null?n[1]:n[0])]},Ft=function(n){if(n==null)return;let[e,t]=he(n);return Kc(e,t)},wo=function(n,e){if(n==null||e==null)return;let[t,i]=he(n),[s,r]=he(e);return Kc(t,s)&&Kc(i,r)},qf=function(n){return typeof n=="number"?n:Ep(n)},Kc=function(n,e){return typeof n=="number"?n===e:Pn(n,e)},So=class extends Ee{constructor(){super(...arguments),this.update=this.update.bind(this),this.selectionManagers=[]}start(){this.started||(this.started=!0,document.addEventListener("selectionchange",this.update,!0))}stop(){if(this.started)return this.started=!1,document.removeEventListener("selectionchange",this.update,!0)}registerSelectionManager(e){if(!this.selectionManagers.includes(e))return this.selectionManagers.push(e),this.start()}unregisterSelectionManager(e){if(this.selectionManagers=this.selectionManagers.filter(t=>t!==e),this.selectionManagers.length===0)return this.stop()}notifySelectionManagersOfSelectionChange(){return this.selectionManagers.map(e=>e.selectionDidChange())}update(){this.notifySelectionManagersOfSelectionChange()}reset(){this.update()}},Fi=new So,wp=function(){let n=window.getSelection();if(n.rangeCount>0)return n},As=function(){var n;let e=(n=wp())===null||n===void 0?void 0:n.getRangeAt(0);if(e&&!pS(e))return e},Sp=function(n){let e=window.getSelection();return e.removeAllRanges(),e.addRange(n),Fi.update()},pS=n=>Uf(n.startContainer)||Uf(n.endContainer),Uf=n=>!Object.getPrototypeOf(n),ys=n=>n.replace(new RegExp("".concat(Ho),"g"),"").replace(new RegExp("".concat(ti),"g")," "),fd=new RegExp("[^\\S".concat(ti,"]")),pd=n=>n.replace(new RegExp("".concat(fd.source),"g")," ").replace(/\ {2,}/g," "),Yf=function(n,e){if(n.isEqualTo(e))return["",""];let t=kc(n,e),{length:i}=t.utf16String,s;if(i){let{offset:r}=t,o=n.codepoints.slice(0,r).concat(n.codepoints.slice(r+i));s=kc(e,Ii.fromCodepoints(o))}else s=kc(e,n);return[t.utf16String.toString(),s.utf16String.toString()]},kc=function(n,e){let t=0,i=n.length,s=e.length;for(;t<i&&n.charAt(t).isEqualTo(e.charAt(t));)t++;for(;i>t+1&&n.charAt(i-1).isEqualTo(e.charAt(s-1));)i--,s--;return{utf16String:n.slice(t,i),offset:t}},gt=class n extends Bt{static fromCommonAttributesOfObjects(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(!e.length)return new this;let t=vs(e[0]),i=t.getKeys();return e.slice(1).forEach(s=>{i=t.getKeysCommonToHash(vs(s)),t=t.slice(i)}),t}static box(e){return vs(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(...arguments),this.values=yo(e)}add(e,t){return this.merge(mS(e,t))}remove(e){return new n(yo(this.values,e))}get(e){return this.values[e]}has(e){return e in this.values}merge(e){return new n(gS(this.values,vS(e)))}slice(e){let t={};return Array.from(e).forEach(i=>{this.has(i)&&(t[i]=this.values[i])}),new n(t)}getKeys(){return Object.keys(this.values)}getKeysCommonToHash(e){return e=vs(e),this.getKeys().filter(t=>this.values[t]===e.values[t])}isEqualTo(e){return Ni(this.toArray(),vs(e).toArray())}isEmpty(){return this.getKeys().length===0}toArray(){if(!this.array){let e=[];for(let t in this.values){let i=this.values[t];e.push(e.push(t,i))}this.array=e.slice(0)}return this.array}toObject(){return yo(this.values)}toJSON(){return this.toObject()}contentsForInspection(){return{values:JSON.stringify(this.values)}}},mS=function(n,e){let t={};return t[n]=e,t},gS=function(n,e){let t=yo(n);for(let i in e){let s=e[i];t[i]=s}return t},yo=function(n,e){let t={};return Object.keys(n).sort().forEach(i=>{i!==e&&(t[i]=n[i])}),t},vs=function(n){return n instanceof gt?n:new gt(n)},vS=function(n){return n instanceof gt?n.values:n},xs=class{static groupObjects(){let e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:i,asTree:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s&&i==null&&(i=0);let r=[];return Array.from(t).forEach(o=>{var a;if(e){var l,d,u;if((l=o.canBeGrouped)!==null&&l!==void 0&&l.call(o,i)&&(d=(u=e[e.length-1]).canBeGroupedWith)!==null&&d!==void 0&&d.call(u,o,i))return void e.push(o);r.push(new this(e,{depth:i,asTree:s})),e=null}(a=o.canBeGrouped)!==null&&a!==void 0&&a.call(o,i)?e=[o]:r.push(o)}),e&&r.push(new this(e,{depth:i,asTree:s})),r}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:t,asTree:i}=arguments.length>1?arguments[1]:void 0;this.objects=e,i&&(this.depth=t,this.objects=this.constructor.groupObjects(this.objects,{asTree:i,depth:this.depth+1}))}getObjects(){return this.objects}getDepth(){return this.depth}getCacheKey(){let e=["objectGroup"];return Array.from(this.getObjects()).forEach(t=>{e.push(t.getCacheKey())}),e.join("/")}},Jc=class extends Ee{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects={},Array.from(e).forEach(t=>{let i=JSON.stringify(t);this.objects[i]==null&&(this.objects[i]=t)})}find(e){let t=JSON.stringify(e);return this.objects[t]}},Zc=class{constructor(e){this.reset(e)}add(e){let t=Gf(e);this.elements[t]=e}remove(e){let t=Gf(e),i=this.elements[t];if(i)return delete this.elements[t],i}reset(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this.elements={},Array.from(e).forEach(t=>{this.add(t)}),e}},Gf=n=>n.dataset.trixStoreKey,Sn=class extends Ee{isPerforming(){return this.performing===!0}hasPerformed(){return this.performed===!0}hasSucceeded(){return this.performed&&this.succeeded}hasFailed(){return this.performed&&!this.succeeded}getPromise(){return this.promise||(this.promise=new Promise((e,t)=>(this.performing=!0,this.perform((i,s)=>{this.succeeded=i,this.performing=!1,this.performed=!0,this.succeeded?e(s):t(s)})))),this.promise}perform(e){return e(!1)}release(){var e,t;(e=this.promise)===null||e===void 0||(t=e.cancel)===null||t===void 0||t.call(e),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null}};Sn.proxyMethod("getPromise().then"),Sn.proxyMethod("getPromise().catch");var $t=class extends Ee{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.object=e,this.options=t,this.childViews=[],this.rootView=this}getNodes(){return this.nodes||(this.nodes=this.createNodes()),this.nodes.map(e=>e.cloneNode(!0))}invalidate(){var e;return this.nodes=null,this.childViews=[],(e=this.parentView)===null||e===void 0?void 0:e.invalidate()}invalidateViewForObject(e){var t;return(t=this.findViewForObject(e))===null||t===void 0?void 0:t.invalidate()}findOrCreateCachedChildView(e,t,i){let s=this.getCachedViewForObject(t);return s?this.recordChildView(s):(s=this.createChildView(...arguments),this.cacheViewForObject(s,t)),s}createChildView(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};t instanceof xs&&(i.viewClass=e,e=Qc);let s=new e(t,i);return this.recordChildView(s)}recordChildView(e){return e.parentView=this,e.rootView=this.rootView,this.childViews.push(e),e}getAllChildViews(){let e=[];return this.childViews.forEach(t=>{e.push(t),e=e.concat(t.getAllChildViews())}),e}findElement(){return this.findElementForObject(this.object)}findElementForObject(e){let t=e?.id;if(t)return this.rootView.element.querySelector("[data-trix-id='".concat(t,"']"))}findViewForObject(e){for(let t of this.getAllChildViews())if(t.object===e)return t}getViewCache(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?(this.viewCache||(this.viewCache={}),this.viewCache):void 0}isViewCachingEnabled(){return this.shouldCacheViews!==!1}enableViewCaching(){this.shouldCacheViews=!0}disableViewCaching(){this.shouldCacheViews=!1}getCachedViewForObject(e){var t;return(t=this.getViewCache())===null||t===void 0?void 0:t[e.getCacheKey()]}cacheViewForObject(e,t){let i=this.getViewCache();i&&(i[t.getCacheKey()]=e)}garbageCollectCachedViews(){let e=this.getViewCache();if(e){let t=this.getAllChildViews().concat(this).map(i=>i.object.getCacheKey());for(let i in e)t.includes(i)||delete e[i]}}},Qc=class extends $t{constructor(){super(...arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}getChildViews(){return this.childViews.length||Array.from(this.objectGroup.getObjects()).forEach(e=>{this.findOrCreateCachedChildView(this.viewClass,e,this.options)}),this.childViews}createNodes(){let e=this.createContainerElement();return this.getChildViews().forEach(t=>{Array.from(t.getNodes()).forEach(i=>{e.appendChild(i)})}),[e]}createContainerElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.objectGroup.getDepth();return this.getChildViews()[0].createContainerElement(e)}},bS="style href src width height language class".split(" "),yS="javascript:".split(" "),ES="script iframe form noscript".split(" "),An=class extends Ee{static setHTML(e,t){let i=new this(t).sanitize(),s=i.getHTML?i.getHTML():i.outerHTML;e.innerHTML=s}static sanitize(e,t){let i=new this(e,t);return i.sanitize(),i}constructor(e){let{allowedAttributes:t,forbiddenProtocols:i,forbiddenElements:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.allowedAttributes=t||bS,this.forbiddenProtocols=i||yS,this.forbiddenElements=s||ES,this.body=wS(e)}sanitize(){return this.sanitizeElements(),this.normalizeListElementNesting()}getHTML(){return this.body.innerHTML}getBody(){return this.body}sanitizeElements(){let e=Eo(this.body),t=[];for(;e.nextNode();){let i=e.currentNode;switch(i.nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(i)?t.push(i):this.sanitizeElement(i);break;case Node.COMMENT_NODE:t.push(i)}}return t.forEach(i=>si(i)),this.body}sanitizeElement(e){return e.hasAttribute("href")&&this.forbiddenProtocols.includes(e.protocol)&&e.removeAttribute("href"),Array.from(e.attributes).forEach(t=>{let{name:i}=t;this.allowedAttributes.includes(i)||i.indexOf("data-trix")===0||e.removeAttribute(i)}),e}normalizeListElementNesting(){return Array.from(this.body.querySelectorAll("ul,ol")).forEach(e=>{let t=e.previousElementSibling;t&&Be(t)==="li"&&t.appendChild(e)}),this.body}elementIsRemovable(e){if(e?.nodeType===Node.ELEMENT_NODE)return this.elementIsForbidden(e)||this.elementIsntSerializable(e)}elementIsForbidden(e){return this.forbiddenElements.includes(Be(e))}elementIsntSerializable(e){return e.getAttribute("data-trix-serialize")==="false"&&!_i(e)}},wS=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";n=n.replace(/<\/html[^>]*>[^]*$/i,"</html>");let e=document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=n,Array.from(e.head.querySelectorAll("style")).forEach(t=>{e.body.appendChild(t)}),e.body},{css:ei}=_s,Cs=class extends $t{constructor(){super(...arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}createContentNodes(){return[]}createNodes(){let e,t=e=se({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),i=this.getHref();return i&&(e=se({tagName:"a",editable:!1,attributes:{href:i,tabindex:-1}}),t.appendChild(e)),this.attachment.hasContent()?An.setHTML(e,this.attachment.getContent()):this.createContentNodes().forEach(s=>{e.appendChild(s)}),e.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=se({tagName:"progress",attributes:{class:ei.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),t.appendChild(this.progressElement)),[Xf("left"),t,Xf("right")]}createCaptionElement(){let e=se({tagName:"figcaption",className:ei.attachmentCaption}),t=this.attachmentPiece.getCaption();if(t)e.classList.add("".concat(ei.attachmentCaption,"--edited")),e.textContent=t;else{let i,s,r=this.getCaptionConfig();if(r.name&&(i=this.attachment.getFilename()),r.size&&(s=this.attachment.getFormattedFilesize()),i){let o=se({tagName:"span",className:ei.attachmentName,textContent:i});e.appendChild(o)}if(s){i&&e.appendChild(document.createTextNode(" "));let o=se({tagName:"span",className:ei.attachmentSize,textContent:s});e.appendChild(o)}}return e}getClassName(){let e=[ei.attachment,"".concat(ei.attachment,"--").concat(this.attachment.getType())],t=this.attachment.getExtension();return t&&e.push("".concat(ei.attachment,"--").concat(t)),e.join(" ")}getData(){let e={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},{attributes:t}=this.attachmentPiece;return t.isEmpty()||(e.trixAttributes=JSON.stringify(t)),this.attachment.isPending()&&(e.trixSerialize=!1),e}getHref(){if(!SS(this.attachment.getContent(),"a"))return this.attachment.getHref()}getCaptionConfig(){var e;let t=this.attachment.getType(),i=Ep((e=ad[t])===null||e===void 0?void 0:e.caption);return t==="file"&&(i.name=!0),i}findProgressElement(){var e;return(e=this.findElement())===null||e===void 0?void 0:e.querySelector("progress")}attachmentDidChangeUploadProgress(){let e=this.attachment.getUploadProgress(),t=this.findProgressElement();t&&(t.value=e)}},Xf=n=>se({tagName:"span",textContent:Ho,data:{trixCursorTarget:n,trixSerialize:!1}}),SS=function(n,e){let t=se("div");return An.setHTML(t,n||""),t.querySelector(e)},Ao=class extends Cs{constructor(){super(...arguments),this.attachment.previewDelegate=this}createContentNodes(){return this.image=se({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]}createCaptionElement(){let e=super.createCaptionElement(...arguments);return e.textContent||e.setAttribute("data-trix-placeholder",ie.captionPlaceholder),e}refresh(e){var t;if(e||(e=(t=this.findElement())===null||t===void 0?void 0:t.querySelector("img")),e)return this.updateAttributesForImage(e)}updateAttributesForImage(e){let t=this.attachment.getURL(),i=this.attachment.getPreviewURL();if(e.src=i||t,i===t)e.removeAttribute("data-trix-serialized-attributes");else{let a=JSON.stringify({src:t});e.setAttribute("data-trix-serialized-attributes",a)}let s=this.attachment.getWidth(),r=this.attachment.getHeight();s!=null&&(e.width=s),r!=null&&(e.height=r);let o=["imageElement",this.attachment.id,e.src,e.width,e.height].join("/");e.dataset.trixStoreKey=o}attachmentDidChangeAttributes(){return this.refresh(this.image),this.refresh()}},To=class extends $t{constructor(){super(...arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),this.textConfig=this.options.textConfig,this.context=this.options.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}createNodes(){let e=this.attachment?this.createAttachmentNodes():this.createStringNodes(),t=this.createElement();if(t){let i=function(s){for(;(r=s)!==null&&r!==void 0&&r.firstElementChild;){var r;s=s.firstElementChild}return s}(t);Array.from(e).forEach(s=>{i.appendChild(s)}),e=[t]}return e}createAttachmentNodes(){let e=this.attachment.isPreviewable()?Ao:Cs;return this.createChildView(e,this.piece.attachment,{piece:this.piece}).getNodes()}createStringNodes(){var e;if((e=this.textConfig)!==null&&e!==void 0&&e.plaintext)return[document.createTextNode(this.string)];{let t=[],i=this.string.split(`
`);for(let s=0;s<i.length;s++){let r=i[s];if(s>0){let o=se("br");t.push(o)}if(r.length){let o=document.createTextNode(this.preserveSpaces(r));t.push(o)}}return t}}createElement(){let e,t,i,s={};for(t in this.attributes){i=this.attributes[t];let o=Xc(t);if(o){if(o.tagName){var r;let a=se(o.tagName);r?(r.appendChild(a),r=a):e=r=a}if(o.styleProperty&&(s[o.styleProperty]=i),o.style)for(t in o.style)i=o.style[t],s[t]=i}}if(Object.keys(s).length)for(t in e||(e=se("span")),s)i=s[t],e.style[t]=i;return e}createContainerElement(){for(let e in this.attributes){let t=this.attributes[e],i=Xc(e);if(i&&i.groupTagName){let s={};return s[e]=t,se(i.groupTagName,s)}}}preserveSpaces(e){return this.context.isLast&&(e=e.replace(/\ $/,ti)),e=e.replace(/(\S)\ {3}(\S)/g,"$1 ".concat(ti," $2")).replace(/\ {2}/g,"".concat(ti," ")).replace(/\ {2}/g," ".concat(ti)),(this.context.isFirst||this.context.followsWhitespace)&&(e=e.replace(/^\ /,ti)),e}},xo=class extends $t{constructor(){super(...arguments),this.text=this.object,this.textConfig=this.options.textConfig}createNodes(){let e=[],t=xs.groupObjects(this.getPieces()),i=t.length-1;for(let r=0;r<t.length;r++){let o=t[r],a={};r===0&&(a.isFirst=!0),r===i&&(a.isLast=!0),AS(s)&&(a.followsWhitespace=!0);let l=this.findOrCreateCachedChildView(To,o,{textConfig:this.textConfig,context:a});e.push(...Array.from(l.getNodes()||[]));var s=o}return e}getPieces(){return Array.from(this.text.getPieces()).filter(e=>!e.hasAttribute("blockBreak"))}},AS=n=>/\s$/.test(n?.toString()),{css:Kf}=_s,Co=class extends $t{constructor(){super(...arguments),this.block=this.object,this.attributes=this.block.getAttributes()}createNodes(){let e=[document.createComment("block")];if(this.block.isEmpty())e.push(se("br"));else{var t;let i=(t=we(this.block.getLastAttribute()))===null||t===void 0?void 0:t.text,s=this.findOrCreateCachedChildView(xo,this.block.text,{textConfig:i});e.push(...Array.from(s.getNodes()||[])),this.shouldAddExtraNewlineElement()&&e.push(se("br"))}if(this.attributes.length)return e;{let i,{tagName:s}=$e.default;this.block.isRTL()&&(i={dir:"rtl"});let r=se({tagName:s,attributes:i});return e.forEach(o=>r.appendChild(o)),[r]}}createContainerElement(e){let t={},i,s=this.attributes[e],{tagName:r,htmlAttributes:o=[]}=we(s);if(e===0&&this.block.isRTL()&&Object.assign(t,{dir:"rtl"}),s==="attachmentGallery"){let a=this.block.getBlockBreakPosition();i="".concat(Kf.attachmentGallery," ").concat(Kf.attachmentGallery,"--").concat(a)}return Object.entries(this.block.htmlAttributes).forEach(a=>{let[l,d]=a;o.includes(l)&&(t[l]=d)}),se({tagName:r,className:i,attributes:t})}shouldAddExtraNewlineElement(){return/\n\n$/.test(this.block.toString())}},Tn=class extends $t{static render(e){let t=se("div"),i=new this(e,{element:t});return i.render(),i.sync(),t}constructor(){super(...arguments),this.element=this.options.element,this.elementStore=new Zc,this.setDocument(this.object)}setDocument(e){e.isEqualTo(this.document)||(this.document=this.object=e)}render(){if(this.childViews=[],this.shadowElement=se("div"),!this.document.isEmpty()){let e=xs.groupObjects(this.document.getBlocks(),{asTree:!0});Array.from(e).forEach(t=>{let i=this.findOrCreateCachedChildView(Co,t);Array.from(i.getNodes()).map(s=>this.shadowElement.appendChild(s))})}}isSynced(){return TS(this.shadowElement,this.element)}sync(){let e=this.createDocumentFragmentForSync();for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(e),this.didSync()}didSync(){return this.elementStore.reset(Jf(this.element)),hd(()=>this.garbageCollectCachedViews())}createDocumentFragmentForSync(){let e=document.createDocumentFragment();return Array.from(this.shadowElement.childNodes).forEach(t=>{e.appendChild(t.cloneNode(!0))}),Array.from(Jf(e)).forEach(t=>{let i=this.elementStore.remove(t);i&&t.parentNode.replaceChild(i,t)}),e}},Jf=n=>n.querySelectorAll("[data-trix-store-key]"),TS=(n,e)=>Zf(n.innerHTML)===Zf(e.innerHTML),Zf=n=>n.replace(/&nbsp;/g," ");function mo(n){var e,t;function i(r,o){try{var a=n[r](o),l=a.value,d=l instanceof xS;Promise.resolve(d?l.v:l).then(function(u){if(d){var h=r==="return"?"return":"next";if(!l.k||u.done)return i(h,u);u=n[h](u).value}s(a.done?"return":"normal",u)},function(u){i("throw",u)})}catch(u){s("throw",u)}}function s(r,o){switch(r){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(r,o){return new Promise(function(a,l){var d={key:r,arg:o,resolve:a,reject:l,next:null};t?t=t.next=d:(e=t=d,i(r,o))})},typeof n.return!="function"&&(this.return=void 0)}function xS(n,e){this.v=n,this.k=e}function Ye(n,e,t){return(e=CS(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function CS(n){var e=function(t,i){if(typeof t!="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var r=s.call(t,i||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(t)}(n,"string");return typeof e=="symbol"?e:String(e)}mo.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},mo.prototype.next=function(n){return this._invoke("next",n)},mo.prototype.throw=function(n){return this._invoke("throw",n)},mo.prototype.return=function(n){return this._invoke("return",n)};function fe(n,e){return LS(n,Ap(n,e,"get"))}function md(n,e,t){return MS(n,Ap(n,e,"set"),t),t}function Ap(n,e,t){if(!e.has(n))throw new TypeError("attempted to "+t+" private field on non-instance");return e.get(n)}function LS(n,e){return e.get?e.get.call(n):e.value}function MS(n,e,t){if(e.set)e.set.call(n,t);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=t}}function go(n,e,t){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return t}function Tp(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ts(n,e,t){Tp(n,e),e.set(n,t)}var zt=class extends Bt{static registerType(e,t){t.type=e,this.types[e]=t}static fromJSON(e){let t=this.types[e.type];if(t)return t.fromJSON(e)}constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.attributes=gt.box(t)}copyWithAttributes(e){return new this.constructor(this.getValue(),e)}copyWithAdditionalAttributes(e){return this.copyWithAttributes(this.attributes.merge(e))}copyWithoutAttribute(e){return this.copyWithAttributes(this.attributes.remove(e))}copy(){return this.copyWithAttributes(this.attributes)}getAttribute(e){return this.attributes.get(e)}getAttributesHash(){return this.attributes}getAttributes(){return this.attributes.toObject()}hasAttribute(e){return this.attributes.has(e)}hasSameStringValueAsPiece(e){return e&&this.toString()===e.toString()}hasSameAttributesAsPiece(e){return e&&(this.attributes===e.attributes||this.attributes.isEqualTo(e.attributes))}isBlockBreak(){return!1}isEqualTo(e){return super.isEqualTo(...arguments)||this.hasSameConstructorAs(e)&&this.hasSameStringValueAsPiece(e)&&this.hasSameAttributesAsPiece(e)}isEmpty(){return this.length===0}isSerializable(){return!0}toJSON(){return{type:this.constructor.type,attributes:this.getAttributes()}}contentsForInspection(){return{type:this.constructor.type,attributes:this.attributes.inspect()}}canBeGrouped(){return this.hasAttribute("href")}canBeGroupedWith(e){return this.getAttribute("href")===e.getAttribute("href")}getLength(){return this.length}canBeConsolidatedWith(e){return!1}};Ye(zt,"types",{});var Lo=class extends Sn{constructor(e){super(...arguments),this.url=e}perform(e){let t=new Image;t.onload=()=>(t.width=this.width=t.naturalWidth,t.height=this.height=t.naturalHeight,e(!0,t)),t.onerror=()=>e(!1),t.src=this.url}},xn=class n extends Bt{static attachmentForFile(e){let t=new this(this.attributesForFile(e));return t.setFile(e),t}static attributesForFile(e){return new gt({filename:e.name,filesize:e.size,contentType:e.type})}static fromJSON(e){return new this(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.releaseFile=this.releaseFile.bind(this),this.attributes=gt.box(e),this.didChangeAttributes()}getAttribute(e){return this.attributes.get(e)}hasAttribute(e){return this.attributes.has(e)}getAttributes(){return this.attributes.toObject()}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.attributes.merge(e);var i,s,r,o;if(!this.attributes.isEqualTo(t))return this.attributes=t,this.didChangeAttributes(),(i=this.previewDelegate)===null||i===void 0||(s=i.attachmentDidChangeAttributes)===null||s===void 0||s.call(i,this),(r=this.delegate)===null||r===void 0||(o=r.attachmentDidChangeAttributes)===null||o===void 0?void 0:o.call(r,this)}didChangeAttributes(){if(this.isPreviewable())return this.preloadURL()}isPending(){return this.file!=null&&!(this.getURL()||this.getHref())}isPreviewable(){return this.attributes.has("previewable")?this.attributes.get("previewable"):n.previewablePattern.test(this.getContentType())}getType(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"}getURL(){return this.attributes.get("url")}getHref(){return this.attributes.get("href")}getFilename(){return this.attributes.get("filename")||""}getFilesize(){return this.attributes.get("filesize")}getFormattedFilesize(){let e=this.attributes.get("filesize");return typeof e=="number"?hp.formatter(e):""}getExtension(){var e;return(e=this.getFilename().match(/\.(\w+)$/))===null||e===void 0?void 0:e[1].toLowerCase()}getContentType(){return this.attributes.get("contentType")}hasContent(){return this.attributes.has("content")}getContent(){return this.attributes.get("content")}getWidth(){return this.attributes.get("width")}getHeight(){return this.attributes.get("height")}getFile(){return this.file}setFile(e){if(this.file=e,this.isPreviewable())return this.preloadFile()}releaseFile(){this.releasePreloadedFile(),this.file=null}getUploadProgress(){return this.uploadProgress!=null?this.uploadProgress:0}setUploadProgress(e){var t,i;if(this.uploadProgress!==e)return this.uploadProgress=e,(t=this.uploadProgressDelegate)===null||t===void 0||(i=t.attachmentDidChangeUploadProgress)===null||i===void 0?void 0:i.call(t,this)}toJSON(){return this.getAttributes()}getCacheKey(){return[super.getCacheKey(...arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")}getPreviewURL(){return this.previewURL||this.preloadingURL}setPreviewURL(e){var t,i,s,r;if(e!==this.getPreviewURL())return this.previewURL=e,(t=this.previewDelegate)===null||t===void 0||(i=t.attachmentDidChangeAttributes)===null||i===void 0||i.call(t,this),(s=this.delegate)===null||s===void 0||(r=s.attachmentDidChangePreviewURL)===null||r===void 0?void 0:r.call(s,this)}preloadURL(){return this.preload(this.getURL(),this.releaseFile)}preloadFile(){if(this.file)return this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)}releasePreloadedFile(){this.fileObjectURL&&(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null)}preload(e,t){if(e&&e!==this.getPreviewURL())return this.preloadingURL=e,new Lo(e).then(i=>{let{width:s,height:r}=i;return this.getWidth()&&this.getHeight()||this.setAttributes({width:s,height:r}),this.preloadingURL=null,this.setPreviewURL(e),t?.()}).catch(()=>(this.preloadingURL=null,t?.()))}};Ye(xn,"previewablePattern",/^image(\/(gif|png|webp|jpe?g)|$)/);var Cn=class n extends zt{static fromJSON(e){return new this(xn.fromJSON(e.attachment),e.attributes)}constructor(e){super(...arguments),this.attachment=e,this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}ensureAttachmentExclusivelyHasAttribute(e){this.hasAttribute(e)&&(this.attachment.hasAttribute(e)||this.attachment.setAttributes(this.attributes.slice([e])),this.attributes=this.attributes.remove(e))}removeProhibitedAttributes(){let e=this.attributes.slice(n.permittedAttributes);e.isEqualTo(this.attributes)||(this.attributes=e)}getValue(){return this.attachment}isSerializable(){return!this.attachment.isPending()}getCaption(){return this.attributes.get("caption")||""}isEqualTo(e){var t;return super.isEqualTo(e)&&this.attachment.id===(e==null||(t=e.attachment)===null||t===void 0?void 0:t.id)}toString(){return"\uFFFC"}toJSON(){let e=super.toJSON(...arguments);return e.attachment=this.attachment,e}getCacheKey(){return[super.getCacheKey(...arguments),this.attachment.getCacheKey()].join("/")}toConsole(){return JSON.stringify(this.toString())}};Ye(Cn,"permittedAttributes",["caption","presentation"]),zt.registerType("attachment",Cn);var Ls=class extends zt{static fromJSON(e){return new this(e.string,e.attributes)}constructor(e){super(...arguments),this.string=(t=>t.replace(/\r\n?/g,`
`))(e),this.length=this.string.length}getValue(){return this.string}toString(){return this.string.toString()}isBlockBreak(){return this.toString()===`
`&&this.getAttribute("blockBreak")===!0}toJSON(){let e=super.toJSON(...arguments);return e.string=this.string,e}canBeConsolidatedWith(e){return e&&this.hasSameConstructorAs(e)&&this.hasSameAttributesAsPiece(e)}consolidateWith(e){return new this.constructor(this.toString()+e.toString(),this.attributes)}splitAtOffset(e){let t,i;return e===0?(t=null,i=this):e===this.length?(t=this,i=null):(t=new this.constructor(this.string.slice(0,e),this.attributes),i=new this.constructor(this.string.slice(e),this.attributes)),[t,i]}toConsole(){let{string:e}=this;return e.length>15&&(e=e.slice(0,14)+"\u2026"),JSON.stringify(e.toString())}};zt.registerType("string",Ls);var Ln=class extends Bt{static box(e){return e instanceof this?e:new this(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects=e.slice(0),this.length=this.objects.length}indexOf(e){return this.objects.indexOf(e)}splice(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new this.constructor(ud(this.objects,...t))}eachObject(e){return this.objects.map((t,i)=>e(t,i))}insertObjectAtIndex(e,t){return this.splice(t,0,e)}insertSplittableListAtIndex(e,t){return this.splice(t,0,...e.objects)}insertSplittableListAtPosition(e,t){let[i,s]=this.splitObjectAtPosition(t);return new this.constructor(i).insertSplittableListAtIndex(e,s)}editObjectAtIndex(e,t){return this.replaceObjectAtIndex(t(this.objects[e]),e)}replaceObjectAtIndex(e,t){return this.splice(t,1,e)}removeObjectAtIndex(e){return this.splice(e,1)}getObjectAtIndex(e){return this.objects[e]}getSplittableListInRange(e){let[t,i,s]=this.splitObjectsAtRange(e);return new this.constructor(t.slice(i,s+1))}selectSplittableList(e){let t=this.objects.filter(i=>e(i));return new this.constructor(t)}removeObjectsInRange(e){let[t,i,s]=this.splitObjectsAtRange(e);return new this.constructor(t).splice(i,s-i+1)}transformObjectsInRange(e,t){let[i,s,r]=this.splitObjectsAtRange(e),o=i.map((a,l)=>s<=l&&l<=r?t(a):a);return new this.constructor(o)}splitObjectsAtRange(e){let t,[i,s,r]=this.splitObjectAtPosition(OS(e));return[i,t]=new this.constructor(i).splitObjectAtPosition(_S(e)+r),[i,s,t-1]}getObjectAtPosition(e){let{index:t}=this.findIndexAndOffsetAtPosition(e);return this.objects[t]}splitObjectAtPosition(e){let t,i,{index:s,offset:r}=this.findIndexAndOffsetAtPosition(e),o=this.objects.slice(0);if(s!=null)if(r===0)t=s,i=0;else{let a=this.getObjectAtIndex(s),[l,d]=a.splitAtOffset(r);o.splice(s,1,l,d),t=s+1,i=l.getLength()-r}else t=o.length,i=0;return[o,t,i]}consolidate(){let e=[],t=this.objects[0];return this.objects.slice(1).forEach(i=>{var s,r;(s=(r=t).canBeConsolidatedWith)!==null&&s!==void 0&&s.call(r,i)?t=t.consolidateWith(i):(e.push(t),t=i)}),t&&e.push(t),new this.constructor(e)}consolidateFromIndexToIndex(e,t){let i=this.objects.slice(0).slice(e,t+1),s=new this.constructor(i).consolidate().toArray();return this.splice(e,i.length,...s)}findIndexAndOffsetAtPosition(e){let t,i=0;for(t=0;t<this.objects.length;t++){let s=i+this.objects[t].getLength();if(i<=e&&e<s)return{index:t,offset:e-i};i=s}return{index:null,offset:null}}findPositionAtIndexAndOffset(e,t){let i=0;for(let s=0;s<this.objects.length;s++){let r=this.objects[s];if(s<e)i+=r.getLength();else if(s===e){i+=t;break}}return i}getEndPosition(){return this.endPosition==null&&(this.endPosition=0,this.objects.forEach(e=>this.endPosition+=e.getLength())),this.endPosition}toString(){return this.objects.join("")}toArray(){return this.objects.slice(0)}toJSON(){return this.toArray()}isEqualTo(e){return super.isEqualTo(...arguments)||PS(this.objects,e?.objects)}contentsForInspection(){return{objects:"[".concat(this.objects.map(e=>e.inspect()).join(", "),"]")}}},PS=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(n.length!==e.length)return!1;let t=!0;for(let i=0;i<n.length;i++){let s=n[i];t&&!s.isEqualTo(e[i])&&(t=!1)}return t},OS=n=>n[0],_S=n=>n[1],Ze=class extends Bt{static textForAttachmentWithAttributes(e,t){return new this([new Cn(e,t)])}static textForStringWithAttributes(e,t){return new this([new Ls(e,t)])}static fromJSON(e){return new this(Array.from(e).map(t=>zt.fromJSON(t)))}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments);let t=e.filter(i=>!i.isEmpty());this.pieceList=new Ln(t)}copy(){return this.copyWithPieceList(this.pieceList)}copyWithPieceList(e){return new this.constructor(e.consolidate().toArray())}copyUsingObjectMap(e){let t=this.getPieces().map(i=>e.find(i)||i);return new this.constructor(t)}appendText(e){return this.insertTextAtPosition(e,this.getLength())}insertTextAtPosition(e,t){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(e.pieceList,t))}removeTextAtRange(e){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(e))}replaceTextAtRange(e,t){return this.removeTextAtRange(t).insertTextAtPosition(e,t[0])}moveTextFromRangeToPosition(e,t){if(e[0]<=t&&t<=e[1])return;let i=this.getTextAtRange(e),s=i.getLength();return e[0]<t&&(t-=s),this.removeTextAtRange(e).insertTextAtPosition(i,t)}addAttributeAtRange(e,t,i){let s={};return s[e]=t,this.addAttributesAtRange(s,i)}addAttributesAtRange(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,i=>i.copyWithAdditionalAttributes(e)))}removeAttributeAtRange(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,i=>i.copyWithoutAttribute(e)))}setAttributesAtRange(e,t){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(t,i=>i.copyWithAttributes(e)))}getAttributesAtPosition(e){var t;return((t=this.pieceList.getObjectAtPosition(e))===null||t===void 0?void 0:t.getAttributes())||{}}getCommonAttributes(){let e=Array.from(this.pieceList.toArray()).map(t=>t.getAttributes());return gt.fromCommonAttributesOfObjects(e).toObject()}getCommonAttributesAtRange(e){return this.getTextAtRange(e).getCommonAttributes()||{}}getExpandedRangeForAttributeAtOffset(e,t){let i,s=i=t,r=this.getLength();for(;s>0&&this.getCommonAttributesAtRange([s-1,i])[e];)s--;for(;i<r&&this.getCommonAttributesAtRange([t,i+1])[e];)i++;return[s,i]}getTextAtRange(e){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(e))}getStringAtRange(e){return this.pieceList.getSplittableListInRange(e).toString()}getStringAtPosition(e){return this.getStringAtRange([e,e+1])}startsWithString(e){return this.getStringAtRange([0,e.length])===e}endsWithString(e){let t=this.getLength();return this.getStringAtRange([t-e.length,t])===e}getAttachmentPieces(){return this.pieceList.toArray().filter(e=>!!e.attachment)}getAttachments(){return this.getAttachmentPieces().map(e=>e.attachment)}getAttachmentAndPositionById(e){let t=0;for(let s of this.pieceList.toArray()){var i;if(((i=s.attachment)===null||i===void 0?void 0:i.id)===e)return{attachment:s.attachment,position:t};t+=s.length}return{attachment:null,position:null}}getAttachmentById(e){let{attachment:t}=this.getAttachmentAndPositionById(e);return t}getRangeOfAttachment(e){let t=this.getAttachmentAndPositionById(e.id),i=t.position;if(e=t.attachment)return[i,i+1]}updateAttributesForAttachment(e,t){let i=this.getRangeOfAttachment(t);return i?this.addAttributesAtRange(e,i):this}getLength(){return this.pieceList.getEndPosition()}isEmpty(){return this.getLength()===0}isEqualTo(e){var t;return super.isEqualTo(e)||(e==null||(t=e.pieceList)===null||t===void 0?void 0:t.isEqualTo(this.pieceList))}isBlockBreak(){return this.getLength()===1&&this.pieceList.getObjectAtIndex(0).isBlockBreak()}eachPiece(e){return this.pieceList.eachObject(e)}getPieces(){return this.pieceList.toArray()}getPieceAtPosition(e){return this.pieceList.getObjectAtPosition(e)}contentsForInspection(){return{pieceList:this.pieceList.inspect()}}toSerializableText(){let e=this.pieceList.selectSplittableList(t=>t.isSerializable());return this.copyWithPieceList(e)}toString(){return this.pieceList.toString()}toJSON(){return this.pieceList.toJSON()}toConsole(){return JSON.stringify(this.pieceList.toArray().map(e=>JSON.parse(e.toConsole())))}getDirection(){return cS(this.toString())}isRTL(){return this.getDirection()==="rtl"}},ii=class n extends Bt{static fromJSON(e){return new this(Ze.fromJSON(e.text),e.attributes,e.htmlAttributes)}constructor(e,t,i){super(...arguments),this.text=RS(e||new Ze),this.attributes=t||[],this.htmlAttributes=i||{}}isEmpty(){return this.text.isBlockBreak()}isEqualTo(e){return!!super.isEqualTo(e)||this.text.isEqualTo(e?.text)&&Ni(this.attributes,e?.attributes)&&Pn(this.htmlAttributes,e?.htmlAttributes)}copyWithText(e){return new n(e,this.attributes,this.htmlAttributes)}copyWithoutText(){return this.copyWithText(null)}copyWithAttributes(e){return new n(this.text,e,this.htmlAttributes)}copyWithoutAttributes(){return this.copyWithAttributes(null)}copyUsingObjectMap(e){let t=e.find(this.text);return t?this.copyWithText(t):this.copyWithText(this.text.copyUsingObjectMap(e))}addAttribute(e){let t=this.attributes.concat(Qf(e));return this.copyWithAttributes(t)}addHTMLAttribute(e,t){let i=Object.assign({},this.htmlAttributes,{[e]:t});return new n(this.text,this.attributes,i)}removeAttribute(e){let{listAttribute:t}=we(e),i=tp(tp(this.attributes,e),t);return this.copyWithAttributes(i)}removeLastAttribute(){return this.removeAttribute(this.getLastAttribute())}getLastAttribute(){return ep(this.attributes)}getAttributes(){return this.attributes.slice(0)}getAttributeLevel(){return this.attributes.length}getAttributeAtLevel(e){return this.attributes[e-1]}hasAttribute(e){return this.attributes.includes(e)}hasAttributes(){return this.getAttributeLevel()>0}getLastNestableAttribute(){return ep(this.getNestableAttributes())}getNestableAttributes(){return this.attributes.filter(e=>we(e).nestable)}getNestingLevel(){return this.getNestableAttributes().length}decreaseNestingLevel(){let e=this.getLastNestableAttribute();return e?this.removeAttribute(e):this}increaseNestingLevel(){let e=this.getLastNestableAttribute();if(e){let t=this.attributes.lastIndexOf(e),i=ud(this.attributes,t+1,0,...Qf(e));return this.copyWithAttributes(i)}return this}getListItemAttributes(){return this.attributes.filter(e=>we(e).listAttribute)}isListItem(){var e;return(e=we(this.getLastAttribute()))===null||e===void 0?void 0:e.listAttribute}isTerminalBlock(){var e;return(e=we(this.getLastAttribute()))===null||e===void 0?void 0:e.terminal}breaksOnReturn(){var e;return(e=we(this.getLastAttribute()))===null||e===void 0?void 0:e.breakOnReturn}findLineBreakInDirectionFromPosition(e,t){let i=this.toString(),s;switch(e){case"forward":s=i.indexOf(`
`,t);break;case"backward":s=i.slice(0,t).lastIndexOf(`
`)}if(s!==-1)return s}contentsForInspection(){return{text:this.text.inspect(),attributes:this.attributes}}toString(){return this.text.toString()}toJSON(){return{text:this.text,attributes:this.attributes,htmlAttributes:this.htmlAttributes}}getDirection(){return this.text.getDirection()}isRTL(){return this.text.isRTL()}getLength(){return this.text.getLength()}canBeConsolidatedWith(e){return!this.hasAttributes()&&!e.hasAttributes()&&this.getDirection()===e.getDirection()}consolidateWith(e){let t=Ze.textForStringWithAttributes(`
`),i=this.getTextWithoutBlockBreak().appendText(t);return this.copyWithText(i.appendText(e.text))}splitAtOffset(e){let t,i;return e===0?(t=null,i=this):e===this.getLength()?(t=this,i=null):(t=this.copyWithText(this.text.getTextAtRange([0,e])),i=this.copyWithText(this.text.getTextAtRange([e,this.getLength()]))),[t,i]}getBlockBreakPosition(){return this.text.getLength()-1}getTextWithoutBlockBreak(){return xp(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()}canBeGrouped(e){return this.attributes[e]}canBeGroupedWith(e,t){let i=e.getAttributes(),s=i[t],r=this.attributes[t];return r===s&&!(we(r).group===!1&&!(()=>{if(!po){po=[];for(let o in $e){let{listAttribute:a}=$e[o];a!=null&&po.push(a)}}return po})().includes(i[t+1]))&&(this.getDirection()===e.getDirection()||e.isEmpty())}},RS=function(n){return n=kS(n),n=IS(n)},kS=function(n){let e=!1,t=n.getPieces(),i=t.slice(0,t.length-1),s=t[t.length-1];return s?(i=i.map(r=>r.isBlockBreak()?(e=!0,NS(r)):r),e?new Ze([...i,s]):n):n},DS=Ze.textForStringWithAttributes(`
`,{blockBreak:!0}),IS=function(n){return xp(n)?n:n.appendText(DS)},xp=function(n){let e=n.getLength();return e===0?!1:n.getTextAtRange([e-1,e]).isBlockBreak()},NS=n=>n.copyWithoutAttribute("blockBreak"),Qf=function(n){let{listAttribute:e}=we(n);return e?[e,n]:[n]},ep=n=>n.slice(-1)[0],tp=function(n,e){let t=n.lastIndexOf(e);return t===-1?n:ud(n,t,1)},Ue=class extends Bt{static fromJSON(e){return new this(Array.from(e).map(t=>ii.fromJSON(t)))}static fromString(e,t){let i=Ze.textForStringWithAttributes(e,t);return new this([new ii(i)])}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),e.length===0&&(e=[new ii]),this.blockList=Ln.box(e)}isEmpty(){let e=this.getBlockAtIndex(0);return this.blockList.length===1&&e.isEmpty()&&!e.hasAttributes()}copy(){let e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray();return new this.constructor(e)}copyUsingObjectsFromDocument(e){let t=new Jc(e.getObjects());return this.copyUsingObjectMap(t)}copyUsingObjectMap(e){let t=this.getBlocks().map(i=>e.find(i)||i.copyUsingObjectMap(e));return new this.constructor(t)}copyWithBaseBlockAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.getBlocks().map(i=>{let s=e.concat(i.getAttributes());return i.copyWithAttributes(s)});return new this.constructor(t)}replaceBlock(e,t){let i=this.blockList.indexOf(e);return i===-1?this:new this.constructor(this.blockList.replaceObjectAtIndex(t,i))}insertDocumentAtRange(e,t){let{blockList:i}=e;t=he(t);let[s]=t,{index:r,offset:o}=this.locationFromPosition(s),a=this,l=this.getBlockAtPosition(s);return Ft(t)&&l.isEmpty()&&!l.hasAttributes()?a=new this.constructor(a.blockList.removeObjectAtIndex(r)):l.getBlockBreakPosition()===o&&s++,a=a.removeTextAtRange(t),new this.constructor(a.blockList.insertSplittableListAtPosition(i,s))}mergeDocumentAtRange(e,t){let i,s;t=he(t);let[r]=t,o=this.locationFromPosition(r),a=this.getBlockAtIndex(o.index).getAttributes(),l=e.getBaseBlockAttributes(),d=a.slice(-l.length);if(Ni(l,d)){let m=a.slice(0,-l.length);i=e.copyWithBaseBlockAttributes(m)}else i=e.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(a);let u=i.getBlockCount(),h=i.getBlockAtIndex(0);if(Ni(a,h.getAttributes())){let m=h.getTextWithoutBlockBreak();if(s=this.insertTextAtRange(m,t),u>1){i=new this.constructor(i.getBlocks().slice(1));let p=r+m.getLength();s=s.insertDocumentAtRange(i,p)}}else s=this.insertDocumentAtRange(i,t);return s}insertTextAtRange(e,t){t=he(t);let[i]=t,{index:s,offset:r}=this.locationFromPosition(i),o=this.removeTextAtRange(t);return new this.constructor(o.blockList.editObjectAtIndex(s,a=>a.copyWithText(a.text.insertTextAtPosition(e,r))))}removeTextAtRange(e){let t;e=he(e);let[i,s]=e;if(Ft(e))return this;let[r,o]=Array.from(this.locationRangeFromRange(e)),a=r.index,l=r.offset,d=this.getBlockAtIndex(a),u=o.index,h=o.offset,m=this.getBlockAtIndex(u);if(s-i==1&&d.getBlockBreakPosition()===l&&m.getBlockBreakPosition()!==h&&m.text.getStringAtPosition(h)===`
`)t=this.blockList.editObjectAtIndex(u,p=>p.copyWithText(p.text.removeTextAtRange([h,h+1])));else{let p,g=d.text.getTextAtRange([0,l]),v=m.text.getTextAtRange([h,m.getLength()]),w=g.appendText(v);p=a!==u&&l===0&&d.getAttributeLevel()>=m.getAttributeLevel()?m.copyWithText(w):d.copyWithText(w);let y=u+1-a;t=this.blockList.splice(a,y,p)}return new this.constructor(t)}moveTextFromRangeToPosition(e,t){let i;e=he(e);let[s,r]=e;if(s<=t&&t<=r)return this;let o=this.getDocumentAtRange(e),a=this.removeTextAtRange(e),l=s<t;l&&(t-=o.getLength());let[d,...u]=o.getBlocks();return u.length===0?(i=d.getTextWithoutBlockBreak(),l&&(t+=1)):i=d.text,a=a.insertTextAtRange(i,t),u.length===0?a:(o=new this.constructor(u),t+=i.getLength(),a.insertDocumentAtRange(o,t))}addAttributeAtRange(e,t,i){let{blockList:s}=this;return this.eachBlockAtRange(i,(r,o,a)=>s=s.editObjectAtIndex(a,function(){return we(e)?r.addAttribute(e,t):o[0]===o[1]?r:r.copyWithText(r.text.addAttributeAtRange(e,t,o))})),new this.constructor(s)}addAttribute(e,t){let{blockList:i}=this;return this.eachBlock((s,r)=>i=i.editObjectAtIndex(r,()=>s.addAttribute(e,t))),new this.constructor(i)}removeAttributeAtRange(e,t){let{blockList:i}=this;return this.eachBlockAtRange(t,function(s,r,o){we(e)?i=i.editObjectAtIndex(o,()=>s.removeAttribute(e)):r[0]!==r[1]&&(i=i.editObjectAtIndex(o,()=>s.copyWithText(s.text.removeAttributeAtRange(e,r))))}),new this.constructor(i)}updateAttributesForAttachment(e,t){let i=this.getRangeOfAttachment(t),[s]=Array.from(i),{index:r}=this.locationFromPosition(s),o=this.getTextAtIndex(r);return new this.constructor(this.blockList.editObjectAtIndex(r,a=>a.copyWithText(o.updateAttributesForAttachment(e,t))))}removeAttributeForAttachment(e,t){let i=this.getRangeOfAttachment(t);return this.removeAttributeAtRange(e,i)}setHTMLAttributeAtPosition(e,t,i){let s=this.getBlockAtPosition(e),r=s.addHTMLAttribute(t,i);return this.replaceBlock(s,r)}insertBlockBreakAtRange(e){let t;e=he(e);let[i]=e,{offset:s}=this.locationFromPosition(i),r=this.removeTextAtRange(e);return s===0&&(t=[new ii]),new this.constructor(r.blockList.insertSplittableListAtPosition(new Ln(t),i))}applyBlockAttributeAtRange(e,t,i){let s=this.expandRangeToLineBreaksAndSplitBlocks(i),r=s.document;i=s.range;let o=we(e);if(o.listAttribute){r=r.removeLastListAttributeAtRange(i,{exceptAttributeName:e});let a=r.convertLineBreaksToBlockBreaksInRange(i);r=a.document,i=a.range}else r=o.exclusive?r.removeBlockAttributesAtRange(i):o.terminal?r.removeLastTerminalAttributeAtRange(i):r.consolidateBlocksAtRange(i);return r.addAttributeAtRange(e,t,i)}removeLastListAttributeAtRange(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{blockList:i}=this;return this.eachBlockAtRange(e,function(s,r,o){let a=s.getLastAttribute();a&&we(a).listAttribute&&a!==t.exceptAttributeName&&(i=i.editObjectAtIndex(o,()=>s.removeAttribute(a)))}),new this.constructor(i)}removeLastTerminalAttributeAtRange(e){let{blockList:t}=this;return this.eachBlockAtRange(e,function(i,s,r){let o=i.getLastAttribute();o&&we(o).terminal&&(t=t.editObjectAtIndex(r,()=>i.removeAttribute(o)))}),new this.constructor(t)}removeBlockAttributesAtRange(e){let{blockList:t}=this;return this.eachBlockAtRange(e,function(i,s,r){i.hasAttributes()&&(t=t.editObjectAtIndex(r,()=>i.copyWithoutAttributes()))}),new this.constructor(t)}expandRangeToLineBreaksAndSplitBlocks(e){let t;e=he(e);let[i,s]=e,r=this.locationFromPosition(i),o=this.locationFromPosition(s),a=this,l=a.getBlockAtIndex(r.index);if(r.offset=l.findLineBreakInDirectionFromPosition("backward",r.offset),r.offset!=null&&(t=a.positionFromLocation(r),a=a.insertBlockBreakAtRange([t,t+1]),o.index+=1,o.offset-=a.getBlockAtIndex(r.index).getLength(),r.index+=1),r.offset=0,o.offset===0&&o.index>r.index)o.index-=1,o.offset=a.getBlockAtIndex(o.index).getBlockBreakPosition();else{let d=a.getBlockAtIndex(o.index);d.text.getStringAtRange([o.offset-1,o.offset])===`
`?o.offset-=1:o.offset=d.findLineBreakInDirectionFromPosition("forward",o.offset),o.offset!==d.getBlockBreakPosition()&&(t=a.positionFromLocation(o),a=a.insertBlockBreakAtRange([t,t+1]))}return i=a.positionFromLocation(r),s=a.positionFromLocation(o),{document:a,range:e=he([i,s])}}convertLineBreaksToBlockBreaksInRange(e){e=he(e);let[t]=e,i=this.getStringAtRange(e).slice(0,-1),s=this;return i.replace(/.*?\n/g,function(r){t+=r.length,s=s.insertBlockBreakAtRange([t-1,t])}),{document:s,range:e}}consolidateBlocksAtRange(e){e=he(e);let[t,i]=e,s=this.locationFromPosition(t).index,r=this.locationFromPosition(i).index;return new this.constructor(this.blockList.consolidateFromIndexToIndex(s,r))}getDocumentAtRange(e){e=he(e);let t=this.blockList.getSplittableListInRange(e).toArray();return new this.constructor(t)}getStringAtRange(e){let t,i=e=he(e);return i[i.length-1]!==this.getLength()&&(t=-1),this.getDocumentAtRange(e).toString().slice(0,t)}getBlockAtIndex(e){return this.blockList.getObjectAtIndex(e)}getBlockAtPosition(e){let{index:t}=this.locationFromPosition(e);return this.getBlockAtIndex(t)}getTextAtIndex(e){var t;return(t=this.getBlockAtIndex(e))===null||t===void 0?void 0:t.text}getTextAtPosition(e){let{index:t}=this.locationFromPosition(e);return this.getTextAtIndex(t)}getPieceAtPosition(e){let{index:t,offset:i}=this.locationFromPosition(e);return this.getTextAtIndex(t).getPieceAtPosition(i)}getCharacterAtPosition(e){let{index:t,offset:i}=this.locationFromPosition(e);return this.getTextAtIndex(t).getStringAtRange([i,i+1])}getLength(){return this.blockList.getEndPosition()}getBlocks(){return this.blockList.toArray()}getBlockCount(){return this.blockList.length}getEditCount(){return this.editCount}eachBlock(e){return this.blockList.eachObject(e)}eachBlockAtRange(e,t){let i,s;e=he(e);let[r,o]=e,a=this.locationFromPosition(r),l=this.locationFromPosition(o);if(a.index===l.index)return i=this.getBlockAtIndex(a.index),s=[a.offset,l.offset],t(i,s,a.index);for(let d=a.index;d<=l.index;d++)if(i=this.getBlockAtIndex(d),i){switch(d){case a.index:s=[a.offset,i.text.getLength()];break;case l.index:s=[0,l.offset];break;default:s=[0,i.text.getLength()]}t(i,s,d)}}getCommonAttributesAtRange(e){e=he(e);let[t]=e;if(Ft(e))return this.getCommonAttributesAtPosition(t);{let i=[],s=[];return this.eachBlockAtRange(e,function(r,o){if(o[0]!==o[1])return i.push(r.text.getCommonAttributesAtRange(o)),s.push(ip(r))}),gt.fromCommonAttributesOfObjects(i).merge(gt.fromCommonAttributesOfObjects(s)).toObject()}}getCommonAttributesAtPosition(e){let t,i,{index:s,offset:r}=this.locationFromPosition(e),o=this.getBlockAtIndex(s);if(!o)return{};let a=ip(o),l=o.text.getAttributesAtPosition(r),d=o.text.getAttributesAtPosition(r-1),u=Object.keys(Di).filter(h=>Di[h].inheritable);for(t in d)i=d[t],(i===l[t]||u.includes(t))&&(a[t]=i);return a}getRangeOfCommonAttributeAtPosition(e,t){let{index:i,offset:s}=this.locationFromPosition(t),r=this.getTextAtIndex(i),[o,a]=Array.from(r.getExpandedRangeForAttributeAtOffset(e,s)),l=this.positionFromLocation({index:i,offset:o}),d=this.positionFromLocation({index:i,offset:a});return he([l,d])}getBaseBlockAttributes(){let e=this.getBlockAtIndex(0).getAttributes();for(let t=1;t<this.getBlockCount();t++){let i=this.getBlockAtIndex(t).getAttributes(),s=Math.min(e.length,i.length);e=(()=>{let r=[];for(let o=0;o<s&&i[o]===e[o];o++)r.push(i[o]);return r})()}return e}getAttachmentById(e){for(let t of this.getAttachments())if(t.id===e)return t}getAttachmentPieces(){let e=[];return this.blockList.eachObject(t=>{let{text:i}=t;return e=e.concat(i.getAttachmentPieces())}),e}getAttachments(){return this.getAttachmentPieces().map(e=>e.attachment)}getRangeOfAttachment(e){let t=0,i=this.blockList.toArray();for(let s=0;s<i.length;s++){let{text:r}=i[s],o=r.getRangeOfAttachment(e);if(o)return he([t+o[0],t+o[1]]);t+=r.getLength()}}getLocationRangeOfAttachment(e){let t=this.getRangeOfAttachment(e);return this.locationRangeFromRange(t)}getAttachmentPieceForAttachment(e){for(let t of this.getAttachmentPieces())if(t.attachment===e)return t}findRangesForBlockAttribute(e){let t=0,i=[];return this.getBlocks().forEach(s=>{let r=s.getLength();s.hasAttribute(e)&&i.push([t,t+r]),t+=r}),i}findRangesForTextAttribute(e){let{withValue:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=0,s=[],r=[];return this.getPieces().forEach(o=>{let a=o.getLength();(function(l){return t?l.getAttribute(e)===t:l.hasAttribute(e)})(o)&&(s[1]===i?s[1]=i+a:r.push(s=[i,i+a])),i+=a}),r}locationFromPosition(e){let t=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,e));if(t.index!=null)return t;{let i=this.getBlocks();return{index:i.length-1,offset:i[i.length-1].getLength()}}}positionFromLocation(e){return this.blockList.findPositionAtIndexAndOffset(e.index,e.offset)}locationRangeFromPosition(e){return he(this.locationFromPosition(e))}locationRangeFromRange(e){if(!(e=he(e)))return;let[t,i]=Array.from(e),s=this.locationFromPosition(t),r=this.locationFromPosition(i);return he([s,r])}rangeFromLocationRange(e){let t;e=he(e);let i=this.positionFromLocation(e[0]);return Ft(e)||(t=this.positionFromLocation(e[1])),he([i,t])}isEqualTo(e){return this.blockList.isEqualTo(e?.blockList)}getTexts(){return this.getBlocks().map(e=>e.text)}getPieces(){let e=[];return Array.from(this.getTexts()).forEach(t=>{e.push(...Array.from(t.getPieces()||[]))}),e}getObjects(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())}toSerializableDocument(){let e=[];return this.blockList.eachObject(t=>e.push(t.copyWithText(t.text.toSerializableText()))),new this.constructor(e)}toString(){return this.blockList.toString()}toJSON(){return this.blockList.toJSON()}toConsole(){return JSON.stringify(this.blockList.toArray().map(e=>JSON.parse(e.text.toConsole())))}},ip=function(n){let e={},t=n.getLastAttribute();return t&&(e[t]=!0),e},Dc=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{string:n=ys(n),attributes:e,type:"string"}},np=(n,e)=>{try{return JSON.parse(n.getAttribute("data-trix-".concat(e)))}catch{return{}}},Bi=class extends Ee{static parse(e,t){let i=new this(e,t);return i.parse(),i}constructor(e){let{referenceElement:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.html=e,this.referenceElement=t,this.blocks=[],this.blockElements=[],this.processedElements=[]}getDocument(){return Ue.fromJSON(this.blocks)}parse(){try{this.createHiddenContainer(),An.setHTML(this.containerElement,this.html);let e=Eo(this.containerElement,{usingFilter:BS});for(;e.nextNode();)this.processNode(e.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}}createHiddenContainer(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=se({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))}removeHiddenContainer(){return si(this.containerElement)}processNode(e){switch(e.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(e))return this.appendBlockForTextNode(e),this.processTextNode(e);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(e),this.processElement(e)}}appendBlockForTextNode(e){let t=e.parentNode;if(t===this.currentBlockElement&&this.isBlockElement(e.previousSibling))return this.appendStringWithAttributes(`
`);if(t===this.containerElement||this.isBlockElement(t)){var i;let s=this.getBlockAttributes(t),r=this.getBlockHTMLAttributes(t);Ni(s,(i=this.currentBlock)===null||i===void 0?void 0:i.attributes)||(this.currentBlock=this.appendBlockForAttributesWithElement(s,t,r),this.currentBlockElement=t)}}appendBlockForElement(e){let t=this.isBlockElement(e),i=Pi(this.currentBlockElement,e);if(t&&!this.isBlockElement(e.firstChild)){if(!this.isInsignificantTextNode(e.firstChild)||!this.isBlockElement(e.firstElementChild)){let s=this.getBlockAttributes(e),r=this.getBlockHTMLAttributes(e);if(e.firstChild){if(i&&Ni(s,this.currentBlock.attributes))return this.appendStringWithAttributes(`
`);this.currentBlock=this.appendBlockForAttributesWithElement(s,e,r),this.currentBlockElement=e}}}else if(this.currentBlockElement&&!i&&!t){let s=this.findParentBlockElement(e);if(s)return this.appendBlockForElement(s);this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null}}findParentBlockElement(e){let{parentElement:t}=e;for(;t&&t!==this.containerElement;){if(this.isBlockElement(t)&&this.blockElements.includes(t))return t;t=t.parentElement}return null}processTextNode(e){let t=e.data;var i;return sp(e.parentNode)||(t=pd(t),Cp((i=e.previousSibling)===null||i===void 0?void 0:i.textContent)&&(t=$S(t))),this.appendStringWithAttributes(t,this.getTextAttributes(e.parentNode))}processElement(e){let t;if(_i(e)){if(t=np(e,"attachment"),Object.keys(t).length){let i=this.getTextAttributes(e);this.appendAttachmentWithAttributes(t,i),e.innerHTML=""}return this.processedElements.push(e)}switch(Be(e)){case"br":return this.isExtraBR(e)||this.isBlockElement(e.nextSibling)||this.appendStringWithAttributes(`
`,this.getTextAttributes(e)),this.processedElements.push(e);case"img":t={url:e.getAttribute("src"),contentType:"image"};let i=(s=>{let r=s.getAttribute("width"),o=s.getAttribute("height"),a={};return r&&(a.width=parseInt(r,10)),o&&(a.height=parseInt(o,10)),a})(e);for(let s in i){let r=i[s];t[s]=r}return this.appendAttachmentWithAttributes(t,this.getTextAttributes(e)),this.processedElements.push(e);case"tr":if(this.needsTableSeparator(e))return this.appendStringWithAttributes(bo.tableRowSeparator);break;case"td":if(this.needsTableSeparator(e))return this.appendStringWithAttributes(bo.tableCellSeparator)}}appendBlockForAttributesWithElement(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.blockElements.push(t);let s=function(){return{text:[],attributes:arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},htmlAttributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}}}(e,i);return this.blocks.push(s),s}appendEmptyBlock(){return this.appendBlockForAttributesWithElement([],null)}appendStringWithAttributes(e,t){return this.appendPiece(Dc(e,t))}appendAttachmentWithAttributes(e,t){return this.appendPiece(function(i){return{attachment:i,attributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},type:"attachment"}}(e,t))}appendPiece(e){return this.blocks.length===0&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(e)}appendStringToTextAtIndex(e,t){let{text:i}=this.blocks[t],s=i[i.length-1];if(s?.type!=="string")return i.push(Dc(e));s.string+=e}prependStringToTextAtIndex(e,t){let{text:i}=this.blocks[t],s=i[0];if(s?.type!=="string")return i.unshift(Dc(e));s.string=e+s.string}getTextAttributes(e){let t,i={};for(let s in Di){let r=Di[s];if(r.tagName&&ni(e,{matchingSelector:r.tagName,untilNode:this.containerElement}))i[s]=!0;else if(r.parser){if(t=r.parser(e),t){let o=!1;for(let a of this.findBlockElementAncestors(e))if(r.parser(a)===t){o=!0;break}o||(i[s]=t)}}else r.styleProperty&&(t=e.style[r.styleProperty],t&&(i[s]=t))}if(_i(e)){let s=np(e,"attributes");for(let r in s)t=s[r],i[r]=t}return i}getBlockAttributes(e){let t=[];for(;e&&e!==this.containerElement;){for(let s in $e){let r=$e[s];var i;r.parse!==!1&&Be(e)===r.tagName&&((i=r.test)!==null&&i!==void 0&&i.call(r,e)||!r.test)&&(t.push(s),r.listAttribute&&t.push(r.listAttribute))}e=e.parentNode}return t.reverse()}getBlockHTMLAttributes(e){let t={},i=Object.values($e).find(s=>s.tagName===Be(e));return(i?.htmlAttributes||[]).forEach(s=>{e.hasAttribute(s)&&(t[s]=e.getAttribute(s))}),t}findBlockElementAncestors(e){let t=[];for(;e&&e!==this.containerElement;){let i=Be(e);ws().includes(i)&&t.push(e),e=e.parentNode}return t}isBlockElement(e){if(e?.nodeType===Node.ELEMENT_NODE&&!_i(e)&&!ni(e,{matchingSelector:"td",untilNode:this.containerElement}))return ws().includes(Be(e))||window.getComputedStyle(e).display==="block"}isInsignificantTextNode(e){if(e?.nodeType!==Node.TEXT_NODE||!zS(e.data))return;let{parentNode:t,previousSibling:i,nextSibling:s}=e;return FS(t.previousSibling)&&!this.isBlockElement(t.previousSibling)||sp(t)?void 0:!i||this.isBlockElement(i)||!s||this.isBlockElement(s)}isExtraBR(e){return Be(e)==="br"&&this.isBlockElement(e.parentNode)&&e.parentNode.lastChild===e}needsTableSeparator(e){if(bo.removeBlankTableCells){var t;let i=(t=e.previousSibling)===null||t===void 0?void 0:t.textContent;return i&&/\S/.test(i)}return e.previousSibling}translateBlockElementMarginsToNewlines(){let e=this.getMarginOfDefaultBlockElement();for(let t=0;t<this.blocks.length;t++){let i=this.getMarginOfBlockElementAtIndex(t);i&&(i.top>2*e.top&&this.prependStringToTextAtIndex(`
`,t),i.bottom>2*e.bottom&&this.appendStringToTextAtIndex(`
`,t))}}getMarginOfBlockElementAtIndex(e){let t=this.blockElements[e];if(t&&t.textContent&&!ws().includes(Be(t))&&!this.processedElements.includes(t))return rp(t)}getMarginOfDefaultBlockElement(){let e=se($e.default.tagName);return this.containerElement.appendChild(e),rp(e)}},sp=function(n){let{whiteSpace:e}=window.getComputedStyle(n);return["pre","pre-wrap","pre-line"].includes(e)},FS=n=>n&&!Cp(n.textContent),rp=function(n){let e=window.getComputedStyle(n);if(e.display==="block")return{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}},BS=function(n){return Be(n)==="style"?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},$S=n=>n.replace(new RegExp("^".concat(fd.source,"+")),""),zS=n=>new RegExp("^".concat(fd.source,"*$")).test(n),Cp=n=>/\s$/.test(n),HS=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],ed="data-trix-serialized-attributes",VS="[".concat(ed,"]"),jS=new RegExp("<!--block-->","g"),WS={"application/json":function(n){let e;if(n instanceof Ue)e=n;else{if(!(n instanceof HTMLElement))throw new Error("unserializable object");e=Bi.parse(n.innerHTML).getDocument()}return e.toSerializableDocument().toJSONString()},"text/html":function(n){let e;if(n instanceof Ue)e=Tn.render(n);else{if(!(n instanceof HTMLElement))throw new Error("unserializable object");e=n.cloneNode(!0)}return Array.from(e.querySelectorAll("[data-trix-serialize=false]")).forEach(t=>{si(t)}),HS.forEach(t=>{Array.from(e.querySelectorAll("[".concat(t,"]"))).forEach(i=>{i.removeAttribute(t)})}),Array.from(e.querySelectorAll(VS)).forEach(t=>{try{let i=JSON.parse(t.getAttribute(ed));t.removeAttribute(ed);for(let s in i){let r=i[s];t.setAttribute(s,r)}}catch{}}),e.innerHTML.replace(jS,"")}},qS=Object.freeze({__proto__:null}),ge=class extends Ee{constructor(e,t){super(...arguments),this.attachmentManager=e,this.attachment=t,this.id=this.attachment.id,this.file=this.attachment.file}remove(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)}};ge.proxyMethod("attachment.getAttribute"),ge.proxyMethod("attachment.hasAttribute"),ge.proxyMethod("attachment.setAttribute"),ge.proxyMethod("attachment.getAttributes"),ge.proxyMethod("attachment.setAttributes"),ge.proxyMethod("attachment.isPending"),ge.proxyMethod("attachment.isPreviewable"),ge.proxyMethod("attachment.getURL"),ge.proxyMethod("attachment.getHref"),ge.proxyMethod("attachment.getFilename"),ge.proxyMethod("attachment.getFilesize"),ge.proxyMethod("attachment.getFormattedFilesize"),ge.proxyMethod("attachment.getExtension"),ge.proxyMethod("attachment.getContentType"),ge.proxyMethod("attachment.getFile"),ge.proxyMethod("attachment.setFile"),ge.proxyMethod("attachment.releaseFile"),ge.proxyMethod("attachment.getUploadProgress"),ge.proxyMethod("attachment.setUploadProgress");var Mo=class extends Ee{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.managedAttachments={},Array.from(e).forEach(t=>{this.manageAttachment(t)})}getAttachments(){let e=[];for(let t in this.managedAttachments){let i=this.managedAttachments[t];e.push(i)}return e}manageAttachment(e){return this.managedAttachments[e.id]||(this.managedAttachments[e.id]=new ge(this,e)),this.managedAttachments[e.id]}attachmentIsManaged(e){return e.id in this.managedAttachments}requestRemovalOfAttachment(e){var t,i;if(this.attachmentIsManaged(e))return(t=this.delegate)===null||t===void 0||(i=t.attachmentManagerDidRequestRemovalOfAttachment)===null||i===void 0?void 0:i.call(t,e)}unmanageAttachment(e){let t=this.managedAttachments[e.id];return delete this.managedAttachments[e.id],t}},Po=class{constructor(e){this.composition=e,this.document=this.composition.document;let t=this.composition.getSelectedRange();this.startPosition=t[0],this.endPosition=t[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}shouldInsertBlockBreak(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?this.startLocation.offset!==0:this.breaksOnReturn&&this.nextCharacter!==`
`}shouldBreakFormattedBlock(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&this.nextCharacter===`
`||this.previousCharacter===`
`)}shouldDecreaseListLevel(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()}shouldPrependListItem(){return this.block.isListItem()&&this.startLocation.offset===0&&!this.block.isEmpty()}shouldRemoveLastBlockAttribute(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()}},xt=class extends Ee{constructor(){super(...arguments),this.document=new Ue,this.attachments=[],this.currentAttributes={},this.revision=0}setDocument(e){var t,i;if(!e.isEqualTo(this.document))return this.document=e,this.refreshAttachments(),this.revision++,(t=this.delegate)===null||t===void 0||(i=t.compositionDidChangeDocument)===null||i===void 0?void 0:i.call(t,e)}getSnapshot(){return{document:this.document,selectedRange:this.getSelectedRange()}}loadSnapshot(e){var t,i,s,r;let{document:o,selectedRange:a}=e;return(t=this.delegate)===null||t===void 0||(i=t.compositionWillLoadSnapshot)===null||i===void 0||i.call(t),this.setDocument(o??new Ue),this.setSelection(a??[0,0]),(s=this.delegate)===null||s===void 0||(r=s.compositionDidLoadSnapshot)===null||r===void 0?void 0:r.call(s)}insertText(e){let{updatePosition:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{updatePosition:!0},i=this.getSelectedRange();this.setDocument(this.document.insertTextAtRange(e,i));let s=i[0],r=s+e.getLength();return t&&this.setSelection(r),this.notifyDelegateOfInsertionAtRange([s,r])}insertBlock(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new ii,t=new Ue([e]);return this.insertDocument(t)}insertDocument(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Ue,t=this.getSelectedRange();this.setDocument(this.document.insertDocumentAtRange(e,t));let i=t[0],s=i+e.getLength();return this.setSelection(s),this.notifyDelegateOfInsertionAtRange([i,s])}insertString(e,t){let i=this.getCurrentTextAttributes(),s=Ze.textForStringWithAttributes(e,i);return this.insertText(s,t)}insertBlockBreak(){let e=this.getSelectedRange();this.setDocument(this.document.insertBlockBreakAtRange(e));let t=e[0],i=t+1;return this.setSelection(i),this.notifyDelegateOfInsertionAtRange([t,i])}insertLineBreak(){let e=new Po(this);if(e.shouldDecreaseListLevel())return this.decreaseListLevel(),this.setSelection(e.startPosition);if(e.shouldPrependListItem()){let t=new Ue([e.block.copyWithoutText()]);return this.insertDocument(t)}return e.shouldInsertBlockBreak()?this.insertBlockBreak():e.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():e.shouldBreakFormattedBlock()?this.breakFormattedBlock(e):this.insertString(`
`)}insertHTML(e){let t=Bi.parse(e).getDocument(),i=this.getSelectedRange();this.setDocument(this.document.mergeDocumentAtRange(t,i));let s=i[0],r=s+t.getLength()-1;return this.setSelection(r),this.notifyDelegateOfInsertionAtRange([s,r])}replaceHTML(e){let t=Bi.parse(e).getDocument().copyUsingObjectsFromDocument(this.document),i=this.getLocationRange({strict:!1}),s=this.document.rangeFromLocationRange(i);return this.setDocument(t),this.setSelection(s)}insertFile(e){return this.insertFiles([e])}insertFiles(e){let t=[];return Array.from(e).forEach(i=>{var s;if((s=this.delegate)!==null&&s!==void 0&&s.compositionShouldAcceptFile(i)){let r=xn.attachmentForFile(i);t.push(r)}}),this.insertAttachments(t)}insertAttachment(e){return this.insertAttachments([e])}insertAttachments(e){let t=new Ze;return Array.from(e).forEach(i=>{var s;let r=i.getType(),o=(s=ad[r])===null||s===void 0?void 0:s.presentation,a=this.getCurrentTextAttributes();o&&(a.presentation=o);let l=Ze.textForAttachmentWithAttributes(i,a);t=t.appendText(l)}),this.insertText(t)}shouldManageDeletingInDirection(e){let t=this.getLocationRange();if(Ft(t)){if(e==="backward"&&t[0].offset===0||this.shouldManageMovingCursorInDirection(e))return!0}else if(t[0].index!==t[1].index)return!0;return!1}deleteInDirection(e){let t,i,s,{length:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.getLocationRange(),a=this.getSelectedRange(),l=Ft(a);if(l?i=e==="backward"&&o[0].offset===0:s=o[0].index!==o[1].index,i&&this.canDecreaseBlockAttributeLevel()){let d=this.getBlock();if(d.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(a[0]),d.isEmpty())return!1}return l&&(a=this.getExpandedRangeInDirection(e,{length:r}),e==="backward"&&(t=this.getAttachmentAtRange(a))),t?(this.editAttachment(t),!1):(this.setDocument(this.document.removeTextAtRange(a)),this.setSelection(a[0]),!i&&!s&&void 0)}moveTextFromRange(e){let[t]=Array.from(this.getSelectedRange());return this.setDocument(this.document.moveTextFromRangeToPosition(e,t)),this.setSelection(t)}removeAttachment(e){let t=this.document.getRangeOfAttachment(e);if(t)return this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(t)),this.setSelection(t[0])}removeLastBlockAttribute(){let[e,t]=Array.from(this.getSelectedRange()),i=this.document.getBlockAtPosition(t);return this.removeCurrentAttribute(i.getLastAttribute()),this.setSelection(e)}insertPlaceholder(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")}selectPlaceholder(){if(this.placeholderPosition!=null)return this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+1]),this.getSelectedRange()}forgetPlaceholder(){this.placeholderPosition=null}hasCurrentAttribute(e){let t=this.currentAttributes[e];return t!=null&&t!==!1}toggleCurrentAttribute(e){let t=!this.currentAttributes[e];return t?this.setCurrentAttribute(e,t):this.removeCurrentAttribute(e)}canSetCurrentAttribute(e){return we(e)?this.canSetCurrentBlockAttribute(e):this.canSetCurrentTextAttribute(e)}canSetCurrentTextAttribute(e){let t=this.getSelectedDocument();if(t){for(let i of Array.from(t.getAttachments()))if(!i.hasContent())return!1;return!0}}canSetCurrentBlockAttribute(e){let t=this.getBlock();if(t)return!t.isTerminalBlock()}setCurrentAttribute(e,t){return we(e)?this.setBlockAttribute(e,t):(this.setTextAttribute(e,t),this.currentAttributes[e]=t,this.notifyDelegateOfCurrentAttributesChange())}setHTMLAtributeAtPosition(e,t,i){var s;let r=this.document.getBlockAtPosition(e),o=(s=we(r.getLastAttribute()))===null||s===void 0?void 0:s.htmlAttributes;if(r&&o!=null&&o.includes(t)){let a=this.document.setHTMLAttributeAtPosition(e,t,i);this.setDocument(a)}}setTextAttribute(e,t){let i=this.getSelectedRange();if(!i)return;let[s,r]=Array.from(i);if(s!==r)return this.setDocument(this.document.addAttributeAtRange(e,t,i));if(e==="href"){let o=Ze.textForStringWithAttributes(t,{href:t});return this.insertText(o)}}setBlockAttribute(e,t){let i=this.getSelectedRange();if(this.canSetCurrentAttribute(e))return this.setDocument(this.document.applyBlockAttributeAtRange(e,t,i)),this.setSelection(i)}removeCurrentAttribute(e){return we(e)?(this.removeBlockAttribute(e),this.updateCurrentAttributes()):(this.removeTextAttribute(e),delete this.currentAttributes[e],this.notifyDelegateOfCurrentAttributesChange())}removeTextAttribute(e){let t=this.getSelectedRange();if(t)return this.setDocument(this.document.removeAttributeAtRange(e,t))}removeBlockAttribute(e){let t=this.getSelectedRange();if(t)return this.setDocument(this.document.removeAttributeAtRange(e,t))}canDecreaseNestingLevel(){var e;return((e=this.getBlock())===null||e===void 0?void 0:e.getNestingLevel())>0}canIncreaseNestingLevel(){var e;let t=this.getBlock();if(t){if((e=we(t.getLastNestableAttribute()))===null||e===void 0||!e.listAttribute)return t.getNestingLevel()>0;{let i=this.getPreviousBlock();if(i)return function(){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ni((arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).slice(0,s.length),s)}(i.getListItemAttributes(),t.getListItemAttributes())}}}decreaseNestingLevel(){let e=this.getBlock();if(e)return this.setDocument(this.document.replaceBlock(e,e.decreaseNestingLevel()))}increaseNestingLevel(){let e=this.getBlock();if(e)return this.setDocument(this.document.replaceBlock(e,e.increaseNestingLevel()))}canDecreaseBlockAttributeLevel(){var e;return((e=this.getBlock())===null||e===void 0?void 0:e.getAttributeLevel())>0}decreaseBlockAttributeLevel(){var e;let t=(e=this.getBlock())===null||e===void 0?void 0:e.getLastAttribute();if(t)return this.removeCurrentAttribute(t)}decreaseListLevel(){let[e]=Array.from(this.getSelectedRange()),{index:t}=this.document.locationFromPosition(e),i=t,s=this.getBlock().getAttributeLevel(),r=this.document.getBlockAtIndex(i+1);for(;r&&r.isListItem()&&!(r.getAttributeLevel()<=s);)i++,r=this.document.getBlockAtIndex(i+1);e=this.document.positionFromLocation({index:t,offset:0});let o=this.document.positionFromLocation({index:i,offset:0});return this.setDocument(this.document.removeLastListAttributeAtRange([e,o]))}updateCurrentAttributes(){let e=this.getSelectedRange({ignoreLock:!0});if(e){let t=this.document.getCommonAttributesAtRange(e);if(Array.from(Gc()).forEach(i=>{t[i]||this.canSetCurrentAttribute(i)||(t[i]=!1)}),!Pn(t,this.currentAttributes))return this.currentAttributes=t,this.notifyDelegateOfCurrentAttributesChange()}}getCurrentAttributes(){return fp.call({},this.currentAttributes)}getCurrentTextAttributes(){let e={};for(let t in this.currentAttributes){let i=this.currentAttributes[t];i!==!1&&Xc(t)&&(e[t]=i)}return e}freezeSelection(){return this.setCurrentAttribute("frozen",!0)}thawSelection(){return this.removeCurrentAttribute("frozen")}hasFrozenSelection(){return this.hasCurrentAttribute("frozen")}setSelection(e){var t;let i=this.document.locationRangeFromRange(e);return(t=this.delegate)===null||t===void 0?void 0:t.compositionDidRequestChangingSelectionToLocationRange(i)}getSelectedRange(){let e=this.getLocationRange();if(e)return this.document.rangeFromLocationRange(e)}setSelectedRange(e){let t=this.document.locationRangeFromRange(e);return this.getSelectionManager().setLocationRange(t)}getPosition(){let e=this.getLocationRange();if(e)return this.document.positionFromLocation(e[0])}getLocationRange(e){return this.targetLocationRange?this.targetLocationRange:this.getSelectionManager().getLocationRange(e)||he({index:0,offset:0})}withTargetLocationRange(e,t){let i;this.targetLocationRange=e;try{i=t()}finally{this.targetLocationRange=null}return i}withTargetRange(e,t){let i=this.document.locationRangeFromRange(e);return this.withTargetLocationRange(i,t)}withTargetDOMRange(e,t){let i=this.createLocationRangeFromDOMRange(e,{strict:!1});return this.withTargetLocationRange(i,t)}getExpandedRangeInDirection(e){let{length:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},[i,s]=Array.from(this.getSelectedRange());return e==="backward"?t?i-=t:i=this.translateUTF16PositionFromOffset(i,-1):t?s+=t:s=this.translateUTF16PositionFromOffset(s,1),he([i,s])}shouldManageMovingCursorInDirection(e){if(this.editingAttachment)return!0;let t=this.getExpandedRangeInDirection(e);return this.getAttachmentAtRange(t)!=null}moveCursorInDirection(e){let t,i;if(this.editingAttachment)i=this.document.getRangeOfAttachment(this.editingAttachment);else{let s=this.getSelectedRange();i=this.getExpandedRangeInDirection(e),t=!wo(s,i)}if(e==="backward"?this.setSelectedRange(i[0]):this.setSelectedRange(i[1]),t){let s=this.getAttachmentAtRange(i);if(s)return this.editAttachment(s)}}expandSelectionInDirection(e){let{length:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getExpandedRangeInDirection(e,{length:t});return this.setSelectedRange(i)}expandSelectionForEditing(){if(this.hasCurrentAttribute("href"))return this.expandSelectionAroundCommonAttribute("href")}expandSelectionAroundCommonAttribute(e){let t=this.getPosition(),i=this.document.getRangeOfCommonAttributeAtPosition(e,t);return this.setSelectedRange(i)}selectionContainsAttachments(){var e;return((e=this.getSelectedAttachments())===null||e===void 0?void 0:e.length)>0}selectionIsInCursorTarget(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())}positionIsCursorTarget(e){let t=this.document.locationFromPosition(e);if(t)return this.locationIsCursorTarget(t)}positionIsBlockBreak(e){var t;return(t=this.document.getPieceAtPosition(e))===null||t===void 0?void 0:t.isBlockBreak()}getSelectedDocument(){let e=this.getSelectedRange();if(e)return this.document.getDocumentAtRange(e)}getSelectedAttachments(){var e;return(e=this.getSelectedDocument())===null||e===void 0?void 0:e.getAttachments()}getAttachments(){return this.attachments.slice(0)}refreshAttachments(){let e=this.document.getAttachments(),{added:t,removed:i}=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=[],a=[],l=new Set;s.forEach(u=>{l.add(u)});let d=new Set;return r.forEach(u=>{d.add(u),l.has(u)||o.push(u)}),s.forEach(u=>{d.has(u)||a.push(u)}),{added:o,removed:a}}(this.attachments,e);return this.attachments=e,Array.from(i).forEach(s=>{var r,o;s.delegate=null,(r=this.delegate)===null||r===void 0||(o=r.compositionDidRemoveAttachment)===null||o===void 0||o.call(r,s)}),(()=>{let s=[];return Array.from(t).forEach(r=>{var o,a;r.delegate=this,s.push((o=this.delegate)===null||o===void 0||(a=o.compositionDidAddAttachment)===null||a===void 0?void 0:a.call(o,r))}),s})()}attachmentDidChangeAttributes(e){var t,i;return this.revision++,(t=this.delegate)===null||t===void 0||(i=t.compositionDidEditAttachment)===null||i===void 0?void 0:i.call(t,e)}attachmentDidChangePreviewURL(e){var t,i;return this.revision++,(t=this.delegate)===null||t===void 0||(i=t.compositionDidChangeAttachmentPreviewURL)===null||i===void 0?void 0:i.call(t,e)}editAttachment(e,t){var i,s;if(e!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=e,(i=this.delegate)===null||i===void 0||(s=i.compositionDidStartEditingAttachment)===null||s===void 0?void 0:s.call(i,this.editingAttachment,t)}stopEditingAttachment(){var e,t;this.editingAttachment&&((e=this.delegate)===null||e===void 0||(t=e.compositionDidStopEditingAttachment)===null||t===void 0||t.call(e,this.editingAttachment),this.editingAttachment=null)}updateAttributesForAttachment(e,t){return this.setDocument(this.document.updateAttributesForAttachment(e,t))}removeAttributeForAttachment(e,t){return this.setDocument(this.document.removeAttributeForAttachment(e,t))}breakFormattedBlock(e){let{document:t}=e,{block:i}=e,s=e.startPosition,r=[s-1,s];i.getBlockBreakPosition()===e.startLocation.offset?(i.breaksOnReturn()&&e.nextCharacter===`
`?s+=1:t=t.removeTextAtRange(r),r=[s,s]):e.nextCharacter===`
`?e.previousCharacter===`
`?r=[s-1,s+1]:(r=[s,s+1],s+=1):e.startLocation.offset-1!=0&&(s+=1);let o=new Ue([i.removeLastAttribute().copyWithoutText()]);return this.setDocument(t.insertDocumentAtRange(o,r)),this.setSelection(s)}getPreviousBlock(){let e=this.getLocationRange();if(e){let{index:t}=e[0];if(t>0)return this.document.getBlockAtIndex(t-1)}}getBlock(){let e=this.getLocationRange();if(e)return this.document.getBlockAtIndex(e[0].index)}getAttachmentAtRange(e){let t=this.document.getDocumentAtRange(e);if(t.toString()==="".concat("\uFFFC",`
`))return t.getAttachments()[0]}notifyDelegateOfCurrentAttributesChange(){var e,t;return(e=this.delegate)===null||e===void 0||(t=e.compositionDidChangeCurrentAttributes)===null||t===void 0?void 0:t.call(e,this.currentAttributes)}notifyDelegateOfInsertionAtRange(e){var t,i;return(t=this.delegate)===null||t===void 0||(i=t.compositionDidPerformInsertionAtRange)===null||i===void 0?void 0:i.call(t,e)}translateUTF16PositionFromOffset(e,t){let i=this.document.toUTF16String(),s=i.offsetFromUCS2Offset(e);return i.offsetToUCS2Offset(s+t)}};xt.proxyMethod("getSelectionManager().getPointRange"),xt.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),xt.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),xt.proxyMethod("getSelectionManager().locationIsCursorTarget"),xt.proxyMethod("getSelectionManager().selectionIsExpanded"),xt.proxyMethod("delegate?.getSelectionManager");var Ms=class extends Ee{constructor(e){super(...arguments),this.composition=e,this.undoEntries=[],this.redoEntries=[]}recordUndoEntry(e){let{context:t,consolidatable:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.undoEntries.slice(-1)[0];if(!i||!US(s,e,t)){let r=this.createEntry({description:e,context:t});this.undoEntries.push(r),this.redoEntries=[]}}undo(){let e=this.undoEntries.pop();if(e){let t=this.createEntry(e);return this.redoEntries.push(t),this.composition.loadSnapshot(e.snapshot)}}redo(){let e=this.redoEntries.pop();if(e){let t=this.createEntry(e);return this.undoEntries.push(t),this.composition.loadSnapshot(e.snapshot)}}canUndo(){return this.undoEntries.length>0}canRedo(){return this.redoEntries.length>0}createEntry(){let{description:e,context:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{description:e?.toString(),context:JSON.stringify(t),snapshot:this.composition.getSnapshot()}}},US=(n,e,t)=>n?.description===e?.toString()&&n?.context===JSON.stringify(t),Ic="attachmentGallery",Oo=class{constructor(e){this.document=e.document,this.selectedRange=e.selectedRange}perform(){return this.removeBlockAttribute(),this.applyBlockAttribute()}getSnapshot(){return{document:this.document,selectedRange:this.selectedRange}}removeBlockAttribute(){return this.findRangesOfBlocks().map(e=>this.document=this.document.removeAttributeAtRange(Ic,e))}applyBlockAttribute(){let e=0;this.findRangesOfPieces().forEach(t=>{t[1]-t[0]>1&&(t[0]+=e,t[1]+=e,this.document.getCharacterAtPosition(t[1])!==`
`&&(this.document=this.document.insertBlockBreakAtRange(t[1]),t[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),t[1]++,e++),t[0]!==0&&this.document.getCharacterAtPosition(t[0]-1)!==`
`&&(this.document=this.document.insertBlockBreakAtRange(t[0]),t[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),t[0]++,e++),this.document=this.document.applyBlockAttributeAtRange(Ic,!0,t))})}findRangesOfBlocks(){return this.document.findRangesForBlockAttribute(Ic)}findRangesOfPieces(){return this.document.findRangesForTextAttribute("presentation",{withValue:"gallery"})}moveSelectedRangeForward(){this.selectedRange[0]+=1,this.selectedRange[1]+=1}},Lp=function(n){let e=new Oo(n);return e.perform(),e.getSnapshot()},YS=[Lp],_o=class{constructor(e,t,i){this.insertFiles=this.insertFiles.bind(this),this.composition=e,this.selectionManager=t,this.element=i,this.undoManager=new Ms(this.composition),this.filters=YS.slice(0)}loadDocument(e){return this.loadSnapshot({document:e,selectedRange:[0,0]})}loadHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=Bi.parse(e,{referenceElement:this.element}).getDocument();return this.loadDocument(t)}loadJSON(e){let{document:t,selectedRange:i}=e;return t=Ue.fromJSON(t),this.loadSnapshot({document:t,selectedRange:i})}loadSnapshot(e){return this.undoManager=new Ms(this.composition),this.composition.loadSnapshot(e)}getDocument(){return this.composition.document}getSelectedDocument(){return this.composition.getSelectedDocument()}getSnapshot(){return this.composition.getSnapshot()}toJSON(){return this.getSnapshot()}deleteInDirection(e){return this.composition.deleteInDirection(e)}insertAttachment(e){return this.composition.insertAttachment(e)}insertAttachments(e){return this.composition.insertAttachments(e)}insertDocument(e){return this.composition.insertDocument(e)}insertFile(e){return this.composition.insertFile(e)}insertFiles(e){return this.composition.insertFiles(e)}insertHTML(e){return this.composition.insertHTML(e)}insertString(e){return this.composition.insertString(e)}insertText(e){return this.composition.insertText(e)}insertLineBreak(){return this.composition.insertLineBreak()}getSelectedRange(){return this.composition.getSelectedRange()}getPosition(){return this.composition.getPosition()}getClientRectAtPosition(e){let t=this.getDocument().locationRangeFromRange([e,e+1]);return this.selectionManager.getClientRectAtLocationRange(t)}expandSelectionInDirection(e){return this.composition.expandSelectionInDirection(e)}moveCursorInDirection(e){return this.composition.moveCursorInDirection(e)}setSelectedRange(e){return this.composition.setSelectedRange(e)}activateAttribute(e){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return this.composition.setCurrentAttribute(e,t)}attributeIsActive(e){return this.composition.hasCurrentAttribute(e)}canActivateAttribute(e){return this.composition.canSetCurrentAttribute(e)}deactivateAttribute(e){return this.composition.removeCurrentAttribute(e)}setHTMLAtributeAtPosition(e,t,i){this.composition.setHTMLAtributeAtPosition(e,t,i)}canDecreaseNestingLevel(){return this.composition.canDecreaseNestingLevel()}canIncreaseNestingLevel(){return this.composition.canIncreaseNestingLevel()}decreaseNestingLevel(){if(this.canDecreaseNestingLevel())return this.composition.decreaseNestingLevel()}increaseNestingLevel(){if(this.canIncreaseNestingLevel())return this.composition.increaseNestingLevel()}canRedo(){return this.undoManager.canRedo()}canUndo(){return this.undoManager.canUndo()}recordUndoEntry(e){let{context:t,consolidatable:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.undoManager.recordUndoEntry(e,{context:t,consolidatable:i})}redo(){if(this.canRedo())return this.undoManager.redo()}undo(){if(this.canUndo())return this.undoManager.undo()}},Ro=class{constructor(e){this.element=e}findLocationFromContainerAndOffset(e,t){let{strict:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{strict:!0},s=0,r=!1,o={index:0,offset:0},a=this.findAttachmentElementParentForNode(e);a&&(e=a.parentNode,t=xc(a));let l=Eo(this.element,{usingFilter:Mp});for(;l.nextNode();){let d=l.currentNode;if(d===e&&Ss(e)){wn(d)||(o.offset+=t);break}if(d.parentNode===e){if(s++===t)break}else if(!Pi(e,d)&&s>0)break;Hf(d,{strict:i})?(r&&o.index++,o.offset=0,r=!0):o.offset+=Nc(d)}return o}findContainerAndOffsetFromLocation(e){let t,i;if(e.index===0&&e.offset===0){for(t=this.element,i=0;t.firstChild;)if(t=t.firstChild,Cc(t)){i=1;break}return[t,i]}let[s,r]=this.findNodeAndOffsetFromLocation(e);if(s){if(Ss(s))Nc(s)===0?(t=s.parentNode.parentNode,i=xc(s.parentNode),wn(s,{name:"right"})&&i++):(t=s,i=e.offset-r);else{if(t=s.parentNode,!Hf(s.previousSibling)&&!Cc(t))for(;s===t.lastChild&&(s=t,t=t.parentNode,!Cc(t)););i=xc(s),e.offset!==0&&i++}return[t,i]}}findNodeAndOffsetFromLocation(e){let t,i,s=0;for(let r of this.getSignificantNodesForIndex(e.index)){let o=Nc(r);if(e.offset<=s+o)if(Ss(r)){if(t=r,i=s,e.offset===i&&wn(t))break}else t||(t=r,i=s);if(s+=o,s>e.offset)break}return[t,i]}findAttachmentElementParentForNode(e){for(;e&&e!==this.element;){if(_i(e))return e;e=e.parentNode}}getSignificantNodesForIndex(e){let t=[],i=Eo(this.element,{usingFilter:GS}),s=!1;for(;i.nextNode();){let o=i.currentNode;var r;if(En(o)){if(r!=null?r++:r=0,r===e)s=!0;else if(s)break}else s&&t.push(o)}return t}},Nc=function(n){return n.nodeType===Node.TEXT_NODE?wn(n)?0:n.textContent.length:Be(n)==="br"||_i(n)?1:0},GS=function(n){return XS(n)===NodeFilter.FILTER_ACCEPT?Mp(n):NodeFilter.FILTER_REJECT},XS=function(n){return mp(n)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},Mp=function(n){return _i(n.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},ko=class{createDOMRangeFromPoint(e){let t,{x:i,y:s}=e;if(document.caretPositionFromPoint){let{offsetNode:r,offset:o}=document.caretPositionFromPoint(i,s);return t=document.createRange(),t.setStart(r,o),t}if(document.caretRangeFromPoint)return document.caretRangeFromPoint(i,s);if(document.body.createTextRange){let r=As();try{let o=document.body.createTextRange();o.moveToPoint(i,s),o.select()}catch{}return t=As(),Sp(r),t}}getClientRectsForDOMRange(e){let t=Array.from(e.getClientRects());return[t[0],t[t.length-1]]}},Nt=class extends Ee{constructor(e){super(...arguments),this.didMouseDown=this.didMouseDown.bind(this),this.selectionDidChange=this.selectionDidChange.bind(this),this.element=e,this.locationMapper=new Ro(this.element),this.pointMapper=new ko,this.lockCount=0,ve("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}getLocationRange(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.strict===!1?this.createLocationRangeFromDOMRange(As()):e.ignoreLock?this.currentLocationRange:this.lockedLocationRange?this.lockedLocationRange:this.currentLocationRange}setLocationRange(e){if(this.lockedLocationRange)return;e=he(e);let t=this.createDOMRangeFromLocationRange(e);t&&(Sp(t),this.updateCurrentLocationRange(e))}setLocationRangeFromPointRange(e){e=he(e);let t=this.getLocationAtPoint(e[0]),i=this.getLocationAtPoint(e[1]);this.setLocationRange([t,i])}getClientRectAtLocationRange(e){let t=this.createDOMRangeFromLocationRange(e);if(t)return this.getClientRectsForDOMRange(t)[1]}locationIsCursorTarget(e){let t=Array.from(this.findNodeAndOffsetFromLocation(e))[0];return wn(t)}lock(){this.lockCount++==0&&(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange())}unlock(){if(--this.lockCount==0){let{lockedLocationRange:e}=this;if(this.lockedLocationRange=null,e!=null)return this.setLocationRange(e)}}clearSelection(){var e;return(e=wp())===null||e===void 0?void 0:e.removeAllRanges()}selectionIsCollapsed(){var e;return((e=As())===null||e===void 0?void 0:e.collapsed)===!0}selectionIsExpanded(){return!this.selectionIsCollapsed()}createLocationRangeFromDOMRange(e,t){if(e==null||!this.domRangeWithinElement(e))return;let i=this.findLocationFromContainerAndOffset(e.startContainer,e.startOffset,t);if(!i)return;let s=e.collapsed?void 0:this.findLocationFromContainerAndOffset(e.endContainer,e.endOffset,t);return he([i,s])}didMouseDown(){return this.pauseTemporarily()}pauseTemporarily(){let e;this.paused=!0;let t=()=>{if(this.paused=!1,clearTimeout(i),Array.from(e).forEach(s=>{s.destroy()}),Pi(document,this.element))return this.selectionDidChange()},i=setTimeout(t,200);e=["mousemove","keydown"].map(s=>ve(s,{onElement:document,withCallback:t}))}selectionDidChange(){if(!this.paused&&!cd(this.element))return this.updateCurrentLocationRange()}updateCurrentLocationRange(e){var t,i;if((e??(e=this.createLocationRangeFromDOMRange(As())))&&!wo(e,this.currentLocationRange))return this.currentLocationRange=e,(t=this.delegate)===null||t===void 0||(i=t.locationRangeDidChange)===null||i===void 0?void 0:i.call(t,this.currentLocationRange.slice(0))}createDOMRangeFromLocationRange(e){let t=this.findContainerAndOffsetFromLocation(e[0]),i=Ft(e)?t:this.findContainerAndOffsetFromLocation(e[1])||t;if(t!=null&&i!=null){let s=document.createRange();return s.setStart(...Array.from(t||[])),s.setEnd(...Array.from(i||[])),s}}getLocationAtPoint(e){let t=this.createDOMRangeFromPoint(e);var i;if(t)return(i=this.createLocationRangeFromDOMRange(t))===null||i===void 0?void 0:i[0]}domRangeWithinElement(e){return e.collapsed?Pi(this.element,e.startContainer):Pi(this.element,e.startContainer)&&Pi(this.element,e.endContainer)}};Nt.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),Nt.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),Nt.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),Nt.proxyMethod("pointMapper.createDOMRangeFromPoint"),Nt.proxyMethod("pointMapper.getClientRectsForDOMRange");var Pp=Object.freeze({__proto__:null,Attachment:xn,AttachmentManager:Mo,AttachmentPiece:Cn,Block:ii,Composition:xt,Document:Ue,Editor:_o,HTMLParser:Bi,HTMLSanitizer:An,LineBreakInsertion:Po,LocationMapper:Ro,ManagedAttachment:ge,Piece:zt,PointMapper:ko,SelectionManager:Nt,SplittableList:Ln,StringPiece:Ls,Text:Ze,UndoManager:Ms}),KS=Object.freeze({__proto__:null,ObjectView:$t,AttachmentView:Cs,BlockView:Co,DocumentView:Tn,PieceView:To,PreviewableAttachmentView:Ao,TextView:xo}),{lang:Fc,css:Mi,keyNames:JS}=_s,Bc=function(n){return function(){let e=n.apply(this,arguments);e.do(),this.undos||(this.undos=[]),this.undos.push(e.undo)}},Do=class extends Ee{constructor(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(...arguments),Ye(this,"makeElementMutable",Bc(()=>({do:()=>{this.element.dataset.trixMutable=!0},undo:()=>delete this.element.dataset.trixMutable}))),Ye(this,"addToolbar",Bc(()=>{let r=se({tagName:"div",className:Mi.attachmentToolbar,data:{trixMutable:!0},childNodes:se({tagName:"div",className:"trix-button-row",childNodes:se({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:se({tagName:"button",className:"trix-button trix-button--remove",textContent:Fc.remove,attributes:{title:Fc.remove},data:{trixAction:"remove"}})})})});return this.attachment.isPreviewable()&&r.appendChild(se({tagName:"div",className:Mi.attachmentMetadataContainer,childNodes:se({tagName:"span",className:Mi.attachmentMetadata,childNodes:[se({tagName:"span",className:Mi.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),se({tagName:"span",className:Mi.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),ve("click",{onElement:r,withCallback:this.didClickToolbar}),ve("click",{onElement:r,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),Es("trix-attachment-before-toolbar",{onElement:this.element,attributes:{toolbar:r,attachment:this.attachment}}),{do:()=>this.element.appendChild(r),undo:()=>si(r)}})),Ye(this,"installCaptionEditor",Bc(()=>{let r=se({tagName:"textarea",className:Mi.attachmentCaptionEditor,attributes:{placeholder:Fc.captionPlaceholder},data:{trixMutable:!0}});r.value=this.attachmentPiece.getCaption();let o=r.cloneNode();o.classList.add("trix-autoresize-clone"),o.tabIndex=-1;let a=function(){o.value=r.value,r.style.height=o.scrollHeight+"px"};ve("input",{onElement:r,withCallback:a}),ve("input",{onElement:r,withCallback:this.didInputCaption}),ve("keydown",{onElement:r,withCallback:this.didKeyDownCaption}),ve("change",{onElement:r,withCallback:this.didChangeCaption}),ve("blur",{onElement:r,withCallback:this.didBlurCaption});let l=this.element.querySelector("figcaption"),d=l.cloneNode();return{do:()=>{if(l.style.display="none",d.appendChild(r),d.appendChild(o),d.classList.add("".concat(Mi.attachmentCaption,"--editing")),l.parentElement.insertBefore(d,l),a(),this.options.editCaption)return hd(()=>r.focus())},undo(){si(d),l.style.display=null}}})),this.didClickToolbar=this.didClickToolbar.bind(this),this.didClickActionButton=this.didClickActionButton.bind(this),this.didKeyDownCaption=this.didKeyDownCaption.bind(this),this.didInputCaption=this.didInputCaption.bind(this),this.didChangeCaption=this.didChangeCaption.bind(this),this.didBlurCaption=this.didBlurCaption.bind(this),this.attachmentPiece=e,this.element=t,this.container=i,this.options=s,this.attachment=this.attachmentPiece.attachment,Be(this.element)==="a"&&(this.element=this.element.firstChild),this.install()}install(){this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()&&this.installCaptionEditor()}uninstall(){var e;let t=this.undos.pop();for(this.savePendingCaption();t;)t(),t=this.undos.pop();(e=this.delegate)===null||e===void 0||e.didUninstallAttachmentEditor(this)}savePendingCaption(){if(this.pendingCaption!=null){let r=this.pendingCaption;var e,t,i,s;this.pendingCaption=null,r?(e=this.delegate)===null||e===void 0||(t=e.attachmentEditorDidRequestUpdatingAttributesForAttachment)===null||t===void 0||t.call(e,{caption:r},this.attachment):(i=this.delegate)===null||i===void 0||(s=i.attachmentEditorDidRequestRemovingAttributeForAttachment)===null||s===void 0||s.call(i,"caption",this.attachment)}}didClickToolbar(e){return e.preventDefault(),e.stopPropagation()}didClickActionButton(e){var t;if(e.target.getAttribute("data-trix-action")==="remove")return(t=this.delegate)===null||t===void 0?void 0:t.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)}didKeyDownCaption(e){var t,i;if(JS[e.keyCode]==="return")return e.preventDefault(),this.savePendingCaption(),(t=this.delegate)===null||t===void 0||(i=t.attachmentEditorDidRequestDeselectingAttachment)===null||i===void 0?void 0:i.call(t,this.attachment)}didInputCaption(e){this.pendingCaption=e.target.value.replace(/\s/g," ").trim()}didChangeCaption(e){return this.savePendingCaption()}didBlurCaption(e){return this.savePendingCaption()}},Io=class extends Ee{constructor(e,t){super(...arguments),this.didFocus=this.didFocus.bind(this),this.didBlur=this.didBlur.bind(this),this.didClickAttachment=this.didClickAttachment.bind(this),this.element=e,this.composition=t,this.documentView=new Tn(this.composition.document,{element:this.element}),ve("focus",{onElement:this.element,withCallback:this.didFocus}),ve("blur",{onElement:this.element,withCallback:this.didBlur}),ve("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),ve("mousedown",{onElement:this.element,matchingSelector:Oi,withCallback:this.didClickAttachment}),ve("click",{onElement:this.element,matchingSelector:"a".concat(Oi),preventDefault:!0})}didFocus(e){var t;let i=()=>{var s,r;if(!this.focused)return this.focused=!0,(s=this.delegate)===null||s===void 0||(r=s.compositionControllerDidFocus)===null||r===void 0?void 0:r.call(s)};return((t=this.blurPromise)===null||t===void 0?void 0:t.then(i))||i()}didBlur(e){this.blurPromise=new Promise(t=>hd(()=>{var i,s;return cd(this.element)||(this.focused=null,(i=this.delegate)===null||i===void 0||(s=i.compositionControllerDidBlur)===null||s===void 0||s.call(i)),this.blurPromise=null,t()}))}didClickAttachment(e,t){var i,s;let r=this.findAttachmentForElement(t),o=!!ni(e.target,{matchingSelector:"figcaption"});return(i=this.delegate)===null||i===void 0||(s=i.compositionControllerDidSelectAttachment)===null||s===void 0?void 0:s.call(i,r,{editCaption:o})}getSerializableElement(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element}render(){var e,t,i,s,r,o;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&((i=this.delegate)===null||i===void 0||(s=i.compositionControllerWillSyncDocumentView)===null||s===void 0||s.call(i),this.documentView.sync(),(r=this.delegate)===null||r===void 0||(o=r.compositionControllerDidSyncDocumentView)===null||o===void 0||o.call(r)),(e=this.delegate)===null||e===void 0||(t=e.compositionControllerDidRender)===null||t===void 0?void 0:t.call(e)}rerenderViewForObject(e){return this.invalidateViewForObject(e),this.render()}invalidateViewForObject(e){return this.documentView.invalidateViewForObject(e)}isViewCachingEnabled(){return this.documentView.isViewCachingEnabled()}enableViewCaching(){return this.documentView.enableViewCaching()}disableViewCaching(){return this.documentView.disableViewCaching()}refreshViewCache(){return this.documentView.garbageCollectCachedViews()}isEditingAttachment(){return!!this.attachmentEditor}installAttachmentEditorForAttachment(e,t){var i;if(((i=this.attachmentEditor)===null||i===void 0?void 0:i.attachment)===e)return;let s=this.documentView.findElementForObject(e);if(!s)return;this.uninstallAttachmentEditor();let r=this.composition.document.getAttachmentPieceForAttachment(e);this.attachmentEditor=new Do(r,s,this.element,t),this.attachmentEditor.delegate=this}uninstallAttachmentEditor(){var e;return(e=this.attachmentEditor)===null||e===void 0?void 0:e.uninstall()}didUninstallAttachmentEditor(){return this.attachmentEditor=null,this.render()}attachmentEditorDidRequestUpdatingAttributesForAttachment(e,t){var i,s;return(i=this.delegate)===null||i===void 0||(s=i.compositionControllerWillUpdateAttachment)===null||s===void 0||s.call(i,t),this.composition.updateAttributesForAttachment(e,t)}attachmentEditorDidRequestRemovingAttributeForAttachment(e,t){var i,s;return(i=this.delegate)===null||i===void 0||(s=i.compositionControllerWillUpdateAttachment)===null||s===void 0||s.call(i,t),this.composition.removeAttributeForAttachment(e,t)}attachmentEditorDidRequestRemovalOfAttachment(e){var t,i;return(t=this.delegate)===null||t===void 0||(i=t.compositionControllerDidRequestRemovalOfAttachment)===null||i===void 0?void 0:i.call(t,e)}attachmentEditorDidRequestDeselectingAttachment(e){var t,i;return(t=this.delegate)===null||t===void 0||(i=t.compositionControllerDidRequestDeselectingAttachment)===null||i===void 0?void 0:i.call(t,e)}canSyncDocumentView(){return!this.isEditingAttachment()}findAttachmentForElement(e){return this.composition.document.getAttachmentById(parseInt(e.dataset.trixId,10))}},No=class extends Ee{},Op="data-trix-mutable",ZS="[".concat(Op,"]"),QS={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},Fo=class extends Ee{constructor(e){super(e),this.didMutate=this.didMutate.bind(this),this.element=e,this.observer=new window.MutationObserver(this.didMutate),this.start()}start(){return this.reset(),this.observer.observe(this.element,QS)}stop(){return this.observer.disconnect()}didMutate(e){var t,i;if(this.mutations.push(...Array.from(this.findSignificantMutations(e)||[])),this.mutations.length)return(t=this.delegate)===null||t===void 0||(i=t.elementDidMutate)===null||i===void 0||i.call(t,this.getMutationSummary()),this.reset()}reset(){this.mutations=[]}findSignificantMutations(e){return e.filter(t=>this.mutationIsSignificant(t))}mutationIsSignificant(e){if(this.nodeIsMutable(e.target))return!1;for(let t of Array.from(this.nodesModifiedByMutation(e)))if(this.nodeIsSignificant(t))return!0;return!1}nodeIsSignificant(e){return e!==this.element&&!this.nodeIsMutable(e)&&!mp(e)}nodeIsMutable(e){return ni(e,{matchingSelector:ZS})}nodesModifiedByMutation(e){let t=[];switch(e.type){case"attributes":e.attributeName!==Op&&t.push(e.target);break;case"characterData":t.push(e.target.parentNode),t.push(e.target);break;case"childList":t.push(...Array.from(e.addedNodes||[])),t.push(...Array.from(e.removedNodes||[]))}return t}getMutationSummary(){return this.getTextMutationSummary()}getTextMutationSummary(){let{additions:e,deletions:t}=this.getTextChangesFromCharacterData(),i=this.getTextChangesFromChildList();Array.from(i.additions).forEach(a=>{Array.from(e).includes(a)||e.push(a)}),t.push(...Array.from(i.deletions||[]));let s={},r=e.join("");r&&(s.textAdded=r);let o=t.join("");return o&&(s.textDeleted=o),s}getMutationsByType(e){return Array.from(this.mutations).filter(t=>t.type===e)}getTextChangesFromChildList(){let e,t,i=[],s=[];return Array.from(this.getMutationsByType("childList")).forEach(r=>{i.push(...Array.from(r.addedNodes||[])),s.push(...Array.from(r.removedNodes||[]))}),i.length===0&&s.length===1&&En(s[0])?(e=[],t=[`
`]):(e=td(i),t=td(s)),{additions:e.filter((r,o)=>r!==t[o]).map(ys),deletions:t.filter((r,o)=>r!==e[o]).map(ys)}}getTextChangesFromCharacterData(){let e,t,i=this.getMutationsByType("characterData");if(i.length){let s=i[0],r=i[i.length-1],o=function(a,l){let d,u;return a=Ii.box(a),(l=Ii.box(l)).length<a.length?[u,d]=Yf(a,l):[d,u]=Yf(l,a),{added:d,removed:u}}(ys(s.oldValue),ys(r.target.data));e=o.added,t=o.removed}return{additions:e?[e]:[],deletions:t?[t]:[]}}},td=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=[];for(let t of Array.from(n))switch(t.nodeType){case Node.TEXT_NODE:e.push(t.data);break;case Node.ELEMENT_NODE:Be(t)==="br"?e.push(`
`):e.push(...Array.from(td(t.childNodes)||[]))}return e},Bo=class extends Sn{constructor(e){super(...arguments),this.file=e}perform(e){let t=new FileReader;return t.onerror=()=>e(!1),t.onload=()=>{t.onerror=null;try{t.abort()}catch{}return e(!0,this.file)},t.readAsArrayBuffer(this.file)}},id=class{constructor(e){this.element=e}shouldIgnore(e){return!!Os.samsungAndroid&&(this.previousEvent=this.event,this.event=e,this.checkSamsungKeyboardBuggyModeStart(),this.checkSamsungKeyboardBuggyModeEnd(),this.buggyMode)}checkSamsungKeyboardBuggyModeStart(){this.insertingLongTextAfterUnidentifiedChar()&&eA(this.element.innerText,this.event.data)&&(this.buggyMode=!0,this.event.preventDefault())}checkSamsungKeyboardBuggyModeEnd(){this.buggyMode&&this.event.inputType!=="insertText"&&(this.buggyMode=!1)}insertingLongTextAfterUnidentifiedChar(){var e;return this.isBeforeInputInsertText()&&this.previousEventWasUnidentifiedKeydown()&&((e=this.event.data)===null||e===void 0?void 0:e.length)>50}isBeforeInputInsertText(){return this.event.type==="beforeinput"&&this.event.inputType==="insertText"}previousEventWasUnidentifiedKeydown(){var e,t;return((e=this.previousEvent)===null||e===void 0?void 0:e.type)==="keydown"&&((t=this.previousEvent)===null||t===void 0?void 0:t.key)==="Unidentified"}},eA=(n,e)=>op(n)===op(e),tA=new RegExp("(".concat("\uFFFC","|").concat(Ho,"|").concat(ti,"|\\s)+"),"g"),op=n=>n.replace(tA," ").trim(),Mn=class extends Ee{constructor(e){super(...arguments),this.element=e,this.mutationObserver=new Fo(this.element),this.mutationObserver.delegate=this,this.flakyKeyboardDetector=new id(this.element);for(let t in this.constructor.events)ve(t,{onElement:this.element,withCallback:this.handlerFor(t)})}elementDidMutate(e){}editorWillSyncDocumentView(){return this.mutationObserver.stop()}editorDidSyncDocumentView(){return this.mutationObserver.start()}requestRender(){var e,t;return(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidRequestRender)===null||t===void 0?void 0:t.call(e)}requestReparse(){var e,t;return(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidRequestReparse)===null||t===void 0||t.call(e),this.requestRender()}attachFiles(e){let t=Array.from(e).map(i=>new Bo(i));return Promise.all(t).then(i=>{this.handleInput(function(){var s,r;return(s=this.delegate)===null||s===void 0||s.inputControllerWillAttachFiles(),(r=this.responder)===null||r===void 0||r.insertFiles(i),this.requestRender()})})}handlerFor(e){return t=>{t.defaultPrevented||this.handleInput(()=>{if(!cd(this.element)){if(this.flakyKeyboardDetector.shouldIgnore(t))return;this.eventName=e,this.constructor.events[e].call(this,t)}})}}handleInput(e){try{var t;(t=this.delegate)===null||t===void 0||t.inputControllerWillHandleInput(),e.call(this)}finally{var i;(i=this.delegate)===null||i===void 0||i.inputControllerDidHandleInput()}}createLinkHTML(e,t){let i=document.createElement("a");return i.href=e,i.textContent=t||e,i.outerHTML}},$c;Ye(Mn,"events",{});var{browser:iA,keyNames:_p}=_s,nA=0,mt=class extends Mn{constructor(){super(...arguments),this.resetInputSummary()}setInputSummary(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.inputSummary.eventName=this.eventName;for(let t in e){let i=e[t];this.inputSummary[t]=i}return this.inputSummary}resetInputSummary(){this.inputSummary={}}reset(){return this.resetInputSummary(),Fi.reset()}elementDidMutate(e){var t,i;return this.isComposing()?(t=this.delegate)===null||t===void 0||(i=t.inputControllerDidAllowUnhandledInput)===null||i===void 0?void 0:i.call(t):this.handleInput(function(){return this.mutationIsSignificant(e)&&(this.mutationIsExpected(e)?this.requestRender():this.requestReparse()),this.reset()})}mutationIsExpected(e){let{textAdded:t,textDeleted:i}=e;if(this.inputSummary.preferDocument)return!0;let s=t!=null?t===this.inputSummary.textAdded:!this.inputSummary.textAdded,r=i!=null?this.inputSummary.didDelete:!this.inputSummary.didDelete,o=[`
`,` 
`].includes(t)&&!s,a=i===`
`&&!r;if(o&&!a||a&&!o){let d=this.getSelectedRange();if(d){var l;let u=o?t.replace(/\n$/,"").length||-1:t?.length||1;if((l=this.responder)!==null&&l!==void 0&&l.positionIsBlockBreak(d[1]+u))return!0}}return s&&r}mutationIsSignificant(e){var t;let i=Object.keys(e).length>0,s=((t=this.compositionInput)===null||t===void 0?void 0:t.getEndData())==="";return i||!s}getCompositionInput(){if(this.isComposing())return this.compositionInput;this.compositionInput=new Tt(this)}isComposing(){return this.compositionInput&&!this.compositionInput.isEnded()}deleteInDirection(e,t){var i;return((i=this.responder)===null||i===void 0?void 0:i.deleteInDirection(e))!==!1?this.setInputSummary({didDelete:!0}):t?(t.preventDefault(),this.requestRender()):void 0}serializeSelectionToDataTransfer(e){var t;if(!function(s){if(s==null||!s.setData)return!1;for(let r in Wf){let o=Wf[r];try{if(s.setData(r,o),!s.getData(r)===o)return!1}catch{return!1}}return!0}(e))return;let i=(t=this.responder)===null||t===void 0?void 0:t.getSelectedDocument().toSerializableDocument();return e.setData("application/x-trix-document",JSON.stringify(i)),e.setData("text/html",Tn.render(i).innerHTML),e.setData("text/plain",i.toString().replace(/\n$/,"")),!0}canAcceptDataTransfer(e){let t={};return Array.from(e?.types||[]).forEach(i=>{t[i]=!0}),t.Files||t["application/x-trix-document"]||t["text/html"]||t["text/plain"]}getPastedHTMLUsingHiddenElement(e){let t=this.getSelectedRange(),i={position:"absolute",left:"".concat(window.pageXOffset,"px"),top:"".concat(window.pageYOffset,"px"),opacity:0},s=se({style:i,tagName:"div",editable:!0});return document.body.appendChild(s),s.focus(),requestAnimationFrame(()=>{let r=s.innerHTML;return si(s),this.setSelectedRange(t),e(r)})}};Ye(mt,"events",{keydown(n){this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0;let e=_p[n.keyCode];if(e){var t;let s=this.keys;["ctrl","alt","shift","meta"].forEach(r=>{var o;n["".concat(r,"Key")]&&(r==="ctrl"&&(r="control"),s=(o=s)===null||o===void 0?void 0:o[r])}),((t=s)===null||t===void 0?void 0:t[e])!=null&&(this.setInputSummary({keyName:e}),Fi.reset(),s[e].call(this,n))}if(yp(n)){let s=String.fromCharCode(n.keyCode).toLowerCase();if(s){var i;let r=["alt","shift"].map(o=>{if(n["".concat(o,"Key")])return o}).filter(o=>o);r.push(s),(i=this.delegate)!==null&&i!==void 0&&i.inputControllerDidReceiveKeyboardCommand(r)&&n.preventDefault()}}},keypress(n){if(this.inputSummary.eventName!=null||n.metaKey||n.ctrlKey&&!n.altKey)return;let e=oA(n);var t,i;return e?((t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(i=this.responder)===null||i===void 0||i.insertString(e),this.setInputSummary({textAdded:e,didDelete:this.selectionIsExpanded()})):void 0},textInput(n){let{data:e}=n,{textAdded:t}=this.inputSummary;if(t&&t!==e&&t.toUpperCase()===e){var i;let s=this.getSelectedRange();return this.setSelectedRange([s[0],s[1]+t.length]),(i=this.responder)===null||i===void 0||i.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(s)}},dragenter(n){n.preventDefault()},dragstart(n){var e,t;return this.serializeSelectionToDataTransfer(n.dataTransfer),this.draggedRange=this.getSelectedRange(),(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidStartDrag)===null||t===void 0?void 0:t.call(e)},dragover(n){if(this.draggedRange||this.canAcceptDataTransfer(n.dataTransfer)){n.preventDefault();let i={x:n.clientX,y:n.clientY};var e,t;if(!Pn(i,this.draggingPoint))return this.draggingPoint=i,(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidReceiveDragOverPoint)===null||t===void 0?void 0:t.call(e,this.draggingPoint)}},dragend(n){var e,t;(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidCancelDrag)===null||t===void 0||t.call(e),this.draggedRange=null,this.draggingPoint=null},drop(n){var e,t;n.preventDefault();let i=(e=n.dataTransfer)===null||e===void 0?void 0:e.files,s=n.dataTransfer.getData("application/x-trix-document"),r={x:n.clientX,y:n.clientY};if((t=this.responder)===null||t===void 0||t.setLocationRangeFromPointRange(r),i!=null&&i.length)this.attachFiles(i);else if(this.draggedRange){var o,a;(o=this.delegate)===null||o===void 0||o.inputControllerWillMoveText(),(a=this.responder)===null||a===void 0||a.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()}else if(s){var l;let d=Ue.fromJSONString(s);(l=this.responder)===null||l===void 0||l.insertDocument(d),this.requestRender()}this.draggedRange=null,this.draggingPoint=null},cut(n){var e,t;if((e=this.responder)!==null&&e!==void 0&&e.selectionIsExpanded()&&(this.serializeSelectionToDataTransfer(n.clipboardData)&&n.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillCutText(),this.deleteInDirection("backward"),n.defaultPrevented))return this.requestRender()},copy(n){var e;(e=this.responder)!==null&&e!==void 0&&e.selectionIsExpanded()&&this.serializeSelectionToDataTransfer(n.clipboardData)&&n.preventDefault()},paste(n){let e=n.clipboardData||n.testClipboardData,t={clipboard:e};if(!e||aA(n))return void this.getPastedHTMLUsingHiddenElement(R=>{var D,H,q;return t.type="text/html",t.html=R,(D=this.delegate)===null||D===void 0||D.inputControllerWillPaste(t),(H=this.responder)===null||H===void 0||H.insertHTML(t.html),this.requestRender(),(q=this.delegate)===null||q===void 0?void 0:q.inputControllerDidPaste(t)});let i=e.getData("URL"),s=e.getData("text/html"),r=e.getData("public.url-name");if(i){var o,a,l;let R;t.type="text/html",R=r?pd(r).trim():i,t.html=this.createLinkHTML(i,R),(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(t),this.setInputSummary({textAdded:R,didDelete:this.selectionIsExpanded()}),(a=this.responder)===null||a===void 0||a.insertHTML(t.html),this.requestRender(),(l=this.delegate)===null||l===void 0||l.inputControllerDidPaste(t)}else if(bp(e)){var d,u,h;t.type="text/plain",t.string=e.getData("text/plain"),(d=this.delegate)===null||d===void 0||d.inputControllerWillPaste(t),this.setInputSummary({textAdded:t.string,didDelete:this.selectionIsExpanded()}),(u=this.responder)===null||u===void 0||u.insertString(t.string),this.requestRender(),(h=this.delegate)===null||h===void 0||h.inputControllerDidPaste(t)}else if(s){var m,p,g;t.type="text/html",t.html=s,(m=this.delegate)===null||m===void 0||m.inputControllerWillPaste(t),(p=this.responder)===null||p===void 0||p.insertHTML(t.html),this.requestRender(),(g=this.delegate)===null||g===void 0||g.inputControllerDidPaste(t)}else if(Array.from(e.types).includes("Files")){var v,w;let R=(v=e.items)===null||v===void 0||(v=v[0])===null||v===void 0||(w=v.getAsFile)===null||w===void 0?void 0:w.call(v);if(R){var y,P,O;let D=sA(R);!R.name&&D&&(R.name="pasted-file-".concat(++nA,".").concat(D)),t.type="File",t.file=R,(y=this.delegate)===null||y===void 0||y.inputControllerWillAttachFiles(),(P=this.responder)===null||P===void 0||P.insertFile(t.file),this.requestRender(),(O=this.delegate)===null||O===void 0||O.inputControllerDidPaste(t)}}n.preventDefault()},compositionstart(n){return this.getCompositionInput().start(n.data)},compositionupdate(n){return this.getCompositionInput().update(n.data)},compositionend(n){return this.getCompositionInput().end(n.data)},beforeinput(n){this.inputSummary.didInput=!0},input(n){return this.inputSummary.didInput=!0,n.stopPropagation()}}),Ye(mt,"keys",{backspace(n){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",n)},delete(n){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",n)},return(n){var e,t;return this.setInputSummary({preferDocument:!0}),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0?void 0:t.insertLineBreak()},tab(n){var e,t;(e=this.responder)!==null&&e!==void 0&&e.canIncreaseNestingLevel()&&((t=this.responder)===null||t===void 0||t.increaseNestingLevel(),this.requestRender(),n.preventDefault())},left(n){var e;if(this.selectionIsInCursorTarget())return n.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("backward")},right(n){var e;if(this.selectionIsInCursorTarget())return n.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("forward")},control:{d(n){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",n)},h(n){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",n)},o(n){var e,t;return n.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0||t.insertString(`
`,{updatePosition:!1}),this.requestRender()}},shift:{return(n){var e,t;(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0||t.insertString(`
`),this.requestRender(),n.preventDefault()},tab(n){var e,t;(e=this.responder)!==null&&e!==void 0&&e.canDecreaseNestingLevel()&&((t=this.responder)===null||t===void 0||t.decreaseNestingLevel(),this.requestRender(),n.preventDefault())},left(n){if(this.selectionIsInCursorTarget())return n.preventDefault(),this.expandSelectionInDirection("backward")},right(n){if(this.selectionIsInCursorTarget())return n.preventDefault(),this.expandSelectionInDirection("forward")}},alt:{backspace(n){var e;return this.setInputSummary({preferDocument:!1}),(e=this.delegate)===null||e===void 0?void 0:e.inputControllerWillPerformTyping()}},meta:{backspace(n){var e;return this.setInputSummary({preferDocument:!1}),(e=this.delegate)===null||e===void 0?void 0:e.inputControllerWillPerformTyping()}}}),mt.proxyMethod("responder?.getSelectedRange"),mt.proxyMethod("responder?.setSelectedRange"),mt.proxyMethod("responder?.expandSelectionInDirection"),mt.proxyMethod("responder?.selectionIsInCursorTarget"),mt.proxyMethod("responder?.selectionIsExpanded");var sA=n=>{var e;return(e=n.type)===null||e===void 0||(e=e.match(/\/(\w+)$/))===null||e===void 0?void 0:e[1]},rA=!(($c=" ".codePointAt)===null||$c===void 0||!$c.call(" ",0)),oA=function(n){if(n.key&&rA&&n.key.codePointAt(0)===n.keyCode)return n.key;{let e;if(n.which===null?e=n.keyCode:n.which!==0&&n.charCode!==0&&(e=n.charCode),e!=null&&_p[e]!=="escape")return Ii.fromCodepoints([e]).toString()}},aA=function(n){let e=n.clipboardData;if(e){if(e.types.includes("text/html")){for(let t of e.types){let i=/^CorePasteboardFlavorType/.test(t),s=/^dyn\./.test(t)&&e.getData(t);if(i||s)return!0}return!1}{let t=e.types.includes("com.apple.webarchive"),i=e.types.includes("com.apple.flat-rtfd");return t||i}}},Tt=class extends Ee{constructor(e){super(...arguments),this.inputController=e,this.responder=this.inputController.responder,this.delegate=this.inputController.delegate,this.inputSummary=this.inputController.inputSummary,this.data={}}start(e){if(this.data.start=e,this.isSignificant()){var t,i;this.inputSummary.eventName==="keypress"&&this.inputSummary.textAdded&&((i=this.responder)===null||i===void 0||i.deleteInDirection("left")),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=(t=this.responder)===null||t===void 0?void 0:t.getSelectedRange()}}update(e){if(this.data.update=e,this.isSignificant()){let t=this.selectPlaceholder();t&&(this.forgetPlaceholder(),this.range=t)}}end(e){return this.data.end=e,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(i=this.responder)===null||i===void 0||i.setSelectedRange(this.range),(s=this.responder)===null||s===void 0||s.insertString(this.data.end),(r=this.responder)===null||r===void 0?void 0:r.setSelectedRange(this.range[0]+this.data.end.length)):this.data.start!=null||this.data.update!=null?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset();var t,i,s,r}getEndData(){return this.data.end}isEnded(){return this.getEndData()!=null}isSignificant(){return!iA.composesExistingText||this.inputSummary.didInput}canApplyToDocument(){var e,t;return((e=this.data.start)===null||e===void 0?void 0:e.length)===0&&((t=this.data.end)===null||t===void 0?void 0:t.length)>0&&this.range}};Tt.proxyMethod("inputController.setInputSummary"),Tt.proxyMethod("inputController.requestRender"),Tt.proxyMethod("inputController.requestReparse"),Tt.proxyMethod("responder?.selectionIsExpanded"),Tt.proxyMethod("responder?.insertPlaceholder"),Tt.proxyMethod("responder?.selectPlaceholder"),Tt.proxyMethod("responder?.forgetPlaceholder");var Ri=class extends Mn{constructor(){super(...arguments),this.render=this.render.bind(this)}elementDidMutate(){return this.scheduledRender?this.composing?(e=this.delegate)===null||e===void 0||(t=e.inputControllerDidAllowUnhandledInput)===null||t===void 0?void 0:t.call(e):void 0:this.reparse();var e,t}scheduleRender(){return this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)}render(){var e,t;cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||(t=this.delegate)===null||t===void 0||t.render(),(e=this.afterRender)===null||e===void 0||e.call(this),this.afterRender=null}reparse(){var e;return(e=this.delegate)===null||e===void 0?void 0:e.reparse()}insertString(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var s;return(s=this.responder)===null||s===void 0?void 0:s.insertString(t,i)})}toggleAttributeIfSupported(e){var t;if(Gc().includes(e))return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformFormatting(e),this.withTargetDOMRange(function(){var i;return(i=this.responder)===null||i===void 0?void 0:i.toggleCurrentAttribute(e)})}activateAttributeIfSupported(e,t){var i;if(Gc().includes(e))return(i=this.delegate)===null||i===void 0||i.inputControllerWillPerformFormatting(e),this.withTargetDOMRange(function(){var s;return(s=this.responder)===null||s===void 0?void 0:s.setCurrentAttribute(e,t)})}deleteInDirection(e){let{recordUndoEntry:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{recordUndoEntry:!0};var i;t&&((i=this.delegate)===null||i===void 0||i.inputControllerWillPerformTyping());let s=()=>{var o;return(o=this.responder)===null||o===void 0?void 0:o.deleteInDirection(e)},r=this.getTargetDOMRange({minLength:this.composing?1:2});return r?this.withTargetDOMRange(r,s):s()}withTargetDOMRange(e,t){var i;return typeof e=="function"&&(t=e,e=this.getTargetDOMRange()),e?(i=this.responder)===null||i===void 0?void 0:i.withTargetDOMRange(e,t.bind(this)):(Fi.reset(),t.call(this))}getTargetDOMRange(){var e,t;let{minLength:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{minLength:0},s=(e=(t=this.event).getTargetRanges)===null||e===void 0?void 0:e.call(t);if(s&&s.length){let r=lA(s[0]);if(i===0||r.toString().length>=i)return r}}withEvent(e,t){let i;this.event=e;try{i=t.call(this)}finally{this.event=null}return i}};Ye(Ri,"events",{keydown(n){if(yp(n)){var e;let t=uA(n);(e=this.delegate)!==null&&e!==void 0&&e.inputControllerDidReceiveKeyboardCommand(t)&&n.preventDefault()}else{let t=n.key;n.altKey&&(t+="+Alt"),n.shiftKey&&(t+="+Shift");let i=this.constructor.keys[t];if(i)return this.withEvent(n,i)}},paste(n){var e;let t,i=(e=n.clipboardData)===null||e===void 0?void 0:e.getData("URL");return Rp(n)?(n.preventDefault(),this.attachFiles(n.clipboardData.files)):dA(n)?(n.preventDefault(),t={type:"text/plain",string:n.clipboardData.getData("text/plain")},(s=this.delegate)===null||s===void 0||s.inputControllerWillPaste(t),(r=this.responder)===null||r===void 0||r.insertString(t.string),this.render(),(o=this.delegate)===null||o===void 0?void 0:o.inputControllerDidPaste(t)):i?(n.preventDefault(),t={type:"text/html",html:this.createLinkHTML(i)},(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(t),(l=this.responder)===null||l===void 0||l.insertHTML(t.html),this.render(),(d=this.delegate)===null||d===void 0?void 0:d.inputControllerDidPaste(t)):void 0;var s,r,o,a,l,d},beforeinput(n){let e=this.constructor.inputTypes[n.inputType],t=(i=n,!(!/iPhone|iPad/.test(navigator.userAgent)||i.inputType&&i.inputType!=="insertParagraph"));var i;e&&(this.withEvent(n,e),t||this.scheduleRender()),t&&this.render()},input(n){Fi.reset()},dragstart(n){var e,t;(e=this.responder)!==null&&e!==void 0&&e.selectionContainsAttachments()&&(n.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:(t=this.responder)===null||t===void 0?void 0:t.getSelectedRange(),point:Hc(n)})},dragenter(n){zc(n)&&n.preventDefault()},dragover(n){if(this.dragging){n.preventDefault();let t=Hc(n);var e;if(!Pn(t,this.dragging.point))return this.dragging.point=t,(e=this.responder)===null||e===void 0?void 0:e.setLocationRangeFromPointRange(t)}else zc(n)&&n.preventDefault()},drop(n){var e,t;if(this.dragging)return n.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillMoveText(),(t=this.responder)===null||t===void 0||t.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender();if(zc(n)){var i;n.preventDefault();let s=Hc(n);return(i=this.responder)===null||i===void 0||i.setLocationRangeFromPointRange(s),this.attachFiles(n.dataTransfer.files)}},dragend(){var n;this.dragging&&((n=this.responder)===null||n===void 0||n.setSelectedRange(this.dragging.range),this.dragging=null)},compositionend(n){this.composing&&(this.composing=!1,Os.recentAndroid||this.scheduleRender())}}),Ye(Ri,"keys",{ArrowLeft(){var n,e;if((n=this.responder)!==null&&n!==void 0&&n.shouldManageMovingCursorInDirection("backward"))return this.event.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("backward")},ArrowRight(){var n,e;if((n=this.responder)!==null&&n!==void 0&&n.shouldManageMovingCursorInDirection("forward"))return this.event.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("forward")},Backspace(){var n,e,t;if((n=this.responder)!==null&&n!==void 0&&n.shouldManageDeletingInDirection("backward"))return this.event.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(t=this.responder)===null||t===void 0||t.deleteInDirection("backward"),this.render()},Tab(){var n,e;if((n=this.responder)!==null&&n!==void 0&&n.canIncreaseNestingLevel())return this.event.preventDefault(),(e=this.responder)===null||e===void 0||e.increaseNestingLevel(),this.render()},"Tab+Shift"(){var n,e;if((n=this.responder)!==null&&n!==void 0&&n.canDecreaseNestingLevel())return this.event.preventDefault(),(e=this.responder)===null||e===void 0||e.decreaseNestingLevel(),this.render()}}),Ye(Ri,"inputTypes",{deleteByComposition(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut(){return this.deleteInDirection("backward")},deleteByDrag(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var n;this.deleteByDragRange=(n=this.responder)===null||n===void 0?void 0:n.getSelectedRange()})},deleteCompositionText(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent(){return this.deleteInDirection("backward")},deleteContentBackward(){return this.deleteInDirection("backward")},deleteContentForward(){return this.deleteInDirection("forward")},deleteEntireSoftLine(){return this.deleteInDirection("forward")},deleteHardLineBackward(){return this.deleteInDirection("backward")},deleteHardLineForward(){return this.deleteInDirection("forward")},deleteSoftLineBackward(){return this.deleteInDirection("backward")},deleteSoftLineForward(){return this.deleteInDirection("forward")},deleteWordBackward(){return this.deleteInDirection("backward")},deleteWordForward(){return this.deleteInDirection("forward")},formatBackColor(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold(){return this.toggleAttributeIfSupported("bold")},formatFontColor(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent(){var n;if((n=this.responder)!==null&&n!==void 0&&n.canIncreaseNestingLevel())return this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.increaseNestingLevel()})},formatItalic(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent(){var n;if((n=this.responder)!==null&&n!==void 0&&n.canDecreaseNestingLevel())return this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.decreaseNestingLevel()})},formatRemove(){this.withTargetDOMRange(function(){for(let t in(n=this.responder)===null||n===void 0?void 0:n.getCurrentAttributes()){var n,e;(e=this.responder)===null||e===void 0||e.removeCurrentAttribute(t)}})},formatSetBlockTextDirection(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough(){return this.toggleAttributeIfSupported("strike")},formatSubscript(){return this.toggleAttributeIfSupported("sub")},formatSuperscript(){return this.toggleAttributeIfSupported("sup")},formatUnderline(){return this.toggleAttributeIfSupported("underline")},historyRedo(){var n;return(n=this.delegate)===null||n===void 0?void 0:n.inputControllerWillPerformRedo()},historyUndo(){var n;return(n=this.delegate)===null||n===void 0?void 0:n.inputControllerWillPerformUndo()},insertCompositionText(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop(){let n=this.deleteByDragRange;var e;if(n)return this.deleteByDragRange=null,(e=this.delegate)===null||e===void 0||e.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.moveTextFromRange(n)})},insertFromPaste(){let{dataTransfer:n}=this.event,e={dataTransfer:n},t=n.getData("URL"),i=n.getData("text/html");if(t){var s;let l;this.event.preventDefault(),e.type="text/html";let d=n.getData("public.url-name");l=d?pd(d).trim():t,e.html=this.createLinkHTML(t,l),(s=this.delegate)===null||s===void 0||s.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var u;return(u=this.responder)===null||u===void 0?void 0:u.insertHTML(e.html)}),this.afterRender=()=>{var u;return(u=this.delegate)===null||u===void 0?void 0:u.inputControllerDidPaste(e)}}else if(bp(n)){var r;e.type="text/plain",e.string=n.getData("text/plain"),(r=this.delegate)===null||r===void 0||r.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertString(e.string)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(e)}}else if(cA(this.event)){var o;e.type="File",e.file=n.files[0],(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertFile(e.file)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(e)}}else if(i){var a;this.event.preventDefault(),e.type="text/html",e.html=i,(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertHTML(e.html)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(e)}}},insertFromYank(){return this.insertString(this.event.data)},insertLineBreak(){return this.insertString(`
`)},insertLink(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList(){return this.toggleAttributeIfSupported("number")},insertParagraph(){var n;return(n=this.delegate)===null||n===void 0||n.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.insertLineBreak()})},insertReplacementText(){let n=this.event.dataTransfer.getData("text/plain"),e=this.event.getTargetRanges()[0];this.withTargetDOMRange(e,()=>{this.insertString(n,{updatePosition:!1})})},insertText(){var n;return this.insertString(this.event.data||((n=this.event.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain")))},insertTranspose(){return this.insertString(this.event.data)},insertUnorderedList(){return this.toggleAttributeIfSupported("bullet")}});var lA=function(n){let e=document.createRange();return e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),e},zc=n=>{var e;return Array.from(((e=n.dataTransfer)===null||e===void 0?void 0:e.types)||[]).includes("Files")},cA=n=>{var e;return((e=n.dataTransfer.files)===null||e===void 0?void 0:e[0])&&!Rp(n)&&!(t=>{let{dataTransfer:i}=t;return i.types.includes("Files")&&i.types.includes("text/html")&&i.getData("text/html").includes("urn:schemas-microsoft-com:office:office")})(n)},Rp=function(n){let e=n.clipboardData;if(e)return Array.from(e.types).filter(t=>t.match(/file/i)).length===e.types.length&&e.files.length>=1},dA=function(n){let e=n.clipboardData;if(e)return e.types.includes("text/plain")&&e.types.length===1},uA=function(n){let e=[];return n.altKey&&e.push("alt"),n.shiftKey&&e.push("shift"),e.push(n.key),e},Hc=n=>({x:n.clientX,y:n.clientY}),nd="[data-trix-attribute]",sd="[data-trix-action]",hA="".concat(nd,", ").concat(sd),Vo="[data-trix-dialog]",fA="".concat(Vo,"[data-trix-active]"),pA="".concat(Vo," [data-trix-method]"),ap="".concat(Vo," [data-trix-input]"),lp=(n,e)=>(e||(e=yn(n)),n.querySelector("[data-trix-input][name='".concat(e,"']"))),cp=n=>n.getAttribute("data-trix-action"),yn=n=>n.getAttribute("data-trix-attribute")||n.getAttribute("data-trix-dialog-attribute"),$o=class extends Ee{constructor(e){super(e),this.didClickActionButton=this.didClickActionButton.bind(this),this.didClickAttributeButton=this.didClickAttributeButton.bind(this),this.didClickDialogButton=this.didClickDialogButton.bind(this),this.didKeyDownDialogInput=this.didKeyDownDialogInput.bind(this),this.element=e,this.attributes={},this.actions={},this.resetDialogInputs(),ve("mousedown",{onElement:this.element,matchingSelector:sd,withCallback:this.didClickActionButton}),ve("mousedown",{onElement:this.element,matchingSelector:nd,withCallback:this.didClickAttributeButton}),ve("click",{onElement:this.element,matchingSelector:hA,preventDefault:!0}),ve("click",{onElement:this.element,matchingSelector:pA,withCallback:this.didClickDialogButton}),ve("keydown",{onElement:this.element,matchingSelector:ap,withCallback:this.didKeyDownDialogInput})}didClickActionButton(e,t){var i;(i=this.delegate)===null||i===void 0||i.toolbarDidClickButton(),e.preventDefault();let s=cp(t);return this.getDialog(s)?this.toggleDialog(s):(r=this.delegate)===null||r===void 0?void 0:r.toolbarDidInvokeAction(s,t);var r}didClickAttributeButton(e,t){var i;(i=this.delegate)===null||i===void 0||i.toolbarDidClickButton(),e.preventDefault();let s=yn(t);var r;return this.getDialog(s)?this.toggleDialog(s):(r=this.delegate)===null||r===void 0||r.toolbarDidToggleAttribute(s),this.refreshAttributeButtons()}didClickDialogButton(e,t){let i=ni(t,{matchingSelector:Vo});return this[t.getAttribute("data-trix-method")].call(this,i)}didKeyDownDialogInput(e,t){if(e.keyCode===13){e.preventDefault();let i=t.getAttribute("name"),s=this.getDialog(i);this.setAttribute(s)}if(e.keyCode===27)return e.preventDefault(),this.hideDialog()}updateActions(e){return this.actions=e,this.refreshActionButtons()}refreshActionButtons(){return this.eachActionButton((e,t)=>{e.disabled=this.actions[t]===!1})}eachActionButton(e){return Array.from(this.element.querySelectorAll(sd)).map(t=>e(t,cp(t)))}updateAttributes(e){return this.attributes=e,this.refreshAttributeButtons()}refreshAttributeButtons(){return this.eachAttributeButton((e,t)=>(e.disabled=this.attributes[t]===!1,this.attributes[t]||this.dialogIsVisible(t)?(e.setAttribute("data-trix-active",""),e.classList.add("trix-active")):(e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"))))}eachAttributeButton(e){return Array.from(this.element.querySelectorAll(nd)).map(t=>e(t,yn(t)))}applyKeyboardCommand(e){let t=JSON.stringify(e.sort());for(let i of Array.from(this.element.querySelectorAll("[data-trix-key]"))){let s=i.getAttribute("data-trix-key").split("+");if(JSON.stringify(s.sort())===t)return Es("mousedown",{onElement:i}),!0}return!1}dialogIsVisible(e){let t=this.getDialog(e);if(t)return t.hasAttribute("data-trix-active")}toggleDialog(e){return this.dialogIsVisible(e)?this.hideDialog():this.showDialog(e)}showDialog(e){var t,i;this.hideDialog(),(t=this.delegate)===null||t===void 0||t.toolbarWillShowDialog();let s=this.getDialog(e);s.setAttribute("data-trix-active",""),s.classList.add("trix-active"),Array.from(s.querySelectorAll("input[disabled]")).forEach(o=>{o.removeAttribute("disabled")});let r=yn(s);if(r){let o=lp(s,e);o&&(o.value=this.attributes[r]||"",o.select())}return(i=this.delegate)===null||i===void 0?void 0:i.toolbarDidShowDialog(e)}setAttribute(e){let t=yn(e),i=lp(e,t);return i.willValidate&&!i.checkValidity()?(i.setAttribute("data-trix-validate",""),i.classList.add("trix-validate"),i.focus()):((s=this.delegate)===null||s===void 0||s.toolbarDidUpdateAttribute(t,i.value),this.hideDialog());var s}removeAttribute(e){var t;let i=yn(e);return(t=this.delegate)===null||t===void 0||t.toolbarDidRemoveAttribute(i),this.hideDialog()}hideDialog(){let e=this.element.querySelector(fA);var t;if(e)return e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"),this.resetDialogInputs(),(t=this.delegate)===null||t===void 0?void 0:t.toolbarDidHideDialog((i=>i.getAttribute("data-trix-dialog"))(e))}resetDialogInputs(){Array.from(this.element.querySelectorAll(ap)).forEach(e=>{e.setAttribute("disabled","disabled"),e.removeAttribute("data-trix-validate"),e.classList.remove("trix-validate")})}getDialog(e){return this.element.querySelector("[data-trix-dialog=".concat(e,"]"))}},ki=class extends No{constructor(e){let{editorElement:t,document:i,html:s}=e;super(...arguments),this.editorElement=t,this.selectionManager=new Nt(this.editorElement),this.selectionManager.delegate=this,this.composition=new xt,this.composition.delegate=this,this.attachmentManager=new Mo(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=dd.getLevel()===2?new Ri(this.editorElement):new mt(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new Io(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new $o(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new _o(this.composition,this.selectionManager,this.editorElement),i?this.editor.loadDocument(i):this.editor.loadHTML(s)}registerSelectionManager(){return Fi.registerSelectionManager(this.selectionManager)}unregisterSelectionManager(){return Fi.unregisterSelectionManager(this.selectionManager)}render(){return this.compositionController.render()}reparse(){return this.composition.replaceHTML(this.editorElement.innerHTML)}compositionDidChangeDocument(e){if(this.notifyEditorElement("document-change"),!this.handlingInput)return this.render()}compositionDidChangeCurrentAttributes(e){return this.currentAttributes=e,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})}compositionDidPerformInsertionAtRange(e){this.pasting&&(this.pastedRange=e)}compositionShouldAcceptFile(e){return this.notifyEditorElement("file-accept",{file:e})}compositionDidAddAttachment(e){let t=this.attachmentManager.manageAttachment(e);return this.notifyEditorElement("attachment-add",{attachment:t})}compositionDidEditAttachment(e){this.compositionController.rerenderViewForObject(e);let t=this.attachmentManager.manageAttachment(e);return this.notifyEditorElement("attachment-edit",{attachment:t}),this.notifyEditorElement("change")}compositionDidChangeAttachmentPreviewURL(e){return this.compositionController.invalidateViewForObject(e),this.notifyEditorElement("change")}compositionDidRemoveAttachment(e){let t=this.attachmentManager.unmanageAttachment(e);return this.notifyEditorElement("attachment-remove",{attachment:t})}compositionDidStartEditingAttachment(e,t){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(e),this.compositionController.installAttachmentEditorForAttachment(e,t),this.selectionManager.setLocationRange(this.attachmentLocationRange)}compositionDidStopEditingAttachment(e){this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null}compositionDidRequestChangingSelectionToLocationRange(e){if(!this.loadingSnapshot||this.isFocused())return this.requestedLocationRange=e,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()}compositionWillLoadSnapshot(){this.loadingSnapshot=!0}compositionDidLoadSnapshot(){this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1}getSelectionManager(){return this.selectionManager}attachmentManagerDidRequestRemovalOfAttachment(e){return this.removeAttachment(e)}compositionControllerWillSyncDocumentView(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()}compositionControllerDidSyncDocumentView(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")}compositionControllerDidRender(){this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision}compositionControllerDidFocus(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")}compositionControllerDidBlur(){return this.notifyEditorElement("blur")}compositionControllerDidSelectAttachment(e,t){return this.toolbarController.hideDialog(),this.composition.editAttachment(e,t)}compositionControllerDidRequestDeselectingAttachment(e){let t=this.attachmentLocationRange||this.composition.document.getLocationRangeOfAttachment(e);return this.selectionManager.setLocationRange(t[1])}compositionControllerWillUpdateAttachment(e){return this.editor.recordUndoEntry("Edit Attachment",{context:e.id,consolidatable:!0})}compositionControllerDidRequestRemovalOfAttachment(e){return this.removeAttachment(e)}inputControllerWillHandleInput(){this.handlingInput=!0,this.requestedRender=!1}inputControllerDidRequestRender(){this.requestedRender=!0}inputControllerDidHandleInput(){if(this.handlingInput=!1,this.requestedRender)return this.requestedRender=!1,this.render()}inputControllerDidAllowUnhandledInput(){return this.notifyEditorElement("change")}inputControllerDidRequestReparse(){return this.reparse()}inputControllerWillPerformTyping(){return this.recordTypingUndoEntry()}inputControllerWillPerformFormatting(e){return this.recordFormattingUndoEntry(e)}inputControllerWillCutText(){return this.editor.recordUndoEntry("Cut")}inputControllerWillPaste(e){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:e})}inputControllerDidPaste(e){return e.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:e})}inputControllerWillMoveText(){return this.editor.recordUndoEntry("Move")}inputControllerWillAttachFiles(){return this.editor.recordUndoEntry("Drop Files")}inputControllerWillPerformUndo(){return this.editor.undo()}inputControllerWillPerformRedo(){return this.editor.redo()}inputControllerDidReceiveKeyboardCommand(e){return this.toolbarController.applyKeyboardCommand(e)}inputControllerDidStartDrag(){this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()}inputControllerDidReceiveDragOverPoint(e){return this.selectionManager.setLocationRangeFromPointRange(e)}inputControllerDidCancelDrag(){this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null}locationRangeDidChange(e){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!wo(this.attachmentLocationRange,e)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")}toolbarDidClickButton(){if(!this.getLocationRange())return this.setLocationRange({index:0,offset:0})}toolbarDidInvokeAction(e,t){return this.invokeAction(e,t)}toolbarDidToggleAttribute(e){if(this.recordFormattingUndoEntry(e),this.composition.toggleCurrentAttribute(e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidUpdateAttribute(e,t){if(this.recordFormattingUndoEntry(e),this.composition.setCurrentAttribute(e,t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidRemoveAttribute(e){if(this.recordFormattingUndoEntry(e),this.composition.removeCurrentAttribute(e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarWillShowDialog(e){return this.composition.expandSelectionForEditing(),this.freezeSelection()}toolbarDidShowDialog(e){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:e})}toolbarDidHideDialog(e){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:e})}freezeSelection(){if(!this.selectionFrozen)return this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render()}thawSelection(){if(this.selectionFrozen)return this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()}canInvokeAction(e){return!!this.actionIsExternal(e)||!((t=this.actions[e])===null||t===void 0||(t=t.test)===null||t===void 0||!t.call(this));var t}invokeAction(e,t){return this.actionIsExternal(e)?this.notifyEditorElement("action-invoke",{actionName:e,invokingElement:t}):(i=this.actions[e])===null||i===void 0||(i=i.perform)===null||i===void 0?void 0:i.call(this);var i}actionIsExternal(e){return/^x-./.test(e)}getCurrentActions(){let e={};for(let t in this.actions)e[t]=this.canInvokeAction(t);return e}updateCurrentActions(){let e=this.getCurrentActions();if(!Pn(e,this.currentActions))return this.currentActions=e,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions})}runEditorFilters(){let e=this.composition.getSnapshot();if(Array.from(this.editor.filters).forEach(s=>{let{document:r,selectedRange:o}=e;e=s.call(this.editor,e)||{},e.document||(e.document=r),e.selectedRange||(e.selectedRange=o)}),t=e,i=this.composition.getSnapshot(),!wo(t.selectedRange,i.selectedRange)||!t.document.isEqualTo(i.document))return this.composition.loadSnapshot(e);var t,i}updateInputElement(){let e=function(t,i){let s=WS[i];if(s)return s(t);throw new Error("unknown content type: ".concat(i))}(this.compositionController.getSerializableElement(),"text/html");return this.editorElement.setFormValue(e)}notifyEditorElement(e,t){switch(e){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(e,t)}removeAttachment(e){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(e),this.render()}recordFormattingUndoEntry(e){let t=we(e),i=this.selectionManager.getLocationRange();if(t||!Ft(i))return this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})}recordTypingUndoEntry(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})}getUndoContext(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return[this.getLocationContext(),this.getTimeContext(),...Array.from(t)]}getLocationContext(){let e=this.selectionManager.getLocationRange();return Ft(e)?e[0].index:e}getTimeContext(){return qc.interval>0?Math.floor(new Date().getTime()/qc.interval):0}isFocused(){var e;return this.editorElement===((e=this.editorElement.ownerDocument)===null||e===void 0?void 0:e.activeElement)}isFocusedInvisibly(){return this.isFocused()&&!this.getLocationRange()}get actions(){return this.constructor.actions}};Ye(ki,"actions",{undo:{test(){return this.editor.canUndo()},perform(){return this.editor.undo()}},redo:{test(){return this.editor.canRedo()},perform(){return this.editor.redo()}},link:{test(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test(){return this.editor.canIncreaseNestingLevel()},perform(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test(){return this.editor.canDecreaseNestingLevel()},perform(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:()=>!0,perform(){return dd.pickFiles(this.editor.insertFiles)}}}),ki.proxyMethod("getSelectionManager().setLocationRange"),ki.proxyMethod("getSelectionManager().getLocationRange");var mA=Object.freeze({__proto__:null,AttachmentEditorController:Do,CompositionController:Io,Controller:No,EditorController:ki,InputController:Mn,Level0InputController:mt,Level2InputController:Ri,ToolbarController:$o}),gA=Object.freeze({__proto__:null,MutationObserver:Fo,SelectionChangeObserver:So}),vA=Object.freeze({__proto__:null,FileVerificationOperation:Bo,ImagePreloadOperation:Lo});vp("trix-toolbar",`%t {
  display: block;
}

%t {
  white-space: nowrap;
}

%t [data-trix-dialog] {
  display: none;
}

%t [data-trix-dialog][data-trix-active] {
  display: block;
}

%t [data-trix-dialog] [data-trix-validate]:invalid {
  background-color: #ffdddd;
}`);var zo=class extends HTMLElement{connectedCallback(){this.innerHTML===""&&(this.innerHTML=gp.getDefaultHTML())}},bA=0,yA=function(n){if(!n.hasAttribute("contenteditable"))return n.setAttribute("contenteditable",""),function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.times=1,ve(e,t)}("focus",{onElement:n,withCallback:()=>EA(n)})},EA=function(n){return wA(n),SA(n)},wA=function(n){var e,t;if((e=(t=document).queryCommandSupported)!==null&&e!==void 0&&e.call(t,"enableObjectResizing"))return document.execCommand("enableObjectResizing",!1,!1),ve("mscontrolselect",{onElement:n,preventDefault:!0})},SA=function(n){var e,t;if((e=(t=document).queryCommandSupported)!==null&&e!==void 0&&e.call(t,"DefaultParagraphSeparator")){let{tagName:i}=$e.default;if(["div","p"].includes(i))return document.execCommand("DefaultParagraphSeparator",!1,i)}},dp=Os.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"};vp("trix-editor",`%t {
    display: block;
}

%t:empty::before {
    content: attr(placeholder);
    color: graytext;
    cursor: text;
    pointer-events: none;
    white-space: pre-line;
}

%t a[contenteditable=false] {
    cursor: text;
}

%t img {
    max-width: 100%;
    height: auto;
}

%t `.concat(Oi,` figcaption textarea {
    resize: none;
}

%t `).concat(Oi,` figcaption textarea.trix-autoresize-clone {
    position: absolute;
    left: -9999px;
    max-height: 0px;
}

%t `).concat(Oi,` figcaption[data-trix-placeholder]:empty::before {
    content: attr(data-trix-placeholder);
    color: graytext;
}

%t [data-trix-cursor-target] {
    display: `).concat(dp.display,` !important;
    width: `).concat(dp.width,` !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

%t [data-trix-cursor-target=left] {
    vertical-align: top !important;
    margin-left: -1px !important;
}

%t [data-trix-cursor-target=right] {
    vertical-align: bottom !important;
    margin-right: -1px !important;
}`));var It=new WeakMap,bs=new WeakSet,rd=class{constructor(e){var t,i;Tp(t=this,i=bs),i.add(t),Ts(this,It,{writable:!0,value:void 0}),this.element=e,md(this,It,e.attachInternals())}connectedCallback(){go(this,bs,vo).call(this)}disconnectedCallback(){}get labels(){return fe(this,It).labels}get disabled(){var e;return(e=this.element.inputElement)===null||e===void 0?void 0:e.disabled}set disabled(e){this.element.toggleAttribute("disabled",e)}get required(){return this.element.hasAttribute("required")}set required(e){this.element.toggleAttribute("required",e),go(this,bs,vo).call(this)}get validity(){return fe(this,It).validity}get validationMessage(){return fe(this,It).validationMessage}get willValidate(){return fe(this,It).willValidate}setFormValue(e){go(this,bs,vo).call(this)}checkValidity(){return fe(this,It).checkValidity()}reportValidity(){return fe(this,It).reportValidity()}setCustomValidity(e){go(this,bs,vo).call(this,e)}};function vo(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",{required:e,value:t}=this.element,i=e&&!t,s=!!n,r=se("input",{required:e}),o=n||r.validationMessage;fe(this,It).setValidity({valueMissing:i,customError:s},o)}var Vc=new WeakMap,jc=new WeakMap,Wc=new WeakMap,od=class{constructor(e){Ts(this,Vc,{writable:!0,value:void 0}),Ts(this,jc,{writable:!0,value:t=>{t.defaultPrevented||t.target===this.element.form&&this.element.reset()}}),Ts(this,Wc,{writable:!0,value:t=>{if(t.defaultPrevented||this.element.contains(t.target))return;let i=ni(t.target,{matchingSelector:"label"});i&&Array.from(this.labels).includes(i)&&this.element.focus()}}),this.element=e}connectedCallback(){md(this,Vc,function(e){if(e.hasAttribute("aria-label")||e.hasAttribute("aria-labelledby"))return;let t=function(){let i=Array.from(e.labels).map(r=>{if(!r.contains(e))return r.textContent}).filter(r=>r),s=i.join(" ");return s?e.setAttribute("aria-label",s):e.removeAttribute("aria-label")};return t(),ve("focus",{onElement:e,withCallback:t})}(this.element)),window.addEventListener("reset",fe(this,jc),!1),window.addEventListener("click",fe(this,Wc),!1)}disconnectedCallback(){var e;(e=fe(this,Vc))===null||e===void 0||e.destroy(),window.removeEventListener("reset",fe(this,jc),!1),window.removeEventListener("click",fe(this,Wc),!1)}get labels(){let e=[];this.element.id&&this.element.ownerDocument&&e.push(...Array.from(this.element.ownerDocument.querySelectorAll("label[for='".concat(this.element.id,"']"))||[]));let t=ni(this.element,{matchingSelector:"label"});return t&&[this.element,null].includes(t.control)&&e.push(t),e}get disabled(){return console.warn("This browser does not support the [disabled] attribute for trix-editor elements."),!1}set disabled(e){console.warn("This browser does not support the [disabled] attribute for trix-editor elements.")}get required(){return console.warn("This browser does not support the [required] attribute for trix-editor elements."),!1}set required(e){console.warn("This browser does not support the [required] attribute for trix-editor elements.")}get validity(){return console.warn("This browser does not support the validity property for trix-editor elements."),null}get validationMessage(){return console.warn("This browser does not support the validationMessage property for trix-editor elements."),""}get willValidate(){return console.warn("This browser does not support the willValidate property for trix-editor elements."),!1}setFormValue(e){}checkValidity(){return console.warn("This browser does not support checkValidity() for trix-editor elements."),!0}reportValidity(){return console.warn("This browser does not support reportValidity() for trix-editor elements."),!0}setCustomValidity(e){console.warn("This browser does not support setCustomValidity(validationMessage) for trix-editor elements.")}},Ne=new WeakMap,Ps=class extends HTMLElement{constructor(){super(),Ts(this,Ne,{writable:!0,value:void 0}),md(this,Ne,this.constructor.formAssociated?new rd(this):new od(this))}get trixId(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++bA),this.trixId)}get labels(){return fe(this,Ne).labels}get disabled(){return fe(this,Ne).disabled}set disabled(e){fe(this,Ne).disabled=e}get required(){return fe(this,Ne).required}set required(e){fe(this,Ne).required=e}get validity(){return fe(this,Ne).validity}get validationMessage(){return fe(this,Ne).validationMessage}get willValidate(){return fe(this,Ne).willValidate}get type(){return this.localName}get toolbarElement(){var e;if(this.hasAttribute("toolbar"))return(e=this.ownerDocument)===null||e===void 0?void 0:e.getElementById(this.getAttribute("toolbar"));if(this.parentNode){let t="trix-toolbar-".concat(this.trixId);this.setAttribute("toolbar",t);let i=se("trix-toolbar",{id:t});return this.parentNode.insertBefore(i,this),i}}get form(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.form}get inputElement(){var e;if(this.hasAttribute("input"))return(e=this.ownerDocument)===null||e===void 0?void 0:e.getElementById(this.getAttribute("input"));if(this.parentNode){let t="trix-input-".concat(this.trixId);this.setAttribute("input",t);let i=se("input",{type:"hidden",id:t});return this.parentNode.insertBefore(i,this.nextElementSibling),i}}get editor(){var e;return(e=this.editorController)===null||e===void 0?void 0:e.editor}get name(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.name}get value(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.value}set value(e){var t;this.defaultValue=e,(t=this.editor)===null||t===void 0||t.loadHTML(this.defaultValue)}notify(e,t){if(this.editorController)return Es("trix-".concat(e),{onElement:this,attributes:t})}setFormValue(e){this.inputElement&&(this.inputElement.value=e,fe(this,Ne).setFormValue(e))}connectedCallback(){this.hasAttribute("data-trix-internal")||(yA(this),function(e){e.hasAttribute("role")||e.setAttribute("role","textbox")}(this),this.editorController||(Es("trix-before-initialize",{onElement:this}),this.editorController=new ki({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame(()=>Es("trix-initialize",{onElement:this}))),this.editorController.registerSelectionManager(),fe(this,Ne).connectedCallback(),function(e){!document.querySelector(":focus")&&e.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===e&&e.focus()}(this))}disconnectedCallback(){var e;(e=this.editorController)===null||e===void 0||e.unregisterSelectionManager(),fe(this,Ne).disconnectedCallback()}checkValidity(){return fe(this,Ne).checkValidity()}reportValidity(){return fe(this,Ne).reportValidity()}setCustomValidity(e){fe(this,Ne).setCustomValidity(e)}formDisabledCallback(e){this.inputElement&&(this.inputElement.disabled=e),this.toggleAttribute("contenteditable",!e)}formResetCallback(){this.reset()}reset(){this.value=this.defaultValue}};Ye(Ps,"formAssociated","ElementInternals"in window);var up={VERSION:Zw,config:_s,core:qS,models:Pp,views:KS,controllers:mA,observers:gA,operations:vA,elements:Object.freeze({__proto__:null,TrixEditorElement:Ps,TrixToolbarElement:zo}),filters:Object.freeze({__proto__:null,Filter:Oo,attachmentGalleryFilter:Lp})};Object.assign(up,Pp),window.Trix=up,setTimeout(function(){customElements.get("trix-toolbar")||customElements.define("trix-toolbar",zo),customElements.get("trix-editor")||customElements.define("trix-editor",Ps)},0);(function(n){typeof define=="function"&&define.amd?define(n):n()})(function(){"use strict";var n={exports:{}};(function(z,_){(function(b){z.exports=b()})(function(b){var C=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function x(B,k){var T=B[0],S=B[1],M=B[2],L=B[3];T+=(S&M|~S&L)+k[0]-680876936|0,T=(T<<7|T>>>25)+S|0,L+=(T&S|~T&M)+k[1]-389564586|0,L=(L<<12|L>>>20)+T|0,M+=(L&T|~L&S)+k[2]+606105819|0,M=(M<<17|M>>>15)+L|0,S+=(M&L|~M&T)+k[3]-1044525330|0,S=(S<<22|S>>>10)+M|0,T+=(S&M|~S&L)+k[4]-176418897|0,T=(T<<7|T>>>25)+S|0,L+=(T&S|~T&M)+k[5]+1200080426|0,L=(L<<12|L>>>20)+T|0,M+=(L&T|~L&S)+k[6]-1473231341|0,M=(M<<17|M>>>15)+L|0,S+=(M&L|~M&T)+k[7]-45705983|0,S=(S<<22|S>>>10)+M|0,T+=(S&M|~S&L)+k[8]+1770035416|0,T=(T<<7|T>>>25)+S|0,L+=(T&S|~T&M)+k[9]-1958414417|0,L=(L<<12|L>>>20)+T|0,M+=(L&T|~L&S)+k[10]-42063|0,M=(M<<17|M>>>15)+L|0,S+=(M&L|~M&T)+k[11]-1990404162|0,S=(S<<22|S>>>10)+M|0,T+=(S&M|~S&L)+k[12]+1804603682|0,T=(T<<7|T>>>25)+S|0,L+=(T&S|~T&M)+k[13]-40341101|0,L=(L<<12|L>>>20)+T|0,M+=(L&T|~L&S)+k[14]-1502002290|0,M=(M<<17|M>>>15)+L|0,S+=(M&L|~M&T)+k[15]+1236535329|0,S=(S<<22|S>>>10)+M|0,T+=(S&L|M&~L)+k[1]-165796510|0,T=(T<<5|T>>>27)+S|0,L+=(T&M|S&~M)+k[6]-1069501632|0,L=(L<<9|L>>>23)+T|0,M+=(L&S|T&~S)+k[11]+643717713|0,M=(M<<14|M>>>18)+L|0,S+=(M&T|L&~T)+k[0]-373897302|0,S=(S<<20|S>>>12)+M|0,T+=(S&L|M&~L)+k[5]-701558691|0,T=(T<<5|T>>>27)+S|0,L+=(T&M|S&~M)+k[10]+38016083|0,L=(L<<9|L>>>23)+T|0,M+=(L&S|T&~S)+k[15]-660478335|0,M=(M<<14|M>>>18)+L|0,S+=(M&T|L&~T)+k[4]-405537848|0,S=(S<<20|S>>>12)+M|0,T+=(S&L|M&~L)+k[9]+568446438|0,T=(T<<5|T>>>27)+S|0,L+=(T&M|S&~M)+k[14]-1019803690|0,L=(L<<9|L>>>23)+T|0,M+=(L&S|T&~S)+k[3]-187363961|0,M=(M<<14|M>>>18)+L|0,S+=(M&T|L&~T)+k[8]+1163531501|0,S=(S<<20|S>>>12)+M|0,T+=(S&L|M&~L)+k[13]-1444681467|0,T=(T<<5|T>>>27)+S|0,L+=(T&M|S&~M)+k[2]-51403784|0,L=(L<<9|L>>>23)+T|0,M+=(L&S|T&~S)+k[7]+1735328473|0,M=(M<<14|M>>>18)+L|0,S+=(M&T|L&~T)+k[12]-1926607734|0,S=(S<<20|S>>>12)+M|0,T+=(S^M^L)+k[5]-378558|0,T=(T<<4|T>>>28)+S|0,L+=(T^S^M)+k[8]-2022574463|0,L=(L<<11|L>>>21)+T|0,M+=(L^T^S)+k[11]+1839030562|0,M=(M<<16|M>>>16)+L|0,S+=(M^L^T)+k[14]-35309556|0,S=(S<<23|S>>>9)+M|0,T+=(S^M^L)+k[1]-1530992060|0,T=(T<<4|T>>>28)+S|0,L+=(T^S^M)+k[4]+1272893353|0,L=(L<<11|L>>>21)+T|0,M+=(L^T^S)+k[7]-155497632|0,M=(M<<16|M>>>16)+L|0,S+=(M^L^T)+k[10]-1094730640|0,S=(S<<23|S>>>9)+M|0,T+=(S^M^L)+k[13]+681279174|0,T=(T<<4|T>>>28)+S|0,L+=(T^S^M)+k[0]-358537222|0,L=(L<<11|L>>>21)+T|0,M+=(L^T^S)+k[3]-722521979|0,M=(M<<16|M>>>16)+L|0,S+=(M^L^T)+k[6]+76029189|0,S=(S<<23|S>>>9)+M|0,T+=(S^M^L)+k[9]-640364487|0,T=(T<<4|T>>>28)+S|0,L+=(T^S^M)+k[12]-421815835|0,L=(L<<11|L>>>21)+T|0,M+=(L^T^S)+k[15]+530742520|0,M=(M<<16|M>>>16)+L|0,S+=(M^L^T)+k[2]-995338651|0,S=(S<<23|S>>>9)+M|0,T+=(M^(S|~L))+k[0]-198630844|0,T=(T<<6|T>>>26)+S|0,L+=(S^(T|~M))+k[7]+1126891415|0,L=(L<<10|L>>>22)+T|0,M+=(T^(L|~S))+k[14]-1416354905|0,M=(M<<15|M>>>17)+L|0,S+=(L^(M|~T))+k[5]-57434055|0,S=(S<<21|S>>>11)+M|0,T+=(M^(S|~L))+k[12]+1700485571|0,T=(T<<6|T>>>26)+S|0,L+=(S^(T|~M))+k[3]-1894986606|0,L=(L<<10|L>>>22)+T|0,M+=(T^(L|~S))+k[10]-1051523|0,M=(M<<15|M>>>17)+L|0,S+=(L^(M|~T))+k[1]-2054922799|0,S=(S<<21|S>>>11)+M|0,T+=(M^(S|~L))+k[8]+1873313359|0,T=(T<<6|T>>>26)+S|0,L+=(S^(T|~M))+k[15]-30611744|0,L=(L<<10|L>>>22)+T|0,M+=(T^(L|~S))+k[6]-1560198380|0,M=(M<<15|M>>>17)+L|0,S+=(L^(M|~T))+k[13]+1309151649|0,S=(S<<21|S>>>11)+M|0,T+=(M^(S|~L))+k[4]-145523070|0,T=(T<<6|T>>>26)+S|0,L+=(S^(T|~M))+k[11]-1120210379|0,L=(L<<10|L>>>22)+T|0,M+=(T^(L|~S))+k[2]+718787259|0,M=(M<<15|M>>>17)+L|0,S+=(L^(M|~T))+k[9]-343485551|0,S=(S<<21|S>>>11)+M|0,B[0]=T+B[0]|0,B[1]=S+B[1]|0,B[2]=M+B[2]|0,B[3]=L+B[3]|0}function F(B){var k=[],T;for(T=0;T<64;T+=4)k[T>>2]=B.charCodeAt(T)+(B.charCodeAt(T+1)<<8)+(B.charCodeAt(T+2)<<16)+(B.charCodeAt(T+3)<<24);return k}function $(B){var k=[],T;for(T=0;T<64;T+=4)k[T>>2]=B[T]+(B[T+1]<<8)+(B[T+2]<<16)+(B[T+3]<<24);return k}function U(B){var k=B.length,T=[1732584193,-271733879,-1732584194,271733878],S,M,L,be,Z,Fe;for(S=64;S<=k;S+=64)x(T,F(B.substring(S-64,S)));for(B=B.substring(S-64),M=B.length,L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=0;S<M;S+=1)L[S>>2]|=B.charCodeAt(S)<<(S%4<<3);if(L[S>>2]|=128<<(S%4<<3),S>55)for(x(T,L),S=0;S<16;S+=1)L[S]=0;return be=k*8,be=be.toString(16).match(/(.*?)(.{0,8})$/),Z=parseInt(be[2],16),Fe=parseInt(be[1],16)||0,L[14]=Z,L[15]=Fe,x(T,L),T}function te(B){var k=B.length,T=[1732584193,-271733879,-1732584194,271733878],S,M,L,be,Z,Fe;for(S=64;S<=k;S+=64)x(T,$(B.subarray(S-64,S)));for(B=S-64<k?B.subarray(S-64):new Uint8Array(0),M=B.length,L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S=0;S<M;S+=1)L[S>>2]|=B[S]<<(S%4<<3);if(L[S>>2]|=128<<(S%4<<3),S>55)for(x(T,L),S=0;S<16;S+=1)L[S]=0;return be=k*8,be=be.toString(16).match(/(.*?)(.{0,8})$/),Z=parseInt(be[2],16),Fe=parseInt(be[1],16)||0,L[14]=Z,L[15]=Fe,x(T,L),T}function de(B){var k="",T;for(T=0;T<4;T+=1)k+=C[B>>T*8+4&15]+C[B>>T*8&15];return k}function pe(B){var k;for(k=0;k<B.length;k+=1)B[k]=de(B[k]);return B.join("")}pe(U("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function B(k,T){return k=k|0||0,k<0?Math.max(k+T,0):Math.min(k,T)}ArrayBuffer.prototype.slice=function(k,T){var S=this.byteLength,M=B(k,S),L=S,be,Z,Fe,Qe;return T!==b&&(L=B(T,S)),M>L?new ArrayBuffer(0):(be=L-M,Z=new ArrayBuffer(be),Fe=new Uint8Array(Z),Qe=new Uint8Array(this,M,be),Fe.set(Qe),Z)}}();function _e(B){return/[\u0080-\uFFFF]/.test(B)&&(B=unescape(encodeURIComponent(B))),B}function ae(B,k){var T=B.length,S=new ArrayBuffer(T),M=new Uint8Array(S),L;for(L=0;L<T;L+=1)M[L]=B.charCodeAt(L);return k?M:S}function xe(B){return String.fromCharCode.apply(null,new Uint8Array(B))}function Ce(B,k,T){var S=new Uint8Array(B.byteLength+k.byteLength);return S.set(new Uint8Array(B)),S.set(new Uint8Array(k),B.byteLength),T?S:S.buffer}function N(B){var k=[],T=B.length,S;for(S=0;S<T-1;S+=2)k.push(parseInt(B.substr(S,2),16));return String.fromCharCode.apply(String,k)}function oe(){this.reset()}return oe.prototype.append=function(B){return this.appendBinary(_e(B)),this},oe.prototype.appendBinary=function(B){this._buff+=B,this._length+=B.length;var k=this._buff.length,T;for(T=64;T<=k;T+=64)x(this._hash,F(this._buff.substring(T-64,T)));return this._buff=this._buff.substring(T-64),this},oe.prototype.end=function(B){var k=this._buff,T=k.length,S,M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],L;for(S=0;S<T;S+=1)M[S>>2]|=k.charCodeAt(S)<<(S%4<<3);return this._finish(M,T),L=pe(this._hash),B&&(L=N(L)),this.reset(),L},oe.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},oe.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},oe.prototype.setState=function(B){return this._buff=B.buff,this._length=B.length,this._hash=B.hash,this},oe.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},oe.prototype._finish=function(B,k){var T=k,S,M,L;if(B[T>>2]|=128<<(T%4<<3),T>55)for(x(this._hash,B),T=0;T<16;T+=1)B[T]=0;S=this._length*8,S=S.toString(16).match(/(.*?)(.{0,8})$/),M=parseInt(S[2],16),L=parseInt(S[1],16)||0,B[14]=M,B[15]=L,x(this._hash,B)},oe.hash=function(B,k){return oe.hashBinary(_e(B),k)},oe.hashBinary=function(B,k){var T=U(B),S=pe(T);return k?N(S):S},oe.ArrayBuffer=function(){this.reset()},oe.ArrayBuffer.prototype.append=function(B){var k=Ce(this._buff.buffer,B,!0),T=k.length,S;for(this._length+=B.byteLength,S=64;S<=T;S+=64)x(this._hash,$(k.subarray(S-64,S)));return this._buff=S-64<T?new Uint8Array(k.buffer.slice(S-64)):new Uint8Array(0),this},oe.ArrayBuffer.prototype.end=function(B){var k=this._buff,T=k.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M,L;for(M=0;M<T;M+=1)S[M>>2]|=k[M]<<(M%4<<3);return this._finish(S,T),L=pe(this._hash),B&&(L=N(L)),this.reset(),L},oe.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},oe.ArrayBuffer.prototype.getState=function(){var B=oe.prototype.getState.call(this);return B.buff=xe(B.buff),B},oe.ArrayBuffer.prototype.setState=function(B){return B.buff=ae(B.buff,!0),oe.prototype.setState.call(this,B)},oe.ArrayBuffer.prototype.destroy=oe.prototype.destroy,oe.ArrayBuffer.prototype._finish=oe.prototype._finish,oe.ArrayBuffer.hash=function(B,k){var T=te(new Uint8Array(B)),S=pe(T);return k?N(S):S},oe})})(n);var e=n.exports;let t=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice;class i{static create(_,b){new i(_).create(b)}constructor(_){this.file=_,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}create(_){this.callback=_,this.md5Buffer=new e.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",b=>this.fileReaderDidLoad(b)),this.fileReader.addEventListener("error",b=>this.fileReaderDidError(b)),this.readNextChunk()}fileReaderDidLoad(_){if(this.md5Buffer.append(_.target.result),!this.readNextChunk()){let b=this.md5Buffer.end(!0),C=btoa(b);this.callback(null,C)}}fileReaderDidError(_){this.callback(`Error reading ${this.file.name}`)}readNextChunk(){if(this.chunkIndex<this.chunkCount||this.chunkIndex==0&&this.chunkCount==0){let _=this.chunkIndex*this.chunkSize,b=Math.min(_+this.chunkSize,this.file.size),C=t.call(this.file,_,b);return this.fileReader.readAsArrayBuffer(C),this.chunkIndex++,!0}else return!1}}function s(z){let _=o(document.head,`meta[name="${z}"]`);if(_)return _.getAttribute("content")}function r(z,_){typeof z=="string"&&(_=z,z=document);let b=z.querySelectorAll(_);return l(b)}function o(z,_){return typeof z=="string"&&(_=z,z=document),z.querySelector(_)}function a(z,_,b={}){let{disabled:C}=z,{bubbles:x,cancelable:F,detail:$}=b,U=document.createEvent("Event");U.initEvent(_,x||!0,F||!0),U.detail=$||{};try{z.disabled=!1,z.dispatchEvent(U)}finally{z.disabled=C}return U}function l(z){return Array.isArray(z)?z:Array.from?Array.from(z):[].slice.call(z)}class d{constructor(_,b,C,x={}){this.file=_,this.attributes={filename:_.name,content_type:_.type||"application/octet-stream",byte_size:_.size,checksum:b},this.xhr=new XMLHttpRequest,this.xhr.open("POST",C,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(x).forEach($=>{this.xhr.setRequestHeader($,x[$])});let F=s("csrf-token");F!=null&&this.xhr.setRequestHeader("X-CSRF-Token",F),this.xhr.addEventListener("load",$=>this.requestDidLoad($)),this.xhr.addEventListener("error",$=>this.requestDidError($))}get status(){return this.xhr.status}get response(){let{responseType:_,response:b}=this.xhr;return _=="json"?b:JSON.parse(b)}create(_){this.callback=_,this.xhr.send(JSON.stringify({blob:this.attributes}))}requestDidLoad(_){if(this.status>=200&&this.status<300){let{response:b}=this,{direct_upload:C}=b;delete b.direct_upload,this.attributes=b,this.directUploadData=C,this.callback(null,this.toJSON())}else this.requestDidError(_)}requestDidError(_){this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`)}toJSON(){let _={};for(let b in this.attributes)_[b]=this.attributes[b];return _}}class u{constructor(_){this.blob=_,this.file=_.file;let{url:b,headers:C}=_.directUploadData;this.xhr=new XMLHttpRequest,this.xhr.open("PUT",b,!0),this.xhr.responseType="text";for(let x in C)this.xhr.setRequestHeader(x,C[x]);this.xhr.addEventListener("load",x=>this.requestDidLoad(x)),this.xhr.addEventListener("error",x=>this.requestDidError(x))}create(_){this.callback=_,this.xhr.send(this.file.slice())}requestDidLoad(_){let{status:b,response:C}=this.xhr;b>=200&&b<300?this.callback(null,C):this.requestDidError(_)}requestDidError(_){this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`)}}let h=0;class m{constructor(_,b,C,x={}){this.id=++h,this.file=_,this.url=b,this.delegate=C,this.customHeaders=x}create(_){i.create(this.file,(b,C)=>{if(b){_(b);return}let x=new d(this.file,C,this.url,this.customHeaders);p(this.delegate,"directUploadWillCreateBlobWithXHR",x.xhr),x.create(F=>{if(F)_(F);else{let $=new u(x);p(this.delegate,"directUploadWillStoreFileWithXHR",$.xhr),$.create(U=>{U?_(U):_(null,x.toJSON())})}})})}}function p(z,_,...b){if(z&&typeof z[_]=="function")return z[_](...b)}class g{constructor(_,b){this.input=_,this.file=b,this.directUpload=new m(this.file,this.url,this),this.dispatch("initialize")}start(_){let b=document.createElement("input");b.type="hidden",b.name=this.input.name,this.input.insertAdjacentElement("beforebegin",b),this.dispatch("start"),this.directUpload.create((C,x)=>{C?(b.parentNode.removeChild(b),this.dispatchError(C)):b.value=x.signed_id,this.dispatch("end"),_(C)})}uploadRequestDidProgress(_){let b=_.loaded/_.total*100;b&&this.dispatch("progress",{progress:b})}get url(){return this.input.getAttribute("data-direct-upload-url")}dispatch(_,b={}){return b.file=this.file,b.id=this.directUpload.id,a(this.input,`direct-upload:${_}`,{detail:b})}dispatchError(_){this.dispatch("error",{error:_}).defaultPrevented||alert(_)}directUploadWillCreateBlobWithXHR(_){this.dispatch("before-blob-request",{xhr:_})}directUploadWillStoreFileWithXHR(_){this.dispatch("before-storage-request",{xhr:_}),_.upload.addEventListener("progress",b=>this.uploadRequestDidProgress(b))}}let v="input[type=file][data-direct-upload-url]:not([disabled])";class w{constructor(_){this.form=_,this.inputs=r(_,v).filter(b=>b.files.length)}start(_){let b=this.createDirectUploadControllers(),C=()=>{let x=b.shift();x?x.start(F=>{F?(_(F),this.dispatch("end")):C()}):(_(),this.dispatch("end"))};this.dispatch("start"),C()}createDirectUploadControllers(){let _=[];return this.inputs.forEach(b=>{l(b.files).forEach(C=>{let x=new g(b,C);_.push(x)})}),_}dispatch(_,b={}){return a(this.form,`direct-uploads:${_}`,{detail:b})}}let y="data-direct-uploads-processing",P=new WeakMap,O=!1;function R(){O||(O=!0,document.addEventListener("click",D,!0),document.addEventListener("submit",H,!0),document.addEventListener("ajax:before",q))}function D(z){let _=z.target.closest("button, input");_&&_.type==="submit"&&_.form&&P.set(_.form,_)}function H(z){G(z)}function q(z){z.target.tagName=="FORM"&&G(z)}function G(z){let _=z.target;if(_.hasAttribute(y)){z.preventDefault();return}let b=new w(_),{inputs:C}=b;C.length&&(z.preventDefault(),_.setAttribute(y,""),C.forEach(V),b.start(x=>{_.removeAttribute(y),x?C.forEach(K):ee(_)}))}function ee(z){let _=P.get(z)||o(z,"input[type=submit], button[type=submit]");if(_){let{disabled:b}=_;_.disabled=!1,_.focus(),_.click(),_.disabled=b}else _=document.createElement("input"),_.type="submit",_.style.display="none",z.appendChild(_),_.click(),z.removeChild(_);P.delete(z)}function V(z){z.disabled=!0}function K(z){z.disabled=!1}function J(){window.ActiveStorage&&R()}setTimeout(J,1);class j{constructor(_,b){this.attachment=_,this.element=b,this.directUpload=new m(_.file,this.directUploadUrl,this)}start(){this.directUpload.create(this.directUploadDidComplete.bind(this))}directUploadWillStoreFileWithXHR(_){_.upload.addEventListener("progress",b=>{let C=b.loaded/b.total*100;this.attachment.setUploadProgress(C)})}directUploadDidComplete(_,b){if(_)throw new Error(`Direct upload failed: ${_}`);this.attachment.setAttributes({sgid:b.attachable_sgid,url:this.createBlobUrl(b.signed_id,b.filename)})}createBlobUrl(_,b){return this.blobUrlTemplate.replace(":signed_id",_).replace(":filename",encodeURIComponent(b))}get directUploadUrl(){return this.element.dataset.directUploadUrl}get blobUrlTemplate(){return this.element.dataset.blobUrlTemplate}}addEventListener("trix-attachment-add",z=>{let{attachment:_,target:b}=z;_.file&&new j(_,b).start()})});})();
/*! Bundled license information:

bootstrap/dist/js/bootstrap.js:
  (*!
    * Bootstrap v5.3.3 (https://getbootstrap.com/)
    * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
    *)

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.12
  Copyright  2024 37signals LLC
   *)
*/
//# sourceMappingURL=/assets/application.js.map
