# Автозагрузка объявлений на Avito

Этот проект представляет собой веб-приложение на Ruby on Rails, которое подготавливает объявления для автозагрузки на платформу Avito. Приложение экспортирует объявления в формате Excel, который затем можно использовать для импорта на Avito.

## Стек технологий
   - Ruby 3.2.2
   - Ruby on Rails 7.1.3
   - GoodJob 4.1
   - PostgreSQL 16.1 
   - MongoDB 
   - Redis

## Установка

1. **Клонируйте репозиторий:**

    ```bash
    git clone https://github.com/eldar88e/ps_avito
    cd ps_avito
    ```

2. **Установите зависимости:**

   Убедитесь, что у вас установлены все необходимые гемы:

    ```bash
    bundle install
    nvm use
    yarn install
    ```

3. **Настройте базу данных:**

   Создайте базу данных и запустите миграции:

   ```bash
   rails db:create
   rails db:migrate
   ```

4. **Настройте переменные окружения:**

   Создайте файл `.env` и добавьте в него необходимые переменные окружения. Пример файла `.env`:

    ```bash
    RAILS_MASTER_KEY="your_master_key"
    REDIS_URL="redis://localhost:6379/1"
    YANDEX_API_KEY="your_yandex_api_key"
    DB_HOST="localhost"
    DB_USER="admin"
    DB_PASSWORD="admin"
    ```

5. **Запустите сервер:**

    ```bash
    bundle exec rails s
    bundle exec good_job start
    ```
   если используете Docker:
   ```bash
   docker-compose up --build
   docker-compose exec web rails db:prepare
   ```

6. **Перейдите пункт главного меню 'Settings' и заполните все поля**

## Использование

1. **Добавление объявлений:**

    Перейдите в раздел "Products" в вашем приложении и добавьте необходимые данные. Убедитесь, что все данные корректно заполнены.

2. **Добавление магазина:**

   Перейдите в раздел "Stores" в вашем приложении и введите все необходимые данные магазина, а также заполните поля client_id и client_secret для дальнейшей работы с Avito API. Так же в данном разделе добавьте минимум один адрес и улицу, затем настройте слои картинки для Avito.

3. **Экспорт в Excel:**

   После добавления объявлений, вы можете экспортировать их в Excel, выбрав соответствующую опцию в интерфейсе приложения. Экспортируемый файл будет готов для импорта на Avito.

4. **Настройка и запуск автозагрузки:**

   Перейдя в раздел "Avito" и выбрав списке необходимый магазин можете настроить параметры автозагрузки и запустить принудительную автозагрузку.

## Тестирование

Для запуска тестов используйте команду:

```bash
bundle exec rails rspec
``` 

## Разработка
Если вы хотите внести изменения в проект, создайте новую ветку и отправьте pull request. Пожалуйста, следуйте стандартам кодирования и добавляйте тесты для новых функций.

## Лицензия
Этот проект лицензируется на условиях MIT License.

## Контакты
Если у вас есть вопросы или предложения, вы можете связаться с нами по электронной почте: eminov-mus@ya.ru.

Этот проект не является официальным инструментом Avito и предназначен только для личного использования и обучения.
